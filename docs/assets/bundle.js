(function(){const I=document.createElement("link").relList;if(I&&I.supports&&I.supports("modulepreload"))return;for(const G of document.querySelectorAll('link[rel="modulepreload"]'))F(G);new MutationObserver(G=>{for(const et of G)if(et.type==="childList")for(const it of et.addedNodes)it.tagName==="LINK"&&it.rel==="modulepreload"&&F(it)}).observe(document,{childList:!0,subtree:!0});function P(G){const et={};return G.integrity&&(et.integrity=G.integrity),G.referrerPolicy&&(et.referrerPolicy=G.referrerPolicy),G.crossOrigin==="use-credentials"?et.credentials="include":G.crossOrigin==="anonymous"?et.credentials="omit":et.credentials="same-origin",et}function F(G){if(G.ep)return;G.ep=!0;const et=P(G);fetch(G.href,et)}})();function go(){}function Tb(T){return T()}function F1(){return Object.create(null)}function wd(T){T.forEach(Tb)}function af(T){return typeof T=="function"}function Yu(T,I){return T!=T?I==I:T!==I||T&&typeof T=="object"||typeof T=="function"}function Zx(T){return Object.keys(T).length===0}function xb(T,...I){if(T==null)return go;const P=T.subscribe(...I);return P.unsubscribe?()=>P.unsubscribe():P}function B1(T,I,P){T.$$.on_destroy.push(xb(I,P))}function U1(T,I,P){return T.set(P),I}const Jx=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ri(T,I){T.appendChild(I)}function Bu(T,I,P){T.insertBefore(I,P||null)}function Nd(T){T.parentNode&&T.parentNode.removeChild(T)}function Qx(T,I){for(let P=0;P<T.length;P+=1)T[P]&&T[P].d(I)}function Ji(T){return document.createElement(T)}function k1(T){return document.createElementNS("http://www.w3.org/2000/svg",T)}function Ab(T){return document.createTextNode(T)}function xn(){return Ab(" ")}function dh(T,I,P,F){return T.addEventListener(I,P,F),()=>T.removeEventListener(I,P,F)}function bi(T,I,P){P==null?T.removeAttribute(I):T.getAttribute(I)!==P&&T.setAttribute(I,P)}function tA(T){return Array.from(T.childNodes)}function z1(T,I,P,F){P==null?T.style.removeProperty(I):T.style.setProperty(I,P,F?"important":"")}function Fm(T,I,P){T.classList[P?"add":"remove"](I)}let Uu;function Fu(T){Uu=T}function eA(){if(!Uu)throw new Error("Function called outside component initialization");return Uu}function vb(T){eA().$$.on_mount.push(T)}const Id=[],H1=[];let Od=[];const Y1=[],aA=Promise.resolve();let _h=!1;function iA(){_h||(_h=!0,aA.then(Eb))}function uh(T){Od.push(T)}const th=new Set;let Ad=0;function Eb(){if(Ad!==0)return;const T=Uu;do{try{for(;Ad<Id.length;){const I=Id[Ad];Ad++,Fu(I),oA(I.$$)}}catch(I){throw Id.length=0,Ad=0,I}for(Fu(null),Id.length=0,Ad=0;H1.length;)H1.pop()();for(let I=0;I<Od.length;I+=1){const P=Od[I];th.has(P)||(th.add(P),P())}Od.length=0}while(Id.length);for(;Y1.length;)Y1.pop()();_h=!1,th.clear(),Fu(T)}function oA(T){if(T.fragment!==null){T.update(),wd(T.before_update);const I=T.dirty;T.dirty=[-1],T.fragment&&T.fragment.p(T.ctx,I),T.after_update.forEach(uh)}}function nA(T){const I=[],P=[];Od.forEach(F=>T.indexOf(F)===-1?I.push(F):P.push(F)),P.forEach(F=>F()),Od=I}const Hm=new Set;let sA;function Gm(T,I){T&&T.i&&(Hm.delete(T),T.i(I))}function ch(T,I,P,F){if(T&&T.o){if(Hm.has(T))return;Hm.add(T),sA.c.push(()=>{Hm.delete(T),F&&(P&&T.d(1),F())}),T.o(I)}else F&&F()}function mh(T){T&&T.c()}function Vm(T,I,P,F){const{fragment:G,after_update:et}=T.$$;G&&G.m(I,P),F||uh(()=>{const it=T.$$.on_mount.map(Tb).filter(af);T.$$.on_destroy?T.$$.on_destroy.push(...it):wd(it),T.$$.on_mount=[]}),et.forEach(uh)}function Xm(T,I){const P=T.$$;P.fragment!==null&&(nA(P.after_update),wd(P.on_destroy),P.fragment&&P.fragment.d(I),P.on_destroy=P.fragment=null,P.ctx=[])}function lA(T,I){T.$$.dirty[0]===-1&&(Id.push(T),iA(),T.$$.dirty.fill(0)),T.$$.dirty[I/31|0]|=1<<I%31}function of(T,I,P,F,G,et,it,s=[-1]){const ot=Uu;Fu(T);const ht=T.$$={fragment:null,ctx:[],props:et,update:go,not_equal:G,bound:F1(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(I.context||(ot?ot.$$.context:[])),callbacks:F1(),dirty:s,skip_bound:!1,root:I.target||ot.$$.root};it&&it(ht.root);let At=!1;if(ht.ctx=P?P(T,I.props||{},(Yt,Rt,...le)=>{const Kt=le.length?le[0]:Rt;return ht.ctx&&G(ht.ctx[Yt],ht.ctx[Yt]=Kt)&&(!ht.skip_bound&&ht.bound[Yt]&&ht.bound[Yt](Kt),At&&lA(T,Yt)),Rt}):[],ht.update(),At=!0,wd(ht.before_update),ht.fragment=F?F(ht.ctx):!1,I.target){if(I.hydrate){const Yt=tA(I.target);ht.fragment&&ht.fragment.l(Yt),Yt.forEach(Nd)}else ht.fragment&&ht.fragment.c();I.intro&&Gm(T.$$.fragment),Vm(T,I.target,I.anchor,I.customElement),Eb()}Fu(ot)}class nf{$destroy(){Xm(this,1),this.$destroy=go}$on(I,P){if(!af(P))return go;const F=this.$$.callbacks[I]||(this.$$.callbacks[I]=[]);return F.push(P),()=>{const G=F.indexOf(P);G!==-1&&F.splice(G,1)}}$set(I){this.$$set&&!Zx(I)&&(this.$$.skip_bound=!0,this.$$set(I),this.$$.skip_bound=!1)}}var An=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}function rA(T){if(T.__esModule)return T;var I=T.default;if(typeof I=="function"){var P=function F(){return this instanceof F?Reflect.construct(I,arguments,this.constructor):I.apply(this,arguments)};P.prototype=I.prototype}else P={};return Object.defineProperty(P,"__esModule",{value:!0}),Object.keys(T).forEach(function(F){var G=Object.getOwnPropertyDescriptor(T,F);Object.defineProperty(P,F,G.get?G:{enumerable:!0,get:function(){return T[F]}})}),P}var dA="Expected a function",G1=0/0,_A="[object Symbol]",uA=/^\s+|\s+$/g,cA=/^[-+]0x[0-9a-f]+$/i,mA=/^0b[01]+$/i,fA=/^0o[0-7]+$/i,pA=parseInt,hA=typeof An=="object"&&An&&An.Object===Object&&An,gA=typeof self=="object"&&self&&self.Object===Object&&self,yA=hA||gA||Function("return this")(),bA=Object.prototype,TA=bA.toString,xA=Math.max,AA=Math.min,eh=function(){return yA.Date.now()};function vA(T,I,P){var F,G,et,it,s,ot,ht=0,At=!1,Yt=!1,Rt=!0;if(typeof T!="function")throw new TypeError(dA);I=V1(I)||0,fh(P)&&(At=!!P.leading,Yt="maxWait"in P,et=Yt?xA(V1(P.maxWait)||0,I):et,Rt="trailing"in P?!!P.trailing:Rt);function le(Oa){var Ai=F,jt=G;return F=G=void 0,ht=Oa,it=T.apply(jt,Ai),it}function Kt(Oa){return ht=Oa,s=setTimeout(ue,I),At?le(Oa):it}function we(Oa){var Ai=Oa-ot,jt=Oa-ht,yo=I-Ai;return Yt?AA(yo,et-jt):yo}function Ot(Oa){var Ai=Oa-ot,jt=Oa-ht;return ot===void 0||Ai>=I||Ai<0||Yt&&jt>=et}function ue(){var Oa=eh();if(Ot(Oa))return be(Oa);s=setTimeout(ue,we(Oa))}function be(Oa){return s=void 0,Rt&&F?le(Oa):(F=G=void 0,it)}function Me(){s!==void 0&&clearTimeout(s),ht=0,F=ot=G=s=void 0}function Fa(){return s===void 0?it:be(eh())}function ia(){var Oa=eh(),Ai=Ot(Oa);if(F=arguments,G=this,ot=Oa,Ai){if(s===void 0)return Kt(ot);if(Yt)return s=setTimeout(ue,I),le(ot)}return s===void 0&&(s=setTimeout(ue,I)),it}return ia.cancel=Me,ia.flush=Fa,ia}function fh(T){var I=typeof T;return!!T&&(I=="object"||I=="function")}function EA(T){return!!T&&typeof T=="object"}function IA(T){return typeof T=="symbol"||EA(T)&&TA.call(T)==_A}function V1(T){if(typeof T=="number")return T;if(IA(T))return G1;if(fh(T)){var I=typeof T.valueOf=="function"?T.valueOf():T;T=fh(I)?I+"":I}if(typeof T!="string")return T===0?T:+T;T=T.replace(uA,"");var P=mA.test(T);return P||fA.test(T)?pA(T.slice(2),P?2:8):cA.test(T)?G1:+T}var Ib=vA;const X1=sf(Ib),vd=[];function OA(T,I){return{subscribe:xh(T,I).subscribe}}function xh(T,I=go){let P;const F=new Set;function G(s){if(Yu(T,s)&&(T=s,P)){const ot=!vd.length;for(const ht of F)ht[1](),vd.push(ht,T);if(ot){for(let ht=0;ht<vd.length;ht+=2)vd[ht][0](vd[ht+1]);vd.length=0}}}function et(s){G(s(T))}function it(s,ot=go){const ht=[s,ot];return F.add(ht),F.size===1&&(P=I(G)||go),s(T),()=>{F.delete(ht),F.size===0&&P&&(P(),P=null)}}return{set:G,update:et,subscribe:it}}function Ob(T,I,P){const F=!Array.isArray(T),G=F?[T]:T,et=I.length<2;return OA(P,it=>{let s=!1;const ot=[];let ht=0,At=go;const Yt=()=>{if(ht)return;At();const le=I(F?ot[0]:ot,it);et?it(le):At=af(le)?le:go},Rt=G.map((le,Kt)=>xb(le,we=>{ot[Kt]=we,ht&=~(1<<Kt),s&&Yt()},()=>{ht|=1<<Kt}));return s=!0,Yt(),function(){wd(Rt),At(),s=!1}})}const Km=xh(window.innerWidth),K1=xh(window.innerHeight);Ob(Km,T=>T<=560);Ob(Km,T=>T>1200);const{window:CA}=Jx;function SA(T){let I,P;return{c:go,m(F,G){I||(P=dh(CA,"resize",function(){af(X1(T[1],T[0]))&&X1(T[1],T[0]).apply(this,arguments)}),I=!0)},p(F,[G]){T=F},i:go,o:go,d(F){I=!1,P()}}}function RA(T,I,P){let F,G;B1(T,K1,s=>P(2,F=s)),B1(T,Km,s=>P(3,G=s));let{debounceDur:et=100}=I;const it=()=>{U1(Km,G=window.innerWidth,G),U1(K1,F=window.innerHeight,F)};return vb(()=>{it()}),T.$$set=s=>{"debounceDur"in s&&P(0,et=s.debounceDur)},[et,it]}class NA extends nf{constructor(I){super(),of(this,I,RA,SA,Yu,{debounceDur:0})}}var Cb={exports:{}};(function(T,I){(function(P,F){T.exports=F()})(An,function(){var P,F,G;function et(s,ot){if(!P)P=ot;else if(!F)F=ot;else{var ht="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+P+")(sharedChunk); ("+F+")(sharedChunk); self.onerror = null;",At={};P(At),G=ot(At),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(G.workerUrl=window.URL.createObjectURL(new Blob([ht],{type:"text/javascript"})))}}et(["exports"],function(s){var ot="3.3.0";let ht;const At={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(ht==null){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ht={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):e}catch{ht=e}}return ht},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!At.API_URL)return null;try{const e=new URL(At.API_URL);return e.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":e.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"};function Yt(e){return At.API_URL_REGEX.test(e)}function Rt(e){return e.indexOf("mapbox:")===0}function le(e){return At.API_CDN_URL_REGEX.test(e)}function Kt(e){return At.API_SPRITE_REGEX.test(e)}function we(e){return At.API_STYLE_REGEX.test(e)&&!Kt(e)}const Ot={create:"create",load:"load",fullLoad:"fullLoad"};function ue(e){const t=e.name.split("?")[0];return le(t)&&t.includes("mapbox-gl.js")?"javascript":le(t)&&t.includes("mapbox-gl.css")?"css":function(a){return At.API_FONTS_REGEX.test(a)}(t)?"fontRange":Kt(t)?"sprite":we(t)?"style":function(a){return At.API_TILEJSON_REGEX.test(a)}(t)?"tilejson":"other"}function be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Me=Fa;function Fa(e,t,a,o){this.cx=3*e,this.bx=3*(a-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=a,this.p2y=o}Fa.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var a=e,o=0;o<8;o++){var l=this.sampleCurveX(a)-e;if(Math.abs(l)<t)return a;var r=this.sampleCurveDerivativeX(a);if(Math.abs(r)<1e-6)break;a-=l/r}var u=0,m=1;for(a=e,o=0;o<20&&(l=this.sampleCurveX(a),!(Math.abs(l-e)<t));o++)e>l?u=a:m=a,a=.5*(m-u)+u;return a},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var ia=be(Me),Oa=Ai;function Ai(e,t){this.x=e,this.y=t}Ai.prototype={clone:function(){return new Ai(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,a=e.y-this.y;return t*t+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),a=Math.sin(e),o=a*this.x+t*this.y;return this.x=t*this.x-a*this.y,this.y=o,this},_rotateAround:function(e,t){var a=Math.cos(e),o=Math.sin(e),l=t.y+o*(this.x-t.x)+a*(this.y-t.y);return this.x=t.x+a*(this.x-t.x)-o*(this.y-t.y),this.y=l,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ai.convert=function(e){return e instanceof Ai?e:Array.isArray(e)?new Ai(e[0],e[1]):e};var jt=be(Oa);const yo=Math.PI/180,vn=180/Math.PI;function Oe(e){return e*yo}function ni(e){return e*vn}const ki=[[0,0],[1,0],[1,1],[0,1]];function oe(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,a=t*e;return 4*(e<.5?a:3*(e-t)+a-.75)}function Qi(e,t,a,o){const l=new ia(e,t,a,o);return function(r){return l.solve(r)}}const vi=Qi(.25,.1,.25,1);function Ve(e,t,a){return Math.min(a,Math.max(t,e))}function Po(e,t,a){return(a=Ve((a-e)/(t-e),0,1))*a*(3-2*a)}function wi(e,t,a){const o=a-t,l=((e-t)%o+o)%o+t;return l===t?a:l}function wo(e,t,a){if(!e.length)return a(null,[]);let o=e.length;const l=new Array(e.length);let r=null;e.forEach((u,m)=>{t(u,(p,h)=>{p&&(r=p),l[m]=h,--o==0&&a(r,l)})})}function zi(e,...t){for(const a of t)for(const o in a)e[o]=a[o];return e}let $n=1;function vs(){return $n++}function pl(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function hl(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function gl(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Zn(e,t){e.forEach(a=>{t[a]&&(t[a]=t[a].bind(t))})}function Qo(e,t){return e.indexOf(t,e.length-t.length)!==-1}function Hi(e,t,a){const o={};for(const l in e)o[l]=t.call(a||this,e[l],l,e);return o}function bo(e,t,a){const o={};for(const l in e)t.call(a||this,e[l],l,e)&&(o[l]=e[l]);return o}function uo(e){return Array.isArray(e)?e.map(uo):typeof e=="object"&&e?Hi(e,uo):e}const yr={};function ei(e){yr[e]||(typeof console<"u"&&console.warn(e),yr[e]=!0)}function To(e,t,a){return(a.y-e.y)*(t.x-e.x)>(t.y-e.y)*(a.x-e.x)}function Jn(e){let t=0;for(let a,o,l=0,r=e.length,u=r-1;l<r;u=l++)a=e[l],o=e[u],t+=(o.x-a.x)*(a.y+o.y);return t}function tn([e,t,a]){const o=Oe(t+90),l=Oe(a);return{x:e*Math.cos(o)*Math.sin(l),y:e*Math.sin(o)*Math.sin(l),z:e*Math.cos(l),azimuthal:t,polar:a}}function Ko(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Qn(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,o,l,r)=>{const u=l||r;return t[o]=!u||u.toLowerCase(),""}),t["max-age"]){const a=parseInt(t["max-age"],10);isNaN(a)?delete t["max-age"]:t["max-age"]=a}return t}let _i,Es,Is,xo,en,En,Mt=null;function X(e){try{const t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}function Q(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function dt(e,t,a,o){for(;t<a;){const l=t+a>>1;e[l]<o?t=l+1:a=l}return t}function Nt(e,t,a,o){for(;t<a;){const l=t+a>>1;e[l]<=o?t=l+1:a=l}return t}function Ft(){return _i==null&&(_i=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),_i}const Gt={now:()=>xo!==void 0?xo:performance.now(),setNow(e){xo=e},restoreNow(){xo=void 0},frame(e){const t=requestAnimationFrame(e);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(e,t=0){const{width:a,height:o}=e;en||(en=document.createElement("canvas"));const l=en.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return(a>en.width||o>en.height)&&(en.width=a,en.height=o),l.clearRect(-t,-t,a+2*t,o+2*t),l.drawImage(e,0,0,a,o),l.getImageData(-t,-t,a+2*t,o+2*t)},resolveURL:e=>(Es||(Es=document.createElement("a")),Es.href=e,Es.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Is==null&&(Is=window.matchMedia("(prefers-reduced-motion: reduce)")),Is.matches)},hasCanvasFingerprintNoise(){if(En!==void 0)return En;if(!Ft())return En=!1,!1;const e=new OffscreenCanvas(85,1),t=e.getContext("2d",{willReadFrequently:!0});let a=0;for(let l=0;l<e.width;++l)t.fillStyle=`rgba(${a++},${a++},${a++}, 255)`,t.fillRect(l,0,1,1);const o=t.getImageData(0,0,e.width,e.height);a=0;for(let l=0;l<o.data.length;++l)if(l%4!=3&&a++!==o.data[l])return En=!0,!0;return En=!1,!1}},ge="mapbox-tiles";let Lt=500,Te=50,ce,Ae;function Ze(){try{return caches}catch{}}function Ra(){const e=Ze();e&&!ce&&(ce=e.open(ge))}function Ha(e){const t=e.indexOf("?");if(t<0)return e;const a=["language","worldview"],o=new URLSearchParams,l=new URLSearchParams(e.slice(t));for(const r of a){const u=l.get(r);u&&o.set(r,u)}return`${e.slice(0,t)}?${o.toString()}`}function Na(e,t){const a=e.indexOf("?");if(a<0)return`${e}?${new URLSearchParams(t).toString()}`;const o=new URLSearchParams(e.slice(a));for(const l in t)o.set(l,t[l]);return`${e.slice(0,a)}?${o.toString()}`}let Ea=1/0;const Ta={supported:!1,testSupport:function(e){!Ei&&Ba&&(za?Gi(e):Ca=e)}};let Ca,Ba,Ei=!1,za=!1;const Ki=typeof self<"u"?self:{};function Gi(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Ba),e.isContextLost())return;Ta.supported=!0}catch{}e.deleteTexture(t),Ei=!0}Ki.document&&(Ba=Ki.document.createElement("img"),Ba.onload=function(){Ca&&Gi(Ca),Ca=null,za=!0},Ba.onerror=function(){Ei=!0,Ca=null},Ba.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const to={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(to);class fi extends Error{constructor(t,a,o){a===401&&Yt(o)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=a,this.url=o}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const ui=Ko()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,St=function(e,t){if(!(/^file:/.test(a=e.url)||/^file:/.test(ui())&&!/^\w+:/.test(a))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(o,l){const r=new AbortController,u=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:ui(),referrerPolicy:o.referrerPolicy,signal:r.signal});let m=!1,p=!1;const h=(y=u.url).indexOf("sku=")>0&&Yt(y);var y;o.type==="json"&&u.headers.set("Accept","application/json");const x=(C,R,N)=>{if(p)return;if(C&&C.message!=="SecurityError"&&ei(C.toString()),R&&N)return v(R);const W=Date.now();fetch(u).then(D=>{if(D.ok){const Y=h?D.clone():null;return v(D,Y,W)}return l(new fi(D.statusText,D.status,o.url))}).catch(D=>{D.name!=="AbortError"&&l(new Error(`${D.message} ${o.url}`))})},v=(C,R,N)=>{(o.type==="arrayBuffer"?C.arrayBuffer():o.type==="json"?C.json():C.text()).then(W=>{p||(R&&N&&function(D,Y,j){if(Ra(),!ce)return;const K=Qn(Y.headers.get("Cache-Control")||"");if(K["no-store"])return;const tt={status:Y.status,statusText:Y.statusText,headers:new Headers};Y.headers.forEach((_t,mt)=>tt.headers.set(mt,_t)),K["max-age"]&&tt.headers.set("Expires",new Date(j+1e3*K["max-age"]).toUTCString());const J=tt.headers.get("Expires");if(!J||new Date(J).getTime()-j<42e4)return;let st=Ha(D.url);if(Y.status===206){const _t=D.headers.get("Range");if(!_t)return;tt.status=200,st=Na(st,{range:_t})}(function(_t,mt){if(Ae===void 0)try{new Response(new ReadableStream),Ae=!0}catch{Ae=!1}Ae?mt(_t.body):_t.blob().then(mt)})(Y,_t=>{const mt=new Response(_t,tt);Ra(),ce&&ce.then(bt=>bt.put(st,mt)).catch(bt=>ei(bt.message))})}(u,R,N),m=!0,l(null,W,C.headers.get("Cache-Control"),C.headers.get("Expires")))}).catch(W=>{p||l(new Error(W.message))})};return h?function(C,R){if(Ra(),!ce)return R(null);ce.then(N=>{let W=Ha(C.url);const D=C.headers.get("Range");D&&(W=Na(W,{range:D})),N.match(W).then(Y=>{const j=function(K){if(!K)return!1;const tt=new Date(K.headers.get("Expires")||0),J=Qn(K.headers.get("Cache-Control")||"");return tt>Date.now()&&!J["no-cache"]}(Y);N.delete(W),j&&N.put(W,Y.clone()),R(null,Y,j)}).catch(R)}).catch(R)}(u,x):x(null,null),{cancel:()=>{p=!0,m||r.abort()}}}(e,t);if(Ko()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var a;return function(o,l){const r=new XMLHttpRequest;r.open(o.method||"GET",o.url,!0),o.type==="arrayBuffer"&&(r.responseType="arraybuffer");for(const u in o.headers)r.setRequestHeader(u,o.headers[u]);return o.type==="json"&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials=o.credentials==="include",r.onerror=()=>{l(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||r.status===0)&&r.response!==null){let u=r.response;if(o.type==="json")try{u=JSON.parse(r.response)}catch(m){return l(m)}l(null,u,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else l(new fi(r.statusText,r.status,o.url))},r.send(o.body),{cancel:()=>r.abort()}}(e,t)},Pt=function(e,t){return St(zi(e,{type:"arrayBuffer"}),t)};function Vt(e){const t=document.createElement("a");return t.href=e,t.protocol===location.protocol&&t.host===location.host}const te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let $t,ie;$t=[],ie=0;const ne=function(e,t){if(Ta.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ie>=At.MAX_PARALLEL_IMAGE_REQUESTS){const r={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return $t.push(r),r}ie++;let a=!1;const o=()=>{if(!a)for(a=!0,ie--;$t.length&&ie<At.MAX_PARALLEL_IMAGE_REQUESTS;){const r=$t.shift(),{requestParameters:u,callback:m,cancelled:p}=r;p||(r.cancel=ne(u,m).cancel)}},l=Pt(e,(r,u,m,p)=>{o(),r?t(r):u&&(self.createImageBitmap?function(h,y){const x=new Blob([new Uint8Array(h)],{type:"image/png"});createImageBitmap(x).then(v=>{y(null,v)}).catch(v=>{y(new Error(`Could not load image because of ${v.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(u,(h,y)=>t(h,y,m,p)):function(h,y){const x=new Image;x.onload=()=>{y(null,x),URL.revokeObjectURL(x.src),x.onload=null,requestAnimationFrame(()=>{x.src=te})},x.onerror=()=>y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(h)],{type:"image/png"});x.src=h.byteLength?URL.createObjectURL(v):te}(u,(h,y)=>t(h,y,m,p)))});return{cancel:()=>{l.cancel(),o()}}},Jt="01",re="NO_ACCESS_TOKEN",ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function De(e){const t=e.match(ee);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function na(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}const Ie="mapbox.eventData";function La(e){if(!e)return null;const t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(t[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Va{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const a=La(At.ACCESS_TOKEN);let o="";return o=a&&a.u?btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(l,r)=>String.fromCharCode(+("0x"+r)))):At.ACCESS_TOKEN||"",t?`${Ie}.${t}:${o}`:`${Ie}:${o}`}fetchEventData(){const t=X("localStorage"),a=this.getStorageKey(),o=this.getStorageKey("uuid");if(t)try{const l=localStorage.getItem(a);l&&(this.eventData=JSON.parse(l));const r=localStorage.getItem(o);r&&(this.anonId=r)}catch{ei("Unable to read from LocalStorage")}}saveEventData(){const t=X("localStorage"),a=this.getStorageKey(),o=this.getStorageKey("uuid"),l=this.anonId;if(t&&l)try{localStorage.setItem(o,l),Object.keys(this.eventData).length>=1&&localStorage.setItem(a,JSON.stringify(this.eventData))}catch{ei("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,a,o,l){if(!At.EVENTS_URL)return;const r=De(At.EVENTS_URL);r.params.push(`access_token=${l||At.ACCESS_TOKEN||""}`);const u={event:this.type,created:new Date(t).toISOString()},m=a?zi(u,a):u,p={url:na(r),headers:{"Content-Type":"text/plain"},body:JSON.stringify([m])};this.pendingRequest=function(h,y){return St(zi(h,{method:"POST"}),y)}(p,h=>{this.pendingRequest=null,o(h),this.saveEventData(),this.processRequests(l)})}queueRequest(t,a){this.queue.push(t),this.processRequests(a)}}const Ma=new class extends Va{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){At.EVENTS_URL&&At.ACCESS_TOKEN&&Array.isArray(e)&&e.some(a=>Rt(a)||Yt(a))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=La(At.ACCESS_TOKEN),a=t?t.u:At.ACCESS_TOKEN;let o=a!==this.eventData.tokenU;gl(this.anonId)||(this.anonId=pl(),o=!0);const l=this.queue.shift();if(this.eventData.lastSuccess){const r=new Date(this.eventData.lastSuccess),u=new Date(l),m=(l-this.eventData.lastSuccess)/864e5;o=o||m>=1||m<-1||r.getDate()!==u.getDate()}else o=!0;o?this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:ot,skuId:Jt,"enabled.telemetry":!1,userId:this.anonId},r=>{r||(this.eventData.lastSuccess=l,this.eventData.tokenU=a)},e):this.processRequests()}},pi=Ma.postTurnstileEvent.bind(Ma),Wi=new class extends Va{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,a,o){this.skuToken=t,this.errorCb=o,At.EVENTS_URL&&(a||At.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},a):this.errorCb(new Error(re)))}processRequests(e){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:a}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),gl(this.anonId)||(this.anonId=pl()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:ot,skuId:Jt,skuToken:this.skuToken,userId:this.anonId},o=>{o?this.errorCb(o):t&&(this.success[t]=!0)},e))}remove(){this.errorCb=null}},ya=Wi.postMapLoadEvent.bind(Wi),co=new class extends Va{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){At.EVENTS_URL&&(e||At.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:t,performanceData:a}=this.queue.shift(),o=function(l){const r=performance.getEntriesByType("resource"),u=performance.getEntriesByType("mark"),m=function(C){const R={};if(C){for(const N in C)if(N!=="other")for(const W of C[N]){const D=`${N}ResolveRangeMin`,Y=`${N}ResolveRangeMax`,j=`${N}RequestCount`,K=`${N}RequestCachedCount`;R[D]=Math.min(R[D]||1/0,W.startTime),R[Y]=Math.max(R[Y]||-1/0,W.responseEnd);const tt=J=>{R[J]===void 0&&(R[J]=0),++R[J]};W.transferSize!==void 0&&W.transferSize===0&&tt(K),tt(j)}}return R}(function(C,R){const N={};if(C)for(const W of C){const D=R(W);N[D]===void 0&&(N[D]=[]),N[D].push(W)}return N}(r,ue)),p=window.devicePixelRatio,h=navigator.connection||navigator.mozConnection||navigator.webkitConnection,y=h?h.effectiveType:void 0,x={counters:[],metadata:[],attributes:[]},v=(C,R,N)=>{N!=null&&C.push({name:R,value:N.toString()})};for(const C in m)v(x.counters,C,m[C]);if(l.interactionRange[0]!==1/0&&l.interactionRange[1]!==-1/0&&(v(x.counters,"interactionRangeMin",l.interactionRange[0]),v(x.counters,"interactionRangeMax",l.interactionRange[1])),u)for(const C of Object.keys(Ot)){const R=Ot[C],N=u.find(W=>W.name===R);N&&v(x.counters,R,N.startTime)}return v(x.counters,"visibilityHidden",l.visibilityHidden),v(x.attributes,"style",function(C){if(C)for(const R of C){const N=R.name.split("?")[0];if(we(N)){const W=N.split("/").slice(-2);if(W.length===2)return`mapbox://styles/${W[0]}/${W[1]}`}}}(r)),v(x.attributes,"terrainEnabled",l.terrainEnabled?"true":"false"),v(x.attributes,"fogEnabled",l.fogEnabled?"true":"false"),v(x.attributes,"projection",l.projection),v(x.attributes,"zoom",l.zoom),v(x.metadata,"devicePixelRatio",p),v(x.metadata,"connectionEffectiveType",y),v(x.metadata,"navigatorUserAgent",navigator.userAgent),v(x.metadata,"screenWidth",window.screen.width),v(x.metadata,"screenHeight",window.screen.height),v(x.metadata,"windowWidth",window.innerWidth),v(x.metadata,"windowHeight",window.innerHeight),v(x.metadata,"mapWidth",l.width/p),v(x.metadata,"mapHeight",l.height/p),v(x.metadata,"webglRenderer",l.renderer),v(x.metadata,"webglVendor",l.vendor),v(x.metadata,"sdkVersion",ot),v(x.metadata,"sdkIdentifier","mapbox-gl-js"),x}(a);for(const l of o.metadata);for(const l of o.counters);for(const l of o.attributes);this.postEvent(t,o,()=>{},e)}},Wo=co.postPerformanceEvent.bind(co),Mi=new class extends Va{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,a,o){if(!At.API_URL||!At.SESSION_PATH)return;const l=De(At.API_URL+At.SESSION_PATH);l.params.push(`sku=${t||""}`),l.params.push(`access_token=${o||At.ACCESS_TOKEN||""}`);const r={url:na(l),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(u,m){return St(zi(u,{method:"GET"}),m)}(r,u=>{this.pendingRequest=null,a(u),this.saveEventData(),this.processRequests(o)})}getSessionAPI(e,t,a,o){this.skuToken=t,this.errorCb=o,At.SESSION_PATH&&At.API_URL&&(a||At.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},a):this.errorCb(new Error(re)))}processRequests(e){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:a}=this.queue.shift();t&&this.success[t]||this.getSession(a,this.skuToken,o=>{o?this.errorCb(o):t&&(this.success[t]=!0)},e)}remove(){this.errorCb=null}},yl=Mi.getSessionAPI.bind(Mi),In=new Set;function Os(e,t,a){a[e]&&a[e].indexOf(t)!==-1||(a[e]=a[e]||[],a[e].push(t))}function Md(e,t,a){if(a&&a[e]){const o=a[e].indexOf(t);o!==-1&&a[e].splice(o,1)}}class ts{constructor(t,a={}){zi(this,a),this.type=t}}class Dd extends ts{constructor(t,a={}){super("error",zi({error:t},a))}}class Cs{on(t,a){return this._listeners=this._listeners||{},Os(t,a,this._listeners),this}off(t,a){return Md(t,a,this._listeners),Md(t,a,this._oneTimeListeners),this}once(t,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Os(t,a,this._oneTimeListeners),this):new Promise(o=>this.once(t,o))}fire(t,a){typeof t=="string"&&(t=new ts(t,a||{}));const o=t.type;if(this.listens(o)){t.target=this;const l=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(const m of l)m.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(const m of r)Md(o,m,this._oneTimeListeners),m.call(this,t);const u=this._eventedParent;u&&(zi(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof Dd&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,a){return this._eventedParent=t,this._eventedParentData=a,this}}s.y=void 0;var Vu={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function br(e){return(e=Math.round(e))<0?0:e>255?255:e}function Fd(e){return br(e[e.length-1]==="%"?parseFloat(e)/100*255:parseInt(e))}function Tr(e){return(t=e[e.length-1]==="%"?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Bd(e,t,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?e+(t-e)*a*6:2*a<1?t:3*a<2?e+(t-e)*(2/3-a)*6:e}try{s.y={}.parseCSSColor=function(e){var t,a=e.replace(/ /g,"").toLowerCase();if(a in Vu)return Vu[a].slice();if(a[0]==="#")return a.length===4?(t=parseInt(a.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:a.length===7&&(t=parseInt(a.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var o=a.indexOf("("),l=a.indexOf(")");if(o!==-1&&l+1===a.length){var r=a.substr(0,o),u=a.substr(o+1,l-(o+1)).split(","),m=1;switch(r){case"rgba":if(u.length!==4)return null;m=Tr(u.pop());case"rgb":return u.length!==3?null:[Fd(u[0]),Fd(u[1]),Fd(u[2]),m];case"hsla":if(u.length!==4)return null;m=Tr(u.pop());case"hsl":if(u.length!==3)return null;var p=(parseFloat(u[0])%360+360)%360/360,h=Tr(u[1]),y=Tr(u[2]),x=y<=.5?y*(h+1):y+h-y*h,v=2*y-x;return[br(255*Bd(v,x,p+1/3)),br(255*Bd(v,x,p)),br(255*Bd(v,x,p-1/3)),m];default:return null}}return null}}catch{}class eo{constructor(t,a,o,l=1){this.r=t,this.g=a,this.b=o,this.a=l}static parse(t){if(!t)return;if(t instanceof eo)return t;if(typeof t!="string")return;const a=s.y(t);return a?new eo(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[t,a,o,l]=this.toArray();return`rgba(${Math.round(t)},${Math.round(a)},${Math.round(o)},${l})`}toArray(){const{r:t,g:a,b:o,a:l}=this;return l===0?[0,0,0,0]:[255*t/l,255*a/l,255*o/l,l]}toArray01(){const{r:t,g:a,b:o,a:l}=this;return l===0?[0,0,0,0]:[t/l,a/l,o/l,l]}toArray01Scaled(t){const{r:a,g:o,b:l,a:r}=this;return r===0?[0,0,0]:[a/r*t,o/r*t,l/r*t]}toArray01PremultipliedAlpha(){const{r:t,g:a,b:o,a:l}=this;return[t,a,o,l]}toArray01Linear(){const{r:t,g:a,b:o,a:l}=this;return l===0?[0,0,0,0]:[Math.pow(t/l,2.2),Math.pow(a/l,2.2),Math.pow(o/l,2.2),l]}}eo.black=new eo(0,0,0,1),eo.white=new eo(1,1,1,1),eo.transparent=new eo(0,0,0,0),eo.red=new eo(1,0,0,1),eo.blue=new eo(0,0,1,1);var ci=eo;function sa(e,t,a){return e*(1-a)+t*a}function Xu(e,t,a){return e.map((o,l)=>sa(o,t[l],a))}var xr=Object.freeze({__proto__:null,array:Xu,color:function(e,t,a){return new ci(sa(e.r,t.r,a),sa(e.g,t.g,a),sa(e.b,t.b,a),sa(e.a,t.a,a))},number:sa});function Ud(e,...t){for(const a of t)for(const o in a)e[o]=a[o];return e}class df extends Error{constructor(t,a){super(a),this.message=a,this.key=t}}var jo=df;class kd{constructor(t,a=[]){this.parent=t,this.bindings={};for(const[o,l]of a)this.bindings[o]=l}concat(t){return new kd(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var _f=kd;const Ss={kind:"null"},_e={kind:"number"},xa={kind:"string"},Aa={kind:"boolean"},Ao={kind:"color"},Rs={kind:"object"},ua={kind:"value"},Ar={kind:"collator"},Ns={kind:"formatted"},bl={kind:"resolvedImage"};function ao(e,t){return{kind:"array",itemType:e,N:t}}function li(e){if(e.kind==="array"){const t=li(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}return e.kind}const Ne=[Ss,_e,xa,Aa,Ao,Ns,Rs,ao(ua),bl];function es(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!es(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const a of Ne)if(!es(a,t))return null}}return`Expected ${li(e)} but found ${li(t)} instead.`}function Be(e,t){return t.some(a=>a.kind===e.kind)}function On(e,t){return t.some(a=>a==="null"?e===null:a==="array"?Array.isArray(e):a==="object"?e&&!Array.isArray(e)&&typeof e=="object":a===typeof e)}class Je{constructor(t,a,o){this.sensitivity=t?a?"variant":"case":a?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,a){return this.collator.compare(t,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ls{constructor(t,a,o,l,r){this.text=t.normalize?t.normalize():t,this.image=a,this.scale=o,this.fontStack=l,this.textColor=r}}class Di{constructor(t){this.sections=t}static fromString(t){return new Di([new Ls(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.namePrimary.length!==0)}static factory(t){return t instanceof Di?t:Di.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const a of this.sections){if(a.image){t.push(["image",a.image.namePrimary]);continue}t.push(a.text);const o={};a.fontStack&&(o["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(o["font-scale"]=a.scale),a.textColor&&(o["text-color"]=["rgba"].concat(a.textColor.toArray())),t.push(o)}return t}}class Le{constructor(t){this.namePrimary=t.namePrimary,t.nameSecondary&&(this.nameSecondary=t.nameSecondary),this.available=t.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(t,a){return t?new Le({namePrimary:t,nameSecondary:a,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function Ku(e,t,a,o){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof a=="number"&&a>=0&&a<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[e,t,a,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[e,t,a,o]:[e,t,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function as(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof ci||e instanceof Je||e instanceof Di||e instanceof Le)return!0;if(Array.isArray(e)){for(const t of e)if(!as(t))return!1;return!0}if(typeof e=="object"){for(const t in e)if(!as(e[t]))return!1;return!0}return!1}function hi(e){if(e===null)return Ss;if(typeof e=="string")return xa;if(typeof e=="boolean")return Aa;if(typeof e=="number")return _e;if(e instanceof ci)return Ao;if(e instanceof Je)return Ar;if(e instanceof Di)return Ns;if(e instanceof Le)return bl;if(Array.isArray(e)){const t=e.length;let a;for(const o of e){const l=hi(o);if(a){if(a===l)continue;a=ua;break}a=l}return ao(a||ua,t)}return Rs}function vo(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof ci||e instanceof Di||e instanceof Le?e.toString():JSON.stringify(e)}class Cn{constructor(t,a){this.type=t,this.value=a}static parse(t,a){if(t.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!as(t[1]))return a.error("invalid value");const o=t[1];let l=hi(o);const r=a.expectedType;return l.kind!=="array"||l.N!==0||!r||r.kind!=="array"||typeof r.N=="number"&&r.N!==0||(l=r),new Cn(l,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ci?["rgba"].concat(this.value.toArray()):this.value instanceof Di?this.value.serialize():this.value}}var an=Cn,gi=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const zd={string:xa,number:_e,boolean:Aa,object:Rs};class Hd{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");let o,l=1;const r=t[0];if(r==="array"){let m,p;if(t.length>2){const h=t[1];if(typeof h!="string"||!(h in zd)||h==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);m=zd[h],l++}else m=ua;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return a.error('The length argument to "array" must be a positive integer literal',2);p=t[2],l++}o=ao(m,p)}else o=zd[r];const u=[];for(;l<t.length;l++){const m=a.parse(t[l],l,ua);if(!m)return null;u.push(m)}return new Hd(o,u)}evaluate(t){for(let a=0;a<this.args.length;a++){const o=this.args[a].evaluate(t);if(!es(this.type,hi(o)))return o;if(a===this.args.length-1)throw new gi(`Expected value to be of type ${li(this.type)}, but found ${li(hi(o))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,a=[t.kind];if(t.kind==="array"){const o=t.itemType;if(o.kind==="string"||o.kind==="number"||o.kind==="boolean"){a.push(o.kind);const l=t.N;(typeof l=="number"||this.args.length>1)&&a.push(l)}}return a.concat(this.args.map(o=>o.serialize()))}}var on=Hd;class Ps{constructor(t){this.type=Ns,this.sections=t}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const o=t[1];if(!Array.isArray(o)&&typeof o=="object")return a.error("First argument must be an image or text section.");const l=[];let r=!1;for(let u=1;u<=t.length-1;++u){const m=t[u];if(r&&typeof m=="object"&&!Array.isArray(m)){r=!1;let p=null;if(m["font-scale"]&&(p=a.parse(m["font-scale"],1,_e),!p))return null;let h=null;if(m["text-font"]&&(h=a.parse(m["text-font"],1,ao(xa)),!h))return null;let y=null;if(m["text-color"]&&(y=a.parse(m["text-color"],1,Ao),!y))return null;const x=l[l.length-1];x.scale=p,x.font=h,x.textColor=y}else{const p=a.parse(t[u],1,ua);if(!p)return null;const h=p.type.kind;if(h!=="string"&&h!=="value"&&h!=="null"&&h!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,l.push({content:p,scale:null,font:null,textColor:null})}}return new Ps(l)}evaluate(t){return new Di(this.sections.map(a=>{const o=a.content.evaluate(t);return hi(o)===bl?new Ls("",o,null,null,null):new Ls(vo(o),null,a.scale?a.scale.evaluate(t):null,a.font?a.font.evaluate(t).join(","):null,a.textColor?a.textColor.evaluate(t):null)}))}eachChild(t){for(const a of this.sections)t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const a of this.sections){t.push(a.content.serialize());const o={};a.scale&&(o["font-scale"]=a.scale.serialize()),a.font&&(o["text-font"]=a.font.serialize()),a.textColor&&(o["text-color"]=a.textColor.serialize()),t.push(o)}return t}}class is{constructor(t,a){this.type=bl,this.inputPrimary=t,this.inputSecondary=a}static parse(t,a){if(t.length<2)return a.error("Expected two or more arguments.");const o=a.parse(t[1],1,xa);if(!o)return a.error("No image name provided.");if(t.length===2)return new is(o);const l=a.parse(t[2],1,xa);return l?new is(o,l):a.error("Secondary image variant is not a string.")}evaluate(t){const a=Le.fromString(this.inputPrimary.evaluate(t),this.inputSecondary?this.inputSecondary.evaluate(t):void 0);return a&&t.availableImages&&(a.available=t.availableImages.indexOf(a.namePrimary)>-1,a.nameSecondary&&a.available&&t.availableImages&&(a.available=t.availableImages.indexOf(a.nameSecondary)>-1)),a}eachChild(t){t(this.inputPrimary),this.inputSecondary&&t(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function ws(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}const Mo={"to-boolean":Aa,"to-color":Ao,"to-number":_e,"to-string":xa};class vr{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const o=t[0],l=[];let r=Ss;if(o==="to-array"){if(!Array.isArray(t[1]))return null;const u=t[1].length;if(a.expectedType){if(a.expectedType.kind!=="array")return a.error(`Expected ${a.expectedType.kind} but found array.`);r=ao(a.expectedType.itemType,u)}else{if(!(u>0&&as(t[1][0])))return null;r=ao(hi(t[1][0]),u)}for(let m=0;m<u;m++){const p=t[1][m];let h;if(ws(p)==="array")h=a.parse(p,void 0,r.itemType);else{const y=ws(p);if(y!==r.itemType.kind)return a.error(`Expected ${r.itemType.kind} but found ${y}.`);h=a.registry.literal.parse(["literal",p===void 0?null:p],a)}if(!h)return null;l.push(h)}}else{if((o==="to-boolean"||o==="to-string")&&t.length!==2)return a.error("Expected one argument.");r=Mo[o];for(let u=1;u<t.length;u++){const m=a.parse(t[u],u,ua);if(!m)return null;l.push(m)}}return new vr(r,l)}evaluate(t){if(this.type.kind==="boolean")return!!this.args[0].evaluate(t);if(this.type.kind==="color"){let a,o;for(const l of this.args){if(a=l.evaluate(t),o=null,a instanceof ci)return a;if(typeof a=="string"){const r=t.parseColor(a);if(r)return r}else if(Array.isArray(a)&&(o=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Ku(a[0],a[1],a[2],a[3]),!o))return new ci(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new gi(o||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const o of this.args){if(a=o.evaluate(t),a===null)return 0;const l=Number(a);if(!isNaN(l))return l}throw new gi(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Di.fromString(vo(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?Le.fromString(vo(this.args[0].evaluate(t))):this.type.kind==="array"?this.args.map(a=>a.evaluate(t)):vo(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ps([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new is(this.args[0]).serialize();const t=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(a=>{t.push(a.serialize())}),t}}var nn=vr;const Tl=["Unknown","Point","LineString","Polygon"];var ju=class{constructor(e,t){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=e,this.options=t}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(e){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:a,y:o}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*t-e[0])+this.featureDistanceData.bearing[1]*(o*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ci.parse(e)),t}getConfig(e){return this.options?this.options.get(e):null}};class os{constructor(t,a,o,l,r){this.name=t,this.type=a,this._evaluate=o,this.args=l,this._overloadIndex=r}evaluate(t){if(!this._evaluate){const a=os.definitions[this.name];this._evaluate=Array.isArray(a)?a[2]:a.overloads[this._overloadIndex][1]}return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,a){const o=t[0],l=os.definitions[o];if(!l)return a.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(l)?l[0]:l.type,u=Array.isArray(l)?[[l[1],l[2]]]:l.overloads,m=[];let p=null,h=-1;for(const[y,x]of u){if(Array.isArray(y)&&y.length!==t.length-1)continue;m.push(y),h++,p=new ec(a.registry,a.path,null,a.scope,void 0,a._scope,a.options);const v=[];let C=!1;for(let R=1;R<t.length;R++){const N=t[R],W=Array.isArray(y)?y[R-1]:y.type,D=p.parse(N,1+v.length,W);if(!D){C=!0;break}v.push(D)}if(!C)if(Array.isArray(y)&&y.length!==v.length)p.error(`Expected ${y.length} arguments, but found ${v.length} instead.`);else{for(let R=0;R<v.length;R++){const N=Array.isArray(y)?y[R]:y.type,W=v[R];p.concat(R+1).checkSubtype(N,W.type)}if(p.errors.length===0)return new os(o,r,x,v,h)}}if(m.length===1)a.errors.push(...p.errors);else{const y=(m.length?m:u.map(([v])=>v)).map(qu).join(" | "),x=[];for(let v=1;v<t.length;v++){const C=a.parse(t[v],1+x.length);if(!C)return null;x.push(li(C.type))}a.error(`Expected arguments of type ${y}, but found (${x.join(", ")}) instead.`)}return null}static register(t,a){os.definitions=a;for(const o in a)t[o]=os}}function qu(e){return Array.isArray(e)?`(${e.map(li).join(", ")})`:`(${li(e.type)}...)`}var ra=os;class xl{constructor(t,a,o){this.type=Ar,this.locale=o,this.caseSensitive=t,this.diacriticSensitive=a}static parse(t,a){if(t.length!==2)return a.error("Expected one argument.");const o=t[1];if(typeof o!="object"||Array.isArray(o))return a.error("Collator options argument must be an object.");const l=a.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,Aa);if(!l)return null;const r=a.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,Aa);if(!r)return null;let u=null;return o.locale&&(u=a.parse(o.locale,1,xa),!u)?null:new xl(l,r,u)}evaluate(t){return new Je(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}var Yd={exports:{}};Yd.exports=function(){function e(o,l,r,u,m){for(;u>r;){if(u-r>600){var p=u-r+1,h=l-r+1,y=Math.log(p),x=.5*Math.exp(2*y/3),v=.5*Math.sqrt(y*x*(p-x)/p)*(h-p/2<0?-1:1);e(o,l,Math.max(r,Math.floor(l-h*x/p+v)),Math.min(u,Math.floor(l+(p-h)*x/p+v)),m)}var C=o[l],R=r,N=u;for(t(o,r,l),m(o[u],C)>0&&t(o,r,u);R<N;){for(t(o,R,N),R++,N--;m(o[R],C)<0;)R++;for(;m(o[N],C)>0;)N--}m(o[r],C)===0?t(o,r,N):t(o,++N,u),N<=l&&(r=N+1),l<=N&&(u=N-1)}}function t(o,l,r){var u=o[l];o[l]=o[r],o[r]=u}function a(o,l){return o<l?-1:o>l?1:0}return function(o,l,r,u,m){e(o,l,r||0,u||o.length-1,m||a)}}();var uf=be(Yd.exports);function cf(e){let t=0;for(let a,o,l=0,r=e.length,u=r-1;l<r;u=l++)a=e[l],o=e[u],t+=(o.x-a.x)*(a.y+o.y);return t}function Sn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Rn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Er(e,t,a){const o=e[0]-t[0],l=e[1]-t[1],r=e[0]-a[0],u=e[1]-a[1];return o*u-r*l==0&&o*r<=0&&l*u<=0}function Ws(e,t,a=!1){let o=!1;for(let m=0,p=t.length;m<p;m++){const h=t[m];for(let y=0,x=h.length,v=x-1;y<x;v=y++){const C=h[v],R=h[y];if(Er(e,C,R))return a;(r=C)[1]>(l=e)[1]!=(u=R)[1]>l[1]&&l[0]<(u[0]-r[0])*(l[1]-r[1])/(u[1]-r[1])+r[0]&&(o=!o)}}var l,r,u;return o}function Gd(e,t,a,o){const l=o[0]-a[0],r=o[1]-a[1],u=(e[0]-a[0])*r-l*(e[1]-a[1]),m=(t[0]-a[0])*r-l*(t[1]-a[1]);return u>0&&m<0||u<0&&m>0}function sn(e,t,a,o){return(l=[o[0]-a[0],o[1]-a[1]])[0]*(r=[t[0]-e[0],t[1]-e[1]])[1]-l[1]*r[0]!=0&&!(!Gd(e,t,a,o)||!Gd(a,o,e,t));var l,r}const Nn=8192;function Al(e,t){const a=(180+e[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,l=Math.pow(2,t.z);return[Math.round(a*l*Nn),Math.round(o*l*Nn)]}function Vd(e,t){for(let a=0;a<t.length;a++)if(Ws(e,t[a]))return!0;return!1}function Xd(e,t,a){for(const o of a)for(let l=0,r=o.length,u=r-1;l<r;u=l++)if(sn(e,t,o[u],o[l]))return!0;return!1}function Eo(e,t){for(let a=0;a<e.length;++a)if(!Ws(e[a],t))return!1;for(let a=0;a<e.length-1;++a)if(Xd(e[a],e[a+1],t))return!1;return!0}function $u(e,t){for(let a=0;a<t.length;a++)if(Eo(e,t[a]))return!0;return!1}function Kd(e,t,a){const o=[];for(let l=0;l<e.length;l++){const r=[];for(let u=0;u<e[l].length;u++){const m=Al(e[l][u],a);Sn(t,m),r.push(m)}o.push(r)}return o}function jd(e,t,a){const o=[];for(let l=0;l<e.length;l++){const r=Kd(e[l],t,a);o.push(r)}return o}function qd(e,t,a,o){if(e[0]<a[0]||e[0]>a[2]){const l=.5*o;let r=e[0]-a[0]>l?-o:a[0]-e[0]>l?o:0;r===0&&(r=e[0]-a[2]>l?-o:a[2]-e[0]>l?o:0),e[0]+=r}Sn(t,e)}function $d(e,t,a,o){const l=Math.pow(2,o.z)*Nn,r=[o.x*Nn,o.y*Nn],u=[];if(!e)return u;for(const m of e)for(const p of m){const h=[p.x+r[0],p.y+r[1]];qd(h,t,a,l),u.push(h)}return u}function Zd(e,t,a,o){const l=Math.pow(2,o.z)*Nn,r=[o.x*Nn,o.y*Nn],u=[];if(!e)return u;for(const p of e){const h=[];for(const y of p){const x=[y.x+r[0],y.y+r[1]];Sn(t,x),h.push(x)}u.push(h)}if(t[2]-t[0]<=l/2){(m=t)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(const p of u)for(const h of p)qd(h,t,a,l)}var m;return u}class Ms{constructor(t,a){this.type=Aa,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(as(t[1])){const o=t[1];if(o.type==="FeatureCollection")for(let l=0;l<o.features.length;++l){const r=o.features[l].geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Ms(o,o.features[l].geometry)}else if(o.type==="Feature"){const l=o.geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new Ms(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Ms(o,o)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,o){const l=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],u=a.canonicalID();if(!u)return!1;if(o.type==="Polygon"){const m=Kd(o.coordinates,r,u),p=$d(a.geometry(),l,r,u);if(!Rn(l,r))return!1;for(const h of p)if(!Ws(h,m))return!1}if(o.type==="MultiPolygon"){const m=jd(o.coordinates,r,u),p=$d(a.geometry(),l,r,u);if(!Rn(l,r))return!1;for(const h of p)if(!Vd(h,m))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,o){const l=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],u=a.canonicalID();if(!u)return!1;if(o.type==="Polygon"){const m=Kd(o.coordinates,r,u),p=Zd(a.geometry(),l,r,u);if(!Rn(l,r))return!1;for(const h of p)if(!Eo(h,m))return!1}if(o.type==="MultiPolygon"){const m=jd(o.coordinates,r,u),p=Zd(a.geometry(),l,r,u);if(!Rn(l,r))return!1;for(const h of p)if(!$u(h,m))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Ir=Ms,vl={exports:{}};vl.exports=function(){var e={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},t=1/298.257223563,a=t*(2-t),o=Math.PI/180,l=function(h,y){if(h===void 0)throw new Error("No latitude given.");if(y&&!e[y])throw new Error("Unknown unit "+y+". Use one of: "+Object.keys(e).join(", "));var x=6378.137*o*(y?e[y]:1),v=Math.cos(h*o),C=1/(1-a*(1-v*v)),R=Math.sqrt(C);this.kx=x*R*v,this.ky=x*R*C*(1-a)},r={units:{configurable:!0}};function u(h,y){return h[0]===y[0]&&h[1]===y[1]}function m(h,y,x){var v=p(y[0]-h[0]);return[h[0]+v*x,h[1]+(y[1]-h[1])*x]}function p(h){for(;h<-180;)h+=360;for(;h>180;)h-=360;return h}return l.fromTile=function(h,y,x){var v=Math.PI*(1-2*(h+.5)/Math.pow(2,y)),C=Math.atan(.5*(Math.exp(v)-Math.exp(-v)))/o;return new l(C,x)},r.units.get=function(){return e},l.prototype.distance=function(h,y){var x=p(h[0]-y[0])*this.kx,v=(h[1]-y[1])*this.ky;return Math.sqrt(x*x+v*v)},l.prototype.bearing=function(h,y){var x=p(y[0]-h[0])*this.kx;return Math.atan2(x,(y[1]-h[1])*this.ky)/o},l.prototype.destination=function(h,y,x){var v=x*o;return this.offset(h,Math.sin(v)*y,Math.cos(v)*y)},l.prototype.offset=function(h,y,x){return[h[0]+y/this.kx,h[1]+x/this.ky]},l.prototype.lineDistance=function(h){for(var y=0,x=0;x<h.length-1;x++)y+=this.distance(h[x],h[x+1]);return y},l.prototype.area=function(h){for(var y=0,x=0;x<h.length;x++)for(var v=h[x],C=0,R=v.length,N=R-1;C<R;N=C++)y+=p(v[C][0]-v[N][0])*(v[C][1]+v[N][1])*(x?-1:1);return Math.abs(y)/2*this.kx*this.ky},l.prototype.along=function(h,y){var x=0;if(y<=0)return h[0];for(var v=0;v<h.length-1;v++){var C=h[v],R=h[v+1],N=this.distance(C,R);if((x+=N)>y)return m(C,R,(y-(x-N))/N)}return h[h.length-1]},l.prototype.pointToSegmentDistance=function(h,y,x){var v=y[0],C=y[1],R=p(x[0]-v)*this.kx,N=(x[1]-C)*this.ky,W=0;return R===0&&N===0||((W=(p(h[0]-v)*this.kx*R+(h[1]-C)*this.ky*N)/(R*R+N*N))>1?(v=x[0],C=x[1]):W>0&&(v+=R/this.kx*W,C+=N/this.ky*W)),R=p(h[0]-v)*this.kx,N=(h[1]-C)*this.ky,Math.sqrt(R*R+N*N)},l.prototype.pointOnLine=function(h,y){for(var x,v,C,R,N=1/0,W=0;W<h.length-1;W++){var D=h[W][0],Y=h[W][1],j=p(h[W+1][0]-D)*this.kx,K=(h[W+1][1]-Y)*this.ky,tt=0;j===0&&K===0||((tt=(p(y[0]-D)*this.kx*j+(y[1]-Y)*this.ky*K)/(j*j+K*K))>1?(D=h[W+1][0],Y=h[W+1][1]):tt>0&&(D+=j/this.kx*tt,Y+=K/this.ky*tt));var J=(j=p(y[0]-D)*this.kx)*j+(K=(y[1]-Y)*this.ky)*K;J<N&&(N=J,x=D,v=Y,C=W,R=tt)}return{point:[x,v],index:C,t:Math.max(0,Math.min(1,R))}},l.prototype.lineSlice=function(h,y,x){var v=this.pointOnLine(x,h),C=this.pointOnLine(x,y);if(v.index>C.index||v.index===C.index&&v.t>C.t){var R=v;v=C,C=R}var N=[v.point],W=v.index+1,D=C.index;!u(x[W],N[0])&&W<=D&&N.push(x[W]);for(var Y=W+1;Y<=D;Y++)N.push(x[Y]);return u(x[D],C.point)||N.push(C.point),N},l.prototype.lineSliceAlong=function(h,y,x){for(var v=0,C=[],R=0;R<x.length-1;R++){var N=x[R],W=x[R+1],D=this.distance(N,W);if((v+=D)>h&&C.length===0&&C.push(m(N,W,(h-(v-D))/D)),v>=y)return C.push(m(N,W,(y-(v-D))/D)),C;v>h&&C.push(W)}return C},l.prototype.bufferPoint=function(h,y){var x=y/this.ky,v=y/this.kx;return[h[0]-v,h[1]-x,h[0]+v,h[1]+x]},l.prototype.bufferBBox=function(h,y){var x=y/this.ky,v=y/this.kx;return[h[0]-v,h[1]-x,h[2]+v,h[3]+x]},l.prototype.insideBBox=function(h,y){return p(h[0]-y[0])>=0&&p(h[0]-y[2])<=0&&h[1]>=y[1]&&h[1]<=y[3]},Object.defineProperties(l,r),l}();var Ln=be(vl.exports),Jd={exports:{}};Jd.exports=function(){var e=function(a,o){if(a===void 0&&(a=[]),o===void 0&&(o=t),this.data=a,this.length=this.data.length,this.compare=o,this.length>0)for(var l=(this.length>>1)-1;l>=0;l--)this._down(l)};function t(a,o){return a<o?-1:a>o?1:0}return e.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(this.length!==0){var a=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),a}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(a){for(var o=this.data,l=this.compare,r=o[a];a>0;){var u=a-1>>1,m=o[u];if(l(r,m)>=0)break;o[a]=m,a=u}o[a]=r},e.prototype._down=function(a){for(var o=this.data,l=this.compare,r=this.length>>1,u=o[a];a<r;){var m=1+(a<<1),p=o[m],h=m+1;if(h<this.length&&l(o[h],p)<0&&(m=h,p=o[h]),l(p,u)>=0)break;o[a]=p,a=m}o[a]=u},e}();var Io=be(Jd.exports),se=8192;function Or(e,t){return t.dist-e.dist}const Qd=100,El=50;function t_(e){const t=[1/0,1/0,-1/0,-1/0];if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0}function Pn(e){return e[1]-e[0]+1}function Do(e,t){const a=e[1]>=e[0]&&e[1]<t;return a||console.warn("Distance Expression: Index is out of range"),a}function e_(e,t){if(e[0]>e[1])return[null,null];const a=Pn(e);if(t){if(a===2)return[e,null];const o=Math.floor(a/2);return[[e[0],e[0]+o],[e[0]+o,e[1]]]}{if(a===1)return[e,null];const o=Math.floor(a/2)-1;return[[e[0],e[0]+o],[e[0]+o+1,e[1]]]}}function ns(e,t){const a=[1/0,1/0,-1/0,-1/0];if(!Do(t,e.length))return a;for(let o=t[0];o<=t[1];++o)Sn(a,e[o]);return a}function Cr(e){const t=[1/0,1/0,-1/0,-1/0];for(let a=0;a<e.length;++a)for(let o=0;o<e[a].length;++o)Sn(t,e[a][o]);return t}function ss(e,t,a){if(t_(e)||t_(t))return NaN;let o=0,l=0;return e[2]<t[0]&&(o=t[0]-e[2]),e[0]>t[2]&&(o=e[0]-t[2]),e[1]>t[3]&&(l=e[1]-t[3]),e[3]<t[1]&&(l=t[1]-e[3]),a.distance([0,0],[o,l])}function a_(e){return 360*e-180}function mf(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Ds(e,t){const a=Math.pow(2,t.z),o=(e.y/se+t.y)/a;return[a_((e.x/se+t.x)/a),mf(o)]}function ff(e,t){const a=[];for(let o=0;o<e.length;++o)a.push(Ds(e[o],t));return a}function Zu(e,t,a){const o=a.pointOnLine(t,e).point;return a.distance(e,o)}function Ju(e,t,a,o,l){const r=a.slice(o[0],o[1]+1);let u=1/0;for(let m=t[0];m<=t[1];++m)if((u=Math.min(u,Zu(e[m],r,l)))===0)return 0;return u}function i_(e,t,a,o,l){const r=Math.min(l.pointToSegmentDistance(e,a,o),l.pointToSegmentDistance(t,a,o)),u=Math.min(l.pointToSegmentDistance(a,e,t),l.pointToSegmentDistance(o,e,t));return Math.min(r,u)}function pf(e,t,a,o,l){if(!Do(t,e.length)||!Do(o,a.length))return NaN;let r=1/0;for(let u=t[0];u<t[1];++u)for(let m=o[0];m<o[1];++m){if(sn(e[u],e[u+1],a[m],a[m+1]))return 0;r=Math.min(r,i_(e[u],e[u+1],a[m],a[m+1],l))}return r}function hf(e,t,a,o,l){if(!Do(t,e.length)||!Do(o,a.length))return NaN;let r=1/0;for(let u=t[0];u<=t[1];++u)for(let m=o[0];m<=o[1];++m)if((r=Math.min(r,l.distance(e[u],a[m])))===0)return r;return r}function gf(e,t,a){if(Ws(e,t,!0))return 0;let o=1/0;for(const l of t){const r=l.length;if(r<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(l[0]!==l[r-1]&&(o=Math.min(o,a.pointToSegmentDistance(e,l[r-1],l[0])))===0||(o=Math.min(o,Zu(e,l,a)))===0)return o}return o}function Qu(e,t,a,o){if(!Do(t,e.length))return NaN;for(let r=t[0];r<=t[1];++r)if(Ws(e[r],a,!0))return 0;let l=1/0;for(let r=t[0];r<t[1];++r)for(const u of a)for(let m=0,p=u.length,h=p-1;m<p;h=m++){if(sn(e[r],e[r+1],u[h],u[m]))return 0;l=Math.min(l,i_(e[r],e[r+1],u[h],u[m],o))}return l}function Il(e,t){for(const a of e)for(let o=0;o<=a.length-1;++o)if(Ws(a[o],t,!0))return!0;return!1}function yf(e,t,a,o=1/0){const l=Cr(e),r=Cr(t);if(o!==1/0&&ss(l,r,a)>=o)return o;if(Rn(l,r)){if(Il(e,t))return 0}else if(Il(t,e))return 0;let u=o;for(const m of e)for(let p=0,h=m.length,y=h-1;p<h;y=p++)for(const x of t)for(let v=0,C=x.length,R=C-1;v<C;R=v++){if(sn(m[y],m[p],x[R],x[v]))return 0;u=Math.min(u,i_(m[y],m[p],x[R],x[v],a))}return u}function Sr(e,t,a,o,l,r,u){if(r===null||u===null)return;const m=ss(ns(o,r),ns(l,u),a);m<t&&e.push({dist:m,range1:r,range2:u})}function o_(e,t,a,o,l=1/0){let r=Math.min(o.distance(e[0],a[0][0]),l);if(r===0)return r;const u=new Io([{dist:0,range1:[0,e.length-1],range2:[0,0]}],Or),m=t?El:Qd,p=Cr(a);for(;u.length;){const h=u.pop();if(h.dist>=r)continue;const y=h.range1;if(Pn(y)<=m){if(!Do(y,e.length))return NaN;if(t){const x=Qu(e,y,a,o);if((r=Math.min(r,x))===0)return r}else for(let x=y[0];x<=y[1];++x){const v=gf(e[x],a,o);if((r=Math.min(r,v))===0)return r}}else{const x=e_(y,t);if(x[0]!==null){const v=ss(ns(e,x[0]),p,o);v<r&&u.push({dist:v,range1:x[0],range2:[0,0]})}if(x[1]!==null){const v=ss(ns(e,x[1]),p,o);v<r&&u.push({dist:v,range1:x[1],range2:[0,0]})}}}return r}function tc(e,t,a,o,l,r=1/0){let u=Math.min(r,l.distance(e[0],a[0]));if(u===0)return u;const m=new Io([{dist:0,range1:[0,e.length-1],range2:[0,a.length-1]}],Or),p=t?El:Qd,h=o?El:Qd;for(;m.length;){const y=m.pop();if(y.dist>=u)continue;const x=y.range1,v=y.range2;if(Pn(x)<=p&&Pn(v)<=h){if(!Do(x,e.length)||!Do(v,a.length))return NaN;if(t&&o?u=Math.min(u,pf(e,x,a,v,l)):t||o?t&&!o?u=Math.min(u,Ju(a,v,e,x,l)):!t&&o&&(u=Math.min(u,Ju(e,x,a,v,l))):u=Math.min(u,hf(e,x,a,v,l)),u===0)return u}else{const C=e_(x,t),R=e_(v,o);Sr(m,u,l,e,a,C[0],R[0]),Sr(m,u,l,e,a,C[0],R[1]),Sr(m,u,l,e,a,C[1],R[0]),Sr(m,u,l,e,a,C[1],R[1])}}return u}function n_(e,t,a,o,l=1/0){let r=l;const u=ns(e,[0,e.length-1]);for(const m of a)if(!(r!==1/0&&ss(u,ns(m,[0,m.length-1]),o)>=r)&&(r=Math.min(r,tc(e,t,m,!0,o,r)),r===0))return r;return r}function Rr(e,t,a,o,l=1/0){let r=l;const u=ns(e,[0,e.length-1]);for(const m of a){if(r!==1/0&&ss(u,Cr(m),o)>=r)continue;const p=o_(e,t,m,o,r);if(isNaN(p))return p;if((r=Math.min(r,p))===0)return r}return r}function s_(e){return e==="Point"||e==="MultiPoint"||e==="LineString"||e==="MultiLineString"||e==="Polygon"||e==="MultiPolygon"}class ls{constructor(t,a){this.type=_e,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'distance' expression requires either one argument, but found ' ${t.length-1} instead.`);if(as(t[1])){const o=t[1];if(o.type==="FeatureCollection"){for(let l=0;l<o.features.length;++l)if(s_(o.features[l].geometry.type))return new ls(o,o.features[l].geometry)}else if(o.type==="Feature"){if(s_(o.geometry.type))return new ls(o,o.geometry)}else if(s_(o.type))return new ls(o,o)}return a.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(t){const a=t.geometry(),o=t.canonicalID();if(a!=null&&o!=null){if(t.geometryType()==="Point")return function(l,r,u){const m=[];for(const h of l)for(const y of h)m.push(Ds(y,r));const p=new Ln(m[0][1],"meters");return u.type==="Point"||u.type==="MultiPoint"||u.type==="LineString"?tc(m,!1,u.type==="Point"?[u.coordinates]:u.coordinates,u.type==="LineString",p):u.type==="MultiLineString"?n_(m,!1,u.coordinates,p):u.type==="Polygon"||u.type==="MultiPolygon"?Rr(m,!1,u.type==="Polygon"?[u.coordinates]:u.coordinates,p):null}(a,o,this.geometries);if(t.geometryType()==="LineString")return function(l,r,u){const m=[];for(const h of l){const y=[];for(const x of h)y.push(Ds(x,r));m.push(y)}const p=new Ln(m[0][0][1],"meters");if(u.type==="Point"||u.type==="MultiPoint"||u.type==="LineString")return n_(u.type==="Point"?[u.coordinates]:u.coordinates,u.type==="LineString",m,p);if(u.type==="MultiLineString"){let h=1/0;for(let y=0;y<u.coordinates.length;y++){const x=n_(u.coordinates[y],!0,m,p,h);if(isNaN(x))return x;if((h=Math.min(h,x))===0)return h}return h}if(u.type==="Polygon"||u.type==="MultiPolygon"){let h=1/0;for(let y=0;y<m.length;y++){const x=Rr(m[y],!0,u.type==="Polygon"?[u.coordinates]:u.coordinates,p,h);if(isNaN(x))return x;if((h=Math.min(h,x))===0)return h}return h}return null}(a,o,this.geometries);if(t.geometryType()==="Polygon")return function(l,r,u){const m=[];for(const h of function(y,x){const v=y.length;if(v<=1)return[y];const C=[];let R,N;for(let W=0;W<v;W++){const D=cf(y[W]);D!==0&&(y[W].area=Math.abs(D),N===void 0&&(N=D<0),N===D<0?(R&&C.push(R),R=[y[W]]):R.push(y[W]))}return R&&C.push(R),C}(l)){const y=[];for(let x=0;x<h.length;++x)y.push(ff(h[x],r));m.push(y)}const p=new Ln(m[0][0][0][1],"meters");if(u.type==="Point"||u.type==="MultiPoint"||u.type==="LineString")return Rr(u.type==="Point"?[u.coordinates]:u.coordinates,u.type==="LineString",m,p);if(u.type==="MultiLineString"){let h=1/0;for(let y=0;y<u.coordinates.length;y++){const x=Rr(u.coordinates[y],!0,m,p,h);if(isNaN(x))return x;if((h=Math.min(h,x))===0)return h}return h}return u.type==="Polygon"||u.type==="MultiPolygon"?function(h,y,x){let v=1/0;for(const C of h)for(const R of y){const N=yf(C,R,x,v);if(isNaN(N))return N;if((v=Math.min(v,N))===0)return v}return v}(u.type==="Polygon"?[u.coordinates]:u.coordinates,m,p):null}(a,o,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var Nr=ls;function Ol(e,t){switch(e){case"string":return vo(t);case"number":return+t;case"boolean":return!!t;case"color":return ci.parse(t);case"formatted":return Di.fromString(vo(t));case"resolvedImage":return Le.fromString(vo(t))}return t}function l_(e,t,a,o){return o!==void 0&&(e=o*Math.round(e/o)),t!==void 0&&e<t&&(e=t),a!==void 0&&e>a&&(e=a),e}class Cl{constructor(t,a,o){this.type=t,this.key=a,this.scope=o}static parse(t,a){let o=a.expectedType;if(o==null&&(o=ua),t.length<2||t.length>3)return a.error("Invalid number of arguments for 'config' expression.");const l=a.parse(t[1],1);if(!(l instanceof an))return a.error("Key name of 'config' expression must be a string literal.");if(t.length>=3){const r=a.parse(t[2],2);return r instanceof an?new Cl(o,vo(l.value),vo(r.value)):a.error("Scope of 'config' expression must be a string literal.")}return new Cl(o,vo(l.value))}evaluate(t){const a=[this.key,this.scope,t.scope].filter(Boolean).join(""),o=t.getConfig(a);if(!o)return null;const{type:l,value:r,values:u,minValue:m,maxValue:p,stepValue:h}=o,y=o.default.evaluate(t);let x=y;if(r){const v=t.scope;t.scope=(v||"").split("").slice(1).join(""),x=r.evaluate(t),t.scope=v}return l&&(x=Ol(l,x)),x===void 0||m===void 0&&p===void 0&&h===void 0||(typeof x=="number"?x=l_(x,m,p,h):Array.isArray(x)&&(x=x.map(v=>typeof v=="number"?l_(v,m,p,h):v))),r!==void 0&&x!==void 0&&u&&!u.includes(x)&&(x=y,l&&(x=Ol(l,x))),(l&&l!==this.type||x!==void 0&&hi(x)!==this.type)&&(x=Ol(this.type.kind,x)),x}eachChild(){}outputDefined(){return!1}serialize(){const t=["config",this.key];return this.scope&&t.concat(this.key),t}}var Fs=Cl;function Bs(e){if(e instanceof ra&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Ir||e instanceof Nr)return!1;let t=!0;return e.eachChild(a=>{t&&!Bs(a)&&(t=!1)}),t}function Sl(e){if(e instanceof ra&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(a=>{t&&!Sl(a)&&(t=!1)}),t}function Rl(e){if(e instanceof Fs)return!1;let t=!0;return e.eachChild(a=>{t&&!Rl(a)&&(t=!1)}),t}function Fi(e,t){if(e instanceof ra&&t.indexOf(e.name)>=0)return!1;let a=!0;return e.eachChild(o=>{a&&!Fi(o,t)&&(a=!1)}),a}class wn{constructor(t,a){this.type=a.type,this.name=t,this.boundExpression=a}static parse(t,a){if(t.length!==2||typeof t[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const o=t[1];return a.scope.has(o)?new wn(o,a.scope.get(o)):a.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var ji=wn;class r_{constructor(t,a=[],o,l=new _f,r=[],u,m){this.registry=t,this.path=a,this.key=a.map(p=>`[${p}]`).join(""),this.scope=l,this.errors=r,this.expectedType=o,this._scope=u,this.options=m}parse(t,a,o,l,r={}){return a||o?this.concat(a,o,l)._parse(t,r):this._parse(t,r)}_parse(t,a){function o(l,r,u){return u==="assert"?new on(r,[l]):u==="coerce"?new nn(r,[l]):l}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const l=typeof t[0]=="string"?this.registry[t[0]]:void 0;if(l){let r=l.parse(t,this);if(!r)return null;if(this.expectedType){const u=this.expectedType,m=r.type;if(u.kind!=="string"&&u.kind!=="number"&&u.kind!=="boolean"&&u.kind!=="object"&&u.kind!=="array"||m.kind!=="value")if(u.kind!=="color"&&u.kind!=="formatted"&&u.kind!=="resolvedImage"||m.kind!=="value"&&m.kind!=="string"){if(this.checkSubtype(u,m))return null}else r=o(r,u,a.typeAnnotation||"coerce");else r=o(r,u,a.typeAnnotation||"assert")}if(!(r instanceof an)&&r.type.kind!=="resolvedImage"&&d_(r)){const u=new ju(this._scope,this.options);try{r=new an(r.type,r.evaluate(u))}catch(m){return this.error(m.message),null}}return r}return nn.parse(["to-array",t],this)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,a,o){const l=typeof t=="number"?this.path.concat(t):this.path,r=o?this.scope.concat(o):this.scope;return new r_(this.registry,l,a||null,r,this.errors,this._scope,this.options)}error(t,...a){const o=`${this.key}${a.map(l=>`[${l}]`).join("")}`;this.errors.push(new jo(o,t))}checkSubtype(t,a){const o=es(t,a);return o&&this.error(o),o}}var ec=r_;function d_(e){if(e instanceof ji)return d_(e.boundExpression);if(e instanceof ra&&e.name==="error"||e instanceof xl||e instanceof Ir||e instanceof Nr||e instanceof Fs)return!1;const t=e instanceof nn||e instanceof on;let a=!0;return e.eachChild(o=>{a=t?a&&d_(o):a&&o instanceof an}),!!a&&Bs(e)&&Fi(e,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function rs(e,t){const a=e.length-1;let o,l,r=0,u=a,m=0;for(;r<=u;)if(m=Math.floor((r+u)/2),o=e[m],l=e[m+1],o<=t){if(m===a||t<l)return m;r=m+1}else{if(!(o>t))throw new gi("Input is not a number.");u=m-1}return 0}class Lr{constructor(t,a,o){this.type=t,this.input=a,this.labels=[],this.outputs=[];for(const[l,r]of o)this.labels.push(l),this.outputs.push(r)}static parse(t,a){if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");const o=a.parse(t[1],1,_e);if(!o)return null;const l=[];let r=null;a.expectedType&&a.expectedType.kind!=="value"&&(r=a.expectedType);for(let u=1;u<t.length;u+=2){const m=u===1?-1/0:t[u],p=t[u+1],h=u,y=u+1;if(typeof m!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(l.length&&l[l.length-1][0]>=m)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const x=a.parse(p,y,r);if(!x)return null;r=r||x.type,l.push([m,x])}return new Lr(r,o,l)}evaluate(t){const a=this.labels,o=this.outputs;if(a.length===1)return o[0].evaluate(t);const l=this.input.evaluate(t);if(l<=a[0])return o[0].evaluate(t);const r=a.length;return l>=a[r-1]?o[r-1].evaluate(t):o[rs(a,l)].evaluate(t)}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&t.push(this.labels[a]),t.push(this.outputs[a].serialize());return t}}var Nl=Lr;const ac=.95047,Wn=1.08883,ic=4/29,Us=6/29,__=3*Us*Us,oc=Us*Us*Us,bf=Math.PI/180,Fo=180/Math.PI;function Pr(e){return e>oc?Math.pow(e,1/3):e/__+ic}function wr(e){return e>Us?e*e*e:__*(e-ic)}function Wr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Mr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function u_(e){const t=Mr(e.r),a=Mr(e.g),o=Mr(e.b),l=Pr((.4124564*t+.3575761*a+.1804375*o)/ac),r=Pr((.2126729*t+.7151522*a+.072175*o)/1);return{l:116*r-16,a:500*(l-r),b:200*(r-Pr((.0193339*t+.119192*a+.9503041*o)/Wn)),alpha:e.a}}function c_(e){let t=(e.l+16)/116,a=isNaN(e.a)?t:t+e.a/500,o=isNaN(e.b)?t:t-e.b/200;return t=1*wr(t),a=ac*wr(a),o=Wn*wr(o),new ci(Wr(3.2404542*a-1.5371385*t-.4985314*o),Wr(-.969266*a+1.8760108*t+.041556*o),Wr(.0556434*a-.2040259*t+1.0572252*o),e.alpha)}function nc(e,t,a){const o=t-e;return e+a*(o>180||o<-180?o-360*Math.round(o/360):o)}const ks={forward:u_,reverse:c_,interpolate:function(e,t,a){return{l:sa(e.l,t.l,a),a:sa(e.a,t.a,a),b:sa(e.b,t.b,a),alpha:sa(e.alpha,t.alpha,a)}}},zs={forward:function(e){const{l:t,a,b:o}=u_(e),l=Math.atan2(o,a)*Fo;return{h:l<0?l+360:l,c:Math.sqrt(a*a+o*o),l:t,alpha:e.a}},reverse:function(e){const t=e.h*bf,a=e.c;return c_({l:e.l,a:Math.cos(t)*a,b:Math.sin(t)*a,alpha:e.alpha})},interpolate:function(e,t,a){return{h:nc(e.h,t.h,a),c:sa(e.c,t.c,a),l:sa(e.l,t.l,a),alpha:sa(e.alpha,t.alpha,a)}}};var m_=Object.freeze({__proto__:null,hcl:zs,lab:ks});class Ll{constructor(t,a,o,l,r){this.type=t,this.operator=a,this.interpolation=o,this.input=l,this.labels=[],this.outputs=[];for(const[u,m]of r)this.labels.push(u),this.outputs.push(m)}static interpolationFactor(t,a,o,l){let r=0;if(t.name==="exponential")r=Hs(a,t.base,o,l);else if(t.name==="linear")r=Hs(a,1,o,l);else if(t.name==="cubic-bezier"){const u=t.controlPoints;r=new ia(u[0],u[1],u[2],u[3]).solve(Hs(a,1,o,l))}return r}static parse(t,a){let[o,l,r,...u]=t;if(!Array.isArray(l)||l.length===0)return a.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){const h=l[1];if(typeof h!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:h}}else{if(l[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(l[0])}`,1,0);{const h=l.slice(1);if(h.length!==4||h.some(y=>typeof y!="number"||y<0||y>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:h}}}if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(r=a.parse(r,2,_e),!r)return null;const m=[];let p=null;o==="interpolate-hcl"||o==="interpolate-lab"?p=Ao:a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);for(let h=0;h<u.length;h+=2){const y=u[h],x=u[h+1],v=h+3,C=h+4;if(typeof y!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(m.length&&m[m.length-1][0]>=y)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);const R=a.parse(x,C,p);if(!R)return null;p=p||R.type,m.push([y,R])}return p.kind==="number"||p.kind==="color"||p.kind==="array"&&p.itemType.kind==="number"&&typeof p.N=="number"?new Ll(p,o,l,r,m):a.error(`Type ${li(p)} is not interpolatable.`)}evaluate(t){const a=this.labels,o=this.outputs;if(a.length===1)return o[0].evaluate(t);const l=this.input.evaluate(t);if(l<=a[0])return o[0].evaluate(t);const r=a.length;if(l>=a[r-1])return o[r-1].evaluate(t);const u=rs(a,l),m=Ll.interpolationFactor(this.interpolation,l,a[u],a[u+1]),p=o[u].evaluate(t),h=o[u+1].evaluate(t);return this.operator==="interpolate"?xr[this.type.kind.toLowerCase()](p,h,m):this.operator==="interpolate-hcl"?zs.reverse(zs.interpolate(zs.forward(p),zs.forward(h),m)):ks.reverse(ks.interpolate(ks.forward(p),ks.forward(h),m))}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,t,this.input.serialize()];for(let o=0;o<this.labels.length;o++)a.push(this.labels[o],this.outputs[o].serialize());return a}}function Hs(e,t,a,o){const l=o-a,r=e-a;return l===0?0:t===1?r/l:(Math.pow(t,r)-1)/(Math.pow(t,l)-1)}var mo=Ll;class Ys{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expectected at least one argument.");let o=null;const l=a.expectedType;l&&l.kind!=="value"&&(o=l);const r=[];for(const m of t.slice(1)){const p=a.parse(m,1+r.length,o,void 0,{typeAnnotation:"omit"});if(!p)return null;o=o||p.type,r.push(p)}const u=l&&r.some(m=>es(l,m.type));return new Ys(u?ua:o,r)}evaluate(t){let a,o=null,l=0;for(const r of this.args){if(l++,o=r.evaluate(t),o&&o instanceof Le&&!o.available&&(a||(a=o),o=null,l===this.args.length))return a;if(o!==null)break}return o}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(a=>{t.push(a.serialize())}),t}}var f_=Ys;class Dr{constructor(t,a){this.type=a.type,this.bindings=[].concat(t),this.result=a}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const a of this.bindings)t(a[1]);t(this.result)}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const o=[];for(let r=1;r<t.length-1;r+=2){const u=t[r];if(typeof u!="string")return a.error(`Expected string, but found ${typeof u} instead.`,r);if(/[^a-zA-Z0-9_]/.test(u))return a.error("Variable names must contain only alphanumeric characters or '_'.",r);const m=a.parse(t[r+1],r+1);if(!m)return null;o.push([u,m])}const l=a.parse(t[t.length-1],t.length-1,a.expectedType,o);return l?new Dr(o,l):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[a,o]of this.bindings)t.push(a,o.serialize());return t.push(this.result.serialize()),t}}var p_=Dr;class Mn{constructor(t,a,o){this.type=t,this.index=a,this.input=o}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=a.parse(t[1],1,_e),l=a.parse(t[2],2,ao(a.expectedType||ua));return o&&l?new Mn(l.type.itemType,o,l):null}evaluate(t){const a=this.index.evaluate(t),o=this.input.evaluate(t);if(a<0)throw new gi(`Array index out of bounds: ${a} < 0.`);if(a>=o.length)throw new gi(`Array index out of bounds: ${a} > ${o.length-1}.`);if(a!==Math.floor(a))throw new gi(`Array index must be an integer, but found ${a} instead.`);return o[a]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ca=Mn;class h_{constructor(t,a){this.type=Aa,this.needle=t,this.haystack=a}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=a.parse(t[1],1,ua),l=a.parse(t[2],2,ua);return o&&l?Be(o.type,[Aa,xa,_e,Ss,ua])?new h_(o,l):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${li(o.type)} instead`):null}evaluate(t){const a=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(o==null)return!1;if(!On(a,["boolean","string","number","null"]))throw new gi(`Expected first argument to be of type boolean, string, number or null, but found ${li(hi(a))} instead.`);if(!On(o,["string","array"]))throw new gi(`Expected second argument to be of type array or string, but found ${li(hi(o))} instead.`);return o.indexOf(a)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Tf=h_;class Fr{constructor(t,a,o){this.type=_e,this.needle=t,this.haystack=a,this.fromIndex=o}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=a.parse(t[1],1,ua),l=a.parse(t[2],2,ua);if(!o||!l)return null;if(!Be(o.type,[Aa,xa,_e,Ss,ua]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${li(o.type)} instead`);if(t.length===4){const r=a.parse(t[3],3,_e);return r?new Fr(o,l,r):null}return new Fr(o,l)}evaluate(t){const a=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!On(a,["boolean","string","number","null"]))throw new gi(`Expected first argument to be of type boolean, string, number or null, but found ${li(hi(a))} instead.`);if(!On(o,["string","array"]))throw new gi(`Expected second argument to be of type array or string, but found ${li(hi(o))} instead.`);if(this.fromIndex){const l=this.fromIndex.evaluate(t);return o.indexOf(a,l)}return o.indexOf(a)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var sc=Fr;class g_{constructor(t,a,o,l,r,u){this.inputType=t,this.type=a,this.input=o,this.cases=l,this.outputs=r,this.otherwise=u}static parse(t,a){if(t.length<5)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return a.error("Expected an even number of arguments.");let o,l;a.expectedType&&a.expectedType.kind!=="value"&&(l=a.expectedType);const r={},u=[];for(let h=2;h<t.length-1;h+=2){let y=t[h];const x=t[h+1];Array.isArray(y)||(y=[y]);const v=a.concat(h);if(y.length===0)return v.error("Expected at least one branch label.");for(const R of y){if(typeof R!="number"&&typeof R!="string")return v.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return v.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return v.error("Numeric branch labels must be integer values.");if(o){if(v.checkSubtype(o,hi(R)))return null}else o=hi(R);if(r[String(R)]!==void 0)return v.error("Branch labels must be unique.");r[String(R)]=u.length}const C=a.parse(x,h,l);if(!C)return null;l=l||C.type,u.push(C)}const m=a.parse(t[1],1,ua);if(!m)return null;const p=a.parse(t[t.length-1],t.length-1,l);return p?m.type.kind!=="value"&&a.concat(1).checkSubtype(o,m.type)?null:new g_(o,l,m,r,u,p):null}evaluate(t){const a=this.input.evaluate(t);return(hi(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),o=[],l={};for(const u of a){const m=l[this.cases[u]];m===void 0?(l[this.cases[u]]=o.length,o.push([this.cases[u],[u]])):o[m][1].push(u)}const r=u=>this.inputType.kind==="number"?Number(u):u;for(const[u,m]of o)t.push(m.length===1?r(m[0]):m.map(r)),t.push(this.outputs[u].serialize());return t.push(this.otherwise.serialize()),t}}var lc=g_;class Br{constructor(t,a,o){this.type=t,this.branches=a,this.otherwise=o}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return a.error("Expected an odd number of arguments.");let o;a.expectedType&&a.expectedType.kind!=="value"&&(o=a.expectedType);const l=[];for(let u=1;u<t.length-1;u+=2){const m=a.parse(t[u],u,Aa);if(!m)return null;const p=a.parse(t[u+1],u+1,o);if(!p)return null;l.push([m,p]),o=o||p.type}const r=a.parse(t[t.length-1],t.length-1,o);return r?new Br(o,l,r):null}evaluate(t){for(const[a,o]of this.branches)if(a.evaluate(t))return o.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[a,o]of this.branches)t(a),t(o);t(this.otherwise)}outputDefined(){return this.branches.every(([t,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(a=>{t.push(a.serialize())}),t}}var rc=Br;class Pl{constructor(t,a,o,l){this.type=t,this.input=a,this.beginIndex=o,this.endIndex=l}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=a.parse(t[1],1,ua),l=a.parse(t[2],2,_e);if(!o||!l)return null;if(!Be(o.type,[ao(ua),xa,ua]))return a.error(`Expected first argument to be of type array or string, but found ${li(o.type)} instead`);if(t.length===4){const r=a.parse(t[3],3,_e);return r?new Pl(o.type,o,l,r):null}return new Pl(o.type,o,l)}evaluate(t){const a=this.input.evaluate(t),o=this.beginIndex.evaluate(t);if(!On(a,["string","array"]))throw new gi(`Expected first argument to be of type array or string, but found ${li(hi(a))} instead.`);if(this.endIndex){const l=this.endIndex.evaluate(t);return a.slice(o,l)}return a.slice(o)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Gs=Pl;function y_(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function b_(e,t,a,o){return o.compare(t,a)===0}function Vs(e,t,a){const o=e!=="=="&&e!=="!=";return class Sb{constructor(r,u,m){this.type=Aa,this.lhs=r,this.rhs=u,this.collator=m,this.hasUntypedArgument=r.type.kind==="value"||u.type.kind==="value"}static parse(r,u){if(r.length!==3&&r.length!==4)return u.error("Expected two or three arguments.");const m=r[0];let p=u.parse(r[1],1,ua);if(!p)return null;if(!y_(m,p.type))return u.concat(1).error(`"${m}" comparisons are not supported for type '${li(p.type)}'.`);let h=u.parse(r[2],2,ua);if(!h)return null;if(!y_(m,h.type))return u.concat(2).error(`"${m}" comparisons are not supported for type '${li(h.type)}'.`);if(p.type.kind!==h.type.kind&&p.type.kind!=="value"&&h.type.kind!=="value")return u.error(`Cannot compare types '${li(p.type)}' and '${li(h.type)}'.`);o&&(p.type.kind==="value"&&h.type.kind!=="value"?p=new on(h.type,[p]):p.type.kind!=="value"&&h.type.kind==="value"&&(h=new on(p.type,[h])));let y=null;if(r.length===4){if(p.type.kind!=="string"&&h.type.kind!=="string"&&p.type.kind!=="value"&&h.type.kind!=="value")return u.error("Cannot use collator to compare non-string types.");if(y=u.parse(r[3],3,Ar),!y)return null}return new Sb(p,h,y)}evaluate(r){const u=this.lhs.evaluate(r),m=this.rhs.evaluate(r);if(o&&this.hasUntypedArgument){const p=hi(u),h=hi(m);if(p.kind!==h.kind||p.kind!=="string"&&p.kind!=="number")throw new gi(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${p.kind}, ${h.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const p=hi(u),h=hi(m);if(p.kind!=="string"||h.kind!=="string")return t(r,u,m)}return this.collator?a(r,u,m,this.collator.evaluate(r)):t(r,u,m)}eachChild(r){r(this.lhs),r(this.rhs),this.collator&&r(this.collator)}outputDefined(){return!0}serialize(){const r=[e];return this.eachChild(u=>{r.push(u.serialize())}),r}}}const T_=Vs("==",function(e,t,a){return t===a},b_),x_=Vs("!=",function(e,t,a){return t!==a},function(e,t,a,o){return!b_(0,t,a,o)}),xf=Vs("<",function(e,t,a){return t<a},function(e,t,a,o){return o.compare(t,a)<0}),Af=Vs(">",function(e,t,a){return t>a},function(e,t,a,o){return o.compare(t,a)>0}),dc=Vs("<=",function(e,t,a){return t<=a},function(e,t,a,o){return o.compare(t,a)<=0}),vf=Vs(">=",function(e,t,a){return t>=a},function(e,t,a,o){return o.compare(t,a)>=0});class A_{constructor(t,a,o,l,r,u){this.type=xa,this.number=t,this.locale=a,this.currency=o,this.unit=l,this.minFractionDigits=r,this.maxFractionDigits=u}static parse(t,a){if(t.length!==3)return a.error("Expected two arguments.");const o=a.parse(t[1],1,_e);if(!o)return null;const l=t[2];if(typeof l!="object"||Array.isArray(l))return a.error("NumberFormat options argument must be an object.");let r=null;if(l.locale&&(r=a.parse(l.locale,1,xa),!r))return null;let u=null;if(l.currency&&(u=a.parse(l.currency,1,xa),!u))return null;let m=null;if(l.unit&&(m=a.parse(l.unit,1,xa),!m))return null;let p=null;if(l["min-fraction-digits"]&&(p=a.parse(l["min-fraction-digits"],1,_e),!p))return null;let h=null;return l["max-fraction-digits"]&&(h=a.parse(l["max-fraction-digits"],1,_e),!h)?null:new A_(o,r,u,m,p,h)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class v_{constructor(t){this.type=_e,this.input=t}static parse(t,a){if(t.length!==2)return a.error(`Expected 1 argument, but found ${t.length-1} instead.`);const o=a.parse(t[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${li(o.type)} instead.`):new v_(o):null}evaluate(t){const a=this.input.evaluate(t);if(typeof a=="string"||Array.isArray(a))return a.length;throw new gi(`Expected value to be of type string or array, but found ${li(hi(a))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(a=>{t.push(a.serialize())}),t}}function _c(e){return function(){e=1831565813+(e|=0)|0;let t=Math.imul(e^e>>>15,1|e);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296}}const E_={"==":T_,"!=":x_,">":Af,"<":xf,">=":vf,"<=":dc,array:on,at:ca,boolean:on,case:rc,coalesce:f_,collator:xl,format:Ps,image:is,in:Tf,"index-of":sc,interpolate:mo,"interpolate-hcl":mo,"interpolate-lab":mo,length:v_,let:p_,literal:an,match:lc,number:on,"number-format":A_,object:on,slice:Gs,step:Nl,string:on,"to-boolean":nn,"to-color":nn,"to-number":nn,"to-string":nn,var:ji,within:Ir,distance:Nr,config:Fs};function I_(e,[t,a,o,l]){t=t.evaluate(e),a=a.evaluate(e),o=o.evaluate(e);const r=l?l.evaluate(e):1,u=Ku(t,a,o,r);if(u)throw new gi(u);return new ci(t/255*r,a/255*r,o/255*r,r)}function uc(e,[t,a,o,l]){t=t.evaluate(e),a=a.evaluate(e),o=o.evaluate(e);const r=l?l.evaluate(e):1,u=function(h,y,x,v){return typeof h=="number"&&h>=0&&h<=360?typeof y=="number"&&y>=0&&y<=100&&typeof x=="number"&&x>=0&&x<=100?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid hsla value [${[h,y,x,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof v=="number"?[h,y,x,v]:[h,y,x]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof v=="number"?[h,y,x,v]:[h,y,x]).join(", ")}]: 'h' must be between 0 and 360.`}(t,a,o,r);if(u)throw new gi(u);const m=`hsla(${t}, ${a}%, ${o}%, ${r})`,p=ci.parse(m);if(!p)throw new gi(`Failed to parse HSLA color: ${m}`);return p}function O_(e,t){return e in t}function C_(e,t){const a=t[e];return a===void 0?null:a}function ds(e){return{type:e}}ra.register(E_,{error:[{kind:"error"},[xa],(e,[t])=>{throw new gi(t.evaluate(e))}],typeof:[xa,[ua],(e,[t])=>li(hi(t.evaluate(e)))],"to-rgba":[ao(_e,4),[Ao],(e,[t])=>t.evaluate(e).toArray()],rgb:[Ao,[_e,_e,_e],I_],rgba:[Ao,[_e,_e,_e,_e],I_],hsl:[Ao,[_e,_e,_e],uc],hsla:[Ao,[_e,_e,_e,_e],uc],has:{type:Aa,overloads:[[[xa],(e,[t])=>O_(t.evaluate(e),e.properties())],[[xa,Rs],(e,[t,a])=>O_(t.evaluate(e),a.evaluate(e))]]},get:{type:ua,overloads:[[[xa],(e,[t])=>C_(t.evaluate(e),e.properties())],[[xa,Rs],(e,[t,a])=>C_(t.evaluate(e),a.evaluate(e))]]},"feature-state":[ua,[xa],(e,[t])=>C_(t.evaluate(e),e.featureState||{})],properties:[Rs,[],e=>e.properties()],"geometry-type":[xa,[],e=>e.geometryType()],id:[ua,[],e=>e.id()],zoom:[_e,[],e=>e.globals.zoom],pitch:[_e,[],e=>e.globals.pitch||0],"distance-from-center":[_e,[],e=>e.distanceFromCenter()],"measure-light":[_e,[xa],(e,[t])=>e.measureLight(t.evaluate(e))],"heatmap-density":[_e,[],e=>e.globals.heatmapDensity||0],"line-progress":[_e,[],e=>e.globals.lineProgress||0],"raster-value":[_e,[],e=>e.globals.rasterValue||0],"raster-particle-speed":[_e,[],e=>e.globals.rasterParticleSpeed||0],"sky-radial-progress":[_e,[],e=>e.globals.skyRadialProgress||0],accumulated:[ua,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[_e,ds(_e),(e,t)=>{let a=0;for(const o of t)a+=o.evaluate(e);return a}],"*":[_e,ds(_e),(e,t)=>{let a=1;for(const o of t)a*=o.evaluate(e);return a}],"-":{type:_e,overloads:[[[_e,_e],(e,[t,a])=>t.evaluate(e)-a.evaluate(e)],[[_e],(e,[t])=>-t.evaluate(e)]]},"/":[_e,[_e,_e],(e,[t,a])=>t.evaluate(e)/a.evaluate(e)],"%":[_e,[_e,_e],(e,[t,a])=>t.evaluate(e)%a.evaluate(e)],ln2:[_e,[],()=>Math.LN2],pi:[_e,[],()=>Math.PI],e:[_e,[],()=>Math.E],"^":[_e,[_e,_e],(e,[t,a])=>Math.pow(t.evaluate(e),a.evaluate(e))],sqrt:[_e,[_e],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[_e,[_e],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[_e,[_e],(e,[t])=>Math.log(t.evaluate(e))],log2:[_e,[_e],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[_e,[_e],(e,[t])=>Math.sin(t.evaluate(e))],cos:[_e,[_e],(e,[t])=>Math.cos(t.evaluate(e))],tan:[_e,[_e],(e,[t])=>Math.tan(t.evaluate(e))],asin:[_e,[_e],(e,[t])=>Math.asin(t.evaluate(e))],acos:[_e,[_e],(e,[t])=>Math.acos(t.evaluate(e))],atan:[_e,[_e],(e,[t])=>Math.atan(t.evaluate(e))],min:[_e,ds(_e),(e,t)=>Math.min(...t.map(a=>a.evaluate(e)))],max:[_e,ds(_e),(e,t)=>Math.max(...t.map(a=>a.evaluate(e)))],abs:[_e,[_e],(e,[t])=>Math.abs(t.evaluate(e))],round:[_e,[_e],(e,[t])=>{const a=t.evaluate(e);return a<0?-Math.round(-a):Math.round(a)}],floor:[_e,[_e],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[_e,[_e],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Aa,[xa,ua],(e,[t,a])=>e.properties()[t.value]===a.value],"filter-id-==":[Aa,[ua],(e,[t])=>e.id()===t.value],"filter-type-==":[Aa,[xa],(e,[t])=>e.geometryType()===t.value],"filter-<":[Aa,[xa,ua],(e,[t,a])=>{const o=e.properties()[t.value],l=a.value;return typeof o==typeof l&&o<l}],"filter-id-<":[Aa,[ua],(e,[t])=>{const a=e.id(),o=t.value;return typeof a==typeof o&&a<o}],"filter->":[Aa,[xa,ua],(e,[t,a])=>{const o=e.properties()[t.value],l=a.value;return typeof o==typeof l&&o>l}],"filter-id->":[Aa,[ua],(e,[t])=>{const a=e.id(),o=t.value;return typeof a==typeof o&&a>o}],"filter-<=":[Aa,[xa,ua],(e,[t,a])=>{const o=e.properties()[t.value],l=a.value;return typeof o==typeof l&&o<=l}],"filter-id-<=":[Aa,[ua],(e,[t])=>{const a=e.id(),o=t.value;return typeof a==typeof o&&a<=o}],"filter->=":[Aa,[xa,ua],(e,[t,a])=>{const o=e.properties()[t.value],l=a.value;return typeof o==typeof l&&o>=l}],"filter-id->=":[Aa,[ua],(e,[t])=>{const a=e.id(),o=t.value;return typeof a==typeof o&&a>=o}],"filter-has":[Aa,[ua],(e,[t])=>t.value in e.properties()],"filter-has-id":[Aa,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[Aa,[ao(xa)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Aa,[ao(ua)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Aa,[xa,ao(ua)],(e,[t,a])=>a.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Aa,[xa,ao(ua)],(e,[t,a])=>function(o,l,r,u){for(;r<=u;){const m=r+u>>1;if(l[m]===o)return!0;l[m]>o?u=m-1:r=m+1}return!1}(e.properties()[t.value],a.value,0,a.value.length-1)],all:{type:Aa,overloads:[[[Aa,Aa],(e,[t,a])=>t.evaluate(e)&&a.evaluate(e)],[ds(Aa),(e,t)=>{for(const a of t)if(!a.evaluate(e))return!1;return!0}]]},any:{type:Aa,overloads:[[[Aa,Aa],(e,[t,a])=>t.evaluate(e)||a.evaluate(e)],[ds(Aa),(e,t)=>{for(const a of t)if(a.evaluate(e))return!0;return!1}]]},"!":[Aa,[Aa],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Aa,[xa],(e,[t])=>{const a=e.globals&&e.globals.isSupportedScript;return!a||a(t.evaluate(e))}],upcase:[xa,[xa],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[xa,[xa],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[xa,ds(ua),(e,t)=>t.map(a=>vo(a.evaluate(e))).join("")],"resolved-locale":[xa,[Ar],(e,[t])=>t.evaluate(e).resolvedLocale()],random:[_e,[_e,_e,ua],(e,t)=>{const[a,o,l]=t.map(u=>u.evaluate(e));if(a>o||a===o)return a;let r;if(typeof l=="string")r=function(u){let m=0;if(u.length===0)return m;for(let p=0;p<u.length;p++)m=(m<<5)-m+u.charCodeAt(p),m|=0;return m}(l);else{if(typeof l!="number")throw new gi(`Invalid seed input: ${l}`);r=l}return a+_c(r)()*(o-a)}]});var Xs=E_;function S_(e){return{result:"success",value:e}}function _s(e){return{result:"error",value:e}}function cc(e,t){return!!e&&!!e.parameters&&e.parameters.indexOf(t)>-1}function Ur(e){return e["property-type"]==="data-driven"}function R_(e){return cc(e.expression,"measure-light")}function mc(e){return cc(e.expression,"zoom")}function N_(e){return!!e.expression&&e.expression.interpolated}function kr(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function fc(e){return e}function L_(e,t){const a=t.type==="color",o=e.stops&&typeof e.stops[0][0]=="object",l=o||!(o||e.property!==void 0),r=e.type||(N_(t)?"exponential":"interval");if(a&&((e=Ud({},e)).stops&&(e.stops=e.stops.map(h=>[h[0],ci.parse(h[1])])),e.default=ci.parse(e.default?e.default:t.default)),e.colorSpace&&e.colorSpace!=="rgb"&&!m_[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let u,m,p;if(r==="exponential")u=pc;else if(r==="interval")u=If;else if(r==="categorical"){u=Ef,m=Object.create(null);for(const h of e.stops)m[h[0]]=h[1];p=typeof e.stops[0][0]}else{if(r!=="identity")throw new Error(`Unknown function type "${r}"`);u=hc}if(o){const h={},y=[];for(let C=0;C<e.stops.length;C++){const R=e.stops[C],N=R[0].zoom;h[N]===void 0&&(h[N]={zoom:N,type:e.type,property:e.property,default:e.default,stops:[]},y.push(N)),h[N].stops.push([R[0].value,R[1]])}const x=[];for(const C of y)x.push([h[C].zoom,L_(h[C],t)]);const v={name:"linear"};return{kind:"composite",interpolationType:v,interpolationFactor:mo.interpolationFactor.bind(void 0,v),zoomStops:x.map(C=>C[0]),evaluate:({zoom:C},R)=>pc({stops:x,base:e.base},t,C).evaluate(C,R)}}if(l){const h=r==="exponential"?{name:"exponential",base:e.base!==void 0?e.base:1}:null;return{kind:"camera",interpolationType:h,interpolationFactor:mo.interpolationFactor.bind(void 0,h),zoomStops:e.stops.map(y=>y[0]),evaluate:({zoom:y})=>u(e,t,y,m,p)}}return{kind:"source",evaluate(h,y){const x=y&&y.properties?y.properties[e.property]:void 0;return x===void 0?wl(e.default,t.default):u(e,t,x,m,p)}}}function wl(e,t,a){return e!==void 0?e:t!==void 0?t:a!==void 0?a:void 0}function Ef(e,t,a,o,l){return wl(typeof a===l?o[a]:void 0,e.default,t.default)}function If(e,t,a){if(ws(a)!=="number")return wl(e.default,t.default);const o=e.stops.length;if(o===1||a<=e.stops[0][0])return e.stops[0][1];if(a>=e.stops[o-1][0])return e.stops[o-1][1];const l=rs(e.stops.map(r=>r[0]),a);return e.stops[l][1]}function pc(e,t,a){const o=e.base!==void 0?e.base:1;if(ws(a)!=="number")return wl(e.default,t.default);const l=e.stops.length;if(l===1||a<=e.stops[0][0])return e.stops[0][1];if(a>=e.stops[l-1][0])return e.stops[l-1][1];const r=rs(e.stops.map(y=>y[0]),a),u=function(y,x,v,C){const R=C-v,N=y-v;return R===0?0:x===1?N/R:(Math.pow(x,N)-1)/(Math.pow(x,R)-1)}(a,o,e.stops[r][0],e.stops[r+1][0]),m=e.stops[r][1],p=e.stops[r+1][1];let h=xr[t.type]||fc;if(e.colorSpace&&e.colorSpace!=="rgb"){const y=m_[e.colorSpace];h=(x,v)=>y.reverse(y.interpolate(y.forward(x),y.forward(v),u))}return typeof m.evaluate=="function"?{evaluate(...y){const x=m.evaluate.apply(void 0,y),v=p.evaluate.apply(void 0,y);if(x!==void 0&&v!==void 0)return h(x,v,u)}}:h(m,p,u)}function hc(e,t,a){return t.type==="color"?a=ci.parse(a):t.type==="formatted"?a=Di.fromString(a.toString()):t.type==="resolvedImage"?a=Le.fromString(a.toString()):ws(a)===t.type||t.type==="enum"&&t.values[a]||(a=void 0),wl(a,e.default,t.default)}class zr{constructor(t,a,o,l){this.expression=t,this._warningHistory={},this._evaluator=new ju(o,l),this._defaultValue=a?function(r){return r.type==="color"&&(kr(r.default)||Array.isArray(r.default))?new ci(0,0,0,0):r.type==="color"?ci.parse(r.default)||null:r.default===void 0?null:r.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(t,a,o,l,r,u,m,p){return this._evaluator.globals=t,this._evaluator.feature=a,this._evaluator.featureState=o,this._evaluator.canonical=l||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=u,this._evaluator.featureTileCoord=m||null,this._evaluator.featureDistanceData=p||null,this.expression.evaluate(this._evaluator)}evaluate(t,a,o,l,r,u,m,p){this._evaluator.globals=t,this._evaluator.feature=a||null,this._evaluator.featureState=o||null,this._evaluator.canonical=l||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=u||null,this._evaluator.featureTileCoord=m||null,this._evaluator.featureDistanceData=p||null;try{const h=this.expression.evaluate(this._evaluator);if(h==null||typeof h=="number"&&h!=h)return this._defaultValue;if(this._enumValues&&!(h in this._enumValues))throw new gi(`Expected value to be one of ${Object.keys(this._enumValues).map(y=>JSON.stringify(y)).join(", ")}, but found ${JSON.stringify(h)} instead.`);return h}catch(h){return this._warningHistory[h.message]||(this._warningHistory[h.message]=!0,typeof console<"u"&&console.warn(h.message)),this._defaultValue}}}function Wl(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Xs}function Hr(e,t,a,o){const l=new ec(Xs,[],t?function(u){const m={color:Ao,string:xa,number:_e,enum:xa,boolean:Aa,formatted:Ns,resolvedImage:bl};return u.type==="array"?ao(m[u.value]||ua,u.length):m[u.type]}(t):void 0,void 0,void 0,a,o),r=l.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?S_(new zr(r,t,a,o)):_s(l.errors)}class P_{constructor(t,a,o){this.kind=t,this._styleExpression=a,this.isLightConstant=o,this.isStateDependent=t!=="constant"&&!Sl(a.expression),this.isConfigDependent=!Rl(a.expression)}evaluateWithoutErrorHandling(t,a,o,l,r,u){return this._styleExpression.evaluateWithoutErrorHandling(t,a,o,l,r,u)}evaluate(t,a,o,l,r,u){return this._styleExpression.evaluate(t,a,o,l,r,u)}}class Ml{constructor(t,a,o,l,r){this.kind=t,this.zoomStops=o,this._styleExpression=a,this.isStateDependent=t!=="camera"&&!Sl(a.expression),this.isLightConstant=r,this.isConfigDependent=!Rl(a.expression),this.interpolationType=l}evaluateWithoutErrorHandling(t,a,o,l,r,u){return this._styleExpression.evaluateWithoutErrorHandling(t,a,o,l,r,u)}evaluate(t,a,o,l,r,u){return this._styleExpression.evaluate(t,a,o,l,r,u)}interpolationFactor(t,a,o){return this.interpolationType?mo.interpolationFactor(this.interpolationType,t,a,o):0}}function Yr(e,t,a,o){if((e=Hr(e,t,a,o)).result==="error")return e;const l=e.value.expression,r=Bs(l);if(!r&&!Ur(t))return _s([new jo("","data expressions not supported")]);const u=Fi(l,["zoom","pitch","distance-from-center"]);if(!u&&!mc(t))return _s([new jo("","zoom expressions not supported")]);const m=Fi(l,["measure-light"]);if(!m&&!R_(t))return _s([new jo("","measure-light expression not supported")]);const p=t.expression&&t.expression.relaxZoomRestriction,h=Fl(l);return h||u||p?h instanceof jo?_s([h]):h instanceof mo&&!N_(t)?_s([new jo("",'"interpolate" expressions cannot be used with this property')]):S_(h?new Ml(r?"camera":"composite",e.value,h.labels,h instanceof mo?h.interpolation:void 0,m):new P_(r?"constant":"source",e.value,m)):_s([new jo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Dl{constructor(t,a){this._parameters=t,this._specification=a,Ud(this,L_(this._parameters,this._specification))}static deserialize(t){return new Dl(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Fl(e){let t=null;if(e instanceof p_)t=Fl(e.result);else if(e instanceof f_){for(const a of e.args)if(t=Fl(a),t)break}else(e instanceof Nl||e instanceof mo)&&e.input instanceof ra&&e.input.name==="zoom"&&(t=e);return t instanceof jo||e.eachChild(a=>{const o=Fl(a);o instanceof jo?t=o:t&&o&&t!==o&&(t=new jo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}var Of=Uo,Bo=3;function Uo(e,t,a){var o=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var l=new Int32Array(this.arrayBuffer);e=l[0],this.d=(t=l[1])+2*(a=l[2]);for(var r=0;r<this.d*this.d;r++){var u=l[Bo+r],m=l[Bo+r+1];o.push(u===m?null:l.subarray(u,m))}var p=l[Bo+o.length+1];this.keys=l.subarray(l[Bo+o.length],p),this.bboxes=l.subarray(p),this.insert=this._insertReadonly}else{this.d=t+2*a;for(var h=0;h<this.d*this.d;h++)o.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=a,this.scale=t/e,this.uid=0;var y=a/t*e;this.min=-y,this.max=e+y}Uo.prototype.insert=function(e,t,a,o,l){this._forEachCell(t,a,o,l,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(a),this.bboxes.push(o),this.bboxes.push(l)},Uo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Uo.prototype._insertCell=function(e,t,a,o,l,r){this.cells[l].push(r)},Uo.prototype.query=function(e,t,a,o,l){var r=this.min,u=this.max;if(e<=r&&t<=r&&u<=a&&u<=o&&!l)return Array.prototype.slice.call(this.keys);var m=[];return this._forEachCell(e,t,a,o,this._queryCell,m,{},l),m},Uo.prototype._queryCell=function(e,t,a,o,l,r,u,m){var p=this.cells[l];if(p!==null)for(var h=this.keys,y=this.bboxes,x=0;x<p.length;x++){var v=p[x];if(u[v]===void 0){var C=4*v;(m?m(y[C+0],y[C+1],y[C+2],y[C+3]):e<=y[C+2]&&t<=y[C+3]&&a>=y[C+0]&&o>=y[C+1])?(u[v]=!0,r.push(h[v])):u[v]=!1}}},Uo.prototype._forEachCell=function(e,t,a,o,l,r,u,m){for(var p=this._convertToCellCoord(e),h=this._convertToCellCoord(t),y=this._convertToCellCoord(a),x=this._convertToCellCoord(o),v=p;v<=y;v++)for(var C=h;C<=x;C++){var R=this.d*C+v;if((!m||m(this._convertFromCellCoord(v),this._convertFromCellCoord(C),this._convertFromCellCoord(v+1),this._convertFromCellCoord(C+1)))&&l.call(this,e,t,a,o,R,r,u,m))return}},Uo.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Uo.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Uo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=Bo+this.cells.length+1+1,a=0,o=0;o<this.cells.length;o++)a+=this.cells[o].length;var l=new Int32Array(t+a+this.keys.length+this.bboxes.length);l[0]=this.extent,l[1]=this.n,l[2]=this.padding;for(var r=t,u=0;u<e.length;u++){var m=e[u];l[Bo+u]=r,l.set(m,r),r+=m.length}return l[Bo+e.length]=r,l.set(this.keys,r),l[Bo+e.length+1]=r+=this.keys.length,l.set(this.bboxes,r),r+=this.bboxes.length,l.buffer};var ln=be(Of);const Bl={};function me(e,t,a={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Bl[t]={klass:e,omit:a.omit||[]}}me(Object,"Object"),ln.serialize=function(e,t){const a=e.toArrayBuffer();return t&&t.add(a),{buffer:a}},ln.deserialize=function(e){return new ln(e.buffer)},Object.defineProperty(ln,"name",{value:"Grid"}),me(ln,"Grid"),me(ci,"Color"),me(Error,"Error"),me(Di,"Formatted"),me(Ls,"FormattedSection"),me(fi,"AJAXError"),me(Le,"ResolvedImage"),me(Dl,"StylePropertyFunction"),me(zr,"StyleExpression",{omit:["_evaluator"]}),me(Ml,"ZoomDependentExpression"),me(P_,"ZoomConstantExpression"),me(ra,"CompoundExpression",{omit:["_evaluate"]});for(const e in Xs)Bl[Xs[e]._classRegistryKey]||me(Xs[e],`Expression${e}`);function gc(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function Gr(e){return self.ImageBitmap&&e instanceof ImageBitmap}function Dn(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(gc(e)||Gr(e))return t&&t.add(e),e;if(ArrayBuffer.isView(e)){const a=e;return t&&t.add(a.buffer),a}if(e instanceof ImageData)return t&&t.add(e.data.buffer),e;if(Array.isArray(e)){const a=[];for(const o of e)a.push(Dn(o,t));return a}if(e instanceof Map){const a={$name:"Map"};for(const[o,l]of e.entries())a[o]=Dn(l);return a}if(typeof e=="object"){const a=e.constructor,o=a._classRegistryKey;if(!o)throw new Error(`can't serialize object of unregistered class ${o}`);const l=a.serialize?a.serialize(e,t):{};if(!a.serialize){for(const r in e)e.hasOwnProperty(r)&&(Bl[o].omit.indexOf(r)>=0||(l[r]=Dn(e[r],t)));e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(l.$name=o),l}throw new Error("can't serialize object of type "+typeof e)}function us(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||gc(e)||Gr(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(us);if(typeof e=="object"){const t=e.$name||"Object";if(t==="Map"){const l=new Map;for(const r of Object.keys(e))r!=="$name"&&l.set(r,us(e[r]));return l}const{klass:a}=Bl[t];if(!a)throw new Error(`can't deserialize unregistered class ${t}`);if(a.deserialize)return a.deserialize(e);const o=Object.create(a.prototype);for(const l of Object.keys(e))l!=="$name"&&(o[l]=us(e[l]));return o}throw new Error("can't deserialize object of type "+typeof e)}const ye={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519,"CJK Unified Ideographs Extension B":e=>e>=131072&&e<=173791};function Fn(e){for(const t of e)if(w_(t.charCodeAt(0)))return!0;return!1}function Cf(e){for(const t of e)if(!Sf(t.charCodeAt(0)))return!1;return!0}function Sf(e){return!(ye.Arabic(e)||ye["Arabic Supplement"](e)||ye["Arabic Extended-A"](e)||ye["Arabic Presentation Forms-A"](e)||ye["Arabic Presentation Forms-B"](e))}function w_(e){return!(e!==746&&e!==747&&(e<4352||!(ye["Bopomofo Extended"](e)||ye.Bopomofo(e)||ye["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||ye["CJK Compatibility Ideographs"](e)||ye["CJK Compatibility"](e)||ye["CJK Radicals Supplement"](e)||ye["CJK Strokes"](e)||!(!ye["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||ye["CJK Unified Ideographs Extension A"](e)||ye["CJK Unified Ideographs"](e)||ye["Enclosed CJK Letters and Months"](e)||ye["Hangul Compatibility Jamo"](e)||ye["Hangul Jamo Extended-A"](e)||ye["Hangul Jamo Extended-B"](e)||ye["Hangul Jamo"](e)||ye["Hangul Syllables"](e)||ye.Hiragana(e)||ye["Ideographic Description Characters"](e)||ye.Kanbun(e)||ye["Kangxi Radicals"](e)||ye["Katakana Phonetic Extensions"](e)||ye.Katakana(e)&&e!==12540||!(!ye["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!ye["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||ye["Unified Canadian Aboriginal Syllabics"](e)||ye["Unified Canadian Aboriginal Syllabics Extended"](e)||ye["Vertical Forms"](e)||ye["Yijing Hexagram Symbols"](e)||ye["Yi Syllables"](e)||ye["Yi Radicals"](e))))}function yc(e){return!(w_(e)||function(t){return!!(ye["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||ye["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||ye["Letterlike Symbols"](t)||ye["Number Forms"](t)||ye["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||ye["Control Pictures"](t)&&t!==9251||ye["Optical Character Recognition"](t)||ye["Enclosed Alphanumerics"](t)||ye["Geometric Shapes"](t)||ye["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ye["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ye["CJK Symbols and Punctuation"](t)||ye.Katakana(t)||ye["Private Use Area"](t)||ye["CJK Compatibility Forms"](t)||ye["Small Form Variants"](t)||ye["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function bc(e){return e>=1424&&e<=2303||ye["Arabic Presentation Forms-A"](e)||ye["Arabic Presentation Forms-B"](e)}function Tc(e,t){return!(!t&&bc(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||ye.Khmer(e))}function W_(e){for(const t of e)if(bc(t.charCodeAt(0)))return!0;return!1}const M_="deferred",D_="loading",F_="loaded";let B_=null,io="unavailable",Bn=null;const xc=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(io="error"),B_&&B_(e)};function U_(){k_.fire(new ts("pluginStateChange",{pluginStatus:io,pluginURL:Bn}))}const k_=new Cs,Un=function(){return io},z_=function(){if(io!==M_||!Bn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");io=D_,U_(),Bn&&Pt({url:Bn},e=>{e?xc(e):(io=F_,U_())})},fo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>io===F_||fo.applyArabicShaping!=null,isLoading:()=>io===D_,setState(e){io=e.pluginStatus,Bn=e.pluginURL},isParsed:()=>fo.applyArabicShaping!=null&&fo.processBidirectionalText!=null&&fo.processStyledBidirectionalText!=null,getPluginURL:()=>Bn};class ja{constructor(t,a){this.zoom=t,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch,this.brightness=a.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(t){return function(a,o){for(const l of a)if(!Tc(l.charCodeAt(0),o))return!1;return!0}(t,fo.isLoaded())}}class Vr{constructor(t,a,o,l){this.property=t,this.value=a,this.expression=function(r,u,m,p){if(kr(r))return new Dl(r,u);if(Wl(r)||Array.isArray(r)&&r.length>0){const h=Yr(r,u,m,p);if(h.result==="error")throw new Error(h.value.map(y=>`${y.key}: ${y.message}`).join(", "));return h.value}{let h=r;return typeof r=="string"&&u.type==="color"&&(h=ci.parse(r)),{kind:"constant",isConfigDependent:!1,evaluate:()=>h}}}(a===void 0?t.specification.default:a,t.specification,o,l)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,a,o){return this.property.possiblyEvaluate(this,t,a,o)}}class H_{constructor(t,a,o){this.property=t,this.value=new Vr(t,void 0,a,o)}transitioned(t,a){return new Y_(this.property,this.value,a,zi({},t.transition,this.transition),t.now)}untransitioned(){return new Y_(this.property,this.value,null,{},0)}}class rn{constructor(t,a,o){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._scope=a,this._options=o,this.isConfigDependent=!1}getValue(t){return uo(this._values[t].value.value)}setValue(t,a){this._values.hasOwnProperty(t)||(this._values[t]=new H_(this._values[t].property,this._scope,this._options)),this._values[t].value=new Vr(this._values[t].property,a===null?void 0:uo(a),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[t].value.expression.isConfigDependent}setTransitionOrValue(t,a){a&&(this._options=a);const o=this._properties.properties;if(t)for(const l in t){const r=t[l];if(Qo(l,"-transition")){const u=l.slice(0,-11);o[u]&&this.setTransition(u,r)}else o[l]&&this.setValue(l,r)}}getTransition(t){return uo(this._values[t].transition)}setTransition(t,a){this._values.hasOwnProperty(t)||(this._values[t]=new H_(this._values[t].property)),this._values[t].transition=uo(a)||void 0}serialize(){const t={};for(const a of Object.keys(this._values)){const o=this.getValue(a);o!==void 0&&(t[a]=o);const l=this.getTransition(a);l!==void 0&&(t[`${a}-transition`]=l)}return t}transitioned(t,a){const o=new cs(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].transitioned(t,a._values[l]);return o}untransitioned(){const t=new cs(this._properties);for(const a of Object.keys(this._values))t._values[a]=this._values[a].untransitioned();return t}}class Y_{constructor(t,a,o,l,r){const u=l.delay||0,m=l.duration||0;r=r||0,this.property=t,this.value=a,this.begin=r+u,this.end=this.begin+m,t.specification.transition&&(l.delay||l.duration)&&(this.prior=o)}possiblyEvaluate(t,a,o){const l=t.now||0,r=this.value.possiblyEvaluate(t,a,o),u=this.prior;if(u){if(l>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(l<this.begin)return u.possiblyEvaluate(t,a,o);{const m=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(u.possiblyEvaluate(t,a,o),r,oe(m))}}return r}}class cs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,a,o){const l=new Ul(this._properties);for(const r of Object.keys(this._values))l._values[r]=this._values[r].possiblyEvaluate(t,a,o);return l}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Rf{constructor(t,a,o){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._scope=a,this._options=o,this.isConfigDependent=!1}getValue(t){return uo(this._values[t].value)}setValue(t,a){this._values[t]=new Vr(this._values[t].property,a===null?void 0:uo(a),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[t].expression.isConfigDependent}serialize(){const t={};for(const a of Object.keys(this._values)){const o=this.getValue(a);o!==void 0&&(t[a]=o)}return t}possiblyEvaluate(t,a,o){const l=new Ul(this._properties);for(const r of Object.keys(this._values))l._values[r]=this._values[r].possiblyEvaluate(t,a,o);return l}}class Ks{constructor(t,a,o){this.property=t,this.value=a,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,a,o,l){return this.property.evaluate(this.value,this.parameters,t,a,o,l)}}class Ul{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Zt{constructor(t){this.specification=t}possiblyEvaluate(t,a){return t.expression.evaluate(a)}interpolate(t,a,o){const l=xr[this.specification.type];return l?l(t,a,o):t}}class Se{constructor(t,a){this.specification=t,this.overrides=a}possiblyEvaluate(t,a,o,l){return new Ks(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(a,null,{},o,l)}:t.expression,a)}interpolate(t,a,o){if(t.value.kind!=="constant"||a.value.kind!=="constant")return t;if(t.value.value===void 0||a.value.value===void 0)return new Ks(this,{kind:"constant",value:void 0},t.parameters);const l=xr[this.specification.type];return l?new Ks(this,{kind:"constant",value:l(t.value.value,a.value.value,o)},t.parameters):t}evaluate(t,a,o,l,r,u){return t.kind==="constant"?t.value:t.evaluate(a,o,l,r,u)}}class ms{constructor(t){this.specification=t}possiblyEvaluate(t,a,o,l){return!!t.expression.evaluate(a,null,{},o,l)}interpolate(){return!1}}class qa{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new ja(0,{});for(const o in t){const l=t[o];l.specification.overridable&&this.overridableProperties.push(o);const r=this.defaultPropertyValues[o]=new Vr(l,void 0),u=this.defaultTransitionablePropertyValues[o]=new H_(l);this.defaultTransitioningPropertyValues[o]=u.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=r.possiblyEvaluate(a)}}}function kl(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function zl(e){if(Array.isArray(e))return e.map(zl);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const a in e)t[a]=zl(e[a]);return t}return kl(e)}me(Se,"DataDrivenProperty"),me(Zt,"DataConstantProperty"),me(ms,"ColorRampProperty");var gt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function G_(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!G_(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function po(e,t="fill"){if(e==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};G_(e)||(e=Hl(e));const a=e;let o=!0;try{o=function(h){if(!js(h))return h;let y=zl(h);return V_(y),y=Ac(y),y}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const l=gt[`filter_${t}`],r=Hr(o,l);let u=null;if(r.result==="error")throw new Error(r.value.map(h=>`${h.key}: ${h.message}`).join(", "));u=(h,y,x)=>r.value.evaluate(h,y,{},x);let m=null,p=null;if(o!==a){const h=Hr(a,l);if(h.result==="error")throw new Error(h.value.map(y=>`${y.key}: ${y.message}`).join(", "));m=(y,x,v,C,R)=>h.value.evaluate(y,x,{},v,void 0,void 0,C,R),p=!Bs(h.value.expression)}return{filter:u,dynamicFilter:m||void 0,needGeometry:vc(o),needFeature:!!p}}function Ac(e){if(!Array.isArray(e))return e;const t=function(a){if(Nf.has(a[0])){for(let o=1;o<a.length;o++)if(js(a[o]))return!0}return a}(e);return t===!0?t:t.map(a=>Ac(a))}function V_(e){let t=!1;const a=[];if(e[0]==="case"){for(let o=1;o<e.length-1;o+=2)t=t||js(e[o]),a.push(e[o+1]);a.push(e[e.length-1])}else if(e[0]==="match"){t=t||js(e[1]);for(let o=2;o<e.length-1;o+=2)a.push(e[o+1]);a.push(e[e.length-1])}else if(e[0]==="step"){t=t||js(e[1]);for(let o=1;o<e.length-1;o+=2)a.push(e[o+1])}t&&(e.length=0,e.push("any",...a));for(let o=1;o<e.length;o++)V_(e[o])}function js(e){if(!Array.isArray(e))return!1;if((t=e[0])==="pitch"||t==="distance-from-center")return!0;var t;for(let a=1;a<e.length;a++)if(js(e[a]))return!0;return!1}const Nf=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Lf(e,t){return e<t?-1:e>t?1:0}function vc(e){if(!Array.isArray(e))return!1;if(e[0]==="within"||e[0]==="distance")return!0;for(let t=1;t<e.length;t++)if(vc(e[t]))return!0;return!1}function Hl(e){if(!e)return!0;const t=e[0];return e.length<=1?t!=="any":t==="=="?Yl(e[1],e[2],"=="):t==="!="?Gl(Yl(e[1],e[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Yl(e[1],e[2],t):t==="any"?(a=e.slice(1),["any"].concat(a.map(Hl))):t==="all"?["all"].concat(e.slice(1).map(Hl)):t==="none"?["all"].concat(e.slice(1).map(Hl).map(Gl)):t==="in"?X_(e[1],e.slice(2)):t==="!in"?Gl(X_(e[1],e.slice(2))):t==="has"?Ec(e[1]):t!=="!has"||Gl(Ec(e[1]));var a}function Yl(e,t,a){switch(e){case"$type":return[`filter-type-${a}`,t];case"$id":return[`filter-id-${a}`,t];default:return[`filter-${a}`,e,t]}}function X_(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(a=>typeof a!=typeof t[0])?["filter-in-large",e,["literal",t.sort(Lf)]]:["filter-in-small",e,["literal",t]]}}function Ec(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Gl(e){return["!",e]}const Xr="";function K_(e,t){return t?`${e}${Xr}${t}`:e}const Vl="-transition";class oo extends Cs{constructor(t,a,o,l){if(super(),this.id=t.id,this.fqid=K_(this.id,o),this.type=t.type,this.scope=o,this.options=l,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&t.type!=="sky"&&t.type!=="slot"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),t.slot&&(this.slot=t.slot),a.layout&&(this._unevaluatedLayout=new Rf(a.layout,this.scope,l),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),a.paint)){this._transitionablePaint=new rn(a.paint,this.scope,l);for(const r in t.paint)this.setPaintProperty(r,t.paint[r]);for(const r in t.layout)this.setLayoutProperty(r,t.layout[r]);this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ul(a.paint)}}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,a){if(this.type==="custom"&&t==="visibility")return void(this.visibility=a);const o=this._unevaluatedLayout;o._properties.properties[t]&&(o.setValue(t,a),this.isConfigDependent=this.isConfigDependent||o.isConfigDependent,t==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(t){return Qo(t,Vl)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,a){const o=this._transitionablePaint,l=o._properties.properties;if(Qo(t,Vl)){const x=t.slice(0,-11);return l[x]&&o.setTransition(x,a||void 0),!1}if(!l[t])return!1;const r=o._values[t],u=r.value.isDataDriven(),m=r.value;o.setValue(t,a),this.isConfigDependent=this.isConfigDependent||o.isConfigDependent,this._handleSpecialPaintPropertyUpdate(t);const p=o._values[t].value,h=p.isDataDriven(),y=Qo(t,"pattern")||t==="line-dasharray";return h||u||y||this._handleOverridablePaintPropertyUpdate(t,m,p)}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getDefaultProgramParams(t,a){return null}_handleOverridablePaintPropertyUpdate(t,a,o){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,a)}serialize(){return bo({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(t,a)=>!(t===void 0||a==="layout"&&!Object.keys(t).length||a==="paint"&&!Object.keys(t).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const t in this.paint._values){const a=this.paint.get(t);if(a instanceof Ks&&Ur(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=po(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(t){this._stats&&(t.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}}const Pf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Kr{constructor(t,a){this._structArray=t,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ya{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,a){return t._trim(),a&&(t.isTransferred=!0,a.add(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const a=Object.create(this.prototype);return a.arrayBuffer=t.arrayBuffer,a.length=t.length,a.capacity=t.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...t){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...t){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ia(e,t=1){let a=0,o=0;return{members:e.map(l=>{const r=Pf[l.type].BYTES_PER_ELEMENT,u=a=Xl(a,Math.max(t,r)),m=l.components||1;return o=Math.max(o,r),a+=r*m,{name:l.name,type:l.type,components:m,offset:u}}),size:Xl(a,Math.max(o,t)),alignment:t}}function Xl(e,t){return Math.ceil(e/t)*t}class ko extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,a)}emplace(t,a,o){const l=2*t;return this.int16[l+0]=a,this.int16[l+1]=o,t}}ko.prototype.bytesPerElement=4,me(ko,"StructArrayLayout2i4");class qi extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,a,o)}emplace(t,a,o,l){const r=3*t;return this.int16[r+0]=a,this.int16[r+1]=o,this.int16[r+2]=l,t}}qi.prototype.bytesPerElement=6,me(qi,"StructArrayLayout3i6");class dn extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,o,l){const r=this.length;return this.resize(r+1),this.emplace(r,t,a,o,l)}emplace(t,a,o,l,r){const u=4*t;return this.int16[u+0]=a,this.int16[u+1]=o,this.int16[u+2]=l,this.int16[u+3]=r,t}}dn.prototype.bytesPerElement=8,me(dn,"StructArrayLayout4i8");class j_ extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r){const u=this.length;return this.resize(u+1),this.emplace(u,t,a,o,l,r)}emplace(t,a,o,l,r,u){const m=5*t;return this.int16[m+0]=a,this.int16[m+1]=o,this.int16[m+2]=l,this.int16[m+3]=r,this.int16[m+4]=u,t}}j_.prototype.bytesPerElement=10,me(j_,"StructArrayLayout5i10");class q_ extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,o,l,r,u,m)}emplace(t,a,o,l,r,u,m,p){const h=6*t,y=12*t,x=3*t;return this.int16[h+0]=a,this.int16[h+1]=o,this.uint8[y+4]=l,this.uint8[y+5]=r,this.uint8[y+6]=u,this.uint8[y+7]=m,this.float32[x+2]=p,t}}q_.prototype.bytesPerElement=12,me(q_,"StructArrayLayout2i4ub1f12");class kn extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l){const r=this.length;return this.resize(r+1),this.emplace(r,t,a,o,l)}emplace(t,a,o,l,r){const u=4*t;return this.float32[u+0]=a,this.float32[u+1]=o,this.float32[u+2]=l,this.float32[u+3]=r,t}}kn.prototype.bytesPerElement=16,me(kn,"StructArrayLayout4f16");class zn extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r){const u=this.length;return this.resize(u+1),this.emplace(u,t,a,o,l,r)}emplace(t,a,o,l,r,u){const m=6*t,p=3*t;return this.uint16[m+0]=a,this.uint16[m+1]=o,this.uint16[m+2]=l,this.uint16[m+3]=r,this.float32[p+2]=u,t}}zn.prototype.bytesPerElement=12,me(zn,"StructArrayLayout4ui1f12");class qs extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,o,l){const r=this.length;return this.resize(r+1),this.emplace(r,t,a,o,l)}emplace(t,a,o,l,r){const u=4*t;return this.uint16[u+0]=a,this.uint16[u+1]=o,this.uint16[u+2]=l,this.uint16[u+3]=r,t}}qs.prototype.bytesPerElement=8,me(qs,"StructArrayLayout4ui8");class jr extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,a,o,l,r,u)}emplace(t,a,o,l,r,u,m){const p=6*t;return this.int16[p+0]=a,this.int16[p+1]=o,this.int16[p+2]=l,this.int16[p+3]=r,this.int16[p+4]=u,this.int16[p+5]=m,t}}jr.prototype.bytesPerElement=12,me(jr,"StructArrayLayout6i12");class Kl extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m,p,h,y,x,v){const C=this.length;return this.resize(C+1),this.emplace(C,t,a,o,l,r,u,m,p,h,y,x,v)}emplace(t,a,o,l,r,u,m,p,h,y,x,v,C){const R=12*t;return this.int16[R+0]=a,this.int16[R+1]=o,this.int16[R+2]=l,this.int16[R+3]=r,this.uint16[R+4]=u,this.uint16[R+5]=m,this.uint16[R+6]=p,this.uint16[R+7]=h,this.int16[R+8]=y,this.int16[R+9]=x,this.int16[R+10]=v,this.int16[R+11]=C,t}}Kl.prototype.bytesPerElement=24,me(Kl,"StructArrayLayout4i4ui4i24");class $_ extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u){const m=this.length;return this.resize(m+1),this.emplace(m,t,a,o,l,r,u)}emplace(t,a,o,l,r,u,m){const p=10*t,h=5*t;return this.int16[p+0]=a,this.int16[p+1]=o,this.int16[p+2]=l,this.float32[h+2]=r,this.float32[h+3]=u,this.float32[h+4]=m,t}}$_.prototype.bytesPerElement=20,me($_,"StructArrayLayout3i3f20");class Z_ extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint32[1*t+0]=a,t}}Z_.prototype.bytesPerElement=4,me(Z_,"StructArrayLayout1ul4");class qo extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,a)}emplace(t,a,o){const l=2*t;return this.uint16[l+0]=a,this.uint16[l+1]=o,t}}qo.prototype.bytesPerElement=4,me(qo,"StructArrayLayout2ui4");class J_ extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m,p,h,y,x,v,C){const R=this.length;return this.resize(R+1),this.emplace(R,t,a,o,l,r,u,m,p,h,y,x,v,C)}emplace(t,a,o,l,r,u,m,p,h,y,x,v,C,R){const N=20*t,W=10*t;return this.int16[N+0]=a,this.int16[N+1]=o,this.int16[N+2]=l,this.int16[N+3]=r,this.int16[N+4]=u,this.float32[W+3]=m,this.float32[W+4]=p,this.float32[W+5]=h,this.float32[W+6]=y,this.int16[N+14]=x,this.uint32[W+8]=v,this.uint16[N+18]=C,this.uint16[N+19]=R,t}}J_.prototype.bytesPerElement=40,me(J_,"StructArrayLayout5i4f1i1ul2ui40");class jl extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,o,l,r,u,m)}emplace(t,a,o,l,r,u,m,p){const h=8*t;return this.int16[h+0]=a,this.int16[h+1]=o,this.int16[h+2]=l,this.int16[h+4]=r,this.int16[h+5]=u,this.int16[h+6]=m,this.int16[h+7]=p,t}}jl.prototype.bytesPerElement=16,me(jl,"StructArrayLayout3i2i2i16");class qr extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r){const u=this.length;return this.resize(u+1),this.emplace(u,t,a,o,l,r)}emplace(t,a,o,l,r,u){const m=4*t,p=8*t;return this.float32[m+0]=a,this.float32[m+1]=o,this.float32[m+2]=l,this.int16[p+6]=r,this.int16[p+7]=u,t}}qr.prototype.bytesPerElement=16,me(qr,"StructArrayLayout2f1f2i16");class Q_ extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l){const r=this.length;return this.resize(r+1),this.emplace(r,t,a,o,l)}emplace(t,a,o,l,r){const u=12*t,m=3*t;return this.uint8[u+0]=a,this.uint8[u+1]=o,this.float32[m+1]=l,this.float32[m+2]=r,t}}Q_.prototype.bytesPerElement=12,me(Q_,"StructArrayLayout2ub2f12");class Ii extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,a,o)}emplace(t,a,o,l){const r=3*t;return this.uint16[r+0]=a,this.uint16[r+1]=o,this.uint16[r+2]=l,t}}Ii.prototype.bytesPerElement=6,me(Ii,"StructArrayLayout3ui6");class $s extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D,Y,j,K,tt){const J=this.length;return this.resize(J+1),this.emplace(J,t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D,Y,j,K,tt)}emplace(t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D,Y,j,K,tt,J){const st=30*t,_t=15*t,mt=60*t;return this.int16[st+0]=a,this.int16[st+1]=o,this.int16[st+2]=l,this.float32[_t+2]=r,this.float32[_t+3]=u,this.uint16[st+8]=m,this.uint16[st+9]=p,this.uint32[_t+5]=h,this.uint32[_t+6]=y,this.uint32[_t+7]=x,this.uint16[st+16]=v,this.uint16[st+17]=C,this.uint16[st+18]=R,this.float32[_t+10]=N,this.float32[_t+11]=W,this.uint8[mt+48]=D,this.uint8[mt+49]=Y,this.uint8[mt+50]=j,this.uint32[_t+13]=K,this.int16[st+28]=tt,this.uint8[mt+58]=J,t}}$s.prototype.bytesPerElement=60,me($s,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class $r extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D,Y,j,K,tt,J,st,_t,mt,bt,ft,Ct,Dt,Et,Wt,xt){const wt=this.length;return this.resize(wt+1),this.emplace(wt,t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D,Y,j,K,tt,J,st,_t,mt,bt,ft,Ct,Dt,Et,Wt,xt)}emplace(t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D,Y,j,K,tt,J,st,_t,mt,bt,ft,Ct,Dt,Et,Wt,xt,wt){const Qt=20*t,Bt=40*t,pe=80*t;return this.float32[Qt+0]=a,this.float32[Qt+1]=o,this.int16[Bt+4]=l,this.int16[Bt+5]=r,this.int16[Bt+6]=u,this.int16[Bt+7]=m,this.int16[Bt+8]=p,this.int16[Bt+9]=h,this.int16[Bt+10]=y,this.int16[Bt+11]=x,this.int16[Bt+12]=v,this.uint16[Bt+13]=C,this.uint16[Bt+14]=R,this.uint16[Bt+15]=N,this.uint16[Bt+16]=W,this.uint16[Bt+17]=D,this.uint16[Bt+18]=Y,this.uint16[Bt+19]=j,this.uint16[Bt+20]=K,this.uint16[Bt+21]=tt,this.uint16[Bt+22]=J,this.uint16[Bt+23]=st,this.uint16[Bt+24]=_t,this.uint16[Bt+25]=mt,this.uint16[Bt+26]=bt,this.uint16[Bt+27]=ft,this.uint32[Qt+14]=Ct,this.float32[Qt+15]=Dt,this.float32[Qt+16]=Et,this.float32[Qt+17]=Wt,this.float32[Qt+18]=xt,this.uint8[pe+76]=wt,t}}$r.prototype.bytesPerElement=80,me($r,"StructArrayLayout2f9i15ui1ul4f1ub80");class ql extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.float32[1*t+0]=a,t}}ql.prototype.bytesPerElement=4,me(ql,"StructArrayLayout1f4");class Hn extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r){const u=this.length;return this.resize(u+1),this.emplace(u,t,a,o,l,r)}emplace(t,a,o,l,r,u){const m=5*t;return this.float32[m+0]=a,this.float32[m+1]=o,this.float32[m+2]=l,this.float32[m+3]=r,this.float32[m+4]=u,t}}Hn.prototype.bytesPerElement=20,me(Hn,"StructArrayLayout5f20");class tu extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,o,l,r,u,m)}emplace(t,a,o,l,r,u,m,p){const h=7*t;return this.float32[h+0]=a,this.float32[h+1]=o,this.float32[h+2]=l,this.float32[h+3]=r,this.float32[h+4]=u,this.float32[h+5]=m,this.float32[h+6]=p,t}}tu.prototype.bytesPerElement=28,me(tu,"StructArrayLayout7f28");class $l extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,o,l){const r=this.length;return this.resize(r+1),this.emplace(r,t,a,o,l)}emplace(t,a,o,l,r){const u=6*t;return this.uint32[3*t+0]=a,this.uint16[u+2]=o,this.uint16[u+3]=l,this.uint16[u+4]=r,t}}$l.prototype.bytesPerElement=12,me($l,"StructArrayLayout1ul3ui12");class eu extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint16[1*t+0]=a,t}}eu.prototype.bytesPerElement=2,me(eu,"StructArrayLayout1ui2");class fs extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,a,o)}emplace(t,a,o,l){const r=3*t;return this.float32[r+0]=a,this.float32[r+1]=o,this.float32[r+2]=l,t}}fs.prototype.bytesPerElement=12,me(fs,"StructArrayLayout3f12");class Zl extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,a)}emplace(t,a,o){const l=2*t;return this.float32[l+0]=a,this.float32[l+1]=o,t}}Zl.prototype.bytesPerElement=8,me(Zl,"StructArrayLayout2f8");class au extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W){const D=this.length;return this.resize(D+1),this.emplace(D,t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W)}emplace(t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D){const Y=16*t;return this.float32[Y+0]=a,this.float32[Y+1]=o,this.float32[Y+2]=l,this.float32[Y+3]=r,this.float32[Y+4]=u,this.float32[Y+5]=m,this.float32[Y+6]=p,this.float32[Y+7]=h,this.float32[Y+8]=y,this.float32[Y+9]=x,this.float32[Y+10]=v,this.float32[Y+11]=C,this.float32[Y+12]=R,this.float32[Y+13]=N,this.float32[Y+14]=W,this.float32[Y+15]=D,t}}au.prototype.bytesPerElement=64,me(au,"StructArrayLayout16f64");class Jl extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,o,l,r,u,m){const p=this.length;return this.resize(p+1),this.emplace(p,t,a,o,l,r,u,m)}emplace(t,a,o,l,r,u,m,p){const h=10*t,y=5*t;return this.uint16[h+0]=a,this.uint16[h+1]=o,this.uint16[h+2]=l,this.uint16[h+3]=r,this.float32[y+2]=u,this.float32[y+3]=m,this.float32[y+4]=p,t}}Jl.prototype.bytesPerElement=20,me(Jl,"StructArrayLayout4ui3f20");class iu extends Ya{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint8[1*t+0]=a,t}}iu.prototype.bytesPerElement=1,me(iu,"StructArrayLayout1ub1");class Ic extends Kr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ic.prototype.size=40;class Oc extends J_{get(t){return new Ic(this,t)}}me(Oc,"CollisionBoxArray");class Cc extends Kr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Cc.prototype.size=60;class Sc extends $s{get(t){return new Cc(this,t)}}me(Sc,"PlacedSymbolArray");class Rc extends Kr{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(t){this._structArray.uint32[this._pos4+14]=t}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(t){this._structArray.float32[this._pos4+18]=t}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}Rc.prototype.size=80;class Nc extends $r{get(t){return new Rc(this,t)}}me(Nc,"SymbolInstanceArray");class Lc extends ql{getoffsetX(t){return this.float32[1*t+0]}}me(Lc,"GlyphOffsetArray");class Ql extends ko{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}me(Ql,"SymbolLineVertexArray");class Pc extends Kr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Pc.prototype.size=12;class wc extends $l{get(t){return new Pc(this,t)}}me(wc,"FeatureIndexArray");class tr extends qo{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}me(tr,"FillExtrusionCentroidArray");const wf=Ia([{name:"a_pos",components:2,type:"Int16"}],4),Wc=Ia([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ai{constructor(t=[]){this.segments=t}_prepareSegment(t,a,o,l){let r=this.segments[this.segments.length-1];return t>ai.MAX_VERTEX_ARRAY_LENGTH&&ei(`Max vertices per segment is ${ai.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!r||r.vertexLength+t>ai.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==l)&&(r={vertexOffset:a,primitiveOffset:o,vertexLength:0,primitiveLength:0},l!==void 0&&(r.sortKey=l),this.segments.push(r)),r}prepareSegment(t,a,o,l){return this._prepareSegment(t,a.length,o.length,l)}get(){return this.segments}destroy(){for(const t of this.segments)for(const a in t.vaos)t.vaos[a].destroy()}static simpleSegment(t,a,o,l){return new ai([{vertexOffset:t,primitiveOffset:a,vertexLength:o,primitiveLength:l,vaos:{},sortKey:0}])}}function ou(e,t){return 256*(e=Ve(Math.floor(e),0,255))+Ve(Math.floor(t),0,255)}ai.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,me(ai,"SegmentVector");const Mc=Ia([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Dc=Ia([{name:"a_dash",components:4,type:"Uint16"}]);var er={exports:{}},Zr={exports:{}};(function(e){e.exports=function(t,a){var o,l,r,u,m,p,h,y;for(l=t.length-(o=3&t.length),r=a,m=3432918353,p=461845907,y=0;y<l;)h=255&t.charCodeAt(y)|(255&t.charCodeAt(++y))<<8|(255&t.charCodeAt(++y))<<16|(255&t.charCodeAt(++y))<<24,++y,r=27492+(65535&(u=5*(65535&(r=(r^=h=(65535&(h=(h=(65535&h)*m+(((h>>>16)*m&65535)<<16)&4294967295)<<15|h>>>17))*p+(((h>>>16)*p&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(u>>>16)&65535)<<16);switch(h=0,o){case 3:h^=(255&t.charCodeAt(y+2))<<16;case 2:h^=(255&t.charCodeAt(y+1))<<8;case 1:r^=h=(65535&(h=(h=(65535&(h^=255&t.charCodeAt(y)))*m+(((h>>>16)*m&65535)<<16)&4294967295)<<15|h>>>17))*p+(((h>>>16)*p&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})(Zr);var nu=Zr.exports,Fc={exports:{}};(function(e){e.exports=function(t,a){for(var o,l=t.length,r=a^l,u=0;l>=4;)o=1540483477*(65535&(o=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24))+((1540483477*(o>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),l-=4,++u;switch(l){case 3:r^=(255&t.charCodeAt(u+2))<<16;case 2:r^=(255&t.charCodeAt(u+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(u)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})(Fc);var Bc=nu,Uc=Fc.exports;er.exports=Bc,er.exports.murmur3=Bc,er.exports.murmur2=Uc;var su=be(er.exports);class ar{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(t,a,o,l){this.ids.push(kc(t)),this.positions.push(a,o,l)}eachPosition(t,a){const o=kc(t);let l=0,r=this.ids.length-1;for(;l<r;){const u=l+r>>1;this.ids[u]>=o?r=u:l=u+1}for(;this.ids[l]===o;)a(this.positions[3*l],this.positions[3*l+1],this.positions[3*l+2]),l++}static serialize(t,a){const o=new Float64Array(t.ids),l=new Uint32Array(t.positions);return lu(o,l,0,o.length-1),a&&(a.add(o.buffer),a.add(l.buffer)),{ids:o,positions:l}}static deserialize(t){const a=new ar;let o;a.ids=t.ids,a.positions=t.positions;for(const l of a.ids)l!==o&&a.uniqueIds.push(l),o=l;return a.indexed=!0,a}}function kc(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:su(String(e))}function lu(e,t,a,o){for(;a<o;){const l=e[a+o>>1];let r=a-1,u=o+1;for(;;){do r++;while(e[r]<l);do u--;while(e[u]>l);if(r>=u)break;Jr(e,r,u),Jr(t,3*r,3*u),Jr(t,3*r+1,3*u+1),Jr(t,3*r+2,3*u+2)}u-a<o-u?(lu(e,t,a,u),a=u+1):(lu(e,t,u+1,o),o=u)}}function Jr(e,t,a){const o=e[t];e[t]=e[a],e[a]=o}me(ar,"FeaturePositionMap");class _n{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,a),this.initialized=!0),!!this.location}}class Qr extends _n{constructor(t){super(t),this.current=0}set(t,a,o){this.fetchUniformLocation(t,a)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}}class Vi extends _n{constructor(t){super(t),this.current=0}set(t,a,o){this.fetchUniformLocation(t,a)&&this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class Yn extends _n{constructor(t){super(t),this.current=[0,0]}set(t,a,o){this.fetchUniformLocation(t,a)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}}class zc extends _n{constructor(t){super(t),this.current=[0,0,0]}set(t,a,o){this.fetchUniformLocation(t,a)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}}class d extends _n{constructor(t){super(t),this.current=[0,0,0,0]}set(t,a,o){this.fetchUniformLocation(t,a)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3])))}}class i extends _n{constructor(t){super(t),this.current=ci.transparent}set(t,a,o){this.fetchUniformLocation(t,a)&&(o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a)))}}const n=new Float32Array(16);class _ extends _n{constructor(t){super(t),this.current=n}set(t,a,o){if(this.fetchUniformLocation(t,a)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let l=1;l<16;l++)if(o[l]!==this.current[l]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}}const c=new Float32Array(9),f=new Float32Array(4);class g extends _n{constructor(t){super(t),this.current=f}set(t,a,o){if(this.fetchUniformLocation(t,a)){for(let l=0;l<4;l++)if(o[l]!==this.current[l]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}}}function b(e){return[ou(255*e.r,255*e.g),ou(255*e.b,255*e.a)]}class A{constructor(t,a,o){this.value=t,this.uniformNames=a.map(l=>`u_${l}`),this.type=o}setUniform(t,a,o,l,r){a.set(t,r,l.constantOr(this.value))}getBinding(t,a){return this.type==="color"?new i(t):new Vi(t)}}class E{constructor(t,a){this.uniformNames=a.map(o=>`u_${o}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,a,o,l,r){const u=r==="u_pattern"||r==="u_dash"?this.pattern:r==="u_pixel_ratio"?this.pixelRatio:null;u&&a.set(t,r,u)}getBinding(t,a){return a==="u_pattern"||a==="u_dash"?new d(t):new Vi(t)}}class O{constructor(t,a,o,l){this.expression=t,this.type=o,this.maxValue=0,this.paintVertexAttributes=a.map(r=>({name:`a_${r}`,type:"Float32",components:o==="color"?2:1,offset:0})),this.paintVertexArray=new l}populatePaintArray(t,a,o,l,r,u,m){const p=this.paintVertexArray.length,h=this.expression.evaluate(new ja(0,{brightness:u}),a,{},r,l,m);this.paintVertexArray.resize(t),this._setPaintValue(p,t,h)}updatePaintArray(t,a,o,l,r,u,m){const p=this.expression.evaluate({zoom:0,brightness:m},o,l,void 0,r);this._setPaintValue(t,a,p)}_setPaintValue(t,a,o){if(this.type==="color"){const l=b(o);for(let r=t;r<a;r++)this.paintVertexArray.emplace(r,l[0],l[1])}else{for(let l=t;l<a;l++)this.paintVertexArray.emplace(l,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class S{constructor(t,a,o,l,r,u){this.expression=t,this.uniformNames=a.map(m=>`u_${m}_t`),this.type=o,this.useIntegerZoom=l,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=a.map(m=>({name:`a_${m}`,type:"Float32",components:o==="color"?4:2,offset:0})),this.paintVertexArray=new u}populatePaintArray(t,a,o,l,r,u,m){const p=this.expression.evaluate(new ja(this.zoom,{brightness:u}),a,{},r,l,m),h=this.expression.evaluate(new ja(this.zoom+1,{brightness:u}),a,{},r,l,m),y=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(y,t,p,h)}updatePaintArray(t,a,o,l,r,u,m){const p=this.expression.evaluate({zoom:this.zoom,brightness:m},o,l,void 0,r),h=this.expression.evaluate({zoom:this.zoom+1,brightness:m},o,l,void 0,r);this._setPaintValue(t,a,p,h)}_setPaintValue(t,a,o,l){if(this.type==="color"){const r=b(o),u=b(l);for(let m=t;m<a;m++)this.paintVertexArray.emplace(m,r[0],r[1],u[0],u[1])}else{for(let r=t;r<a;r++)this.paintVertexArray.emplace(r,o,l);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,a,o,l,r){const u=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,m=Ve(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);a.set(t,r,m)}getBinding(t,a){return new Vi(t)}}class L{constructor(t,a,o,l,r){this.expression=t,this.layerId=r,this.paintVertexAttributes=(o==="array"?Dc:Mc).members;for(let u=0;u<a.length;++u);this.paintVertexArray=new l}populatePaintArray(t,a,o){const l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(l,t,a.patterns&&a.patterns[this.layerId],o)}updatePaintArray(t,a,o,l,r,u,m){this._setPaintValues(t,a,o.patterns&&o.patterns[this.layerId],u)}_setPaintValues(t,a,o,l){if(!l||!o)return;const r=l[o];if(!r)return;const{tl:u,br:m,pixelRatio:p}=r;for(let h=t;h<a;h++)this.paintVertexArray.emplace(h,u[0],u[1],m[0],m[1],p)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class w{constructor(t,a,o=()=>!0){this.binders={},this._buffers=[];const l=[];for(const r in t.paint._values){const u=t.paint.get(r);if(!o(r)||!(u instanceof Ks&&Ur(u.property.specification)))continue;const m=k(r,t.type),p=u.value,h=u.property.specification.type,y=!!u.property.useIntegerZoom,x=r==="line-dasharray"||r.endsWith("pattern"),v=r==="line-dasharray"&&t.layout.get("line-cap").value.kind!=="constant";if(p.kind!=="constant"||v)if(p.kind==="source"||v||x){const C=q(r,h,"source");this.binders[r]=x?new L(p,m,h,C,t.id):new O(p,m,h,C),l.push(`/a_${r}`)}else{const C=q(r,h,"composite");this.binders[r]=new S(p,m,h,y,a,C),l.push(`/z_${r}`)}else this.binders[r]=x?new E(p.value,m):new A(p.value,m,h),l.push(`/u_${r}`)}this.cacheKey=l.sort().join("")}getMaxValue(t){const a=this.binders[t];return a instanceof O||a instanceof S?a.maxValue:0}populatePaintArrays(t,a,o,l,r,u,m){for(const p in this.binders){const h=this.binders[p];(h instanceof O||h instanceof S||h instanceof L)&&h.populatePaintArray(t,a,o,l,r,u,m)}}setConstantPatternPositions(t){for(const a in this.binders){const o=this.binders[a];o instanceof E&&o.setConstantPatternPositions(t)}}updatePaintArrays(t,a,o,l,r,u,m,p){let h=!1;const y=Object.keys(t),x=y.length!==0,v=x?y:a.uniqueIds;for(const C in this.binders){const R=this.binders[C];if((R instanceof O||R instanceof S||R instanceof L)&&(R.expression.isStateDependent===!0||R.expression.isLightConstant===!1)){const N=r.paint.get(C);R.expression=N.value;for(const W of v){const D=t[W.toString()];a.eachPosition(W,(Y,j,K)=>{const tt=l.feature(Y);R.updatePaintArray(j,K,tt,D,u,m,p)})}if(!x)for(const W of o.uniqueIds){const D=t[W.toString()];o.eachPosition(W,(Y,j,K)=>{const tt=l.feature(Y);R.updatePaintArray(j,K,tt,D,u,m,p)})}h=!0}}return h}defines(){const t=[];for(const a in this.binders){const o=this.binders[a];(o instanceof A||o instanceof E)&&t.push(...o.uniformNames.map(l=>`#define HAS_UNIFORM_${l}`))}return t}getBinderAttributes(){const t=[];for(const a in this.binders){const o=this.binders[a];if(o instanceof O||o instanceof S||o instanceof L)for(let l=0;l<o.paintVertexAttributes.length;l++)t.push(o.paintVertexAttributes[l].name)}return t}getBinderUniforms(){const t=[];for(const a in this.binders){const o=this.binders[a];if(o instanceof A||o instanceof E||o instanceof S)for(const l of o.uniformNames)t.push(l)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const a=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof A||l instanceof E||l instanceof S)for(const r of l.uniformNames)a.push({name:r,property:o,binding:l.getBinding(t,r)})}return a}setUniforms(t,a,o,l,r){for(const{name:u,property:m,binding:p}of o)this.binders[m].setUniform(t,p,r,l.get(m),u)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const a=this.binders[t];(a instanceof O||a instanceof S||a instanceof L)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(t){for(const a in this.binders){const o=this.binders[a];(o instanceof O||o instanceof S||o instanceof L)&&o.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const a=this.binders[t];(a instanceof O||a instanceof S||a instanceof L)&&a.destroy()}}}class U{constructor(t,a,o=()=>!0){this.programConfigurations={};for(const l of t)this.programConfigurations[l.id]=new w(l,a,o);this.needsUpload=!1,this._featureMap=new ar,this._featureMapWithoutIds=new ar,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(t,a,o,l,r,u,m,p){for(const h in this.programConfigurations)this.programConfigurations[h].populatePaintArrays(t,a,l,r,u,m,p);a.id!==void 0?this._featureMap.add(a.id,o,this._bufferOffset,t):(this._featureMapWithoutIds.add(this._idlessCounter,o,this._bufferOffset,t),this._idlessCounter+=1),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,a,o,l,r,u){for(const m of o)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(t,this._featureMap,this._featureMapWithoutIds,a,m,l,r,u||0)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const B={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function k(e,t){return B[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const M={"line-pattern":{source:zn,composite:zn},"fill-pattern":{source:zn,composite:zn},"fill-extrusion-pattern":{source:zn,composite:zn},"line-dasharray":{source:qs,composite:qs}},H={color:{source:Zl,composite:kn},number:{source:ql,composite:Zl}};function q(e,t,a){const o=M[e];return o&&o[a]||H[t][a]}me(A,"ConstantBinder"),me(E,"PatternConstantBinder"),me(O,"SourceExpressionBinder"),me(L,"PatternCompositeBinder"),me(S,"CompositeExpressionBinder"),me(w,"ProgramConfiguration",{omit:["_buffers"]}),me(U,"ProgramConfigurationSet");const V=se/Math.PI/2,$=5,z=6,Z=16383,at=64,nt=[at,32,16],rt=-V,yt=V;function ut(e,t,a,o=V){return a=Oe(a),[e*Math.sin(a)*o,-t*o,e*Math.cos(a)*o]}function It(e,t,a){return ut(Math.cos(Oe(e)),Math.sin(Oe(e)),t,a)}const vt=63710088e-1,Ut=2*Math.PI*vt;class ct{constructor(t,a){if(isNaN(t)||isNaN(a))throw new Error(`Invalid LngLat object: (${t}, ${a})`);if(this.lng=+t,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ct(wi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const a=Math.PI/180,o=this.lat*a,l=t.lat*a,r=Math.sin(o)*Math.sin(l)+Math.cos(o)*Math.cos(l)*Math.cos((t.lng-this.lng)*a);return vt*Math.acos(Math.min(r,1))}toBounds(t=0){const a=360*t/40075017,o=a/Math.cos(Math.PI/180*this.lat);return new Tt({lng:this.lng-o,lat:this.lat-a},{lng:this.lng+o,lat:this.lat+a})}toEcef(t){return It(this.lat,this.lng,V+t*V/vt)}static convert(t){if(t instanceof ct)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new ct(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new ct(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Tt{constructor(t,a){t&&(a?this.setSouthWest(t).setNorthEast(a):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof ct?new ct(t.lng,t.lat):ct.convert(t),this}setSouthWest(t){return this._sw=t instanceof ct?new ct(t.lng,t.lat):ct.convert(t),this}extend(t){const a=this._sw,o=this._ne;let l,r;if(t instanceof ct)l=t,r=t;else{if(!(t instanceof Tt))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Tt.convert(t)):this.extend(ct.convert(t)):typeof t=="object"&&t!==null&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(ct.convert(t)):this;if(l=t._sw,r=t._ne,!l||!r)return this}return a||o?(a.lng=Math.min(l.lng,a.lng),a.lat=Math.min(l.lat,a.lat),o.lng=Math.max(r.lng,o.lng),o.lat=Math.max(r.lat,o.lat)):(this._sw=new ct(l.lng,l.lat),this._ne=new ct(r.lng,r.lat)),this}getCenter(){return new ct((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ct(this.getWest(),this.getNorth())}getSouthEast(){return new ct(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:a,lat:o}=ct.convert(t);let l=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(l=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=o&&o<=this._ne.lat&&l}static convert(t){return!t||t instanceof Tt?t:new Tt(t)}}var lt={};(function(e,t){(function(a){function o(r,u,m){var p=l(256*r,256*(u=Math.pow(2,m)-u-1),m),h=l(256*(r+1),256*(u+1),m);return p[0]+","+p[1]+","+h[0]+","+h[1]}function l(r,u,m){var p=2*Math.PI*6378137/256/Math.pow(2,m);return[r*p-2*Math.PI*6378137/2,u*p-2*Math.PI*6378137/2]}a.getURL=function(r,u,m,p,h,y){return y=y||{},r+"?"+["bbox="+o(m,p,h),"format="+(y.format||"image/png"),"service="+(y.service||"WMS"),"version="+(y.version||"1.1.1"),"request="+(y.request||"GetMap"),"srs="+(y.srs||"EPSG:3857"),"width="+(y.width||256),"height="+(y.height||256),"layers="+u].join("&")},a.getTileBBox=o,a.getMercCoords=l,Object.defineProperty(a,"__esModule",{value:!0})})(t)})(0,lt);var pt=lt;class kt{constructor(t,a,o){this.z=t,this.x=a,this.y=o,this.key=ae(0,t,t,a,o)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,a){const o=pt.getTileBBox(this.x,this.y,this.z),l=function(r,u,m){let p,h="";for(let y=r;y>0;y--)p=1<<y-1,h+=(u&p?1:0)+(m&p?2:0);return h}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",o)}toString(){return`${this.z}/${this.x}/${this.y}`}}class qt{constructor(t,a){this.wrap=t,this.canonical=a,this.key=ae(t,a.z,a.z,a.x,a.y)}}class Xt{constructor(t,a,o,l,r){this.overscaledZ=t,this.wrap=a,this.canonical=new kt(o,+l,+r),this.key=a===0&&t===o?this.canonical.key:ae(a,t,o,l,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const a=this.canonical.z-t;return t>this.canonical.z?new Xt(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Xt(t,this.wrap,t,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(t,a=!0){if(this.overscaledZ===t&&a)return this.key;if(t>this.canonical.z)return ae(this.wrap*+a,t,this.canonical.z,this.canonical.x,this.canonical.y);{const o=this.canonical.z-t;return ae(this.wrap*+a,t,t,this.canonical.x>>o,this.canonical.y>>o)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const a=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.z<this.canonical.z&&t.canonical.x===this.canonical.x>>a&&t.canonical.y===this.canonical.y>>a}children(t){if(this.overscaledZ>=t)return[new Xt(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,o=2*this.canonical.x,l=2*this.canonical.y;return[new Xt(a,this.wrap,a,o,l),new Xt(a,this.wrap,a,o+1,l),new Xt(a,this.wrap,a,o,l+1),new Xt(a,this.wrap,a,o+1,l+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Xt(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Xt(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new qt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ae(e,t,a,o,l){const r=1<<Math.min(a,22);let u=r*(l%r)+o%r;return e&&a<22&&(u+=r*r*((e<0?-2*e-1:2*e)%(1<<2*(22-a)))),16*(32*u+a)+(t-a)}const he=[e=>{let t=e.canonical.x-1,a=e.wrap;return t<0&&(t=(1<<e.canonical.z)-1,a--),new Xt(e.overscaledZ,a,e.canonical.z,t,e.canonical.y)},e=>{let t=e.canonical.x+1,a=e.wrap;return t===1<<e.canonical.z&&(t=0,a++),new Xt(e.overscaledZ,a,e.canonical.z,t,e.canonical.y)},e=>new Xt(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(e.canonical.y===0?1<<e.canonical.z:e.canonical.y)-1),e=>new Xt(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)];me(kt,"CanonicalTileID"),me(Xt,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Ce=0,xe=25.5;function Ee(e){return Ut*Math.cos(e*Math.PI/180)}function Xe(e){return(180+e)/360}function Fe(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ze(e,t){return e/Ee(t)}function ke(e){return 360*e-180}function da(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Wa(e,t){return e*Ee(da(t))}const ta=85.051129;function $a(e){return Math.cos(Oe(Ve(e,-ta,ta)))}function ea(e,t){const a=Ve(t,Ce,xe),o=Math.pow(2,a);return $a(e)*Ut/(512*o)}function fa(e){return 1/Math.cos(e*Math.PI/180)}function aa(e,t=0){const a=Math.exp(Math.PI*(1-(e.y+t/se)/(1<<e.z)*2));return 80150034*a/(a*a+1)/se/(1<<e.z)}class ma{constructor(t,a,o=0){this.x=+t,this.y=+a,this.z=+o}static fromLngLat(t,a=0){const o=ct.convert(t);return new ma(Xe(o.lng),Fe(o.lat),ze(a,o.lat))}toLngLat(){return new ct(ke(this.x),da(this.y))}toAltitude(){return Wa(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ut*fa(da(this.y))}}function Ua(e,t,a,o,l,r,u,m,p){const h=(t+o)/2,y=(a+l)/2,x=new jt(h,y);m(x),function(v,C,R,N,W,D){const Y=R-W,j=N-D;return Math.abs((N-C)*Y-(R-v)*j)/Math.hypot(Y,j)}(x.x,x.y,r.x,r.y,u.x,u.y)>=p?(Ua(e,t,a,h,y,r,x,m,p),Ua(e,h,y,o,l,x,u,m,p)):e.push(u)}function ba(e,t,a){let o=e[0],l=o.x,r=o.y;t(o);const u=[o];for(let m=1;m<e.length;m++){const p=e[m],{x:h,y}=p;t(p),Ua(u,l,r,h,y,o,p,t,a),l=h,r=y,o=p}return u}function Oi(e,t,a,o){if(o(t,a)){const l=t.add(a)._mult(.5);Oi(e,t,l,o),Oi(e,l,a,o)}else e.push(a)}function Bi(e,t){let a=e[0];const o=[a];for(let l=1;l<e.length;l++){const r=e[l];Oi(o,a,r,t),a=r}return o}const no=Math.pow(2,14)-1,$o=-no-1;function so(e,t){const a=Math.round(e.x*t),o=Math.round(e.y*t);return e.x=Ve(a,$o,no),e.y=Ve(o,$o,no),(a<e.x||a>e.x+1||o<e.y||o>e.y+1)&&ei("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function Ci(e,t,a){const o=e.loadGeometry(),l=e.extent,r=se/l;if(t&&a&&a.projection.isReprojectedInTileSpace){const u=1<<t.z,{scale:m,x:p,y:h,projection:y}=a,x=v=>{const C=ke((t.x+v.x/l)/u),R=da((t.y+v.y/l)/u),N=y.project(C,R);v.x=(N.x*m-p)*l,v.y=(N.y*m-h)*l};for(let v=0;v<o.length;v++)if(e.type!==1)o[v]=ba(o[v],x,1);else{const C=[];for(const R of o[v])R.x<0||R.x>=l||R.y<0||R.y>=l||(x(R),C.push(R));o[v]=C}}for(const u of o)for(const m of u)so(m,r);return o}function yi(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ci(e):[]}}function Xi(e,t,a,o,l){e.emplaceBack(2*t+(o+1)/2,2*a+(l+1)/2)}function $i(e,t,a){e.emplaceBack(t.x,t.y,t.z,a[0]*16384,a[1]*16384,a[2]*16384)}class lo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new ko,this.indexArray=new Ii,this.segments=new ai,this.programConfigurations=new U(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,o,l){const r=this.layers[0],u=[];let m=null;r.type==="circle"&&(m=r.layout.get("circle-sort-key"));for(const{feature:h,id:y,index:x,sourceLayerIndex:v}of t){const C=this.layers[0]._featureFilter.needGeometry,R=yi(h,C);if(!this.layers[0]._featureFilter.filter(new ja(this.zoom),R,o))continue;const N=m?m.evaluate(R,{},o):void 0,W={id:y,properties:h.properties,type:h.type,sourceLayerIndex:v,index:x,geometry:C?R.geometry:Ci(h,o,l),patterns:{},sortKey:N};u.push(W)}m&&u.sort((h,y)=>h.sortKey-y.sortKey);let p=null;l.projection.name==="globe"&&(this.globeExtVertexArray=new jr,p=l.projection);for(const h of u){const{geometry:y,index:x,sourceLayerIndex:v}=h,C=t[x].feature;this.addFeature(h,y,x,a.availableImages,o,p,a.brightness),a.featureIndex.insert(C,y,x,v,this.index)}}update(t,a,o,l,r){const u=Object.keys(t).length!==0;u&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(t,a,u?this.stateDependentLayers:this.layers,o,l,r)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wf.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Wc.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,a,o,l,r,u,m){for(const p of a)for(const h of p){const y=h.x,x=h.y;if(y<0||y>=se||x<0||x>=se)continue;if(u){const R=u.projectTilePoint(y,x,r),N=u.upVector(r,y,x),W=this.globeExtVertexArray;$i(W,R,N),$i(W,R,N),$i(W,R,N),$i(W,R,N)}const v=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),C=v.vertexLength;Xi(this.layoutVertexArray,y,x,-1,-1),Xi(this.layoutVertexArray,y,x,1,-1),Xi(this.layoutVertexArray,y,x,1,1),Xi(this.layoutVertexArray,y,x,-1,1),this.indexArray.emplaceBack(C,C+1,C+2),this.indexArray.emplaceBack(C,C+2,C+3),v.vertexLength+=4,v.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,{},l,r,m)}}function Zo(e,t){for(let a=0;a<e.length;a++)if(un(t,e[a]))return!0;for(let a=0;a<t.length;a++)if(un(e,t[a]))return!0;return!!or(e,t)}function Gn(e,t,a){return!!un(e,t)||!!nr(t,e,a)}function ps(e,t){if(e.length===1)return td(t,e[0]);for(let a=0;a<t.length;a++){const o=t[a];for(let l=0;l<o.length;l++)if(un(e,o[l]))return!0}for(let a=0;a<e.length;a++)if(td(t,e[a]))return!0;for(let a=0;a<t.length;a++)if(or(e,t[a]))return!0;return!1}function ir(e,t,a){if(e.length>1){if(or(e,t))return!0;for(let o=0;o<t.length;o++)if(nr(t[o],e,a))return!0}for(let o=0;o<e.length;o++)if(nr(e[o],t,a))return!0;return!1}function or(e,t){if(e.length===0||t.length===0)return!1;for(let a=0;a<e.length-1;a++){const o=e[a],l=e[a+1];for(let r=0;r<t.length-1;r++)if(ru(o,l,t[r],t[r+1]))return!0}return!1}function ru(e,t,a,o){return To(e,a,o)!==To(t,a,o)&&To(e,t,a)!==To(e,t,o)}function nr(e,t,a){const o=a*a;if(t.length===1)return e.distSqr(t[0])<o;for(let l=1;l<t.length;l++)if(Zs(e,t[l-1],t[l])<o)return!0;return!1}function Zs(e,t,a){const o=t.distSqr(a);if(o===0)return e.distSqr(t);const l=((e.x-t.x)*(a.x-t.x)+(e.y-t.y)*(a.y-t.y))/o;return e.distSqr(l<0?t:l>1?a:a.sub(t)._mult(l)._add(t))}function td(e,t){let a,o,l,r=!1;for(let u=0;u<e.length;u++){a=e[u];for(let m=0,p=a.length-1;m<a.length;p=m++)o=a[m],l=a[p],o.y>t.y!=l.y>t.y&&t.x<(l.x-o.x)*(t.y-o.y)/(l.y-o.y)+o.x&&(r=!r)}return r}function un(e,t){let a=!1;for(let o=0,l=e.length-1;o<e.length;l=o++){const r=e[o],u=e[l];r.y>t.y!=u.y>t.y&&t.x<(u.x-r.x)*(t.y-r.y)/(u.y-r.y)+r.x&&(a=!a)}return a}function Lh(e,t,a,o,l){for(const u of e)if(t<=u.x&&a<=u.y&&o>=u.x&&l>=u.y)return!0;const r=[new jt(t,a),new jt(t,l),new jt(o,l),new jt(o,a)];if(e.length>2){for(const u of r)if(un(e,u))return!0}for(let u=0;u<e.length-1;u++)if(xT(e[u],e[u+1],r))return!0;return!1}function xT(e,t,a){const o=a[0],l=a[2];if(e.x<o.x&&t.x<o.x||e.x>l.x&&t.x>l.x||e.y<o.y&&t.y<o.y||e.y>l.y&&t.y>l.y)return!1;const r=To(e,t,a[0]);return r!==To(e,t,a[1])||r!==To(e,t,a[2])||r!==To(e,t,a[3])}function ed(e,t,a,o,l,r){let u=t.y-e.y,m=e.x-t.x;if(r=r||0){const p=u*u+m*m;if(p===0)return!0;const h=Math.sqrt(p);u/=h,m/=h}return!((a.x-e.x)*u+(a.y-e.y)*m-r<0||(o.x-e.x)*u+(o.y-e.y)*m-r<0||(l.x-e.x)*u+(l.y-e.y)*m-r<0)}function Wf(e,t,a,o,l,r,u){return!(ed(e,t,o,l,r,u)||ed(t,a,o,l,r,u)||ed(a,e,o,l,r,u)||ed(o,l,e,t,a,u)||ed(l,r,e,t,a,u)||ed(r,o,e,t,a,u))}function ad(e,t,a){const o=t.paint.get(e).value;return o.kind==="constant"?o.value:a.programConfigurations.get(t.id).getMaxValue(e)}function Hc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ph(e,t,a,o,l){if(!t[0]&&!t[1])return e;const r=jt.convert(t)._mult(l);a==="viewport"&&r._rotate(-o);const u=[];for(let m=0;m<e.length;m++)u.push(e[m].sub(r));return u}function wh(e,t,a,o){const l=jt.convert(e)._mult(o);return t==="viewport"&&l._rotate(-a),l}me(lo,"CircleBucket",{omit:["layers"]});const AT=new qa({"circle-sort-key":new Se(gt.layout_circle["circle-sort-key"]),visibility:new Zt(gt.layout_circle.visibility)});var vT={paint:new qa({"circle-radius":new Se(gt.paint_circle["circle-radius"]),"circle-color":new Se(gt.paint_circle["circle-color"]),"circle-blur":new Se(gt.paint_circle["circle-blur"]),"circle-opacity":new Se(gt.paint_circle["circle-opacity"]),"circle-translate":new Zt(gt.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Se(gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Se(gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Se(gt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Zt(gt.paint_circle["circle-emissive-strength"])}),layout:AT},Si={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.setMatrixArrayType=function(e){Ri.ARRAY_TYPE=Mh=e},Ri.toRadian=function(e){return e*IT},Ri.equals=function(e,t){return Math.abs(e-t)<=Wh*Math.max(1,Math.abs(e),Math.abs(t))},Ri.RANDOM=Ri.ARRAY_TYPE=Ri.EPSILON=void 0;var Wh=1e-6;Ri.EPSILON=Wh;var Mh=typeof Float32Array<"u"?Float32Array:Array;Ri.ARRAY_TYPE=Mh;var ET=Math.random;Ri.RANDOM=ET;var IT=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Za={};function Mf(e){return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}Object.defineProperty(Za,"__esModule",{value:!0}),Za.create=function(){var e=new Js.ARRAY_TYPE(4);return Js.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},Za.clone=function(e){var t=new Js.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Za.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Za.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},Za.fromValues=function(e,t,a,o){var l=new Js.ARRAY_TYPE(4);return l[0]=e,l[1]=t,l[2]=a,l[3]=o,l},Za.set=function(e,t,a,o,l){return e[0]=t,e[1]=a,e[2]=o,e[3]=l,e},Za.transpose=function(e,t){if(e===t){var a=t[1];e[1]=t[2],e[2]=a}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},Za.invert=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=a*r-l*o;return u?(e[0]=r*(u=1/u),e[1]=-o*u,e[2]=-l*u,e[3]=a*u,e):null},Za.adjoint=function(e,t){var a=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=a,e},Za.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},Za.multiply=Fh,Za.rotate=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=Math.sin(a),p=Math.cos(a);return e[0]=o*p+r*m,e[1]=l*p+u*m,e[2]=o*-m+r*p,e[3]=l*-m+u*p,e},Za.scale=function(e,t,a){var o=t[1],l=t[2],r=t[3],u=a[0],m=a[1];return e[0]=t[0]*u,e[1]=o*u,e[2]=l*m,e[3]=r*m,e},Za.fromRotation=function(e,t){var a=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=a,e[2]=-a,e[3]=o,e},Za.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},Za.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},Za.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},Za.LDU=function(e,t,a,o){return e[2]=o[2]/o[0],a[0]=o[0],a[1]=o[1],a[3]=o[3]-e[2]*a[1],[e,t,a]},Za.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},Za.subtract=Bh,Za.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},Za.equals=function(e,t){var a=e[0],o=e[1],l=e[2],r=e[3],u=t[0],m=t[1],p=t[2],h=t[3];return Math.abs(a-u)<=Js.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-m)<=Js.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(l-p)<=Js.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(r-h)<=Js.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))},Za.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},Za.multiplyScalarAndAdd=function(e,t,a,o){return e[0]=t[0]+a[0]*o,e[1]=t[1]+a[1]*o,e[2]=t[2]+a[2]*o,e[3]=t[3]+a[3]*o,e},Za.sub=Za.mul=void 0;var Js=function(e,t){if(e&&e.__esModule)return e;if(e===null||Mf(e)!=="object"&&typeof e!="function")return{default:e};var a=Dh(void 0);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}(Ri);function Dh(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Dh=function(o){return o?a:t})(e)}function Fh(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=a[0],p=a[1],h=a[2],y=a[3];return e[0]=o*m+r*p,e[1]=l*m+u*p,e[2]=o*h+r*y,e[3]=l*h+u*y,e}function Bh(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}Za.mul=Fh,Za.sub=Bh;var Qa={};function Df(e){return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.create=function(){var e=new Vn.ARRAY_TYPE(6);return Vn.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},Qa.clone=function(e){var t=new Vn.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},Qa.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},Qa.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},Qa.fromValues=function(e,t,a,o,l,r){var u=new Vn.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=a,u[3]=o,u[4]=l,u[5]=r,u},Qa.set=function(e,t,a,o,l,r,u){return e[0]=t,e[1]=a,e[2]=o,e[3]=l,e[4]=r,e[5]=u,e},Qa.invert=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=t[4],m=t[5],p=a*r-o*l;return p?(e[0]=r*(p=1/p),e[1]=-o*p,e[2]=-l*p,e[3]=a*p,e[4]=(l*m-r*u)*p,e[5]=(o*u-a*m)*p,e):null},Qa.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},Qa.multiply=kh,Qa.rotate=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=Math.sin(a),y=Math.cos(a);return e[0]=o*y+r*h,e[1]=l*y+u*h,e[2]=o*-h+r*y,e[3]=l*-h+u*y,e[4]=m,e[5]=p,e},Qa.scale=function(e,t,a){var o=t[1],l=t[2],r=t[3],u=t[4],m=t[5],p=a[0],h=a[1];return e[0]=t[0]*p,e[1]=o*p,e[2]=l*h,e[3]=r*h,e[4]=u,e[5]=m,e},Qa.translate=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=a[0],y=a[1];return e[0]=o,e[1]=l,e[2]=r,e[3]=u,e[4]=o*h+r*y+m,e[5]=l*h+u*y+p,e},Qa.fromRotation=function(e,t){var a=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=a,e[2]=-a,e[3]=o,e[4]=0,e[5]=0,e},Qa.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},Qa.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},Qa.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},Qa.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)},Qa.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e},Qa.subtract=zh,Qa.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e},Qa.multiplyScalarAndAdd=function(e,t,a,o){return e[0]=t[0]+a[0]*o,e[1]=t[1]+a[1]*o,e[2]=t[2]+a[2]*o,e[3]=t[3]+a[3]*o,e[4]=t[4]+a[4]*o,e[5]=t[5]+a[5]*o,e},Qa.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},Qa.equals=function(e,t){var a=e[0],o=e[1],l=e[2],r=e[3],u=e[4],m=e[5],p=t[0],h=t[1],y=t[2],x=t[3],v=t[4],C=t[5];return Math.abs(a-p)<=Vn.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-h)<=Vn.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(l-y)<=Vn.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(r-x)<=Vn.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(u-v)<=Vn.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(m-C)<=Vn.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))},Qa.sub=Qa.mul=void 0;var Vn=function(e,t){if(e&&e.__esModule)return e;if(e===null||Df(e)!=="object"&&typeof e!="function")return{default:e};var a=Uh(void 0);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}(Ri);function Uh(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Uh=function(o){return o?a:t})(e)}function kh(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=a[0],y=a[1],x=a[2],v=a[3],C=a[4],R=a[5];return e[0]=o*h+r*y,e[1]=l*h+u*y,e[2]=o*x+r*v,e[3]=l*x+u*v,e[4]=o*C+r*R+m,e[5]=l*C+u*R+p,e}function zh(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e}Qa.mul=kh,Qa.sub=zh;var Pa={};function Ff(e){return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.create=function(){var e=new zo.ARRAY_TYPE(9);return zo.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},Pa.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},Pa.clone=function(e){var t=new zo.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},Pa.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},Pa.fromValues=function(e,t,a,o,l,r,u,m,p){var h=new zo.ARRAY_TYPE(9);return h[0]=e,h[1]=t,h[2]=a,h[3]=o,h[4]=l,h[5]=r,h[6]=u,h[7]=m,h[8]=p,h},Pa.set=function(e,t,a,o,l,r,u,m,p,h){return e[0]=t,e[1]=a,e[2]=o,e[3]=l,e[4]=r,e[5]=u,e[6]=m,e[7]=p,e[8]=h,e},Pa.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},Pa.transpose=function(e,t){if(e===t){var a=t[1],o=t[2],l=t[5];e[1]=t[3],e[2]=t[6],e[3]=a,e[5]=t[7],e[6]=o,e[7]=l}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},Pa.invert=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=t[4],m=t[5],p=t[6],h=t[7],y=t[8],x=y*u-m*h,v=-y*r+m*p,C=h*r-u*p,R=a*x+o*v+l*C;return R?(e[0]=x*(R=1/R),e[1]=(-y*o+l*h)*R,e[2]=(m*o-l*u)*R,e[3]=v*R,e[4]=(y*a-l*p)*R,e[5]=(-m*a+l*r)*R,e[6]=C*R,e[7]=(-h*a+o*p)*R,e[8]=(u*a-o*r)*R,e):null},Pa.adjoint=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=t[4],m=t[5],p=t[6],h=t[7],y=t[8];return e[0]=u*y-m*h,e[1]=l*h-o*y,e[2]=o*m-l*u,e[3]=m*p-r*y,e[4]=a*y-l*p,e[5]=l*r-a*m,e[6]=r*h-u*p,e[7]=o*p-a*h,e[8]=a*u-o*r,e},Pa.determinant=function(e){var t=e[3],a=e[4],o=e[5],l=e[6],r=e[7],u=e[8];return e[0]*(u*a-o*r)+e[1]*(-u*t+o*l)+e[2]*(r*t-a*l)},Pa.multiply=Yh,Pa.translate=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=t[8],v=a[0],C=a[1];return e[0]=o,e[1]=l,e[2]=r,e[3]=u,e[4]=m,e[5]=p,e[6]=v*o+C*u+h,e[7]=v*l+C*m+y,e[8]=v*r+C*p+x,e},Pa.rotate=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=t[8],v=Math.sin(a),C=Math.cos(a);return e[0]=C*o+v*u,e[1]=C*l+v*m,e[2]=C*r+v*p,e[3]=C*u-v*o,e[4]=C*m-v*l,e[5]=C*p-v*r,e[6]=h,e[7]=y,e[8]=x,e},Pa.scale=function(e,t,a){var o=a[0],l=a[1];return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=l*t[3],e[4]=l*t[4],e[5]=l*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},Pa.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},Pa.fromRotation=function(e,t){var a=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=a,e[2]=0,e[3]=-a,e[4]=o,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},Pa.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},Pa.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},Pa.fromQuat=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=a+a,m=o+o,p=l+l,h=a*u,y=o*u,x=o*m,v=l*u,C=l*m,R=l*p,N=r*u,W=r*m,D=r*p;return e[0]=1-x-R,e[3]=y-D,e[6]=v+W,e[1]=y+D,e[4]=1-h-R,e[7]=C-N,e[2]=v-W,e[5]=C+N,e[8]=1-h-x,e},Pa.normalFromMat4=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=t[4],m=t[5],p=t[6],h=t[7],y=t[8],x=t[9],v=t[10],C=t[11],R=t[12],N=t[13],W=t[14],D=t[15],Y=a*m-o*u,j=a*p-l*u,K=a*h-r*u,tt=o*p-l*m,J=o*h-r*m,st=l*h-r*p,_t=y*N-x*R,mt=y*W-v*R,bt=y*D-C*R,ft=x*W-v*N,Ct=x*D-C*N,Dt=v*D-C*W,Et=Y*Dt-j*Ct+K*ft+tt*bt-J*mt+st*_t;return Et?(e[0]=(m*Dt-p*Ct+h*ft)*(Et=1/Et),e[1]=(p*bt-u*Dt-h*mt)*Et,e[2]=(u*Ct-m*bt+h*_t)*Et,e[3]=(l*Ct-o*Dt-r*ft)*Et,e[4]=(a*Dt-l*bt+r*mt)*Et,e[5]=(o*bt-a*Ct-r*_t)*Et,e[6]=(N*st-W*J+D*tt)*Et,e[7]=(W*K-R*st-D*j)*Et,e[8]=(R*J-N*K+D*Y)*Et,e):null},Pa.projection=function(e,t,a){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/a,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},Pa.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},Pa.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Pa.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e},Pa.subtract=Gh,Pa.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e},Pa.multiplyScalarAndAdd=function(e,t,a,o){return e[0]=t[0]+a[0]*o,e[1]=t[1]+a[1]*o,e[2]=t[2]+a[2]*o,e[3]=t[3]+a[3]*o,e[4]=t[4]+a[4]*o,e[5]=t[5]+a[5]*o,e[6]=t[6]+a[6]*o,e[7]=t[7]+a[7]*o,e[8]=t[8]+a[8]*o,e},Pa.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},Pa.equals=function(e,t){var a=e[0],o=e[1],l=e[2],r=e[3],u=e[4],m=e[5],p=e[6],h=e[7],y=e[8],x=t[0],v=t[1],C=t[2],R=t[3],N=t[4],W=t[5],D=t[6],Y=t[7],j=t[8];return Math.abs(a-x)<=zo.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-v)<=zo.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(l-C)<=zo.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(r-R)<=zo.EPSILON*Math.max(1,Math.abs(r),Math.abs(R))&&Math.abs(u-N)<=zo.EPSILON*Math.max(1,Math.abs(u),Math.abs(N))&&Math.abs(m-W)<=zo.EPSILON*Math.max(1,Math.abs(m),Math.abs(W))&&Math.abs(p-D)<=zo.EPSILON*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(h-Y)<=zo.EPSILON*Math.max(1,Math.abs(h),Math.abs(Y))&&Math.abs(y-j)<=zo.EPSILON*Math.max(1,Math.abs(y),Math.abs(j))},Pa.sub=Pa.mul=void 0;var zo=function(e,t){if(e&&e.__esModule)return e;if(e===null||Ff(e)!=="object"&&typeof e!="function")return{default:e};var a=Hh(void 0);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}(Ri);function Hh(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Hh=function(o){return o?a:t})(e)}function Yh(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=t[8],v=a[0],C=a[1],R=a[2],N=a[3],W=a[4],D=a[5],Y=a[6],j=a[7],K=a[8];return e[0]=v*o+C*u+R*h,e[1]=v*l+C*m+R*y,e[2]=v*r+C*p+R*x,e[3]=N*o+W*u+D*h,e[4]=N*l+W*m+D*y,e[5]=N*r+W*p+D*x,e[6]=Y*o+j*u+K*h,e[7]=Y*l+j*m+K*y,e[8]=Y*r+j*p+K*x,e}function Gh(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e}Pa.mul=Yh,Pa.sub=Gh;var je={};function Bf(e){return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}Object.defineProperty(je,"__esModule",{value:!0}),je.create=function(){var e=new si.ARRAY_TYPE(16);return si.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},je.clone=function(e){var t=new si.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},je.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},je.fromValues=function(e,t,a,o,l,r,u,m,p,h,y,x,v,C,R,N){var W=new si.ARRAY_TYPE(16);return W[0]=e,W[1]=t,W[2]=a,W[3]=o,W[4]=l,W[5]=r,W[6]=u,W[7]=m,W[8]=p,W[9]=h,W[10]=y,W[11]=x,W[12]=v,W[13]=C,W[14]=R,W[15]=N,W},je.set=function(e,t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W){return e[0]=t,e[1]=a,e[2]=o,e[3]=l,e[4]=r,e[5]=u,e[6]=m,e[7]=p,e[8]=h,e[9]=y,e[10]=x,e[11]=v,e[12]=C,e[13]=R,e[14]=N,e[15]=W,e},je.identity=Xh,je.transpose=function(e,t){if(e===t){var a=t[1],o=t[2],l=t[3],r=t[6],u=t[7],m=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=a,e[6]=t[9],e[7]=t[13],e[8]=o,e[9]=r,e[11]=t[14],e[12]=l,e[13]=u,e[14]=m}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},je.invert=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=t[4],m=t[5],p=t[6],h=t[7],y=t[8],x=t[9],v=t[10],C=t[11],R=t[12],N=t[13],W=t[14],D=t[15],Y=a*m-o*u,j=a*p-l*u,K=a*h-r*u,tt=o*p-l*m,J=o*h-r*m,st=l*h-r*p,_t=y*N-x*R,mt=y*W-v*R,bt=y*D-C*R,ft=x*W-v*N,Ct=x*D-C*N,Dt=v*D-C*W,Et=Y*Dt-j*Ct+K*ft+tt*bt-J*mt+st*_t;return Et?(e[0]=(m*Dt-p*Ct+h*ft)*(Et=1/Et),e[1]=(l*Ct-o*Dt-r*ft)*Et,e[2]=(N*st-W*J+D*tt)*Et,e[3]=(v*J-x*st-C*tt)*Et,e[4]=(p*bt-u*Dt-h*mt)*Et,e[5]=(a*Dt-l*bt+r*mt)*Et,e[6]=(W*K-R*st-D*j)*Et,e[7]=(y*st-v*K+C*j)*Et,e[8]=(u*Ct-m*bt+h*_t)*Et,e[9]=(o*bt-a*Ct-r*_t)*Et,e[10]=(R*J-N*K+D*Y)*Et,e[11]=(x*K-y*J-C*Y)*Et,e[12]=(m*mt-u*ft-p*_t)*Et,e[13]=(a*ft-o*mt+l*_t)*Et,e[14]=(N*j-R*tt-W*Y)*Et,e[15]=(y*tt-x*j+v*Y)*Et,e):null},je.adjoint=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=t[4],m=t[5],p=t[6],h=t[7],y=t[8],x=t[9],v=t[10],C=t[11],R=t[12],N=t[13],W=t[14],D=t[15];return e[0]=m*(v*D-C*W)-x*(p*D-h*W)+N*(p*C-h*v),e[1]=-(o*(v*D-C*W)-x*(l*D-r*W)+N*(l*C-r*v)),e[2]=o*(p*D-h*W)-m*(l*D-r*W)+N*(l*h-r*p),e[3]=-(o*(p*C-h*v)-m*(l*C-r*v)+x*(l*h-r*p)),e[4]=-(u*(v*D-C*W)-y*(p*D-h*W)+R*(p*C-h*v)),e[5]=a*(v*D-C*W)-y*(l*D-r*W)+R*(l*C-r*v),e[6]=-(a*(p*D-h*W)-u*(l*D-r*W)+R*(l*h-r*p)),e[7]=a*(p*C-h*v)-u*(l*C-r*v)+y*(l*h-r*p),e[8]=u*(x*D-C*N)-y*(m*D-h*N)+R*(m*C-h*x),e[9]=-(a*(x*D-C*N)-y*(o*D-r*N)+R*(o*C-r*x)),e[10]=a*(m*D-h*N)-u*(o*D-r*N)+R*(o*h-r*m),e[11]=-(a*(m*C-h*x)-u*(o*C-r*x)+y*(o*h-r*m)),e[12]=-(u*(x*W-v*N)-y*(m*W-p*N)+R*(m*v-p*x)),e[13]=a*(x*W-v*N)-y*(o*W-l*N)+R*(o*v-l*x),e[14]=-(a*(m*W-p*N)-u*(o*W-l*N)+R*(o*p-l*m)),e[15]=a*(m*v-p*x)-u*(o*v-l*x)+y*(o*p-l*m),e},je.determinant=function(e){var t=e[0],a=e[1],o=e[2],l=e[3],r=e[4],u=e[5],m=e[6],p=e[7],h=e[8],y=e[9],x=e[10],v=e[11],C=e[12],R=e[13],N=e[14],W=e[15];return(t*u-a*r)*(x*W-v*N)-(t*m-o*r)*(y*W-v*R)+(t*p-l*r)*(y*N-x*R)+(a*m-o*u)*(h*W-v*C)-(a*p-l*u)*(h*N-x*C)+(o*p-l*m)*(h*R-y*C)},je.multiply=Kh,je.translate=function(e,t,a){var o,l,r,u,m,p,h,y,x,v,C,R,N=a[0],W=a[1],D=a[2];return t===e?(e[12]=t[0]*N+t[4]*W+t[8]*D+t[12],e[13]=t[1]*N+t[5]*W+t[9]*D+t[13],e[14]=t[2]*N+t[6]*W+t[10]*D+t[14],e[15]=t[3]*N+t[7]*W+t[11]*D+t[15]):(l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=t[8],v=t[9],C=t[10],R=t[11],e[0]=o=t[0],e[1]=l,e[2]=r,e[3]=u,e[4]=m,e[5]=p,e[6]=h,e[7]=y,e[8]=x,e[9]=v,e[10]=C,e[11]=R,e[12]=o*N+m*W+x*D+t[12],e[13]=l*N+p*W+v*D+t[13],e[14]=r*N+h*W+C*D+t[14],e[15]=u*N+y*W+R*D+t[15]),e},je.scale=function(e,t,a){var o=a[0],l=a[1],r=a[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*l,e[5]=t[5]*l,e[6]=t[6]*l,e[7]=t[7]*l,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},je.rotate=function(e,t,a,o){var l,r,u,m,p,h,y,x,v,C,R,N,W,D,Y,j,K,tt,J,st,_t,mt,bt,ft,Ct=o[0],Dt=o[1],Et=o[2],Wt=Math.hypot(Ct,Dt,Et);return Wt<si.EPSILON?null:(Ct*=Wt=1/Wt,Dt*=Wt,Et*=Wt,l=Math.sin(a),r=Math.cos(a),p=t[1],h=t[2],y=t[3],v=t[5],C=t[6],R=t[7],W=t[9],D=t[10],Y=t[11],j=Ct*Ct*(u=1-r)+r,J=Ct*Dt*u-Et*l,st=Dt*Dt*u+r,_t=Et*Dt*u+Ct*l,mt=Ct*Et*u+Dt*l,bt=Dt*Et*u-Ct*l,ft=Et*Et*u+r,e[0]=(m=t[0])*j+(x=t[4])*(K=Dt*Ct*u+Et*l)+(N=t[8])*(tt=Et*Ct*u-Dt*l),e[1]=p*j+v*K+W*tt,e[2]=h*j+C*K+D*tt,e[3]=y*j+R*K+Y*tt,e[4]=m*J+x*st+N*_t,e[5]=p*J+v*st+W*_t,e[6]=h*J+C*st+D*_t,e[7]=y*J+R*st+Y*_t,e[8]=m*mt+x*bt+N*ft,e[9]=p*mt+v*bt+W*ft,e[10]=h*mt+C*bt+D*ft,e[11]=y*mt+R*bt+Y*ft,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},je.rotateX=function(e,t,a){var o=Math.sin(a),l=Math.cos(a),r=t[4],u=t[5],m=t[6],p=t[7],h=t[8],y=t[9],x=t[10],v=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*l+h*o,e[5]=u*l+y*o,e[6]=m*l+x*o,e[7]=p*l+v*o,e[8]=h*l-r*o,e[9]=y*l-u*o,e[10]=x*l-m*o,e[11]=v*l-p*o,e},je.rotateY=function(e,t,a){var o=Math.sin(a),l=Math.cos(a),r=t[0],u=t[1],m=t[2],p=t[3],h=t[8],y=t[9],x=t[10],v=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*l-h*o,e[1]=u*l-y*o,e[2]=m*l-x*o,e[3]=p*l-v*o,e[8]=r*o+h*l,e[9]=u*o+y*l,e[10]=m*o+x*l,e[11]=p*o+v*l,e},je.rotateZ=function(e,t,a){var o=Math.sin(a),l=Math.cos(a),r=t[0],u=t[1],m=t[2],p=t[3],h=t[4],y=t[5],x=t[6],v=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*l+h*o,e[1]=u*l+y*o,e[2]=m*l+x*o,e[3]=p*l+v*o,e[4]=h*l-r*o,e[5]=y*l-u*o,e[6]=x*l-m*o,e[7]=v*l-p*o,e},je.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},je.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},je.fromRotation=function(e,t,a){var o,l,r,u=a[0],m=a[1],p=a[2],h=Math.hypot(u,m,p);return h<si.EPSILON?null:(u*=h=1/h,m*=h,p*=h,o=Math.sin(t),l=Math.cos(t),e[0]=u*u*(r=1-l)+l,e[1]=m*u*r+p*o,e[2]=p*u*r-m*o,e[3]=0,e[4]=u*m*r-p*o,e[5]=m*m*r+l,e[6]=p*m*r+u*o,e[7]=0,e[8]=u*p*r+m*o,e[9]=m*p*r-u*o,e[10]=p*p*r+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},je.fromXRotation=function(e,t){var a=Math.sin(t),o=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=a,e[7]=0,e[8]=0,e[9]=-a,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},je.fromYRotation=function(e,t){var a=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-a,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=a,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},je.fromZRotation=function(e,t){var a=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=a,e[2]=0,e[3]=0,e[4]=-a,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},je.fromRotationTranslation=jh,je.fromQuat2=function(e,t){var a=new si.ARRAY_TYPE(3),o=-t[0],l=-t[1],r=-t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=o*o+l*l+r*r+u*u;return x>0?(a[0]=2*(m*u+y*o+p*r-h*l)/x,a[1]=2*(p*u+y*l+h*o-m*r)/x,a[2]=2*(h*u+y*r+m*l-p*o)/x):(a[0]=2*(m*u+y*o+p*r-h*l),a[1]=2*(p*u+y*l+h*o-m*r),a[2]=2*(h*u+y*r+m*l-p*o)),jh(e,t,a),e},je.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},je.getScaling=qh,je.getRotation=function(e,t){var a=new si.ARRAY_TYPE(3);qh(a,t);var o=1/a[0],l=1/a[1],r=1/a[2],u=t[0]*o,m=t[1]*l,p=t[2]*r,h=t[4]*o,y=t[5]*l,x=t[6]*r,v=t[8]*o,C=t[9]*l,R=t[10]*r,N=u+y+R,W=0;return N>0?(W=2*Math.sqrt(N+1),e[3]=.25*W,e[0]=(x-C)/W,e[1]=(v-p)/W,e[2]=(m-h)/W):u>y&&u>R?(W=2*Math.sqrt(1+u-y-R),e[3]=(x-C)/W,e[0]=.25*W,e[1]=(m+h)/W,e[2]=(v+p)/W):y>R?(W=2*Math.sqrt(1+y-u-R),e[3]=(v-p)/W,e[0]=(m+h)/W,e[1]=.25*W,e[2]=(x+C)/W):(W=2*Math.sqrt(1+R-u-y),e[3]=(m-h)/W,e[0]=(v+p)/W,e[1]=(x+C)/W,e[2]=.25*W),e},je.fromRotationTranslationScale=function(e,t,a,o){var l=t[0],r=t[1],u=t[2],m=t[3],p=l+l,h=r+r,y=u+u,x=l*p,v=l*h,C=l*y,R=r*h,N=r*y,W=u*y,D=m*p,Y=m*h,j=m*y,K=o[0],tt=o[1],J=o[2];return e[0]=(1-(R+W))*K,e[1]=(v+j)*K,e[2]=(C-Y)*K,e[3]=0,e[4]=(v-j)*tt,e[5]=(1-(x+W))*tt,e[6]=(N+D)*tt,e[7]=0,e[8]=(C+Y)*J,e[9]=(N-D)*J,e[10]=(1-(x+R))*J,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e},je.fromRotationTranslationScaleOrigin=function(e,t,a,o,l){var r=t[0],u=t[1],m=t[2],p=t[3],h=r+r,y=u+u,x=m+m,v=r*h,C=r*y,R=r*x,N=u*y,W=u*x,D=m*x,Y=p*h,j=p*y,K=p*x,tt=o[0],J=o[1],st=o[2],_t=l[0],mt=l[1],bt=l[2],ft=(1-(N+D))*tt,Ct=(C+K)*tt,Dt=(R-j)*tt,Et=(C-K)*J,Wt=(1-(v+D))*J,xt=(W+Y)*J,wt=(R+j)*st,Qt=(W-Y)*st,Bt=(1-(v+N))*st;return e[0]=ft,e[1]=Ct,e[2]=Dt,e[3]=0,e[4]=Et,e[5]=Wt,e[6]=xt,e[7]=0,e[8]=wt,e[9]=Qt,e[10]=Bt,e[11]=0,e[12]=a[0]+_t-(ft*_t+Et*mt+wt*bt),e[13]=a[1]+mt-(Ct*_t+Wt*mt+Qt*bt),e[14]=a[2]+bt-(Dt*_t+xt*mt+Bt*bt),e[15]=1,e},je.fromQuat=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=a+a,m=o+o,p=l+l,h=a*u,y=o*u,x=o*m,v=l*u,C=l*m,R=l*p,N=r*u,W=r*m,D=r*p;return e[0]=1-x-R,e[1]=y+D,e[2]=v-W,e[3]=0,e[4]=y-D,e[5]=1-h-R,e[6]=C+N,e[7]=0,e[8]=v+W,e[9]=C-N,e[10]=1-h-x,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},je.frustum=function(e,t,a,o,l,r,u){var m=1/(a-t),p=1/(l-o),h=1/(r-u);return e[0]=2*r*m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*r*p,e[6]=0,e[7]=0,e[8]=(a+t)*m,e[9]=(l+o)*p,e[10]=(u+r)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=u*r*2*h,e[15]=0,e},je.perspectiveNO=$h,je.perspectiveZO=function(e,t,a,o,l){var r,u=1/Math.tan(t/2);return e[0]=u/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,l!=null&&l!==1/0?(e[10]=l*(r=1/(o-l)),e[14]=l*o*r):(e[10]=-1,e[14]=-o),e},je.perspectiveFromFieldOfView=function(e,t,a,o){var l=Math.tan(t.upDegrees*Math.PI/180),r=Math.tan(t.downDegrees*Math.PI/180),u=Math.tan(t.leftDegrees*Math.PI/180),m=Math.tan(t.rightDegrees*Math.PI/180),p=2/(u+m),h=2/(l+r);return e[0]=p,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(u-m)*p*.5,e[9]=(l-r)*h*.5,e[10]=o/(a-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a/(a-o),e[15]=0,e},je.orthoNO=Zh,je.orthoZO=function(e,t,a,o,l,r,u){var m=1/(t-a),p=1/(o-l),h=1/(r-u);return e[0]=-2*m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=h,e[11]=0,e[12]=(t+a)*m,e[13]=(l+o)*p,e[14]=r*h,e[15]=1,e},je.lookAt=function(e,t,a,o){var l,r,u,m,p,h,y,x,v,C,R=t[0],N=t[1],W=t[2],D=o[0],Y=o[1],j=o[2],K=a[0],tt=a[1],J=a[2];return Math.abs(R-K)<si.EPSILON&&Math.abs(N-tt)<si.EPSILON&&Math.abs(W-J)<si.EPSILON?Xh(e):(y=R-K,x=N-tt,v=W-J,l=Y*(v*=C=1/Math.hypot(y,x,v))-j*(x*=C),r=j*(y*=C)-D*v,u=D*x-Y*y,(C=Math.hypot(l,r,u))?(l*=C=1/C,r*=C,u*=C):(l=0,r=0,u=0),m=x*u-v*r,p=v*l-y*u,h=y*r-x*l,(C=Math.hypot(m,p,h))?(m*=C=1/C,p*=C,h*=C):(m=0,p=0,h=0),e[0]=l,e[1]=m,e[2]=y,e[3]=0,e[4]=r,e[5]=p,e[6]=x,e[7]=0,e[8]=u,e[9]=h,e[10]=v,e[11]=0,e[12]=-(l*R+r*N+u*W),e[13]=-(m*R+p*N+h*W),e[14]=-(y*R+x*N+v*W),e[15]=1,e)},je.targetTo=function(e,t,a,o){var l=t[0],r=t[1],u=t[2],m=o[0],p=o[1],h=o[2],y=l-a[0],x=r-a[1],v=u-a[2],C=y*y+x*x+v*v;C>0&&(y*=C=1/Math.sqrt(C),x*=C,v*=C);var R=p*v-h*x,N=h*y-m*v,W=m*x-p*y;return(C=R*R+N*N+W*W)>0&&(R*=C=1/Math.sqrt(C),N*=C,W*=C),e[0]=R,e[1]=N,e[2]=W,e[3]=0,e[4]=x*W-v*N,e[5]=v*R-y*W,e[6]=y*N-x*R,e[7]=0,e[8]=y,e[9]=x,e[10]=v,e[11]=0,e[12]=l,e[13]=r,e[14]=u,e[15]=1,e},je.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},je.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},je.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e[9]=t[9]+a[9],e[10]=t[10]+a[10],e[11]=t[11]+a[11],e[12]=t[12]+a[12],e[13]=t[13]+a[13],e[14]=t[14]+a[14],e[15]=t[15]+a[15],e},je.subtract=Jh,je.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12]*a,e[13]=t[13]*a,e[14]=t[14]*a,e[15]=t[15]*a,e},je.multiplyScalarAndAdd=function(e,t,a,o){return e[0]=t[0]+a[0]*o,e[1]=t[1]+a[1]*o,e[2]=t[2]+a[2]*o,e[3]=t[3]+a[3]*o,e[4]=t[4]+a[4]*o,e[5]=t[5]+a[5]*o,e[6]=t[6]+a[6]*o,e[7]=t[7]+a[7]*o,e[8]=t[8]+a[8]*o,e[9]=t[9]+a[9]*o,e[10]=t[10]+a[10]*o,e[11]=t[11]+a[11]*o,e[12]=t[12]+a[12]*o,e[13]=t[13]+a[13]*o,e[14]=t[14]+a[14]*o,e[15]=t[15]+a[15]*o,e},je.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},je.equals=function(e,t){var a=e[0],o=e[1],l=e[2],r=e[3],u=e[4],m=e[5],p=e[6],h=e[7],y=e[8],x=e[9],v=e[10],C=e[11],R=e[12],N=e[13],W=e[14],D=e[15],Y=t[0],j=t[1],K=t[2],tt=t[3],J=t[4],st=t[5],_t=t[6],mt=t[7],bt=t[8],ft=t[9],Ct=t[10],Dt=t[11],Et=t[12],Wt=t[13],xt=t[14],wt=t[15];return Math.abs(a-Y)<=si.EPSILON*Math.max(1,Math.abs(a),Math.abs(Y))&&Math.abs(o-j)<=si.EPSILON*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(l-K)<=si.EPSILON*Math.max(1,Math.abs(l),Math.abs(K))&&Math.abs(r-tt)<=si.EPSILON*Math.max(1,Math.abs(r),Math.abs(tt))&&Math.abs(u-J)<=si.EPSILON*Math.max(1,Math.abs(u),Math.abs(J))&&Math.abs(m-st)<=si.EPSILON*Math.max(1,Math.abs(m),Math.abs(st))&&Math.abs(p-_t)<=si.EPSILON*Math.max(1,Math.abs(p),Math.abs(_t))&&Math.abs(h-mt)<=si.EPSILON*Math.max(1,Math.abs(h),Math.abs(mt))&&Math.abs(y-bt)<=si.EPSILON*Math.max(1,Math.abs(y),Math.abs(bt))&&Math.abs(x-ft)<=si.EPSILON*Math.max(1,Math.abs(x),Math.abs(ft))&&Math.abs(v-Ct)<=si.EPSILON*Math.max(1,Math.abs(v),Math.abs(Ct))&&Math.abs(C-Dt)<=si.EPSILON*Math.max(1,Math.abs(C),Math.abs(Dt))&&Math.abs(R-Et)<=si.EPSILON*Math.max(1,Math.abs(R),Math.abs(Et))&&Math.abs(N-Wt)<=si.EPSILON*Math.max(1,Math.abs(N),Math.abs(Wt))&&Math.abs(W-xt)<=si.EPSILON*Math.max(1,Math.abs(W),Math.abs(xt))&&Math.abs(D-wt)<=si.EPSILON*Math.max(1,Math.abs(D),Math.abs(wt))},je.sub=je.mul=je.ortho=je.perspective=void 0;var si=function(e,t){if(e&&e.__esModule)return e;if(e===null||Bf(e)!=="object"&&typeof e!="function")return{default:e};var a=Vh(void 0);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}(Ri);function Vh(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Vh=function(o){return o?a:t})(e)}function Xh(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kh(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=t[8],v=t[9],C=t[10],R=t[11],N=t[12],W=t[13],D=t[14],Y=t[15],j=a[0],K=a[1],tt=a[2],J=a[3];return e[0]=j*o+K*m+tt*x+J*N,e[1]=j*l+K*p+tt*v+J*W,e[2]=j*r+K*h+tt*C+J*D,e[3]=j*u+K*y+tt*R+J*Y,e[4]=(j=a[4])*o+(K=a[5])*m+(tt=a[6])*x+(J=a[7])*N,e[5]=j*l+K*p+tt*v+J*W,e[6]=j*r+K*h+tt*C+J*D,e[7]=j*u+K*y+tt*R+J*Y,e[8]=(j=a[8])*o+(K=a[9])*m+(tt=a[10])*x+(J=a[11])*N,e[9]=j*l+K*p+tt*v+J*W,e[10]=j*r+K*h+tt*C+J*D,e[11]=j*u+K*y+tt*R+J*Y,e[12]=(j=a[12])*o+(K=a[13])*m+(tt=a[14])*x+(J=a[15])*N,e[13]=j*l+K*p+tt*v+J*W,e[14]=j*r+K*h+tt*C+J*D,e[15]=j*u+K*y+tt*R+J*Y,e}function jh(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=o+o,p=l+l,h=r+r,y=o*m,x=o*p,v=o*h,C=l*p,R=l*h,N=r*h,W=u*m,D=u*p,Y=u*h;return e[0]=1-(C+N),e[1]=x+Y,e[2]=v-D,e[3]=0,e[4]=x-Y,e[5]=1-(y+N),e[6]=R+W,e[7]=0,e[8]=v+D,e[9]=R-W,e[10]=1-(y+C),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function qh(e,t){var a=t[4],o=t[5],l=t[6],r=t[8],u=t[9],m=t[10];return e[0]=Math.hypot(t[0],t[1],t[2]),e[1]=Math.hypot(a,o,l),e[2]=Math.hypot(r,u,m),e}function $h(e,t,a,o,l){var r,u=1/Math.tan(t/2);return e[0]=u/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,l!=null&&l!==1/0?(e[10]=(l+o)*(r=1/(o-l)),e[14]=2*l*o*r):(e[10]=-1,e[14]=-2*o),e}function Zh(e,t,a,o,l,r,u){var m=1/(t-a),p=1/(o-l),h=1/(r-u);return e[0]=-2*m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+a)*m,e[13]=(l+o)*p,e[14]=(u+r)*h,e[15]=1,e}function Jh(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e[9]=t[9]-a[9],e[10]=t[10]-a[10],e[11]=t[11]-a[11],e[12]=t[12]-a[12],e[13]=t[13]-a[13],e[14]=t[14]-a[14],e[15]=t[15]-a[15],e}je.perspective=$h,je.ortho=Zh,je.mul=Kh,je.sub=Jh;var Ye={},Ke={};function Uf(e){return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.create=tg,Ke.clone=function(e){var t=new hs.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},Ke.length=eg,Ke.fromValues=function(e,t,a){var o=new hs.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=a,o},Ke.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},Ke.set=function(e,t,a,o){return e[0]=t,e[1]=a,e[2]=o,e},Ke.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e},Ke.subtract=ag,Ke.multiply=ig,Ke.divide=og,Ke.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},Ke.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},Ke.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e},Ke.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e},Ke.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},Ke.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e},Ke.scaleAndAdd=function(e,t,a,o){return e[0]=t[0]+a[0]*o,e[1]=t[1]+a[1]*o,e[2]=t[2]+a[2]*o,e},Ke.distance=ng,Ke.squaredDistance=sg,Ke.squaredLength=lg,Ke.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},Ke.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},Ke.normalize=function(e,t){var a=t[0],o=t[1],l=t[2],r=a*a+o*o+l*l;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},Ke.dot=rg,Ke.cross=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=a[0],m=a[1],p=a[2];return e[0]=l*p-r*m,e[1]=r*u-o*p,e[2]=o*m-l*u,e},Ke.lerp=function(e,t,a,o){var l=t[0],r=t[1],u=t[2];return e[0]=l+o*(a[0]-l),e[1]=r+o*(a[1]-r),e[2]=u+o*(a[2]-u),e},Ke.hermite=function(e,t,a,o,l,r){var u=r*r,m=u*(2*r-3)+1,p=u*(r-2)+r,h=u*(r-1),y=u*(3-2*r);return e[0]=t[0]*m+a[0]*p+o[0]*h+l[0]*y,e[1]=t[1]*m+a[1]*p+o[1]*h+l[1]*y,e[2]=t[2]*m+a[2]*p+o[2]*h+l[2]*y,e},Ke.bezier=function(e,t,a,o,l,r){var u=1-r,m=u*u,p=r*r,h=m*u,y=3*r*m,x=3*p*u,v=p*r;return e[0]=t[0]*h+a[0]*y+o[0]*x+l[0]*v,e[1]=t[1]*h+a[1]*y+o[1]*x+l[1]*v,e[2]=t[2]*h+a[2]*y+o[2]*x+l[2]*v,e},Ke.random=function(e,t){t=t||1;var a=2*hs.RANDOM()*Math.PI,o=2*hs.RANDOM()-1,l=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(a)*l,e[1]=Math.sin(a)*l,e[2]=o*t,e},Ke.transformMat4=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=a[3]*o+a[7]*l+a[11]*r+a[15];return e[0]=(a[0]*o+a[4]*l+a[8]*r+a[12])/(u=u||1),e[1]=(a[1]*o+a[5]*l+a[9]*r+a[13])/u,e[2]=(a[2]*o+a[6]*l+a[10]*r+a[14])/u,e},Ke.transformMat3=function(e,t,a){var o=t[0],l=t[1],r=t[2];return e[0]=o*a[0]+l*a[3]+r*a[6],e[1]=o*a[1]+l*a[4]+r*a[7],e[2]=o*a[2]+l*a[5]+r*a[8],e},Ke.transformQuat=function(e,t,a){var o=a[0],l=a[1],r=a[2],u=t[0],m=t[1],p=t[2],h=l*p-r*m,y=r*u-o*p,x=o*m-l*u,v=l*x-r*y,C=r*h-o*x,R=o*y-l*h,N=2*a[3];return y*=N,x*=N,C*=2,R*=2,e[0]=u+(h*=N)+(v*=2),e[1]=m+y+C,e[2]=p+x+R,e},Ke.rotateX=function(e,t,a,o){var l=[],r=[];return l[0]=t[0]-a[0],l[1]=t[1]-a[1],l[2]=t[2]-a[2],r[0]=l[0],r[1]=l[1]*Math.cos(o)-l[2]*Math.sin(o),r[2]=l[1]*Math.sin(o)+l[2]*Math.cos(o),e[0]=r[0]+a[0],e[1]=r[1]+a[1],e[2]=r[2]+a[2],e},Ke.rotateY=function(e,t,a,o){var l=[],r=[];return l[0]=t[0]-a[0],l[1]=t[1]-a[1],l[2]=t[2]-a[2],r[0]=l[2]*Math.sin(o)+l[0]*Math.cos(o),r[1]=l[1],r[2]=l[2]*Math.cos(o)-l[0]*Math.sin(o),e[0]=r[0]+a[0],e[1]=r[1]+a[1],e[2]=r[2]+a[2],e},Ke.rotateZ=function(e,t,a,o){var l=[],r=[];return l[0]=t[0]-a[0],l[1]=t[1]-a[1],l[2]=t[2]-a[2],r[0]=l[0]*Math.cos(o)-l[1]*Math.sin(o),r[1]=l[0]*Math.sin(o)+l[1]*Math.cos(o),r[2]=l[2],e[0]=r[0]+a[0],e[1]=r[1]+a[1],e[2]=r[2]+a[2],e},Ke.angle=function(e,t){var a=e[0],o=e[1],l=e[2],r=t[0],u=t[1],m=t[2],p=Math.sqrt(a*a+o*o+l*l)*Math.sqrt(r*r+u*u+m*m),h=p&&rg(e,t)/p;return Math.acos(Math.min(Math.max(h,-1),1))},Ke.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e},Ke.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},Ke.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},Ke.equals=function(e,t){var a=e[0],o=e[1],l=e[2],r=t[0],u=t[1],m=t[2];return Math.abs(a-r)<=hs.EPSILON*Math.max(1,Math.abs(a),Math.abs(r))&&Math.abs(o-u)<=hs.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(l-m)<=hs.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))},Ke.forEach=Ke.sqrLen=Ke.len=Ke.sqrDist=Ke.dist=Ke.div=Ke.mul=Ke.sub=void 0;var hs=function(e,t){if(e&&e.__esModule)return e;if(e===null||Uf(e)!=="object"&&typeof e!="function")return{default:e};var a=Qh(void 0);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}(Ri);function Qh(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Qh=function(o){return o?a:t})(e)}function tg(){var e=new hs.ARRAY_TYPE(3);return hs.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function eg(e){return Math.hypot(e[0],e[1],e[2])}function ag(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e}function ig(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e}function og(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e}function ng(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])}function sg(e,t){var a=t[0]-e[0],o=t[1]-e[1],l=t[2]-e[2];return a*a+o*o+l*l}function lg(e){var t=e[0],a=e[1],o=e[2];return t*t+a*a+o*o}function rg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}Ke.sub=ag,Ke.mul=ig,Ke.div=og,Ke.dist=ng,Ke.sqrDist=sg,Ke.len=eg,Ke.sqrLen=lg;var gs,OT=(gs=tg(),function(e,t,a,o,l,r){var u,m;for(t||(t=3),a||(a=0),m=o?Math.min(o*t+a,e.length):e.length,u=a;u<m;u+=t)gs[0]=e[u],gs[1]=e[u+1],gs[2]=e[u+2],l(gs,gs,r),e[u]=gs[0],e[u+1]=gs[1],e[u+2]=gs[2];return e});Ke.forEach=OT;var oa={};function kf(e){return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}Object.defineProperty(oa,"__esModule",{value:!0}),oa.create=_g,oa.clone=function(e){var t=new Jo.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},oa.fromValues=function(e,t,a,o){var l=new Jo.ARRAY_TYPE(4);return l[0]=e,l[1]=t,l[2]=a,l[3]=o,l},oa.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},oa.set=function(e,t,a,o,l){return e[0]=t,e[1]=a,e[2]=o,e[3]=l,e},oa.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},oa.subtract=ug,oa.multiply=cg,oa.divide=mg,oa.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},oa.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},oa.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e[3]=Math.min(t[3],a[3]),e},oa.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e[3]=Math.max(t[3],a[3]),e},oa.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},oa.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},oa.scaleAndAdd=function(e,t,a,o){return e[0]=t[0]+a[0]*o,e[1]=t[1]+a[1]*o,e[2]=t[2]+a[2]*o,e[3]=t[3]+a[3]*o,e},oa.distance=fg,oa.squaredDistance=pg,oa.length=hg,oa.squaredLength=gg,oa.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},oa.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},oa.normalize=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=a*a+o*o+l*l+r*r;return u>0&&(u=1/Math.sqrt(u)),e[0]=a*u,e[1]=o*u,e[2]=l*u,e[3]=r*u,e},oa.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},oa.cross=function(e,t,a,o){var l=a[0]*o[1]-a[1]*o[0],r=a[0]*o[2]-a[2]*o[0],u=a[0]*o[3]-a[3]*o[0],m=a[1]*o[2]-a[2]*o[1],p=a[1]*o[3]-a[3]*o[1],h=a[2]*o[3]-a[3]*o[2],y=t[0],x=t[1],v=t[2],C=t[3];return e[0]=x*h-v*p+C*m,e[1]=-y*h+v*u-C*r,e[2]=y*p-x*u+C*l,e[3]=-y*m+x*r-v*l,e},oa.lerp=function(e,t,a,o){var l=t[0],r=t[1],u=t[2],m=t[3];return e[0]=l+o*(a[0]-l),e[1]=r+o*(a[1]-r),e[2]=u+o*(a[2]-u),e[3]=m+o*(a[3]-m),e},oa.random=function(e,t){var a,o,l,r,u,m;t=t||1;do u=(a=2*Jo.RANDOM()-1)*a+(o=2*Jo.RANDOM()-1)*o;while(u>=1);do m=(l=2*Jo.RANDOM()-1)*l+(r=2*Jo.RANDOM()-1)*r;while(m>=1);var p=Math.sqrt((1-u)/m);return e[0]=t*a,e[1]=t*o,e[2]=t*l*p,e[3]=t*r*p,e},oa.transformMat4=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3];return e[0]=a[0]*o+a[4]*l+a[8]*r+a[12]*u,e[1]=a[1]*o+a[5]*l+a[9]*r+a[13]*u,e[2]=a[2]*o+a[6]*l+a[10]*r+a[14]*u,e[3]=a[3]*o+a[7]*l+a[11]*r+a[15]*u,e},oa.transformQuat=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=a[0],m=a[1],p=a[2],h=a[3],y=h*o+m*r-p*l,x=h*l+p*o-u*r,v=h*r+u*l-m*o,C=-u*o-m*l-p*r;return e[0]=y*h+C*-u+x*-p-v*-m,e[1]=x*h+C*-m+v*-u-y*-p,e[2]=v*h+C*-p+y*-m-x*-u,e[3]=t[3],e},oa.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},oa.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},oa.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},oa.equals=function(e,t){var a=e[0],o=e[1],l=e[2],r=e[3],u=t[0],m=t[1],p=t[2],h=t[3];return Math.abs(a-u)<=Jo.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-m)<=Jo.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(l-p)<=Jo.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(r-h)<=Jo.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))},oa.forEach=oa.sqrLen=oa.len=oa.sqrDist=oa.dist=oa.div=oa.mul=oa.sub=void 0;var Jo=function(e,t){if(e&&e.__esModule)return e;if(e===null||kf(e)!=="object"&&typeof e!="function")return{default:e};var a=dg(void 0);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}(Ri);function dg(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(dg=function(o){return o?a:t})(e)}function _g(){var e=new Jo.ARRAY_TYPE(4);return Jo.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function ug(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}function cg(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e[3]=t[3]*a[3],e}function mg(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e[3]=t[3]/a[3],e}function fg(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2],t[3]-e[3])}function pg(e,t){var a=t[0]-e[0],o=t[1]-e[1],l=t[2]-e[2],r=t[3]-e[3];return a*a+o*o+l*l+r*r}function hg(e){return Math.hypot(e[0],e[1],e[2],e[3])}function gg(e){var t=e[0],a=e[1],o=e[2],l=e[3];return t*t+a*a+o*o+l*l}oa.sub=ug,oa.mul=cg,oa.div=mg,oa.dist=fg,oa.sqrDist=pg,oa.len=hg,oa.sqrLen=gg;var CT=function(){var e=_g();return function(t,a,o,l,r,u){var m,p;for(a||(a=4),o||(o=0),p=l?Math.min(l*a+o,t.length):t.length,m=o;m<p;m+=a)e[0]=t[m],e[1]=t[m+1],e[2]=t[m+2],e[3]=t[m+3],r(e,e,u),t[m]=e[0],t[m+1]=e[1],t[m+2]=e[2],t[m+3]=e[3];return t}}();function zf(e){return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}oa.forEach=CT,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.create=Hf,Ye.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},Ye.setAxisAngle=bg,Ye.getAxisAngle=function(e,t){var a=2*Math.acos(t[3]),o=Math.sin(a/2);return o>sr.EPSILON?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=1,e[1]=0,e[2]=0),a},Ye.getAngle=function(e,t){var a=Ig(e,t);return Math.acos(2*a*a-1)},Ye.multiply=Tg,Ye.rotateX=function(e,t,a){a*=.5;var o=t[0],l=t[1],r=t[2],u=t[3],m=Math.sin(a),p=Math.cos(a);return e[0]=o*p+u*m,e[1]=l*p+r*m,e[2]=r*p-l*m,e[3]=u*p-o*m,e},Ye.rotateY=function(e,t,a){a*=.5;var o=t[0],l=t[1],r=t[2],u=t[3],m=Math.sin(a),p=Math.cos(a);return e[0]=o*p-r*m,e[1]=l*p+u*m,e[2]=r*p+o*m,e[3]=u*p-l*m,e},Ye.rotateZ=function(e,t,a){a*=.5;var o=t[0],l=t[1],r=t[2],u=t[3],m=Math.sin(a),p=Math.cos(a);return e[0]=o*p+l*m,e[1]=l*p-o*m,e[2]=r*p+u*m,e[3]=u*p-r*m,e},Ye.calculateW=function(e,t){var a=t[0],o=t[1],l=t[2];return e[0]=a,e[1]=o,e[2]=l,e[3]=Math.sqrt(Math.abs(1-a*a-o*o-l*l)),e},Ye.exp=xg,Ye.ln=Ag,Ye.pow=function(e,t,a){return Ag(e,t),Eg(e,e,a),xg(e,e),e},Ye.slerp=Gc,Ye.random=function(e){var t=sr.RANDOM(),a=sr.RANDOM(),o=sr.RANDOM(),l=Math.sqrt(1-t),r=Math.sqrt(t);return e[0]=l*Math.sin(2*Math.PI*a),e[1]=l*Math.cos(2*Math.PI*a),e[2]=r*Math.sin(2*Math.PI*o),e[3]=r*Math.cos(2*Math.PI*o),e},Ye.invert=function(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=a*a+o*o+l*l+r*r,m=u?1/u:0;return e[0]=-a*m,e[1]=-o*m,e[2]=-l*m,e[3]=r*m,e},Ye.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},Ye.fromMat3=vg,Ye.fromEuler=function(e,t,a,o){var l=.5*Math.PI/180;t*=l,a*=l,o*=l;var r=Math.sin(t),u=Math.cos(t),m=Math.sin(a),p=Math.cos(a),h=Math.sin(o),y=Math.cos(o);return e[0]=r*p*y-u*m*h,e[1]=u*m*y+r*p*h,e[2]=u*p*h-r*m*y,e[3]=u*p*y+r*m*h,e},Ye.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},Ye.setAxes=Ye.sqlerp=Ye.rotationTo=Ye.equals=Ye.exactEquals=Ye.normalize=Ye.sqrLen=Ye.squaredLength=Ye.len=Ye.length=Ye.lerp=Ye.dot=Ye.scale=Ye.mul=Ye.add=Ye.set=Ye.copy=Ye.fromValues=Ye.clone=void 0;var sr=Yc(Ri),ST=Yc(Pa),ys=Yc(Ke),Ho=Yc(oa);function yg(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(yg=function(o){return o?a:t})(e)}function Yc(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||zf(e)!=="object"&&typeof e!="function")return{default:e};var a=yg(t);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}function Hf(){var e=new sr.ARRAY_TYPE(4);return sr.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function bg(e,t,a){a*=.5;var o=Math.sin(a);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(a),e}function Tg(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=a[0],p=a[1],h=a[2],y=a[3];return e[0]=o*y+u*m+l*h-r*p,e[1]=l*y+u*p+r*m-o*h,e[2]=r*y+u*h+o*p-l*m,e[3]=u*y-o*m-l*p-r*h,e}function xg(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=Math.sqrt(a*a+o*o+l*l),m=Math.exp(r),p=u>0?m*Math.sin(u)/u:0;return e[0]=a*p,e[1]=o*p,e[2]=l*p,e[3]=m*Math.cos(u),e}function Ag(e,t){var a=t[0],o=t[1],l=t[2],r=t[3],u=Math.sqrt(a*a+o*o+l*l),m=u>0?Math.atan2(u,r)/u:0;return e[0]=a*m,e[1]=o*m,e[2]=l*m,e[3]=.5*Math.log(a*a+o*o+l*l+r*r),e}function Gc(e,t,a,o){var l,r,u,m,p,h=t[0],y=t[1],x=t[2],v=t[3],C=a[0],R=a[1],N=a[2],W=a[3];return(r=h*C+y*R+x*N+v*W)<0&&(r=-r,C=-C,R=-R,N=-N,W=-W),1-r>sr.EPSILON?(l=Math.acos(r),u=Math.sin(l),m=Math.sin((1-o)*l)/u,p=Math.sin(o*l)/u):(m=1-o,p=o),e[0]=m*h+p*C,e[1]=m*y+p*R,e[2]=m*x+p*N,e[3]=m*v+p*W,e}function vg(e,t){var a,o=t[0]+t[4]+t[8];if(o>0)a=Math.sqrt(o+1),e[3]=.5*a,e[0]=(t[5]-t[7])*(a=.5/a),e[1]=(t[6]-t[2])*a,e[2]=(t[1]-t[3])*a;else{var l=0;t[4]>t[0]&&(l=1),t[8]>t[3*l+l]&&(l=2);var r=(l+1)%3,u=(l+2)%3;a=Math.sqrt(t[3*l+l]-t[3*r+r]-t[3*u+u]+1),e[l]=.5*a,e[3]=(t[3*r+u]-t[3*u+r])*(a=.5/a),e[r]=(t[3*r+l]+t[3*l+r])*a,e[u]=(t[3*u+l]+t[3*l+u])*a}return e}Ye.clone=Ho.clone,Ye.fromValues=Ho.fromValues,Ye.copy=Ho.copy,Ye.set=Ho.set,Ye.add=Ho.add,Ye.mul=Tg;var Eg=Ho.scale;Ye.scale=Eg;var Ig=Ho.dot;Ye.dot=Ig,Ye.lerp=Ho.lerp;var Og=Ho.length;Ye.length=Og,Ye.len=Og;var Cg=Ho.squaredLength;Ye.squaredLength=Cg,Ye.sqrLen=Cg;var Yf=Ho.normalize;Ye.normalize=Yf,Ye.exactEquals=Ho.exactEquals,Ye.equals=Ho.equals;var cn,Sg,Rg,RT=(cn=ys.create(),Sg=ys.fromValues(1,0,0),Rg=ys.fromValues(0,1,0),function(e,t,a){var o=ys.dot(t,a);return o<-.999999?(ys.cross(cn,Sg,t),ys.len(cn)<1e-6&&ys.cross(cn,Rg,t),ys.normalize(cn,cn),bg(e,cn,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ys.cross(cn,t,a),e[0]=cn[0],e[1]=cn[1],e[2]=cn[2],e[3]=1+o,Yf(e,e))});Ye.rotationTo=RT;var Gf,Vf,NT=(Gf=Hf(),Vf=Hf(),function(e,t,a,o,l,r){return Gc(Gf,t,l,r),Gc(Vf,a,o,r),Gc(e,Gf,Vf,2*r*(1-r)),e});Ye.sqlerp=NT;var mn,LT=(mn=ST.create(),function(e,t,a,o){return mn[0]=a[0],mn[3]=a[1],mn[6]=a[2],mn[1]=o[0],mn[4]=o[1],mn[7]=o[2],mn[2]=-t[0],mn[5]=-t[1],mn[8]=-t[2],Yf(e,vg(e,mn))});Ye.setAxes=LT;var _a={};function Xf(e){return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}Object.defineProperty(_a,"__esModule",{value:!0}),_a.create=function(){var e=new ho.ARRAY_TYPE(8);return ho.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},_a.clone=function(e){var t=new ho.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},_a.fromValues=function(e,t,a,o,l,r,u,m){var p=new ho.ARRAY_TYPE(8);return p[0]=e,p[1]=t,p[2]=a,p[3]=o,p[4]=l,p[5]=r,p[6]=u,p[7]=m,p},_a.fromRotationTranslationValues=function(e,t,a,o,l,r,u){var m=new ho.ARRAY_TYPE(8);m[0]=e,m[1]=t,m[2]=a,m[3]=o;var p=.5*l,h=.5*r,y=.5*u;return m[4]=p*o+h*a-y*t,m[5]=h*o+y*e-p*a,m[6]=y*o+p*t-h*e,m[7]=-p*e-h*t-y*a,m},_a.fromRotationTranslation=Pg,_a.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},_a.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},_a.fromMat4=function(e,t){var a=bs.create();Ng.getRotation(a,t);var o=new ho.ARRAY_TYPE(3);return Ng.getTranslation(o,t),Pg(e,a,o),e},_a.copy=wg,_a.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},_a.set=function(e,t,a,o,l,r,u,m,p){return e[0]=t,e[1]=a,e[2]=o,e[3]=l,e[4]=r,e[5]=u,e[6]=m,e[7]=p,e},_a.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},_a.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},_a.getTranslation=function(e,t){var a=t[4],o=t[5],l=t[6],r=t[7],u=-t[0],m=-t[1],p=-t[2],h=t[3];return e[0]=2*(a*h+r*u+o*p-l*m),e[1]=2*(o*h+r*m+l*u-a*p),e[2]=2*(l*h+r*p+a*m-o*u),e},_a.translate=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=.5*a[0],p=.5*a[1],h=.5*a[2],y=t[4],x=t[5],v=t[6],C=t[7];return e[0]=o,e[1]=l,e[2]=r,e[3]=u,e[4]=u*m+l*h-r*p+y,e[5]=u*p+r*m-o*h+x,e[6]=u*h+o*p-l*m+v,e[7]=-o*m-l*p-r*h+C,e},_a.rotateX=function(e,t,a){var o=-t[0],l=-t[1],r=-t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=m*u+y*o+p*r-h*l,v=p*u+y*l+h*o-m*r,C=h*u+y*r+m*l-p*o,R=y*u-m*o-p*l-h*r;return bs.rotateX(e,t,a),e[4]=x*(u=e[3])+R*(o=e[0])+v*(r=e[2])-C*(l=e[1]),e[5]=v*u+R*l+C*o-x*r,e[6]=C*u+R*r+x*l-v*o,e[7]=R*u-x*o-v*l-C*r,e},_a.rotateY=function(e,t,a){var o=-t[0],l=-t[1],r=-t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=m*u+y*o+p*r-h*l,v=p*u+y*l+h*o-m*r,C=h*u+y*r+m*l-p*o,R=y*u-m*o-p*l-h*r;return bs.rotateY(e,t,a),e[4]=x*(u=e[3])+R*(o=e[0])+v*(r=e[2])-C*(l=e[1]),e[5]=v*u+R*l+C*o-x*r,e[6]=C*u+R*r+x*l-v*o,e[7]=R*u-x*o-v*l-C*r,e},_a.rotateZ=function(e,t,a){var o=-t[0],l=-t[1],r=-t[2],u=t[3],m=t[4],p=t[5],h=t[6],y=t[7],x=m*u+y*o+p*r-h*l,v=p*u+y*l+h*o-m*r,C=h*u+y*r+m*l-p*o,R=y*u-m*o-p*l-h*r;return bs.rotateZ(e,t,a),e[4]=x*(u=e[3])+R*(o=e[0])+v*(r=e[2])-C*(l=e[1]),e[5]=v*u+R*l+C*o-x*r,e[6]=C*u+R*r+x*l-v*o,e[7]=R*u-x*o-v*l-C*r,e},_a.rotateByQuatAppend=function(e,t,a){var o=a[0],l=a[1],r=a[2],u=a[3],m=t[0],p=t[1],h=t[2],y=t[3];return e[0]=m*u+y*o+p*r-h*l,e[1]=p*u+y*l+h*o-m*r,e[2]=h*u+y*r+m*l-p*o,e[3]=y*u-m*o-p*l-h*r,e[4]=(m=t[4])*u+(y=t[7])*o+(p=t[5])*r-(h=t[6])*l,e[5]=p*u+y*l+h*o-m*r,e[6]=h*u+y*r+m*l-p*o,e[7]=y*u-m*o-p*l-h*r,e},_a.rotateByQuatPrepend=function(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=a[0],p=a[1],h=a[2],y=a[3];return e[0]=o*y+u*m+l*h-r*p,e[1]=l*y+u*p+r*m-o*h,e[2]=r*y+u*h+o*p-l*m,e[3]=u*y-o*m-l*p-r*h,e[4]=o*(y=a[7])+u*(m=a[4])+l*(h=a[6])-r*(p=a[5]),e[5]=l*y+u*p+r*m-o*h,e[6]=r*y+u*h+o*p-l*m,e[7]=u*y-o*m-l*p-r*h,e},_a.rotateAroundAxis=function(e,t,a,o){if(Math.abs(o)<ho.EPSILON)return wg(e,t);var l=Math.hypot(a[0],a[1],a[2]);o*=.5;var r=Math.sin(o),u=r*a[0]/l,m=r*a[1]/l,p=r*a[2]/l,h=Math.cos(o),y=t[0],x=t[1],v=t[2],C=t[3];e[0]=y*h+C*u+x*p-v*m,e[1]=x*h+C*m+v*u-y*p,e[2]=v*h+C*p+y*m-x*u,e[3]=C*h-y*u-x*m-v*p;var R=t[4],N=t[5],W=t[6],D=t[7];return e[4]=R*h+D*u+N*p-W*m,e[5]=N*h+D*m+W*u-R*p,e[6]=W*h+D*p+R*m-N*u,e[7]=D*h-R*u-N*m-W*p,e},_a.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e},_a.multiply=Wg,_a.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e},_a.lerp=function(e,t,a,o){var l=1-o;return Mg(t,a)<0&&(o=-o),e[0]=t[0]*l+a[0]*o,e[1]=t[1]*l+a[1]*o,e[2]=t[2]*l+a[2]*o,e[3]=t[3]*l+a[3]*o,e[4]=t[4]*l+a[4]*o,e[5]=t[5]*l+a[5]*o,e[6]=t[6]*l+a[6]*o,e[7]=t[7]*l+a[7]*o,e},_a.invert=function(e,t){var a=Vc(t);return e[0]=-t[0]/a,e[1]=-t[1]/a,e[2]=-t[2]/a,e[3]=t[3]/a,e[4]=-t[4]/a,e[5]=-t[5]/a,e[6]=-t[6]/a,e[7]=t[7]/a,e},_a.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},_a.normalize=function(e,t){var a=Vc(t);if(a>0){a=Math.sqrt(a);var o=t[0]/a,l=t[1]/a,r=t[2]/a,u=t[3]/a,m=t[4],p=t[5],h=t[6],y=t[7],x=o*m+l*p+r*h+u*y;e[0]=o,e[1]=l,e[2]=r,e[3]=u,e[4]=(m-o*x)/a,e[5]=(p-l*x)/a,e[6]=(h-r*x)/a,e[7]=(y-u*x)/a}return e},_a.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},_a.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},_a.equals=function(e,t){var a=e[0],o=e[1],l=e[2],r=e[3],u=e[4],m=e[5],p=e[6],h=e[7],y=t[0],x=t[1],v=t[2],C=t[3],R=t[4],N=t[5],W=t[6],D=t[7];return Math.abs(a-y)<=ho.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-x)<=ho.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(l-v)<=ho.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(r-C)<=ho.EPSILON*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(u-R)<=ho.EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(m-N)<=ho.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(p-W)<=ho.EPSILON*Math.max(1,Math.abs(p),Math.abs(W))&&Math.abs(h-D)<=ho.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))},_a.sqrLen=_a.squaredLength=_a.len=_a.length=_a.dot=_a.mul=_a.setReal=_a.getReal=void 0;var ho=Kf(Ri),bs=Kf(Ye),Ng=Kf(je);function Lg(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Lg=function(o){return o?a:t})(e)}function Kf(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Xf(e)!=="object"&&typeof e!="function")return{default:e};var a=Lg(t);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}function Pg(e,t,a){var o=.5*a[0],l=.5*a[1],r=.5*a[2],u=t[0],m=t[1],p=t[2],h=t[3];return e[0]=u,e[1]=m,e[2]=p,e[3]=h,e[4]=o*h+l*p-r*m,e[5]=l*h+r*u-o*p,e[6]=r*h+o*m-l*u,e[7]=-o*u-l*m-r*p,e}function wg(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Wg(e,t,a){var o=t[0],l=t[1],r=t[2],u=t[3],m=a[4],p=a[5],h=a[6],y=a[7],x=t[4],v=t[5],C=t[6],R=t[7],N=a[0],W=a[1],D=a[2],Y=a[3];return e[0]=o*Y+u*N+l*D-r*W,e[1]=l*Y+u*W+r*N-o*D,e[2]=r*Y+u*D+o*W-l*N,e[3]=u*Y-o*N-l*W-r*D,e[4]=o*y+u*m+l*h-r*p+x*Y+R*N+v*D-C*W,e[5]=l*y+u*p+r*m-o*h+v*Y+R*W+C*N-x*D,e[6]=r*y+u*h+o*p-l*m+C*Y+R*D+x*W-v*N,e[7]=u*y-o*m-l*p-r*h+R*Y-x*N-v*W-C*D,e}_a.getReal=bs.copy,_a.setReal=bs.copy,_a.mul=Wg;var Mg=bs.dot;_a.dot=Mg;var Dg=bs.length;_a.length=Dg,_a.len=Dg;var Vc=bs.squaredLength;_a.squaredLength=Vc,_a.sqrLen=Vc;var Qe={};function jf(e){return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.create=Bg,Qe.clone=function(e){var t=new lr.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},Qe.fromValues=function(e,t){var a=new lr.ARRAY_TYPE(2);return a[0]=e,a[1]=t,a},Qe.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},Qe.set=function(e,t,a){return e[0]=t,e[1]=a,e},Qe.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e},Qe.subtract=Ug,Qe.multiply=kg,Qe.divide=zg,Qe.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},Qe.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},Qe.min=function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e},Qe.max=function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e},Qe.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},Qe.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e},Qe.scaleAndAdd=function(e,t,a,o){return e[0]=t[0]+a[0]*o,e[1]=t[1]+a[1]*o,e},Qe.distance=Hg,Qe.squaredDistance=Yg,Qe.length=Gg,Qe.squaredLength=Vg,Qe.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},Qe.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},Qe.normalize=function(e,t){var a=t[0],o=t[1],l=a*a+o*o;return l>0&&(l=1/Math.sqrt(l)),e[0]=t[0]*l,e[1]=t[1]*l,e},Qe.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},Qe.cross=function(e,t,a){var o=t[0]*a[1]-t[1]*a[0];return e[0]=e[1]=0,e[2]=o,e},Qe.lerp=function(e,t,a,o){var l=t[0],r=t[1];return e[0]=l+o*(a[0]-l),e[1]=r+o*(a[1]-r),e},Qe.random=function(e,t){t=t||1;var a=2*lr.RANDOM()*Math.PI;return e[0]=Math.cos(a)*t,e[1]=Math.sin(a)*t,e},Qe.transformMat2=function(e,t,a){var o=t[0],l=t[1];return e[0]=a[0]*o+a[2]*l,e[1]=a[1]*o+a[3]*l,e},Qe.transformMat2d=function(e,t,a){var o=t[0],l=t[1];return e[0]=a[0]*o+a[2]*l+a[4],e[1]=a[1]*o+a[3]*l+a[5],e},Qe.transformMat3=function(e,t,a){var o=t[0],l=t[1];return e[0]=a[0]*o+a[3]*l+a[6],e[1]=a[1]*o+a[4]*l+a[7],e},Qe.transformMat4=function(e,t,a){var o=t[0],l=t[1];return e[0]=a[0]*o+a[4]*l+a[12],e[1]=a[1]*o+a[5]*l+a[13],e},Qe.rotate=function(e,t,a,o){var l=t[0]-a[0],r=t[1]-a[1],u=Math.sin(o),m=Math.cos(o);return e[0]=l*m-r*u+a[0],e[1]=l*u+r*m+a[1],e},Qe.angle=function(e,t){var a=e[0],o=e[1],l=t[0],r=t[1],u=Math.sqrt(a*a+o*o)*Math.sqrt(l*l+r*r);return Math.acos(Math.min(Math.max(u&&(a*l+o*r)/u,-1),1))},Qe.zero=function(e){return e[0]=0,e[1]=0,e},Qe.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},Qe.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Qe.equals=function(e,t){var a=e[0],o=e[1],l=t[0],r=t[1];return Math.abs(a-l)<=lr.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-r)<=lr.EPSILON*Math.max(1,Math.abs(o),Math.abs(r))},Qe.forEach=Qe.sqrLen=Qe.sqrDist=Qe.dist=Qe.div=Qe.mul=Qe.sub=Qe.len=void 0;var lr=function(e,t){if(e&&e.__esModule)return e;if(e===null||jf(e)!=="object"&&typeof e!="function")return{default:e};var a=Fg(void 0);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}(Ri);function Fg(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Fg=function(o){return o?a:t})(e)}function Bg(){var e=new lr.ARRAY_TYPE(2);return lr.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function Ug(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e}function kg(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e}function zg(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e}function Hg(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function Yg(e,t){var a=t[0]-e[0],o=t[1]-e[1];return a*a+o*o}function Gg(e){return Math.hypot(e[0],e[1])}function Vg(e){var t=e[0],a=e[1];return t*t+a*a}Qe.len=Gg,Qe.sub=Ug,Qe.mul=kg,Qe.div=zg,Qe.dist=Hg,Qe.sqrDist=Yg,Qe.sqrLen=Vg;var PT=function(){var e=Bg();return function(t,a,o,l,r,u){var m,p;for(a||(a=2),o||(o=0),p=l?Math.min(l*a+o,t.length):t.length,m=o;m<p;m+=a)e[0]=t[m],e[1]=t[m+1],r(e,e,u),t[m]=e[0],t[m+1]=e[1];return t}}();function qf(e){return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}Qe.forEach=PT,Object.defineProperty(Si,"__esModule",{value:!0}),s.a7=Si.vec4=s.N=Si.vec3=Si.vec2=Si.quat2=s.bi=Si.quat=s.a6=Si.mat4=s.co=Si.mat3=Si.mat2d=s.b4=Si.mat2=Si.glMatrix=void 0;var wT=Xn(Ri);Si.glMatrix=wT;var WT=Xn(Za);s.b4=Si.mat2=WT;var MT=Xn(Qa);Si.mat2d=MT;var DT=Xn(Pa);s.co=Si.mat3=DT;var FT=Xn(je);s.a6=Si.mat4=FT;var BT=Xn(Ye);s.bi=Si.quat=BT;var UT=Xn(_a);Si.quat2=UT;var kT=Xn(Qe);Si.vec2=kT;var zT=Xn(Ke);s.N=Si.vec3=zT;var HT=Xn(oa);function Xg(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,a=new WeakMap;return(Xg=function(o){return o?a:t})(e)}function Xn(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||qf(e)!=="object"&&typeof e!="function")return{default:e};var a=Xg(t);if(a&&a.has(e))return a.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var u=l?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(o,r,u):o[r]=e[r]}return o.default=e,a&&a.set(e,o),o}s.a7=Si.vec4=HT;class $f{constructor(t,a){this.pos=t,this.dir=a}intersectsPlane(t,a,o){const l=s.N.dot(a,this.dir);if(Math.abs(l)<1e-6)return!1;const r=((t[0]-this.pos[0])*a[0]+(t[1]-this.pos[1])*a[1]+(t[2]-this.pos[2])*a[2])/l;return o[0]=this.pos[0]+this.dir[0]*r,o[1]=this.pos[1]+this.dir[1]*r,o[2]=this.pos[2]+this.dir[2]*r,!0}closestPointOnSphere(t,a,o){if(s.N.equals(this.pos,t)||a===0)return o[0]=o[1]=o[2]=0,!1;const[l,r,u]=this.dir,m=this.pos[0]-t[0],p=this.pos[1]-t[1],h=this.pos[2]-t[2],y=l*l+r*r+u*u,x=2*(m*l+p*r+h*u),v=x*x-4*y*(m*m+p*p+h*h-a*a);if(v<0){const C=Math.max(-x/2,0),R=m+l*C,N=p+r*C,W=h+u*C,D=Math.hypot(R,N,W);return o[0]=R*a/D,o[1]=N*a/D,o[2]=W*a/D,!1}{const C=(-x-Math.sqrt(v))/(2*y);if(C<0){const R=Math.hypot(m,p,h);return o[0]=m*a/R,o[1]=p*a/R,o[2]=h*a/R,!1}return o[0]=m+l*C,o[1]=p+r*C,o[2]=h+u*C,!0}}}class Zf{constructor(t,a,o,l,r){this.TL=t,this.TR=a,this.BR=o,this.BL=l,this.horizon=r}static fromInvProjectionMatrix(t,a,o){const l=[-1,1,1],r=[1,1,1],u=[1,-1,1],m=[-1,-1,1],p=s.N.transformMat4(l,l,t),h=s.N.transformMat4(r,r,t),y=s.N.transformMat4(u,u,t),x=s.N.transformMat4(m,m,t);return new Zf(p,h,y,x,a/o)}}function du(e,t,a){let o=1/0,l=-1/0;const r=[];for(const u of e){s.N.sub(r,u,t);const m=s.N.dot(r,a);o=Math.min(o,m),l=Math.max(l,m)}return[o,l]}function Kg(e,t){let a=!0;for(let o=0;o<e.planes.length;o++){const l=e.planes[o];let r=0;for(let u=0;u<t.length;u++)r+=s.N.dot(l,t[u])+l[3]>=0;if(r===0)return 0;r!==t.length&&(a=!1)}return a?2:1}function jg(e,t){for(const a of e.projections){const o=du(t,e.points[0],a.axis);if(a.projection[1]<o[0]||a.projection[0]>o[1])return 0}return 1}function qg(e,t){let a=0;const o=[0,0,0,0];for(let l=0;l<e.length;l++)o[0]=e[l][0],o[1]=e[l][1],o[2]=e[l][2],o[3]=1,s.a7.dot(o,t)>=0&&a++;return a}class Jf{constructor(t,a){this.points=t||new Array(8).fill([0,0,0]),this.planes=a||new Array(6).fill([0,0,0,0]),this.bounds=ti.fromPoints(this.points),this.projections=[],this.frustumEdges=[s.N.sub([],this.points[2],this.points[3]),s.N.sub([],this.points[0],this.points[3]),s.N.sub([],this.points[4],this.points[0]),s.N.sub([],this.points[5],this.points[1]),s.N.sub([],this.points[6],this.points[2]),s.N.sub([],this.points[7],this.points[3])];for(const o of this.frustumEdges){const l=[0,-o[2],o[1]],r=[o[2],0,-o[0]];this.projections.push({axis:l,projection:du(this.points,this.points[0],l)}),this.projections.push({axis:r,projection:du(this.points,this.points[0],r)})}}static fromInvProjectionMatrix(t,a,o,l){const r=Math.pow(2,o),u=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(h=>{const y=s.a7.transformMat4([],h,t),x=1/y[3]/a*r;return s.a7.mul(y,y,[x,x,l?1/y[3]:x,x])}),m=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(h=>{const y=s.N.sub([],u[h[0]],u[h[1]]),x=s.N.sub([],u[h[2]],u[h[1]]),v=s.N.normalize([],s.N.cross([],y,x)),C=-s.N.dot(v,u[h[1]]);return v.concat(C)}),p=[];for(let h=0;h<u.length;h++)p.push([u[h][0],u[h][1],u[h][2]]);return new Jf(p,m)}intersectsPrecise(t,a,o){for(let l=0;l<a.length;l++)if(!qg(t,a[l]))return 0;for(let l=0;l<this.planes.length;l++)if(!qg(t,this.planes[l]))return 0;for(const l of o)for(const r of this.frustumEdges){const u=s.N.cross([],l,r),m=s.N.length(u);if(m===0)continue;s.N.scale(u,u,1/m);const p=du(this.points,this.points[0],u),h=du(t,this.points[0],u);if(p[0]>h[1]||h[0]>p[1])return 0}return 1}}class ti{static fromPoints(t){const a=[1/0,1/0,1/0],o=[-1/0,-1/0,-1/0];for(const l of t)s.N.min(a,a,l),s.N.max(o,o,l);return new ti(a,o)}static fromTileIdAndHeight(t,a,o){const l=1<<t.canonical.z,r=t.canonical.x,u=t.canonical.y;return new ti([r/l,u/l,a],[(r+1)/l,(u+1)/l,o])}static applyTransform(t,a){const o=t.getCorners();for(let l=0;l<o.length;++l)s.N.transformMat4(o[l],o[l],a);return ti.fromPoints(o)}static projectAabbCorners(t,a){const o=t.getCorners();for(let l=0;l<o.length;++l)s.N.transformMat4(o[l],o[l],a);return o}constructor(t,a){this.min=t,this.max=a,this.center=s.N.scale([],s.N.add([],this.min,this.max),.5)}quadrant(t){const a=[t%2==0,t<2],o=s.N.clone(this.min),l=s.N.clone(this.max);for(let r=0;r<a.length;r++)o[r]=a[r]?this.min[r]:this.center[r],l[r]=a[r]?this.center[r]:this.max[r];return l[2]=this.max[2],new ti(o,l)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,a=this.max;return[[t[0],t[1],t[2]],[a[0],t[1],t[2]],[a[0],a[1],t[2]],[t[0],a[1],t[2]],[t[0],t[1],a[2]],[a[0],t[1],a[2]],[a[0],a[1],a[2]],[t[0],a[1],a[2]]]}intersects(t){return this.intersectsAabb(t.bounds)?Kg(t,this.getCorners()):0}intersectsFlat(t){return this.intersectsAabb(t.bounds)?Kg(t,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(t,a){return a||this.intersects(t)?jg(t,this.getCorners()):0}intersectsPreciseFlat(t,a){return a||this.intersectsFlat(t)?jg(t,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(t){for(let a=0;a<3;++a)if(this.min[a]>t.max[a]||t.min[a]>this.max[a])return!1;return!0}intersectsAabbXY(t){return!(this.min[0]>t.max[0]||t.min[0]>this.max[0]||this.min[1]>t.max[1]||t.min[1]>this.max[1])}encapsulate(t){for(let a=0;a<3;a++)this.min[a]=Math.min(this.min[a],t.min[a]),this.max[a]=Math.max(this.max[a],t.max[a])}encapsulatePoint(t){for(let a=0;a<3;a++)this.min[a]=Math.min(this.min[a],t[a]),this.max[a]=Math.max(this.max[a],t[a])}closestPoint(t){return[Math.max(Math.min(this.max[0],t[0]),this.min[0]),Math.max(Math.min(this.max[1],t[1]),this.min[1]),Math.max(Math.min(this.max[2],t[2]),this.min[2])]}}me(ti,"Aabb");const YT=Ia([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Xc}=YT,GT=Ia([{name:"a_pos_3",components:3,type:"Int16"}]);var $g=Ia([{name:"a_pos",type:"Int16",components:2}]);function Kc(e){return e*V/vt}const VT=[new ti([rt,rt,rt],[yt,yt,yt]),new ti([rt,rt,rt],[0,0,yt]),new ti([0,rt,rt],[yt,0,yt]),new ti([rt,0,rt],[0,yt,yt]),new ti([0,0,rt],[yt,yt,yt])];function Zg(e,t,a,o=!0){const l=s.N.scale([],e._camera.position,e.worldSize),r=[t,a,1,1];s.a7.transformMat4(r,r,e.pixelMatrixInverse),s.a7.scale(r,r,1/r[3]);const u=s.N.sub([],r,l),m=s.N.normalize([],u),p=e.globeMatrix,h=[p[12],p[13],p[14]],y=s.N.sub([],h,l),x=s.N.length(y),v=s.N.normalize([],y),C=e.worldSize/(2*Math.PI),R=s.N.dot(v,m),N=Math.asin(C/x);if(N<Math.acos(R)){if(!o)return null;const ft=[],Ct=[];s.N.scale(ft,m,x/R),s.N.normalize(Ct,s.N.sub(Ct,ft,y)),s.N.normalize(m,s.N.add(m,y,s.N.scale(m,Ct,Math.tan(N)*x)))}const W=[];new $f(l,m).closestPointOnSphere(h,C,W);const D=s.N.normalize([],Q(p,0)),Y=s.N.normalize([],Q(p,1)),j=s.N.normalize([],Q(p,2)),K=s.N.dot(D,W),tt=s.N.dot(Y,W),J=s.N.dot(j,W),st=ni(Math.asin(-tt/C));let _t=ni(Math.atan2(K,J));_t=e.center.lng+function(ft,Ct){const Dt=(Ct-ft+180)%360-180;return Dt<-180?Dt+360:Dt}(e.center.lng,_t);const mt=Xe(_t),bt=Ve(Fe(st),0,1);return new ma(mt,bt)}class XT{constructor(t,a,o){this.a=s.N.sub([],t,o),this.b=s.N.sub([],a,o),this.center=o;const l=s.N.normalize([],this.a),r=s.N.normalize([],this.b);this.angle=Math.acos(s.N.dot(l,r))}}function Qf(e,t){if(e.angle===0)return null;let a;return a=e.a[t]===0?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),a<0||a>1?null:function(o,l,r,u){const m=Math.sin(r);return o*(Math.sin((1-u)*r)/m)+l*(Math.sin(u*r)/m)}(e.a[t],e.b[t],e.angle,Ve(a,0,1))+e.center[t]}function Kn(e){if(e.z<=1)return VT[e.z+2*e.y+e.x];const t=tp(jc(e));return ti.fromPoints(t)}function Ts(e,t,a){return s.N.scale(e,e,1-a),s.N.scaleAndAdd(e,e,t,a)}function Jg(e,t,a){for(const o of e)s.N.transformMat4(o,o,t),s.N.scale(o,o,a)}function Qg(e,t,a,o){const l=t/e.worldSize,r=e.globeMatrix;if(a.z<=1){const mt=Kn(a).getCorners();return Jg(mt,r,l),ti.fromPoints(mt)}const u=jc(a,o),m=tp(u,V+Kc(e._tileCoverLift));Jg(m,r,l);const p=Number.MAX_VALUE,h=[-p,-p,-p],y=[p,p,p];if(u.contains(e.center)){for(const ft of m)s.N.min(y,y,ft),s.N.max(h,h,ft);h[2]=0;const mt=e.point,bt=[mt.x*l,mt.y*l,0];return s.N.min(y,y,bt),s.N.max(h,h,bt),new ti(y,h)}if(e._tileCoverLift>0){for(const mt of m)s.N.min(y,y,mt),s.N.max(h,h,mt);return new ti(y,h)}const x=[r[12]*l,r[13]*l,r[14]*l],v=u.getCenter(),C=Ve(e.center.lat,-ta,ta),R=Ve(v.lat,-ta,ta),N=Xe(e.center.lng),W=Fe(C);let D=N-Xe(v.lng);const Y=W-Fe(R);D>.5?D-=1:D<-.5&&(D+=1);let j=0;if(Math.abs(D)>Math.abs(Y))j=D>=0?1:3;else{j=Y>=0?0:2;const mt=[r[4]*l,r[5]*l,r[6]*l],bt=-Math.sin(Oe(Y>=0?u.getSouth():u.getNorth()))*V;s.N.scaleAndAdd(x,x,mt,bt)}const K=m[j],tt=m[(j+1)%4],J=new XT(K,tt,x),st=[Qf(J,0)||K[0],Qf(J,1)||K[1],Qf(J,2)||K[2]],_t=Qs(e.zoom);if(_t>0){const mt=function({x:ft,y:Ct,z:Dt},Et,Wt,xt,wt){const Qt=1/(1<<Dt);let Bt=ft*Qt,pe=Bt+Qt,de=Ct*Qt,zt=de+Qt,Pe=0;const ve=(Bt+pe)/2-xt;return ve>.5?Pe=-1:ve<-.5&&(Pe=1),Bt=((Bt+Pe)*Et-(xt*=Et))*Wt+xt,pe=((pe+Pe)*Et-xt)*Wt+xt,de=(de*Et-(wt*=Et))*Wt+wt,zt=(zt*Et-wt)*Wt+wt,[[Bt,zt,0],[pe,zt,0],[pe,de,0],[Bt,de,0]]}(a,t,e._pixelsPerMercatorPixel,N,W);for(let ft=0;ft<m.length;ft++)Ts(m[ft],mt[ft],_t);const bt=s.N.add([],mt[j],mt[(j+1)%4]);s.N.scale(bt,bt,.5),Ts(st,bt,_t)}for(const mt of m)s.N.min(y,y,mt),s.N.max(h,h,mt);return y[2]=Math.min(K[2],tt[2]),s.N.min(y,y,st),s.N.max(h,h,st),new ti(y,h)}function jc({x:e,y:t,z:a},o=!1){const l=1/(1<<a),r=new ct(ke(e*l),t===(1<<a)-1&&o?-90:da((t+1)*l)),u=new ct(ke((e+1)*l),t===0&&o?90:da(t*l));return new Tt(r,u)}function tp(e,t=V){const a=Oe(e.getNorth()),o=Oe(e.getSouth()),l=Math.cos(a),r=Math.cos(o),u=Math.sin(a),m=Math.sin(o),p=e.getWest(),h=e.getEast();return[ut(r,m,p,t),ut(r,m,h,t),ut(l,u,h,t),ut(l,u,p,t)]}function _u(e,t,a,o){const l=1<<a.z,r=(e/se+a.x)/l;return It(da((t/se+a.y)/l),ke(r),o)}function qc({min:e,max:t}){return Z/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const ty=new Float64Array(16);function $c(e){const t=qc(e),a=s.a6.fromScaling(ty,[t,t,t]);return s.a6.translate(a,a,s.N.negate([],e.min))}function ep(e){const t=s.a6.fromTranslation(ty,e.min),a=1/qc(e);return s.a6.scale(t,t,[a,a,a])}function ap(e){const t=se/(2*Math.PI);return e/(2*Math.PI)/t}function ey(e,t){return se/(512*Math.pow(2,e))*qc(Kn(t))}function ay(e,t,a,o,l){const r=ap(a),u=[e,t,-a/(2*Math.PI)],m=s.a6.identity(new Float64Array(16));return s.a6.translate(m,m,u),s.a6.scale(m,m,[r,r,r]),s.a6.rotateX(m,m,Oe(-l)),s.a6.rotateY(m,m,Oe(-o)),m}function Qs(e){return Po($,z,e)}function iy(e,t){const a=It(t.lat,t.lng),o=function(r){const u=It(r._center.lat,r._center.lng),m=s.N.fromValues(0,1,0);let p=s.N.cross([],m,u);const h=s.a6.fromRotation([],-r.angle,u);p=s.N.transformMat4(p,p,h),s.a6.fromRotation(h,-r._pitch,p);const y=s.N.normalize([],u);return s.N.scale(y,y,Kc(r.cameraToCenterDistance/r.pixelsPerMeter)),s.N.transformMat4(y,y,h),s.N.add([],u,y)}(e),l=s.N.subtract([],o,a);return s.N.angle(l,a)}function ip(e,t){return iy(e,t)>Math.PI/2*1.01}const oy=Oe(85),KT=Math.cos(oy),jT=Math.sin(oy),qT=s.a6.create(),ny=e=>{const t=[];return e.paint.get("circle-pitch-alignment")==="map"&&t.push("PITCH_WITH_MAP"),e.paint.get("circle-pitch-scale")==="map"&&t.push("SCALE_WITH_MAP"),t};function sy(e,t,a,o,l,r,u,m,p){if(r&&e.queryGeometry.isAboveHorizon)return!1;r&&(p*=e.pixelToTileUnitsFactor);const h=e.tileID.canonical,y=a.projection.upVectorScale(h,a.center.lat,a.worldSize).metersToTile;for(const x of t)for(const v of x){const C=v.add(m),R=l&&a.elevation?a.elevation.exaggeration()*l.getElevationAt(C.x,C.y,!0):0,N=a.projection.projectTilePoint(C.x,C.y,h);if(R>0){const j=a.projection.upVector(h,C.x,C.y);N.x+=j[0]*y*R,N.y+=j[1]*y*R,N.z+=j[2]*y*R}const W=r?C:$T(N.x,N.y,N.z,o),D=r?e.tilespaceRays.map(j=>JT(j,R)):e.queryGeometry.screenGeometry,Y=s.a7.transformMat4([],[N.x,N.y,N.z,1],o);if(!u&&r?p*=Y[3]/a.cameraToCenterDistance:u&&!r&&(p*=a.cameraToCenterDistance/Y[3]),r){const j=da((v.y/se+h.y)/(1<<h.z));p/=a.projection.pixelsPerMeter(j,1)/ze(1,j)}if(Gn(D,W,p))return!0}return!1}function $T(e,t,a,o){const l=s.a7.transformMat4([],[e,t,a,1],o);return new jt(l[0]/l[3],l[1]/l[3])}const ly=s.N.fromValues(0,0,0),ZT=s.N.fromValues(0,0,1);function JT(e,t){const a=s.N.create();return ly[2]=t,e.intersectsPlane(ly,ZT,a),new jt(a[0],a[1])}class ry extends lo{}function dy(e,{width:t,height:a},o,l){if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==t*a*o)throw new RangeError("mismatched image size")}else l=new Uint8Array(t*a*o);return e.width=t,e.height=a,e.data=l,e}function _y(e,t,a){const{width:o,height:l}=t;o===e.width&&l===e.height||(op(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,o),height:Math.min(e.height,l)},a),e.width=o,e.height=l,e.data=t.data)}function op(e,t,a,o,l,r,u){if(l.width===0||l.height===0)return t;if(l.width>e.width||l.height>e.height||a.x>e.width-l.width||a.y>e.height-l.height)throw new RangeError("out of range source coordinates for image copy");if(l.width>t.width||l.height>t.height||o.x>t.width-l.width||o.y>t.height-l.height)throw new RangeError("out of range destination coordinates for image copy");const m=e.data,p=t.data,h=r===4&&u;for(let y=0;y<l.height;y++){const x=((a.y+y)*e.width+a.x)*r,v=((o.y+y)*t.width+o.x)*r;if(h)for(let C=0;C<l.width;C++){const R=x+C*r+3,N=v+C*r;p[N+0]=255,p[N+1]=255,p[N+2]=255,p[N+3]=m[R]}else for(let C=0;C<l.width*r;C++)p[v+C]=m[x+C]}return t}me(ry,"HeatmapBucket",{omit:["layers"]});class tl{constructor(t,a){dy(this,t,1,a)}resize(t){_y(this,new tl(t),1)}clone(){return new tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,o,l,r){op(t,a,o,l,r,1)}}class Yo{constructor(t,a){dy(this,t,4,a)}resize(t){_y(this,new Yo(t),4)}replace(t,a){a?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Yo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,o,l,r,u){op(t,a,o,l,r,4,u)}}class uy{constructor(t,a){this.width=t.width,this.height=t.height,this.data=a instanceof Uint8Array?new Float32Array(a.buffer):a}}me(tl,"AlphaImage"),me(Yo,"RGBAImage");const QT=new qa({visibility:new Zt(gt.layout_heatmap.visibility)});var t2={paint:new qa({"heatmap-radius":new Se(gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Se(gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ms(gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(gt.paint_heatmap["heatmap-opacity"])}),layout:QT};function uu(e){const t={},a=e.resolution||256,o=e.clips?e.clips.length:1,l=e.image||new Yo({width:a,height:o}),r=(u,m,p)=>{t[e.evaluationKey]=p;const h=e.expression.evaluate(t);h&&(l.data[u+m+0]=Math.floor(255*h.r/h.a),l.data[u+m+1]=Math.floor(255*h.g/h.a),l.data[u+m+2]=Math.floor(255*h.b/h.a),l.data[u+m+3]=Math.floor(255*h.a))};if(e.clips)for(let u=0,m=0;u<o;++u,m+=4*a)for(let p=0,h=0;p<a;p++,h+=4){const y=p/(a-1),{start:x,end:v}=e.clips[u];r(m,h,x*(1-y)+v*y)}else for(let u=0,m=0;u<a;u++,m+=4)r(0,m,u/(a-1));return l}const e2=new qa({visibility:new Zt(gt.layout_hillshade.visibility)});var a2={paint:new qa({"hillshade-illumination-direction":new Zt(gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zt(gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(gt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Zt(gt.paint_hillshade["hillshade-emissive-strength"])}),layout:e2};const i2=Ia([{name:"a_pos",components:2,type:"Int16"}],4),{members:o2}=i2;var np={exports:{}};function Zc(e,t,a){a=a||2;var o,l,r,u,m,p,h,y=t&&t.length,x=y?t[0]*a:e.length,v=cy(e,0,x,a,!0),C=[];if(!v||v.next===v.prev)return C;if(y&&(v=function(N,W,D,Y){var j,K,tt,J=[];for(j=0,K=W.length;j<K;j++)(tt=cy(N,W[j]*Y,j<K-1?W[j+1]*Y:N.length,Y,!1))===tt.next&&(tt.steiner=!0),J.push(c2(tt));for(J.sort(d2),j=0;j<J.length;j++)D=_2(J[j],D);return D}(e,t,v,a)),e.length>80*a){o=r=e[0],l=u=e[1];for(var R=a;R<x;R+=a)(m=e[R])<o&&(o=m),(p=e[R+1])<l&&(l=p),m>r&&(r=m),p>u&&(u=p);h=(h=Math.max(r-o,u-l))!==0?32767/h:0}return cu(v,C,a,o,l,h,0),C}function cy(e,t,a,o,l){var r,u;if(l===rp(e,t,a,o)>0)for(r=t;r<a;r+=o)u=py(r,e[r],e[r+1],u);else for(r=a-o;r>=t;r-=o)u=py(r,e[r],e[r+1],u);return u&&Jc(u,u.next)&&(fu(u),u=u.next),u}function rr(e,t){if(!e)return e;t||(t=e);var a,o=e;do if(a=!1,o.steiner||!Jc(o,o.next)&&Ti(o.prev,o,o.next)!==0)o=o.next;else{if(fu(o),(o=t=o.prev)===o.next)break;a=!0}while(a||o!==t);return t}function cu(e,t,a,o,l,r,u){if(e){!u&&r&&function(y,x,v,C){var R=y;do R.z===0&&(R.z=sp(R.x,R.y,x,v,C)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==y);R.prevZ.nextZ=null,R.prevZ=null,function(N){var W,D,Y,j,K,tt,J,st,_t=1;do{for(D=N,N=null,K=null,tt=0;D;){for(tt++,Y=D,J=0,W=0;W<_t&&(J++,Y=Y.nextZ);W++);for(st=_t;J>0||st>0&&Y;)J!==0&&(st===0||!Y||D.z<=Y.z)?(j=D,D=D.nextZ,J--):(j=Y,Y=Y.nextZ,st--),K?K.nextZ=j:N=j,j.prevZ=K,K=j;D=Y}K.nextZ=null,_t*=2}while(tt>1)}(R)}(e,o,l,r);for(var m,p,h=e;e.prev!==e.next;)if(m=e.prev,p=e.next,r?s2(e,o,l,r):n2(e))t.push(m.i/a|0),t.push(e.i/a|0),t.push(p.i/a|0),fu(e),e=p.next,h=p.next;else if((e=p)===h){u?u===1?cu(e=l2(rr(e),t,a),t,a,o,l,r,2):u===2&&r2(e,t,a,o,l,r):cu(rr(e),t,a,o,l,r,1);break}}}function n2(e){var t=e.prev,a=e,o=e.next;if(Ti(t,a,o)>=0)return!1;for(var l=t.x,r=a.x,u=o.x,m=t.y,p=a.y,h=o.y,y=l<r?l<u?l:u:r<u?r:u,x=m<p?m<h?m:h:p<h?p:h,v=l>r?l>u?l:u:r>u?r:u,C=m>p?m>h?m:h:p>h?p:h,R=o.next;R!==t;){if(R.x>=y&&R.x<=v&&R.y>=x&&R.y<=C&&id(l,m,r,p,u,h,R.x,R.y)&&Ti(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function s2(e,t,a,o){var l=e.prev,r=e,u=e.next;if(Ti(l,r,u)>=0)return!1;for(var m=l.x,p=r.x,h=u.x,y=l.y,x=r.y,v=u.y,C=m<p?m<h?m:h:p<h?p:h,R=y<x?y<v?y:v:x<v?x:v,N=m>p?m>h?m:h:p>h?p:h,W=y>x?y>v?y:v:x>v?x:v,D=sp(C,R,t,a,o),Y=sp(N,W,t,a,o),j=e.prevZ,K=e.nextZ;j&&j.z>=D&&K&&K.z<=Y;){if(j.x>=C&&j.x<=N&&j.y>=R&&j.y<=W&&j!==l&&j!==u&&id(m,y,p,x,h,v,j.x,j.y)&&Ti(j.prev,j,j.next)>=0||(j=j.prevZ,K.x>=C&&K.x<=N&&K.y>=R&&K.y<=W&&K!==l&&K!==u&&id(m,y,p,x,h,v,K.x,K.y)&&Ti(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;j&&j.z>=D;){if(j.x>=C&&j.x<=N&&j.y>=R&&j.y<=W&&j!==l&&j!==u&&id(m,y,p,x,h,v,j.x,j.y)&&Ti(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;K&&K.z<=Y;){if(K.x>=C&&K.x<=N&&K.y>=R&&K.y<=W&&K!==l&&K!==u&&id(m,y,p,x,h,v,K.x,K.y)&&Ti(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function l2(e,t,a){var o=e;do{var l=o.prev,r=o.next.next;!Jc(l,r)&&my(l,o,o.next,r)&&mu(l,r)&&mu(r,l)&&(t.push(l.i/a|0),t.push(o.i/a|0),t.push(r.i/a|0),fu(o),fu(o.next),o=e=r),o=o.next}while(o!==e);return rr(o)}function r2(e,t,a,o,l,r){var u=e;do{for(var m=u.next.next;m!==u.prev;){if(u.i!==m.i&&m2(u,m)){var p=fy(u,m);return u=rr(u,u.next),p=rr(p,p.next),cu(u,t,a,o,l,r,0),void cu(p,t,a,o,l,r,0)}m=m.next}u=u.next}while(u!==e)}function d2(e,t){return e.x-t.x}function _2(e,t){var a=function(l,r){var u,m=r,p=l.x,h=l.y,y=-1/0;do{if(h<=m.y&&h>=m.next.y&&m.next.y!==m.y){var x=m.x+(h-m.y)*(m.next.x-m.x)/(m.next.y-m.y);if(x<=p&&x>y&&(y=x,u=m.x<m.next.x?m:m.next,x===p))return u}m=m.next}while(m!==r);if(!u)return null;var v,C=u,R=u.x,N=u.y,W=1/0;m=u;do p>=m.x&&m.x>=R&&p!==m.x&&id(h<N?p:y,h,R,N,h<N?y:p,h,m.x,m.y)&&(v=Math.abs(h-m.y)/(p-m.x),mu(m,l)&&(v<W||v===W&&(m.x>u.x||m.x===u.x&&u2(u,m)))&&(u=m,W=v)),m=m.next;while(m!==C);return u}(e,t);if(!a)return t;var o=fy(a,e);return rr(o,o.next),rr(a,a.next)}function u2(e,t){return Ti(e.prev,e,t.prev)<0&&Ti(t.next,e,e.next)<0}function sp(e,t,a,o,l){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-a)*l|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-o)*l|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function c2(e){var t=e,a=e;do(t.x<a.x||t.x===a.x&&t.y<a.y)&&(a=t),t=t.next;while(t!==e);return a}function id(e,t,a,o,l,r,u,m){return(l-u)*(t-m)>=(e-u)*(r-m)&&(e-u)*(o-m)>=(a-u)*(t-m)&&(a-u)*(r-m)>=(l-u)*(o-m)}function m2(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(a,o){var l=a;do{if(l.i!==a.i&&l.next.i!==a.i&&l.i!==o.i&&l.next.i!==o.i&&my(l,l.next,a,o))return!0;l=l.next}while(l!==a);return!1}(e,t)&&(mu(e,t)&&mu(t,e)&&function(a,o){var l=a,r=!1,u=(a.x+o.x)/2,m=(a.y+o.y)/2;do l.y>m!=l.next.y>m&&l.next.y!==l.y&&u<(l.next.x-l.x)*(m-l.y)/(l.next.y-l.y)+l.x&&(r=!r),l=l.next;while(l!==a);return r}(e,t)&&(Ti(e.prev,e,t.prev)||Ti(e,t.prev,t))||Jc(e,t)&&Ti(e.prev,e,e.next)>0&&Ti(t.prev,t,t.next)>0)}function Ti(e,t,a){return(t.y-e.y)*(a.x-t.x)-(t.x-e.x)*(a.y-t.y)}function Jc(e,t){return e.x===t.x&&e.y===t.y}function my(e,t,a,o){var l=tm(Ti(e,t,a)),r=tm(Ti(e,t,o)),u=tm(Ti(a,o,e)),m=tm(Ti(a,o,t));return l!==r&&u!==m||!(l!==0||!Qc(e,a,t))||!(r!==0||!Qc(e,o,t))||!(u!==0||!Qc(a,e,o))||!(m!==0||!Qc(a,t,o))}function Qc(e,t,a){return t.x<=Math.max(e.x,a.x)&&t.x>=Math.min(e.x,a.x)&&t.y<=Math.max(e.y,a.y)&&t.y>=Math.min(e.y,a.y)}function tm(e){return e>0?1:e<0?-1:0}function mu(e,t){return Ti(e.prev,e,e.next)<0?Ti(e,t,e.next)>=0&&Ti(e,e.prev,t)>=0:Ti(e,t,e.prev)<0||Ti(e,e.next,t)<0}function fy(e,t){var a=new lp(e.i,e.x,e.y),o=new lp(t.i,t.x,t.y),l=e.next,r=t.prev;return e.next=t,t.prev=e,a.next=l,l.prev=a,o.next=a,a.prev=o,r.next=o,o.prev=r,o}function py(e,t,a,o){var l=new lp(e,t,a);return o?(l.next=o.next,l.prev=o,o.next.prev=l,o.next=l):(l.prev=l,l.next=l),l}function fu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function lp(e,t,a){this.i=e,this.x=t,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rp(e,t,a,o){for(var l=0,r=t,u=a-o;r<a;r+=o)l+=(e[u]-e[r])*(e[r+1]+e[u+1]),u=r;return l}np.exports=Zc,np.exports.default=Zc,Zc.deviation=function(e,t,a,o){var l=t&&t.length,r=Math.abs(rp(e,0,l?t[0]*a:e.length,a));if(l)for(var u=0,m=t.length;u<m;u++)r-=Math.abs(rp(e,t[u]*a,u<m-1?t[u+1]*a:e.length,a));var p=0;for(u=0;u<o.length;u+=3){var h=o[u]*a,y=o[u+1]*a,x=o[u+2]*a;p+=Math.abs((e[h]-e[x])*(e[y+1]-e[h+1])-(e[h]-e[y])*(e[x+1]-e[h+1]))}return r===0&&p===0?0:Math.abs((p-r)/r)},Zc.flatten=function(e){for(var t=e[0][0].length,a={vertices:[],holes:[],dimensions:t},o=0,l=0;l<e.length;l++){for(var r=0;r<e[l].length;r++)for(var u=0;u<t;u++)a.vertices.push(e[l][r][u]);l>0&&a.holes.push(o+=e[l-1].length)}return a};var em=be(np.exports);function dp(e,t){const a=e.length;if(a<=1)return[e];const o=[];let l,r;for(let u=0;u<a;u++){const m=Jn(e[u]);m!==0&&(e[u].area=Math.abs(m),r===void 0&&(r=m<0),r===m<0?(l&&o.push(l),l=[e[u]]):l.push(e[u]))}if(l&&o.push(l),t>1)for(let u=0;u<o.length;u++)o[u].length<=t||(uf(o[u],t,1,o[u].length-1,f2),o[u]=o[u].slice(0,t));return o}function f2(e,t){return t.area-e.area}function _p(e,t,a){const o=a.patternDependencies;let l=!1;for(const r of t){const u=r.paint.get(`${e}-pattern`);u.isConstant()||(l=!0);const m=u.constantOr(null);m&&(l=!0,o[m]=!0)}return l}function up(e,t,a,o,l){const r=l.patternDependencies;for(const u of t){const m=u.paint.get(`${e}-pattern`).value;if(m.kind!=="constant"){let p=m.evaluate({zoom:o},a,{},l.availableImages);p=p&&p.name?p.name:p,r[p]=!0,a.patterns[u.id]=p}}return a}class cp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ko,this.indexArray=new Ii,this.indexArray2=new qo,this.programConfigurations=new U(t.layers,t.zoom),this.segments=new ai,this.segments2=new ai,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=t.projection}populate(t,a,o,l){this.hasPattern=_p("fill",this.layers,a);const r=this.layers[0].layout.get("fill-sort-key"),u=[];for(const{feature:m,id:p,index:h,sourceLayerIndex:y}of t){const x=this.layers[0]._featureFilter.needGeometry,v=yi(m,x);if(!this.layers[0]._featureFilter.filter(new ja(this.zoom),v,o))continue;const C=r?r.evaluate(v,{},o,a.availableImages):void 0,R={id:p,properties:m.properties,type:m.type,sourceLayerIndex:y,index:h,geometry:x?v.geometry:Ci(m,o,l),patterns:{},sortKey:C};u.push(R)}r&&u.sort((m,p)=>m.sortKey-p.sortKey);for(const m of u){const{geometry:p,index:h,sourceLayerIndex:y}=m;if(this.hasPattern){const x=up("fill",this.layers,m,this.zoom,a);this.patternFeatures.push(x)}else this.addFeature(m,p,h,o,{},a.availableImages,a.brightness);a.featureIndex.insert(t[h].feature,p,h,y,this.index)}}update(t,a,o,l,r){const u=Object.keys(t).length!==0;u&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(t,a,u?this.stateDependentLayers:this.layers,o,l,r)}addFeatures(t,a,o,l,r,u){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,a,o,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o2),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,a,o,l,r,u=[],m){for(const p of dp(a,500)){let h=0;for(const N of p)h+=N.length;const y=this.segments.prepareSegment(h,this.layoutVertexArray,this.indexArray),x=y.vertexLength,v=[],C=[];for(const N of p){if(N.length===0)continue;N!==p[0]&&C.push(v.length/2);const W=this.segments2.prepareSegment(N.length,this.layoutVertexArray,this.indexArray2),D=W.vertexLength;this.layoutVertexArray.emplaceBack(N[0].x,N[0].y),this.indexArray2.emplaceBack(D+N.length-1,D),v.push(N[0].x),v.push(N[0].y);for(let Y=1;Y<N.length;Y++)this.layoutVertexArray.emplaceBack(N[Y].x,N[Y].y),this.indexArray2.emplaceBack(D+Y-1,D+Y),v.push(N[Y].x),v.push(N[Y].y);W.vertexLength+=N.length,W.primitiveLength+=N.length}const R=em(v,C);for(let N=0;N<R.length;N+=3)this.indexArray.emplaceBack(x+R[N],x+R[N+1],x+R[N+2]);y.vertexLength+=h,y.primitiveLength+=R.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,r,u,l,m)}}me(cp,"FillBucket",{omit:["layers","patternFeatures"]});const p2=new qa({"fill-sort-key":new Se(gt.layout_fill["fill-sort-key"]),visibility:new Zt(gt.layout_fill.visibility)});var h2={paint:new qa({"fill-antialias":new Zt(gt.paint_fill["fill-antialias"]),"fill-opacity":new Se(gt.paint_fill["fill-opacity"]),"fill-color":new Se(gt.paint_fill["fill-color"]),"fill-outline-color":new Se(gt.paint_fill["fill-outline-color"]),"fill-translate":new Zt(gt.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Se(gt.paint_fill["fill-pattern"]),"fill-emissive-strength":new Zt(gt.paint_fill["fill-emissive-strength"])}),layout:p2};const g2=Ia([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),y2=Ia([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),b2=Ia([{name:"a_centroid_pos",components:2,type:"Uint16"}]),T2=Ia([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),x2=Ia([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:A2}=g2;var am={},v2=Oa,hy=od;function od(e,t,a,o,l){this.properties={},this.extent=a,this.type=0,this._pbf=e,this._geometry=-1,this._keys=o,this._values=l,e.readFields(E2,this,t)}function E2(e,t,a){e==1?t.id=a.readVarint():e==2?function(o,l){for(var r=o.readVarint()+o.pos;o.pos<r;){var u=l._keys[o.readVarint()],m=l._values[o.readVarint()];l.properties[u]=m}}(a,t):e==3?t.type=a.readVarint():e==4&&(t._geometry=a.pos)}function I2(e){for(var t,a,o=0,l=0,r=e.length,u=r-1;l<r;u=l++)o+=((a=e[u]).x-(t=e[l]).x)*(t.y+a.y);return o}od.types=["Unknown","Point","LineString","Polygon"],od.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,a=e.readVarint()+e.pos,o=1,l=0,r=0,u=0,m=[];e.pos<a;){if(l<=0){var p=e.readVarint();o=7&p,l=p>>3}if(l--,o===1||o===2)r+=e.readSVarint(),u+=e.readSVarint(),o===1&&(t&&m.push(t),t=[]),t.push(new v2(r,u));else{if(o!==7)throw new Error("unknown command "+o);t&&t.push(t[0].clone())}}return t&&m.push(t),m},od.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,a=1,o=0,l=0,r=0,u=1/0,m=-1/0,p=1/0,h=-1/0;e.pos<t;){if(o<=0){var y=e.readVarint();a=7&y,o=y>>3}if(o--,a===1||a===2)(l+=e.readSVarint())<u&&(u=l),l>m&&(m=l),(r+=e.readSVarint())<p&&(p=r),r>h&&(h=r);else if(a!==7)throw new Error("unknown command "+a)}return[u,p,m,h]},od.prototype.toGeoJSON=function(e,t,a){var o,l,r=this.extent*Math.pow(2,a),u=this.extent*e,m=this.extent*t,p=this.loadGeometry(),h=od.types[this.type];function y(C){for(var R=0;R<C.length;R++){var N=C[R];C[R]=[360*(N.x+u)/r-180,360/Math.PI*Math.atan(Math.exp((180-360*(N.y+m)/r)*Math.PI/180))-90]}}switch(this.type){case 1:var x=[];for(o=0;o<p.length;o++)x[o]=p[o][0];y(p=x);break;case 2:for(o=0;o<p.length;o++)y(p[o]);break;case 3:for(p=function(C){var R=C.length;if(R<=1)return[C];for(var N,W,D=[],Y=0;Y<R;Y++){var j=I2(C[Y]);j!==0&&(W===void 0&&(W=j<0),W===j<0?(N&&D.push(N),N=[C[Y]]):N.push(C[Y]))}return N&&D.push(N),D}(p),o=0;o<p.length;o++)for(l=0;l<p[o].length;l++)y(p[o][l])}p.length===1?p=p[0]:h="Multi"+h;var v={type:"Feature",geometry:{type:h,coordinates:p},properties:this.properties};return"id"in this&&(v.id=this.id),v};var O2=hy,gy=yy;function yy(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(C2,this,t),this.length=this._features.length}function C2(e,t,a){e===15?t.version=a.readVarint():e===1?t.name=a.readString():e===5?t.extent=a.readVarint():e===2?t._features.push(a.pos):e===3?t._keys.push(a.readString()):e===4&&t._values.push(function(o){for(var l=null,r=o.readVarint()+o.pos;o.pos<r;){var u=o.readVarint()>>3;l=u===1?o.readString():u===2?o.readFloat():u===3?o.readDouble():u===4?o.readVarint64():u===5?o.readVarint():u===6?o.readSVarint():u===7?o.readBoolean():null}return l}(a))}yy.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new O2(this._pbf,t,this.extent,this._keys,this._values)};var S2=gy;function R2(e,t,a){if(e===3){var o=new S2(a,a.readVarint()+a.pos);o.length&&(t[o.name]=o)}}var mp=am.VectorTile=function(e,t){this.layers=e.readFields(R2,{},t)},im=am.VectorTileFeature=hy;function om(e,t,a,o){const l=[],r=o===0?(u,m,p,h,y,x)=>{u.push(new jt(x,p+(x-m)/(h-m)*(y-p)))}:(u,m,p,h,y,x)=>{u.push(new jt(m+(x-p)/(y-p)*(h-m),x))};for(const u of e){const m=[];for(const p of u){if(p.length<=2)continue;const h=[];for(let v=0;v<p.length-1;v++){const C=p[v].x,R=p[v].y,N=p[v+1].x,W=p[v+1].y,D=o===0?C:R,Y=o===0?N:W;D<t?Y>t&&r(h,C,R,N,W,t):D>a?Y<a&&r(h,C,R,N,W,a):h.push(p[v]),Y<t&&D>=t&&r(h,C,R,N,W,t),Y>a&&D<=a&&r(h,C,R,N,W,a)}let y=p[p.length-1];const x=o===0?y.x:y.y;x>=t&&x<=a&&h.push(y),h.length&&(y=h[h.length-1],h[0].x===y.x&&h[0].y===y.y||h.push(h[0]),m.push(h))}m.length&&l.push(m)}return l}function nm(e,t){return e.x-t.x||e.y-t.y}function by(e,t){return nm(e.min,t.min)===0&&nm(e.max,t.max)===0}function Ty(e,t){return!(e.min.x>t.max.x||e.max.x<t.min.x||e.min.y>t.max.y||e.max.y<t.min.y)}function xy(e,t,a){const o=1/se,l=1/(1<<a.canonical.z),r=(t.x*o+a.canonical.x)*l+a.wrap,u=(t.y*o+a.canonical.y)*l;return{min:new jt((e.x*o+a.canonical.x)*l+a.wrap,(e.y*o+a.canonical.y)*l),max:new jt(r,u)}}function N2(e,t,a){const o=1<<a.canonical.z,l=((t.x-a.wrap)*o-a.canonical.x)*se,r=(t.y*o-a.canonical.y)*se;return{min:new jt(((e.x-a.wrap)*o-a.canonical.x)*se,(e.y*o-a.canonical.y)*se),max:new jt(l,r)}}function Ay(e,t,a,o,l,r,u){const m=e.indices,p=e.vertices,h=[];for(let y=o;y<o+l;y+=3){const x=t[a[y+0]+r],v=t[a[y+1]+r],C=t[a[y+2]+r],R=Math.min(x.x,v.x,C.x),N=Math.max(x.x,v.x,C.x),W=Math.min(x.y,v.y,C.y),D=Math.max(x.y,v.y,C.y);h.length=0,e.grid.query(new jt(R,W),new jt(N,D),h);for(let Y=0;Y<h.length;Y++){const j=h[Y];if(Wf(p[m[3*j+0]],p[m[3*j+1]],p[m[3*j+2]],x,v,C,u))return!0}}return!1}function vy(e,t,a,o){if(!e||!a)return!1;let l=e.vertices;if(!t.canonical.equals(o.canonical)||t.wrap!==o.wrap){if(a.vertices.length<e.vertices.length)return vy(a,o,e,t);const r=t.canonical,u=o.canonical,m=Math.pow(2,u.z-r.z);l=e.vertices.map(p=>new jt(p.x*r.x*se*m-u.x*se,p.y*r.y*se*m-u.y*se))}return Ay(a,l,e.indices,0,e.indices.length,0,0)}am.VectorTileLayer=gy;class Ey{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,a){const o=this.toIdx(t,a);return{min:this.minimums[o],max:this.maximums[o]}}isLeaf(t,a){return this.leaves[this.toIdx(t,a)]}toIdx(t,a){return a*this.size+t}}function Iy(e,t,a,o){let l=0,r=Number.MAX_VALUE;for(let u=0;u<3;u++)if(Math.abs(o[u])<1e-15){if(a[u]<e[u]||a[u]>t[u])return null}else{const m=1/o[u];let p=(e[u]-a[u])*m,h=(t[u]-a[u])*m;if(p>h){const y=p;p=h,h=y}if(p>l&&(l=p),h<r&&(r=h),l>r)return null}return l}function Oy(e,t,a,o,l,r,u,m,p,h,y){const x=o-e,v=l-t,C=r-a,R=u-e,N=m-t,W=p-a,D=y[1]*W-y[2]*N,Y=y[2]*R-y[0]*W,j=y[0]*N-y[1]*R,K=x*D+v*Y+C*j;if(Math.abs(K)<1e-15)return null;const tt=1/K,J=h[0]-e,st=h[1]-t,_t=h[2]-a,mt=(J*D+st*Y+_t*j)*tt;if(mt<0||mt>1)return null;const bt=st*C-_t*v,ft=_t*x-J*C,Ct=J*v-st*x,Dt=(y[0]*bt+y[1]*ft+y[2]*Ct)*tt;return Dt<0||mt+Dt>1?null:(R*bt+N*ft+W*Ct)*tt}function Cy(e,t,a){return(e-t)/(a-t)}function Sy(e,t,a,o,l,r,u,m,p){const h=1<<a,y=r-o,x=u-l,v=(e+1)/h*y+o,C=(t+0)/h*x+l,R=(t+1)/h*x+l;m[0]=(e+0)/h*y+o,m[1]=C,p[0]=v,p[1]=R}class Ry{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(r){const u=Math.ceil(Math.log2(r.dim/8)),m=[];let p=Math.ceil(Math.pow(2,u));const h=1/p,y=(C,R,N,W,D)=>{const Y=W?1:0,j=(C+1)*N-Y,K=R*N,tt=(R+1)*N-Y;D[0]=C*N,D[1]=K,D[2]=j,D[3]=tt};let x=new Ey(p);const v=[];for(let C=0;C<p*p;C++){y(C%p,Math.floor(C/p),h,!1,v);const R=el(v[0],v[1],r),N=el(v[2],v[1],r),W=el(v[2],v[3],r),D=el(v[0],v[3],r);x.minimums.push(Math.min(R,N,W,D)),x.maximums.push(Math.max(R,N,W,D)),x.leaves.push(1)}for(m.push(x),p/=2;p>=1;p/=2){const C=m[m.length-1];x=new Ey(p);for(let R=0;R<p*p;R++){y(R%p,Math.floor(R/p),2,!0,v);const N=C.getElevation(v[0],v[1]),W=C.getElevation(v[2],v[1]),D=C.getElevation(v[2],v[3]),Y=C.getElevation(v[0],v[3]),j=C.isLeaf(v[0],v[1]),K=C.isLeaf(v[2],v[1]),tt=C.isLeaf(v[2],v[3]),J=C.isLeaf(v[0],v[3]),st=Math.min(N.min,W.min,D.min,Y.min),_t=Math.max(N.max,W.max,D.max,Y.max),mt=j&&K&&tt&&J;x.maximums.push(_t),x.minimums.push(st),x.leaves.push(_t-st<=5&&mt?1:0)}m.push(x)}return m}(this.dem),o=a.length-1,l=a[o];this._addNode(l.minimums[0],l.maximums[0],l.leaves[0]),this._construct(a,0,0,o,0)}raycastRoot(t,a,o,l,r,u,m=1){return Iy([t,a,-100],[o,l,this.maximums[0]*m],r,u)}raycast(t,a,o,l,r,u,m=1){if(!this.nodeCount)return null;const p=this.raycastRoot(t,a,o,l,r,u,m);if(p==null)return null;const h=[],y=[],x=[],v=[],C=[{idx:0,t:p,nodex:0,nodey:0,depth:0}];for(;C.length>0;){const{idx:R,t:N,nodex:W,nodey:D,depth:Y}=C.pop();if(this.leaves[R]){Sy(W,D,Y,t,a,o,l,x,v);const K=1<<Y,tt=(W+0)/K,J=(W+1)/K,st=(D+0)/K,_t=(D+1)/K,mt=el(tt,st,this.dem)*m,bt=el(J,st,this.dem)*m,ft=el(J,_t,this.dem)*m,Ct=el(tt,_t,this.dem)*m,Dt=Oy(x[0],x[1],mt,v[0],x[1],bt,v[0],v[1],ft,r,u),Et=Oy(v[0],v[1],ft,x[0],v[1],Ct,x[0],x[1],mt,r,u),Wt=Math.min(Dt!==null?Dt:Number.MAX_VALUE,Et!==null?Et:Number.MAX_VALUE);if(Wt!==Number.MAX_VALUE)return Wt;{const xt=s.N.scaleAndAdd([],r,u,N);if(Ny(mt,bt,Ct,ft,Cy(xt[0],x[0],v[0]),Cy(xt[1],x[1],v[1]))>=xt[2])return N}continue}let j=0;for(let K=0;K<this._siblingOffset.length;K++){Sy((W<<1)+this._siblingOffset[K][0],(D<<1)+this._siblingOffset[K][1],Y+1,t,a,o,l,x,v),x[2]=-100,v[2]=this.maximums[this.childOffsets[R]+K]*m;const tt=Iy(x,v,r,u);if(tt!=null){const J=tt;h[K]=J;let st=!1;for(let _t=0;_t<j&&!st;_t++)J>=h[y[_t]]&&(y.splice(_t,0,K),st=!0);st||(y[j]=K),j++}}for(let K=0;K<j;K++){const tt=y[K];C.push({idx:this.childOffsets[R]+tt,t:h[tt],nodex:(W<<1)+this._siblingOffset[tt][0],nodey:(D<<1)+this._siblingOffset[tt][1],depth:Y+1})}}return null}_addNode(t,a,o){return this.minimums.push(t),this.maximums.push(a),this.leaves.push(o),this.childOffsets.push(0),this.nodeCount++}_construct(t,a,o,l,r){if(t[l].isLeaf(a,o)===1)return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const u=l-1,m=t[u];let p=0,h=0;for(let y=0;y<this._siblingOffset.length;y++){const x=2*a+this._siblingOffset[y][0],v=2*o+this._siblingOffset[y][1],C=m.getElevation(x,v),R=m.isLeaf(x,v),N=this._addNode(C.min,C.max,R);R&&(p|=1<<y),h||(h=N)}for(let y=0;y<this._siblingOffset.length;y++)p&1<<y||this._construct(t,2*a+this._siblingOffset[y][0],2*o+this._siblingOffset[y][1],u,h+y)}}function Ny(e,t,a,o,l,r){return sa(sa(e,a,r),sa(t,o,r),l)}function el(e,t,a){const o=a.dim,l=Ve(e*o-.5,0,o-1),r=Ve(t*o-.5,0,o-1),u=Math.floor(l),m=Math.floor(r),p=Math.min(u+1,o-1),h=Math.min(m+1,o-1);return Ny(a.get(u,m),a.get(p,m),a.get(u,h),a.get(p,h),l-u,r-m)}const L2={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function P2(e,t,a){return(256*e*256+256*t+a)/10-1e4}function w2(e,t,a){return 256*e+t+a/256-32768}class sm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,a,o,l=!1){if(this.uid=t,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(o&&o!=="mapbox"&&o!=="terrarium")return ei(`"${o}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const r=this.dim=a.height-2,u=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.floatView=new Float32Array(a.data.buffer),this.borderReady=l,this._modifiedForSources={},!l){for(let p=0;p<r;p++)u[this._idx(-1,p)]=u[this._idx(0,p)],u[this._idx(r,p)]=u[this._idx(r-1,p)],u[this._idx(p,-1)]=u[this._idx(p,0)],u[this._idx(p,r)]=u[this._idx(p,r-1)];u[this._idx(-1,-1)]=u[this._idx(0,0)],u[this._idx(r,-1)]=u[this._idx(r-1,0)],u[this._idx(-1,r)]=u[this._idx(0,r-1)],u[this._idx(r,r)]=u[this._idx(r-1,r-1)]}const m=o==="terrarium"?w2:P2;for(let p=0;p<u.length;++p){const h=4*p;this.floatView[p]=m(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}this._timestamp=Gt.now()}_buildQuadTree(){this._tree=new Ry(this)}get(t,a,o=!1){o&&(t=Ve(t,-1,this.dim),a=Ve(a,-1,this.dim));const l=this._idx(t,a);return this.floatView[l]}set(t,a,o){const l=this._idx(t,a),r=this.floatView[l];return this.floatView[l]=o,o-r}static getUnpackVector(t){return L2[t]}_idx(t,a){if(t<-1||t>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(t+1)}static pack(t,a){const o=[0,0,0,0],l=sm.getUnpackVector(a);let r=Math.floor((t+l[3])/l[2]);return o[2]=r%256,r=Math.floor(r/256),o[1]=r%256,r=Math.floor(r/256),o[0]=r,o}getPixels(){return new uy({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,a,o){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let l=a*this.dim,r=a*this.dim+this.dim,u=o*this.dim,m=o*this.dim+this.dim;switch(a){case-1:l=r-1;break;case 1:r=l+1}switch(o){case-1:u=m-1;break;case 1:m=u+1}const p=-a*this.dim,h=-o*this.dim;for(let y=u;y<m;y++)for(let x=l;x<r;x++){const v=4*this._idx(x,y),C=4*this._idx(x+p,y+h);this.pixels[v+0]=t.pixels[C+0],this.pixels[v+1]=t.pixels[C+1],this.pixels[v+2]=t.pixels[C+2],this.pixels[v+3]=t.pixels[C+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}me(sm,"DEMData"),me(Ry,"DemMinMaxQuadTree",{omit:["dem"]});class nd{constructor(t,a,o){this._demTile=t,this._dem=this._demTile.dem,this._scale=a,this._offset=o}static create(t,a,o){const l=o||t.findDEMTileFor(a);if(!l||!l.dem)return;const r=l.dem,u=l.tileID,m=1<<a.canonical.z-u.canonical.z;return new nd(l,r.dim/se/m,[(a.canonical.x/m-u.canonical.x)*r.dim,(a.canonical.y/m-u.canonical.y)*r.dim])}tileCoordToPixel(t,a){const o=a*this._scale+this._offset[1],l=Math.floor(t*this._scale+this._offset[0]),r=Math.floor(o);return new jt(l,r)}getElevationAt(t,a,o,l){const r=t*this._scale+this._offset[0],u=a*this._scale+this._offset[1],m=Math.floor(r),p=Math.floor(u),h=this._dem;return l=!!l,o?sa(sa(h.get(m,p,l),h.get(m,p+1,l),u-p),sa(h.get(m+1,p,l),h.get(m+1,p+1,l),u-p),r-m):h.get(m,p,l)}getElevationAtPixel(t,a,o){return this._dem.get(t,a,!!o)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*ze(1,t)*this._dem.stride}}const W2=im.types,M2=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],D2=["fill-extrusion-flood-light-ground-radius"],F2=Math.pow(2,13),B2=Math.pow(2,15)-1,Ly=new jt(0,1),al=2147483648;function pu(e,t,a,o,l,r,u,m){e.emplaceBack((t<<1)+u,(a<<1)+r,(Math.floor(o*F2)<<1)+l,Math.round(m))}function lm(e,t,a,o,l,r){e.emplaceBack(t.x,t.y,(a.x<<1)+o,(a.y<<1)+l,r)}function hu(e,t,a){e.emplaceBack(t.x,t.y,t.z,a[0]*16384,a[1]*16384,a[2]*16384)}class Py{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class wy{constructor(){this.centroidXY=new jt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new jt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new jt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new jt(this.max.x-this.min.x,this.max.y-this.min.y)}}class Wy{constructor(){this.acc=new jt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(t,a){t.min.x===Number.MAX_VALUE&&(t.min.x=t.max.x=a.x,t.min.y=t.max.y=a.y)}appendEdge(t,a,o){this.accCount++,this.acc._add(a);let l=!!this.borders;a.x<t.min.x?(t.min.x=a.x,l=!0):a.x>t.max.x&&(t.max.x=a.x,l=!0),a.y<t.min.y?(t.min.y=a.y,l=!0):a.y>t.max.y&&(t.max.y=a.y,l=!0),((a.x===0||a.x===se)&&a.x===o.x)!=((a.y===0||a.y===se)&&a.y===o.y)&&this.processBorderOverlap(a,o),l&&this.checkBorderIntersection(a,o)}checkBorderIntersection(t,a){a.x<0!=t.x<0&&this.addBorderIntersection(0,sa(a.y,t.y,(0-a.x)/(t.x-a.x))),a.x>se!=t.x>se&&this.addBorderIntersection(1,sa(a.y,t.y,(se-a.x)/(t.x-a.x))),a.y<0!=t.y<0&&this.addBorderIntersection(2,sa(a.x,t.x,(0-a.y)/(t.y-a.y))),a.y>se!=t.y>se&&this.addBorderIntersection(3,sa(a.x,t.x,(se-a.y)/(t.y-a.y)))}addBorderIntersection(t,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const o=this.borders[t];a<o[0]&&(o[0]=a),a>o[1]&&(o[1]=a)}processBorderOverlap(t,a){if(t.x===a.x){if(t.y===a.y)return;const o=t.x===0?0:1;this.addBorderIntersection(o,a.y),this.addBorderIntersection(o,t.y)}else{const o=t.y===0?2:3;this.addBorderIntersection(o,a.x),this.addBorderIntersection(o,t.x)}}centroid(){return this.accCount===0?new jt(0,0):new jt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((t,a)=>t+ +(a[0]!==Number.MAX_VALUE),0):0}}function My(e,t){const a=e.add(t)._unit(),o=Ve(e.x*a.x+e.y*a.y,-1,1);var l,r,u;return l=Math.acos(o),Math.min(4,Math.max(-4,Math.tan(l)))/4*B2*((r=e).x*(u=t).y-r.y*u.x<0?-1:1)}const U2=[e=>e.x<0,e=>e.x>se,e=>e.y<0,e=>e.y>se];function k2(e,t,a,o){const l=[4];if(o===0)return l;a._mult(o);const r=e.sub(a),u=t.sub(a),m=[e,t,r,u];for(let p=0;p<4;p++)for(const h of m)if(U2[p](h)){l.push(p);break}return l}class Dy{constructor(t){this.vertexArray=new j_,this.indexArray=new Ii,this.programConfigurations=new U(t.layers,t.zoom,a=>D2.includes(a)),this._segments=new ai,this.hiddenByLandmarkVertexArray=new iu,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new ai}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(t,a,o,l=!1){const r=t.length;if(r>2){let u=Math.max(0,this._segments.get().length-1);const m=this._segments._prepareSegment(4*r,this.vertexArray.length,2*this._segmentToGroundQuads[u].length);let p;u!==this._segments.get().length-1&&(u++,this._segmentToGroundQuads[u]=[],this._segmentToRegionTriCounts[u]=[0,0,0,0,0]);{const h=t[0],y=t[1];p=My(h.sub(t[r-1])._perp()._unit(),y.sub(h)._perp()._unit())}for(let h=0;h<r;h++){const y=h===r-1?0:h+1,x=t[h],v=t[y],C=t[y===r-1?0:y+1],R=v.sub(x)._perp()._unit(),N=My(R,C.sub(v)._perp()._unit()),W=p,D=N;if(fp(x,v,a)||l&&Uy(x,a)&&Uy(v,a)){p=N;continue}const Y=m.vertexLength;lm(this.vertexArray,x,v,1,1,W),lm(this.vertexArray,x,v,1,0,W),lm(this.vertexArray,x,v,0,1,D),lm(this.vertexArray,x,v,0,0,D),m.vertexLength+=4;const j=k2(x,v,R,o);for(const K of j)this._segmentToGroundQuads[u].push({id:Y,region:K}),this._segmentToRegionTriCounts[u][K]+=2,m.primitiveLength+=2;p=N}}}prepareBorderSegments(){if(!this.hasData())return;const t=this._segments.get(),a=t.length;for(let o=0;o<a;o++)this._segmentToGroundQuads[o].sort((l,r)=>l.region-r.region);for(let o=0;o<a;o++){const l=this._segmentToGroundQuads[o],r=t[o],u=this._segmentToRegionTriCounts[o];u.reduce((p,h)=>p+h,0);let m=0;for(let p=0;p<=4;p++){const h=u[p];if(h!==0){let y=this.regionSegments[p];y||(y=this.regionSegments[p]=new ai);const x={vertexOffset:r.vertexOffset,primitiveOffset:r.primitiveOffset+m,vertexLength:r.vertexLength,primitiveLength:h};y.get().push(x)}m+=h}for(let p=0;p<l.length;p++){const h=l[p].id;this.indexArray.emplaceBack(h,h+1,h+3),this.indexArray.emplaceBack(h,h+3,h+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(t,a,o,l,r,u){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,t,a,o,l,r,u)}upload(t){this.hasData()&&(this.vertexBuffer=t.createVertexBuffer(this.vertexArray,y2.members),this.indexBuffer=t.createIndexBuffer(this.indexArray))}uploadPaintProperties(t){this.hasData()&&this.programConfigurations.upload(t)}update(t,a,o,l,r,u){this.hasData()&&this.programConfigurations.updatePaintArrays(t,a,o,l,r,u)}updateHiddenByLandmark(t){if(!this.hasData())return;const a=t.groundVertexCount+t.groundVertexArrayOffset;if(t.groundVertexCount===0)return;const o=t.flags&al?1:0;for(let l=t.groundVertexArrayOffset;l<a;++l)this.hiddenByLandmarkVertexArray.emplace(l,o);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(t){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=t.createVertexBuffer(this.hiddenByLandmarkVertexArray,T2.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let t=0;t<=4;t++){const a=this.regionSegments[t];a&&a.destroy()}}}}class rm{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ii,this.footprintVertices=new ko,this.footprintSegments=[],this.layoutVertexArray=new dn,this.centroidVertexArray=new tr,this.indexArray=new Ii,this.programConfigurations=new U(t.layers,t.zoom,a=>M2.includes(a)),this.segments=new ai,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.groundEffect=new Dy(t),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(t,a,o,l){this.features=[],this.hasPattern=_p("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=aa(o),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:r,id:u,index:m,sourceLayerIndex:p}of t){const h=this.layers[0]._featureFilter.needGeometry,y=yi(r,h);if(!this.layers[0]._featureFilter.filter(new ja(this.zoom),y,o))continue;const x={id:u,sourceLayerIndex:p,index:m,geometry:h?y.geometry:Ci(r,o,l),properties:r.properties,type:r.type,patterns:{}},v=this.layoutVertexArray.length;this.hasPattern?this.features.push(up("fill-extrusion",this.layers,x,this.zoom,a)):this.addFeature(x,x.geometry,m,o,{},a.availableImages,l,a.brightness),a.featureIndex.insert(r,x.geometry,m,p,this.index,v)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(t,a,o,l,r,u){for(const m of this.features){const{geometry:p}=m;this.addFeature(m,p,m.index,a,o,l,r,u)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(t,a,o,l,r){const u=Object.keys(t).length!==0;if(u&&!this.stateDependentLayers.length)return;const m=u?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(t,a,m,o,l,r),this.groundEffect.update(t,a,m,o,l,r)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,A2),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,x2.members,!0)),this.groundEffect.upload(t)),this.groundEffect.uploadPaintProperties(t),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){this.groundEffect.uploadHiddenByLandmark(t),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,b2.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,a,o,l,r,u,m,p){const h=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(t,{})/this.tileToMeter,y=[new jt(0,0),new jt(se,se)],x=m.projection,v=x.name==="globe",C=W2[t.type]==="Polygon",R=new Wy;R.centroidDataIndex=this.centroidData.length;const N=new wy,W=this.layers[0].paint.get("fill-extrusion-base").evaluate(t,{},l)<=0,D=this.layers[0].paint.get("fill-extrusion-height").evaluate(t,{},l);N.height=D,N.vertexArrayOffset=this.layoutVertexArray.length,N.groundVertexArrayOffset=this.groundEffect.vertexArray.length,v&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new jr);const Y=dp(a,500);for(let _t=Y.length-1;_t>=0;_t--){const mt=Y[_t];(mt.length===0||(j=mt[0]).every(bt=>bt.x<=0)||j.every(bt=>bt.x>=se)||j.every(bt=>bt.y<=0)||j.every(bt=>bt.y>=se))&&Y.splice(_t,1)}var j;let K;if(v)K=Yy(Y,y,l);else{K=[];for(const _t of Y)K.push({polygon:_t,bounds:y})}const tt=C?this.edgeRadius:0,J=tt>0&&this.zoom<17,st=(_t,mt)=>{if(_t.length===0)return!1;const bt=_t[_t.length-1];return mt.x===bt.x&&mt.y===bt.y};for(const{polygon:_t,bounds:mt}of K){let bt=0,ft=0;for(const Wt of _t)C&&!Wt[0].equals(Wt[Wt.length-1])&&Wt.push(Wt[0]),ft+=C?Wt.length-1:Wt.length;const Ct=this.segments.prepareSegment((C?5:4)*ft,this.layoutVertexArray,this.indexArray);N.footprintSegIdx<0&&(N.footprintSegIdx=this.footprintSegments.length),N.polygonSegIdx<0&&(N.polygonSegIdx=this.polygonSegments.length);const Dt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Et=new Py;if(Et.vertexOffset=this.footprintVertices.length,Et.indexOffset=3*this.footprintIndices.length,Et.ringIndices=[],C){const Wt=[],xt=[];bt=Ct.vertexLength;for(let Qt=0;Qt<_t.length;Qt++){const Bt=_t[Qt];Bt.length&&Qt!==0&&xt.push(Wt.length/2);const pe=[];let de,zt;de=Bt[1].sub(Bt[0])._perp()._unit(),Et.ringIndices.push(Bt.length-1);for(let Pe=1;Pe<Bt.length;Pe++){const ve=Bt[Pe],fe=Bt[Pe===Bt.length-1?1:Pe+1],Ht=ve.clone();if(tt){zt=fe.sub(ve)._perp()._unit();const Re=de.add(zt)._unit(),qe=tt*Math.min(4,1/(de.x*Re.x+de.y*Re.y));Ht.x+=qe*Re.x,Ht.y+=qe*Re.y,Ht.x=Math.round(Ht.x),Ht.y=Math.round(Ht.y),de=zt}!W||tt!==0&&!J||st(pe,Ht)||pe.push(Ht),pu(this.layoutVertexArray,Ht.x,Ht.y,0,0,1,1,0),Ct.vertexLength++,this.footprintVertices.emplaceBack(ve.x,ve.y),Wt.push(ve.x,ve.y),v&&hu(this.layoutVertexExtArray,x.projectTilePoint(Ht.x,Ht.y,l),x.upVector(l,Ht.x,Ht.y))}W&&(tt===0||J)&&(pe.length!==0&&st(pe,pe[0])&&pe.pop(),this.groundEffect.addData(pe,mt,h))}const wt=em(Wt,xt);for(let Qt=0;Qt<wt.length;Qt+=3)this.footprintIndices.emplaceBack(Et.vertexOffset+wt[Qt+0],Et.vertexOffset+wt[Qt+1],Et.vertexOffset+wt[Qt+2]),this.indexArray.emplaceBack(bt+wt[Qt],bt+wt[Qt+2],bt+wt[Qt+1]),Ct.primitiveLength++;Et.indexCount+=wt.length,Et.vertexCount+=this.footprintVertices.length-Et.vertexOffset}for(let Wt=0;Wt<_t.length;Wt++){const xt=_t[Wt];R.startRing(N,xt[0]);let wt=xt.length>4&&ky(xt[xt.length-2],xt[0],xt[1]),Qt=tt?z2(xt[xt.length-2],xt[0],xt[1],tt):0;const Bt=[];let pe,de,zt;de=xt[1].sub(xt[0])._perp()._unit();let Pe=!0;for(let ve=1,fe=0;ve<xt.length;ve++){let Ht=xt[ve-1],Re=xt[ve];const qe=xt[ve===xt.length-1?1:ve+1];if(R.appendEdge(N,Re,Ht),fp(Re,Ht,mt)){tt&&(de=qe.sub(Re)._perp()._unit(),Pe=!Pe);continue}const We=Re.sub(Ht)._perp(),$e=We.x/(Math.abs(We.x)+Math.abs(We.y)),Ue=We.y>0?1:0,la=Ht.dist(Re);if(fe+la>32768&&(fe=0),tt){zt=qe.sub(Re)._perp()._unit();let ga=By(Ht,Re,qe,Fy(de,zt),tt);isNaN(ga)&&(ga=0);const va=Re.sub(Ht)._unit();Ht=Ht.add(va.mult(Qt))._round(),Re=Re.add(va.mult(-ga))._round(),Qt=ga,de=zt,W&&this.zoom>=17&&(st(Bt,Ht)||Bt.push(Ht),st(Bt,Re)||Bt.push(Re))}const He=Ct.vertexLength,wa=xt.length>4&&ky(Ht,Re,qe);let pa=zy(fe,wt,Pe);if(pu(this.layoutVertexArray,Ht.x,Ht.y,$e,Ue,0,0,pa),pu(this.layoutVertexArray,Ht.x,Ht.y,$e,Ue,0,1,pa),fe+=la,pa=zy(fe,wa,!Pe),wt=wa,pu(this.layoutVertexArray,Re.x,Re.y,$e,Ue,0,0,pa),pu(this.layoutVertexArray,Re.x,Re.y,$e,Ue,0,1,pa),Ct.vertexLength+=4,this.indexArray.emplaceBack(He+0,He+1,He+2),this.indexArray.emplaceBack(He+1,He+3,He+2),Ct.primitiveLength+=2,tt){const ga=bt+(ve===1?xt.length-2:ve-2),va=ve===1?bt:ga+1;if(this.indexArray.emplaceBack(He+1,ga,He+3),this.indexArray.emplaceBack(ga,va,He+3),Ct.primitiveLength+=2,pe===void 0&&(pe=He),!fp(qe,xt[ve],mt)){const ha=ve===xt.length-1?pe:Ct.vertexLength;this.indexArray.emplaceBack(He+2,He+3,ha),this.indexArray.emplaceBack(He+3,ha+1,ha),this.indexArray.emplaceBack(He+3,va,ha+1),Ct.primitiveLength+=3}Pe=!Pe}if(v){const ga=this.layoutVertexExtArray,va=x.projectTilePoint(Ht.x,Ht.y,l),ha=x.projectTilePoint(Re.x,Re.y,l),Ka=x.upVector(l,Ht.x,Ht.y),Sa=x.upVector(l,Re.x,Re.y);hu(ga,va,Ka),hu(ga,va,Ka),hu(ga,ha,Sa),hu(ga,ha,Sa)}}C&&(bt+=xt.length-1),W&&tt&&this.zoom>=17&&(Bt.length!==0&&st(Bt,Bt[0])&&Bt.pop(),this.groundEffect.addData(Bt,mt,h,tt>0))}this.footprintSegments.push(Et),Dt.triangleCount=this.indexArray.length-Dt.triangleArrayOffset,this.polygonSegments.push(Dt),++N.footprintSegLen,++N.polygonSegLen}if(N.vertexCount=this.layoutVertexArray.length-N.vertexArrayOffset,N.groundVertexCount=this.groundEffect.vertexArray.length-N.groundVertexArrayOffset,N.vertexCount!==0){if(N.centroidXY=R.borders?Ly:this.encodeCentroid(R,N),this.centroidData.push(N),R.borders){this.featuresOnBorder.push(R);const _t=this.featuresOnBorder.length-1;for(let mt=0;mt<R.borders.length;mt++)R.borders[mt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[mt].push(_t)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,r,u,l,p),this.groundEffect.addPaintPropertiesData(t,o,r,u,l,p),this.maxHeight=Math.max(this.maxHeight,D)}}sortBorders(){for(let t=0;t<this.borderFeatureIndices.length;t++)this.borderFeatureIndices[t].sort((a,o)=>this.featuresOnBorder[a].borders[t][0]-this.featuresOnBorder[o].borders[t][0])}splitToSubtiles(){const t=[];for(let m=0;m<this.centroidData.length;m++){const p=this.centroidData[m],h=+(p.min.y+p.max.y>se),y=2*h+(+(p.min.x+p.max.x>se)^h);for(let x=0;x<p.polygonSegLen;x++){const v=p.polygonSegIdx+x;t.push({centroidIdx:m,subtile:y,polygonSegmentIdx:v,triangleSegmentIdx:this.polygonSegments[v].triangleSegIdx})}}const a=new Ii;t.sort((m,p)=>m.triangleSegmentIdx===p.triangleSegmentIdx?m.subtile-p.subtile:m.triangleSegmentIdx-p.triangleSegmentIdx);let o=0,l=0,r=0;for(const m of t){if(m.triangleSegmentIdx!==o)break;r++}const u=t.length;for(;l!==t.length;){o=t[l].triangleSegmentIdx;let m=0,p=l,h=l;for(let y=p;y<r&&t[y].subtile===m;y++)h++;for(;p!==r;){const y=t[p];m=y.subtile;const x=this.centroidData[y.centroidIdx].min.clone(),v=this.centroidData[y.centroidIdx].max.clone(),C={vertexOffset:this.segments.segments[o].vertexOffset,primitiveOffset:a.length,vertexLength:this.segments.segments[o].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let R=p;R<h;R++){const N=t[R],W=this.polygonSegments[N.polygonSegmentIdx],D=this.centroidData[N.centroidIdx].min,Y=this.centroidData[N.centroidIdx].max,j=this.indexArray.uint16;for(let K=W.triangleArrayOffset;K<W.triangleArrayOffset+W.triangleCount;K++)a.emplaceBack(j[3*K],j[3*K+1],j[3*K+2]);C.primitiveLength+=W.triangleCount,x.x=Math.min(x.x,D.x),x.y=Math.min(x.y,D.y),v.x=Math.max(v.x,Y.x),v.y=Math.max(v.y,Y.y)}C.primitiveLength>0&&this.triangleSubSegments.push({segment:C,min:x,max:v}),p=h;for(let R=p;R<r&&t[R].subtile===t[p].subtile;R++)h++}l=r;for(let y=l;y<u&&t[y].triangleSegmentIdx===t[l].triangleSegmentIdx;y++)r++}a._trim(),this.indexArray=a}getVisibleSegments(t,a,o){let l=0,r=0;const u=1<<t.canonical.z;if(a){const N=a.getMinMaxForTile(t);N&&(l=N.min,r=N.max)}r+=this.maxHeight;const m=t.toUnwrapped();let p;const h=[m.canonical.x/u+m.wrap,m.canonical.y/u],y=[(m.canonical.x+1)/u+m.wrap,(m.canonical.y+1)/u],x=new ai,v=(N,W,D)=>[N[0]*(1-D[0])+W[0]*D[0],N[1]*(1-D[1])+W[1]*D[1]],C=[],R=[];for(const N of this.triangleSubSegments){C[0]=N.min.x/se,C[1]=N.min.y/se,R[0]=N.max.x/se,R[1]=N.max.y/se;const W=v(h,y,C),D=v(h,y,R);if(new ti([W[0],W[1],l],[D[0],D[1],r]).intersectsPrecise(o)===0){p&&(x.segments.push(p),p=void 0);continue}const Y=N.segment;p&&p.vertexOffset!==Y.vertexOffset&&(x.segments.push(p),p=void 0),p?(p.vertexLength+=Y.vertexLength,p.primitiveLength+=Y.primitiveLength):p={vertexOffset:Y.vertexOffset,primitiveLength:Y.primitiveLength,vertexLength:Y.vertexLength,primitiveOffset:Y.primitiveOffset,sortKey:void 0,vaos:{}}}return p&&x.segments.push(p),x}encodeCentroid(t,a){const o=t.centroid(),l=a.span(),r=Math.min(7,Math.round(l.x*this.tileToMeter/10)),u=Math.min(7,Math.round(l.y*this.tileToMeter/10));return new jt(Ve(o.x,1,se-1)<<3|r,Ve(o.y,1,se-1)<<3|u)}encodeBorderCentroid(t){if(!t.borders)return new jt(0,0);const a=t.borders,o=Number.MAX_VALUE;if(a[0][0]!==o||a[1][0]!==o){const l=a[0][0]!==o?0:1;return new jt(6|(a[0][0]!==o?0:65528),(a[l][0]+a[l][1])/2<<3|6)}{const l=a[2][0]!==o?2:3;return new jt((a[l][0]+a[l][1])/2<<3|6,6|(a[2][0]!==o?0:65528))}}showCentroid(t){const a=this.centroidData[t.centroidDataIndex];a.flags&=al,a.centroidXY.x=0,a.centroidXY.y=0,this.writeCentroidToBuffer(a)}writeCentroidToBuffer(t){this.groundEffect.updateHiddenByLandmark(t);const a=t.vertexArrayOffset,o=t.vertexCount+t.vertexArrayOffset,l=t.flags&al?Ly:t.centroidXY,r=this.centroidVertexArray.geta_centroid_pos0(a);if(this.centroidVertexArray.geta_centroid_pos1(a)!==l.y||r!==l.x){for(let u=a;u<o;++u)this.centroidVertexArray.emplace(u,l.x,l.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const t of this.centroidData)this.writeCentroidToBuffer(t)}updateReplacement(t,a){if(a.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=a.updateTime;const o=a.getReplacementRegionsForTile(t.toUnwrapped());if(function(r,u){if(r.length!==u.length)return!1;for(let m=0;m<r.length;m++)if(r[m].sourceId!==u[m].sourceId||!by(r[m],u[m]))return!1;return!0}(this.activeReplacements,o))return;if(this.activeReplacements=o,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const r of this.centroidData)r.flags&=2147483647;const l=[];for(const r of this.activeReplacements){const u=Math.pow(2,r.footprintTileId.canonical.z-t.canonical.z);for(const m of this.centroidData)if(!(m.flags&al||r.min.x>m.max.x||m.min.x>r.max.x||r.min.y>m.max.y||m.min.y>r.max.y))for(let p=0;p<m.footprintSegLen;p++){const h=this.footprintSegments[m.footprintSegIdx+p];if(l.length=0,H2(this.footprintVertices,h.vertexOffset,h.vertexCount,r.footprintTileId.canonical,t.canonical,l),Ay(r.footprint,l,this.footprintIndices.uint16,h.indexOffset,h.indexCount,-h.vertexOffset,-u)){m.flags|=al;break}}}for(const r of this.centroidData)this.writeCentroidToBuffer(r);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(t,a,o){let l=!1;for(let r=0;r<o.footprintSegLen;r++){const u=this.footprintSegments[o.footprintSegIdx+r];let m=0;for(const p of u.ringIndices){for(let h=m,y=p+m-1;h<p+m;y=h++){const x=this.footprintVertices.int16[2*(h+u.vertexOffset)+0],v=this.footprintVertices.int16[2*(h+u.vertexOffset)+1],C=this.footprintVertices.int16[2*(y+u.vertexOffset)+1];v>a!=C>a&&t<(this.footprintVertices.int16[2*(y+u.vertexOffset)+0]-x)*(a-v)/(C-v)+x&&(l=!l)}m=p}}return l}getHeightAtTileCoord(t,a){let o=Number.NEGATIVE_INFINITY,l=!0;const r=4*(t+se)*se+(a+se);if(this.partLookup.hasOwnProperty(r)){const u=this.partLookup[r];return u?{height:u.height,hidden:!!(u.flags&al)}:void 0}for(const u of this.centroidData)t>u.max.x||u.min.x>t||a>u.max.y||u.min.y>a||this.footprintContainsPoint(t,a,u)&&u&&u.height>o&&(o=u.height,this.partLookup[r]=u,l=!!(u.flags&al));if(o!==Number.NEGATIVE_INFINITY)return{height:o,hidden:l};this.partLookup[r]=void 0}}function Fy(e,t){const a=e.add(t)._unit();return e.x*a.x+e.y*a.y}function z2(e,t,a,o){const l=t.sub(e)._perp()._unit(),r=a.sub(t)._perp()._unit();return By(e,t,a,Fy(l,r),o)}function By(e,t,a,o,l){const r=Math.sqrt(1-o*o);return Math.min(e.dist(t)/3,t.dist(a)/3,l*r/o)}function fp(e,t,a){return e.x<a[0].x&&t.x<a[0].x||e.x>a[1].x&&t.x>a[1].x||e.y<a[0].y&&t.y<a[0].y||e.y>a[1].y&&t.y>a[1].y}function Uy(e,t){return e.x<t[0].x||e.x>t[1].x||e.y<t[0].y||e.y>t[1].y}function ky(e,t,a){if(e.x<0||e.x>=se||t.x<0||t.x>=se||a.x<0||a.x>=se)return!1;const o=a.sub(t),l=o.perp(),r=e.sub(t);return(o.x*r.x+o.y*r.y)/Math.sqrt((o.x*o.x+o.y*o.y)*(r.x*r.x+r.y*r.y))>-.866&&l.x*r.x+l.y*r.y<0}function zy(e,t,a){const o=t?2|e:-3&e;return a?1|o:-2&o}function Hy(){const e=Math.PI/32,t=Math.tan(e),a=vt;return a*Math.sqrt(1+2*t*t)-a}function Yy(e,t,a){const o=1<<a.z,l=ke(a.x/o),r=ke((a.x+1)/o),u=da(a.y/o),m=da((a.y+1)/o);return function(p,h,y,x,v=0,C){const R=[];if(!p.length||!y||!x)return R;const N=(J,st)=>{for(const _t of J)R.push({polygon:_t,bounds:st})},W=Math.ceil(Math.log2(y)),D=Math.ceil(Math.log2(x)),Y=W-D,j=[];for(let J=0;J<Math.abs(Y);J++)j.push(Y>0?0:1);for(let J=0;J<Math.min(W,D);J++)j.push(0),j.push(1);let K=p;if(K=om(K,h[0].y-v,h[1].y+v,1),K=om(K,h[0].x-v,h[1].x+v,0),!K.length)return R;const tt=[];for(j.length?tt.push({polygons:K,bounds:h,depth:0}):N(K,h);tt.length;){const J=tt.pop(),st=J.depth,_t=j[st],mt=J.bounds[0],bt=J.bounds[1],ft=_t===0?mt.x:mt.y,Ct=_t===0?bt.x:bt.y,Dt=C?C(_t,ft,Ct):.5*(ft+Ct),Et=om(J.polygons,ft-v,Dt+v,_t),Wt=om(J.polygons,Dt-v,Ct+v,_t);if(Et.length){const xt=[mt,new jt(_t===0?Dt:bt.x,_t===1?Dt:bt.y)];j.length>st+1?tt.push({polygons:Et,bounds:xt,depth:st+1}):N(Et,xt)}if(Wt.length){const xt=[new jt(_t===0?Dt:mt.x,_t===1?Dt:mt.y),bt];j.length>st+1?tt.push({polygons:Wt,bounds:xt,depth:st+1}):N(Wt,xt)}}return R}(e,t,Math.ceil((r-l)/11.25),Math.ceil((u-m)/11.25),1,(p,h,y)=>{if(p===0)return .5*(h+y);{const x=da((a.y+h/se)/o);return(Fe(.5*(da((a.y+y/se)/o)+x))*o-a.y)*se}})}function H2(e,t,a,o,l,r){const u=Math.pow(2,o.z-l.z);for(let m=0;m<a;m++){let p=e.int16[2*(m+t)+0],h=e.int16[2*(m+t)+1];p=(p+l.x*se)*u-o.x*se,h=(h+l.y*se)*u-o.y*se,r.push(new jt(p,h))}}me(rm,"FillExtrusionBucket",{omit:["layers","features"]}),me(wy,"PartData"),me(Py,"FootprintSegment"),me(Wy,"BorderCentroidData"),me(Dy,"GroundEffect");const Y2=new qa({visibility:new Zt(gt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Zt(gt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var G2={paint:new qa({"fill-extrusion-opacity":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Se(gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Se(gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Se(gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Se(gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Se(gt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Se(gt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Zt(gt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:Y2};class sd extends jt{constructor(t,a,o){super(t,a),this.z=o}}function gu(e,t){return e.x*t.x+e.y*t.y}function Gy(e,t){if(e.length===1){let a=0;const o=t[a++];let l;for(;!l||o.equals(l);)if(l=t[a++],!l)return 1/0;for(;a<t.length;a++){const r=t[a],u=e[0],m=l.sub(o),p=r.sub(o),h=u.sub(o),y=gu(m,m),x=gu(m,p),v=gu(p,p),C=gu(h,m),R=gu(h,p),N=y*v-x*x,W=(v*C-x*R)/N,D=(y*R-x*C)/N,Y=o.z*(1-W-D)+l.z*W+r.z*D;if(isFinite(Y))return Y}return 1/0}{let a=1/0;for(const o of t)a=Math.min(a,o.z);return a}}function Vy(e,t,a,o,l,r,u,m){const p=u*l.getElevationAt(e,t,!0,!0),h=r[0]!==0,y=h?r[1]===0?u*(r[0]/7-450):u*function(x,v,C){const R=Math.floor(v[0]/8),N=Math.floor(v[1]/8),W=10*(v[0]-8*R),D=10*(v[1]-8*N),Y=x.getElevationAt(R,N,!0,!0),j=x.getMeterToDEM(C),K=Math.floor(.5*(W*j-1)),tt=Math.floor(.5*(D*j-1)),J=x.tileCoordToPixel(R,N),st=2*K+1,_t=2*tt+1,mt=function(Wt,xt,wt,Qt,Bt){return[Wt.getElevationAtPixel(xt,wt,!0),Wt.getElevationAtPixel(xt+Bt,wt,!0),Wt.getElevationAtPixel(xt,wt+Bt,!0),Wt.getElevationAtPixel(xt+Qt,wt+Bt,!0)]}(x,J.x-K,J.y-tt,st,_t),bt=Math.abs(mt[0]-mt[1]),ft=Math.abs(mt[2]-mt[3]),Ct=Math.abs(mt[0]-mt[2])+Math.abs(mt[1]-mt[3]),Dt=Math.min(.25,.5*j*(bt+ft)/st),Et=Math.min(.25,.5*j*Ct/_t);return Y+Math.max(Dt*W,Et*D)}(l,r,m):p;return{base:p+(a===0)?-1:a,top:h?Math.max(y+o,p+a+2):p+o}}const V2=Ia([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:X2}=V2,K2=Ia([{name:"a_packed",components:4,type:"Float32"}]),{members:j2}=K2;class Xy{constructor(t,a){this.width=t,this.height=a,this.nextRow=0,this.image=new tl({width:t,height:a}),this.positions={},this.uploaded=!1}getDash(t,a){const o=this.getKey(t,a);return this.positions[o]}trim(){const t=this.width,a=this.height=hl(this.nextRow);this.image.resize({width:t,height:a})}getKey(t,a){return t.join(",")+a}getDashRanges(t,a,o){const l=[];let r=t.length%2==1?-t[t.length-1]*o:0,u=t[0]*o,m=!0;l.push({left:r,right:u,isDash:m,zeroLength:t[0]===0});let p=t[0];for(let h=1;h<t.length;h++){m=!m;const y=t[h];r=p*o,p+=y,u=p*o,l.push({left:r,right:u,isDash:m,zeroLength:y===0})}return l}addRoundDash(t,a,o){const l=a/2;for(let r=-o;r<=o;r++){const u=this.width*(this.nextRow+o+r);let m=0,p=t[m];for(let h=0;h<this.width;h++){h/p.right>1&&(p=t[++m]);const y=Math.abs(h-p.left),x=Math.abs(h-p.right),v=Math.min(y,x);let C;const R=r/o*(l+1);if(p.isDash){const N=l-Math.abs(R);C=Math.sqrt(v*v+N*N)}else C=l-Math.sqrt(v*v+R*R);this.image.data[u+h]=Math.max(0,Math.min(255,C+128))}}}addRegularDash(t,a){for(let p=t.length-1;p>=0;--p){const h=t[p],y=t[p+1];h.zeroLength?t.splice(p,1):y&&y.isDash===h.isDash&&(y.left=h.left,t.splice(p,1))}const o=t[0],l=t[t.length-1];o.isDash===l.isDash&&(o.left=l.left-this.width,l.right=o.right+this.width);const r=this.width*this.nextRow;let u=0,m=t[u];for(let p=0;p<this.width;p++){p/m.right>1&&(m=t[++u]);const h=Math.abs(p-m.left),y=Math.abs(p-m.right),x=Math.min(h,y);this.image.data[r+p]=Math.max(0,Math.min(255,(m.isDash?x:-x)+a+128))}}addDash(t,a){const o=this.getKey(t,a);if(this.positions[o])return this.positions[o];const l=a==="round",r=l?7:0,u=2*r+1;if(this.nextRow+u>this.height)return ei("LineAtlas out of space"),null;t.length===0&&t.push(1);let m=0;for(let y=0;y<t.length;y++)t[y]<0&&(ei("Negative value is found in line dasharray, replacing values with 0"),t[y]=0),m+=t[y];if(m!==0){const y=this.width/m,x=this.getDashRanges(t,this.width,y);l?this.addRoundDash(x,y,r):this.addRegularDash(x,a==="square"?.5*y:0)}const p=this.nextRow+r;this.nextRow+=u;const h={tl:[p,r],br:[m,0]};return this.positions[o]=h,h}}me(Xy,"LineAtlas");const q2=im.types,$2=Math.cos(Math.PI/180*37.5);class pp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new q_,this.layoutVertexArray2=new kn,this.indexArray=new Ii,this.programConfigurations=new U(t.layers,t.zoom),this.segments=new ai,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,o,l){this.hasPattern=_p("line",this.layers,a);const r=this.layers[0].layout.get("line-sort-key"),u=[];for(const{feature:y,id:x,index:v,sourceLayerIndex:C}of t){const R=this.layers[0]._featureFilter.needGeometry,N=yi(y,R);if(!this.layers[0]._featureFilter.filter(new ja(this.zoom),N,o))continue;const W=r?r.evaluate(N,{},o):void 0,D={id:x,properties:y.properties,type:y.type,sourceLayerIndex:C,index:v,geometry:R?N.geometry:Ci(y,o,l),patterns:{},sortKey:W};u.push(D)}r&&u.sort((y,x)=>y.sortKey-x.sortKey);const{lineAtlas:m,featureIndex:p}=a,h=this.addConstantDashes(m);for(const y of u){const{geometry:x,index:v,sourceLayerIndex:C}=y;if(h&&this.addFeatureDashes(y,m),this.hasPattern){const R=up("line",this.layers,y,this.zoom,a);this.patternFeatures.push(R)}else this.addFeature(y,x,v,o,m.positions,a.availableImages,a.brightness);p.insert(t[v].feature,x,v,C,this.index)}}addConstantDashes(t){let a=!1;for(const o of this.layers){const l=o.paint.get("line-dasharray").value,r=o.layout.get("line-cap").value;if(l.kind!=="constant"||r.kind!=="constant")a=!0;else{const u=r.value,m=l.value;if(!m)continue;t.addDash(m,u)}}return a}addFeatureDashes(t,a){const o=this.zoom;for(const l of this.layers){const r=l.paint.get("line-dasharray").value,u=l.layout.get("line-cap").value;if(r.kind==="constant"&&u.kind==="constant")continue;let m,p;if(r.kind==="constant"){if(m=r.value,!m)continue}else m=r.evaluate({zoom:o},t);p=u.kind==="constant"?u.value:u.evaluate({zoom:o},t),a.addDash(m,p),t.patterns[l.id]=a.getKey(m,p)}}update(t,a,o,l,r){const u=Object.keys(t).length!==0;u&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(t,a,u?this.stateDependentLayers:this.layers,o,l,r)}addFeatures(t,a,o,l,r,u){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,a,o,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,j2)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,X2),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,a,o,l,r,u,m){const p=this.layers[0].layout,h=p.get("line-join").evaluate(t,{}),y=p.get("line-cap").evaluate(t,{}),x=p.get("line-miter-limit"),v=p.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const C of a)this.addLine(C,t,h,y,x,v);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,r,u,l,m)}addLine(t,a,o,l,r,u){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let D=0;D<t.length-1;D++)this.totalDistance+=t[D].dist(t[D+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const m=q2[a.type]==="Polygon";let p=t.length;for(;p>=2&&t[p-1].equals(t[p-2]);)p--;let h=0;for(;h<p-1&&t[h].equals(t[h+1]);)h++;if(p<(m?3:2))return;o==="bevel"&&(r=1.05);const y=this.overscaling<=16?15*se/(512*this.overscaling):0,x=this.segments.prepareSegment(10*p,this.layoutVertexArray,this.indexArray);let v,C,R,N,W;this.e1=this.e2=-1,m&&(v=t[p-2],W=t[h].sub(v)._unit()._perp());for(let D=h;D<p;D++){if(R=D===p-1?m?t[h+1]:void 0:t[D+1],R&&t[D].equals(R))continue;W&&(N=W),v&&(C=v),v=t[D],W=R?R.sub(v)._unit()._perp():N,N=N||W;let Y=N.add(W);Y.x===0&&Y.y===0||Y._unit();const j=N.x*W.x+N.y*W.y,K=Y.x*W.x+Y.y*W.y,tt=K!==0?1/K:1/0,J=2*Math.sqrt(2-2*K),st=K<$2&&C&&R,_t=N.x*W.y-N.y*W.x>0;if(st&&D>h){const ft=v.dist(C);if(ft>2*y){const Ct=v.sub(v.sub(C)._mult(y/ft)._round());this.updateDistance(C,Ct),this.addCurrentVertex(Ct,N,0,0,x),C=Ct}}const mt=C&&R;let bt=mt?o:m?"butt":l;if(mt&&bt==="round"&&(tt<u?bt="miter":tt<=2&&(bt="fakeround")),bt==="miter"&&tt>r&&(bt="bevel"),bt==="bevel"&&(tt>2&&(bt="flipbevel"),tt<r&&(bt="miter")),C&&this.updateDistance(C,v),bt==="miter")Y._mult(tt),this.addCurrentVertex(v,Y,0,0,x);else if(bt==="flipbevel"){if(tt>100)Y=W.mult(-1);else{const ft=tt*N.add(W).mag()/N.sub(W).mag();Y._perp()._mult(ft*(_t?-1:1))}this.addCurrentVertex(v,Y,0,0,x),this.addCurrentVertex(v,Y.mult(-1),0,0,x)}else if(bt==="bevel"||bt==="fakeround"){const ft=-Math.sqrt(tt*tt-1),Ct=_t?ft:0,Dt=_t?0:ft;if(C&&this.addCurrentVertex(v,N,Ct,Dt,x),bt==="fakeround"){const Et=Math.round(180*J/Math.PI/20);for(let Wt=1;Wt<Et;Wt++){let xt=Wt/Et;if(xt!==.5){const Qt=xt-.5;xt+=xt*Qt*(xt-1)*((1.0904+j*(j*(3.55645-1.43519*j)-3.2452))*Qt*Qt+(.848013+j*(.215638*j-1.06021)))}const wt=W.sub(N)._mult(xt)._add(N)._unit()._mult(_t?-1:1);this.addHalfVertex(v,wt.x,wt.y,!1,_t,0,x)}}R&&this.addCurrentVertex(v,W,-Ct,-Dt,x)}else if(bt==="butt")this.addCurrentVertex(v,Y,0,0,x);else if(bt==="square"){const ft=C?1:-1;C||this.addCurrentVertex(v,Y,ft,ft,x),this.addCurrentVertex(v,Y,0,0,x),C&&this.addCurrentVertex(v,Y,ft,ft,x)}else bt==="round"&&(C&&(this.addCurrentVertex(v,N,0,0,x),this.addCurrentVertex(v,N,1,1,x,!0)),R&&(this.addCurrentVertex(v,W,-1,-1,x,!0),this.addCurrentVertex(v,W,0,0,x)));if(st&&D<p-1){const ft=v.dist(R);if(ft>2*y){const Ct=v.add(R.sub(v)._mult(y/ft)._round());this.updateDistance(v,Ct),this.addCurrentVertex(Ct,W,0,0,x),v=Ct}}}}addCurrentVertex(t,a,o,l,r,u=!1){const m=a.y*l-a.x,p=-a.y-a.x*l;this.addHalfVertex(t,a.x+a.y*o,a.y-a.x*o,u,!1,o,r),this.addHalfVertex(t,m,p,u,!0,-l,r)}addHalfVertex({x:t,y:a},o,l,r,u,m,p){this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(a<<1)+(u?1:0),Math.round(63*o)+128,Math.round(63*l)+128,1+(m===0?0:m<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const h=p.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,h),p.primitiveLength++),u?this.e2=h:this.e1=h}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,a){this.distance+=t.dist(a),this.updateScaledDistance()}}me(pp,"LineBucket",{omit:["layers","patternFeatures"]});const Z2=new qa({"line-cap":new Se(gt.layout_line["line-cap"]),"line-join":new Se(gt.layout_line["line-join"]),"line-miter-limit":new Zt(gt.layout_line["line-miter-limit"]),"line-round-limit":new Zt(gt.layout_line["line-round-limit"]),"line-sort-key":new Se(gt.layout_line["line-sort-key"]),visibility:new Zt(gt.layout_line.visibility)});var Ky={paint:new qa({"line-opacity":new Se(gt.paint_line["line-opacity"]),"line-color":new Se(gt.paint_line["line-color"]),"line-translate":new Zt(gt.paint_line["line-translate"]),"line-translate-anchor":new Zt(gt.paint_line["line-translate-anchor"]),"line-width":new Se(gt.paint_line["line-width"]),"line-gap-width":new Se(gt.paint_line["line-gap-width"]),"line-offset":new Se(gt.paint_line["line-offset"]),"line-blur":new Se(gt.paint_line["line-blur"]),"line-dasharray":new Se(gt.paint_line["line-dasharray"]),"line-pattern":new Se(gt.paint_line["line-pattern"]),"line-gradient":new ms(gt.paint_line["line-gradient"]),"line-trim-offset":new Zt(gt.paint_line["line-trim-offset"]),"line-emissive-strength":new Zt(gt.paint_line["line-emissive-strength"]),"line-border-width":new Se(gt.paint_line["line-border-width"]),"line-border-color":new Se(gt.paint_line["line-border-color"])}),layout:Z2};function jy(e,t,a){return t*(se/(e.tileSize*Math.pow(2,a-e.tileID.overscaledZ)))}function qy(e,t){return 1/jy(e,1,t.tileZoom)}function $y(e,t,a,o){return e.translatePosMatrix(o||t.tileID.projMatrix,t,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Zy=e=>{const t=[];Jy(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const a=e.paint.get("line-trim-offset");return a[0]===0&&a[1]===0||t.push("RENDER_LINE_TRIM_OFFSET"),e.paint.get("line-border-width").constantOr(1)!==0&&t.push("RENDER_LINE_BORDER"),t};function Jy(e){const t=e.paint.get("line-dasharray").value;return t.value||t.kind!=="constant"}const Qy=new class extends Se{possiblyEvaluate(e,t){return t=new ja(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,a,o){return t=zi({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,a,o)}}(Ky.paint.properties["line-width"].specification);function t0(e,t){return t>0?t+2*e:e}Qy.useIntegerZoom=!0;const J2=Ia([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Q2=Ia([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),t3=Ia([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ia([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const e3=Ia([{name:"a_z_offset",components:1,type:"Float32"}],4),a3=Ia([{name:"a_texb",components:2,type:"Uint16"}]),i3=Ia([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),o3=Ia([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);Ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const e0=Ia([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),n3=Ia([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ia([{name:"triangle",components:3,type:"Uint16"}]),Ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ia([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Ia([{type:"Float32",name:"offsetX"}]),Ia([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Yi=24;const fn=128;function hp(e,t){const{expression:a}=t;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new ja(e+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:o,interpolationType:l}=a;let r=0;for(;r<o.length&&o[r]<=e;)r++;r=Math.max(0,r-1);let u=r;for(;u<o.length&&o[u]<e+1;)u++;u=Math.min(o.length-1,u);const m=o[r],p=o[u];return a.kind==="composite"?{kind:"composite",minZoom:m,maxZoom:p,interpolationType:l}:{kind:"camera",minZoom:m,maxZoom:p,minSize:a.evaluate(new ja(m)),maxSize:a.evaluate(new ja(p)),interpolationType:l}}}function dm(e,{uSize:t,uSizeT:a},{lowerSize:o,upperSize:l}){return e.kind==="source"?o/fn:e.kind==="composite"?sa(o/fn,l/fn,a):t}function ld(e,t){let a=0,o=0;if(e.kind==="constant")o=e.layoutSize;else if(e.kind!=="source"){const{interpolationType:l,minZoom:r,maxZoom:u}=e,m=l?Ve(mo.interpolationFactor(l,t,r,u),0,1):0;e.kind==="camera"?o=sa(e.minSize,e.maxSize,m):a=m}return{uSizeT:a,uSize:o}}var s3=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:fn,evaluateSizeForFeature:dm,evaluateSizeForZoom:ld,getSizeData:hp});function l3(e,t,a){return e.sections.forEach(o=>{o.text=function(l,r,u){const m=r.layout.get("text-transform").evaluate(u,{});return m==="uppercase"?l=l.toLocaleUpperCase():m==="lowercase"&&(l=l.toLocaleLowerCase()),fo.applyArabicShaping&&(l=fo.applyArabicShaping(l)),l}(o.text,t,a)}),e}const yu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function r3(e){return e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""}function d3(e){return e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""||e===""}var _3={read:function(e,t,a,o,l){var r,u,m=8*l-o-1,p=(1<<m)-1,h=p>>1,y=-7,x=a?l-1:0,v=a?-1:1,C=e[t+x];for(x+=v,r=C&(1<<-y)-1,C>>=-y,y+=m;y>0;r=256*r+e[t+x],x+=v,y-=8);for(u=r&(1<<-y)-1,r>>=-y,y+=o;y>0;u=256*u+e[t+x],x+=v,y-=8);if(r===0)r=1-h;else{if(r===p)return u?NaN:1/0*(C?-1:1);u+=Math.pow(2,o),r-=h}return(C?-1:1)*u*Math.pow(2,r-o)},write:function(e,t,a,o,l,r){var u,m,p,h=8*r-l-1,y=(1<<h)-1,x=y>>1,v=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=o?0:r-1,R=o?1:-1,N=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(m=isNaN(t)?1:0,u=y):(u=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-u))<1&&(u--,p*=2),(t+=u+x>=1?v/p:v*Math.pow(2,1-x))*p>=2&&(u++,p/=2),u+x>=y?(m=0,u=y):u+x>=1?(m=(t*p-1)*Math.pow(2,l),u+=x):(m=t*Math.pow(2,x-1)*Math.pow(2,l),u=0));l>=8;e[a+C]=255&m,C+=R,m/=256,l-=8);for(u=u<<l|m,h+=l;h>0;e[a+C]=255&u,C+=R,u/=256,h-=8);e[a+C-R]|=128*N}},a0=Xa,_m=_3;function Xa(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xa.Varint=0,Xa.Fixed64=1,Xa.Bytes=2,Xa.Fixed32=5;var gp=4294967296,i0=1/gp,o0=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function xs(e){return e.type===Xa.Bytes?e.readVarint()+e.pos:e.pos+1}function rd(e,t,a){return a?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function n0(e,t,a){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));a.realloc(o);for(var l=a.pos-1;l>=e;l--)a.buf[l+o]=a.buf[l]}function u3(e,t){for(var a=0;a<e.length;a++)t.writeVarint(e[a])}function c3(e,t){for(var a=0;a<e.length;a++)t.writeSVarint(e[a])}function m3(e,t){for(var a=0;a<e.length;a++)t.writeFloat(e[a])}function f3(e,t){for(var a=0;a<e.length;a++)t.writeDouble(e[a])}function p3(e,t){for(var a=0;a<e.length;a++)t.writeBoolean(e[a])}function h3(e,t){for(var a=0;a<e.length;a++)t.writeFixed32(e[a])}function g3(e,t){for(var a=0;a<e.length;a++)t.writeSFixed32(e[a])}function y3(e,t){for(var a=0;a<e.length;a++)t.writeFixed64(e[a])}function b3(e,t){for(var a=0;a<e.length;a++)t.writeSFixed64(e[a])}function um(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function dd(e,t,a){e[a]=t,e[a+1]=t>>>8,e[a+2]=t>>>16,e[a+3]=t>>>24}function s0(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Xa.prototype={destroy:function(){this.buf=null},readFields:function(e,t,a){for(a=a||this.length;this.pos<a;){var o=this.readVarint(),l=o>>3,r=this.pos;this.type=7&o,e(l,t,this),this.pos===r&&this.skip(o)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=um(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=s0(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=um(this.buf,this.pos)+um(this.buf,this.pos+4)*gp;return this.pos+=8,e},readSFixed64:function(){var e=um(this.buf,this.pos)+s0(this.buf,this.pos+4)*gp;return this.pos+=8,e},readFloat:function(){var e=_m.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=_m.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,a,o=this.buf;return t=127&(a=o[this.pos++]),a<128?t:(t|=(127&(a=o[this.pos++]))<<7,a<128?t:(t|=(127&(a=o[this.pos++]))<<14,a<128?t:(t|=(127&(a=o[this.pos++]))<<21,a<128?t:function(l,r,u){var m,p,h=u.buf;if(m=(112&(p=h[u.pos++]))>>4,p<128||(m|=(127&(p=h[u.pos++]))<<3,p<128)||(m|=(127&(p=h[u.pos++]))<<10,p<128)||(m|=(127&(p=h[u.pos++]))<<17,p<128)||(m|=(127&(p=h[u.pos++]))<<24,p<128)||(m|=(1&(p=h[u.pos++]))<<31,p<128))return rd(l,m,r);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(a=o[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&o0?function(a,o,l){return o0.decode(a.subarray(o,l))}(this.buf,t,e):function(a,o,l){for(var r="",u=o;u<l;){var m,p,h,y=a[u],x=null,v=y>239?4:y>223?3:y>191?2:1;if(u+v>l)break;v===1?y<128&&(x=y):v===2?(192&(m=a[u+1]))==128&&(x=(31&y)<<6|63&m)<=127&&(x=null):v===3?(p=a[u+2],(192&(m=a[u+1]))==128&&(192&p)==128&&((x=(15&y)<<12|(63&m)<<6|63&p)<=2047||x>=55296&&x<=57343)&&(x=null)):v===4&&(p=a[u+2],h=a[u+3],(192&(m=a[u+1]))==128&&(192&p)==128&&(192&h)==128&&((x=(15&y)<<18|(63&m)<<12|(63&p)<<6|63&h)<=65535||x>=1114112)&&(x=null)),x===null?(x=65533,v=1):x>65535&&(x-=65536,r+=String.fromCharCode(x>>>10&1023|55296),x=56320|1023&x),r+=String.fromCharCode(x),u+=v}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xa.Bytes)return e.push(this.readVarint(t));var a=xs(this);for(e=e||[];this.pos<a;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xa.Bytes)return e.push(this.readSVarint());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xa.Bytes)return e.push(this.readBoolean());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xa.Bytes)return e.push(this.readFloat());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xa.Bytes)return e.push(this.readDouble());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xa.Bytes)return e.push(this.readFixed32());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xa.Bytes)return e.push(this.readSFixed32());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xa.Bytes)return e.push(this.readFixed64());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xa.Bytes)return e.push(this.readSFixed64());var t=xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Xa.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xa.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xa.Fixed32)this.pos+=4;else{if(t!==Xa.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var a=new Uint8Array(t);a.set(this.buf),this.buf=a,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),dd(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),dd(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),dd(this.buf,-1&e,this.pos),dd(this.buf,Math.floor(e*i0),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),dd(this.buf,-1&e,this.pos),dd(this.buf,Math.floor(e*i0),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,a){var o,l;if(t>=0?(o=t%4294967296|0,l=t/4294967296|0):(l=~(-t/4294967296),4294967295^(o=~(-t%4294967296))?o=o+1|0:(o=0,l=l+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(r,u,m){m.buf[m.pos++]=127&r|128,r>>>=7,m.buf[m.pos++]=127&r|128,r>>>=7,m.buf[m.pos++]=127&r|128,r>>>=7,m.buf[m.pos++]=127&r|128,m.buf[m.pos]=127&(r>>>=7)}(o,0,a),function(r,u){var m=(7&r)<<4;u.buf[u.pos++]|=m|((r>>>=3)?128:0),r&&(u.buf[u.pos++]=127&r|((r>>>=7)?128:0),r&&(u.buf[u.pos++]=127&r|((r>>>=7)?128:0),r&&(u.buf[u.pos++]=127&r|((r>>>=7)?128:0),r&&(u.buf[u.pos++]=127&r|((r>>>=7)?128:0),r&&(u.buf[u.pos++]=127&r)))))}(l,a)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(o,l,r){for(var u,m,p=0;p<l.length;p++){if((u=l.charCodeAt(p))>55295&&u<57344){if(!m){u>56319||p+1===l.length?(o[r++]=239,o[r++]=191,o[r++]=189):m=u;continue}if(u<56320){o[r++]=239,o[r++]=191,o[r++]=189,m=u;continue}u=m-55296<<10|u-56320|65536,m=null}else m&&(o[r++]=239,o[r++]=191,o[r++]=189,m=null);u<128?o[r++]=u:(u<2048?o[r++]=u>>6|192:(u<65536?o[r++]=u>>12|224:(o[r++]=u>>18|240,o[r++]=u>>12&63|128),o[r++]=u>>6&63|128),o[r++]=63&u|128)}return r}(this.buf,e,this.pos);var a=this.pos-t;a>=128&&n0(t,a,this),this.pos=t-1,this.writeVarint(a),this.pos+=a},writeFloat:function(e){this.realloc(4),_m.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),_m.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var a=0;a<t;a++)this.buf[this.pos++]=e[a]},writeRawMessage:function(e,t){this.pos++;var a=this.pos;e(t,this);var o=this.pos-a;o>=128&&n0(a,o,this),this.pos=a-1,this.writeVarint(o),this.pos+=o},writeMessage:function(e,t,a){this.writeTag(e,Xa.Bytes),this.writeRawMessage(t,a)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,u3,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,c3,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,p3,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,m3,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,f3,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,h3,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,g3,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,y3,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,b3,t)},writeBytesField:function(e,t){this.writeTag(e,Xa.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xa.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xa.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xa.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xa.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xa.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xa.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xa.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xa.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xa.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var _d=be(a0);const yp=3;function T3(e,t,a){t.glyphs=[],e===1&&a.readMessage(x3,t)}function x3(e,t,a){if(e===3){const{id:o,bitmap:l,width:r,height:u,left:m,top:p,advance:h}=a.readMessage(A3,{});t.glyphs.push({id:o,bitmap:new tl({width:r+2*yp,height:u+2*yp},l),metrics:{width:r,height:u,left:m,top:p,advance:h}})}else e===4?t.ascender=a.readSVarint():e===5&&(t.descender=a.readSVarint())}function A3(e,t,a){e===1?t.id=a.readVarint():e===2?t.bitmap=a.readBytes():e===3?t.width=a.readVarint():e===4?t.height=a.readVarint():e===5?t.left=a.readSVarint():e===6?t.top=a.readSVarint():e===7&&(t.advance=a.readVarint())}const l0=yp,Go={horizontal:1,vertical:2,horizontalOnly:3};class bu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,a){const o=new bu;return o.scale=t||1,o.fontStack=a,o}static forImage(t){const a=new bu;return a.imageName=t,a}}class ud{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,a){const o=new ud;for(let l=0;l<t.sections.length;l++){const r=t.sections[l];r.image?o.addImageSection(r):o.addTextSection(r,a)}return o}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCodePoint(t){return this.text.codePointAt(t)}verticalizePunctuation(t){this.text=function(a,o){let l="";for(let r=0;r<a.length;r++){const u=a.charCodeAt(r+1)||null,m=a.charCodeAt(r-1)||null;l+=!o&&(u&&yc(u)&&!yu[a[r+1]]||m&&yc(m)&&!yu[a[r-1]])||!yu[a[r]]?a[r]:yu[a[r]]}return l}(this.text,t)}trim(){let t=0;for(let o=0;o<this.text.length&&cm[this.text.charCodeAt(o)];o++)t++;let a=this.text.length;for(let o=this.text.length-1;o>=0&&o>=t&&cm[this.text.charCodeAt(o)];o--)a--;this.text=this.text.substring(t,a),this.sectionIndex=this.sectionIndex.slice(t,a)}substring(t,a){const o=new ud;return o.text=this.text.substring(t,a),o.sectionIndex=this.sectionIndex.slice(t,a),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,a)=>Math.max(t,this.sections[a].scale),0)}addTextSection(t,a){this.text+=t.text,this.sections.push(bu.forText(t.scale,t.fontStack||a));const o=this.sections.length-1;for(let l=0;l<t.text.length;++l)this.sectionIndex.push(o)}addImageSection(t){const a=t.image?t.image.namePrimary:"";if(a.length===0)return void ei("Can't add FormattedSection with an empty image.");const o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCodePoint(o),this.sections.push(bu.forImage(a)),this.sectionIndex.push(this.sections.length-1)):ei("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bp(e,t,a,o,l,r,u,m,p,h,y,x,v,C,R){const N=ud.fromFeature(e,l);x===Go.vertical&&N.verticalizePunctuation(v);let W=[];const D=function(J,st,_t,mt,bt,ft){if(!J)return[];const Ct=[],Dt=function(wt,Qt,Bt,pe,de,zt){let Pe=0;for(let ve=0;ve<wt.length();ve++){const fe=wt.getSection(ve);Pe+=r0(wt.getCodePoint(ve),fe,pe,de,Qt,zt)}return Pe/Math.max(1,Math.ceil(Pe/Bt))}(J,st,_t,mt,bt,ft),Et=J.text.indexOf("")>=0;let Wt=0;for(let wt=0;wt<J.length();wt++){const Qt=J.getSection(wt),Bt=J.getCodePoint(wt);if(cm[Bt]||(Wt+=r0(Bt,Qt,mt,bt,st,ft)),wt<J.length()-1){const pe=!((xt=Bt)<11904||!(ye["Bopomofo Extended"](xt)||ye.Bopomofo(xt)||ye["CJK Compatibility Forms"](xt)||ye["CJK Compatibility Ideographs"](xt)||ye["CJK Compatibility"](xt)||ye["CJK Radicals Supplement"](xt)||ye["CJK Strokes"](xt)||ye["CJK Symbols and Punctuation"](xt)||ye["CJK Unified Ideographs Extension A"](xt)||ye["CJK Unified Ideographs"](xt)||ye["Enclosed CJK Letters and Months"](xt)||ye["Halfwidth and Fullwidth Forms"](xt)||ye.Hiragana(xt)||ye["Ideographic Description Characters"](xt)||ye["Kangxi Radicals"](xt)||ye["Katakana Phonetic Extensions"](xt)||ye.Katakana(xt)||ye["Vertical Forms"](xt)||ye["Yi Radicals"](xt)||ye["Yi Syllables"](xt)));(v3[Bt]||pe||Qt.imageName)&&Ct.push(_0(wt+1,Wt,Dt,Ct,E3(Bt,J.getCodePoint(wt+1),pe&&Et),!1))}}var xt;return u0(_0(J.length(),Wt,Dt,Ct,0,!0))}(N,h,r,t,o,C),{processBidirectionalText:Y,processStyledBidirectionalText:j}=fo;if(Y&&N.sections.length===1){const J=Y(N.toString(),D);for(const st of J){const _t=new ud;_t.text=st,_t.sections=N.sections;for(let mt=0;mt<st.length;mt++)_t.sectionIndex.push(0);W.push(_t)}}else if(j){const J=j(N.text,N.sectionIndex,D);for(const st of J){const _t=new ud;_t.text=st[0],_t.sectionIndex=st[1],_t.sections=N.sections,W.push(_t)}}else W=function(J,st){const _t=[],mt=J.text;let bt=0;for(const ft of st)_t.push(J.substring(bt,ft)),bt=ft;return bt<mt.length&&_t.push(J.substring(bt,mt.length)),_t}(N,D);const K=[],tt={positionedLines:K,text:N.toString(),top:y[1],bottom:y[1],left:y[0],right:y[0],writingMode:x,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(J,st,_t,mt,bt,ft,Ct,Dt,Et,Wt,xt,wt){let Qt=0,Bt=0,pe=0;const de=Dt==="right"?1:Dt==="left"?0:.5;let zt=!1;for(const qe of bt){const We=qe.getSections();for(const $e of We){if($e.imageName)continue;const Ue=st[$e.fontStack];if(Ue&&(zt=Ue.ascender!==void 0&&Ue.descender!==void 0,!zt))break}if(!zt)break}let Pe=0;for(const qe of bt){qe.trim();const We=qe.getMaxScale(),$e=(We-1)*Yi,Ue={positionedGlyphs:[],lineOffset:0};J.positionedLines[Pe]=Ue;const la=Ue.positionedGlyphs;let He=0;if(!qe.length()){Bt+=ft,++Pe;continue}let wa=0,pa=0;for(let va=0;va<qe.length();va++){const ha=qe.getSection(va),Ka=qe.getSectionIndex(va),Sa=qe.getCodePoint(va);let ii=ha.scale,xi=null,Ui=null,Ga=null,Ja=Yi,Ni=0;const Li=!(Et===Go.horizontal||!xt&&!w_(Sa)||xt&&(cm[Sa]||(ve=Sa,ye.Arabic(ve)||ye["Arabic Supplement"](ve)||ye["Arabic Extended-A"](ve)||ye["Arabic Presentation Forms-A"](ve)||ye["Arabic Presentation Forms-B"](ve))));if(ha.imageName){const Pi=mt[ha.imageName];if(!Pi)continue;Ga=ha.imageName,J.iconsInText=J.iconsInText||!0,Ui=Pi.paddedRect;const ka=Pi.displaySize;ii=ii*Yi/wt,xi={width:ka[0],height:ka[1],left:0,top:-l0,advance:Li?ka[1]:ka[0],localGlyph:!1},Ni=zt?-xi.height*ii:We*Yi-17-ka[1]*ii,Ja=xi.advance;const Co=(Li?ka[0]:ka[1])*ii-Yi*We;Co>0&&Co>He&&(He=Co)}else{const Pi=_t[ha.fontStack];if(!Pi)continue;Pi[Sa]&&(Ui=Pi[Sa]);const ka=st[ha.fontStack];if(!ka)continue;const Co=ka.glyphs[Sa];if(!Co)continue;if(xi=Co.metrics,Ja=Sa!==8203?Yi:0,zt){const dl=ka.ascender!==void 0?Math.abs(ka.ascender):0,ro=ka.descender!==void 0?Math.abs(ka.descender):0,Zi=(dl+ro)*ii;wa<Zi&&(wa=Zi,pa=(dl-ro)/2*ii),Ni=-dl*ii}else Ni=(We-ii)*Yi-17}Li?(J.verticalizable=!0,la.push({glyph:Sa,imageName:Ga,x:Qt,y:Bt+Ni,vertical:Li,scale:ii,localGlyph:xi.localGlyph,fontStack:ha.fontStack,sectionIndex:Ka,metrics:xi,rect:Ui}),Qt+=Ja*ii+Wt):(la.push({glyph:Sa,imageName:Ga,x:Qt,y:Bt+Ni,vertical:Li,scale:ii,localGlyph:xi.localGlyph,fontStack:ha.fontStack,sectionIndex:Ka,metrics:xi,rect:Ui}),Qt+=xi.advance*ii+Wt)}la.length!==0&&(pe=Math.max(Qt-Wt,pe),zt?c0(la,de,He,pa,ft*We/2):c0(la,de,He,0,ft/2)),Qt=0;const ga=ft*We+He;Ue.lineOffset=Math.max(He,$e),Bt+=ga,++Pe}var ve;const fe=Bt,{horizontalAlign:Ht,verticalAlign:Re}=Tp(Ct);(function(qe,We,$e,Ue,la,He){const wa=(We-$e)*la,pa=-He*Ue;for(const ga of qe)for(const va of ga.positionedGlyphs)va.x+=wa,va.y+=pa})(J.positionedLines,de,Ht,Re,pe,fe),J.top+=-Re*fe,J.bottom=J.top+fe,J.left+=-Ht*pe,J.right=J.left+pe,J.hasBaseline=zt}(tt,t,a,o,W,u,m,p,x,h,v,R),!function(J){for(const st of J)if(st.positionedGlyphs.length!==0)return!1;return!0}(K)&&tt}const cm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},v3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function r0(e,t,a,o,l,r){if(t.imageName){const u=o[t.imageName];return u?u.displaySize[0]*t.scale*Yi/r+l:0}{const u=a[t.fontStack],m=u&&u.glyphs[e];return m?m.metrics.advance*t.scale+l:0}}function d0(e,t,a,o){const l=Math.pow(e-t,2);return o?e<t?l/2:2*l:l+Math.abs(a)*a}function E3(e,t,a){let o=0;return e===10&&(o-=1e4),a&&(o+=150),e!==40&&e!==65288||(o+=50),t!==41&&t!==65289||(o+=50),o}function _0(e,t,a,o,l,r){let u=null,m=d0(t,a,l,r);for(const p of o){const h=d0(t-p.x,a,l,r)+p.badness;h<=m&&(u=p,m=h)}return{index:e,x:t,priorBreak:u,badness:m}}function u0(e){return e?u0(e.priorBreak).concat(e.index):[]}function Tp(e){let t=.5,a=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:t,verticalAlign:a}}function c0(e,t,a,o,l){if(!(t||a||o||l))return;const r=e.length-1,u=e[r],m=(u.x+u.metrics.advance*u.scale)*t;for(let p=0;p<=r;p++)e[p].x-=m,e[p].y+=a+o+l}function I3(e,t,a,o){const{horizontalAlign:l,verticalAlign:r}=Tp(o),u=a[0]-e.displaySize[0]*l,m=a[1]-e.displaySize[1]*r;return{imagePrimary:e,imageSecondary:t,top:m,bottom:m+e.displaySize[1],left:u,right:u+e.displaySize[0]}}function m0(e,t,a,o,l,r){const u=e.imagePrimary;let m;if(u.content){const W=u.content,D=u.pixelRatio||1;m=[W[0]/D,W[1]/D,u.displaySize[0]-W[2]/D,u.displaySize[1]-W[3]/D]}const p=t.left*r,h=t.right*r;let y,x,v,C;a==="width"||a==="both"?(C=l[0]+p-o[3],x=l[0]+h+o[1]):(C=l[0]+(p+h-u.displaySize[0])/2,x=C+u.displaySize[0]);const R=t.top*r,N=t.bottom*r;return a==="height"||a==="both"?(y=l[1]+R-o[0],v=l[1]+N+o[2]):(y=l[1]+(R+N-u.displaySize[1])/2,v=y+u.displaySize[1]),{imagePrimary:u,imageSecondary:void 0,top:y,right:x,bottom:v,left:C,collisionPadding:m}}class As extends jt{constructor(t,a,o,l,r){super(t,a),this.angle=l,this.z=o,r!==void 0&&(this.segment=r)}clone(){return new As(this.x,this.y,this.z,this.angle,this.segment)}}function f0(e,t,a,o,l){if(t.segment===void 0)return!0;let r=t,u=t.segment+1,m=0;for(;m>-a/2;){if(u--,u<0)return!1;m-=e[u].dist(r),r=e[u]}m+=e[u].dist(e[u+1]),u++;const p=[];let h=0;for(;m<a/2;){const y=e[u],x=e[u+1];if(!x)return!1;let v=e[u-1].angleTo(y)-y.angleTo(x);for(v=Math.abs((v+3*Math.PI)%(2*Math.PI)-Math.PI),p.push({distance:m,angleDelta:v}),h+=v;m-p[0].distance>o;)h-=p.shift().angleDelta;if(h>l)return!1;u++,m+=y.dist(x)}return!0}function p0(e){let t=0;for(let a=0;a<e.length-1;a++)t+=e[a].dist(e[a+1]);return t}function h0(e,t,a){return e?.6*t*a:0}function g0(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function O3(e,t,a,o,l,r){const u=h0(a,l,r),m=g0(a,o)*r;let p=0;const h=p0(e)/2;for(let y=0;y<e.length-1;y++){const x=e[y],v=e[y+1],C=x.dist(v);if(p+C>h){const R=(h-p)/C,N=sa(x.x,v.x,R),W=sa(x.y,v.y,R),D=new As(N,W,0,v.angleTo(x),y);return!u||f0(e,D,m,u,t)?D:void 0}p+=C}}function C3(e,t,a,o,l,r,u,m,p){const h=h0(o,r,u),y=g0(o,l),x=y*u,v=e[0].x===0||e[0].x===p||e[0].y===0||e[0].y===p;return t-x<t/4&&(t=x+t/4),y0(e,v?t/2*m%t:(y/2+2*r)*u*m%t,t,h,a,x,v,!1,p)}function y0(e,t,a,o,l,r,u,m,p){const h=r/2,y=p0(e);let x=0,v=t-a,C=[];for(let R=0;R<e.length-1;R++){const N=e[R],W=e[R+1],D=N.dist(W),Y=W.angleTo(N);for(;v+a<x+D;){v+=a;const j=(v-x)/D,K=sa(N.x,W.x,j),tt=sa(N.y,W.y,j);if(K>=0&&K<p&&tt>=0&&tt<p&&v-h>=0&&v+h<=y){const J=new As(K,tt,0,Y,R);o&&!f0(e,J,r,o,l)||C.push(J)}}x+=D}return m||C.length||u||(C=y0(e,x/2,a,o,l,r,u,!0,p)),C}function b0(e,t,a,o,l){const r=[];for(let u=0;u<e.length;u++){const m=e[u];let p;for(let h=0;h<m.length-1;h++){let y=m[h],x=m[h+1];y.x<t&&x.x<t||(y.x<t?y=new jt(t,y.y+(t-y.x)/(x.x-y.x)*(x.y-y.y))._round():x.x<t&&(x=new jt(t,y.y+(t-y.x)/(x.x-y.x)*(x.y-y.y))._round()),y.y<a&&x.y<a||(y.y<a?y=new jt(y.x+(a-y.y)/(x.y-y.y)*(x.x-y.x),a)._round():x.y<a&&(x=new jt(y.x+(a-y.y)/(x.y-y.y)*(x.x-y.x),a)._round()),y.x>=o&&x.x>=o||(y.x>=o?y=new jt(o,y.y+(o-y.x)/(x.x-y.x)*(x.y-y.y))._round():x.x>=o&&(x=new jt(o,y.y+(o-y.x)/(x.x-y.x)*(x.y-y.y))._round()),y.y>=l&&x.y>=l||(y.y>=l?y=new jt(y.x+(l-y.y)/(x.y-y.y)*(x.x-y.x),l)._round():x.y>=l&&(x=new jt(y.x+(l-y.y)/(x.y-y.y)*(x.x-y.x),l)._round()),p&&y.equals(p[p.length-1])||(p=[y],r.push(p)),p.push(x)))))}}return r}function T0(e){let t=0,a=0;for(const u of e)t+=u.w*u.h,a=Math.max(a,u.w);e.sort((u,m)=>m.h-u.h);const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),a),h:1/0}];let l=0,r=0;for(const u of e)for(let m=o.length-1;m>=0;m--){const p=o[m];if(!(u.w>p.w||u.h>p.h)){if(u.x=p.x,u.y=p.y,r=Math.max(r,u.y+u.h),l=Math.max(l,u.x+u.w),u.w===p.w&&u.h===p.h){const h=o.pop();m<o.length&&(o[m]=h)}else u.h===p.h?(p.x+=u.w,p.w-=u.w):u.w===p.w?(p.y+=u.h,p.h-=u.h):(o.push({x:p.x+u.w,y:p.y,w:p.w-u.w,h:u.h}),p.y+=u.h,p.h-=u.h);break}}return{w:l,h:r,fill:t/(l*r)||0}}me(As,"Anchor");const Oo=1;class xp{constructor(t,{pixelRatio:a,version:o,stretchX:l,stretchY:r,content:u}){this.paddedRect=t,this.pixelRatio=a,this.stretchX=l,this.stretchY=r,this.content=u,this.version=o}get tl(){return[this.paddedRect.x+Oo,this.paddedRect.y+Oo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Oo,this.paddedRect.y+this.paddedRect.h-Oo]}get displaySize(){return[(this.paddedRect.w-2*Oo)/this.pixelRatio,(this.paddedRect.h-2*Oo)/this.pixelRatio]}}class x0{constructor(t,a){const o={},l={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,o,r),this.addImages(a,l,r);const{w:u,h:m}=T0(r),p=new Yo({width:u||1,height:m||1});for(const h in t){const y=t[h],x=o[h].paddedRect;Yo.copy(y.data,p,{x:0,y:0},{x:x.x+Oo,y:x.y+Oo},y.data,y.sdf)}for(const h in a){const y=a[h],x=l[h].paddedRect,v=x.x+Oo,C=x.y+Oo,R=y.data.width,N=y.data.height;Yo.copy(y.data,p,{x:0,y:0},{x:v,y:C},y.data),Yo.copy(y.data,p,{x:0,y:N-1},{x:v,y:C-1},{width:R,height:1}),Yo.copy(y.data,p,{x:0,y:0},{x:v,y:C+N},{width:R,height:1}),Yo.copy(y.data,p,{x:R-1,y:0},{x:v-1,y:C},{width:1,height:N}),Yo.copy(y.data,p,{x:0,y:0},{x:v+R,y:C},{width:1,height:N})}this.image=p,this.iconPositions=o,this.patternPositions=l}addImages(t,a,o){for(const l in t){const r=t[l],u={x:0,y:0,w:r.data.width+2*Oo,h:r.data.height+2*Oo};o.push(u),a[l]=new xp(u,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(l)}}patchUpdatedImages(t,a,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(l=>t.hasImage(l,o)),t.dispatchRenderCallbacks(this.haveRenderCallbacks,o);for(const l in t.getUpdatedImages(o))this.patchUpdatedImage(this.iconPositions[l],t.getImage(l,o),a),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l,o),a)}patchUpdatedImage(t,a,o){if(!t||!a||t.version===a.version)return;t.version=a.version;const[l,r]=t.tl,u=!!Object.keys(this.patternPositions).length;o.update(a.data,{useMipmap:u},{x:l,y:r})}}me(xp,"ImagePosition"),me(x0,"ImageAtlas");const Tu=1e20;function A0(e,t,a,o,l,r,u,m,p){for(let h=t;h<t+o;h++)v0(e,a*r+h,r,l,u,m,p);for(let h=a;h<a+l;h++)v0(e,h*r+t,1,o,u,m,p)}function v0(e,t,a,o,l,r,u){r[0]=0,u[0]=-Tu,u[1]=Tu,l[0]=e[t];for(let m=1,p=0,h=0;m<o;m++){l[m]=e[t+m*a];const y=m*m;do{const x=r[p];h=(l[m]-l[x]+y-x*x)/(m-x)/2}while(h<=u[p]&&--p>-1);p++,r[p]=m,u[p]=h,u[p+1]=Tu}for(let m=0,p=0;m<o;m++){for(;u[p+1]<m;)p++;const h=r[p],y=m-h;e[t+m*a]=l[h]+y*y}}const pn=2,Ap={none:0,ideographs:1,all:2};class cd{constructor(t,a,o){this.requestManager=t,this.localGlyphMode=a,this.localFontFamily=o,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t,a){this.urls[a]=t}getGlyphs(t,a,o){const l=[],r=this.urls[a]||At.GLYPHS_URL;for(const u in t)for(const m of t[u])l.push({stack:u,id:m});wo(l,({stack:u,id:m},p)=>{let h=this.entries[u];h||(h=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let y=h.glyphs[m];if(y!==void 0)return void p(null,{stack:u,id:m,glyph:y});if(y=this._tinySDF(h,u,m),y)return h.glyphs[m]=y,void p(null,{stack:u,id:m,glyph:y});const x=Math.floor(m/256);if(256*x>65535)return void p(new Error("glyphs > 65535 not supported"));if(h.ranges[x])return void p(null,{stack:u,id:m,glyph:y});let v=h.requests[x];v||(v=h.requests[x]=[],cd.loadGlyphRange(u,x,r,this.requestManager,(C,R)=>{if(R){h.ascender=R.ascender,h.descender=R.descender;for(const N in R.glyphs)this._doesCharSupportLocalGlyph(+N)||(h.glyphs[+N]=R.glyphs[+N]);h.ranges[x]=!0}for(const N of v)N(C,R);delete h.requests[x]})),v.push((C,R)=>{C?p(C):R&&p(null,{stack:u,id:m,glyph:R.glyphs[m]||null})})},(u,m)=>{if(u)o(u);else if(m){const p={};for(const{stack:h,id:y,glyph:x}of m)p[h]===void 0&&(p[h]={}),p[h].glyphs===void 0&&(p[h].glyphs={}),p[h].glyphs[y]=x&&{id:x.id,bitmap:x.bitmap.clone(),metrics:x.metrics},p[h].ascender=this.entries[h].ascender,p[h].descender=this.entries[h].descender;o(null,p)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Ap.none&&(this.localGlyphMode===Ap.all?!!this.localFontFamily:!!this.localFontFamily&&(ye["CJK Unified Ideographs"](t)||ye["Hangul Syllables"](t)||ye.Hiragana(t)||ye.Katakana(t)||ye["CJK Symbols and Punctuation"](t)||ye["CJK Unified Ideographs Extension A"](t)||ye["CJK Unified Ideographs Extension B"](t)))}_tinySDF(t,a,o){const l=this.localFontFamily;if(!l||!this._doesCharSupportLocalGlyph(o))return;let r=t.tinySDF;if(!r){let N="400";/bold/i.test(a)?N="900":/medium/i.test(a)?N="500":/light/i.test(a)&&(N="200"),r=t.tinySDF=new cd.TinySDF({fontFamily:l,fontWeight:N,fontSize:24*pn,buffer:3*pn,radius:8*pn}),r.fontWeight=N}if(this.localGlyphs[r.fontWeight][o])return this.localGlyphs[r.fontWeight][o];const u=String.fromCodePoint(o),{data:m,width:p,height:h,glyphWidth:y,glyphHeight:x,glyphLeft:v,glyphTop:C,glyphAdvance:R}=r.draw(u);return this.localGlyphs[r.fontWeight][o]={id:o,bitmap:new tl({width:p,height:h},m),metrics:{width:y/pn,height:x/pn,left:v/pn,top:C/pn-27,advance:R/pn,localGlyph:!0}}}}cd.loadGlyphRange=function(e,t,a,o,l){const r=256*t,u=r+255,m=o.transformRequest(o.normalizeGlyphsURL(a).replace("{fontstack}",e).replace("{range}",`${r}-${u}`),to.Glyphs);Pt(m,(p,h)=>{if(p)l(p);else if(h){const y={},x=function(v){return new _d(v).readFields(T3,{})}(h);for(const v of x.glyphs)y[v.id]=v;l(null,{glyphs:y,ascender:x.ascender,descender:x.descender})}})},cd.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:a=8,cutoff:o=.25,fontFamily:l="sans-serif",fontWeight:r="normal",fontStyle:u="normal"}={}){this.buffer=t,this.cutoff=o,this.radius=a;const m=this.size=e+4*t,p=this._createCanvas(m),h=this.ctx=p.getContext("2d",{willReadFrequently:!0});h.font=`${u} ${r} ${e}px ${l}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(m*m),this.gridInner=new Float64Array(m*m),this.f=new Float64Array(m),this.z=new Float64Array(m+1),this.v=new Uint16Array(m)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:a,actualBoundingBoxDescent:o,actualBoundingBoxLeft:l,actualBoundingBoxRight:r}=this.ctx.measureText(e),u=Math.ceil(a),m=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(r-l))),p=Math.min(this.size-this.buffer,u+Math.ceil(o)),h=m+2*this.buffer,y=p+2*this.buffer,x=Math.max(h*y,0),v=new Uint8ClampedArray(x),C={data:v,width:h,height:y,glyphWidth:m,glyphHeight:p,glyphTop:u,glyphLeft:0,glyphAdvance:t};if(m===0||p===0)return C;const{ctx:R,buffer:N,gridInner:W,gridOuter:D}=this;R.clearRect(N,N,m,p),R.fillText(e,N,N+u);const Y=R.getImageData(N,N,m,p);D.fill(Tu,0,x),W.fill(0,0,x);for(let j=0;j<p;j++)for(let K=0;K<m;K++){const tt=Y.data[4*(j*m+K)+3]/255;if(tt===0)continue;const J=(j+N)*h+K+N;if(tt===1)D[J]=0,W[J]=Tu;else{const st=.5-tt;D[J]=st>0?st*st:0,W[J]=st<0?st*st:0}}A0(D,0,0,h,y,h,this.f,this.v,this.z),A0(W,N,N,m,p,h,this.f,this.v,this.z);for(let j=0;j<x;j++){const K=Math.sqrt(D[j])-Math.sqrt(W[j]);v[j]=Math.round(255-255*(K/this.radius+this.cutoff))}return C}};const il=Oo;function E0(e,t,a,o){const l=[],r=e.imagePrimary,u=r.pixelRatio,m=r.paddedRect.w-2*il,p=r.paddedRect.h-2*il,h=e.right-e.left,y=e.bottom-e.top,x=r.stretchX||[[0,m]],v=r.stretchY||[[0,p]],C=(ft,Ct)=>ft+Ct[1]-Ct[0],R=x.reduce(C,0),N=v.reduce(C,0),W=m-R,D=p-N;let Y=0,j=R,K=0,tt=N,J=0,st=W,_t=0,mt=D;if(r.content&&o){const ft=r.content;Y=mm(x,0,ft[0]),K=mm(v,0,ft[1]),j=mm(x,ft[0],ft[2]),tt=mm(v,ft[1],ft[3]),J=ft[0]-Y,_t=ft[1]-K,st=ft[2]-ft[0]-j,mt=ft[3]-ft[1]-tt}const bt=(ft,Ct,Dt,Et)=>{const Wt=fm(ft.stretch-Y,j,h,e.left),xt=pm(ft.fixed-J,st,ft.stretch,R),wt=fm(Ct.stretch-K,tt,y,e.top),Qt=pm(Ct.fixed-_t,mt,Ct.stretch,N),Bt=fm(Dt.stretch-Y,j,h,e.left),pe=pm(Dt.fixed-J,st,Dt.stretch,R),de=fm(Et.stretch-K,tt,y,e.top),zt=pm(Et.fixed-_t,mt,Et.stretch,N),Pe=new jt(Wt,wt),ve=new jt(Bt,wt),fe=new jt(Bt,de),Ht=new jt(Wt,de),Re=new jt(xt/u,Qt/u),qe=new jt(pe/u,zt/u),We=t*Math.PI/180;if(We){const pa=Math.sin(We),ga=Math.cos(We),va=[ga,-pa,pa,ga];Pe._matMult(va),ve._matMult(va),Ht._matMult(va),fe._matMult(va)}const $e=ft.stretch+ft.fixed,Ue=Dt.stretch+Dt.fixed,la=Ct.stretch+Ct.fixed,He=Et.stretch+Et.fixed,wa=e.imageSecondary;return{tl:Pe,tr:ve,bl:Ht,br:fe,texPrimary:{x:r.paddedRect.x+il+$e,y:r.paddedRect.y+il+la,w:Ue-$e,h:He-la},texSecondary:wa?{x:wa.paddedRect.x+il+$e,y:wa.paddedRect.y+il+la,w:Ue-$e,h:He-la}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Re,pixelOffsetBR:qe,minFontScaleX:st/u/h,minFontScaleY:mt/u/y,isSDF:a}};if(o&&(r.stretchX||r.stretchY)){const ft=I0(x,W,R),Ct=I0(v,D,N);for(let Dt=0;Dt<ft.length-1;Dt++){const Et=ft[Dt],Wt=ft[Dt+1];for(let xt=0;xt<Ct.length-1;xt++)l.push(bt(Et,Ct[xt],Wt,Ct[xt+1]))}}else l.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:m+1},{fixed:0,stretch:p+1}));return l}function mm(e,t,a){let o=0;for(const l of e)o+=Math.max(t,Math.min(a,l[1]))-Math.max(t,Math.min(a,l[0]));return o}function I0(e,t,a){const o=[{fixed:-il,stretch:0}];for(const[l,r]of e){const u=o[o.length-1];o.push({fixed:l-u.stretch,stretch:u.stretch}),o.push({fixed:l-u.stretch,stretch:u.stretch+(r-l)})}return o.push({fixed:t+il,stretch:a}),o}function fm(e,t,a,o){return e/t*a+o}function pm(e,t,a,o){return e-t*a/o}function S3(e,t,a,o){const l=t+e.positionedLines[o].lineOffset;return o===0?a+l/2:a+(l+(t+e.positionedLines[o-1].lineOffset))/2}function R3(e,t=1,a=!1){let o=1/0,l=1/0,r=-1/0,u=-1/0;const m=e[0];for(let C=0;C<m.length;C++){const R=m[C];(!C||R.x<o)&&(o=R.x),(!C||R.y<l)&&(l=R.y),(!C||R.x>r)&&(r=R.x),(!C||R.y>u)&&(u=R.y)}const p=Math.min(r-o,u-l);let h=p/2;const y=new Io([],N3);if(p===0)return new jt(o,l);for(let C=o;C<r;C+=p)for(let R=l;R<u;R+=p)y.push(new md(C+h,R+h,h,e));let x=function(C){let R=0,N=0,W=0;const D=C[0];for(let Y=0,j=D.length,K=j-1;Y<j;K=Y++){const tt=D[Y],J=D[K],st=tt.x*J.y-J.x*tt.y;N+=(tt.x+J.x)*st,W+=(tt.y+J.y)*st,R+=3*st}return new md(N/R,W/R,0,C)}(e),v=y.length;for(;y.length;){const C=y.pop();(C.d>x.d||!x.d)&&(x=C,a&&console.log("found best %d after %d probes",Math.round(1e4*C.d)/1e4,v)),C.max-x.d<=t||(h=C.h/2,y.push(new md(C.p.x-h,C.p.y-h,h,e)),y.push(new md(C.p.x+h,C.p.y-h,h,e)),y.push(new md(C.p.x-h,C.p.y+h,h,e)),y.push(new md(C.p.x+h,C.p.y+h,h,e)),v+=4)}return a&&(console.log(`num probes: ${v}`),console.log(`best distance: ${x.d}`)),x.p}function N3(e,t){return t.max-e.max}class md{constructor(t,a,o,l){this.p=new jt(t,a),this.h=o,this.d=function(r,u){let m=!1,p=1/0;for(let h=0;h<u.length;h++){const y=u[h];for(let x=0,v=y.length,C=v-1;x<v;C=x++){const R=y[x],N=y[C];R.y>r.y!=N.y>r.y&&r.x<(N.x-R.x)*(r.y-R.y)/(N.y-R.y)+R.x&&(m=!m),p=Math.min(p,Zs(r,R,N))}}return(m?1:-1)*Math.sqrt(p)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}}const vp=Number.POSITIVE_INFINITY,L3=Math.sqrt(2);function O0(e,[t,a]){let o=0,l=0;if(a===vp){t<0&&(t=0);const r=t/L3;switch(e){case"top-right":case"top-left":l=r-7;break;case"bottom-right":case"bottom-left":l=7-r;break;case"bottom":l=7-t;break;case"top":l=t-7}switch(e){case"top-right":case"bottom-right":o=-r;break;case"top-left":case"bottom-left":o=r;break;case"left":o=t;break;case"right":o=-t}}else{switch(t=Math.abs(t),a=Math.abs(a),e){case"top-right":case"top-left":case"top":l=a-7;break;case"bottom-right":case"bottom-left":case"bottom":l=7-a}switch(e){case"top-right":case"bottom-right":case"right":o=-t;break;case"top-left":case"bottom-left":case"left":o=t}}return[o,l]}function Ep(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function P3(e,t,a,o,l,r,u,m,p,h,y,x,v,C,R){let N=r.textMaxSize.evaluate(t,{},x);N===void 0&&(N=u);const W=e.layers[0].layout,D=W.get("icon-offset").evaluate(t,{},x),Y=S0(a.horizontal)||a.vertical,j=v.name==="globe",K=Yi,tt=u/K,J=e.tilePixelRatio*N/K,st=(Wt=e.overscaling,e.zoom>18&&Wt>2&&(Wt>>=1),Math.max(se/(512*Wt),1)*W.get("symbol-spacing")),_t=W.get("text-padding")*e.tilePixelRatio,mt=W.get("icon-padding")*e.tilePixelRatio,bt=Oe(W.get("text-max-angle")),ft=W.get("text-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",Ct=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",Dt=W.get("symbol-placement"),Et=st/2;var Wt;const xt=W.get("icon-text-fit").evaluate(t,{},x),wt=W.get("icon-text-fit-padding").evaluate(t,{},x),Qt=xt!=="none";let Bt;e.hasAnyIconTextFit===!1&&Qt&&(e.hasAnyIconTextFit=!0),o&&Qt&&(e.allowVerticalPlacement&&a.vertical&&(Bt=m0(o,a.vertical,xt,wt,D,tt)),Y&&(o=m0(o,Y,xt,wt,D,tt)));const pe=(de,zt,Pe)=>{if(zt.x<0||zt.x>=se||zt.y<0||zt.y>=se)return;let ve=null;if(j){const{x:fe,y:Ht,z:Re}=v.projectTilePoint(zt.x,zt.y,Pe);ve={anchor:new As(fe,Ht,Re,0,void 0),up:v.upVector(Pe,zt.x,zt.y)}}(function(fe,Ht,Re,qe,We,$e,Ue,la,He,wa,pa,ga,va,ha,Ka,Sa,ii,xi,Ui,Ga,Ja,Ni,Li,Pi,ka,Co,dl){const ro=fe.addToLineVertexArray(Ht,qe);let Zi,Xo,Du,Dm,S1,R1,N1,L1=0,P1=0,w1=0,W1=0,jp=-1,qp=-1;const jn={};let M1=su("");const cr=Re?Re.anchor:Ht,$p=He.layout.get("icon-text-fit").evaluate(Ja,{},ka)!=="none";let Zp=0,Jp=0;if(He._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Zp,Jp]=He.layout.get("text-offset").evaluate(Ja,{},ka).map(So=>So*Yi):(Zp=He.layout.get("text-radial-offset").evaluate(Ja,{},ka)*Yi,Jp=vp),fe.allowVerticalPlacement&&We.vertical){const So=We.vertical;if(Ka)R1=Ip(So),la&&(N1=Ip(la));else{const Ro=He.layout.get("text-rotate").evaluate(Ja,{},ka)+90;Du=hm(wa,cr,Ht,pa,ga,va,So,ha,Ro,Sa),la&&(Dm=hm(wa,cr,Ht,pa,ga,va,la,xi,Ro))}}if($e){const So=He.layout.get("icon-rotate").evaluate(Ja,{},ka),Ro=E0($e,So,Li,$p),xd=la?E0(la,So,Li,$p):void 0;Xo=hm(wa,cr,Ht,pa,ga,va,$e,xi,So),L1=4*Ro.length;const D1=fe.iconSizeData;let mr=null;D1.kind==="source"?(mr=[fn*He.layout.get("icon-size").evaluate(Ja,{},ka)],mr[0]>ol&&ei(`${fe.layerIds[0]}: Value for "icon-size" is >= ${xu}. Reduce your "icon-size".`)):D1.kind==="composite"&&(mr=[fn*Ni.compositeIconSizes[0].evaluate(Ja,{},ka),fn*Ni.compositeIconSizes[1].evaluate(Ja,{},ka)],(mr[0]>ol||mr[1]>ol)&&ei(`${fe.layerIds[0]}: Value for "icon-size" is >= ${xu}. Reduce your "icon-size".`)),fe.addSymbols(fe.icon,Ro,mr,Ga,Ui,Ja,!1,Re,Ht,ro.lineStartIndex,ro.lineLength,-1,Pi,ka,Co,dl),jp=fe.icon.placedSymbolArray.length-1,xd&&(P1=4*xd.length,fe.addSymbols(fe.icon,xd,mr,Ga,Ui,Ja,Go.vertical,Re,Ht,ro.lineStartIndex,ro.lineLength,-1,Pi,ka,Co,dl),qp=fe.icon.placedSymbolArray.length-1)}for(const So in We.horizontal){const Ro=We.horizontal[So];Zi||(M1=su(Ro.text),Ka?S1=Ip(Ro):Zi=hm(wa,cr,Ht,pa,ga,va,Ro,ha,He.layout.get("text-rotate").evaluate(Ja,{},ka),Sa));const xd=Ro.positionedLines.length===1;if(w1+=C0(fe,Re,Ht,Ro,Ue,He,Ka,Ja,Sa,ro,We.vertical?Go.horizontal:Go.horizontalOnly,xd?Object.keys(We.horizontal):[So],jn,jp,Ni,Pi,ka,Co),xd)break}We.vertical&&(W1+=C0(fe,Re,Ht,We.vertical,Ue,He,Ka,Ja,Sa,ro,Go.vertical,["vertical"],jn,qp,Ni,Pi,ka,Co));let _l=-1;const Qp=(So,Ro)=>So?Math.max(So,Ro):Ro;_l=Qp(S1,_l),_l=Qp(R1,_l),_l=Qp(N1,_l);const $x=_l>-1?1:0;fe.glyphOffsetArray.length>=65535&&ei("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ja.sortKey!==void 0&&fe.addToSortKeyRanges(fe.symbolInstances.length,Ja.sortKey),fe.symbolInstances.emplaceBack(Ht.x,Ht.y,cr.x,cr.y,cr.z,jn.right>=0?jn.right:-1,jn.center>=0?jn.center:-1,jn.left>=0?jn.left:-1,jn.vertical>=0?jn.vertical:-1,jp,qp,M1,Zi!==void 0?Zi:fe.collisionBoxArray.length,Zi!==void 0?Zi+1:fe.collisionBoxArray.length,Du!==void 0?Du:fe.collisionBoxArray.length,Du!==void 0?Du+1:fe.collisionBoxArray.length,Xo!==void 0?Xo:fe.collisionBoxArray.length,Xo!==void 0?Xo+1:fe.collisionBoxArray.length,Dm||fe.collisionBoxArray.length,Dm?Dm+1:fe.collisionBoxArray.length,pa,w1,W1,L1,P1,$x,0,Zp,Jp,_l,0,$p?1:0)})(e,zt,ve,de,a,o,l,Bt,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,_t,ft,p,0,mt,Ct,D,t,r,h,y,x,C,R)};if(Dt==="line")for(const de of b0(t.geometry,0,0,se,se)){const zt=C3(de,st,bt,a.vertical||Y,o,K,J,e.overscaling,se);for(const Pe of zt)Y&&w3(e,Y.text,Et,Pe)||pe(de,Pe,x)}else if(Dt==="line-center"){for(const de of t.geometry)if(de.length>1){const zt=O3(de,bt,a.vertical||Y,o,K,J);zt&&pe(de,zt,x)}}else if(t.type==="Polygon")for(const de of dp(t.geometry,0)){const zt=R3(de,16);pe(de[0],new As(zt.x,zt.y,0,0,void 0),x)}else if(t.type==="LineString")for(const de of t.geometry)pe(de,new As(de[0].x,de[0].y,0,0,void 0),x);else if(t.type==="Point")for(const de of t.geometry)for(const zt of de)pe([zt],new As(zt.x,zt.y,0,0,void 0),x)}const xu=255,ol=xu*fn;function C0(e,t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W,D){const Y=function(tt,J,st,_t,mt,bt,ft,Ct){const Dt=[];if(J.positionedLines.length===0)return Dt;const Et=_t.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,Wt=function(pe){const de=pe[0],zt=pe[1],Pe=de*zt;return Pe>0?[de,-zt]:Pe<0?[-de,zt]:de===0?[zt,de]:[zt,-de]}(st);let xt=Math.abs(J.top-J.bottom);for(const pe of J.positionedLines)xt-=pe.lineOffset;const wt=J.positionedLines.length,Qt=xt/wt;let Bt=J.top-st[1];for(let pe=0;pe<wt;++pe){const de=J.positionedLines[pe];Bt=S3(J,Qt,Bt,pe);for(const zt of de.positionedGlyphs){if(!zt.rect)continue;const Pe=zt.rect||{};let ve=l0+1,fe=!0,Ht=1,Re=0;if(zt.imageName){const Ga=ft[zt.imageName];if(!Ga)continue;if(Ga.sdf){ei("SDF images are not supported in formatted text and will be ignored.");continue}fe=!1,Ht=Ga.pixelRatio,ve=Oo/Ht}const qe=(mt||Ct)&&zt.vertical,We=zt.metrics.advance*zt.scale/2,$e=zt.metrics,Ue=zt.rect;if(Ue===null)continue;Ct&&J.verticalizable&&(Re=zt.imageName?We-zt.metrics.width*zt.scale/2:0);const la=mt?[zt.x+We,zt.y]:[0,0];let He=[0,0],wa=[0,0],pa=!1;mt||(qe?(wa=[zt.x+We+Wt[0],zt.y+Wt[1]-Re],pa=!0):He=[zt.x+We+st[0],zt.y+st[1]-Re]);const ga=Ue.w*zt.scale/(Ht*(zt.localGlyph?pn:1)),va=Ue.h*zt.scale/(Ht*(zt.localGlyph?pn:1));let ha,Ka,Sa,ii;if(qe){const Ga=zt.y-Bt,Ja=new jt(-We,We-Ga),Ni=-Math.PI/2,Li=new jt(...wa);ha=new jt(-We+He[0],He[1]),ha._rotateAround(Ni,Ja)._add(Li),ha.x+=-Ga+We,ha.y-=($e.left-ve)*zt.scale;const Pi=zt.imageName?$e.advance*zt.scale:Yi*zt.scale,ka=String.fromCodePoint(zt.glyph);r3(ka)?ha.x+=(1-ve)*zt.scale:d3(ka)?ha.x+=Pi-$e.height*zt.scale+(-ve-1)*zt.scale:ha.x+=zt.imageName||$e.width+2*ve===Ue.w&&$e.height+2*ve===Ue.h?(Pi-va)/2:(Pi-($e.height+2*ve)*zt.scale)/2,Ka=new jt(ha.x,ha.y-ga),Sa=new jt(ha.x+va,ha.y),ii=new jt(ha.x+va,ha.y-ga)}else{const Ga=($e.left-ve)*zt.scale-We+He[0],Ja=(-$e.top-ve)*zt.scale+He[1],Ni=Ga+ga,Li=Ja+va;ha=new jt(Ga,Ja),Ka=new jt(Ni,Ja),Sa=new jt(Ga,Li),ii=new jt(Ni,Li)}if(Et){let Ga;Ga=mt?new jt(0,0):pa?new jt(Wt[0],Wt[1]):new jt(st[0],st[1]),ha._rotateAround(Et,Ga),Ka._rotateAround(Et,Ga),Sa._rotateAround(Et,Ga),ii._rotateAround(Et,Ga)}const xi=new jt(0,0),Ui=new jt(0,0);Dt.push({tl:ha,tr:Ka,bl:Sa,br:ii,texPrimary:Pe,texSecondary:void 0,writingMode:J.writingMode,glyphOffset:la,sectionIndex:zt.sectionIndex,isSDF:fe,pixelOffsetTL:xi,pixelOffsetBR:Ui,minFontScaleX:0,minFontScaleY:0})}}return Dt}(0,o,p,r,u,m,l,e.allowVerticalPlacement),j=e.textSizeData;let K=null;j.kind==="source"?(K=[fn*r.layout.get("text-size").evaluate(m,{},W)],K[0]>ol&&ei(`${e.layerIds[0]}: Value for "text-size" is >= ${xu}. Reduce your "text-size".`)):j.kind==="composite"&&(K=[fn*R.compositeTextSizes[0].evaluate(m,{},W),fn*R.compositeTextSizes[1].evaluate(m,{},W)],(K[0]>ol||K[1]>ol)&&ei(`${e.layerIds[0]}: Value for "text-size" is >= ${xu}. Reduce your "text-size".`)),e.addSymbols(e.text,Y,K,p,u,m,y,t,a,h.lineStartIndex,h.lineLength,C,N,W,D,!1);for(const tt of x)v[tt]=e.text.placedSymbolArray.length-1;return 4*Y.length}function S0(e){for(const t in e)return e[t];return null}function hm(e,t,a,o,l,r,u,m,p,h){let y=u.top,x=u.bottom,v=u.left,C=u.right;const R=u.collisionPadding;if(R&&(v-=R[0],y-=R[1],C+=R[2],x+=R[3]),p){const N=new jt(v,y),W=new jt(C,y),D=new jt(v,x),Y=new jt(C,x),j=Oe(p);let K=new jt(0,0);h&&(K=new jt(h[0],h[1])),N._rotateAround(j,K),W._rotateAround(j,K),D._rotateAround(j,K),Y._rotateAround(j,K),v=Math.min(N.x,W.x,D.x,Y.x),C=Math.max(N.x,W.x,D.x,Y.x),y=Math.min(N.y,W.y,D.y,Y.y),x=Math.max(N.y,W.y,D.y,Y.y)}return e.emplaceBack(t.x,t.y,t.z,a.x,a.y,v,y,C,x,m,o,l,r),e.length-1}function Ip(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function w3(e,t,a,o){const l=e.compareText;if(t in l){const r=l[t];for(let u=r.length-1;u>=0;u--)if(o.dist(r[u])<a)return!0}else l[t]=[];return l[t].push(o),!1}function R0(e,t){const a=e.fovAboveCenter,o=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,l=(e._camera.position[2]*e.worldSize-o)/Math.cos(e._pitch),r=Math.sin(a)*l/Math.sin(Math.max(Math.PI/2-e._pitch-a,.01)),u=Math.sin(e._pitch)*r+l;return Math.min(1.01*u,l*(1/e._horizonShift))}function Au(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const a=Math.pow(2,-e.z),o=e.x*a,l=(e.x+1)*a,r=e.y*a,u=(e.y+1)*a,m=ke(o),p=ke(l),h=da(r),y=da(u),x=t.project(m,h),v=t.project(p,h),C=t.project(p,y),R=t.project(m,y);let N=Math.min(x.x,v.x,C.x,R.x),W=Math.min(x.y,v.y,C.y,R.y),D=Math.max(x.x,v.x,C.x,R.x),Y=Math.max(x.y,v.y,C.y,R.y);const j=a/16;function K(J,st,_t,mt,bt,ft){const Ct=(_t+bt)/2,Dt=(mt+ft)/2,Et=t.project(ke(Ct),da(Dt)),Wt=Math.max(0,N-Et.x,W-Et.y,Et.x-D,Et.y-Y);N=Math.min(N,Et.x),D=Math.max(D,Et.x),W=Math.min(W,Et.y),Y=Math.max(Y,Et.y),Wt>j&&(K(J,Et,_t,mt,Ct,Dt),K(Et,st,Ct,Dt,bt,ft))}K(x,v,o,r,l,r),K(v,C,l,r,l,u),K(C,R,l,u,o,u),K(R,x,o,u,o,r),N-=j,W-=j,D+=j,Y+=j;const tt=1/Math.max(D-N,Y-W);return{scale:tt,x:N*tt,y:W*tt,x2:D*tt,y2:Y*tt,projection:t}}function N0(e,{x:t,y:a},o=0){return new jt(((t-o)*e.scale-e.x)*se,(a*e.scale-e.y)*se)}const W3=s.a6.identity(new Float32Array(16));class nl{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,a){return{x:0,y:0,z:0}}unproject(t,a){return new ct(0,0)}projectTilePoint(t,a,o){return{x:t,y:a,z:0}}locationPoint(t,a,o=!0){return t._coordinatePoint(t.locationCoordinate(a),o)}pixelsPerMeter(t,a){return ze(1,t)*a}pixelSpaceConversion(t,a,o){return 1}farthestPixelDistance(t){return R0(t,t.pixelsPerMeter)}pointCoordinate(t,a,o,l){const r=t.horizonLineFromTop(!1),u=new jt(a,Math.max(r,o));return t.rayIntersectionCoordinate(t.pointRayIntersection(u,l))}pointCoordinate3D(t,a,o){const l=new jt(a,o);if(t.elevation)return t.elevation.pointCoordinate(l);{const r=this.pointCoordinate(t,l.x,l.y,0);return[r.x,r.y,r.z]}}isPointAboveHorizon(t,a){if(t.elevation)return!this.pointCoordinate3D(t,a.x,a.y);const o=t.horizonLineFromTop();return a.y<o}createInversionMatrix(t,a){return W3}createTileMatrix(t,a,o){let l,r,u;const m=o.canonical,p=s.a6.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const h=Au(m,this);l=1,r=h.x+o.wrap*h.scale,u=h.y,s.a6.scale(p,p,[l/h.scale,l/h.scale,t.pixelsPerMeter/a])}else l=a/t.zoomScale(m.z),r=(m.x+Math.pow(2,m.z)*o.wrap)*l,u=m.y*l;return s.a6.translate(p,p,[r,u,0]),s.a6.scale(p,p,[l/se,l/se,1]),p}upVector(t,a,o){return[0,0,1]}upVectorScale(t,a,o){return{metersToTile:1}}}class M3 extends nl{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[a,o]=this.parallels=t.parallels||[29.5,45.5],l=Math.sin(Oe(a));this.n=(l+Math.sin(Oe(o)))/2,this.c=1+l*(2*this.n-l),this.r0=Math.sqrt(this.c)/this.n}project(t,a){const{n:o,c:l,r0:r}=this,u=Oe(t-this.center[0]),m=Oe(a),p=Math.sqrt(l-2*o*Math.sin(m))/o;return{x:p*Math.sin(u*o),y:p*Math.cos(u*o)-r,z:0}}unproject(t,a){const{n:o,c:l,r0:r}=this,u=r+a;let m=Math.atan2(t,Math.abs(u))*Math.sign(u);u*o<0&&(m-=Math.PI*Math.sign(t)*Math.sign(u));const p=Oe(this.center[0])*o;m=wi(m,-Math.PI-p,Math.PI-p);const h=Ve(ni(m/o)+this.center[0],-180,180),y=Math.asin(Ve((l-(t*t+u*u)*o*o)/(2*o),-1,1)),x=Ve(ni(y),-ta,ta);return new ct(h,x)}}const vu=1.340264,Eu=-.081106,Iu=893e-6,Ou=.003796,gm=Math.sqrt(3)/2;class D3 extends nl{project(t,a){a=a/180*Math.PI,t=t/180*Math.PI;const o=Math.asin(gm*Math.sin(a)),l=o*o,r=l*l*l;return{x:.5*(t*Math.cos(o)/(gm*(vu+3*Eu*l+r*(7*Iu+9*Ou*l)))/Math.PI+.5),y:1-.5*(o*(vu+Eu*l+r*(Iu+Ou*l))/Math.PI+1),z:0}}unproject(t,a){t=(2*t-.5)*Math.PI;let o=a=(2*(1-a)-1)*Math.PI,l=o*o,r=l*l*l;for(let y,x,v,C=0;C<12&&(x=o*(vu+Eu*l+r*(Iu+Ou*l))-a,v=vu+3*Eu*l+r*(7*Iu+9*Ou*l),y=x/v,o=Ve(o-y,-Math.PI/3,Math.PI/3),l=o*o,r=l*l*l,!(Math.abs(y)<1e-12));++C);const u=gm*t*(vu+3*Eu*l+r*(7*Iu+9*Ou*l))/Math.cos(o),m=Math.asin(Math.sin(o)/gm),p=Ve(180*u/Math.PI,-180,180),h=Ve(180*m/Math.PI,-ta,ta);return new ct(p,h)}}class F3 extends nl{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,a){return{x:.5+t/360,y:.5-a/360,z:0}}unproject(t,a){const o=360*(t-.5),l=Ve(360*(.5-a),-ta,ta);return new ct(o,l)}}const fd=Math.PI/2;function ym(e){return Math.tan((fd+e)/2)}class B3 extends nl{constructor(t){super(t),this.center=t.center||[0,30];const[a,o]=this.parallels=t.parallels||[30,30];let l=Oe(a),r=Oe(o);this.southernCenter=l+r<0,this.southernCenter&&(l=-l,r=-r);const u=Math.cos(l),m=ym(l);this.n=l===r?Math.sin(l):Math.log(u/Math.cos(r))/Math.log(ym(r)/m),this.f=u*Math.pow(ym(l),this.n)/this.n}project(t,a){a=Oe(a),this.southernCenter&&(a=-a),t=Oe(t-this.center[0]);const o=1e-6,{n:l,f:r}=this;r>0?a<-fd+o&&(a=-fd+o):a>fd-o&&(a=fd-o);const u=r/Math.pow(ym(a),l);let m=u*Math.sin(l*t),p=r-u*Math.cos(l*t);return m=.5*(m/Math.PI+.5),p=.5*(p/Math.PI+.5),{x:m,y:this.southernCenter?p:1-p,z:0}}unproject(t,a){t=(2*t-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:o,f:l}=this,r=l-a,u=Math.sign(r),m=Math.sign(o)*Math.sqrt(t*t+r*r);let p=Math.atan2(t,Math.abs(r))*u;r*o<0&&(p-=Math.PI*Math.sign(t)*u);const h=Ve(ni(p/o)+this.center[0],-180,180),y=Ve(ni(2*Math.atan(Math.pow(l/m,1/o))-fd),-ta,ta);return new ct(h,this.southernCenter?-y:y)}}class L0 extends nl{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,a){return{x:Xe(t),y:Fe(a),z:0}}unproject(t,a){const o=ke(t),l=da(a);return new ct(o,l)}}const P0=Oe(ta);class U3 extends nl{project(t,a){const o=(a=Oe(a))*a,l=o*o;return{x:.5*((t=Oe(t))*(.8707-.131979*o+l*(l*(.003971*o-.001529*l)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+o*(.015085+l*(.028874*o-.044475-.005916*l)))/Math.PI+1),z:0}}unproject(t,a){t=(2*t-.5)*Math.PI;let o=a=(2*(1-a)-1)*Math.PI,l=25,r=0,u=o*o;do{u=o*o;const h=u*u;r=(o*(1.007226+u*(.015085+h*(.028874*u-.044475-.005916*h)))-a)/(1.007226+u*(.045255+h*(.259866*u-.311325-.005916*11*h))),o=Ve(o-r,-P0,P0)}while(Math.abs(r)>1e-6&&--l>0);u=o*o;const m=Ve(ni(t/(.8707+u*(u*(u*u*u*(.003971-.001529*u)-.013791)-.131979))),-180,180),p=ni(o);return new ct(m,p)}}const w0=Oe(ta);class k3 extends nl{project(t,a){a=Oe(a),t=Oe(t);const o=Math.cos(a),l=2/Math.PI,r=Math.acos(o*Math.cos(t/2)),u=Math.sin(r)/r,m=.5*(t*l+2*o*Math.sin(t/2)/u)||0,p=.5*(a+Math.sin(a)/u)||0;return{x:.5*(m/Math.PI+.5),y:1-.5*(p/Math.PI+1),z:0}}unproject(t,a){let o=t=(2*t-.5)*Math.PI,l=a=(2*(1-a)-1)*Math.PI,r=25;const u=1e-6;let m=0,p=0;do{const h=Math.cos(l),y=Math.sin(l),x=2*y*h,v=y*y,C=h*h,R=Math.cos(o/2),N=Math.sin(o/2),W=2*R*N,D=N*N,Y=1-C*R*R,j=Y?1/Y:0,K=Y?Math.acos(h*R)*Math.sqrt(1/Y):0,tt=.5*(2*K*h*N+2*o/Math.PI)-t,J=.5*(K*y+l)-a,st=.5*j*(C*D+K*h*R*v)+1/Math.PI,_t=j*(W*x/4-K*y*N),mt=.125*j*(x*N-K*y*C*W),bt=.5*j*(v*R+K*D*h)+.5,ft=_t*mt-bt*st;m=(J*_t-tt*bt)/ft,p=(tt*mt-J*st)/ft,o=Ve(o-m,-Math.PI,Math.PI),l=Ve(l-p,-w0,w0)}while((Math.abs(m)>u||Math.abs(p)>u)&&--r>0);return new ct(ni(o),ni(l))}}class W0 extends nl{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Oe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,a){const{scale:o,cosPhi:l}=this;return{x:Oe(t)*l*o+.5,y:-Math.sin(Oe(a))/l*o+.5,z:0}}unproject(t,a){const{scale:o,cosPhi:l}=this,r=-(a-.5)/o,u=Ve(ni((t-.5)/o)/l,-180,180),m=Math.asin(Ve(r*l,-1,1)),p=Ve(ni(m),-ta,ta);return new ct(u,p)}}class z3 extends L0{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,a,o){const l=_u(t,a,o),r=$c(Kn(o));return s.N.transformMat4(l,l,r),{x:l[0],y:l[1],z:l[2]}}locationPoint(t,a){const o=It(a.lat,a.lng),l=s.N.normalize([],o),r=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(a),t._centerAltitude):t._centerAltitude,u=ze(1,0)*se*r;s.N.scaleAndAdd(o,o,l,u);const m=s.a6.identity(new Float64Array(16));return s.a6.multiply(m,t.pixelMatrix,t.globeMatrix),s.N.transformMat4(o,o,m),new jt(o[0],o[1])}pixelsPerMeter(t,a){return ze(1,0)*a}pixelSpaceConversion(t,a,o){const l=ze(1,t)*a,r=sa(ze(1,45)*a,l,o);return this.pixelsPerMeter(t,a)/r}createTileMatrix(t,a,o){const l=ep(Kn(o.canonical));return s.a6.multiply(new Float64Array(16),t.globeMatrix,l)}createInversionMatrix(t,a){const{center:o}=t,l=$c(Kn(a));return s.a6.rotateY(l,l,Oe(o.lng)),s.a6.rotateX(l,l,Oe(o.lat)),s.a6.scale(l,l,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(l)}pointCoordinate(t,a,o,l){return Zg(t,a,o,!0)||new ma(0,0)}pointCoordinate3D(t,a,o){const l=this.pointCoordinate(t,a,o,0);return[l.x,l.y,l.z]}isPointAboveHorizon(t,a){return!Zg(t,a.x,a.y,!1)}farthestPixelDistance(t){const a=function(l,r){const u=l.cameraToCenterDistance,m=l._centerAltitude*r,p=l._camera,h=l._camera.forward(),y=s.N.add([],s.N.scale([],h,-u),[0,0,m]),x=l.worldSize/(2*Math.PI),v=[0,0,-x],C=l.width/l.height,R=Math.tan(l.fovAboveCenter),N=s.N.scale([],p.up(),R),W=s.N.scale([],p.right(),R*C),D=s.N.normalize([],s.N.add([],s.N.add([],h,N),W)),Y=[];let j;if(new $f(y,D).closestPointOnSphere(v,x,Y)){const K=s.N.add([],Y,v),tt=s.N.sub([],K,y);j=Math.cos(l.fovAboveCenter)*s.N.length(tt)}else{const K=s.N.sub([],y,v),tt=s.N.sub([],v,y);s.N.normalize(tt,tt);const J=s.N.length(K)-x;j=Math.sqrt(J*(J+2*x));const st=Math.acos(j/(x+J))-Math.acos(s.N.dot(h,tt));j*=Math.cos(st)}return 1.01*j}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),o=Qs(t.zoom);if(o>0){const l=R0(t,ze(1,t.center.lat)*t.worldSize),r=t.worldSize/(2*Math.PI),u=Math.max(t.width,t.height)/t.worldSize*Math.PI;return sa(a,l+r*(1-Math.cos(u)),Math.pow(o,10))}return a}upVector(t,a,o){return _u(a,o,t,1)}upVectorScale(t){return{metersToTile:Kc(qc(Kn(t)))}}}function M0(e){const t=e.parallels,a=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new L0(e);case"equirectangular":return new F3(e);case"naturalEarth":return new U3(e);case"equalEarth":return new D3(e);case"winkelTripel":return new k3(e);case"albers":return a?new W0(e):new M3(e);case"lambertConformalConic":return a?new W0(e):new B3(e);case"globe":return new z3(e)}throw new Error(`Invalid projection name: ${e.name}`)}const H3=im.types,Y3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bm(e,t,a,o,l,r,u,m,p,h,y,x,v){const C=m?Math.min(ol,Math.round(m[0])):0,R=m?Math.min(ol,Math.round(m[1])):0;e.emplaceBack(t,a,Math.round(32*o),Math.round(32*l),r,u,(C<<1)+(p?1:0),R,16*h,16*y,256*x,256*v)}function Tm(e,t,a){e.emplaceBack(t,a)}function xm(e,t,a,o,l,r,u){e.emplaceBack(t,a,o,l,r,u)}function Am(e,t,a,o,l){e.emplaceBack(t,a,o,l),e.emplaceBack(t,a,o,l),e.emplaceBack(t,a,o,l),e.emplaceBack(t,a,o,l)}function G3(e){for(const t of e.sections)if(W_(t.text))return!0;return!1}class Op{constructor(t){this.layoutVertexArray=new Kl,this.indexArray=new Ii,this.programConfigurations=t,this.segments=new ai,this.dynamicLayoutVertexArray=new kn,this.opacityVertexArray=new Z_,this.placedSymbolArray=new Sc,this.iconTransitioningVertexArray=new qo,this.globeExtVertexArray=new $_,this.zOffsetVertexArray=new ql}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(t,a,o,l,r){this.isEmpty()||(o&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,J2.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,t3.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Y3,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=t.createVertexBuffer(this.iconTransitioningVertexArray,a3.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Q2.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||r)&&(this.zOffsetVertexBuffer=t.createVertexBuffer(this.zOffsetVertexArray,e3.members,!0)),this.opacityVertexBuffer.itemSize=1),(o||l)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}me(Op,"SymbolBuffers");class Cp{constructor(t,a,o){this.layoutVertexArray=new t,this.layoutAttributes=a,this.indexArray=new o,this.segments=new ai,this.collisionVertexArray=new Q_,this.collisionVertexArrayExt=new kn}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,i3.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,o3.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}me(Cp,"CollisionBuffers");class vm{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=s.a6.identity([]),this.placementViewportMatrix=s.a6.identity([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hp(this.zoom,a["text-size"]),this.iconSizeData=hp(this.zoom,a["icon-size"]);const o=this.layers[0].layout,l=o.get("symbol-sort-key"),r=o.get("symbol-z-order");this.canOverlap=o.get("text-allow-overlap")||o.get("icon-allow-overlap")||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=r!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(r==="viewport-y"||r==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=o.get("text-writing-mode").map(u=>Go[u]),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.sourceID=t.sourceID,this.projection=t.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=o.get("symbol-z-elevate")}createArrays(){this.text=new Op(new U(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Op(new U(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Lc,this.lineVertexArray=new Ql,this.symbolInstances=new Nc}calculateGlyphDependencies(t,a,o,l,r){for(let u=0;u<t.length;u++){const m=t.codePointAt(u);if(m===void 0)break;if(a[m]=!0,l&&r&&m<=65535){const p=yu[t.charAt(u)];p&&(a[p.charCodeAt(0)]=!0)}}}populate(t,a,o,l){const r=this.layers[0],u=r.layout,m=this.projection.name==="globe",p=u.get("text-font"),h=u.get("text-field"),y=u.get("icon-image"),x=(h.value.kind!=="constant"||h.value.value instanceof Di&&!h.value.value.isEmpty()||h.value.value.toString().length>0)&&(p.value.kind!=="constant"||p.value.value.length>0),v=y.value.kind!=="constant"||!!y.value.value||Object.keys(y.parameters).length>0,C=u.get("symbol-sort-key");if(this.features=[],!x&&!v)return;const R=a.iconDependencies,N=a.glyphDependencies,W=a.availableImages,D=new ja(this.zoom);for(const{feature:Y,id:j,index:K,sourceLayerIndex:tt}of t){const J=r._featureFilter.needGeometry,st=yi(Y,J);if(!r._featureFilter.filter(D,st,o))continue;if(J||(st.geometry=Ci(Y,o,l)),m&&Y.type!==1&&o.z<=5){const ft=st.geometry,Ct=.98078528056,Dt=(Et,Wt)=>{const xt=_u(Et.x,Et.y,o,1),wt=_u(Wt.x,Wt.y,o,1);return s.N.dot(xt,wt)<Ct};for(let Et=0;Et<ft.length;Et++)ft[Et]=Bi(ft[Et],Dt)}let _t,mt;if(x){const ft=r.getValueAndResolveTokens("text-field",st,o,W),Ct=Di.factory(ft);G3(Ct)&&(this.hasRTLText=!0),(!this.hasRTLText||Un()==="unavailable"||this.hasRTLText&&fo.isParsed())&&(_t=l3(Ct,r,st))}if(v){const ft=r.getValueAndResolveTokens("icon-image",st,o,W);mt=ft instanceof Le?ft:Le.fromString(ft)}if(!_t&&!mt)continue;const bt=this.sortFeaturesByKey?C.evaluate(st,{},o):void 0;if(this.features.push({id:j,text:_t,icon:mt,index:K,sourceLayerIndex:tt,geometry:st.geometry,properties:Y.properties,type:H3[Y.type],sortKey:bt}),mt&&(R[mt.namePrimary]=!0,mt.nameSecondary&&(R[mt.nameSecondary]=!0)),_t){const ft=p.evaluate(st,{},o).join(","),Ct=u.get("text-rotation-alignment")==="map"&&u.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Go.vertical)>=0;for(const Dt of _t.sections)if(Dt.image)R[Dt.image.namePrimary]=!0;else{const Et=Fn(_t.toString()),Wt=Dt.fontStack||ft,xt=N[Wt]=N[Wt]||{};this.calculateGlyphDependencies(Dt.text,xt,Ct,this.allowVerticalPlacement,Et)}}}u.get("symbol-placement")==="line"&&(this.features=function(Y){const j={},K={},tt=[];let J=0;function st(ft){tt.push(Y[ft]),J++}function _t(ft,Ct,Dt){const Et=K[ft];return delete K[ft],K[Ct]=Et,tt[Et].geometry[0].pop(),tt[Et].geometry[0]=tt[Et].geometry[0].concat(Dt[0]),Et}function mt(ft,Ct,Dt){const Et=j[Ct];return delete j[Ct],j[ft]=Et,tt[Et].geometry[0].shift(),tt[Et].geometry[0]=Dt[0].concat(tt[Et].geometry[0]),Et}function bt(ft,Ct,Dt){const Et=Dt?Ct[0][Ct[0].length-1]:Ct[0][0];return`${ft}:${Et.x}:${Et.y}`}for(let ft=0;ft<Y.length;ft++){const Ct=Y[ft],Dt=Ct.geometry,Et=Ct.text?Ct.text.toString():null;if(!Et){st(ft);continue}const Wt=bt(Et,Dt),xt=bt(Et,Dt,!0);if(Wt in K&&xt in j&&K[Wt]!==j[xt]){const wt=mt(Wt,xt,Dt),Qt=_t(Wt,xt,tt[wt].geometry);delete j[Wt],delete K[xt],K[bt(Et,tt[Qt].geometry,!0)]=Qt,tt[wt].geometry=null}else Wt in K?_t(Wt,xt,Dt):xt in j?mt(Wt,xt,Dt):(st(ft),j[Wt]=J-1,K[xt]=J-1)}return tt.filter(ft=>ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Y,j)=>Y.sortKey-j.sortKey)}update(t,a,o,l,r){const u=Object.keys(t).length!==0;if(u&&!this.stateDependentLayers.length)return;const m=u?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(t,a,m,o,l,r),this.icon.programConfigurations.updatePaintArrays(t,a,m,o,l,r)}updateZOffset(){const t=(r,u,m)=>{o+=u,o>r.length&&r.resize(o);for(let p=-u;p<0;p++)r.emplace(p+o,m)},a=(r,u,m)=>{l+=u,l>r.length&&r.resize(l);for(let p=-u;p<0;p++)r.emplace(p+l,m)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let o=0,l=0;for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r),{numHorizontalGlyphVertices:m,numVerticalGlyphVertices:p,numIconVertices:h}=u,y=u.zOffset,x=h>0;if((m>0||p>0)&&(t(this.text.zOffsetVertexArray,m,y),t(this.text.zOffsetVertexArray,p,y)),x){const{placedIconSymbolIndex:v,verticalPlacedIconSymbolIndex:C}=u;v>=0&&a(this.icon.zOffsetVertexArray,h,y),C>=0&&a(this.icon.zOffsetVertexArray,u.numVerticalIconVertices,y)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=M0(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,a){const o=this.lineVertexArray.length;if(t.segment!==void 0)for(const{x:l,y:r}of a)this.lineVertexArray.emplaceBack(l,r);return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(t,a,o,l,r,u,m,p,h,y,x,v,C,R,N,W){const D=t.indexArray,Y=t.layoutVertexArray,j=t.globeExtVertexArray,K=t.segments.prepareSegment(4*a.length,Y,D,this.canOverlap?u.sortKey:void 0),tt=this.glyphOffsetArray.length,J=K.vertexLength,st=this.allowVerticalPlacement&&m===Go.vertical?Math.PI/2:0,_t=u.text&&u.text.sections;for(let bt=0;bt<a.length;bt++){const{tl:ft,tr:Ct,bl:Dt,br:Et,texPrimary:Wt,texSecondary:xt,pixelOffsetTL:wt,pixelOffsetBR:Qt,minFontScaleX:Bt,minFontScaleY:pe,glyphOffset:de,isSDF:zt,sectionIndex:Pe}=a[bt],ve=K.vertexLength,fe=de[1];if(bm(Y,h.x,h.y,ft.x,fe+ft.y,Wt.x,Wt.y,o,zt,wt.x,wt.y,Bt,pe),bm(Y,h.x,h.y,Ct.x,fe+Ct.y,Wt.x+Wt.w,Wt.y,o,zt,Qt.x,wt.y,Bt,pe),bm(Y,h.x,h.y,Dt.x,fe+Dt.y,Wt.x,Wt.y+Wt.h,o,zt,wt.x,Qt.y,Bt,pe),bm(Y,h.x,h.y,Et.x,fe+Et.y,Wt.x+Wt.w,Wt.y+Wt.h,o,zt,Qt.x,Qt.y,Bt,pe),p){const{x:Ht,y:Re,z:qe}=p.anchor,[We,$e,Ue]=p.up;xm(j,Ht,Re,qe,We,$e,Ue),xm(j,Ht,Re,qe,We,$e,Ue),xm(j,Ht,Re,qe,We,$e,Ue),xm(j,Ht,Re,qe,We,$e,Ue),Am(t.dynamicLayoutVertexArray,Ht,Re,qe,st)}else Am(t.dynamicLayoutVertexArray,h.x,h.y,h.z,st);if(W){const Ht=xt||Wt;Tm(t.iconTransitioningVertexArray,Ht.x,Ht.y),Tm(t.iconTransitioningVertexArray,Ht.x+Ht.w,Ht.y),Tm(t.iconTransitioningVertexArray,Ht.x,Ht.y+Ht.h),Tm(t.iconTransitioningVertexArray,Ht.x+Ht.w,Ht.y+Ht.h)}D.emplaceBack(ve,ve+1,ve+2),D.emplaceBack(ve+1,ve+2,ve+3),K.vertexLength+=4,K.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(de[0]),bt!==a.length-1&&Pe===a[bt+1].sectionIndex||t.programConfigurations.populatePaintArrays(Y.length,u,u.index,{},C,R,N,_t&&_t[Pe])}const mt=p?p.anchor:h;t.placedSymbolArray.emplaceBack(mt.x,mt.y,mt.z,h.x,h.y,tt,this.glyphOffsetArray.length-tt,J,y,x,h.segment,o?o[0]:0,o?o[1]:0,l[0],l[1],m,0,!1,0,v,0)}_commitLayoutVertex(t,a,o,l,r,u,m){t.emplaceBack(a,o,l,r,u,Math.round(m.x),Math.round(m.y))}_addCollisionDebugVertices(t,a,o,l,r,u,m){const p=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),h=p.vertexLength,y=m.tileAnchorX,x=m.tileAnchorY;for(let C=0;C<4;C++)o.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(o.collisionVertexArrayExt,a,t.padding,m.zOffset),this._commitLayoutVertex(o.layoutVertexArray,l,r,u,y,x,new jt(t.x1,t.y1)),this._commitLayoutVertex(o.layoutVertexArray,l,r,u,y,x,new jt(t.x2,t.y1)),this._commitLayoutVertex(o.layoutVertexArray,l,r,u,y,x,new jt(t.x2,t.y2)),this._commitLayoutVertex(o.layoutVertexArray,l,r,u,y,x,new jt(t.x1,t.y2)),p.vertexLength+=4;const v=o.indexArray;v.emplaceBack(h,h+1),v.emplaceBack(h+1,h+2),v.emplaceBack(h+2,h+3),v.emplaceBack(h+3,h),p.primitiveLength+=4}_addTextDebugCollisionBoxes(t,a,o,l,r,u){for(let m=l;m<r;m++){const p=o.get(m),h=this.getSymbolInstanceTextSize(t,u,a,m);this._addCollisionDebugVertices(p,h,this.textCollisionBox,p.projectedAnchorX,p.projectedAnchorY,p.projectedAnchorZ,u)}}_addIconDebugCollisionBoxes(t,a,o,l,r,u){for(let m=l;m<r;m++){const p=o.get(m),h=this.getSymbolInstanceIconSize(t,a,u.placedIconSymbolIndex);this._addCollisionDebugVertices(p,h,this.iconCollisionBox,p.projectedAnchorX,p.projectedAnchorY,p.projectedAnchorZ,u)}}generateCollisionDebugBuffers(t,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cp(jl,e0.members,qo),this.iconCollisionBox=new Cp(jl,e0.members,qo);const o=ld(this.iconSizeData,t),l=ld(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(l,t,a,u.textBoxStartIndex,u.textBoxEndIndex,u),this._addTextDebugCollisionBoxes(l,t,a,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u),this._addIconDebugCollisionBoxes(o,t,a,u.iconBoxStartIndex,u.iconBoxEndIndex,u),this._addIconDebugCollisionBoxes(o,t,a,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u)}}getSymbolInstanceTextSize(t,a,o,l){const r=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:l),u=dm(this.textSizeData,t,r)/Yi;return this.tilePixelRatio*u}getSymbolInstanceIconSize(t,a,o){const l=this.icon.placedSymbolArray.get(o),r=dm(this.iconSizeData,t,l);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,a,o,l){t.emplaceBack(a,-o,-o,l),t.emplaceBack(a,o,-o,l),t.emplaceBack(a,o,o,l),t.emplaceBack(a,-o,o,l)}_updateTextDebugCollisionBoxes(t,a,o,l,r,u){for(let m=l;m<r;m++){const p=o.get(m),h=this.getSymbolInstanceTextSize(t,u,a,m);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,h,p.padding,u.zOffset)}}_updateIconDebugCollisionBoxes(t,a,o,l,r,u){for(let m=l;m<r;m++){const p=o.get(m),h=this.getSymbolInstanceIconSize(t,a,u.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,h,p.padding,u.zOffset)}}updateCollisionDebugBuffers(t,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const o=ld(this.iconSizeData,t),l=ld(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(l,t,a,u.textBoxStartIndex,u.textBoxEndIndex,u),this._updateTextDebugCollisionBoxes(l,t,a,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u),this._updateIconDebugCollisionBoxes(o,t,a,u.iconBoxStartIndex,u.iconBoxEndIndex,u),this._updateIconDebugCollisionBoxes(o,t,a,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,a,o,l,r,u,m,p,h){const y={};if(a<o){const{x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K,featureIndex:tt}=t.get(a);y.textBox={x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K},y.textFeatureIndex=tt}if(l<r){const{x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K,featureIndex:tt}=t.get(l);y.verticalTextBox={x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K},y.verticalTextFeatureIndex=tt}if(u<m){const{x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K,featureIndex:tt}=t.get(u);y.iconBox={x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K},y.iconFeatureIndex=tt}if(p<h){const{x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K,featureIndex:tt}=t.get(p);y.verticalIconBox={x1:x,y1:v,x2:C,y2:R,padding:N,projectedAnchorX:W,projectedAnchorY:D,projectedAnchorZ:Y,tileAnchorX:j,tileAnchorY:K},y.verticalIconFeatureIndex=tt}return y}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const o=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(t,a){const o=t.placedSymbolArray.get(a),l=o.vertexStartIndex+4*o.numGlyphs;for(let r=o.vertexStartIndex;r<l;r+=4)t.indexArray.emplaceBack(r,r+1,r+2),t.indexArray.emplaceBack(r+1,r+2,r+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(t),o=Math.cos(t),l=[],r=[],u=[];for(let m=0;m<this.symbolInstances.length;++m){u.push(m);const p=this.symbolInstances.get(m);l.push(0|Math.round(a*p.tileAnchorX+o*p.tileAnchorY)),r.push(p.featureIndex)}return u.sort((m,p)=>l[m]-l[p]||r[p]-r[m]),u}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let t=0;t<this.symbolInstances.length;++t)this.symbolInstanceIndexesSortedZOffset.push(t)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((t,a)=>this.symbolInstances.get(a).zOffset-this.symbolInstances.get(t).zOffset)}addToSortKeyRanges(t,a){const o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===a?o.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const o=this.symbolInstances.get(a);this.featureSortOrder.push(o.featureIndex);const{rightJustifiedTextSymbolIndex:l,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:u,verticalPlacedTextSymbolIndex:m,placedIconSymbolIndex:p,verticalPlacedIconSymbolIndex:h}=o;l>=0&&this.addIndicesForPlacedSymbol(this.text,l),r>=0&&r!==l&&this.addIndicesForPlacedSymbol(this.text,r),u>=0&&u!==r&&u!==l&&this.addIndicesForPlacedSymbol(this.text,u),m>=0&&this.addIndicesForPlacedSymbol(this.text,m),p>=0&&this.addIndicesForPlacedSymbol(this.icon,p),h>=0&&this.addIndicesForPlacedSymbol(this.icon,h)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}me(vm,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),vm.addDynamicAttributes=Am;const V3=new qa({"symbol-placement":new Zt(gt.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Se(gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(gt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Zt(gt.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Zt(gt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Zt(gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Se(gt.layout_symbol["icon-size"]),"icon-text-fit":new Se(gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Se(gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Se(gt.layout_symbol["icon-image"]),"icon-rotate":new Se(gt.layout_symbol["icon-rotate"]),"icon-padding":new Zt(gt.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(gt.layout_symbol["icon-keep-upright"]),"icon-offset":new Se(gt.layout_symbol["icon-offset"]),"icon-anchor":new Se(gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(gt.layout_symbol["text-rotation-alignment"]),"text-field":new Se(gt.layout_symbol["text-field"]),"text-font":new Se(gt.layout_symbol["text-font"]),"text-size":new Se(gt.layout_symbol["text-size"]),"text-max-width":new Se(gt.layout_symbol["text-max-width"]),"text-line-height":new Se(gt.layout_symbol["text-line-height"]),"text-letter-spacing":new Se(gt.layout_symbol["text-letter-spacing"]),"text-justify":new Se(gt.layout_symbol["text-justify"]),"text-radial-offset":new Se(gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(gt.layout_symbol["text-variable-anchor"]),"text-anchor":new Se(gt.layout_symbol["text-anchor"]),"text-max-angle":new Zt(gt.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(gt.layout_symbol["text-writing-mode"]),"text-rotate":new Se(gt.layout_symbol["text-rotate"]),"text-padding":new Zt(gt.layout_symbol["text-padding"]),"text-keep-upright":new Zt(gt.layout_symbol["text-keep-upright"]),"text-transform":new Se(gt.layout_symbol["text-transform"]),"text-offset":new Se(gt.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(gt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Zt(gt.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(gt.layout_symbol["text-optional"]),visibility:new Zt(gt.layout_symbol.visibility)});var Sp={paint:new qa({"icon-opacity":new Se(gt.paint_symbol["icon-opacity"]),"icon-emissive-strength":new Se(gt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Se(gt.paint_symbol["text-emissive-strength"]),"icon-color":new Se(gt.paint_symbol["icon-color"]),"icon-halo-color":new Se(gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Se(gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Se(gt.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(gt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Se(gt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Se(gt.paint_symbol["text-opacity"]),"text-color":new Se(gt.paint_symbol["text-color"],{runtimeType:Ao,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Se(gt.paint_symbol["text-halo-color"]),"text-halo-width":new Se(gt.paint_symbol["text-halo-width"]),"text-halo-blur":new Se(gt.paint_symbol["text-halo-blur"]),"text-translate":new Zt(gt.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(gt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Zt(gt.paint_symbol["icon-color-saturation"])}),layout:V3};class D0{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ss,this.defaultValue=t}evaluate(t){if(t.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(t.formattedSection))return a.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}me(D0,"FormatSectionOverride",{omit:["defaultValue"]});class Em extends oo{constructor(t,a,o){super(t,Sp,a,o)}recalculate(t,a){super.recalculate(t,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const o=this.layout.get("text-writing-mode");if(o){const l=[];for(const r of o)l.indexOf(r)<0&&l.push(r);this.layout._values["text-writing-mode"]=l}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,a,o,l){const r=this.layout.get(t).evaluate(a,{},o,l),u=this._unevaluatedLayout._values[t];return u.isDataDriven()||Wl(u.value)||!r?r:function(m,p){return p.replace(/{([^{}]+)}/g,(h,y)=>y in m?String(m[y]):"")}(a.properties,r)}createBucket(t){return new vm(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Sp.paint.overridableProperties){if(!Em.hasPaintOverride(this.layout,t))continue;const a=this.paint.get(t),o=new D0(a),l=new zr(o,a.property.specification,this.scope,this.options);let r=null;r=a.value.kind==="constant"||a.value.kind==="source"?new P_("source",l):new Ml("composite",l,a.value.zoomStops,a.value._interpolationType),this.paint._values[t]=new Ks(a.property,r,a.parameters)}}_handleOverridablePaintPropertyUpdate(t,a,o){return!(!this.layout||a.isDataDriven()||o.isDataDriven())&&Em.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,a){const o=t.get("text-field"),l=Sp.paint.properties[a];let r=!1;const u=m=>{for(const p of m)if(l.overrides&&l.overrides.hasOverride(p))return void(r=!0)};if(o.value.kind==="constant"&&o.value.value instanceof Di)u(o.value.value.sections);else if(o.value.kind==="source"){const m=h=>{r||(h instanceof an&&hi(h.value)===Ns?u(h.value.sections):h instanceof Ps?u(h.sections):h.eachChild(m))},p=o.value;p._styleExpression&&m(p._styleExpression.expression)}return r}getProgramIds(){const t=this.paint.get("icon-opacity").constantOr(1)!==0,a=this.paint.get("text-opacity").constantOr(1)!==0,o=[];return t&&o.push("symbolIcon"),a&&o.push("symbolSDF"),o}getDefaultProgramParams(t,a){return{config:new w(this,a),overrideFog:!1}}}const X3=new qa({visibility:new Zt(gt.layout_background.visibility)});var K3={paint:new qa({"background-color":new Zt(gt.paint_background["background-color"]),"background-pattern":new Zt(gt.paint_background["background-pattern"]),"background-opacity":new Zt(gt.paint_background["background-opacity"]),"background-emissive-strength":new Zt(gt.paint_background["background-emissive-strength"])}),layout:X3};const j3=new qa({visibility:new Zt(gt.layout_raster.visibility)});var q3={paint:new qa({"raster-opacity":new Zt(gt.paint_raster["raster-opacity"]),"raster-color":new ms(gt.paint_raster["raster-color"]),"raster-color-mix":new Zt(gt.paint_raster["raster-color-mix"]),"raster-color-range":new Zt(gt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Zt(gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(gt.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(gt.paint_raster["raster-saturation"]),"raster-contrast":new Zt(gt.paint_raster["raster-contrast"]),"raster-resampling":new Zt(gt.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(gt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Zt(gt.paint_raster["raster-emissive-strength"]),"raster-array-band":new Zt(gt.paint_raster["raster-array-band"]),"raster-elevation":new Zt(gt.paint_raster["raster-elevation"])}),layout:j3},Rp=Ia([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Np{constructor(t,a,o,l){this.context=t,this.format=o,this.texture=t.gl.createTexture(),this.update(a,l)}update(t,a,o){const{width:l,height:r}=t,{context:u}=this,{gl:m}=u;if(m.bindTexture(m.TEXTURE_2D,this.texture),u.pixelStoreUnpackFlipY.set(!1),u.pixelStoreUnpack.set(1),u.pixelStoreUnpackPremultiplyAlpha.set(this.format===m.RGBA&&(!a||a.premultiply!==!1)),o||this.size&&this.size[0]===l&&this.size[1]===r){const{x:p,y:h}=o||{x:0,y:0};if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||ImageBitmap&&t instanceof ImageBitmap)m.texSubImage2D(m.TEXTURE_2D,0,p,h,m.RGBA,m.UNSIGNED_BYTE,t);else{let y=this.format,x=m.UNSIGNED_BYTE;this.format===m.R32F&&(y=m.RED,x=m.FLOAT),m.texSubImage2D(m.TEXTURE_2D,0,p,h,l,r,y,x,t.data)}}else if(this.size=[l,r],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||ImageBitmap&&t instanceof ImageBitmap){let p=this.format;this.format===m.R8&&(p=m.RED),m.texImage2D(m.TEXTURE_2D,0,this.format,p,m.UNSIGNED_BYTE,t)}else{let p=this.format,h=this.format,y=m.UNSIGNED_BYTE;this.format===m.DEPTH_COMPONENT&&(p=m.DEPTH_COMPONENT16,y=m.UNSIGNED_SHORT),this.format===m.R8&&(h=m.RED),this.format===m.R32F&&(y=m.FLOAT,h=m.RED),m.texImage2D(m.TEXTURE_2D,0,p,l,r,0,h,y,t.data)}this.useMipmap=!!(a&&a.useMipmap),this.useMipmap&&m.generateMipmap(m.TEXTURE_2D)}bind(t,a,o=!1){const{context:l}=this,{gl:r}=l;r.bindTexture(r.TEXTURE_2D,this.texture),t!==this.minFilter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap&&!o?t===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_LINEAR:t),this.minFilter=t),a!==this.wrapS&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,a),this.wrapS=a)}bindExtraParam(t,a,o,l){const{context:r}=this,{gl:u}=r;u.bindTexture(u.TEXTURE_2D,this.texture),a!==this.magFilter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,a),this.magFilter=a),t!==this.minFilter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?t===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_LINEAR:t),this.minFilter=t),o!==this.wrapS&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,o),this.wrapS=o),l!==this.wrapT&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,l),this.wrapT=l)}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Im{constructor(t,a){this.context=t,this.texture=a}bind(t,a){const{context:o}=this,{gl:l}=o;l.bindTexture(l.TEXTURE_2D,this.texture),t!==this.minFilter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t),this.minFilter=t),a!==this.wrapS&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,a),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,a),this.wrapS=a)}}function Om(e,t,a,o,l,r,u,m){const p=[e,t,1,a,o,1,l,r,1],h=[u,m,1],y=s.co.adjoint([],p),[x,v,C]=s.N.transformMat3(h,h,y);return s.co.multiply(p,p,[x,0,0,0,v,0,0,0,C])}function F0(e,t,a,o,l,r,u,m){const p=function(h,y,x,v,C,R,N,W){const D=Om(0,0,1,0,1,1,0,1),Y=Om(h,y,x,v,C,R,N,W),j=s.co.adjoint([],D);return s.co.multiply(Y,Y,j)}(e,t,a,o,l,r,u,m);return[p[2]/p[8]/se,p[5]/p[8]/se]}function Cm(e){return[e[0],Math.min(Math.max(e[1],-ta),ta)]}class B0 extends Cs{constructor(t,a,o,l){super(),this.id=t,this.dispatcher=o,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(l),this.options=a,this._dirty=!1}load(t,a){if(this._loaded=a||!1,this.fire(new ts("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return t&&(this.coordinates=t),this._loaded=!0,void this._finishLoading();this._imageRequest=ne(this.map._requestManager.transformRequest(this.url,to.Image),(o,l)=>{this._imageRequest=null,this._loaded=!0,o?this.fire(new Dd(o)):l&&(this.image=l instanceof HTMLImageElement?Gt.getImageData(l):l,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return t.url?(this._imageRequest&&t.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=t.url,this.load(t.coordinates,this._loaded),this):this}setTexture(t){if(!(t.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Im(this.map.painter.context,t.handle),this.width=t.dimensions[0],this.height=t.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new ts("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Im||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(t){if(this.coordinates=t,this._boundsArray=void 0,this._unsupportedCoords=!1,!t.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let a=t[0][1],o=t[0][1];for(const r of t)r[1]>o&&(o=r[1]),r[1]<a&&(a=r[1]);const l=(o+a)/2;if(l>ta?this.onNorthPole=!0:l<-ta&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const r=t.map(ma.fromLngLat);this.tileID=function(u){let m=1/0,p=1/0,h=-1/0,y=-1/0;for(const N of u)m=Math.min(m,N.x),p=Math.min(p,N.y),h=Math.max(h,N.x),y=Math.max(y,N.y);const x=Math.max(h-m,y-p),v=Math.max(0,Math.floor(-Math.log(x)/Math.LN2)),C=Math.pow(2,v);let R=Math.floor((m+h)/2*C);return R>1&&(R-=1),new kt(v,R,Math.floor((p+y)/2*C))}(r),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new ts("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(t){for(const D in this.tiles){const Y=this.tiles[D];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const a=Au(new kt(0,0,0),this.map.transform.projection),o=[a.projection.project(this.coordinates[0][0],this.coordinates[0][1]),a.projection.project(this.coordinates[1][0],this.coordinates[1][1]),a.projection.project(this.coordinates[2][0],this.coordinates[2][1]),a.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(D){const Y=D[1].x-D[0].x,j=D[1].y-D[0].y,K=D[2].x-D[1].x,tt=D[2].y-D[1].y,J=D[3].x-D[2].x,st=D[3].y-D[2].y,_t=D[0].x-D[3].x,mt=D[0].y-D[3].y,bt=Y*tt-K*j,ft=K*st-J*tt,Ct=J*mt-_t*st,Dt=_t*j-Y*mt;return bt>0&&ft>0&&Ct>0&&Dt>0||bt<0&&ft<0&&Ct<0&&Dt<0}(o))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const l=Au(this.tileID,this.map.transform.projection),[r,u,m,p]=this.coordinates.map(D=>{const Y=l.projection.project(D[0],D[1]);return N0(l,Y)._round()});this.perspectiveTransform=F0(r.x,r.y,u.x,u.y,m.x,m.y,p.x,p.y);const h=this._boundsArray=new dn;h.emplaceBack(r.x,r.y,0,0),h.emplaceBack(u.x,u.y,se,0),h.emplaceBack(p.x,p.y,0,se),h.emplaceBack(m.x,m.y,se,se),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=t.createVertexBuffer(h,Rp.members),this.boundsSegments=ai.simpleSegment(0,0,4,2);const y=[],x=[Cm((v=this.coordinates)[0]),Cm(v[1]),Cm(v[2]),Cm(v[3])];var v;const[C,R,N,W]=function(D){let Y=D[0][0],j=Y,K=D[0][1],tt=K;for(let J=1;J<D.length;J++)D[J][0]<Y?Y=D[J][0]:D[J][0]>j&&(j=D[J][0]),D[J][1]<K?K=D[J][1]:D[J][1]>tt&&(tt=D[J][1]);return[Y,K,j-Y,tt-K]}(x);{const D=new dn,[Y,j,K,tt]=function(wt){let Qt=wt[0].x,Bt=Qt,pe=wt[0].y,de=pe;for(let zt=1;zt<wt.length;zt++)wt[zt].x<Qt?Qt=wt[zt].x:wt[zt].x>Bt&&(Bt=wt[zt].x),wt[zt].y<pe?pe=wt[zt].y:wt[zt].y>de&&(de=wt[zt].y);return[Qt,pe,Bt-Qt,de-pe]}(o),J=wt=>[(wt.x-Y)/K,(wt.y-j)/tt],[st,_t,mt,bt]=o.map(J),ft=function(wt,Qt,Bt,pe,de,zt,Pe,ve){const fe=Om(0,0,1,0,1,1,0,1),Ht=Om(wt,Qt,Bt,pe,de,zt,Pe,ve),Re=s.co.adjoint([],Ht);return s.co.multiply(fe,fe,Re)}(st[0],st[1],_t[0],_t[1],mt[0],mt[1],bt[0],bt[1]);this.elevatedGlobePerspectiveTransform=F0(st[0],st[1],_t[0],_t[1],mt[0],mt[1],bt[0],bt[1]);const Ct=(wt,Qt)=>{y.push(wt.lng);const Bt=Math.round((wt.lng-C)/N*se),pe=Math.round((wt.lat-R)/W*se),de=J(Qt),zt=s.N.transformMat3([],[de[0],de[1],1],ft),Pe=Math.round(zt[0]/zt[2]*se),ve=Math.round(zt[1]/zt[2]*se);D.emplaceBack(Bt,pe,Pe,ve)},Dt=o[3].x-o[0].x,Et=o[3].y-o[0].y,Wt=o[2].x-o[1].x,xt=o[2].y-o[1].y;for(let wt=0;wt<65;wt++){const Qt=wt/64,Bt=[o[0].x+Qt*Dt,o[0].y+Qt*Et],pe=[o[1].x+Qt*Wt,o[1].y+Qt*xt],de=pe[0]-Bt[0],zt=pe[1]-Bt[1];for(let Pe=0;Pe<65;Pe++){const ve=Pe/64,fe={x:Bt[0]+de*ve,y:Bt[1]+zt*ve,z:0};Ct(a.projection.unproject(fe.x,fe.y),fe)}}this.elevatedGlobeVertexBuffer=t.createVertexBuffer(D,Rp.members)}{this.maxLongitudeTriangleSize=0;let D=[],Y=new Ii;const j=(K,tt,J)=>{Y.emplaceBack(K,tt,J);const st=y[K],_t=y[tt],mt=y[J],bt=Math.min(Math.min(st,_t),mt),ft=Math.max(Math.max(st,_t),mt)-bt;ft>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=ft),D.push(bt+ft/2)};for(let K=0;K<64;K++)for(let tt=0;tt<64;tt++){const J=65*K+tt,st=J+1,_t=J+65,mt=_t+1;j(J,_t,st),j(st,_t,mt)}[D,Y]=function(K,tt){const J=Array.from({length:K.length},(mt,bt)=>bt);J.sort((mt,bt)=>K[mt]-K[bt]);const st=[],_t=new Ii;for(let mt=0;mt<J.length;mt++){const bt=J[mt];st.push(K[bt]);const ft=3*bt,Ct=ft+1;_t.emplaceBack(tt.uint16[ft],tt.uint16[Ct],tt.uint16[Ct+1])}return[st,_t]}(D,Y),this.elevatedGlobeTrianglesCenterLongitudes=D,this.elevatedGlobeIndexBuffer=t.createIndexBuffer(Y)}this.elevatedGlobeSegments=ai.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,N/se,0,W/se,0,0,R,C,0])}prepare(){const t=Object.keys(this.tiles).length!==0;if(this.tileID&&!t)return;const a=this.map.painter.context,o=a.gl;!this._dirty||this.texture instanceof Im||(this.texture?this.texture.update(this.image):(this.texture=new Np(a,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE)),this._dirty=!1),t&&this._prepareData(a)}loadTile(t,a){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},a(null)):(t.state="errored",a(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(t){const a=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!a)return null;const o=this.elevatedGlobeTrianglesCenterLongitudes;let l=((y,x)=>y+360*Math.round((x-y)/360))(t+180,o[0]);const r=new ai,u=(y,x)=>{r.segments.push({vertexOffset:0,primitiveOffset:y,vertexLength:a.segments[0].vertexLength,primitiveLength:x,sortKey:void 0,vaos:{}})},m=.51*this.maxLongitudeTriangleSize;if(Math.abs(o[0]-l)<=m){const y=Nt(o,0,o.length,l+m);return y===o.length||u(y,dt(o,y+1,o.length,l+360-m)-y),r}l<o[0]&&(l+=360);const p=dt(o,0,o.length,l-m);if(p===o.length)return u(0,o.length),r;u(0,p-0);const h=Nt(o,p+1,o.length,l+m);return h!==o.length&&u(h,o.length-h),r}}const $3=(Math.pow(256,2)-1)/16907520;class U0 extends oo{constructor(t,a,o){super(t,q3,a,o),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isLayerDraped(t){return!(t&&t._source instanceof B0&&(t._source.onNorthPole||t._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(t){t!=="raster-color"&&t!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(t){if(!this.hasColorMap()||!this._curRampRange)return;const a=this._transitionablePaint._values["raster-color"].value.expression,[o,l]=t||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(o)&&isNaN(l)||o===this._curRampRange[0]&&l===this._curRampRange[1]||(this.colorRamp=uu({expression:a,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:o,end:l}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[o,l])}}const Z3=new qa({visibility:new Zt(gt["layout_raster-particle"].visibility)});var J3={paint:new qa({"raster-particle-array-band":new Zt(gt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Zt(gt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new ms(gt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Zt(gt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Zt(gt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Zt(gt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Zt(gt["paint_raster-particle"]["raster-particle-reset-rate-factor"])}),layout:Z3};class k0 extends oo{constructor(t,a,o){super(t,J3,a,o),this._updateColorRamp(),this.onRemove=l=>{this.colorRampTexture&&this.colorRampTexture.destroy(),this.transformFeedbackObject&&l.painter.context.gl.deleteTransformFeedback(this.transformFeedbackObject),this.tileFramebuffer&&this.tileFramebuffer.destroy()},this.lastInvalidatedAt=Gt.now()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isLayerDraped(t){return!1}_handleSpecialPaintPropertyUpdate(t){t!=="raster-particle-color"&&t!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),t==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const t=this._transitionablePaint._values["raster-particle-color"].value.expression,a=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=uu({expression:t,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:a}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Gt.now()}}class Q3 extends oo{constructor(t,a){super(t,{},a),this.implementation=t,t.slot&&(this.slot=t.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(t){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}const tx=new qa({visibility:new Zt(gt.layout_sky.visibility)});var ex={paint:new qa({"sky-type":new Zt(gt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Zt(gt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Zt(gt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Zt(gt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Zt(gt.paint_sky["sky-gradient-radius"]),"sky-gradient":new ms(gt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Zt(gt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Zt(gt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Zt(gt.paint_sky["sky-opacity"])}),layout:tx};function Lp(e,t,a){const o=[0,0,1],l=s.bi.identity([]);return s.bi.rotateY(l,l,a?-Oe(e)+Math.PI:Oe(e)),s.bi.rotateX(l,l,-Oe(t)),s.N.transformQuat(o,o,l),s.N.normalize(o,o)}var ax={paint:new qa({})};function z0(e,t){const a=Sm(e.projection,e.zoom,e.width,e.height),o=function(r,u,m,p,h){const y=new ct(m.lng-180*sl,m.lat),x=new ct(m.lng+180*sl,m.lat),v=r.project(y.lng,y.lat),C=r.project(x.lng,x.lat),R=-Math.atan2(C.y-v.y,C.x-v.x),N=ma.fromLngLat(m);N.y=Ve(N.y,-1+sl,1-sl);const W=N.toLngLat(),D=r.project(W.lng,W.lat),Y=ma.fromLngLat(W);Y.x+=sl;const j=Y.toLngLat(),K=r.project(j.lng,j.lat),tt=G0(K.x-D.x,K.y-D.y,R),J=ma.fromLngLat(W);J.y+=sl;const st=J.toLngLat(),_t=r.project(st.lng,st.lat),mt=G0(_t.x-D.x,_t.y-D.y,R),bt=Math.abs(tt.x)/Math.abs(mt.y),ft=s.a6.identity([]);s.a6.rotateZ(ft,ft,-R*(1-(h?0:p)));const Ct=s.a6.identity([]);return s.a6.scale(Ct,Ct,[1,1-(1-bt)*p,1]),Ct[4]=-mt.x/mt.y*p,s.a6.rotateZ(Ct,Ct,R),s.a6.multiply(Ct,ft,Ct),Ct}(e.projection,0,e.center,a,t),l=H0(e);return s.a6.scale(o,o,[l,l,1]),o}function H0(e){const t=e.projection,a=Sm(e.projection,e.zoom,e.width,e.height),o=Y0(t,e.center),l=Y0(t,ct.convert(t.center));return Math.pow(2,o*a+(1-a)*l)}function Sm(e,t,a,o,l=1/0){const r=e.range;if(!r)return 0;const u=Math.min(l,Math.max(a,o)),m=Math.log(u/1024)/Math.LN2;return Po(r[0]+m,r[1]+m,t)}const sl=1/4e4;function Y0(e,t){const a=Ve(t.lat,-ta,ta),o=new ct(t.lng-180*sl,a),l=new ct(t.lng+180*sl,a),r=e.project(o.lng,a),u=e.project(l.lng,a),m=ma.fromLngLat(o),p=ma.fromLngLat(l),h=u.x-r.x,y=u.y-r.y,x=p.x-m.x,v=p.y-m.y,C=Math.sqrt((x*x+v*v)/(h*h+y*y));return Math.log(C)/Math.LN2}function G0(e,t,a){const o=Math.cos(a),l=Math.sin(a);return{x:e*o-t*l,y:e*l+t*o}}function V0(e,t,a){s.a6.identity(e),s.a6.rotateZ(e,e,Oe(t[2])),s.a6.rotateX(e,e,Oe(t[0])),s.a6.rotateY(e,e,Oe(t[1])),s.a6.scale(e,e,a),s.a6.multiply(e,e,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Rm(e,t,a,o,l,r,u,m){const p=[a[0]-t[0],a[1]-t[1],0],h=[o[0]-t[0],o[1]-t[1],0];if(s.N.length(p)<1e-12||s.N.length(h)<1e-12)return s.bi.identity(e);const y=s.N.cross([],p,h);s.N.normalize(y,y),s.N.subtract(h,o,t),p[2]=(r-l)*m,h[2]=(u-l)*m;const x=p;return s.N.cross(x,p,h),s.N.normalize(x,x),s.bi.rotationTo(e,y,x)}function Pp(e,t,a=!1){const o=Qs(t.zoom),l=function(r,u,m){const p=u.worldSize,h=[r[12],r[13],r[14]],y=da(h[1]/p),x=ke(h[0]/p),v=s.a6.identity([]),C=ze(1,y)*p,R=ze(1,0)*p*ea(y,u.zoom),N=1/ap(p);let W=R*N;if(m){const K=Sm(u.projection,u.zoom,u.width,u.height,1024);W=N*u.projection.pixelSpaceConversion(u.center.lat,p,K)}const D=It(y,x);s.N.add(D,D,s.N.scale([],s.N.normalize([],D),C*W*h[2]));const Y=function(K){const tt=[K[0],K[1],K[2]];let J=[0,1,0];const st=s.N.cross([],J,tt);return s.N.cross(J,tt,st),s.N.squaredLength(J)===0&&(J=[0,1,0],s.N.cross(st,tt,J)),s.N.normalize(st,st),s.N.normalize(J,J),s.N.normalize(tt,tt),[st[0],st[1],st[2],0,J[0],J[1],J[2],0,tt[0],tt[1],tt[2],0,K[0],K[1],K[2],1]}(D);s.a6.scale(v,v,[W,W,W*C]),s.a6.translate(v,v,[-h[0],-h[1],-h[2]]);const j=s.a6.multiply([],u.globeMatrix,Y);return s.a6.multiply(j,j,v),s.a6.multiply(j,j,r),j}(e,t,a);if(o>0){const r=function(u,m){const p=m.worldSize,h=ze(1,0)*p*ea(m.center.lat,m.zoom)/ap(p),y=ze(1,m.center.lat)*p,x=s.a6.identity([]);return s.a6.rotateY(x,x,Oe(m.center.lng)),s.a6.rotateX(x,x,Oe(m.center.lat)),s.a6.translate(x,x,[0,0,V]),s.a6.scale(x,x,[h,h,h*y]),s.a6.translate(x,x,[m.point.x-.5*p,m.point.y-.5*p,0]),s.a6.multiply(x,x,u),s.a6.multiply(x,m.globeMatrix,x)}(e,t);return function(u,m,p){const h=(R,N,W)=>{const D=s.N.length(R),Y=s.N.length(N),j=Ts(R,N,W);return s.N.scale(j,j,1/s.N.length(j)*sa(D,Y,W))},y=h([u[0],u[1],u[2]],[m[0],m[1],m[2]],p),x=h([u[4],u[5],u[6]],[m[4],m[5],m[6]],p),v=h([u[8],u[9],u[10]],[m[8],m[9],m[10]],p),C=Ts([u[12],u[13],u[14]],[m[12],m[13],m[14]],p);return[y[0],y[1],y[2],0,x[0],x[1],x[2],0,v[0],v[1],v[2],0,C[0],C[1],C[2],1]}(l,r,o)}return l}function X0(e,t,a,o){const l=ti.projectAabbCorners(o,a);let r=Number.MAX_VALUE,u=-1;for(let h=0;h<l.length;++h){const y=l[h];y[0]=(.5*y[0]+.5)*t.width,y[1]=(.5-.5*y[1])*t.height,y[2]<r&&(u=h,r=y[2])}const m=h=>new jt(l[h][0],l[h][1]);let p;switch(u){case 0:case 6:p=[m(1),m(5),m(4),m(7),m(3),m(2),m(1)];break;case 1:case 7:p=[m(0),m(4),m(5),m(6),m(2),m(3),m(0)];break;case 3:case 5:p=[m(1),m(0),m(4),m(7),m(6),m(2),m(1)];break;default:p=[m(1),m(5),m(6),m(7),m(3),m(0),m(1)]}if(Zo(e,p))return r}const ix=Ia([{name:"a_pos_3f",components:3,type:"Float32"}]),ox=Ia([{name:"a_color_3f",components:3,type:"Float32"}]),nx=Ia([{name:"a_color_4f",components:4,type:"Float32"}]),sx=Ia([{name:"a_uv_2f",components:2,type:"Float32"}]),lx=Ia([{name:"a_normal_3f",components:3,type:"Float32"}]),rx=Ia([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),dx=Ia([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class K0{constructor(t,a){this.feature=t,this.instancedDataOffset=a,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class j0{constructor(){this.instancedDataArray=new au,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class wp{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.fqid),this.projection=t.projection,this.index=t.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(t,a,o,l){this.tileToMeter=aa(o);const r=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:u,id:m,index:p,sourceLayerIndex:h}of t){const y=yi(u,r);if(!this.layers[0]._featureFilter.filter(new ja(this.zoom),y,o))continue;const x={id:m,sourceLayerIndex:h,index:p,geometry:r?y.geometry:Ci(u,o,l),properties:u.properties,type:u.type,patterns:{}},v=this.addFeature(x,x.geometry,y);v&&a.featureIndex.insert(u,x.geometry,p,h,this.index,this.instancesPerModel[v].instancedDataArray.length,se/32)}this.lookup=null}update(t,a,o,l){for(const r in this.instancesPerModel){const u=this.instancesPerModel[r];for(const m in t)u.idToFeaturesIndex.hasOwnProperty(m)&&this.evaluate(u.features[u.idToFeaturesIndex[m]],t[m],u,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let t=!1;for(const a in this.instancesPerModel){const o=this.instancesPerModel[a];for(const l of o.features){const r=this.layers[0],u=l.feature,m=this.canonical,p=r.paint.get("model-rotation").evaluate(u,{},m),h=r.paint.get("model-scale").evaluate(u,{},m),y=r.paint.get("model-translation").evaluate(u,{},m);s.N.exactEquals(l.rotation,p)&&s.N.exactEquals(l.scale,h)&&s.N.exactEquals(l.translation,y)||(this.evaluate(l,l.featureStates,o,!0),t=!0)}}return t}isEmpty(){for(const t in this.instancesPerModel)if(this.instancesPerModel[t].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(t){if(!this.uploaded)for(const a in this.instancesPerModel){const o=this.instancesPerModel[a];o.instancedDataArray.length<0||o.instancedDataArray.length===0||(o.instancedDataBuffer?o.instancedDataBuffer.updateData(o.instancedDataArray):o.instancedDataBuffer=t.createVertexBuffer(o.instancedDataArray,rx.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const t in this.instancesPerModel){const a=this.instancesPerModel[t];a.instancedDataArray.length!==0&&a.instancedDataBuffer&&a.instancedDataBuffer.destroy()}}addFeature(t,a,o){const l=this.layers[0],r=l.layout.get("model-id").evaluate(o,{},this.canonical);if(!r)return ei(`modelId is not evaluated for layer ${l.id} and it is not going to get rendered.`),r;this.instancesPerModel[r]||(this.instancesPerModel[r]=new j0);const u=this.instancesPerModel[r],m=u.instancedDataArray,p=new K0(o,m.length);for(const h of a)for(const y of h){if(y.x<0||y.x>=se||y.y<0||y.y>=se)continue;const x=(this.lookupDim-1)/se,v=this.lookupDim*(y.y*x|0)+y.x*x|0;if(this.lookup){if(this.lookup[v]!==0)continue;this.lookup[v]=1}this.instanceCount++;const C=m.length;m.resize(C+1),u.instancesEvaluatedElevation.push(0),m.float32[16*C]=y.x,m.float32[16*C+1]=y.y}return p.instancedDataCount=u.instancedDataArray.length-p.instancedDataOffset,p.instancedDataCount>0&&(t.id&&(u.idToFeaturesIndex[t.id]=u.features.length),u.features.push(p),this.evaluate(p,{},u,!1)),r}evaluate(t,a,o,l){const r=this.layers[0],u=t.feature,m=this.canonical,p=t.rotation=r.paint.get("model-rotation").evaluate(u,a,m),h=t.scale=r.paint.get("model-scale").evaluate(u,a,m),y=t.translation=r.paint.get("model-translation").evaluate(u,a,m),x=r.paint.get("model-color").evaluate(u,a,m);x.a=r.paint.get("model-color-mix-intensity").evaluate(u,a,m);const v=[];this.maxVerticalOffset<y[2]&&(this.maxVerticalOffset=y[2]),this.maxScale=Math.max(Math.max(this.maxScale,h[0]),Math.max(h[1],h[2])),V0(v,p,h);const C=Math.round(100*x.a)+x.b/1.05;for(let R=0;R<t.instancedDataCount;++R){const N=t.instancedDataOffset+R,W=16*N,D=o.instancedDataArray.float32;let Y=0;l&&(Y=D[W+6]-o.instancesEvaluatedElevation[N]);const j=0|D[W+1];D[W]=(0|D[W])+x.r/1.05,D[W+1]=j+x.g/1.05,D[W+2]=C,D[W+3]=1/(m.z>10?this.tileToMeter:aa(m,j)),D[W+4]=y[0],D[W+5]=y[1],D[W+6]=y[2]+Y,D[W+7]=v[0],D[W+8]=v[1],D[W+9]=v[2],D[W+10]=v[4],D[W+11]=v[5],D[W+12]=v[6],D[W+13]=v[8],D[W+14]=v[9],D[W+15]=v[10],o.instancesEvaluatedElevation[N]=y[2]}}}me(wp,"ModelBucket",{omit:["layers"]}),me(j0,"PerModelAttributes"),me(K0,"ModelFeature");const _x=new qa({visibility:new Zt(gt.layout_model.visibility),"model-id":new Se(gt.layout_model["model-id"])});var ux={paint:new qa({"model-opacity":new Zt(gt.paint_model["model-opacity"]),"model-rotation":new Se(gt.paint_model["model-rotation"]),"model-scale":new Se(gt.paint_model["model-scale"]),"model-translation":new Se(gt.paint_model["model-translation"]),"model-color":new Se(gt.paint_model["model-color"]),"model-color-mix-intensity":new Se(gt.paint_model["model-color-mix-intensity"]),"model-type":new Zt(gt.paint_model["model-type"]),"model-cast-shadows":new Zt(gt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Zt(gt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Zt(gt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Se(gt.paint_model["model-emissive-strength"]),"model-roughness":new Se(gt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Se(gt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Zt(gt.paint_model["model-cutoff-fade-range"])}),layout:_x};const dr=64,pd={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function q0(e,t,a,o,l,r,u,m,p,h=!1){const y=a.zoom,x=a.project(o),v=ea(o.lat,y),C=1/v;s.a6.identity(e),s.a6.translate(e,e,[x.x+u[0]*C,x.y+u[1]*C,u[2]]);let R=1,N=1;const W=a.worldSize;if(h){if(a.projection.name==="mercator"){let K=0;a.elevation&&(K=a.elevation.getAtPointOrZero(new ma(x.x/W,x.y/W),0));const tt=s.a7.transformMat4([],[x.x,x.y,K,1],a.projMatrix)[3]/a.cameraToCenterDistance;R=tt,N=tt*ea(a.center.lat,y)}else if(a.projection.name==="globe"){const K=Pp(e,a),tt=s.a6.multiply([],a.projMatrix,K),J=[0,0,0,1];s.a7.transformMat4(J,J,tt);const st=J[3]/a.cameraToCenterDistance,_t=Qs(y),mt=a.projection.pixelsPerMeter(o.lat,W)*ea(o.lat,y),bt=a.projection.pixelsPerMeter(a.center.lat,W)*ea(a.center.lat,y);R=st/sa(mt,$a(a.center.lat),_t),N=st*v/mt,R*=bt,N*=bt}}else R=C;s.a6.scale(e,e,[R,R,N]);const D=[...e],Y=t.orientation,j=[];if(V0(j,[Y[0]+l[0],Y[1]+l[1],Y[2]+l[2]],r),s.a6.multiply(e,D,j),m&&a.elevation){let K=0;const tt=[];if(p&&a.elevation){K=function(_t,mt,bt,ft,Ct){const Dt=mt.elevation;if(!Dt)return 0;const Et=ti.projectAabbCorners(bt,ft),Wt=ze(1,Ct.lat)*mt.worldSize,xt=function(Re,qe){const We=[0,0,1],$e=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Ue of $e){const la=Re[Ue.corners[0]],He=Re[Ue.corners[1]],wa=Re[Ue.corners[2]],pa=[He[0]-la[0],He[1]-la[1],qe*(He[2]-la[2])],ga=s.N.cross(pa,pa,[wa[0]-la[0],wa[1]-la[1],qe*(wa[2]-la[2])]);s.N.normalize(ga,ga),Ue.dotProductWithUp=s.N.dot(ga,We)}return $e.sort((Ue,la)=>Ue.dotProductWithUp-la.dotProductWithUp),$e[0].corners}(Et,Wt),wt=Et[xt[0]],Qt=Et[xt[1]],Bt=Et[xt[2]],pe=Et[xt[3]],de=Dt.getAtPointOrZero(new ma(wt[0]/mt.worldSize,wt[1]/mt.worldSize),0),zt=Dt.getAtPointOrZero(new ma(Qt[0]/mt.worldSize,Qt[1]/mt.worldSize),0),Pe=Dt.getAtPointOrZero(new ma(Bt[0]/mt.worldSize,Bt[1]/mt.worldSize),0),ve=Dt.getAtPointOrZero(new ma(pe[0]/mt.worldSize,pe[1]/mt.worldSize),0),fe=(de+ve)/2,Ht=(zt+Pe)/2;return fe>Ht?zt<Pe?Rm(_t,Qt,pe,wt,zt,ve,de,Wt):Rm(_t,Bt,wt,pe,Pe,de,ve,Wt):de<ve?Rm(_t,wt,Qt,Bt,de,zt,Pe,Wt):Rm(_t,pe,Bt,Qt,ve,Pe,zt,Wt),Math.max(fe,Ht)}(tt,a,t.aabb,e,o);const J=s.a6.fromQuat([],tt),st=s.a6.multiply([],J,j);s.a6.multiply(e,D,st)}else K=a.elevation.getAtPointOrZero(new ma(x.x/W,x.y/W),0);K!==0&&(e[14]+=K)}}function Cu(e,t,a=!1){e.uploaded||(e.gfxTexture=new Np(t,e.image,a?t.gl.R8:t.gl.RGBA,{useMipmap:e.sampler.minFilter>=t.gl.NEAREST_MIPMAP_NEAREST}),e.uploaded=!0,e.image=null)}function cx(e,t,a){e.indexBuffer=t.createIndexBuffer(e.indexArray,!1,!0),e.vertexBuffer=t.createVertexBuffer(e.vertexArray,ix.members,!1,!0),e.normalArray&&(e.normalBuffer=t.createVertexBuffer(e.normalArray,lx.members,!1,!0)),e.texcoordArray&&(e.texcoordBuffer=t.createVertexBuffer(e.texcoordArray,sx.members,!1,!0)),e.colorArray&&(e.colorBuffer=t.createVertexBuffer(e.colorArray,(e.colorArray.bytesPerElement===12?ox:nx).members,!1,!0)),e.featureArray&&(e.pbrBuffer=t.createVertexBuffer(e.featureArray,dx.members,!0)),e.segments=ai.simpleSegment(0,0,e.vertexArray.length,e.indexArray.length);const o=e.material;o.pbrMetallicRoughness.baseColorTexture&&Cu(o.pbrMetallicRoughness.baseColorTexture,t),o.pbrMetallicRoughness.metallicRoughnessTexture&&Cu(o.pbrMetallicRoughness.metallicRoughnessTexture,t),o.normalTexture&&Cu(o.normalTexture,t),o.occlusionTexture&&Cu(o.occlusionTexture,t,a),o.emissionTexture&&Cu(o.emissionTexture,t)}function Wp(e,t,a){if(e.meshes)for(const o of e.meshes)cx(o,t,a);if(e.children)for(const o of e.children)Wp(o,t,a)}function Nm(e){if(e.meshes)for(const t of e.meshes)t.indexArray.destroy(),t.vertexArray.destroy(),t.colorArray&&t.colorArray.destroy(),t.normalArray&&t.normalArray.destroy(),t.texcoordArray&&t.texcoordArray.destroy(),t.featureArray&&t.featureArray.destroy();if(e.children)for(const t of e.children)Nm(t)}function Mp(e){if(e.meshes)for(const a of e.meshes)a.vertexBuffer&&(a.vertexBuffer.destroy(),a.indexBuffer.destroy(),a.normalBuffer&&a.normalBuffer.destroy(),a.texcoordBuffer&&a.texcoordBuffer.destroy(),a.colorBuffer&&a.colorBuffer.destroy(),a.pbrBuffer&&a.pbrBuffer.destroy(),a.segments.destroy(),a.material&&((t=a.material).pbrMetallicRoughness.baseColorTexture&&t.pbrMetallicRoughness.baseColorTexture.gfxTexture&&t.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),t.pbrMetallicRoughness.metallicRoughnessTexture&&t.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&t.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),t.normalTexture&&t.normalTexture.gfxTexture&&t.normalTexture.gfxTexture.destroy(),t.emissionTexture&&t.emissionTexture.gfxTexture&&t.emissionTexture.gfxTexture.destroy(),t.occlusionTexture&&t.occlusionTexture.gfxTexture&&t.occlusionTexture.gfxTexture.destroy()));var t;if(e.children)for(const a of e.children)Mp(a)}class mx{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class fx{constructor(){this.tasks={},this.taskQueue=[],Zn(["process"],this),this.invoker=new mx(this.process),this.nextId=0}add(t,a){const o=this.nextId++,l=function({type:r,isSymbolTile:u,zoom:m}){return m=m||0,r==="message"?0:r!=="maybePrepare"||u?r!=="parseTile"||u?r==="parseTile"&&u?300-m:r==="maybePrepare"&&u?400-m:500:200-m:100-m}(a);if(l===0){Ko();try{t()}finally{}return null}return this.tasks[o]={fn:t,metadata:a,priority:l,id:o},this.taskQueue.push(o),this.invoker.trigger(),{cancel:()=>{delete this.tasks[o]}}}process(){Ko();try{if(this.taskQueue=this.taskQueue.filter(o=>!!this.tasks[o]),!this.taskQueue.length)return;const t=this.pick();if(t===null)return;const a=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let t=null,a=1/0;for(let l=0;l<this.taskQueue.length;l++){const r=this.tasks[this.taskQueue[l]];r.priority<a&&(a=r.priority,t=l)}if(t===null)return null;const o=this.taskQueue[t];return this.taskQueue.splice(t,1),o}remove(){this.invoker.remove()}}class $0{constructor(t,a,o){this.target=t,this.parent=a,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Zn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new fx}send(t,a,o,l,r=!1,u){const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=u,this.callbacks[m]=o);const p=new Set;return this.target.postMessage({id:m,type:t,hasCallback:!!o,targetMapId:l,mustQueue:r,sourceMapId:this.mapId,data:Dn(a,p)},p),{cancel:()=>{o&&delete this.callbacks[m],this.target.postMessage({id:m,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(t){const a=t.data,o=a.id;if(o&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){const l=this.cancelCallbacks[o];delete this.cancelCallbacks[o],l&&l.cancel()}else if(a.mustQueue||Ko()){const l=this.callbacks[o],r=this.scheduler.add(()=>this.processTask(o,a),l&&l.metadata||{type:"message"});r&&(this.cancelCallbacks[o]=r)}else this.processTask(o,a)}processTask(t,a){if(delete this.cancelCallbacks[t],a.type==="<response>"){const o=this.callbacks[t];delete this.callbacks[t],o&&(a.error?o(us(a.error)):o(null,us(a.data)))}else{const o=new Set,l=a.hasCallback?(u,m)=>{this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:u?Dn(u):null,data:Dn(m,o)},o)}:u=>{},r=us(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,r,l);else if(this.parent.getWorkerSource){const u=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,u[0],r.source,r.scope)[u[1]](r,l)}else l(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class hd{constructor(t,a){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=vs();const o=this.workerPool.acquire(this.id);for(let l=0;l<o.length;l++){const r=new hd.Actor(o[l],a,this.id);r.name=`Worker ${l}`,this.actors.push(r)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,a,o){wo(this.actors,(l,r)=>{l.send(t,a,r)},o=o||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}hd.Actor=$0;var Su={workerUrl:"",workerClass:null,workerParams:void 0};function px(){return Su.workerClass!=null?new Su.workerClass:new self.Worker(Su.workerUrl,Su.workerParams)}const Dp="mapboxgl_preloaded_worker_pool";class Ru{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ru.workerCount;)this.workers.push(new px);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.workers&&this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Dp]}numActive(){return Object.keys(this.active).length}}let Nu;function Lm(){return Nu||(Nu=new Ru),Nu}Ru.workerCount=2;let Pm,Fp,hn,gd,Bp,yd=null;function Z0(){return Ko()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:Fp||At.DRACO_URL}function J0(){if(Ko()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(gd)return gd;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return gd=WebAssembly.validate(e)?At.MESHOPT_SIMD_URL:At.MESHOPT_URL,gd}const wm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hx={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Lu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function Q0(e,t,a){const o=a.json.bufferViews.length,l=a.buffers.length;t.bufferView=o,a.json.bufferViews[o]={buffer:l,byteLength:e.byteLength},a.buffers[l]=e}const Up="KHR_draco_mesh_compression";function gx(e,t){const a=e.extensions&&e.extensions[Up];if(!a)return;const o=new hn.Decoder,l=i1(t,a.bufferView),r=new hn.Mesh;if(!o.DecodeArrayToMesh(l,l.byteLength,r))throw new Error("Failed to decode Draco mesh");const u=t.json.accessors[e.indices],m=wm[u.componentType],p=u.count*m.BYTES_PER_ELEMENT,h=hn._malloc(p);m===Uint16Array?o.GetTrianglesUInt16Array(r,p,h):o.GetTrianglesUInt32Array(r,p,h),Q0(hn.memory.buffer.slice(h,h+p),u,t),hn._free(h);for(const y of Object.keys(a.attributes)){const x=o.GetAttributeByUniqueId(r,a.attributes[y]),v=t.json.accessors[e.attributes[y]],C=hx[v.componentType],R=v.count*Lu[v.type]*wm[v.componentType].BYTES_PER_ELEMENT,N=hn._malloc(R);o.GetAttributeDataArrayForAllPoints(r,x,hn[C],R,N),Q0(hn.memory.buffer.slice(N,N+R),v,t),hn._free(N)}o.destroy(),r.destroy(),delete e.extensions[Up]}const Wm="EXT_meshopt_compression";function yx(e,t){if(!e.extensions||!e.extensions[Wm])return;const a=e.extensions[Wm],o=new Uint8Array(t.buffers[a.buffer],a.byteOffset||0,a.byteLength||0),l=new Uint8Array(a.count*a.byteStride);Bp.decodeGltfBuffer(l,a.count,a.byteStride,o,a.mode,a.filter),e.buffer=t.buffers.length,e.byteOffset=0,t.buffers[e.buffer]=l.buffer,delete e.extensions[Wm]}const t1=1179937895,e1=new TextDecoder("utf8");function a1(e,t){return new URL(e,t).href}function bx(e,t,a,o){return fetch(a1(e.uri,o)).then(l=>l.arrayBuffer()).then(l=>{t.buffers[a]=l})}function i1(e,t){const a=e.json.bufferViews[t];return new Uint8Array(e.buffers[a.buffer],a.byteOffset||0,a.byteLength)}function Tx(e,t,a,o){if(e.uri){const l=a1(e.uri,o);return fetch(l).then(r=>r.blob()).then(r=>createImageBitmap(r)).then(r=>{t.images[a]=r})}if(e.bufferView!==void 0){const l=i1(t,e.bufferView),r=new Blob([l],{type:e.mimeType});return createImageBitmap(r).then(u=>{t.images[a]=u})}}function o1(e,t=0,a){const o={json:null,images:[],buffers:[]};if(new Uint32Array(e,t,1)[0]===t1){const y=new Uint32Array(e,t);let x=2;const v=(y[x++]>>2)-3,C=y[x++]>>2;if(x++,o.json=JSON.parse(e1.decode(y.subarray(x,x+C))),x+=C,x<v){const R=y[x++];x++;const N=t+(x<<2);o.buffers[0]=e.slice(N,N+R)}}else o.json=JSON.parse(e1.decode(new Uint8Array(e,t)));const{buffers:l,images:r,meshes:u,extensionsUsed:m,bufferViews:p}=o.json;let h=Promise.resolve();if(l){const y=[];for(let x=0;x<l.length;x++){const v=l[x];v.uri?y.push(bx(v,o,x,a)):o.buffers[x]||(o.buffers[x]=null)}h=Promise.all(y)}return h.then(()=>{const y=[],x=m&&m.includes(Up),v=m&&m.includes(Wm);if(x&&y.push(function(){if(!hn)return Pm||(Pm=function(C){let R,N=null;function W(){R=new Uint8Array(N.buffer)}function D(){throw new Error("Unexpected Draco error.")}const Y={a:{a:D,d:function(j,K,tt){return R.copyWithin(j,K,K+tt)},c:function(j){const K=R.length,tt=Math.max(j>>>0,Math.ceil(1.2*K)),J=Math.ceil((tt-K)/65536);try{return N.grow(J),W(),!0}catch{return!1}},b:D}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(C,Y):C.then(j=>j.arrayBuffer()).then(j=>WebAssembly.instantiate(j,Y))).then(j=>{const{Rb:K,Qb:tt,P:J,T:st,X:_t,Ja:mt,La:bt,Qa:ft,Va:Ct,Wa:Dt,eb:Et,jb:Wt,f:xt,e:wt,yb:Qt,zb:Bt,Ab:pe,Bb:de,Db:zt,Gb:Pe}=j.instance.exports;N=wt;const ve=(()=>{let fe=0,Ht=0,Re=0,qe=0;return We=>{Re&&(K(qe),K(fe),Ht+=Re,Re=fe=0),fe||(Ht+=128,fe=tt(Ht));const $e=We.length+7&-8;let Ue=fe;$e>=Ht&&(Re=$e,Ue=qe=tt($e));for(let la=0;la<We.length;la++)R[Ue+la]=We[la];return Ue}})();return W(),xt(),{memory:wt,_free:K,_malloc:tt,Mesh:class{constructor(){this.ptr=J()}destroy(){st(this.ptr)}},Decoder:class{constructor(){this.ptr=mt()}destroy(){Wt(this.ptr)}DecodeArrayToMesh(fe,Ht,Re){const qe=ve(fe),We=bt(this.ptr,qe,Ht,Re.ptr);return!!_t(We)}GetAttributeByUniqueId(fe,Ht){return{ptr:ft(this.ptr,fe.ptr,Ht)}}GetTrianglesUInt16Array(fe,Ht,Re){Ct(this.ptr,fe.ptr,Ht,Re)}GetTrianglesUInt32Array(fe,Ht,Re){Dt(this.ptr,fe.ptr,Ht,Re)}GetAttributeDataArrayForAllPoints(fe,Ht,Re,qe,We){Et(this.ptr,fe.ptr,Ht.ptr,Re,qe,We)}},DT_INT8:Qt(),DT_UINT8:Bt(),DT_INT16:pe(),DT_UINT16:de(),DT_UINT32:zt(),DT_FLOAT32:Pe()}})}(fetch(Z0())),Pm.then(C=>{hn=C,Pm=void 0}))}()),v&&y.push(function(){if(Bp)return;const C=function(R){let N;const W=WebAssembly.instantiateStreaming(R,{}).then(j=>{N=j.instance,N.exports.__wasm_call_ctors()}),D={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Y={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:W,supported:!0,decodeGltfBuffer(j,K,tt,J,st,_t){(function(mt,bt,ft,Ct,Dt,Et,Wt){const xt=mt.exports.sbrk,wt=Ct+3&-4,Qt=xt(wt*Dt),Bt=xt(Et.length),pe=new Uint8Array(mt.exports.memory.buffer);pe.set(Et,Bt);const de=bt(Qt,Ct,Dt,Bt,Et.length);if(de===0&&Wt&&Wt(Qt,wt,Dt),ft.set(pe.subarray(Qt,Qt+Ct*Dt)),xt(Qt-xt(0)),de!==0)throw new Error(`Malformed buffer data: ${de}`)})(N,N.exports[Y[st]],j,K,tt,J,N.exports[D[_t]])}}}(fetch(J0()));return C.ready.then(()=>{Bp=C})}()),r)for(let C=0;C<r.length;C++)y.push(Tx(r[C],o,C,a));return(y.length?Promise.all(y):Promise.resolve()).then(()=>{if(x&&u)for(const{primitives:C}of u)for(const R of C)gx(R,o);if(v&&u&&p)for(const C of p)yx(C,o);return o})})}class n1{constructor(t,a,o){if(this.triangleCount=a.length/3,this.min=new jt(0,0),this.max=new jt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||t.length===0||o===0)return;const l=t.map(y=>y.x),r=t.map(y=>y.y);this.min=new jt(Math.min(...l),Math.min(...r)),this.max=new jt(Math.max(...l),Math.max(...r));const u=this.max.sub(this.min);u.x=Math.max(u.x,1),u.y=Math.max(u.y,1);const m=Math.max(u.x,u.y)/o;this.cellsX=Math.max(1,Math.ceil(u.x/m)),this.cellsY=Math.max(1,Math.ceil(u.y/m)),this.xScale=1/m,this.yScale=1/m;const p=[];for(let y=0;y<this.triangleCount;y++){const x=t[a[3*y+0]].sub(this.min),v=t[a[3*y+1]].sub(this.min),C=t[a[3*y+2]].sub(this.min),R=ll(Math.floor(Math.min(x.x,v.x,C.x)),this.xScale,this.cellsX),N=ll(Math.floor(Math.max(x.x,v.x,C.x)),this.xScale,this.cellsX),W=ll(Math.floor(Math.min(x.y,v.y,C.y)),this.yScale,this.cellsY),D=ll(Math.floor(Math.max(x.y,v.y,C.y)),this.yScale,this.cellsY),Y=new jt(0,0),j=new jt(0,0),K=new jt(0,0),tt=new jt(0,0);for(let J=W;J<=D;++J){Y.y=j.y=J*m,K.y=tt.y=(J+1)*m;for(let st=R;st<=N;++st)Y.x=K.x=st*m,j.x=tt.x=(st+1)*m,(Wf(x,v,C,Y,j,tt)||Wf(x,v,C,Y,tt,K))&&p.push({cellIdx:J*this.cellsX+st,triIdx:y})}}if(p.length===0)return;p.sort((y,x)=>y.cellIdx-x.cellIdx||y.triIdx-x.triIdx);let h=0;for(;h<p.length;){const y=p[h].cellIdx,x={start:this.payload.length,len:0};for(;h<p.length&&p[h].cellIdx===y;)++x.len,this.payload.push(p[h++].triIdx);this.cells[y]=x}}query(t,a,o){if(this.triangleCount===0||this.cells.length===0||t.x>this.max.x||this.min.x>a.x||t.y>this.max.y||this.min.y>a.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let p=0;p<this.lookup.length;p++)this.lookup[p]=0;const l=ll(t.x-this.min.x,this.xScale,this.cellsX),r=ll(a.x-this.min.x,this.xScale,this.cellsX),u=ll(t.y-this.min.y,this.yScale,this.cellsY),m=ll(a.y-this.min.y,this.yScale,this.cellsY);for(let p=u;p<=m;p++)for(let h=l;h<=r;h++){const y=this.cells[p*this.cellsX+h];if(y)for(let x=0;x<y.len;x++){const v=this.payload[y.start+x],C=Math.floor(v/8),R=1<<v%8;if(!(this.lookup[C]&R)&&(this.lookup[C]|=R,o.push(v),o.length===this.triangleCount))return}}}}function ll(e,t,a){return Math.max(0,Math.min(a-1,Math.floor(e*t)))}function _r(e,t){const a=e.json.bufferViews[t.bufferView],o=wm[t.componentType];return new o(e.buffers[a.buffer],(t.byteOffset||0)+(a.byteOffset||0),t.count*(a.byteStride&&a.byteStride!==Lu[t.type]*o.BYTES_PER_ELEMENT?a.byteStride/o.BYTES_PER_ELEMENT:Lu[t.type]))}function kp(e,t,a,o){const l=wm[t.componentType],r=function(y){switch(y){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(l),u=e.json.bufferViews[t.bufferView],m=u.byteStride?u.byteStride/l.BYTES_PER_ELEMENT:Lu[t.type],p=a.float32,h=p.length/a.capacity;for(let y=0,x=0;y<t.count*m;y+=m,x+=h)for(let v=0;v<h;v++)p[x+v]=o[y+v]*r;a._trim()}function xx(e,t,a){const o=e.indices,l=e.attributes,r={};r.indexArray=new Ii;const u=t.json.accessors[o],m=u.count/3;r.indexArray.reserve(m);const p=_r(t,u);for(let v=0;v<m;v++)r.indexArray.emplaceBack(p[3*v],p[3*v+1],p[3*v+2]);r.indexArray._trim(),r.vertexArray=new fs;const h=t.json.accessors[l.POSITION];r.vertexArray.reserve(h.count);const y=_r(t,h);for(let v=0;v<h.count;v++)r.vertexArray.emplaceBack(y[3*v],y[3*v+1],y[3*v+2]);if(r.vertexArray._trim(),r.aabb=new ti(h.min,h.max),r.centroid=function(v,C){const R=[0,0,0],N=v.length;if(N>0){for(let W=0;W<N;W++){const D=3*v[W];R[0]+=C[D],R[1]+=C[D+1],R[2]+=C[D+2]}R[0]/=N,R[1]/=N,R[2]/=N}return R}(p,y),l.COLOR_0!==void 0){const v=t.json.accessors[l.COLOR_0],C=Lu[v.type],R=_r(t,v);r.colorArray=C===3?new fs:new kn,r.colorArray.resize(v.count),kp(t,v,r.colorArray,R)}if(l.NORMAL!==void 0){r.normalArray=new fs;const v=t.json.accessors[l.NORMAL];r.normalArray.resize(v.count);const C=_r(t,v);kp(t,v,r.normalArray,C)}if(l.TEXCOORD_0!==void 0&&a.length>0){r.texcoordArray=new Zl;const v=t.json.accessors[l.TEXCOORD_0];r.texcoordArray.resize(v.count);const C=_r(t,v);kp(t,v,r.texcoordArray,C)}if(l._FEATURE_ID_RGBA4444!==void 0){const v=t.json.accessors[l._FEATURE_ID_RGBA4444];t.json.extensionsUsed&&t.json.extensionsUsed.includes("EXT_meshopt_compression")&&(r.featureData=_r(t,v))}l._FEATURE_RGBA4444!==void 0&&(r.featureData=new Uint32Array(_r(t,t.json.accessors[l._FEATURE_RGBA4444]).buffer));const x=e.material;return r.material=function(v,C){const{emissiveFactor:R=[0,0,0],alphaMode:N="OPAQUE",alphaCutoff:W=.5,normalTexture:D,occlusionTexture:Y,emissiveTexture:j,doubleSided:K}=v,{baseColorFactor:tt=[1,1,1,1],metallicFactor:J=1,roughnessFactor:st=1,baseColorTexture:_t,metallicRoughnessTexture:mt}=v.pbrMetallicRoughness||{},bt=Y?C[Y.index]:void 0;if(Y&&Y.extensions&&Y.extensions.KHR_texture_transform&&bt){const ft=Y.extensions.KHR_texture_transform;bt.offsetScale=[ft.offset[0],ft.offset[1],ft.scale[0],ft.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new ci(...tt),metallicFactor:J,roughnessFactor:st,baseColorTexture:_t?C[_t.index]:void 0,metallicRoughnessTexture:mt?C[mt.index]:void 0},doubleSided:K,emissiveFactor:R,alphaMode:N,alphaCutoff:W,normalTexture:D?C[D.index]:void 0,occlusionTexture:bt,emissionTexture:j?C[j.index]:void 0,defined:v.defined===void 0}}(x!==void 0?t.json.materials[x]:{defined:!1},a),r}function s1(e,t,a){const{matrix:o,rotation:l,translation:r,scale:u,mesh:m,extras:p,children:h}=e,y={};if(y.matrix=o||s.a6.fromRotationTranslationScale([],l||[0,0,0,1],r||[0,0,0],u||[1,1,1]),m!==void 0){y.meshes=a[m];const x=y.anchor=[0,0];for(const v of y.meshes){const{min:C,max:R}=v.aabb;x[0]+=C[0]+R[0],x[1]+=C[1]+R[1]}x[0]=Math.floor(x[0]/y.meshes.length/2),x[1]=Math.floor(x[1]/y.meshes.length/2)}if(p&&(p.id&&(y.id=p.id),p.lights&&(y.lights=function(x){if(!x.length)return[];const v=function(D){const Y=atob(D),j=new Uint8Array(Y.length);for(let K=0;K<Y.length;K++)j[K]=Y.codePointAt(K);return j}(x),C=[],R=v.length/24,N=new Uint16Array(v.buffer),W=new Float32Array(v.buffer);for(let D=0;D<R;D++){const Y=N[2*D*6]/30,j=N[2*D*6+1]/30,K=N[2*D*6+10]/100,tt=W[6*D+1],J=W[6*D+2],st=W[6*D+3],_t=W[6*D+4],mt=st-tt,bt=_t-J,ft=Math.hypot(mt,bt);C.push({pos:[tt+.5*mt,J+.5*bt,j],normal:[bt/ft,-mt/ft,0],width:ft,height:Y,depth:K,points:[tt,J,st,_t]})}return C}(p.lights))),h){const x=[];for(const v of h)x.push(s1(t.json.nodes[v],t,a));y.children=x}return y}function Ax(e){if(e.vertices.length===0||e.indices.length===0)return null;const[t,a]=[e.vertices[0].clone(),e.vertices[0].clone()];for(let u=1;u<e.vertices.length;++u){const m=e.vertices[u];t.x=Math.min(t.x,m.x),t.y=Math.min(t.y,m.y),a.x=Math.max(a.x,m.x),a.y=Math.max(a.y,m.y)}const o=Math.ceil(Math.max(a.x-t.x,a.y-t.y)/256),l=Math.max(8,o),r=new n1(e.vertices,e.indices,l);return{vertices:e.vertices,indices:e.indices,grid:r,min:t,max:a}}function vx(e){if(!e.extras||!e.extras.ground)return null;const t=e.extras.ground;if(!t||!Array.isArray(t)||t.length===0)return null;const a=t[0];if(!a||!Array.isArray(a)||a.length===0)return null;const o=[];for(const u of a){if(!Array.isArray(u)||u.length!==2)continue;const m=u[0],p=u[1];typeof m=="number"&&typeof p=="number"&&o.push(new jt(m,p))}if(o.length<3)return null;o.length>1&&o[o.length-1].equals(o[0])&&o.pop();let l=0;for(let u=0;u<o.length;u++){const m=o[u],p=o[(u+1)%o.length],h=o[(u+2)%o.length];l+=(m.x-p.x)*(h.y-p.y)-(h.x-p.x)*(m.y-p.y)}l>0&&o.reverse();const r=em(o.flatMap(u=>[u.x,u.y]),[]);return r.length===0?null:{vertices:o,indices:r}}function Ex(e){const t=[],a=[];let o=0;for(const l of e){o=t.length;const r=l.vertexArray.float32,u=l.indexArray.uint16;for(let m=0;m<l.vertexArray.length;m++)t.push(new jt(r[3*m+0],r[3*m+1]));for(let m=0;m<3*l.indexArray.length;m++)a.push(u[m]+o)}if(a.length%3!=0)return null;for(let l=0;l<a.length;l+=3){const r=t[a[l+0]],u=t[a[l+1]],m=t[a[l+2]];(r.x-u.x)*(m.y-u.y)-(m.x-u.x)*(r.y-u.y)>0&&([a[l+1],a[l+2]]=[a[l+2],a[l+1]])}return{vertices:t,indices:a}}function l1(e){const t=function(p,h){const y=[],x=WebGL2RenderingContext;if(p.json.textures)for(const v of p.json.textures){const C={magFilter:x.LINEAR,minFilter:x.NEAREST,wrapS:x.REPEAT,wrapT:x.REPEAT};v.sampler!==void 0&&Object.assign(C,p.json.samplers[v.sampler]),y.push({image:h[v.source],sampler:C,uploaded:!1})}return y}(e,e.images),a=function(p,h){const y=[];for(const x of p.json.meshes){const v=[];for(const C of x.primitives)v.push(xx(C,p,h));y.push(v)}return y}(e,t),{scenes:o,scene:l,nodes:r}=e.json,u=o?o[l||0].nodes:r,m=[];for(const p of u)m.push(s1(r[p],e,a));return function(p,h,y){const x={},v=new Set;for(let C=0;C<p.length;C++){const R=y[h[C]];if(!R.extras)continue;const N=R.extras["mapbox:footprint:version"],W=R.extras["mapbox:footprint:id"];(N||W)&&v.add(C),N==="1.0.0"&&W&&(x[W]=C)}for(let C=0;C<p.length;C++){if(v.has(C))continue;const R=p[C],N=y[h[C]];if(!N.extras)continue;let W=null;R.id in x&&(W=Ex(p[x[R.id]].meshes)),W||(W=vx(N)),W&&(R.footprint=Ax(W))}if(v.size>0){const C=Array.from(v.values()).sort((R,N)=>R-N);for(let R=C.length-1;R>=0;R--)p.splice(C[R],1)}}(m,u,e.json.nodes),m}function Ix(e){e.heightmap=new Float32Array(4096),e.heightmap.fill(-1);const t=e.vertexArray.float32,a=e.aabb.min[0]-1,o=e.aabb.min[1]-1,l=dr/(e.aabb.max[0]-a+2),r=dr/(e.aabb.max[1]-o+2);for(let u=0;u<t.length;u+=3){const m=t[u+2],p=(t[u+0]-a)*l|0,h=(t[u+1]-o)*r|0;m>e.heightmap[h*dr+p]&&(e.heightmap[h*dr+p]=m)}}function Ox(e,t){const a={};a.indexArray=new Ii,a.indexArray.reserve(4*e.length),a.vertexArray=new fs,a.vertexArray.reserve(10*e.length),a.colorArray=new kn,a.vertexArray.reserve(10*e.length);let o=0;for(const u of e){const m=Math.min(10,Math.max(4,1.3*u.height))*t,p=[-u.normal[1],u.normal[0],0],h=Math.min(.29,.1*u.width/u.depth),y=u.width-2*u.depth*t*(h+.01),x=s.N.scaleAndAdd([],u.pos,p,y/2),v=s.N.scaleAndAdd([],u.pos,p,-y/2),C=[x[0],x[1],x[2]+u.height],R=[v[0],v[1],v[2]+u.height],N=s.N.scaleAndAdd([],u.normal,p,h);s.N.scale(N,N,m);const W=s.N.scaleAndAdd([],u.normal,p,-h);s.N.scale(W,W,m),s.N.add(N,x,N),s.N.add(W,v,W),x[2]+=.1,v[2]+=.1,a.vertexArray.emplaceBack(N[0],N[1],N[2]),a.vertexArray.emplaceBack(W[0],W[1],W[2]),a.vertexArray.emplaceBack(x[0],x[1],x[2]),a.vertexArray.emplaceBack(v[0],v[1],v[2]),a.vertexArray.emplaceBack(C[0],C[1],C[2]),a.vertexArray.emplaceBack(R[0],R[1],R[2]),a.vertexArray.emplaceBack(x[0],x[1],x[2]),a.vertexArray.emplaceBack(v[0],v[1],v[2]),a.vertexArray.emplaceBack(N[0],N[1],N[2]),a.vertexArray.emplaceBack(W[0],W[1],W[2]);const D=y/m/2;a.colorArray.emplaceBack(-D-h,-1,D,.8),a.colorArray.emplaceBack(D+h,-1,D,.8),a.colorArray.emplaceBack(-D,0,D,1.3),a.colorArray.emplaceBack(D,0,D,1.3),a.colorArray.emplaceBack(D+h,-.8,D,.7),a.colorArray.emplaceBack(D+h,-.8,D,.7),a.colorArray.emplaceBack(0,0,D,1.3),a.colorArray.emplaceBack(0,0,D,1.3),a.colorArray.emplaceBack(D+h,-1.2,D,.8),a.colorArray.emplaceBack(D+h,-1.2,D,.8),a.indexArray.emplaceBack(6+o,4+o,8+o),a.indexArray.emplaceBack(7+o,9+o,5+o),a.indexArray.emplaceBack(0+o,1+o,2+o),a.indexArray.emplaceBack(1+o,3+o,2+o),o+=10}const l={defined:!0,emissiveFactor:[0,0,0]},r={};return r.baseColorFactor=ci.white,l.pbrMetallicRoughness=r,a.material=l,a.aabb=new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),a}me(n1,"TriangleGridIndex");class r1{constructor(t){this._stringToNumber={},this._numberToString=[];for(let a=0;a<t.length;a++){const o=t[a];this._stringToNumber[o]=a,this._numberToString[a]=o}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const Cx=["tile","layer","source","sourceLayer","state"];class d1{constructor(t,a,o,l,r){this.type="Feature",this._vectorTileFeature=t,this._z=a,this._x=o,this._y=l,this.properties=t.properties,this.id=r}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(t.id=this.id);for(const a of Cx)this[a]!==void 0&&(t[a]=this[a]);return t}}class _1{constructor(t,a){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ln(se,16,0),this.featureIndexArray=new wc,this.promoteId=a,this.is3DTile=!1}insert(t,a,o,l,r,u=0,m=0){const p=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,l,r,u);const h=this.grid;for(let y=0;y<a.length;y++){const x=a[y],v=[1/0,1/0,-1/0,-1/0];for(let C=0;C<x.length;C++){const R=x[C];v[0]=Math.min(v[0],R.x),v[1]=Math.min(v[1],R.y),v[2]=Math.max(v[2],R.x),v[3]=Math.max(v[3],R.y)}m!==0&&(v[0]-=m,v[1]-=m,v[2]+=m,v[3]+=m),v[0]<se&&v[1]<se&&v[2]>=0&&v[3]>=0&&h.insert(p,v[0],v[1],v[2],v[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new mp(new _d(this.rawTileData)).layers,this.sourceLayerCoder=new r1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,a,o,l){this.loadVTLayers();const r=t.params||{},u=po(r.filter),m=t.tileResult,p=t.transform,h=m.bufferedTilespaceBounds,y=this.grid.query(h.min.x,h.min.y,h.max.x,h.max.y,(R,N,W,D)=>Lh(m.bufferedTilespaceGeometry,R,N,W,D));y.sort(Sx);let x=null;p.elevation&&y.length>0&&(x=nd.create(p.elevation,this.tileID));const v={};let C;for(let R=0;R<y.length;R++){const N=y[R];if(N===C)continue;C=N;const W=this.featureIndexArray.get(N);let D=null;if(this.is3DTile){const Y=this.bucketLayerIDs[0][0],j=a[Y];if(j.type!=="model")continue;const{queryFeature:K,intersectionZ:tt}=j.queryIntersectsMatchingFeature(m,W.featureIndex,u,p);K&&this.appendToResult(v,Y,W.featureIndex,K,tt)}else this.loadMatchingFeature(v,W,u,r.layers,r.availableImages,a,o,l,(Y,j,K,tt=0)=>(D||(D=Ci(Y,this.tileID.canonical,t.tileTransform)),j.queryIntersectsFeature(m,Y,K,D,this.z,t.transform,t.pixelPosMatrix,x,tt)))}return v}loadMatchingFeature(t,a,o,l,r,u,m,p,h){const{featureIndex:y,bucketIndex:x,sourceLayerIndex:v,layoutVertexArrayOffset:C}=a,R=this.bucketLayerIDs[x];if(l&&!function(Y,j){for(let K=0;K<Y.length;K++)if(j.indexOf(Y[K])>=0)return!0;return!1}(l,R))return;const N=this.sourceLayerCoder.decode(v),W=this.vtLayers[N].feature(y);if(o.needGeometry){const Y=yi(W,!0);if(!o.filter(new ja(this.tileID.overscaledZ),Y,this.tileID.canonical))return}else if(!o.filter(new ja(this.tileID.overscaledZ),W))return;const D=this.getId(W,N);for(let Y=0;Y<R.length;Y++){const j=R[Y];if(l&&l.indexOf(j)<0)continue;const K=u[j];if(!K)continue;let tt={};D!==void 0&&p&&(tt=p.getState(K.sourceLayer||"_geojsonTileLayer",D));const J=!h||h(W,K,tt,C);if(!J)continue;const st=new d1(W,this.z,this.x,this.y,D),_t=zi({},m[j]);_t.paint=u1(_t.paint,K.paint,W,tt,r),_t.layout=u1(_t.layout,K.layout,W,tt,r),st.layer=_t,this.appendToResult(t,j,y,st,J)}}appendToResult(t,a,o,l,r){let u=t[a];u===void 0&&(u=t[a]=[]),u.push({featureIndex:o,feature:l,intersectionZ:r})}lookupSymbolFeatures(t,a,o,l,r,u,m,p){const h={};this.loadVTLayers();const y=po(r);for(const x of t)this.loadMatchingFeature(h,{bucketIndex:o,sourceLayerIndex:l,featureIndex:x,layoutVertexArrayOffset:0},y,u,m,p,a);return h}loadFeature(t){const{featureIndex:a,sourceLayerIndex:o}=t;this.loadVTLayers();const l=this.sourceLayerCoder.decode(o),r=this.vtFeatures[l];if(r[a])return r[a];const u=this.vtLayers[l].feature(a);return r[a]=u,u}hasLayer(t){for(const a of this.bucketLayerIDs)for(const o of a)if(t===o)return!0;return!1}getId(t,a){let o=t.id;if(this.promoteId){const l=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];l!=null&&(o=t.properties[l]),typeof o=="boolean"&&(o=Number(o))}return o}}function u1(e,t,a,o,l){return Hi(e,(r,u)=>{const m=t instanceof Ul?t.get(u):null;return m&&m.evaluate?m.evaluate(a,o,l):m})}function Sx(e,t){return t-e}me(_1,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const zp=new Float32Array(262144),ur=new Uint8Array(262144);function c1(e){let t=0;if(e.meshes)for(const a of e.meshes)t=Math.max(t,a.aabb.max[2]);if(e.children)for(const a of e.children)t=Math.max(t,c1(a));return t}function m1(e,t,a){if(e.meshes)for(const o of e.meshes)o.aabb.min[0]!==1/0&&a.insert(t,o.aabb.min[0],o.aabb.min[1],o.aabb.max[0],o.aabb.max[1]);if(e.children)for(const o of e.children)m1(o,t,a)}const f1=["","wall","door","roof","window","lamp","logo"];class p1{constructor(t){this.node=t,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:t.id,geometry:[],properties:{height:c1(t)}}}getLocalBounds(){if(!this.node.meshes)return new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let t=0;const a=new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const o of this.node.meshes)this.node.lightMeshIndex!==t&&a.encapsulate(o.aabb),t++;this.aabb=a}return this.aabb}}class Mm{constructor(t,a,o,l,r,u){this.id=a,this.modelTraits|=pd.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,o&&(this.modelTraits|=pd.HasMapboxMeshFeatures),l&&(this.modelTraits|=pd.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=r,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const m of t)this.nodesInfo.push(new p1(m)),m1(m,u.featureIndexArray.length,u.grid),u.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,u.bucketLayerIDs.length-1,0)}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(t){if(!this.needsUpload)return;const a=this.getNodesInfo();for(const o of a){const l=o.node;this.uploaded?this.updatePbrBuffer(l):Wp(l,t,!0)}for(const o of a)Nm(o.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(t){let a=!1;if(!t.meshes)return a;for(const o of t.meshes)o.pbrBuffer&&(o.pbrBuffer.updateData(o.featureArray),a=!0);return a}needsReEvaluation(t,a,o){const l=t.transform.projectionOptions,r=t.style.getBrightness(),u=this.brightness!==r;return!!(!this.uploaded||this.dirty||l.name!==this.projection.name||Pu(o.paint.get("model-color").value,u)||Pu(o.paint.get("model-color-mix-intensity").value,u)||Pu(o.paint.get("model-roughness").value,u)||Pu(o.paint.get("model-emissive-strength").value,u)||Pu(o.paint.get("model-height-based-emissive-strength-multiplier").value,u))&&(this.projection=l,this.brightness=r,!0)}evaluateScale(t,a){if(t.transform.zoom===this.zoom)return;this.zoom=t.transform.zoom;const o=this.getNodesInfo(),l=this.id.canonical;for(const r of o){const u=r.feature;r.evaluatedScale=a.paint.get("model-scale").evaluate(u,{},l)}}evaluate(t){const a=this.getNodesInfo();for(const o of a){if(!o.node.meshes)continue;const l=o.feature,r=o.node.meshes&&o.node.meshes[0].featureData,u=o.evaluatedColor[2],m=o.evaluatedRMEA[2],p=this.id.canonical;if(o.hasTranslucentParts=!1,r){for(let h=0;h<f1.length;h++){const y=f1[h];y.length&&(l.properties.part=y);const x=t.paint.get("model-color").evaluate(l,{},p),v=t.paint.get("model-color-mix-intensity").evaluate(l,{},p);o.evaluatedColor[h]=[x.r,x.g,x.b,v],o.evaluatedRMEA[h][0]=t.paint.get("model-roughness").evaluate(l,{},p),o.evaluatedRMEA[h][2]=t.paint.get("model-emissive-strength").evaluate(l,{},p),o.evaluatedRMEA[h][3]=x.a,o.emissionHeightBasedParams[h]=t.paint.get("model-height-based-emissive-strength-multiplier").evaluate(l,{},p),!o.hasTranslucentParts&&x.a<1&&(o.hasTranslucentParts=!0)}delete l.properties.part,Nx(o,u!==o.evaluatedColor[2]||m!==o.evaluatedRMEA[2],this.modelTraits)}else o.evaluatedRMEA[0][2]=t.paint.get("model-emissive-strength").evaluate(l,{},p);o.evaluatedScale=t.paint.get("model-scale").evaluate(l,{},p),this.updatePbrBuffer(o.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(t,a,o,l){const r=t.findDEMTileFor(o);if(r&&(r.tileID.canonical!==this.terrainTile||a!==this.terrainExaggeration)){if(r.dem&&r.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=r.tileID.overscaledZ;const u=nd.create(t,o,r);if(!u)return;this.modelTraits&pd.HasMapboxMeshFeatures&&this.updateDEM(t,u,o,l);for(const m of this.getNodesInfo()){const p=m.node;if(!p.footprint||!p.footprint.vertices||!p.footprint.vertices.length)continue;const h=p.footprint.vertices;let y=u.getElevationAt(h[0].x,h[0].y,!0,!0);for(let x=1;x<h.length;x++)y=Math.min(y,u.getElevationAt(h[x].x,h[x].y,!0,!0));p.elevation=y}}this.terrainTile=r.tileID.canonical,this.terrainExaggeration=a}}updateDEM(t,a,o,l){let r=a._dem._modifiedForSources[l];if(r===void 0&&(a._dem._modifiedForSources[l]=[],r=a._dem._modifiedForSources[l]),r.includes(o.canonical))return;const u=a._dem.dim;r.push(o.canonical);let m=!1;for(const p of this.getNodesInfo()){const h=p.node;if(!h.footprint||!h.footprint.grid)continue;const y=h.footprint.grid,x=a.tileCoordToPixel(y.min.x,y.min.y),v=a.tileCoordToPixel(y.max.x,y.max.y),C=Math.min(Math.min(u-v.y,x.x),Math.min(x.y,u-v.x));if(C<0)continue;const R=Ve(C,2,5);let N=Math.max(0,x.x-R),W=Math.max(0,x.y-R),D=Math.min(v.x+R,u-1),Y=Math.min(v.y+R,u-1);for(let J=W;J<=Y;++J)for(let st=N;st<=D;++st)ur[J*u+st]=255;let j=0,K=0;for(let J=0;J<y.cellsY;++J)for(let st=0;st<y.cellsX;++st){if(!y.cells[J*y.cellsX+st])continue;const _t=a.tileCoordToPixel(y.min.x+st/y.xScale,y.min.y+J/y.yScale),mt=a.tileCoordToPixel(y.min.x+(st+1)/y.xScale,y.min.y+(J+1)/y.yScale);for(let bt=_t.y;bt<=Math.min(mt.y+1,u-1);++bt)for(let ft=_t.x;ft<=Math.min(mt.x+1,u-1);++ft)ur[bt*u+ft]===255&&(ur[bt*u+ft]=0,j+=a.getElevationAtPixel(ft,bt),K++)}const tt=j/K;N=Math.max(1,x.x-R),W=Math.max(1,x.y-R),D=Math.min(v.x+R,u-2),Y=Math.min(v.y+R,u-2),m=!0;for(let J=W;J<=Y;++J)for(let st=N;st<=D;++st)ur[J*u+st]===0&&(zp[J*u+st]=a._dem.set(st,J,tt));for(let J=1;J<R;++J){N=Math.max(1,x.x-J),W=Math.max(1,x.y-J),D=Math.min(v.x+J,u-2),Y=Math.min(v.y+J,u-2);for(let st=W;st<=Y;++st)for(let _t=N;_t<=D;++_t){const mt=st*u+_t;if(ur[mt]===255){let bt=0,ft=0,Ct=-1,Dt=-1;for(let Et=-1;Et<=1;++Et)for(let Wt=-1;Wt<=1;++Wt){const xt=(st+Et)*u+_t+Wt;if(ur[xt]>=J)continue;const wt=zp[xt],Qt=Math.abs(wt);Qt>ft&&(bt=wt,ft=Qt,Ct=Wt,Dt=Et)}if(ft>.1){const Et=1-(J+.5*Math.abs(Ct*Dt))/R;let Wt=a._dem.get(_t,st)+bt*Et;const xt=a._dem.get(_t+Ct,st+Dt),wt=a._dem.get(_t-Ct,st-Dt,!0);(Wt-xt)*(Wt-wt)>0&&(Wt=(xt+wt)/2),zp[mt]=a._dem.set(_t,st,Wt),ur[mt]=J}}}}}m&&(a._demTile.needsDEMTextureUpload=!0,a._dem._timestamp=Gt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const t=this.getNodesInfo();for(const a of t)Nm(a.node),Mp(a.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(t,a){if(a.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=a.updateTime;const o=a.getReplacementRegionsForTile(t.toUnwrapped()),l=this.getNodesInfo();for(let r=0;r<this.nodesInfo.length;r++){const u=l[r].node;l[r].hiddenByReplacement=!!u.footprint&&!o.find(m=>m.footprint===u.footprint)}}getHeightAtTileCoord(t,a){const o=this.getNodesInfo(),l=[];for(let r=0;r<this.nodesInfo.length;r++){const u=o[r],m=u.node.meshes[0];if(t<m.aabb.min[0]||a<m.aabb.min[1]||t>m.aabb.max[0]||a>m.aabb.max[1])continue;const p=(t-m.aabb.min[0])/(m.aabb.max[0]-m.aabb.min[0])*dr|0,h=Math.min(63,(a-m.aabb.min[1])/(m.aabb.max[1]-m.aabb.min[1])*dr|0)*dr+Math.min(63,p);if(!(m.heightmap[h]<0&&u.node.footprint))return u.hiddenByReplacement?void 0:{height:m.heightmap[h],maxHeight:u.feature.properties.height,hidden:!1,verticalScale:u.evaluatedScale[2]};if(u.node.footprint.grid.query(new jt(t,a),new jt(t,a),l),l.length>0)return{height:void 0,maxHeight:u.feature.properties.height,hidden:u.hiddenByReplacement,verticalScale:u.evaluatedScale[2]}}}}function Pu(e,t){return!e.isLightConstant&&t}function Rx(e,t,a,o,l,r,u,m){let p=(61440&t|(61440&t)>>4)>>8,h=(3840&t|(3840&t)>>4)>>4,y=240&t|(240&t)>>4;a[3]>0&&(p=sa(p,255*a[0],a[3]),h=sa(h,255*a[1],a[3]),y=sa(y,255*a[2],a[3]));const x=p<<8|h,v=y<<8|Math.floor(255*o[3]),C=function(J){const st=Ve(J,0,2);return Math.min(Math.round(.5*st*255),255)}(o[2])<<8|15*o[0]<<4|15*o[1],R=Ve(l[0],0,1),N=Ve(l[1],0,1),W=Ve(l[2],0,1),D=Ve(l[3],0,1);let Y,j,K,tt;if(R!==N&&u!==r&&N!==R){const J=u-r;j=1/(J*(N-R)),K=-(r+J*R)/(J*(N-R));const st=Ve(l[4],-1,1);tt=Math.pow(10,st),Y=255*W<<8|255*D}else Y=65535,j=0,K=1,tt=1;if(e.emplaceBack(x,v,C,Y,j,K,tt),m){const J=m.length;m.clear();for(let st=0;st<J;st++)m.emplaceBack(x,v,C,Y,j,K,tt)}}function Nx(e,t,a){const o=e.node;let l=0;const r=a&pd.HasMeshoptCompression;for(const u of o.meshes){if(o.lights&&o.lightMeshIndex===l||!u.featureData)continue;u.featureArray=new Jl,u.featureArray.reserve(u.featureData.length);let m=t;for(const p of u.featureData){const h=r?65535&p:p>>16&65535,y=r?p>>16&65535:65535&p,x=(15&y)<8?15&y:0,v=e.evaluatedRMEA[x],C=e.evaluatedColor[x],R=e.emissionHeightBasedParams[x];let N;if(m&&x===2&&o.lights&&(N=new Jl,N.resize(10*o.lights.length)),Rx(u.featureArray,h,C,v,R,u.aabb.min[2],u.aabb.max[2],N),N&&m){m=!1;const W=o.meshes[o.lightMeshIndex];W.featureArray=N,W.featureArray._trim()}}u.featureArray._trim(),l++}}function h1(e,t,a,o){const l=1<<e.z;t.lat=da((o/se+e.y)/l),t.lng=ke((a/se+e.x)/l)}me(Mm,"Tiled3dModelBucket",{omit:["layers"]}),me(p1,"Tiled3dModelFeature");const Lx={circle:class extends oo{constructor(e,t,a){super(e,vT,t,a)}createBucket(e){return new lo(e)}queryRadius(e){const t=e;return ad("circle-radius",this,t)+ad("circle-stroke-width",this,t)+Hc(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,a,o,l,r,u,m){const p=wh(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),h=this.paint.get("circle-radius").evaluate(t,a)+this.paint.get("circle-stroke-width").evaluate(t,a);return sy(e,o,r,u,m,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",p,h)}getProgramIds(){return["circle"]}getDefaultProgramParams(e,t){const a=ny(this);return{config:new w(this,t),defines:a,overrideFog:!1}}},heatmap:class extends oo{createBucket(e){return new ry(e)}constructor(e,t,a){super(e,t2,t,a),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=uu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return ad("heatmap-radius",this,e)}queryIntersectsFeature(e,t,a,o,l,r,u,m){const p=this.paint.get("heatmap-radius").evaluate(t,a);return sy(e,o,r,u,m,!0,!0,new jt(0,0),p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(e,t){return e==="heatmap"?{config:new w(this,t),overrideFog:!1}:{}}},hillshade:class extends oo{constructor(e,t,a){super(e,a2,t,a)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(e,t){return{overrideFog:!1}}},fill:class extends oo{constructor(e,t,a){super(e,h2,t,a)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),a=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getDefaultProgramParams(e,t){return{config:new w(this,t),overrideFog:!1}}recalculate(e,t){super.recalculate(e,t);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new cp(e)}queryRadius(){return Hc(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,a,o,l,r){return!e.queryGeometry.isAboveHorizon&&ps(Ph(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),o)}isTileClipped(){return!0}},"fill-extrusion":class extends oo{constructor(e,t,a){super(e,G2,t,a),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(e){return new rm(e)}queryRadius(){return Hc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(e,t,a,o,l,r,u,m,p){const h=wh(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),y=this.paint.get("fill-extrusion-height").evaluate(t,a),x=this.paint.get("fill-extrusion-base").evaluate(t,a),v=[0,0],C=m&&r.elevation,R=r.elevation?r.elevation.exaggeration():1,N=e.tile.getBucket(this);if(C&&N instanceof rm){const K=N.centroidVertexArray,tt=p+1;tt<K.length&&(v[0]=K.geta_centroid_pos0(tt),v[1]=K.geta_centroid_pos1(tt))}if(v[0]===0&&v[1]===1)return!1;r.projection.name==="globe"&&(o=Yy([o],[new jt(0,0),new jt(se,se)],e.tileID.canonical).map(K=>K.polygon).flat());const W=C?m:null,[D,Y]=function(K,tt,J,st,_t,mt,bt,ft,Ct,Dt,Et){return K.projection.name==="globe"?function(Wt,xt,wt,Qt,Bt,pe,de,zt,Pe,ve,fe){const Ht=[],Re=[],qe=Wt.projection.upVectorScale(fe,Wt.center.lat,Wt.worldSize).metersToTile,We=[0,0,0,1],$e=[0,0,0,1],Ue=(He,wa,pa,ga)=>{He[0]=wa,He[1]=pa,He[2]=ga,He[3]=1},la=Hy();wt>0&&(wt+=la),Qt+=la;for(const He of xt){const wa=[],pa=[];for(const ga of He){const va=ga.x+Bt.x,ha=ga.y+Bt.y,Ka=Wt.projection.projectTilePoint(va,ha,fe),Sa=Wt.projection.upVector(fe,ga.x,ga.y);let ii=wt,xi=Qt;if(de){const Ui=Vy(va,ha,wt,Qt,de,zt,Pe,ve);ii+=Ui.base,xi+=Ui.top}wt!==0?Ue(We,Ka.x+Sa[0]*qe*ii,Ka.y+Sa[1]*qe*ii,Ka.z+Sa[2]*qe*ii):Ue(We,Ka.x,Ka.y,Ka.z),Ue($e,Ka.x+Sa[0]*qe*xi,Ka.y+Sa[1]*qe*xi,Ka.z+Sa[2]*qe*xi),s.N.transformMat4(We,We,pe),s.N.transformMat4($e,$e,pe),wa.push(new sd(We[0],We[1],We[2])),pa.push(new sd($e[0],$e[1],$e[2]))}Ht.push(wa),Re.push(pa)}return[Ht,Re]}(K,tt,J,st,_t,mt,bt,ft,Ct,Dt,Et):bt?function(Wt,xt,wt,Qt,Bt,pe,de,zt,Pe){const ve=[],fe=[],Ht=[0,0,0,1];for(const Re of Wt){const qe=[],We=[];for(const $e of Re){const Ue=$e.x+Qt.x,la=$e.y+Qt.y,He=Vy(Ue,la,xt,wt,pe,de,zt,Pe);Ht[0]=Ue,Ht[1]=la,Ht[2]=He.base,Ht[3]=1,s.a7.transformMat4(Ht,Ht,Bt),Ht[3]=Math.max(Ht[3],1e-5);const wa=new sd(Ht[0]/Ht[3],Ht[1]/Ht[3],Ht[2]/Ht[3]);Ht[0]=Ue,Ht[1]=la,Ht[2]=He.top,Ht[3]=1,s.a7.transformMat4(Ht,Ht,Bt),Ht[3]=Math.max(Ht[3],1e-5);const pa=new sd(Ht[0]/Ht[3],Ht[1]/Ht[3],Ht[2]/Ht[3]);qe.push(wa),We.push(pa)}ve.push(qe),fe.push(We)}return[ve,fe]}(tt,J,st,_t,mt,bt,ft,Ct,Dt):function(Wt,xt,wt,Qt,Bt){const pe=[],de=[],zt=Bt[8]*xt,Pe=Bt[9]*xt,ve=Bt[10]*xt,fe=Bt[11]*xt,Ht=Bt[8]*wt,Re=Bt[9]*wt,qe=Bt[10]*wt,We=Bt[11]*wt;for(const $e of Wt){const Ue=[],la=[];for(const He of $e){const wa=He.x+Qt.x,pa=He.y+Qt.y,ga=Bt[0]*wa+Bt[4]*pa+Bt[12],va=Bt[1]*wa+Bt[5]*pa+Bt[13],ha=Bt[2]*wa+Bt[6]*pa+Bt[14],Ka=Bt[3]*wa+Bt[7]*pa+Bt[15],Sa=ga+zt,ii=va+Pe,xi=ha+ve,Ui=Math.max(Ka+fe,1e-5),Ga=ga+Ht,Ja=va+Re,Ni=ha+qe,Li=Math.max(Ka+We,1e-5);Ue.push(new sd(Sa/Ui,ii/Ui,xi/Ui)),la.push(new sd(Ga/Li,Ja/Li,Ni/Li))}pe.push(Ue),de.push(la)}return[pe,de]}(tt,J,st,_t,mt)}(r,o,x,y,h,u,W,v,R,r.center.lat,e.tileID.canonical),j=e.queryGeometry;return function(K,tt,J){let st=1/0;ps(J,tt)&&(st=Gy(J,tt[0]));for(let _t=0;_t<tt.length;_t++){const mt=tt[_t],bt=K[_t];for(let ft=0;ft<mt.length-1;ft++){const Ct=mt[ft],Dt=[Ct,mt[ft+1],bt[ft+1],bt[ft],Ct];Zo(J,Dt)&&(st=Math.min(st,Gy(J,Dt)))}}return st!==1/0&&st}(D,Y,j.isPointQuery()?j.screenBounds:j.screenGeometry)}},line:class extends oo{constructor(e,t,a){super(e,Ky,t,a),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Nl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Qy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new pp(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(e,t){const a=Zy(this);return{config:new w(this,t),defines:a,overrideFog:!1}}queryRadius(e){const t=e,a=t0(ad("line-width",this,t),ad("line-gap-width",this,t)),o=ad("line-offset",this,t);return a/2+Math.abs(o)+Hc(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,a,o,l,r){if(e.queryGeometry.isAboveHorizon)return!1;const u=Ph(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),m=e.pixelToTileUnitsFactor/2*t0(this.paint.get("line-width").evaluate(t,a),this.paint.get("line-gap-width").evaluate(t,a)),p=this.paint.get("line-offset").evaluate(t,a);return p&&(o=function(h,y){const x=[],v=new jt(0,0);for(let C=0;C<h.length;C++){const R=h[C],N=[];for(let W=0;W<R.length;W++){const D=R[W],Y=R[W+1],j=W===0?v:D.sub(R[W-1])._unit()._perp(),K=W===R.length-1?v:Y.sub(D)._unit()._perp(),tt=j._add(K)._unit();tt._mult(1/(tt.x*K.x+tt.y*K.y)),N.push(tt._mult(y)._add(D))}x.push(N)}return x}(o,p*e.pixelToTileUnitsFactor)),function(h,y,x){for(let v=0;v<y.length;v++){const C=y[v];if(h.length>=3){for(let R=0;R<C.length;R++)if(un(h,C[R]))return!0}if(ir(h,C,x))return!0}return!1}(u,o,m)}isTileClipped(){return!0}},symbol:Em,background:class extends oo{constructor(e,t,a){super(e,K3,t,a)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(e,t){return{overrideFog:!1}}},raster:U0,"raster-particle":k0,sky:class extends oo{constructor(e,t,a){super(e,ex,t,a),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="sky-gradient"?this._updateColorRamp():e!=="sky-atmosphere-sun"&&e!=="sky-atmosphere-halo-color"&&e!=="sky-atmosphere-color"&&e!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=uu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if(this.paint.get("sky-type")==="atmosphere"){const o=this.paint.get("sky-atmosphere-sun"),l=!o,r=e.style.light,u=r.properties.get("position");return l&&r.properties.get("anchor")==="viewport"&&ei("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),l?Lp(u.azimuthal,90-u.polar,t):Lp(o[0],90-o[1],t)}const a=this.paint.get("sky-gradient-center");return Lp(a[0],90-a[1],t)}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return e==="atmosphere"?["skyboxCapture","skybox"]:e==="gradient"?["skyboxGradient"]:null}},slot:class extends oo{constructor(e,t,a){super(e,ax,t)}},model:class extends oo{constructor(e,t,a){super(e,ux,t,a),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(e){return new wp(e)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(e){return e instanceof Mm?se-1:0}queryIntersectsFeature(e,t,a,o,l,r){if(!this.modelManager)return!1;const u=this.modelManager,m=e.tile.getBucket(this);if(!(m&&m instanceof wp))return!1;const p=m;for(const h in p.instancesPerModel){const y=p.instancesPerModel[h];if(y.idToFeaturesIndex.hasOwnProperty(t.id)){const x=y.features[y.idToFeaturesIndex[t.id]],v=u.getModel(h,this.scope);if(!v)return!1;let C=s.a6.create();const R=new ct(0,0),N=p.canonical;let W=Number.MAX_VALUE;for(let D=0;D<x.instancedDataCount;++D){const Y=16*(x.instancedDataOffset+D),j=y.instancedDataArray.float32,K=[j[Y+4],j[Y+5],j[Y+6]];h1(N,R,j[Y],0|j[Y+1]),q0(C,v,r,R,x.rotation,x.scale,K,!1,!1,!1),r.projection.name==="globe"&&(C=Pp(C,r));const tt=s.a6.multiply([],r.projMatrix,C),J=e.queryGeometry,st=X0(J.isPointQuery()?J.screenBounds:J.screenGeometry,r,tt,v.aabb);st!=null&&(W=Math.min(st,W))}return W!==Number.MAX_VALUE&&W}}return!1}_handleOverridablePaintPropertyUpdate(e,t,a){return!(!this.layout||t.isDataDriven()||a.isDataDriven()||e!=="model-color"&&e!=="model-color-mix-intensity"&&e!=="model-rotation"&&e!=="model-scale"&&e!=="model-translation"&&e!=="model-emissive-strength")}_isPropertyZoomDependent(e){const t=this._transitionablePaint._values[e];return t!=null&&t.value!=null&&t.value.expression!=null&&t.value.expression instanceof Ml}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(e,t,a,o){const l=e.tile,r=l.getBucket(this);let u=null,m=Number.MAX_VALUE;if(!(r&&r instanceof Mm))return{queryFeature:u,intersectionZ:m};const p=r.getNodesInfo()[t];if(p.hiddenByReplacement||!p.node.meshes||!a.filter(new ja(l.tileID.overscaledZ),p.feature,l.tileID.canonical))return{queryFeature:u,intersectionZ:m};const h=p.node,y=o.calculatePosMatrix(l.tileID.toUnwrapped(),o.worldSize),x=p.evaluatedScale;let v=0;o.elevation&&h.elevation&&(v=h.elevation*o.elevation.exaggeration()),s.a6.translate(y,y,[(h.anchor?h.anchor[0]:0)*(x[0]-1),(h.anchor?h.anchor[1]:0)*(x[1]-1),v]),s.a6.scale(y,y,x),s.a6.multiply(y,y,h.matrix);const C=e.queryGeometry,R=C.isPointQuery()?C.screenBounds:C.screenGeometry,N=function(D){const Y=s.a6.multiply([],y,D.matrix),j=s.a6.multiply(Y,o.expandedFarZProjMatrix,Y);for(let K=0;K<D.meshes.length;++K){const tt=D.meshes[K];if(K===D.lightMeshIndex)continue;const J=X0(R,o,j,tt.aabb);J!=null&&(m=Math.min(J,m))}if(D.children)for(const K of D.children)N(K)};if(N(h),m===Number.MAX_VALUE)return{queryFeature:u,intersectionZ:m};const W=new ct(0,0);return h1(l.tileID.canonical,W,p.node.anchor[0],p.node.anchor[1]),u={type:"Feature",geometry:{type:"Point",coordinates:[W.lng,W.lat]},properties:p.feature.properties,id:p.feature.id,state:{},layer:this.serialize()},{queryFeature:u,intersectionZ:m}}}},Ge={read:function(e,t){return e.readFields(Ge._readField,{header_length:0,x:0,y:0,z:0,layers:[]},t)},_readField:function(e,t,a){e===1?t.header_length=a.readFixed32():e===2?t.x=a.readVarint():e===3?t.y=a.readVarint():e===4?t.z=a.readVarint():e===5&&t.layers.push(Ge.Layer.read(a,a.readVarint()+a.pos))},PixelFormat:{PIXEL_FORMAT_UNKNOWN:{value:0,options:{}},PIXEL_FORMAT_UINT32:{value:1,options:{}},PIXEL_FORMAT_UINT16:{value:2,options:{}},PIXEL_FORMAT_UINT8:{value:3,options:{}}},Filter:{}};Ge.Filter.read=function(e,t){return e.readFields(Ge.Filter._readField,{delta_filter:null,filter:null,zigzag_filter:null,bitshuffle_filter:null,byteshuffle_filter:null},t)},Ge.Filter._readField=function(e,t,a){e===1?(t.delta_filter=Ge.Filter.Delta.read(a,a.readVarint()+a.pos),t.filter="delta_filter"):e===2?(t.zigzag_filter=Ge.Filter.Zigzag.read(a,a.readVarint()+a.pos),t.filter="zigzag_filter"):e===3?(t.bitshuffle_filter=Ge.Filter.BitShuffle.read(a,a.readVarint()+a.pos),t.filter="bitshuffle_filter"):e===4&&(t.byteshuffle_filter=Ge.Filter.ByteShuffle.read(a,a.readVarint()+a.pos),t.filter="byteshuffle_filter")},Ge.Filter.Delta={},Ge.Filter.Delta.read=function(e,t){return e.readFields(Ge.Filter.Delta._readField,{block_size:0},t)},Ge.Filter.Delta._readField=function(e,t,a){e===1&&(t.block_size=a.readVarint())},Ge.Filter.Zigzag={},Ge.Filter.Zigzag.read=function(e,t){return e.readFields(Ge.Filter.Zigzag._readField,{},t)},Ge.Filter.Zigzag._readField=function(e,t,a){},Ge.Filter.BitShuffle={},Ge.Filter.BitShuffle.read=function(e,t){return e.readFields(Ge.Filter.BitShuffle._readField,{},t)},Ge.Filter.BitShuffle._readField=function(e,t,a){},Ge.Filter.ByteShuffle={},Ge.Filter.ByteShuffle.read=function(e,t){return e.readFields(Ge.Filter.ByteShuffle._readField,{},t)},Ge.Filter.ByteShuffle._readField=function(e,t,a){},Ge.Codec={},Ge.Codec.read=function(e,t){return e.readFields(Ge.Codec._readField,{gzip_data:null,codec:null,jpeg_image:null,webp_image:null,png_image:null},t)},Ge.Codec._readField=function(e,t,a){e===1?(t.gzip_data=Ge.Codec.GzipData.read(a,a.readVarint()+a.pos),t.codec="gzip_data"):e===2?(t.jpeg_image=Ge.Codec.JpegImage.read(a,a.readVarint()+a.pos),t.codec="jpeg_image"):e===3?(t.webp_image=Ge.Codec.WebpImage.read(a,a.readVarint()+a.pos),t.codec="webp_image"):e===4&&(t.png_image=Ge.Codec.PngImage.read(a,a.readVarint()+a.pos),t.codec="png_image")},Ge.Codec.GzipData={},Ge.Codec.GzipData.read=function(e,t){return e.readFields(Ge.Codec.GzipData._readField,{},t)},Ge.Codec.GzipData._readField=function(e,t,a){},Ge.Codec.JpegImage={},Ge.Codec.JpegImage.read=function(e,t){return e.readFields(Ge.Codec.JpegImage._readField,{},t)},Ge.Codec.JpegImage._readField=function(e,t,a){},Ge.Codec.WebpImage={},Ge.Codec.WebpImage.read=function(e,t){return e.readFields(Ge.Codec.WebpImage._readField,{},t)},Ge.Codec.WebpImage._readField=function(e,t,a){},Ge.Codec.PngImage={},Ge.Codec.PngImage.read=function(e,t){return e.readFields(Ge.Codec.PngImage._readField,{},t)},Ge.Codec.PngImage._readField=function(e,t,a){},Ge.DataIndexEntry={},Ge.DataIndexEntry.read=function(e,t){return e.readFields(Ge.DataIndexEntry._readField,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},t)},Ge.DataIndexEntry._readField=function(e,t,a){e===1?t.first_byte=a.readFixed64():e===2?t.last_byte=a.readFixed64():e===3?t.filters.push(Ge.Filter.read(a,a.readVarint()+a.pos)):e===4?t.codec=Ge.Codec.read(a,a.readVarint()+a.pos):e===5?t.offset=a.readFloat():e===6?t.scale=a.readFloat():e===7&&t.bands.push(a.readString())},Ge.Layer={},Ge.Layer.read=function(e,t){return e.readFields(Ge.Layer._readField,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},t)},Ge.Layer._readField=function(e,t,a){e===1?t.version=a.readVarint():e===2?t.name=a.readString():e===3?t.units=a.readString():e===4?t.tilesize=a.readVarint():e===5?t.buffer=a.readVarint():e===6?t.pixel_format=a.readVarint():e===7&&t.data_index.push(Ge.DataIndexEntry.read(a,a.readVarint()+a.pos))};const gn={read:function(e,t){return e.readFields(gn._readField,{uint32_values:null,values:null,fixed32_values:null},t)},_readField:function(e,t,a){e===2?(t.uint32_values=gn.Uint32Values.read(a,a.readVarint()+a.pos),t.values="uint32_values"):e===3&&(t.fixed32_values=gn.Fixed32Values.read(a,a.readVarint()+a.pos),t.values="fixed32_values")},Uint32Values:{}};gn.Uint32Values.read=function(e,t){return e.readFields(gn.Uint32Values._readField,{values:[]},t)},gn.Uint32Values._readField=function(e,t,a){e===1&&(t.readValuesInto=function(o){if(o.type!==2)throw new Error(`Unsupported pbf type "${o.type}"`);const l=function(u){return u.type===2?u.readVarint()+u.pos:u.pos+1}(o),r=o.pos;return o.pos=l,function(u){o.pos=r;let m=0;for(;o.pos<l;){const p=o.readVarint();u[m++]=p}return u}}(a))},gn.Fixed32Values={},gn.Fixed32Values.read=function(e,t){return e.readFields(gn.Fixed32Values._readField,{values:[]},t)},gn.Fixed32Values._readField=function(e,t,a){throw new Error("Not implemented")};/**
 * tiny-lru
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.2.5
 */class Px{constructor(t=0,a=0,o=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=o,this.size=0,this.ttl=a}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const a=this.items[t];delete this.items[t],this.size--,a.prev!==null&&(a.prev.next=a.next),a.next!==null&&(a.next.prev=a.prev),this.first===a&&(this.first=a.next),this.last===a&&(this.last=a.prev)}return this}entries(t=this.keys()){return t.map(a=>[a,this.get(a)])}evict(t=!1){if(t||this.size>0){const a=this.first;delete this.items[a.key],--this.size==0?(this.first=null,this.last=null):(this.first=a.next,this.first.prev=null)}return this}expiresAt(t){let a;return this.has(t)&&(a=this.items[t].expiry),a}get(t){let a;if(this.has(t)){const o=this.items[t];this.ttl>0&&o.expiry<=Date.now()?this.delete(t):(a=o.value,this.set(t,a,!0))}return a}has(t){return t in this.items}keys(){const t=[];let a=this.first;for(;a!==null;)t.push(a.key),a=a.next;return t}set(t,a,o=!1,l=this.resetTtl){let r;if(o||this.has(t)){if(r=this.items[t],r.value=a,o===!1&&l&&(r.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==r){const u=this.last,m=r.next,p=r.prev;this.first===r&&(this.first=r.next),r.next=null,r.prev=this.last,u.next=r,p!==null&&(p.next=m),m!==null&&(m.prev=p)}}else this.max>0&&this.size===this.max&&this.evict(!0),r=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:a},++this.size==1?this.first=r:this.last.next=r;return this.last=r,this}values(t=this.keys()){return t.map(a=>this.get(a))}}function wx(e,t){if(t.length!==4)throw new Error(`Expected data of dimension 4 but got ${t.length}.`);let a=t[3];for(let o=2;o>=1;o--){const l=o===1?1:0,r=o===2?1:0;for(let u=0;u<t[0];u++){const m=t[1]*u;for(let p=l;p<t[1];p++){const h=t[2]*(p+m);for(let y=r;y<t[2];y++){const x=t[3]*(y+h);for(let v=0;v<t[3];v++){const C=x+v;e[C]+=e[C-a]}}}}a*=t[o]}return e}function Wx(e){for(let t=0,a=e.length;t<a;t++)e[t]=e[t]>>>1^-(1&e[t]);return e}function Mx(e,t){switch(t){case"uint32":return e;case"uint16":for(let a=0;a<e.length;a+=2){const o=e[a],l=e[a+1];e[a]=(240&o)>>4|(61440&o)>>8|(240&l)<<4|61440&l,e[a+1]=15&o|(3840&o)>>4|(15&l)<<8|(3840&l)<<4}return e;case"uint8":for(let a=0;a<e.length;a+=4){const o=e[a],l=e[a+1],r=e[a+2],u=e[a+3];e[a+0]=(192&o)>>6|(192&l)>>4|(192&r)>>2|192&u,e[a+1]=(48&o)>>4|(48&l)>>2|48&r|(48&u)<<2,e[a+2]=(12&o)>>2|12&l|(12&r)<<2|(12&u)<<4,e[a+3]=3&o|(3&l)<<2|(3&r)<<4|(3&u)<<6}return e;default:throw new Error(`Invalid pixel format, "${t}"`)}}class rl extends Error{constructor(t){super(t),this.name="MRTError"}}var Vo=Uint8Array,bd=Uint16Array,Dx=Int32Array,g1=new Vo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),y1=new Vo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Fx=new Vo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b1=function(e,t){for(var a=new bd(31),o=0;o<31;++o)a[o]=t+=1<<e[o-1];var l=new Dx(a[30]);for(o=1;o<30;++o)for(var r=a[o];r<a[o+1];++r)l[r]=r-a[o]<<5|o;return{b:a,r:l}},T1=b1(g1,2),x1=T1.b,Bx=T1.r;x1[28]=258,Bx[258]=28;for(var Ux=b1(y1,0).b,Hp=new bd(32768),mi=0;mi<32768;++mi){var Td=(43690&mi)>>1|(21845&mi)<<1;Hp[mi]=((65280&(Td=(61680&(Td=(52428&Td)>>2|(13107&Td)<<2))>>4|(3855&Td)<<4))>>8|(255&Td)<<8)>>1}var wu=function(e,t,a){for(var o=e.length,l=0,r=new bd(t);l<o;++l)e[l]&&++r[e[l]-1];var u,m=new bd(t);for(l=1;l<t;++l)m[l]=m[l-1]+r[l-1]<<1;if(a){u=new bd(1<<t);var p=15-t;for(l=0;l<o;++l)if(e[l])for(var h=l<<4|e[l],y=t-e[l],x=m[e[l]-1]++<<y,v=x|(1<<y)-1;x<=v;++x)u[Hp[x]>>p]=h}else for(u=new bd(o),l=0;l<o;++l)e[l]&&(u[l]=Hp[m[e[l]-1]++]>>15-e[l]);return u},Wu=new Vo(288);for(mi=0;mi<144;++mi)Wu[mi]=8;for(mi=144;mi<256;++mi)Wu[mi]=9;for(mi=256;mi<280;++mi)Wu[mi]=7;for(mi=280;mi<288;++mi)Wu[mi]=8;var A1=new Vo(32);for(mi=0;mi<32;++mi)A1[mi]=5;var kx=wu(Wu,9,1),zx=wu(A1,5,1),Yp=function(e){for(var t=e[0],a=1;a<e.length;++a)e[a]>t&&(t=e[a]);return t},yn=function(e,t,a){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(7&t)&a},Gp=function(e,t){var a=t/8|0;return(e[a]|e[a+1]<<8|e[a+2]<<16)>>(7&t)},Hx=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bn=function(e,t,a){var o=new Error(t||Hx[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,bn),!a)throw o;return o},Yx=new Vo(0),Gx=typeof TextDecoder<"u"&&new TextDecoder;try{Gx.decode(Yx,{stream:!0})}catch{}const Vx={gzip_data:"gzip"},Xx={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},Kx={uint32:1,uint16:2,uint8:4},jx={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};class v1{constructor(t=1){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=t}getLayer(t){return this.layers[t]}getHeaderLength(t){const a=new Uint8Array(t),o=new DataView(t);if(a[0]!==13)throw new rl("File is not a valid MRT.");return o.getUint32(1,!0)}parseHeader(t){const a=new Uint8Array(t),o=this.getHeaderLength(t);if(a.length<o)throw new rl(`Expected header with length >= ${o} but got buffer of length ${a.length}`);const l=new _d(a.subarray(0,o)),r=Ge.read(l);if(!isNaN(this.x)&&(this.x!==r.x||this.y!==r.y||this.z!==r.z))throw new rl(`Invalid attempt to parse header ${r.z}/${r.x}/${r.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=r.x,this.y=r.y,this.z=r.z;for(const u of r.layers)this.layers[u.name]=new qx(u,{cacheSize:this._cacheSize});return this}createDecodingTask(t){const a=[],o=this.getLayer(t.layerName);for(let l=0;l<o.dataIndex.length;l++){const r=o.dataIndex[l],u=r.first_byte-t.firstByte,m=r.last_byte+1-t.firstByte;if(l<t.firstBlock||l>t.lastBlock||o._blocksInProgress.has(l))continue;const p={layerName:o.name,firstByte:u,lastByte:m,pixelFormat:o.pixelFormat,blockIndex:l,blockShape:[r.bands.length].concat(o.bandShape),buffer:o.buffer,codec:r.codec.codec,filters:r.filters.map(h=>h.filter)};o._blocksInProgress.add(l),a.push(p)}return new E1(a,()=>{a.forEach(l=>o._blocksInProgress.delete(l.blockIndex))},(l,r)=>{if(a.forEach(u=>o._blocksInProgress.delete(u.blockIndex)),l)throw l;r.forEach(u=>{this.getLayer(u.layerName).processDecodedData(u)})})}}class qx{constructor({version:t,name:a,units:o,tilesize:l,pixel_format:r,buffer:u,data_index:m},p){if(this.version=t,this.version!==1)throw new rl(`Cannot parse raster layer encoded with MRT version ${t}`);this.name=a,this.units=o,this.tileSize=l,this.buffer=u,this.pixelFormat=Xx[r],this.dataIndex=m,this.bandShape=[l+2*u,l+2*u,Kx[this.pixelFormat]],this._decodedBlocks=function(h=1e3,y=0,x=!1){if(isNaN(h)||h<0)throw new TypeError("Invalid max value");if(isNaN(y)||y<0)throw new TypeError("Invalid ttl value");if(typeof x!="boolean")throw new TypeError("Invalid resetTtl value");return new Px(h,y,x)}(p?p.cacheSize:5),this._blocksInProgress=new Set}processDecodedData(t){const a=t.blockIndex.toString();this._decodedBlocks.get(a)||this._decodedBlocks.set(a,t.data)}getBlockForBand(t){let a=0;switch(typeof t){case"string":for(const[o,l]of this.dataIndex.entries()){for(const[r,u]of l.bands.entries())if(u===t)return{bandIndex:a+r,blockIndex:o,blockBandIndex:r};a+=l.bands.length}break;case"number":for(const[o,l]of this.dataIndex.entries()){if(t>=a&&t<a+l.bands.length)return{bandIndex:t,blockIndex:o,blockBandIndex:t-a};a+=l.bands.length}break;default:throw new rl(`Invalid band \`${JSON.stringify(t)}\`. Expected string or integer.`)}throw new rl(`Band not found: ${JSON.stringify(t)}`)}getDataRange(t){let a=1/0,o=-1/0,l=1/0,r=-1/0;for(const u of t){const{blockIndex:m}=this.getBlockForBand(u);if(m<0)throw new rl(`Invalid band: ${JSON.stringify(u)}`);const p=this.dataIndex[m];l=Math.min(l,m),r=Math.max(r,m),a=Math.min(a,p.first_byte),o=Math.max(o,p.last_byte)}return{layerName:this.name,firstByte:a,lastByte:o,firstBlock:l,lastBlock:r}}hasBand(t){const{blockIndex:a}=this.getBlockForBand(t);return a>=0}hasDataForBand(t){const{blockIndex:a}=this.getBlockForBand(t);return a>=0&&!!this._decodedBlocks.get(a.toString())}getBandView(t){const{blockIndex:a,blockBandIndex:o}=this.getBlockForBand(t),l=this._decodedBlocks.get(a.toString());if(!l)throw new rl(`Data for band ${JSON.stringify(t)} of layer "${this.name}" not decoded.`);const r=this.dataIndex[a],u=this.bandShape.reduce((h,y)=>h*y,1),m=o*u,p=l.subarray(m,m+u);return{data:p,bytes:new Uint8Array(p.buffer).subarray(p.byteOffset,p.byteOffset+p.byteLength),tileSize:this.tileSize,buffer:this.buffer,offset:r.offset,scale:r.scale}}}class E1{constructor(t,a,o){this.tasks=t,this._onCancel=a,this._onComplete=o,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(t,a){this._finalized||(this._onComplete(t,a),this._finalized=!0)}}v1.performDecoding=function(e,t){return Promise.all(t.tasks.map(a=>{const{layerName:o,firstByte:l,lastByte:r,pixelFormat:u,blockShape:m,blockIndex:p,filters:h,codec:y}=a,x=new Uint8Array(e).subarray(l,r+1),v=new Uint32Array(m[0]*m[1]*m[2]);let C;if(y!=="gzip_data")throw new Error(`Unhandled codec: ${y}`);return C=function(R,N){if(!globalThis.DecompressionStream&&N==="gzip_data")return Promise.resolve(((j=function(J){J[0]==31&&J[1]==139&&J[2]==8||bn(6,"invalid gzip data");var st=J[3],_t=10;4&st&&(_t+=2+(J[10]|J[11]<<8));for(var mt=(st>>3&1)+(st>>4&1);mt>0;mt-=!J[_t++]);return _t+(2&st)}(Y=R))+8>Y.length&&bn(6,"invalid gzip data"),function(J,st,_t,mt){var bt=J.length;if(!bt||st.f&&!st.l)return _t||new Vo(0);var ft=!_t,Ct=ft||st.i!=2,Dt=st.i;ft&&(_t=new Vo(3*bt));var Et=function(ro){var Zi=_t.length;if(ro>Zi){var Xo=new Vo(Math.max(2*Zi,ro));Xo.set(_t),_t=Xo}},Wt=st.f||0,xt=st.p||0,wt=st.b||0,Qt=st.l,Bt=st.d,pe=st.m,de=st.n,zt=8*bt;do{if(!Qt){Wt=yn(J,xt,1);var Pe=yn(J,xt+1,3);if(xt+=3,!Pe){var ve=J[(pa=4+((xt+7)/8|0))-4]|J[pa-3]<<8,fe=pa+ve;if(fe>bt){Dt&&bn(0);break}Ct&&Et(wt+ve),_t.set(J.subarray(pa,fe),wt),st.b=wt+=ve,st.p=xt=8*fe,st.f=Wt;continue}if(Pe==1)Qt=kx,Bt=zx,pe=9,de=5;else if(Pe==2){var Ht=yn(J,xt,31)+257,Re=yn(J,xt+10,15)+4,qe=Ht+yn(J,xt+5,31)+1;xt+=14;for(var We=new Vo(qe),$e=new Vo(19),Ue=0;Ue<Re;++Ue)$e[Fx[Ue]]=yn(J,xt+3*Ue,7);xt+=3*Re;var la=Yp($e),He=(1<<la)-1,wa=wu($e,la,1);for(Ue=0;Ue<qe;){var pa,ga=wa[yn(J,xt,He)];if(xt+=15&ga,(pa=ga>>4)<16)We[Ue++]=pa;else{var va=0,ha=0;for(pa==16?(ha=3+yn(J,xt,3),xt+=2,va=We[Ue-1]):pa==17?(ha=3+yn(J,xt,7),xt+=3):pa==18&&(ha=11+yn(J,xt,127),xt+=7);ha--;)We[Ue++]=va}}var Ka=We.subarray(0,Ht),Sa=We.subarray(Ht);pe=Yp(Ka),de=Yp(Sa),Qt=wu(Ka,pe,1),Bt=wu(Sa,de,1)}else bn(1);if(xt>zt){Dt&&bn(0);break}}Ct&&Et(wt+131072);for(var ii=(1<<pe)-1,xi=(1<<de)-1,Ui=xt;;Ui=xt){var Ga=(va=Qt[Gp(J,xt)&ii])>>4;if((xt+=15&va)>zt){Dt&&bn(0);break}if(va||bn(2),Ga<256)_t[wt++]=Ga;else{if(Ga==256){Ui=xt,Qt=null;break}var Ja=Ga-254;Ga>264&&(Ja=yn(J,xt,(1<<(Pi=g1[Ue=Ga-257]))-1)+x1[Ue],xt+=Pi);var Ni=Bt[Gp(J,xt)&xi],Li=Ni>>4;if(Ni||bn(3),xt+=15&Ni,Sa=Ux[Li],Li>3){var Pi=y1[Li];Sa+=Gp(J,xt)&(1<<Pi)-1,xt+=Pi}if(xt>zt){Dt&&bn(0);break}Ct&&Et(wt+131072);var ka=wt+Ja;if(wt<Sa){var Co=0-Sa,dl=Math.min(Sa,ka);for(Co+wt<0&&bn(3);wt<dl;++wt)_t[wt]=mt[Co+wt]}for(;wt<ka;++wt)_t[wt]=_t[wt-Sa]}}st.l=Qt,st.p=Ui,st.b=wt,st.f=Wt,Qt&&(Wt=1,st.m=pe,st.d=Bt,st.n=de)}while(!Wt);return wt!=_t.length&&ft?function(ro,Zi,Xo){return(Zi==null||Zi<0)&&(Zi=0),(Xo==null||Xo>ro.length)&&(Xo=ro.length),new Vo(ro.subarray(Zi,Xo))}(_t,0,wt):_t.subarray(0,wt)}(Y.subarray(j,-8),{i:2},new Vo(((W=Y)[(D=W.length)-4]|W[D-3]<<8|W[D-2]<<16|W[D-1]<<24)>>>0),void 0)));var W,D,Y,j;const K=Vx[N];if(!K)throw new Error(`Unhandled codec: ${N}`);const tt=new globalThis.DecompressionStream(K);return new Response(new Blob([R]).stream().pipeThrough(tt)).arrayBuffer().then(J=>new Uint8Array(J))}(x,y).then(R=>{const N=gn.read(new _d(R));if(N.values==="uint32_values")return N.uint32_values.readValuesInto(v),new jx[u](v.buffer);throw new Error(`Unhandled numeric data "${N.values}"`)}),C.then(R=>{for(let N=h.length-1;N>=0;N--)switch(h[N]){case"delta_filter":wx(R,m);break;case"zigzag_filter":Wx(R);break;case"bitshuffle_filter":Mx(R,u);break;default:throw new Error(`Unhandled filter "${h[N]}"`)}return{layerName:o,blockIndex:p,data:R}}).catch(R=>{throw R})}))},me(E1,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});const I1=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Vp{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,o]=new Uint8Array(t,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const l=o>>4;if(l!==1)throw new Error(`Got v${l} data when expected v1.`);const r=I1[15&o];if(!r)throw new Error("Unrecognized array type.");const[u]=new Uint16Array(t,2,1),[m]=new Uint32Array(t,4,1);return new Vp(m,u,r,t)}constructor(t,a=64,o=Float64Array,l){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=o,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const r=I1.indexOf(this.ArrayType),u=2*t*this.ArrayType.BYTES_PER_ELEMENT,m=t*this.IndexArrayType.BYTES_PER_ELEMENT,p=(8-m%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${o}.`);l&&l instanceof ArrayBuffer?(this.data=l,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+m+p,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+u+m+p),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+m+p,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=t)}add(t,a){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=t,this.coords[this._pos++]=a,o}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Xp(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,a,o,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:u,nodeSize:m}=this,p=[0,r.length-1,0],h=[];for(;p.length;){const y=p.pop()||0,x=p.pop()||0,v=p.pop()||0;if(x-v<=m){for(let W=v;W<=x;W++){const D=u[2*W],Y=u[2*W+1];D>=t&&D<=o&&Y>=a&&Y<=l&&h.push(r[W])}continue}const C=v+x>>1,R=u[2*C],N=u[2*C+1];R>=t&&R<=o&&N>=a&&N<=l&&h.push(r[C]),(y===0?t<=R:a<=N)&&(p.push(v),p.push(C-1),p.push(1-y)),(y===0?o>=R:l>=N)&&(p.push(C+1),p.push(x),p.push(1-y))}return h}within(t,a,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:l,coords:r,nodeSize:u}=this,m=[0,l.length-1,0],p=[],h=o*o;for(;m.length;){const y=m.pop()||0,x=m.pop()||0,v=m.pop()||0;if(x-v<=u){for(let W=v;W<=x;W++)C1(r[2*W],r[2*W+1],t,a)<=h&&p.push(l[W]);continue}const C=v+x>>1,R=r[2*C],N=r[2*C+1];C1(R,N,t,a)<=h&&p.push(l[C]),(y===0?t-o<=R:a-o<=N)&&(m.push(v),m.push(C-1),m.push(1-y)),(y===0?t+o>=R:a+o>=N)&&(m.push(C+1),m.push(x),m.push(1-y))}return p}}function Xp(e,t,a,o,l,r){if(l-o<=a)return;const u=o+l>>1;O1(e,t,u,o,l,r),Xp(e,t,a,o,u-1,1-r),Xp(e,t,a,u+1,l,1-r)}function O1(e,t,a,o,l,r){for(;l>o;){if(l-o>600){const h=l-o+1,y=a-o+1,x=Math.log(h),v=.5*Math.exp(2*x/3),C=.5*Math.sqrt(x*v*(h-v)/h)*(y-h/2<0?-1:1);O1(e,t,a,Math.max(o,Math.floor(a-y*v/h+C)),Math.min(l,Math.floor(a+(h-y)*v/h+C)),r)}const u=t[2*a+r];let m=o,p=l;for(Mu(e,t,o,a),t[2*l+r]>u&&Mu(e,t,o,l);m<p;){for(Mu(e,t,m,p),m++,p--;t[2*m+r]<u;)m++;for(;t[2*p+r]>u;)p--}t[2*o+r]===u?Mu(e,t,o,p):(p++,Mu(e,t,p,l)),p<=a&&(o=p+1),a<=p&&(l=p-1)}}function Mu(e,t,a,o){Kp(e,a,o),Kp(t,2*a,2*o),Kp(t,2*a+1,2*o+1)}function Kp(e,t,a){const o=e[t];e[t]=e[a],e[a]=o}function C1(e,t,a,o){const l=e-a,r=t-o;return l*l+r*r}s.$=N0,s.A=kr,s.B=R_,s.C=ra,s.D=gt,s.E=Cs,s.F=qa,s.G=Zt,s.H=class{constructor(e){this.specification=e}possiblyEvaluate(e,t){return tn(e.expression.evaluate(t))}interpolate(e,t,a){return{x:sa(e.x,t.x,a),y:sa(e.y,t.y,a),z:sa(e.z,t.z,a),azimuthal:sa(e.azimuthal,t.azimuthal,a),polar:sa(e.polar,t.polar,a)}}},s.I=xp,s.J=rn,s.K=ja,s.L=ma,s.M=class{constructor(e,t,a,o){this.id=e,this.position=t!=null?new ct(t[0],t[1]):new ct(0,0),this.orientation=a??[0,0,0],this.nodes=o,this.uploaded=!1,this.aabb=new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(e,t){if(s.a6.multiply(e.matrix,t,e.matrix),e.meshes)for(const a of e.meshes){const o=ti.applyTransform(a.aabb,e.matrix);this.aabb.encapsulate(o)}if(e.children)for(const a of e.children)this._applyTransformations(a,e.matrix)}computeBoundsAndApplyParent(){const e=s.a6.identity([]);for(const t of this.nodes)this._applyTransformations(t,e)}computeModelMatrix(e,t,a,o,l,r,u=!1){q0(this.matrix,this,e.transform,this.position,t,a,o,l,r,u)}upload(e){if(!this.uploaded){for(const t of this.nodes)Wp(t,e);for(const t of this.nodes)Nm(t);this.uploaded=!0}}destroy(){for(const e of this.nodes)Mp(e)}},s.O=Po,s.P=jt,s.Q=Ul,s.R=to,s.S=Qs,s.T=Np,s.U=sa,s.V=se,s.W=Xu,s.X=class{constructor(e){this.specification=e}possiblyEvaluate(e,t){return function([a,o]){const l=tn([1,a,o]);return{x:l.x,y:l.y,z:l.z}}(e.expression.evaluate(t))}interpolate(e,t,a){return{x:sa(e.x,t.x,a),y:sa(e.y,t.y,a),z:sa(e.z,t.z,a)}}},s.Y=function(e,t,a=0,o=!0){const l=new jt(a,a),r=e.sub(l),u=t.add(l),m=[r,new jt(u.x,r.y),u,new jt(r.x,u.y)];return o&&m.push(r.clone()),m},s.Z=Ml,s._=function(e,t){const a=[];for(let o=0;o<e.length;o++){const l=wi(o-1,-1,e.length-1),r=wi(o+1,-1,e.length-1),u=e[o],m=e[r],p=e[l].sub(u).unit(),h=m.sub(u).unit(),y=h.angleWithSep(p.x,p.y),x=p.add(h).unit().mult(-1*t/Math.sin(y/2));a.push(u.add(x))}return a},s.a=Dd,s.a$=function(e){const t=[];for(const a in e)t.push(e[a]);return t},s.a0=Lh,s.a1=function(e,t,a=0){return s.N.fromValues(((t.x-a)*e.scale-e.x)*se,(t.y*e.scale-e.y)*se,Wa(t.z,t.y))},s.a2=$f,s.a3=jy,s.a4=function(e){let t=1/0,a=1/0,o=-1/0,l=-1/0;for(const r of e)t=Math.min(t,r.x),a=Math.min(a,r.y),o=Math.max(o,r.x),l=Math.max(l,r.y);return{min:new jt(t,a),max:new jt(o,l)}},s.a5=Xe,s.a8=un,s.a9=ba,s.aA=_c,s.aB=ai,s.aC=vs,s.aD=Oc,s.aE=vm,s.aF=function(){fo.isLoading()||fo.isLoaded()||Un()!=="deferred"||z_()},s.aG=po,s.aH=yi,s.aI=d1,s.aJ=Qn,s.aK=pp,s.aL=cp,s.aM=Ci,s.aN=ko,s.aO=eu,s.aP=$g,s.aQ=em,s.aR=Rp,s.aS=function(e,t){const a=Qs(t.zoom);if(a===0)return Kn(e);const o=jc(e),l=tp(o),r=Xe(o.getWest())*t.worldSize,u=Xe(o.getEast())*t.worldSize,m=Fe(o.getNorth())*t.worldSize,p=Fe(o.getSouth())*t.worldSize,h=[r,m,0],y=[u,m,0],x=[r,p,0],v=[u,p,0],C=s.a6.invert([],t.globeMatrix);return s.N.transformMat4(h,h,C),s.N.transformMat4(y,y,C),s.N.transformMat4(x,x,C),s.N.transformMat4(v,v,C),l[0]=Ts(l[0],x,a),l[1]=Ts(l[1],v,a),l[2]=Ts(l[2],y,a),l[3]=Ts(l[3],h,a),ti.fromPoints(l)},s.aT=$c,s.aU=_u,s.aV=Ts,s.aW=qi,s.aX=GT,s.aY=Zn,s.aZ=v1,s.a_=Pt,s.aa=Ve,s.ab=V,s.ac=function(e,t){const a={};for(let o=0;o<t.length;o++){const l=t[o];l in e&&(a[l]=e[l])}return a},s.ad=Tt,s.ae=Fe,s.af=class{constructor(e){this.entries={},this.scheduler=e}request(e,t,a,o){const l=this.entries[e]=this.entries[e]||{callbacks:[]};if(l.result){const[r,u]=l.result;return this.scheduler?this.scheduler.add(()=>{o(r,u)},t):o(r,u),()=>{}}return l.callbacks.push(o),l.cancel||(l.cancel=a((r,u)=>{l.result=[r,u];for(const m of l.callbacks)this.scheduler?this.scheduler.add(()=>{m(r,u)},t):m(r,u);setTimeout(()=>delete this.entries[e],3e3)})),()=>{l.result||(l.callbacks=l.callbacks.filter(r=>r!==o),l.callbacks.length||(l.cancel(),delete this.entries[e]))}}},s.ag=K_,s.ah=function(e,t,a){const o=JSON.stringify(e.request);return e.data&&(this.deduped.entries[o]={result:[null,e.data]}),this.deduped.request(o,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},l=>{const r=Pt(e.request,(u,m,p,h)=>{u?l(u):m&&l(null,{vectorTile:a?void 0:new mp(new _d(m)),rawData:m,cacheControl:p,expires:h})});return()=>{r.cancel(),l()}},t)},s.ai=function(e){Ea++,Ea>Te&&(e.getActor().send("enforceCacheSizeLimit",Lt),Ea=0)},s.aj=pi,s.ak=Ft,s.al=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},s.am=Xt,s.an=U0,s.ao=k0,s.ap=B0,s.aq=function(e,t){const a=document.createElement("video");a.muted=!0,a.onloadstart=function(){t(null,a)};for(let o=0;o<e.length;o++){const l=document.createElement("source");Vt(e[o])||(a.crossOrigin="Anonymous"),l.src=e[o],a.appendChild(l)}return{cancel:()=>{}}},s.ar=Im,s.as=Au,s.at=ke,s.au=da,s.av=dn,s.aw=Ii,s.ax=ci,s.ay=Ia,s.az=fs,s.b=ts,s.b$=xc,s.b0=function(e,t){const a=[];for(const o in e)o in t||a.push(o);return a},s.b1=wo,s.b2=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.b3=function(e,t){const{x:a,y:o}=e.point,l=ay(a,o,e.worldSize/e._pixelsPerMercatorPixel,0,0);return s.a6.multiply(l,l,ep(Kn(t)))},s.b5=ld,s.b6=Go,s.b7=dm,s.b8=function(e,t,a,o,l){const r=5*t+2;e.float32[r+0]=a,e.float32[r+1]=o,e.float32[r+2]=l},s.b9=Am,s.bA=Sm,s.bB=z0,s.bC=function(e){const t=z0(e,!0);return s.b4.invert([],[t[0],t[1],t[4],t[5]])},s.bD=Zf,s.bE=function(e){const{x:t,y:a}=e.point,{lng:o,lat:l}=e._center;return ay(t,a,e.worldSize,o,l)},s.bF=ni,s.bG=$,s.bH=function(e){const t=Math.round((e+45+360)%360/90)%4;return ki[t]},s.bI=45,s.bJ=Ee,s.bK=_,s.bL=Yn,s.bM=zc,s.bN=Vi,s.bO=Qr,s.bP=d,s.bQ=function(e,t,a){const o=Math.sqrt(e*e+t*t+a*a),l=o>0?Math.acos(a/o)*vn:0;let r=e!==0||t!==0?Math.atan2(-t,-e)*vn+90:0;return r<0&&(r+=360),[o,r,l]},s.bR=aa,s.bS=ti,s.bT=tn,s.bU=function(e){return[Math.pow(e[0],1/2.2),Math.pow(e[1],1/2.2),Math.pow(e[2],1/2.2)]},s.bV=function(e){return e({pluginStatus:io,pluginURL:Bn}),k_.on("pluginStateChange",e),e},s.bW=hd,s.bX=Lm,s.bY=cd,s.bZ=Ap,s.b_=ui,s.ba=b0,s.bb=Zo,s.bc=Yi,s.bd=O0,s.be=Ep,s.bf=Tp,s.bg=Vp,s.bh=wi,s.bj=Oe,s.bk=Q,s.bl=ze,s.bm=function(e,t,a){e[4*t+0]=a[0],e[4*t+1]=a[1],e[4*t+2]=a[2],e[4*t+3]=a[3]},s.bn=ct,s.bo=M0,s.bp=qt,s.bq=Jf,s.br=H0,s.bs=kt,s.bt=Qg,s.bu=function(e,t,a,o,l,r,u,m,p){if(p.name==="globe")return Qg(e,t,new kt(a,o,l),!1);const h=Au({z:a,x:o,y:l},p);return new ti([(r+h.x/h.scale)*t,t*(h.y/h.scale),u],[(r+h.x2/h.scale)*t,t*(h.y2/h.scale),m])},s.bv=function(e,t,a){let o=0;for(let l=0;l<2;++l){const r=a?a[l]:0;e[l]>r&&(o+=(e[l]-r)*(e[l]-r)),t[l]<r&&(o+=(r-t[l])*(r-t[l]))}return o},s.bw=ta,s.bx=z,s.by=function(e){const t=s.a6.identity(new Float64Array(16));s.a6.multiply(t,e.pixelMatrix,e.globeMatrix);const a=[0,rt,0],o=[0,yt,0];return s.N.transformMat4(a,a,t),s.N.transformMat4(o,o,t),[a[0]>0&&a[0]<=e.width&&a[1]>0&&a[1]<=e.height&&!ip(e,new ct(e.center.lat,90)),o[0]>0&&o[0]<=e.width&&o[1]>0&&o[1]<=e.height&&!ip(e,new ct(e.center.lat,-90))]},s.bz=function(e,t){const{scale:a}=e.tileTransform,o=a*se/(e.tileSize*Math.pow(2,t.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return s.b4.scale(new Float32Array(4),t.inverseAdjustmentMatrix,[o,o])},s.c=l1,s.c$=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},s.c0=Rt,s.c1=uo,s.c2=function(e,t,a){return e.type==="custom"?new Q3(e,t):new Lx[e.type](e,t,a)},s.c3=function(e){const t=e.indexOf(Xr);return t>=0?e.slice(0,t):e},s.c4=function(e){return e.indexOf(Xr)>=0},s.c5=function(e){const t=e.indexOf(Xr);return t>=0?e.slice(t+1):""},s.c6=function(e){const t=[],a=e.id;return a===void 0&&t.push({message:`layers.${a}: missing required property "id"`}),e.render===void 0&&t.push({message:`layers.${a}: missing required method "render"`}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),t},s.c7=bo,s.c8=k_,s.c9=St,s.cA=Zy,s.cB=(e,t,a,o,l,r)=>{const u=e.transform;return{u_matrix:$y(e,t,a,o),u_texsize:t.imageAtlasTexture?t.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:u.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:l,u_image:0,u_tile_units_to_pixels:qy(t,u),u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:r}},s.cC=(e,t,a,o,l,r,u)=>{const m=e.transform,p=m.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:$y(e,t,a,o),u_pixels_to_tile_units:p,u_device_pixel_ratio:r,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:l,u_texsize:Jy(a)&&t.lineAtlasTexture?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:qy(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:u,u_emissive_strength:a.paint.get("line-emissive-strength")}},s.cD=hl,s.cE=uu,s.cF=Hy,s.cG=he,s.cH=rm,s.cI=al,s.cJ=450,s.cK=7,s.cL=$3,s.cM=256,s.cN=ep,s.cO=Hn,s.cP=tu,s.cQ=function(e,t,a,o,l){return Ve((e-t)/(a-t)*(l-o)+o,o,l)},s.cR=ea,s.cS=Pp,s.cT=[1,1,1],s.cU=nd,s.cV=pd,s.cW=qo,s.cX=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(e){const t=xy(new jt(0,0),new jt(se,se),e),a=[];for(const o of this._activeRegions){if(o.hiddenByOverlap||!Ty(t,o))continue;const l=N2(o.min,o.max,e);a.push({min:l.min,max:l.max,sourceId:this._sourceIds[o.priority],footprint:o.footprint,footprintTileId:o.tileId})}return a}setSources(e){this._setSources(e.map(t=>({getSourceId:()=>t.cache.id,getFootprints:()=>{const a=[];for(const o of t.cache.getVisibleCoordinates()){const l=t.cache.getTile(o).buckets[t.layer];if(l)for(const r of l.getNodesInfo()){const u=r.node;u.footprint&&a.push({footprint:u.footprint,id:o.toUnwrapped()})}}return a}})))}_addSource(e){const t=e.getFootprints();if(t.length!==0){for(const a of t){if(!a.footprint)continue;const o=xy(a.footprint.min,a.footprint.max,a.id);this._activeRegions.push({min:o.min,max:o.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:a.id,footprint:a.footprint})}this._sourceIds.push(e.getSourceId())}}_computeReplacement(){this._activeRegions.sort((t,a)=>t.priority-a.priority||nm(t.min,a.min)||nm(t.max,a.max));let e=this._activeRegions.length!==this._prevRegions.length;if(!e){let t=0,a=0;for(;!e&&t!==this._activeRegions.length;){const o=this._activeRegions[t],l=this._prevRegions[a];e=o.priority!==l.priority||!by(o,l),++t,++a}}if(e){++this._updateTime;const t=a=>{const o=this._activeRegions;if(a>=o.length)return a;const l=o[a].priority;for(;a<o.length&&o[a].priority===l;)++a;return a};if(this._sourceIds.length>1){let a=0,o=t(a);for(;a!==o;){let l=a;const r=a;for(;l!==o;){const u=this._activeRegions[l];u.hiddenByOverlap=!1;for(let m=0;m<r;m++){const p=this._activeRegions[m];if(!p.hiddenByOverlap&&Ty(u,p)&&(u.hiddenByOverlap=vy(u.footprint,u.tileId,p.footprint,p.tileId),u.hiddenByOverlap))break}++l}a=o,o=t(a)}}}}_setSources(e){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let t=e.length-1;t>=0;t--)this._addSource(e[t]);this._computeReplacement()}},s.cY=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy()}_fillGridMeshWithLods(e,t){const a=new ko,o=new Ii,l=[],r=e+1+2,u=t[0]+1,m=t[0]+1+(1+t.length),p=(h,y,x)=>{let v=h===r-1?h-2:h===0?h:h-1;return v+=x?24575:0,[v,y]};for(let h=0;h<r;++h)a.emplaceBack(...p(h,0,!0));for(let h=0;h<u;++h)for(let y=0;y<r;++y)a.emplaceBack(...p(y,h,(y===0||y===r-1)&&!0));for(let h=0;h<t.length;++h){const y=t[h];for(let x=0;x<r;++x)a.emplaceBack(...p(x,y,!0))}for(let h=0;h<t.length;++h){const y=o.length,x=t[h]+1+2,v=new Ii;for(let N=0;N<x-1;N++){const W=N===x-2,D=W?r*(m-t.length+h-N):r;for(let Y=0;Y<r-1;Y++){const j=N*r+Y;N===0||W||Y===0||Y===r-2?(v.emplaceBack(j+1,j,j+D),v.emplaceBack(j+D,j+D+1,j+1)):(o.emplaceBack(j+1,j,j+D),o.emplaceBack(j+D,j+D+1,j+1))}}const C=ai.simpleSegment(0,y,a.length,o.length-y);for(let N=0;N<v.uint16.length;N+=3)o.emplaceBack(v.uint16[N],v.uint16[N+1],v.uint16[N+2]);const R=ai.simpleSegment(0,y,a.length,o.length-y);l.push({withoutSkirts:C,withSkirts:R})}return{vertices:a,indices:o,segments:l}}_createGrid(e){const t=this._fillGridMeshWithLods(at,nt);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,$g.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new Ii;for(let u=0;u<=at;u++)t.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const a=new Hn,o=new Hn,l=new Hn,r=new Hn;this._poleSegments=[];for(let u=0,m=0;u<$;u++){const p=360/(1<<u);a.emplaceBack(0,-V,0,.5,0),o.emplaceBack(0,-V,0,.5,1),l.emplaceBack(0,-V,0,.5,.5),r.emplaceBack(0,-V,0,.5,.5);for(let h=0;h<=at;h++){let y=h/at,x=0;const v=sa(0,p,y),[C,R,N]=ut(KT,jT,v,V);a.emplaceBack(C,R,N,y,x),o.emplaceBack(C,R,N,y,1-x);const W=Oe(v);y=.5+.5*Math.sin(W),x=.5+.5*Math.cos(W),l.emplaceBack(C,R,N,y,x),r.emplaceBack(C,R,N,y,1-x)}this._poleSegments.push(ai.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(a,Xc,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(o,Xc,!1),this._texturedPoleNorthVertexBuffer=e.createVertexBuffer(l,Xc,!1),this._texturedPoleSouthVertexBuffer=e.createVertexBuffer(r,Xc,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e,t){return[t?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,t?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},s.cZ=function(e){return In.has(e)},s.c_=Qi,s.ca=i,s.cb=class extends _n{constructor(e){super(e),this.current=c}set(e,t,a){if(this.fetchUniformLocation(e,t)){for(let o=0;o<9;o++)if(a[o]!==this.current[o]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},s.cc=oe,s.cd=function(e,t,a){const o=Qs(a.zoom),l=e.style.map._antialias,r=t.options.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return o===0&&!l&&!r},s.ce=function(e){const t=e.pixelsPerMeter,a=t/ze(1,e.center.lat),o=s.a6.identity(new Float64Array(16));return s.a6.translate(o,o,[e.point.x,e.point.y,0]),s.a6.scale(o,o,[a,a,t]),Float32Array.from(o)},s.cf=jc,s.cg=function(e){const t=ta-5;e=Ve(e,-t,t)/t*90;const a=Math.pow(Math.abs(Math.sin(Oe(e))),3);return Math.round(a*(nt.length-1))},s.ch=function(e,t,a,o){const l=t.getNorth(),r=t.getSouth(),u=t.getWest(),m=t.getEast(),p=1<<e.z,h=m-u,y=l-r,x=h/at,v=-y/nt[a],C=[0,x,0,v,0,0,l,u,0];if(e.z>0){const R=180/o;s.co.multiply(C,C,[R/h+1,0,0,0,R/y+1,0,-.5*R/x,.5*R/v,1])}return C[2]=p,C[5]=e.x,C[8]=e.y,C},s.ci=Kn,s.cj=function(e,t,a){const o=s.a6.identity(new Float64Array(16)),l=(t/(1<<e)-.5)*Math.PI*2;return s.a6.rotateY(o,a.globeMatrix,l),Float32Array.from(o)},s.ck=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const a=t.getSource().maxzoom,o=1<<a,l=Math.floor(e.x),r=Math.floor((e.x-l)*o),u=Math.floor(e.y*o),m=this.findDEMTileFor(new Xt(a,l,a,r,u));return!(!m||!m.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,a=!0){if(this.isUsingMockSource())return null;t==null&&(t=null);const o=this._source();if(!o||e.y<0||e.y>1)return t;const l=o.getSource().maxzoom,r=1<<l,u=Math.floor(e.x),m=e.x-u,p=new Xt(l,u,l,Math.floor(m*r),Math.floor(e.y*r)),h=this.findDEMTileFor(p);if(!h||!h.dem)return t;const y=h.dem,x=1<<h.tileID.canonical.z,v=(m*x-h.tileID.canonical.x)*y.dim,C=(e.y*x-h.tileID.canonical.y)*y.dim,R=Math.floor(v),N=Math.floor(C);return(a?this.exaggeration():1)*sa(sa(y.get(R,N),y.get(R,N+1),C-N),sa(y.get(R+1,N),y.get(R+1,N+1),C-N),v-R)}getAtTileOffset(e,t,a){const o=1<<e.canonical.z;return this.getAtPointOrZero(new ma(e.wrap+(e.canonical.x+t/se)/o,(e.canonical.y+a/se)/o))}getAtTileOffsetFunc(e,t,a,o){return l=>{const r=this.getAtTileOffset(e,l.x,l.y),u=o.upVector(e.canonical,l.x,l.y),m=o.upVectorScale(e.canonical,t,a).metersToTile;return s.N.scale(u,u,r*m),u}}getForTilePoints(e,t,a,o){if(this.isUsingMockSource())return!1;const l=nd.create(this,e,o);return!!l&&(t.forEach(r=>{r[2]=this.exaggeration()*l.getElevationAt(r[0],r[1],a)}),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const a=t.dem.tree,o=t.tileID,l=1<<e.canonical.z-o.canonical.z;let r=e.canonical.x/l-o.canonical.x,u=e.canonical.y/l-o.canonical.y,m=0;for(let p=0;p<e.canonical.z-o.canonical.z&&!a.leaves[m];p++){r*=2,u*=2;const h=2*Math.floor(u)+Math.floor(r);m=a.childOffsets[m]+h,r%=1,u%=1}return{min:this.exaggeration()*a.minimums[m],max:this.exaggeration()*a.maximums[m]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,a){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const e=this.visibleDemTiles;if(e.length===0)return null;let t=!1,a=Number.MAX_VALUE,o=Number.MIN_VALUE;for(const l of e){const r=this.getMinMaxForTile(l.tileID);r&&(a=Math.min(a,r.min),o=Math.max(o,r.max),t=!0)}return t?{min:a,max:o}:null}},s.cl=Kc,s.cm=uy,s.cn=function(e,t){return[Math.pow(e[0],2.2)*t,Math.pow(e[1],2.2)*t,Math.pow(e[2],2.2)*t]},s.cp=ey,s.cq=256,s.cr=function(e,t){const a=[0,0,0],o=$c(Kn(t.canonical));return s.N.transformMat4(a,a,o),s.N.transformMat4(a,a,e),a},s.cs=e=>({u_camera_to_center_distance:new Vi(e),u_extrude_scale:new g(e),u_device_pixel_ratio:new Vi(e),u_matrix:new _(e),u_inv_rot_matrix:new _(e),u_merc_center:new Yn(e),u_tile_id:new zc(e),u_zoom_transition:new Vi(e),u_up_dir:new zc(e),u_emissive_strength:new Vi(e)}),s.ct=e=>({u_matrix:new _(e),u_pixels_to_tile_units:new g(e),u_device_pixel_ratio:new Vi(e),u_units_to_pixels:new Yn(e),u_dash_image:new Qr(e),u_gradient_image:new Qr(e),u_image_height:new Vi(e),u_texsize:new Yn(e),u_tile_units_to_pixels:new Vi(e),u_alpha_discard_threshold:new Vi(e),u_trim_offset:new Yn(e),u_emissive_strength:new Vi(e)}),s.cu=e=>({u_matrix:new _(e),u_texsize:new Yn(e),u_pixels_to_tile_units:new g(e),u_device_pixel_ratio:new Vi(e),u_image:new Qr(e),u_units_to_pixels:new Yn(e),u_tile_units_to_pixels:new Vi(e),u_alpha_discard_threshold:new Vi(e),u_trim_offset:new Yn(e)}),s.cv=qr,s.cw=n3,s.cx=s3,s.cy=ny,s.cz=(e,t,a,o,l,r)=>{const u=e.transform,m=u.projection.name==="globe";let p;if(r.paint.get("circle-pitch-alignment")==="map")if(m){const y=ey(u.zoom,t.canonical)*u._pixelsPerMercatorPixel;p=Float32Array.from([y,0,0,y])}else p=u.calculatePixelsToTileUnitsMatrix(a);else p=new Float32Array([u.pixelsToGLUnits[0],0,0,u.pixelsToGLUnits[1]]);const h={u_camera_to_center_distance:e.transform.getCameraToCenterDistance(u.projection),u_matrix:e.translatePosMatrix(t.projMatrix,a,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Gt.devicePixelRatio,u_extrude_scale:p,u_inv_rot_matrix:qT,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:r.paint.get("circle-emissive-strength")};if(m){h.u_inv_rot_matrix=o,h.u_merc_center=l,h.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],h.u_zoom_transition=Qs(u.zoom);const y=l[0]*se,x=l[1]*se;h.u_up_dir=u.projection.upVector(new kt(0,0,0),y,x)}return h},s.d=ne,s.d0=vi,s.d1=fa,s.d2=It,s.d3=function([e,t,a]){const o=Math.hypot(e,t,a),l=Math.atan2(e,a),r=.5*Math.PI-Math.acos(-t/o);return new ct(ni(l),ni(r))},s.d4=vt,s.d5=At,s.d6=ip,s.d7=iy,s.d8=function(e){const t=[0,0,0],a=s.a6.identity(new Float64Array(16));return s.a6.multiply(a,e.pixelMatrix,e.globeMatrix),s.N.transformMat4(t,t,a),new jt(t[0],t[1])},s.d9=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!function(a){if(Mt==null){const o=a.navigator?a.navigator.userAgent:null;Mt=!!a.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Mt}(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.dA=pn,s.dB=r1,s.dC=_1,s.dD=Xy,s.dE=Hi,s.dF=x0,s.dG=function(e,t,a,o,l,r,u,m,p,h,y){e.createArrays(),e.tilePixelRatio=se/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const x=e.layers[0].layout,v=e.layers[0]._unevaluatedLayout._values,C={};if(e.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:Y}=e.textSizeData;C.compositeTextSizes=[v["text-size"].possiblyEvaluate(new ja(D),m),v["text-size"].possiblyEvaluate(new ja(Y),m)]}if(e.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:Y}=e.iconSizeData;C.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new ja(D),m),v["icon-size"].possiblyEvaluate(new ja(Y),m)]}C.layoutTextSize=v["text-size"].possiblyEvaluate(new ja(p+1),m),C.layoutIconSize=v["icon-size"].possiblyEvaluate(new ja(p+1),m),C.textMaxSize=v["text-size"].possiblyEvaluate(new ja(18),m);const R=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point",N=x.get("text-size");let W=!1;for(const D of e.features)if(D.icon&&D.icon.nameSecondary){W=!0;break}for(const D of e.features){const Y=x.get("text-font").evaluate(D,{},m).join(","),j=N.evaluate(D,{},m),K=C.layoutTextSize.evaluate(D,{},m),tt=(C.layoutIconSize.evaluate(D,{},m),{horizontal:{},vertical:void 0}),J=D.text;let st,_t=[0,0];if(J){const ft=J.toString(),Ct=x.get("text-letter-spacing").evaluate(D,{},m)*Yi,Dt=x.get("text-line-height").evaluate(D,{},m)*Yi,Et=Cf(ft)?Ct:0,Wt=x.get("text-anchor").evaluate(D,{},m),xt=x.get("text-variable-anchor");if(!xt){const de=x.get("text-radial-offset").evaluate(D,{},m);_t=de?O0(Wt,[de*Yi,vp]):x.get("text-offset").evaluate(D,{},m).map(zt=>zt*Yi)}let wt=R?"center":x.get("text-justify").evaluate(D,{},m);const Qt=x.get("symbol-placement")==="point",Bt=Qt?x.get("text-max-width").evaluate(D,{},m)*Yi:1/0,pe=de=>{e.allowVerticalPlacement&&Fn(ft)&&(tt.vertical=bp(J,t,a,l,Y,Bt,Dt,Wt,de,Et,_t,Go.vertical,!0,K,j))};if(!R&&xt){const de=wt==="auto"?xt.map(Pe=>Ep(Pe)):[wt];let zt=!1;for(let Pe=0;Pe<de.length;Pe++){const ve=de[Pe];if(!tt.horizontal[ve])if(zt)tt.horizontal[ve]=tt.horizontal[0];else{const fe=bp(J,t,a,l,Y,Bt,Dt,"center",ve,Et,_t,Go.horizontal,!1,K,j);fe&&(tt.horizontal[ve]=fe,zt=fe.positionedLines.length===1)}}pe("left")}else{if(wt==="auto"&&(wt=Ep(Wt)),Qt||x.get("text-writing-mode").indexOf("horizontal")>=0||!Fn(ft)){const de=bp(J,t,a,l,Y,Bt,Dt,Wt,wt,Et,_t,Go.horizontal,!1,K,j);de&&(tt.horizontal[wt]=de)}pe(Qt?"left":wt)}}let mt=!1;if(D.icon&&D.icon.namePrimary){const ft=o[D.icon.namePrimary];ft&&(st=I3(l[D.icon.namePrimary],D.icon.nameSecondary?l[D.icon.nameSecondary]:void 0,x.get("icon-offset").evaluate(D,{},m),x.get("icon-anchor").evaluate(D,{},m)),mt=ft.sdf,e.sdfIcons===void 0?e.sdfIcons=ft.sdf:e.sdfIcons!==ft.sdf&&ei("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ft.pixelRatio!==e.pixelRatio||x.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}const bt=S0(tt.horizontal)||tt.vertical;e.iconsInText||(e.iconsInText=!!bt&&bt.iconsInText),(bt||st)&&P3(e,D,tt,st,o,C,K,0,_t,mt,u,m,h,y,W)}r&&e.generateCollisionDebugBuffers(p,e.collisionBoxArray)},s.dH=mp,s.dI=_d,s.dJ=sm,s.dK=be,s.dL=im,s.dM=am,s.dN=Oa,s.dO=a0,s.dP=function(e){let t=0;if(new Uint32Array(e,0,1)[0]!==t1){const a=new Uint32Array(e,0,7),[,,o,l,r,u]=a;t=a.byteLength+l+r+u+r,(o!==e.byteLength||t>=e.byteLength)&&ei("Invalid b3dm header information.")}return o1(e,t)},s.dQ=function(e,t){const a=l1(e);for(const o of a){for(const l of o.meshes)Ix(l);o.lights&&(o.lightMeshIndex=o.meshes.length,o.meshes.push(Ox(o.lights,t)))}return a},s.dR=Mm,s.dS=$0,s.dT=fo,s.dU=function(e){Ra(),ce&&ce.then(t=>{t.keys().then(a=>{for(let o=0;o<a.length-e;o++)t.delete(a[o])})})},s.da=class{constructor(e,t,a){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const e=function(){let t="";for(let a=0;a<10;a++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Jt,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!Rt(e))return e;const a=De(e);return a.params.push(`sdk=js-${ot}`),a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!Rt(e))return e;const a=De(e);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||t)}normalizeModelURL(e,t){if(!Rt(e))return e;const a=De(e);return a.path=`/models/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||t)}normalizeSourceURL(e,t,a,o){if(!Rt(e))return e;const l=De(e);return l.path=`/v4/${l.authority}.json`,l.params.push("secure"),a&&l.params.push(`language=${a}`),o&&l.params.push(`worldview=${o}`),this._makeAPIURL(l,this._customAccessToken||t)}normalizeSpriteURL(e,t,a,o){const l=De(e);return Rt(e)?(l.path=`/styles/v1${l.path}/sprite${t}${a}`,this._makeAPIURL(l,this._customAccessToken||o)):(l.path+=`${t}${a}`,na(l))}normalizeTileURL(e,t,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Rt(e))return e;const o=De(e);o.path=o.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||a&&o.authority!=="raster"&&a===512?"@2x":""}${Ta.supported?".webp":"$1"}`),o.authority==="raster"?o.path=`/${At.RASTER_URL_PREFIX}${o.path}`:o.authority==="rasterarrays"?o.path=`/${At.RASTERARRAYS_URL_PREFIX}${o.path}`:(o.path=o.path.replace(/^.+\/v4\//,"/"),o.path=`/${At.TILE_URL_VERSION}${o.path}`);const l=this._customAccessToken||function(r){for(const u of r){const m=u.match(/^access_token=(.*)$/);if(m)return m[1]}return null}(o.params)||At.ACCESS_TOKEN;return At.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&o.params.push(`sku=${this._skuToken}`),this._makeAPIURL(o,l)}canonicalizeTileURL(e,t){const a=De(e);if(!a.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!a.path.match(/\.[\w]+$/))return e;let o="mapbox://";a.path.match(/^\/raster\/v1\//)?o+=`raster/${a.path.replace(`/${At.RASTER_URL_PREFIX}/`,"")}`:a.path.match(/^\/rasterarrays\/v1\//)?o+=`rasterarrays/${a.path.replace(`/${At.RASTERARRAYS_URL_PREFIX}/`,"")}`:o+=`tiles/${a.path.replace(`/${At.TILE_URL_VERSION}/`,"")}`;let l=a.params;return t&&(l=l.filter(r=>!r.match(/^access_token=/))),l.length&&(o+=`?${l.join("&")}`),o}canonicalizeTileset(e,t){const a=!!t&&Rt(t),o=[];for(const l of e.tiles||[])Yt(l)?o.push(this.canonicalizeTileURL(l,a)):o.push(l);return o}_makeAPIURL(e,t){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",o=De(At.API_URL);if(e.protocol=o.protocol,e.authority=o.authority,e.protocol==="http"){const l=e.params.indexOf("secure");l>=0&&e.params.splice(l,1)}if(o.path!=="/"&&(e.path=`${o.path}${e.path}`),!At.REQUIRE_ACCESS_TOKEN)return na(e);if(t=t||At.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(t[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return e.params=e.params.filter(l=>l.indexOf("access_token")===-1),e.params.push(`access_token=${t||""}`),na(e)}},s.db=function(e,t){t?In.add(e):In.delete(e)},s.dc=Ta,s.dd=Wo,s.de=yl,s.df=re,s.dg=ya,s.dh=function(e){In.delete(e)},s.di=Mi,s.dj=Wi,s.dk=ot,s.dl=function(e,t){Lt=e,Te=t},s.dm=function(e,t,a=!1){if(io===M_||io===D_||io===F_)throw new Error("setRTLTextPlugin cannot be called multiple times.");Bn=Gt.resolveURL(e),io=M_,B_=t,U_(),a||z_()},s.dn=Un,s.dp=function(){Lm().acquire(Dp)},s.dq=function(){const e=Nu;e&&(e.isPreloaded()&&e.numActive()===1?(e.release(Dp),Nu=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.dr=Ru,s.ds=function(e){const t=Ze();if(!t)return;const a=t.delete(ge);e&&a.catch(e).then(()=>e())},s.dt=Su,s.du=Z0,s.dv=function(e){Fp=Gt.resolveURL(e),yd||(yd=new hd(Lm(),new Cs)),yd.broadcast("setDracoUrl",Fp)},s.dw=J0,s.dx=function(e){gd=Gt.resolveURL(e),yd||(yd=new hd(Lm(),new Cs)),yd.broadcast("setMeshoptUrl",gd)},s.dy=me,s.dz=tl,s.e=zi,s.f=Gt,s.g=function(e,t){return St(zi(e,{type:"json"}),t)},s.h=Yo,s.i=ws,s.j=Ud,s.k=Ur,s.l=function(e){return fetch(e).then(t=>t.arrayBuffer()).then(t=>o1(t,0,e))},s.m=mc,s.n=Wl,s.o=zl,s.p=T0,s.q=Yr,s.r=Hr,s.s=N_,s.t=Sl,s.u=kl,s.v=Fi,s.w=ei,s.x=Bs,s.z=G_}),et(["./shared"],function(s){function ot(Mt){const X=Mt?Mt.url.toString():void 0;return X?performance.getEntriesByName(X):[]}function ht(Mt){if(typeof Mt=="number"||typeof Mt=="boolean"||typeof Mt=="string"||Mt==null)return JSON.stringify(Mt);if(Array.isArray(Mt)){let Q="[";for(const dt of Mt)Q+=`${ht(dt)},`;return`${Q}]`}let X="{";for(const Q of Object.keys(Mt).sort())X+=`${Q}:${ht(Mt[Q])},`;return`${X}}`}function At(Mt){let X="";for(const Q of s.b2)X+=`/${ht(Mt[Q])}`;return X}class Yt{constructor(X){this.keyCache={},this._layers={},this._layerConfigs={},X&&this.replace(X)}replace(X,Q){this._layerConfigs={},this._layers={},this.update(X,[],Q)}update(X,Q,dt){this._options=dt;for(const Ft of X)this._layerConfigs[Ft.id]=Ft,(this._layers[Ft.id]=s.c2(Ft,this.scope,this._options)).compileFilter(),this.keyCache[Ft.id]&&delete this.keyCache[Ft.id];for(const Ft of Q)delete this.keyCache[Ft],delete this._layerConfigs[Ft],delete this._layers[Ft];this.familiesBySource={};const Nt=function(Ft,Gt){const ge={};for(let Te=0;Te<Ft.length;Te++){const ce=Gt&&Gt[Ft[Te].id]||At(Ft[Te]);Gt&&(Gt[Ft[Te].id]=ce);let Ae=ge[ce];Ae||(Ae=ge[ce]=[]),Ae.push(Ft[Te])}const Lt=[];for(const Te in ge)Lt.push(ge[Te]);return Lt}(s.a$(this._layerConfigs),this.keyCache);for(const Ft of Nt){const Gt=Ft.map(Ze=>this._layers[Ze.id]),ge=Gt[0];if(ge.visibility==="none")continue;const Lt=ge.source||"";let Te=this.familiesBySource[Lt];Te||(Te=this.familiesBySource[Lt]={});const ce=ge.sourceLayer||"_geojsonTileLayer";let Ae=Te[ce];Ae||(Ae=Te[ce]=[]),Ae.push(Gt)}}}const Rt=1*s.dA;class le{constructor(X){const Q={},dt=[];for(const ge in X){const Lt=X[ge],Te=Q[ge]={};for(const ce in Lt.glyphs){const Ae=Lt.glyphs[+ce];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const Ze=Ae.metrics.localGlyph?Rt:1,Ra={x:0,y:0,w:Ae.bitmap.width+2*Ze,h:Ae.bitmap.height+2*Ze};dt.push(Ra),Te[ce]=Ra}}const{w:Nt,h:Ft}=s.p(dt),Gt=new s.dz({width:Nt||1,height:Ft||1});for(const ge in X){const Lt=X[ge];for(const Te in Lt.glyphs){const ce=Lt.glyphs[+Te];if(!ce||ce.bitmap.width===0||ce.bitmap.height===0)continue;const Ae=Q[ge][Te],Ze=ce.metrics.localGlyph?Rt:1;s.dz.copy(ce.bitmap,Gt,{x:0,y:0},{x:Ae.x+Ze,y:Ae.y+Ze},ce.bitmap)}}this.image=Gt,this.positions=Q}}s.dy(le,"GlyphAtlas");class Kt{constructor(X){this.tileID=new s.am(X.tileID.overscaledZ,X.tileID.wrap,X.tileID.canonical.z,X.tileID.canonical.x,X.tileID.canonical.y),this.tileZoom=X.tileZoom,this.uid=X.uid,this.zoom=X.zoom,this.canonical=X.tileID.canonical,this.pixelRatio=X.pixelRatio,this.tileSize=X.tileSize,this.source=X.source,this.scope=X.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=X.showCollisionBoxes,this.collectResourceTiming=!!X.collectResourceTiming,this.promoteId=X.promoteId,this.isSymbolTile=X.isSymbolTile,this.tileTransform=s.as(X.tileID.canonical,X.projection),this.projection=X.projection,this.brightness=X.brightness,this.extraShadowCaster=!!X.extraShadowCaster}parse(X,Q,dt,Nt,Ft){this.status="parsing",this.data=X,this.collisionBoxArray=new s.aD;const Gt=new s.dB(Object.keys(X.layers).sort()),ge=new s.dC(this.tileID,this.promoteId);ge.bucketLayerIDs=[];const Lt={},Te=new s.dD(256,256),ce={featureIndex:ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Te,availableImages:dt,brightness:this.brightness},Ae=Q.familiesBySource[this.source];for(const Ca in Ae){const Ba=X.layers[Ca];if(!Ba)continue;let Ei=!1,za=!1,Ki=!1;for(const fi of Ae[Ca])fi[0].type==="symbol"?Ei=!0:za=!0,fi[0].is3D()&&fi[0].type!=="model"&&(Ki=!0);if(this.extraShadowCaster&&!Ki||this.isSymbolTile===!0&&!Ei||this.isSymbolTile===!1&&!za)continue;Ba.version===1&&s.w(`Vector tile source "${this.source}" layer "${Ca}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gi=Gt.encode(Ca),to=[];for(let fi=0;fi<Ba.length;fi++){const ui=Ba.feature(fi),St=ge.getId(ui,Ca);to.push({feature:ui,id:St,index:fi,sourceLayerIndex:Gi})}for(const fi of Ae[Ca]){const ui=fi[0];(!this.extraShadowCaster||ui.is3D()&&ui.type!=="model")&&(this.isSymbolTile!==void 0&&ui.type==="symbol"!==this.isSymbolTile||ui.minzoom&&this.zoom<Math.floor(ui.minzoom)||ui.maxzoom&&this.zoom>=ui.maxzoom||ui.visibility!=="none"&&(we(fi,this.zoom,ce.brightness,dt),(Lt[ui.id]=ui.createBucket({index:ge.bucketLayerIDs.length,layers:fi,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gi,sourceID:this.source,projection:this.projection.spec})).populate(to,ce,this.tileID.canonical,this.tileTransform),ge.bucketLayerIDs.push(fi.map(St=>St.id))))}}let Ze,Ra,Ha,Na;Te.trim();const Ea={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ta=()=>{if(Ze)return this.status="done",Ft(Ze);if(this.extraShadowCaster)this.status="done",Ft(null,{buckets:s.a$(Lt).filter(Ca=>!Ca.isEmpty()),featureIndex:ge,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:ce.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Ra&&Ha&&Na){const Ca=new le(Ra),Ba=new s.dF(Ha,Na);for(const Ei in Lt){const za=Lt[Ei];za instanceof s.aE?(we(za.layers,this.zoom,ce.brightness,dt),s.dG(za,Ra,Ca.positions,Ha,Ba.iconPositions,this.showCollisionBoxes,dt,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):za.hasPattern&&(za instanceof s.aK||za instanceof s.aL||za instanceof s.cH)&&(we(za.layers,this.zoom,ce.brightness,dt),za.addFeatures(ce,this.tileID.canonical,Ba.patternPositions,dt,this.tileTransform,this.brightness))}this.status="done",Ft(null,{buckets:s.a$(Lt).filter(Ei=>!Ei.isEmpty()),featureIndex:ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ca.image,lineAtlas:Te,imageAtlas:Ba,brightness:ce.brightness})}};if(!this.extraShadowCaster){const Ca=s.dE(ce.glyphDependencies,za=>Object.keys(za).map(Number));Object.keys(Ca).length?Nt.send("getGlyphs",{uid:this.uid,stacks:Ca,scope:this.scope},(za,Ki)=>{Ze||(Ze=za,Ra=Ki,Ta())},void 0,!1,Ea):Ra={};const Ba=Object.keys(ce.iconDependencies);Ba.length?Nt.send("getImages",{icons:Ba,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(za,Ki)=>{Ze||(Ze=za,Ha=Ki,Ta())},void 0,!1,Ea):Ha={};const Ei=Object.keys(ce.patternDependencies);Ei.length?Nt.send("getImages",{icons:Ei,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(za,Ki)=>{Ze||(Ze=za,Na=Ki,Ta())},void 0,!1,Ea):Na={}}Ta()}}function we(Mt,X,Q,dt){const Nt=new s.K(X,{brightness:Q});for(const Ft of Mt)Ft.recalculate(Nt,dt)}class Ot extends s.E{constructor(X,Q,dt,Nt,Ft,Gt){super(),this.actor=X,this.layerIndex=Q,this.availableImages=dt,this.loadVectorData=Ft||s.ah,this.loading={},this.loaded={},this.deduped=new s.af(X.scheduler),this.isSpriteLoaded=Nt,this.scheduler=X.scheduler,this.brightness=Gt}loadTile(X,Q){const dt=X.uid,Nt=X&&X.request,Ft=Nt&&Nt.collectResourceTiming,Gt=this.loading[dt]=new Kt(X);Gt.abort=this.loadVectorData(X,(ge,Lt)=>{const Te=!this.loading[dt];if(delete this.loading[dt],Te||ge||!Lt)return Gt.status="done",Te||(this.loaded[dt]=Gt),Q(ge);const ce=Lt.rawData,Ae={};Lt.expires&&(Ae.expires=Lt.expires),Lt.cacheControl&&(Ae.cacheControl=Lt.cacheControl),Gt.vectorTile=Lt.vectorTile||new s.dH(new s.dI(ce));const Ze=()=>{Gt.parse(Gt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ra,Ha)=>{if(Ra||!Ha)return Q(Ra);const Na={};if(Ft){const Ea=ot(Nt);Ea.length>0&&(Na.resourceTiming=JSON.parse(JSON.stringify(Ea)))}Q(null,s.e({rawTileData:ce.slice(0)},Ha,Ae,Na))})};this.isSpriteLoaded?Ze():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ze,{type:"parseTile",isSymbolTile:X.isSymbolTile,zoom:X.tileZoom}):Ze()}),this.loaded=this.loaded||{},this.loaded[dt]=Gt})}reloadTile(X,Q){const dt=this.loaded,Nt=X.uid,Ft=this;if(dt&&dt[Nt]){const Gt=dt[Nt];Gt.showCollisionBoxes=X.showCollisionBoxes,Gt.projection=X.projection,Gt.brightness=X.brightness,Gt.tileTransform=s.as(X.tileID.canonical,X.projection),Gt.extraShadowCaster=X.extraShadowCaster;const ge=(Lt,Te)=>{const ce=Gt.reloadCallback;ce&&(delete Gt.reloadCallback,Gt.parse(Gt.vectorTile,Ft.layerIndex,this.availableImages,Ft.actor,ce)),Q(Lt,Te)};Gt.status==="parsing"?Gt.reloadCallback=ge:Gt.status==="done"&&(Gt.vectorTile?Gt.parse(Gt.vectorTile,this.layerIndex,this.availableImages,this.actor,ge):ge())}else Q(null,void 0)}abortTile(X,Q){const dt=X.uid,Nt=this.loading[dt];Nt&&(Nt.abort&&Nt.abort(),delete this.loading[dt]),Q()}removeTile(X,Q){const dt=this.loaded,Nt=X.uid;dt&&dt[Nt]&&delete dt[Nt],Q()}}class ue{loadTile(X,Q){const{uid:dt,encoding:Nt,rawImageData:Ft,padding:Gt}=X,ge=ImageBitmap&&Ft instanceof ImageBitmap?this.getImageData(Ft,Gt):Ft;Q(null,new s.dJ(dt,ge,Nt,Gt<1))}getImageData(X,Q){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(X.width,X.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=X.width,this.offscreenCanvas.height=X.height,this.offscreenCanvasContext.drawImage(X,0,0,X.width,X.height);const dt=this.offscreenCanvasContext.getImageData(-Q,-Q,X.width+2*Q,X.height+2*Q);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),dt}}class be{decodeRasterArray({task:X,buffer:Q},dt){s.aZ.performDecoding(Q,X).then(Nt=>{dt(null,Nt)},Nt=>{dt(Nt)})}}function Me(Mt,X){if(Mt.length!==0){Fa(Mt[0],X);for(var Q=1;Q<Mt.length;Q++)Fa(Mt[Q],!X)}}function Fa(Mt,X){for(var Q=0,dt=0,Nt=0,Ft=Mt.length,Gt=Ft-1;Nt<Ft;Gt=Nt++){var ge=(Mt[Nt][0]-Mt[Gt][0])*(Mt[Gt][1]+Mt[Nt][1]),Lt=Q+ge;dt+=Math.abs(Q)>=Math.abs(ge)?Q-Lt+ge:ge-Lt+Q,Q=Lt}Q+dt>=0!=!!X&&Mt.reverse()}var ia=s.dK(function Mt(X,Q){var dt,Nt=X&&X.type;if(Nt==="FeatureCollection")for(dt=0;dt<X.features.length;dt++)Mt(X.features[dt],Q);else if(Nt==="GeometryCollection")for(dt=0;dt<X.geometries.length;dt++)Mt(X.geometries[dt],Q);else if(Nt==="Feature")Mt(X.geometry,Q);else if(Nt==="Polygon")Me(X.coordinates,Q);else if(Nt==="MultiPolygon")for(dt=0;dt<X.coordinates.length;dt++)Me(X.coordinates[dt],Q);return X});const Oa=s.dL.prototype.toGeoJSON;let Ai=class{constructor(Mt){this._feature=Mt,this.extent=s.V,this.type=Mt.type,this.properties=Mt.tags,"id"in Mt&&!isNaN(Mt.id)&&(this.id=parseInt(Mt.id,10))}loadGeometry(){if(this._feature.type===1){const Mt=[];for(const X of this._feature.geometry)Mt.push([new s.P(X[0],X[1])]);return Mt}{const Mt=[];for(const X of this._feature.geometry){const Q=[];for(const dt of X)Q.push(new s.P(dt[0],dt[1]));Mt.push(Q)}return Mt}}toGeoJSON(Mt,X,Q){return Oa.call(this,Mt,X,Q)}},jt=class{constructor(Mt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.V,this.length=Mt.length,this._features=Mt}feature(Mt){return new Ai(this._features[Mt])}};var yo={exports:{}},vn=s.dN,Oe=s.dM.VectorTileFeature,ni=ki;function ki(Mt,X){this.options=X||{},this.features=Mt,this.length=Mt.length}function oe(Mt,X){this.id=typeof Mt.id=="number"?Mt.id:void 0,this.type=Mt.type,this.rawGeometry=Mt.type===1?[Mt.geometry]:Mt.geometry,this.properties=Mt.tags,this.extent=X||4096}ki.prototype.feature=function(Mt){return new oe(this.features[Mt],this.options.extent)},oe.prototype.loadGeometry=function(){var Mt=this.rawGeometry;this.geometry=[];for(var X=0;X<Mt.length;X++){for(var Q=Mt[X],dt=[],Nt=0;Nt<Q.length;Nt++)dt.push(new vn(Q[Nt][0],Q[Nt][1]));this.geometry.push(dt)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Mt=this.geometry,X=1/0,Q=-1/0,dt=1/0,Nt=-1/0,Ft=0;Ft<Mt.length;Ft++)for(var Gt=Mt[Ft],ge=0;ge<Gt.length;ge++){var Lt=Gt[ge];X=Math.min(X,Lt.x),Q=Math.max(Q,Lt.x),dt=Math.min(dt,Lt.y),Nt=Math.max(Nt,Lt.y)}return[X,dt,Q,Nt]},oe.prototype.toGeoJSON=Oe.prototype.toGeoJSON;var Qi=s.dO,vi=ni;function Ve(Mt){var X=new Qi;return function(Q,dt){for(var Nt in Q.layers)dt.writeMessage(3,Po,Q.layers[Nt])}(Mt,X),X.finish()}function Po(Mt,X){var Q;X.writeVarintField(15,Mt.version||1),X.writeStringField(1,Mt.name||""),X.writeVarintField(5,Mt.extent||4096);var dt={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<Mt.length;Q++)dt.feature=Mt.feature(Q),X.writeMessage(2,wi,dt);var Nt=dt.keys;for(Q=0;Q<Nt.length;Q++)X.writeStringField(3,Nt[Q]);var Ft=dt.values;for(Q=0;Q<Ft.length;Q++)X.writeMessage(4,pl,Ft[Q])}function wi(Mt,X){var Q=Mt.feature;Q.id!==void 0&&X.writeVarintField(1,Q.id),X.writeMessage(2,wo,Mt),X.writeVarintField(3,Q.type),X.writeMessage(4,vs,Q)}function wo(Mt,X){var Q=Mt.feature,dt=Mt.keys,Nt=Mt.values,Ft=Mt.keycache,Gt=Mt.valuecache;for(var ge in Q.properties){var Lt=Q.properties[ge],Te=Ft[ge];if(Lt!==null){Te===void 0&&(dt.push(ge),Ft[ge]=Te=dt.length-1),X.writeVarint(Te);var ce=typeof Lt;ce!=="string"&&ce!=="boolean"&&ce!=="number"&&(Lt=JSON.stringify(Lt));var Ae=ce+":"+Lt,Ze=Gt[Ae];Ze===void 0&&(Nt.push(Lt),Gt[Ae]=Ze=Nt.length-1),X.writeVarint(Ze)}}}function zi(Mt,X){return(X<<3)+(7&Mt)}function $n(Mt){return Mt<<1^Mt>>31}function vs(Mt,X){for(var Q=Mt.loadGeometry(),dt=Mt.type,Nt=0,Ft=0,Gt=Q.length,ge=0;ge<Gt;ge++){var Lt=Q[ge],Te=1;dt===1&&(Te=Lt.length),X.writeVarint(zi(1,Te));for(var ce=dt===3?Lt.length-1:Lt.length,Ae=0;Ae<ce;Ae++){Ae===1&&dt!==1&&X.writeVarint(zi(2,ce-1));var Ze=Lt[Ae].x-Nt,Ra=Lt[Ae].y-Ft;X.writeVarint($n(Ze)),X.writeVarint($n(Ra)),Nt+=Ze,Ft+=Ra}dt===3&&X.writeVarint(zi(7,1))}}function pl(Mt,X){var Q=typeof Mt;Q==="string"?X.writeStringField(1,Mt):Q==="boolean"?X.writeBooleanField(7,Mt):Q==="number"&&(Mt%1!=0?X.writeDoubleField(3,Mt):Mt<0?X.writeSVarintField(6,Mt):X.writeVarintField(5,Mt))}yo.exports=Ve,yo.exports.fromVectorTileJs=Ve,yo.exports.fromGeojsonVt=function(Mt,X){X=X||{};var Q={};for(var dt in Mt)Q[dt]=new vi(Mt[dt].features,X),Q[dt].name=dt,Q[dt].version=X.version,Q[dt].extent=X.extent;return Ve({layers:Q})},yo.exports.GeoJSONWrapper=vi;var hl=s.dK(yo.exports);const gl={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Mt=>Mt},Zn=Math.fround||(Qo=new Float32Array(1),Mt=>(Qo[0]=+Mt,Qo[0]));var Qo;const Hi=3,bo=5,uo=6;class yr{constructor(X){this.options=Object.assign(Object.create(gl),X),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(X){const{log:Q,minZoom:dt,maxZoom:Nt}=this.options;Q&&console.time("total time");const Ft=`prepare ${X.length} points`;Q&&console.time(Ft),this.points=X;const Gt=[];for(let Lt=0;Lt<X.length;Lt++){const Te=X[Lt];if(!Te.geometry)continue;const[ce,Ae]=Te.geometry.coordinates,Ze=Zn(Jn(ce)),Ra=Zn(tn(Ae));Gt.push(Ze,Ra,1/0,Lt,-1,1),this.options.reduce&&Gt.push(0)}let ge=this.trees[Nt+1]=this._createTree(Gt);Q&&console.timeEnd(Ft);for(let Lt=Nt;Lt>=dt;Lt--){const Te=+Date.now();ge=this.trees[Lt]=this._createTree(this._cluster(ge,Lt)),Q&&console.log("z%d: %d clusters in %dms",Lt,ge.numItems,+Date.now()-Te)}return Q&&console.timeEnd("total time"),this}getClusters(X,Q){let dt=((X[0]+180)%360+360)%360-180;const Nt=Math.max(-90,Math.min(90,X[1]));let Ft=X[2]===180?180:((X[2]+180)%360+360)%360-180;const Gt=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)dt=-180,Ft=180;else if(dt>Ft){const Ae=this.getClusters([dt,Nt,180,Gt],Q),Ze=this.getClusters([-180,Nt,Ft,Gt],Q);return Ae.concat(Ze)}const ge=this.trees[this._limitZoom(Q)],Lt=ge.range(Jn(dt),tn(Gt),Jn(Ft),tn(Nt)),Te=ge.data,ce=[];for(const Ae of Lt){const Ze=this.stride*Ae;ce.push(Te[Ze+bo]>1?ei(Te,Ze,this.clusterProps):this.points[Te[Ze+Hi]])}return ce}getChildren(X){const Q=this._getOriginId(X),dt=this._getOriginZoom(X),Nt="No cluster with the specified id.",Ft=this.trees[dt];if(!Ft)throw new Error(Nt);const Gt=Ft.data;if(Q*this.stride>=Gt.length)throw new Error(Nt);const ge=this.options.radius/(this.options.extent*Math.pow(2,dt-1)),Lt=Ft.within(Gt[Q*this.stride],Gt[Q*this.stride+1],ge),Te=[];for(const ce of Lt){const Ae=ce*this.stride;Gt[Ae+4]===X&&Te.push(Gt[Ae+bo]>1?ei(Gt,Ae,this.clusterProps):this.points[Gt[Ae+Hi]])}if(Te.length===0)throw new Error(Nt);return Te}getLeaves(X,Q,dt){const Nt=[];return this._appendLeaves(Nt,X,Q=Q||10,dt=dt||0,0),Nt}getTile(X,Q,dt){const Nt=this.trees[this._limitZoom(X)],Ft=Math.pow(2,X),{extent:Gt,radius:ge}=this.options,Lt=ge/Gt,Te=(dt-Lt)/Ft,ce=(dt+1+Lt)/Ft,Ae={features:[]};return this._addTileFeatures(Nt.range((Q-Lt)/Ft,Te,(Q+1+Lt)/Ft,ce),Nt.data,Q,dt,Ft,Ae),Q===0&&this._addTileFeatures(Nt.range(1-Lt/Ft,Te,1,ce),Nt.data,Ft,dt,Ft,Ae),Q===Ft-1&&this._addTileFeatures(Nt.range(0,Te,Lt/Ft,ce),Nt.data,-1,dt,Ft,Ae),Ae.features.length?Ae:null}getClusterExpansionZoom(X){let Q=this._getOriginZoom(X)-1;for(;Q<=this.options.maxZoom;){const dt=this.getChildren(X);if(Q++,dt.length!==1)break;X=dt[0].properties.cluster_id}return Q}_appendLeaves(X,Q,dt,Nt,Ft){const Gt=this.getChildren(Q);for(const ge of Gt){const Lt=ge.properties;if(Lt&&Lt.cluster?Ft+Lt.point_count<=Nt?Ft+=Lt.point_count:Ft=this._appendLeaves(X,Lt.cluster_id,dt,Nt,Ft):Ft<Nt?Ft++:X.push(ge),X.length===dt)break}return Ft}_createTree(X){const Q=new s.bg(X.length/this.stride|0,this.options.nodeSize,Float32Array);for(let dt=0;dt<X.length;dt+=this.stride)Q.add(X[dt],X[dt+1]);return Q.finish(),Q.data=X,Q}_addTileFeatures(X,Q,dt,Nt,Ft,Gt){for(const ge of X){const Lt=ge*this.stride,Te=Q[Lt+bo]>1;let ce,Ae,Ze;if(Te)ce=To(Q,Lt,this.clusterProps),Ae=Q[Lt],Ze=Q[Lt+1];else{const Na=this.points[Q[Lt+Hi]];ce=Na.properties;const[Ea,Ta]=Na.geometry.coordinates;Ae=Jn(Ea),Ze=tn(Ta)}const Ra={type:1,geometry:[[Math.round(this.options.extent*(Ae*Ft-dt)),Math.round(this.options.extent*(Ze*Ft-Nt))]],tags:ce};let Ha;Ha=Te||this.options.generateId?Q[Lt+Hi]:this.points[Q[Lt+Hi]].id,Ha!==void 0&&(Ra.id=Ha),Gt.features.push(Ra)}}_limitZoom(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))}_cluster(X,Q){const{radius:dt,extent:Nt,reduce:Ft,minPoints:Gt}=this.options,ge=dt/(Nt*Math.pow(2,Q)),Lt=X.data,Te=[],ce=this.stride;for(let Ae=0;Ae<Lt.length;Ae+=ce){if(Lt[Ae+2]<=Q)continue;Lt[Ae+2]=Q;const Ze=Lt[Ae],Ra=Lt[Ae+1],Ha=X.within(Lt[Ae],Lt[Ae+1],ge),Na=Lt[Ae+bo];let Ea=Na;for(const Ta of Ha){const Ca=Ta*ce;Lt[Ca+2]>Q&&(Ea+=Lt[Ca+bo])}if(Ea>Na&&Ea>=Gt){let Ta,Ca=Ze*Na,Ba=Ra*Na,Ei=-1;const za=(Ae/ce<<5)+(Q+1)+this.points.length;for(const Ki of Ha){const Gi=Ki*ce;if(Lt[Gi+2]<=Q)continue;Lt[Gi+2]=Q;const to=Lt[Gi+bo];Ca+=Lt[Gi]*to,Ba+=Lt[Gi+1]*to,Lt[Gi+4]=za,Ft&&(Ta||(Ta=this._map(Lt,Ae,!0),Ei=this.clusterProps.length,this.clusterProps.push(Ta)),Ft(Ta,this._map(Lt,Gi)))}Lt[Ae+4]=za,Te.push(Ca/Ea,Ba/Ea,1/0,za,-1,Ea),Ft&&Te.push(Ei)}else{for(let Ta=0;Ta<ce;Ta++)Te.push(Lt[Ae+Ta]);if(Ea>1)for(const Ta of Ha){const Ca=Ta*ce;if(!(Lt[Ca+2]<=Q)){Lt[Ca+2]=Q;for(let Ba=0;Ba<ce;Ba++)Te.push(Lt[Ca+Ba])}}}}return Te}_getOriginId(X){return X-this.points.length>>5}_getOriginZoom(X){return(X-this.points.length)%32}_map(X,Q,dt){if(X[Q+bo]>1){const Gt=this.clusterProps[X[Q+uo]];return dt?Object.assign({},Gt):Gt}const Nt=this.points[X[Q+Hi]].properties,Ft=this.options.map(Nt);return dt&&Ft===Nt?Object.assign({},Ft):Ft}}function ei(Mt,X,Q){return{type:"Feature",id:Mt[X+Hi],properties:To(Mt,X,Q),geometry:{type:"Point",coordinates:[(dt=Mt[X],360*(dt-.5)),Ko(Mt[X+1])]}};var dt}function To(Mt,X,Q){const dt=Mt[X+bo],Nt=dt>=1e4?`${Math.round(dt/1e3)}k`:dt>=1e3?Math.round(dt/100)/10+"k":dt,Ft=Mt[X+uo],Gt=Ft===-1?{}:Object.assign({},Q[Ft]);return Object.assign(Gt,{cluster:!0,cluster_id:Mt[X+Hi],point_count:dt,point_count_abbreviated:Nt})}function Jn(Mt){return Mt/360+.5}function tn(Mt){const X=Math.sin(Mt*Math.PI/180),Q=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return Q<0?0:Q>1?1:Q}function Ko(Mt){const X=(180-360*Mt)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}var Qn={exports:{}};Qn.exports=function(){function Mt(St,Pt,Vt,te){for(var $t,ie=te,ne=Vt-Pt>>1,Jt=Vt-Pt,re=St[Pt],ee=St[Pt+1],De=St[Vt],na=St[Vt+1],Ie=Pt+3;Ie<Vt;Ie+=3){var La=X(St[Ie],St[Ie+1],re,ee,De,na);if(La>ie)$t=Ie,ie=La;else if(La===ie){var Va=Math.abs(Ie-ne);Va<Jt&&($t=Ie,Jt=Va)}}ie>te&&($t-Pt>3&&Mt(St,Pt,$t,te),St[$t+2]=ie,Vt-$t>3&&Mt(St,$t,Vt,te))}function X(St,Pt,Vt,te,$t,ie){var ne=$t-Vt,Jt=ie-te;if(ne!==0||Jt!==0){var re=((St-Vt)*ne+(Pt-te)*Jt)/(ne*ne+Jt*Jt);re>1?(Vt=$t,te=ie):re>0&&(Vt+=ne*re,te+=Jt*re)}return(ne=St-Vt)*ne+(Jt=Pt-te)*Jt}function Q(St,Pt,Vt,te){var $t={id:St===void 0?null:St,type:Pt,geometry:Vt,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ie){var ne=ie.geometry,Jt=ie.type;if(Jt==="Point"||Jt==="MultiPoint"||Jt==="LineString")dt(ie,ne);else if(Jt==="Polygon"||Jt==="MultiLineString")for(var re=0;re<ne.length;re++)dt(ie,ne[re]);else if(Jt==="MultiPolygon")for(re=0;re<ne.length;re++)for(var ee=0;ee<ne[re].length;ee++)dt(ie,ne[re][ee])}($t),$t}function dt(St,Pt){for(var Vt=0;Vt<Pt.length;Vt+=3)St.minX=Math.min(St.minX,Pt[Vt]),St.minY=Math.min(St.minY,Pt[Vt+1]),St.maxX=Math.max(St.maxX,Pt[Vt]),St.maxY=Math.max(St.maxY,Pt[Vt+1])}function Nt(St,Pt,Vt,te){if(Pt.geometry){var $t=Pt.geometry.coordinates,ie=Pt.geometry.type,ne=Math.pow(Vt.tolerance/((1<<Vt.maxZoom)*Vt.extent),2),Jt=[],re=Pt.id;if(Vt.promoteId?re=Pt.properties[Vt.promoteId]:Vt.generateId&&(re=te||0),ie==="Point")Ft($t,Jt);else if(ie==="MultiPoint")for(var ee=0;ee<$t.length;ee++)Ft($t[ee],Jt);else if(ie==="LineString")Gt($t,Jt,ne,!1);else if(ie==="MultiLineString"){if(Vt.lineMetrics){for(ee=0;ee<$t.length;ee++)Gt($t[ee],Jt=[],ne,!1),St.push(Q(re,"LineString",Jt,Pt.properties));return}ge($t,Jt,ne,!1)}else if(ie==="Polygon")ge($t,Jt,ne,!0);else{if(ie!=="MultiPolygon"){if(ie==="GeometryCollection"){for(ee=0;ee<Pt.geometry.geometries.length;ee++)Nt(St,{id:re,geometry:Pt.geometry.geometries[ee],properties:Pt.properties},Vt,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ee=0;ee<$t.length;ee++){var De=[];ge($t[ee],De,ne,!0),Jt.push(De)}}St.push(Q(re,ie,Jt,Pt.properties))}}function Ft(St,Pt){Pt.push(Lt(St[0])),Pt.push(Te(St[1])),Pt.push(0)}function Gt(St,Pt,Vt,te){for(var $t,ie,ne=0,Jt=0;Jt<St.length;Jt++){var re=Lt(St[Jt][0]),ee=Te(St[Jt][1]);Pt.push(re),Pt.push(ee),Pt.push(0),Jt>0&&(ne+=te?($t*ee-re*ie)/2:Math.sqrt(Math.pow(re-$t,2)+Math.pow(ee-ie,2))),$t=re,ie=ee}var De=Pt.length-3;Pt[2]=1,Mt(Pt,0,De,Vt),Pt[De+2]=1,Pt.size=Math.abs(ne),Pt.start=0,Pt.end=Pt.size}function ge(St,Pt,Vt,te){for(var $t=0;$t<St.length;$t++){var ie=[];Gt(St[$t],ie,Vt,te),Pt.push(ie)}}function Lt(St){return St/360+.5}function Te(St){var Pt=Math.sin(St*Math.PI/180),Vt=.5-.25*Math.log((1+Pt)/(1-Pt))/Math.PI;return Vt<0?0:Vt>1?1:Vt}function ce(St,Pt,Vt,te,$t,ie,ne,Jt){if(te/=Pt,ie>=(Vt/=Pt)&&ne<te)return St;if(ne<Vt||ie>=te)return null;for(var re=[],ee=0;ee<St.length;ee++){var De=St[ee],na=De.geometry,Ie=De.type,La=$t===0?De.minX:De.minY,Va=$t===0?De.maxX:De.maxY;if(La>=Vt&&Va<te)re.push(De);else if(!(Va<Vt||La>=te)){var Ma=[];if(Ie==="Point"||Ie==="MultiPoint")Ae(na,Ma,Vt,te,$t);else if(Ie==="LineString")Ze(na,Ma,Vt,te,$t,!1,Jt.lineMetrics);else if(Ie==="MultiLineString")Ha(na,Ma,Vt,te,$t,!1);else if(Ie==="Polygon")Ha(na,Ma,Vt,te,$t,!0);else if(Ie==="MultiPolygon")for(var pi=0;pi<na.length;pi++){var Wi=[];Ha(na[pi],Wi,Vt,te,$t,!0),Wi.length&&Ma.push(Wi)}if(Ma.length){if(Jt.lineMetrics&&Ie==="LineString"){for(pi=0;pi<Ma.length;pi++)re.push(Q(De.id,Ie,Ma[pi],De.tags));continue}Ie!=="LineString"&&Ie!=="MultiLineString"||(Ma.length===1?(Ie="LineString",Ma=Ma[0]):Ie="MultiLineString"),Ie!=="Point"&&Ie!=="MultiPoint"||(Ie=Ma.length===3?"Point":"MultiPoint"),re.push(Q(De.id,Ie,Ma,De.tags))}}}return re.length?re:null}function Ae(St,Pt,Vt,te,$t){for(var ie=0;ie<St.length;ie+=3){var ne=St[ie+$t];ne>=Vt&&ne<=te&&(Pt.push(St[ie]),Pt.push(St[ie+1]),Pt.push(St[ie+2]))}}function Ze(St,Pt,Vt,te,$t,ie,ne){for(var Jt,re,ee=Ra(St),De=$t===0?Ea:Ta,na=St.start,Ie=0;Ie<St.length-3;Ie+=3){var La=St[Ie],Va=St[Ie+1],Ma=St[Ie+2],pi=St[Ie+3],Wi=St[Ie+4],ya=$t===0?La:Va,co=$t===0?pi:Wi,Wo=!1;ne&&(Jt=Math.sqrt(Math.pow(La-pi,2)+Math.pow(Va-Wi,2))),ya<Vt?co>Vt&&(re=De(ee,La,Va,pi,Wi,Vt),ne&&(ee.start=na+Jt*re)):ya>te?co<te&&(re=De(ee,La,Va,pi,Wi,te),ne&&(ee.start=na+Jt*re)):Na(ee,La,Va,Ma),co<Vt&&ya>=Vt&&(re=De(ee,La,Va,pi,Wi,Vt),Wo=!0),co>te&&ya<=te&&(re=De(ee,La,Va,pi,Wi,te),Wo=!0),!ie&&Wo&&(ne&&(ee.end=na+Jt*re),Pt.push(ee),ee=Ra(St)),ne&&(na+=Jt)}var Mi=St.length-3;La=St[Mi],Va=St[Mi+1],Ma=St[Mi+2],(ya=$t===0?La:Va)>=Vt&&ya<=te&&Na(ee,La,Va,Ma),Mi=ee.length-3,ie&&Mi>=3&&(ee[Mi]!==ee[0]||ee[Mi+1]!==ee[1])&&Na(ee,ee[0],ee[1],ee[2]),ee.length&&Pt.push(ee)}function Ra(St){var Pt=[];return Pt.size=St.size,Pt.start=St.start,Pt.end=St.end,Pt}function Ha(St,Pt,Vt,te,$t,ie){for(var ne=0;ne<St.length;ne++)Ze(St[ne],Pt,Vt,te,$t,ie,!1)}function Na(St,Pt,Vt,te){St.push(Pt),St.push(Vt),St.push(te)}function Ea(St,Pt,Vt,te,$t,ie){var ne=(ie-Pt)/(te-Pt);return St.push(ie),St.push(Vt+($t-Vt)*ne),St.push(1),ne}function Ta(St,Pt,Vt,te,$t,ie){var ne=(ie-Vt)/($t-Vt);return St.push(Pt+(te-Pt)*ne),St.push(ie),St.push(1),ne}function Ca(St,Pt){for(var Vt=[],te=0;te<St.length;te++){var $t,ie=St[te],ne=ie.type;if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")$t=Ba(ie.geometry,Pt);else if(ne==="MultiLineString"||ne==="Polygon"){$t=[];for(var Jt=0;Jt<ie.geometry.length;Jt++)$t.push(Ba(ie.geometry[Jt],Pt))}else if(ne==="MultiPolygon")for($t=[],Jt=0;Jt<ie.geometry.length;Jt++){for(var re=[],ee=0;ee<ie.geometry[Jt].length;ee++)re.push(Ba(ie.geometry[Jt][ee],Pt));$t.push(re)}Vt.push(Q(ie.id,ne,$t,ie.tags))}return Vt}function Ba(St,Pt){var Vt=[];Vt.size=St.size,St.start!==void 0&&(Vt.start=St.start,Vt.end=St.end);for(var te=0;te<St.length;te+=3)Vt.push(St[te]+Pt,St[te+1],St[te+2]);return Vt}function Ei(St,Pt){if(St.transformed)return St;var Vt,te,$t,ie=1<<St.z,ne=St.x,Jt=St.y;for(Vt=0;Vt<St.features.length;Vt++){var re=St.features[Vt],ee=re.geometry,De=re.type;if(re.geometry=[],De===1)for(te=0;te<ee.length;te+=2)re.geometry.push(za(ee[te],ee[te+1],Pt,ie,ne,Jt));else for(te=0;te<ee.length;te++){var na=[];for($t=0;$t<ee[te].length;$t+=2)na.push(za(ee[te][$t],ee[te][$t+1],Pt,ie,ne,Jt));re.geometry.push(na)}}return St.transformed=!0,St}function za(St,Pt,Vt,te,$t,ie){return[Math.round(Vt*(St*te-$t)),Math.round(Vt*(Pt*te-ie))]}function Ki(St,Pt,Vt,te,$t){for(var ie=Pt===$t.maxZoom?0:$t.tolerance/((1<<Pt)*$t.extent),ne={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Vt,y:te,z:Pt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Jt=0;Jt<St.length;Jt++){ne.numFeatures++,Gi(ne,St[Jt],ie,$t);var re=St[Jt].minX,ee=St[Jt].minY,De=St[Jt].maxX,na=St[Jt].maxY;re<ne.minX&&(ne.minX=re),ee<ne.minY&&(ne.minY=ee),De>ne.maxX&&(ne.maxX=De),na>ne.maxY&&(ne.maxY=na)}return ne}function Gi(St,Pt,Vt,te){var $t=Pt.geometry,ie=Pt.type,ne=[];if(ie==="Point"||ie==="MultiPoint")for(var Jt=0;Jt<$t.length;Jt+=3)ne.push($t[Jt]),ne.push($t[Jt+1]),St.numPoints++,St.numSimplified++;else if(ie==="LineString")to(ne,$t,St,Vt,!1,!1);else if(ie==="MultiLineString"||ie==="Polygon")for(Jt=0;Jt<$t.length;Jt++)to(ne,$t[Jt],St,Vt,ie==="Polygon",Jt===0);else if(ie==="MultiPolygon")for(var re=0;re<$t.length;re++){var ee=$t[re];for(Jt=0;Jt<ee.length;Jt++)to(ne,ee[Jt],St,Vt,!0,Jt===0)}if(ne.length){var De=Pt.tags||null;if(ie==="LineString"&&te.lineMetrics){for(var na in De={},Pt.tags)De[na]=Pt.tags[na];De.mapbox_clip_start=$t.start/$t.size,De.mapbox_clip_end=$t.end/$t.size}var Ie={geometry:ne,type:ie==="Polygon"||ie==="MultiPolygon"?3:ie==="LineString"||ie==="MultiLineString"?2:1,tags:De};Pt.id!==null&&(Ie.id=Pt.id),St.features.push(Ie)}}function to(St,Pt,Vt,te,$t,ie){var ne=te*te;if(te>0&&Pt.size<($t?ne:te))Vt.numPoints+=Pt.length/3;else{for(var Jt=[],re=0;re<Pt.length;re+=3)(te===0||Pt[re+2]>ne)&&(Vt.numSimplified++,Jt.push(Pt[re]),Jt.push(Pt[re+1])),Vt.numPoints++;$t&&function(ee,De){for(var na=0,Ie=0,La=ee.length,Va=La-2;Ie<La;Va=Ie,Ie+=2)na+=(ee[Ie]-ee[Va])*(ee[Ie+1]+ee[Va+1]);if(na>0===De)for(Ie=0,La=ee.length;Ie<La/2;Ie+=2){var Ma=ee[Ie],pi=ee[Ie+1];ee[Ie]=ee[La-2-Ie],ee[Ie+1]=ee[La-1-Ie],ee[La-2-Ie]=Ma,ee[La-1-Ie]=pi}}(Jt,ie),St.push(Jt)}}function fi(St,Pt){var Vt=(Pt=this.options=function($t,ie){for(var ne in ie)$t[ne]=ie[ne];return $t}(Object.create(this.options),Pt)).debug;if(Vt&&console.time("preprocess data"),Pt.maxZoom<0||Pt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Pt.promoteId&&Pt.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function($t,ie){var ne=[];if($t.type==="FeatureCollection")for(var Jt=0;Jt<$t.features.length;Jt++)Nt(ne,$t.features[Jt],ie,Jt);else Nt(ne,$t.type==="Feature"?$t:{geometry:$t},ie);return ne}(St,Pt);this.tiles={},this.tileCoords=[],Vt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Pt.indexMaxZoom,Pt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(te=function($t,ie){var ne=ie.buffer/ie.extent,Jt=$t,re=ce($t,1,-1-ne,ne,0,-1,2,ie),ee=ce($t,1,1-ne,2+ne,0,-1,2,ie);return(re||ee)&&(Jt=ce($t,1,-ne,1+ne,0,-1,2,ie)||[],re&&(Jt=Ca(re,1).concat(Jt)),ee&&(Jt=Jt.concat(Ca(ee,-1)))),Jt}(te,Pt)).length&&this.splitTile(te,0,0,0),Vt&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ui(St,Pt,Vt){return 32*((1<<St)*Vt+Pt)+St}return fi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fi.prototype.splitTile=function(St,Pt,Vt,te,$t,ie,ne){for(var Jt=[St,Pt,Vt,te],re=this.options,ee=re.debug;Jt.length;){te=Jt.pop(),Vt=Jt.pop(),Pt=Jt.pop(),St=Jt.pop();var De=1<<Pt,na=ui(Pt,Vt,te),Ie=this.tiles[na];if(!Ie&&(ee>1&&console.time("creation"),Ie=this.tiles[na]=Ki(St,Pt,Vt,te,re),this.tileCoords.push({z:Pt,x:Vt,y:te}),ee)){ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Pt,Vt,te,Ie.numFeatures,Ie.numPoints,Ie.numSimplified),console.timeEnd("creation"));var La="z"+Pt;this.stats[La]=(this.stats[La]||0)+1,this.total++}if(Ie.source=St,$t){if(Pt===re.maxZoom||Pt===$t)continue;var Va=1<<$t-Pt;if(Vt!==Math.floor(ie/Va)||te!==Math.floor(ne/Va))continue}else if(Pt===re.indexMaxZoom||Ie.numPoints<=re.indexMaxPoints)continue;if(Ie.source=null,St.length!==0){ee>1&&console.time("clipping");var Ma,pi,Wi,ya,co,Wo,Mi=.5*re.buffer/re.extent,yl=.5-Mi,In=.5+Mi,Os=1+Mi;Ma=pi=Wi=ya=null,co=ce(St,De,Vt-Mi,Vt+In,0,Ie.minX,Ie.maxX,re),Wo=ce(St,De,Vt+yl,Vt+Os,0,Ie.minX,Ie.maxX,re),St=null,co&&(Ma=ce(co,De,te-Mi,te+In,1,Ie.minY,Ie.maxY,re),pi=ce(co,De,te+yl,te+Os,1,Ie.minY,Ie.maxY,re),co=null),Wo&&(Wi=ce(Wo,De,te-Mi,te+In,1,Ie.minY,Ie.maxY,re),ya=ce(Wo,De,te+yl,te+Os,1,Ie.minY,Ie.maxY,re),Wo=null),ee>1&&console.timeEnd("clipping"),Jt.push(Ma||[],Pt+1,2*Vt,2*te),Jt.push(pi||[],Pt+1,2*Vt,2*te+1),Jt.push(Wi||[],Pt+1,2*Vt+1,2*te),Jt.push(ya||[],Pt+1,2*Vt+1,2*te+1)}}},fi.prototype.getTile=function(St,Pt,Vt){var te=this.options,$t=te.extent,ie=te.debug;if(St<0||St>24)return null;var ne=1<<St,Jt=ui(St,Pt=(Pt%ne+ne)%ne,Vt);if(this.tiles[Jt])return Ei(this.tiles[Jt],$t);ie>1&&console.log("drilling down to z%d-%d-%d",St,Pt,Vt);for(var re,ee=St,De=Pt,na=Vt;!re&&ee>0;)ee--,De=Math.floor(De/2),na=Math.floor(na/2),re=this.tiles[ui(ee,De,na)];return re&&re.source?(ie>1&&console.log("found parent tile z%d-%d-%d",ee,De,na),ie>1&&console.time("drilling down"),this.splitTile(re.source,ee,De,na,St,Pt,Vt),ie>1&&console.timeEnd("drilling down"),this.tiles[Jt]?Ei(this.tiles[Jt],$t):null):null},function(St,Pt){return new fi(St,Pt)}}();var _i=s.dK(Qn.exports);function Es(Mt,X){const Q=Mt.tileID.canonical;if(!this._geoJSONIndex)return X(null,null);const dt=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!dt)return X(null,null);const Nt=new jt(dt.features);let Ft=hl(Nt);Ft.byteOffset===0&&Ft.byteLength===Ft.buffer.byteLength||(Ft=new Uint8Array(Ft)),X(null,{vectorTile:Nt,rawData:Ft.buffer})}class Is extends Ot{constructor(X,Q,dt,Nt,Ft,Gt){super(X,Q,dt,Nt,Es,Gt),Ft&&(this.loadGeoJSON=Ft)}loadData(X,Q){const dt=X&&X.request,Nt=dt&&dt.collectResourceTiming;this.loadGeoJSON(X,(Ft,Gt)=>{if(Ft||!Gt)return Q(Ft);if(typeof Gt!="object")return Q(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));{ia(Gt,!0);try{if(X.filter){const Lt=s.r(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Lt.result==="error")throw new Error(Lt.value.map(ce=>`${ce.key}: ${ce.message}`).join(", "));Gt={type:"FeatureCollection",features:Gt.features.filter(ce=>Lt.value.evaluate({zoom:0},ce))}}this._geoJSONIndex=X.cluster?new yr(function({superclusterOptions:Lt,clusterProperties:Te}){if(!Te||!Lt)return Lt;const ce={},Ae={},Ze={accumulated:null,zoom:0},Ra={properties:null},Ha=Object.keys(Te);for(const Na of Ha){const[Ea,Ta]=Te[Na],Ca=s.r(Ta),Ba=s.r(typeof Ea=="string"?[Ea,["accumulated"],["get",Na]]:Ea);ce[Na]=Ca.value,Ae[Na]=Ba.value}return Lt.map=Na=>{Ra.properties=Na;const Ea={};for(const Ta of Ha)Ea[Ta]=ce[Ta].evaluate(Ze,Ra);return Ea},Lt.reduce=(Na,Ea)=>{Ra.properties=Ea;for(const Ta of Ha)Ze.accumulated=Na[Ta],Na[Ta]=Ae[Ta].evaluate(Ze,Ra)},Lt}(X)).load(Gt.features):_i(Gt,X.geojsonVtOptions)}catch(Lt){return Q(Lt)}this.loaded={};const ge={};if(Nt){const Lt=ot(dt);Lt&&(ge.resourceTiming={},ge.resourceTiming[X.source]=JSON.parse(JSON.stringify(Lt)))}Q(null,ge)}})}reloadTile(X,Q){const dt=this.loaded;return dt&&dt[X.uid]?super.reloadTile(X,Q):this.loadTile(X,Q)}loadGeoJSON(X,Q){if(X.request)s.g(X.request,Q);else{if(typeof X.data!="string")return Q(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));try{return Q(null,JSON.parse(X.data))}catch{return Q(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(X,Q){try{Q(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(dt){Q(dt)}}getClusterChildren(X,Q){try{Q(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(dt){Q(dt)}}getClusterLeaves(X,Q){try{Q(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(dt){Q(dt)}}}class xo{constructor(X,Q){this.tileID=new s.am(X.tileID.overscaledZ,X.tileID.wrap,X.tileID.canonical.z,X.tileID.canonical.x,X.tileID.canonical.y),this.tileZoom=X.tileZoom,this.uid=X.uid,this.zoom=X.zoom,this.canonical=X.tileID.canonical,this.pixelRatio=X.pixelRatio,this.tileSize=X.tileSize,this.source=X.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=X.projection,this.brightness=Q}parse(X,Q,dt,Nt){this.status="parsing";const Ft=new s.am(dt.tileID.overscaledZ,dt.tileID.wrap,dt.tileID.canonical.z,dt.tileID.canonical.x,dt.tileID.canonical.y),Gt={},ge=Q.familiesBySource[dt.source],Lt=new s.dC(Ft,dt.promoteId);return Lt.bucketLayerIDs=[],Lt.is3DTile=!0,s.dP(X).then(Te=>{if(!Te)return Nt(new Error("Could not parse tile"));const ce=s.dQ(Te,1/s.bR(dt.tileID.canonical)),Ae=Te.json.extensionsUsed&&Te.json.extensionsUsed.includes("MAPBOX_mesh_features")||Te.json.asset.extras&&Te.json.asset.extras.MAPBOX_mesh_features,Ze=Te.json.extensionsUsed&&Te.json.extensionsUsed.includes("EXT_meshopt_compression"),Ra=new s.K(this.zoom,{brightness:this.brightness});for(const Ha in ge)for(const Na of ge[Ha]){const Ea=Na[0];Lt.bucketLayerIDs.push(Na.map(Ca=>Ca.id)),Ea.recalculate(Ra,[]);const Ta=new s.dR(ce,Ft,Ae,Ze,this.brightness,Lt);Ae||(Ta.needsUpload=!0),Gt[Ea.fqid]=Ta,Ta.evaluate(Ea)}this.status="done",Nt(null,{buckets:Gt,featureIndex:Lt})}).catch(Te=>Nt(new Error(Te.message)))}}class en{constructor(X,Q,dt,Nt,Ft,Gt){this.actor=X,this.layerIndex=Q,this.brightness=Gt,this.loading={},this.loaded={}}loadTile(X,Q){const dt=X.uid,Nt=this.loading[dt]=new xo(X,this.brightness);s.a_(X.request,(Ft,Gt)=>{const ge=!this.loading[dt];return delete this.loading[dt],ge||Ft?(Nt.status="done",ge||(this.loaded[dt]=Nt),Q(Ft)):Gt&&Gt.byteLength!==0?void Nt.parse(Gt,this.layerIndex,X,(Lt,Te)=>{Nt.status="done",this.loaded=this.loaded||{},this.loaded[dt]=Nt,Lt||!Te?Q(Lt):Q(null,Te)}):(Nt.status="done",this.loaded[dt]=Nt,Q())})}reloadTile(X,Q){const dt=this.loaded,Nt=X.uid;if(dt&&dt[Nt]){const Ft=dt[Nt];Ft.projection=X.projection,Ft.brightness=X.brightness;const Gt=(ge,Lt)=>{Ft.reloadCallback&&(delete Ft.reloadCallback,this.loadTile(X,Q)),Q(ge,Lt)};Ft.status==="parsing"?Ft.reloadCallback=Gt:Ft.status==="done"&&this.loadTile(X,Q)}}abortTile(X,Q){const dt=X.uid;this.loading[dt]&&delete this.loading[dt],Q()}removeTile(X,Q){const dt=this.loaded,Nt=X.uid;dt&&dt[Nt]&&delete dt[Nt],Q()}}class En{constructor(X){this.self=X,this.actor=new s.dS(X,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.bo({name:"mercator"}),this.workerSourceTypes={vector:Ot,geojson:Is,"batched-model":en},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Q,dt)=>{if(this.workerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.workerSourceTypes[Q]=dt},this.self.registerRTLTextPlugin=Q=>{if(s.dT.isParsed())throw new Error("RTL text plugin already registered.");s.dT.applyArabicShaping=Q.applyArabicShaping,s.dT.processBidirectionalText=Q.processBidirectionalText,s.dT.processStyledBidirectionalText=Q.processStyledBidirectionalText}}clearCaches(X,Q,dt){delete this.layerIndexes[X],delete this.availableImages[X],delete this.workerSources[X],delete this.demWorkerSources[X],delete this.rasterArrayWorkerSource,dt()}checkIfReady(X,Q,dt){dt()}setReferrer(X,Q){this.referrer=Q}spriteLoaded(X,{scope:Q,isLoaded:dt}){if(this.isSpriteLoaded[X]||(this.isSpriteLoaded[X]={}),this.isSpriteLoaded[X][Q]=dt,this.workerSources[X]&&this.workerSources[X][Q])for(const Nt in this.workerSources[X][Q]){const Ft=this.workerSources[X][Q][Nt];for(const Gt in Ft)Ft[Gt]instanceof Ot&&(Ft[Gt].isSpriteLoaded=dt,Ft[Gt].fire(new s.b("isSpriteLoaded")))}}setImages(X,{scope:Q,images:dt},Nt){if(this.availableImages[X]||(this.availableImages[X]={}),this.availableImages[X][Q]=dt,this.workerSources[X]&&this.workerSources[X][Q]){for(const Ft in this.workerSources[X][Q]){const Gt=this.workerSources[X][Q][Ft];for(const ge in Gt)Gt[ge].availableImages=dt}Nt()}else Nt()}setProjection(X,Q){this.projections[X]=s.bo(Q)}setBrightness(X,Q,dt){this.brightness=Q,dt()}setLayers(X,Q,dt){this.getLayerIndex(X,Q.scope).replace(Q.layers,Q.options),dt()}updateLayers(X,Q,dt){this.getLayerIndex(X,Q.scope).update(Q.layers,Q.removedIds,Q.options),dt()}loadTile(X,Q,dt){Q.projection=this.projections[X]||this.defaultProjection,this.getWorkerSource(X,Q.type,Q.source,Q.scope).loadTile(Q,dt)}loadDEMTile(X,Q,dt){this.getDEMWorkerSource(X,Q.source,Q.scope).loadTile(Q,dt)}decodeRasterArray(X,Q,dt){this.getRasterArrayWorkerSource().decodeRasterArray(Q,dt)}reloadTile(X,Q,dt){Q.projection=this.projections[X]||this.defaultProjection,this.getWorkerSource(X,Q.type,Q.source,Q.scope).reloadTile(Q,dt)}abortTile(X,Q,dt){this.getWorkerSource(X,Q.type,Q.source,Q.scope).abortTile(Q,dt)}removeTile(X,Q,dt){this.getWorkerSource(X,Q.type,Q.source,Q.scope).removeTile(Q,dt)}removeSource(X,Q,dt){if(!(this.workerSources[X]&&this.workerSources[X][Q.scope]&&this.workerSources[X][Q.scope][Q.type]&&this.workerSources[X][Q.scope][Q.type][Q.source]))return;const Nt=this.workerSources[X][Q.scope][Q.type][Q.source];delete this.workerSources[X][Q.scope][Q.type][Q.source],Nt.removeSource!==void 0?Nt.removeSource(Q,dt):dt()}loadWorkerSource(X,Q,dt){try{this.self.importScripts(Q.url),dt()}catch(Nt){dt(Nt.toString())}}syncRTLPluginState(X,Q,dt){try{s.dT.setState(Q);const Nt=s.dT.getPluginURL();if(s.dT.isLoaded()&&!s.dT.isParsed()&&Nt!=null){this.self.importScripts(Nt);const Ft=s.dT.isParsed();dt(Ft?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Nt}`),Ft)}}catch(Nt){dt(Nt.toString())}}setDracoUrl(X,Q){this.dracoUrl=Q}getAvailableImages(X,Q){this.availableImages[X]||(this.availableImages[X]={});let dt=this.availableImages[X][Q];return dt||(dt=[]),dt}getLayerIndex(X,Q){this.layerIndexes[X]||(this.layerIndexes[X]={});let dt=this.layerIndexes[X][Q];return dt||(dt=this.layerIndexes[X][Q]=new Yt,dt.scope=Q),dt}getWorkerSource(X,Q,dt,Nt){if(this.workerSources[X]||(this.workerSources[X]={}),this.workerSources[X][Nt]||(this.workerSources[X][Nt]={}),this.workerSources[X][Nt][Q]||(this.workerSources[X][Nt][Q]={}),this.isSpriteLoaded[X]||(this.isSpriteLoaded[X]={}),!this.workerSources[X][Nt][Q][dt]){const Ft={send:(Gt,ge,Lt,Te,ce,Ae)=>{this.actor.send(Gt,ge,Lt,X,ce,Ae)},scheduler:this.actor.scheduler};this.workerSources[X][Nt][Q][dt]=new this.workerSourceTypes[Q](Ft,this.getLayerIndex(X,Nt),this.getAvailableImages(X,Nt),this.isSpriteLoaded[X][Nt],void 0,this.brightness)}return this.workerSources[X][Nt][Q][dt]}getDEMWorkerSource(X,Q,dt){return this.demWorkerSources[X]||(this.demWorkerSources[X]={}),this.demWorkerSources[X][dt]||(this.demWorkerSources[X][dt]={}),this.demWorkerSources[X][dt][Q]||(this.demWorkerSources[X][dt][Q]=new ue),this.demWorkerSources[X][dt][Q]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new be),this.rasterArrayWorkerSource}enforceCacheSizeLimit(X,Q){s.dU(Q)}getWorkerPerformanceMetrics(X,Q,dt){dt(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new En(self)),En}),et(["./shared"],function(s){function ot(d,i){if(Array.isArray(d)){if(!Array.isArray(i)||d.length!==i.length)return!1;for(let n=0;n<d.length;n++)if(!ot(d[n],i[n]))return!1;return!0}if(typeof d=="object"&&d!==null&&i!==null){if(typeof i!="object"||Object.keys(d).length!==Object.keys(i).length)return!1;for(const n in d)if(!ot(d[n],i[n]))return!1;return!0}return d===i}var ht=At;function At(d){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,c,f=new Blob([""],{type:"text/javascript"}),g=URL.createObjectURL(f);try{c=new Worker(g),_=!0}catch{_=!1}return c&&c.terminate(),URL.revokeObjectURL(g),_}()?function(){var _=document.createElement("canvas");_.width=_.height=1;var c=_.getContext("2d");if(!c)return!1;var f=c.getImageData(0,0,1,1);return f&&f.width===_.width}()?(Yt[n=i&&i.failIfMajorPerformanceCaveat]===void 0&&(Yt[n]=function(_){var c,f=function(g){var b=document.createElement("canvas"),A=Object.create(At.webGLContextAttributes);return A.failIfMajorPerformanceCaveat=g,b.getContext("webgl2",A)}(_);if(!f)return!1;try{c=f.createShader(f.VERTEX_SHADER)}catch{return!1}return!(!c||f.isContextLost())&&(f.shaderSource(c,"void main() {}"),f.compileShader(c),f.getShaderParameter(c,f.COMPILE_STATUS)===!0)}(n)),Yt[n]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var n}(d)}var Yt={};function Rt(d,i,n){const _=document.createElement(d);return i!=null&&(_.className=i),n&&n.appendChild(_),_}function le(d,i,n){const _=document.createElementNS("http://www.w3.org/2000/svg",d);for(const c of Object.keys(i))_.setAttributeNS(null,c,String(i[c]));return n&&n.appendChild(_),_}At.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Kt=typeof document<"u"?document.documentElement&&document.documentElement.style:null,we=Kt&&Kt.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Ot;function ue(){Kt&&we&&(Ot=Kt[we],Kt[we]="none")}function be(){Kt&&we&&(Kt[we]=Ot)}function Me(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",Me,!0)}function Fa(){window.addEventListener("click",Me,!0),window.setTimeout(()=>{window.removeEventListener("click",Me,!0)},0)}function ia(d,i){const n=d.getBoundingClientRect();return jt(d,n,i)}function Oa(d,i){const n=d.getBoundingClientRect(),_=[];for(let c=0;c<i.length;c++)_.push(jt(d,n,i[c]));return _}function Ai(d){return window.InstallTrigger!==void 0&&d.button===2&&d.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:d.button}function jt(d,i,n){const _=d.offsetWidth===i.width?1:d.offsetWidth/i.width;return new s.P((n.clientX-i.left)*_,(n.clientY-i.top)*_)}class yo{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(i,n){this._updatedSourceCaches[i]=n,this.setDirty()}discardSourceCacheUpdate(i){delete this._updatedSourceCaches[i]}updateLayer(i){const n=i.scope;this._updatedLayers[n]=this._updatedLayers[n]||new Set,this._updatedLayers[n].add(i.id),this.setDirty()}removeLayer(i){const n=i.scope;this._removedLayers[n]=this._removedLayers[n]||{},this._updatedLayers[n]=this._updatedLayers[n]||new Set,this._removedLayers[n][i.id]=i,this._updatedLayers[n].delete(i.id),this._updatedPaintProps.delete(i.fqid),this.setDirty()}getRemovedLayer(i){return this._removedLayers[i.scope]?this._removedLayers[i.scope][i.id]:null}discardLayerRemoval(i){this._removedLayers[i.scope]&&delete this._removedLayers[i.scope][i.id]}getLayerUpdatesByScope(){const i={};for(const n in this._updatedLayers)i[n]=i[n]||{},i[n].updatedIds=Array.from(this._updatedLayers[n].values());for(const n in this._removedLayers)i[n]=i[n]||{},i[n].removedIds=Object.keys(this._removedLayers[n]);return i}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(i){this._updatedPaintProps.add(i.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(i){this._updatedImages.add(i),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}class vn extends s.E{constructor(i){super(),this.requestManager=i,this.models={"":{}},this.numModelsLoading={}}loadModel(i,n){return s.l(this.requestManager.transformRequest(n,s.R.Model).url).then(_=>{if(!_)return;const c=s.c(_),f=new s.M(i,void 0,void 0,c);return f.computeBoundsAndApplyParent(),f}).catch(_=>{this.fire(new s.a(new Error(`Could not load model ${i} from ${n}: ${_.message}`)))})}load(i,n){this.models[n]||(this.models[n]={});const _=Object.keys(i);this.numModelsLoading[n]=(this.numModelsLoading[n]||0)+_.length;const c=[];for(const f of _)c.push(this.loadModel(f,i[f]));Promise.allSettled(c).then(f=>{for(let g=0;g<f.length;g++){const{status:b,value:A}=f[g];b==="fulfilled"&&A&&(this.models[n][_[g]]=A)}this.numModelsLoading[n]-=_.length,this.fire(new s.b("data",{dataType:"style"}))}).catch(f=>{this.fire(new s.a(new Error(`Could not load models: ${f.message}`)))})}isLoaded(){for(const i in this.numModelsLoading)if(this.numModelsLoading[i]>0)return!1;return!0}hasModel(i,n){return!!this.getModel(i,n)}getModel(i,n){return this.models[n]||(this.models[n]={}),this.models[n][i]}addModel(i,n,_){this.models[_]||(this.models[_]={}),this.hasModel(i,_)&&this.removeModel(i,_),this.load({[i]:this.requestManager.normalizeModelURL(n)},_)}addModels(i,n){const _={};for(const c in i)_[c]=this.requestManager.normalizeModelURL(i[c]);this.load(_,n)}removeModel(i,n){this.models[n]||(this.models[n]={});const _=this.models[n][i];delete this.models[n][i],_.destroy()}listModels(i){return this.models[i]||(this.models[i]={}),Object.keys(this.models[i])}upload(i,n){this.models[n]||(this.models[n]={});for(const _ in this.models[n])this.models[n][_].upload(i.context)}}class Oe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,n,_){const c=String(n);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][c]=this.stateChanges[i][c]||{},s.e(this.stateChanges[i][c],_),this.deletedStates[i]===null){this.deletedStates[i]={};for(const f in this.state[i])f!==c&&(this.deletedStates[i][f]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][c]===null){this.deletedStates[i][c]={};for(const f in this.state[i][c])_[f]||(this.deletedStates[i][c][f]=null)}else for(const f in _)this.deletedStates[i]&&this.deletedStates[i][c]&&this.deletedStates[i][c][f]===null&&delete this.deletedStates[i][c][f]}removeFeatureState(i,n,_){if(this.deletedStates[i]===null)return;const c=String(n);if(this.deletedStates[i]=this.deletedStates[i]||{},_&&n!==void 0)this.deletedStates[i][c]!==null&&(this.deletedStates[i][c]=this.deletedStates[i][c]||{},this.deletedStates[i][c][_]=null);else if(n!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][c])for(_ in this.deletedStates[i][c]={},this.stateChanges[i][c])this.deletedStates[i][c][_]=null;else this.deletedStates[i][c]=null;else this.deletedStates[i]=null}getState(i,n){const _=String(n),c=s.e({},(this.state[i]||{})[_],(this.stateChanges[i]||{})[_]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const f=this.deletedStates[i][n];if(f===null)return{};for(const g in f)delete c[g]}return c}initializeTileState(i,n){i.setFeatureState(this.state,n)}coalesceChanges(i,n){const _={};for(const c in this.stateChanges){this.state[c]=this.state[c]||{};const f={};for(const g in this.stateChanges[c])this.state[c][g]||(this.state[c][g]={}),s.e(this.state[c][g],this.stateChanges[c][g]),f[g]=this.state[c][g];_[c]=f}for(const c in this.deletedStates){this.state[c]=this.state[c]||{};const f={};if(this.deletedStates[c]===null)for(const g in this.state[c])f[g]={},this.state[c][g]={};else for(const g in this.deletedStates[c]){if(this.deletedStates[c][g]===null)this.state[c][g]={};else if(this.state[c][g])for(const b of Object.keys(this.deletedStates[c][g]))delete this.state[c][g][b];f[g]=this.state[c][g]}_[c]=_[c]||{},s.e(_[c],f)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const c in i)i[c].setFeatureState(_,n)}}function ni(d){const{userImage:i}=d;return!!(i&&i.render&&i.render())&&(d.data.replace(new Uint8Array(i.data.buffer)),!0)}class ki extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(i){this.images[i]={},this.loaded[i]=!1,this.updatedImages[i]={},this.patterns[i]={},this.callbackDispatchedThisFrame[i]={},this.atlasImage[i]=new s.h({width:1,height:1})}isLoaded(){for(const i in this.loaded)if(!this.loaded[i])return!1;return!0}setLoaded(i,n){if(this.loaded[n]!==i&&(this.loaded[n]=i,i)){for(const{ids:_,callback:c}of this.requestors)this._notify(_,n,c);this.requestors=[]}}hasImage(i,n){return!!this.getImage(i,n)}getImage(i,n){return this.images[n][i]}addImage(i,n,_){this._validate(i,_)&&(this.images[n][i]=_)}_validate(i,n){let _=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new s.a(new Error(`Image "${i}" has invalid "stretchX" value`))),_=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new s.a(new Error(`Image "${i}" has invalid "stretchY" value`))),_=!1),this._validateContent(n.content,n)||(this.fire(new s.a(new Error(`Image "${i}" has invalid "content" value`))),_=!1),_}_validateStretch(i,n){if(!i)return!0;let _=0;for(const c of i){if(c[0]<_||c[1]<c[0]||n<c[1])return!1;_=c[1]}return!0}_validateContent(i,n){return!(i&&(i.length!==4||i[0]<0||n.data.width<i[0]||i[1]<0||n.data.height<i[1]||i[2]<0||n.data.width<i[2]||i[3]<0||n.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,n,_){_.version=this.images[n][i].version+1,this.images[n][i]=_,this.updatedImages[n][i]=!0}removeImage(i,n){const _=this.images[n][i];delete this.images[n][i],delete this.patterns[n][i],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(i){return Object.keys(this.images[i])}getImages(i,n,_){let c=!0;const f=!!this.loaded[n];if(!f)for(const g of i)this.images[n][g]||(c=!1);f||c?this._notify(i,n,_):this.requestors.push({ids:i,scope:n,callback:_})}getUpdatedImages(i){return this.updatedImages[i]}_notify(i,n,_){const c={};for(const f of i){this.images[n][f]||this.fire(new s.b("styleimagemissing",{id:f}));const g=this.images[n][f];g?c[f]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:s.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,c)}getPixelSize(i){const{width:n,height:_}=this.atlasImage[i];return{width:n,height:_}}getPattern(i,n){const _=this.patterns[n][i],c=this.getImage(i,n);if(!c)return null;if(_&&_.position.version===c.version)return _.position;if(_)_.position.version=c.version;else{const f={w:c.data.width+2,h:c.data.height+2,x:0,y:0},g=new s.I(f,c);this.patterns[n][i]={bin:f,position:g}}return this._updatePatternAtlas(n),this.patterns[n][i].position}bind(i,n){const _=i.gl;let c=this.atlasTexture[n];c?this.dirty&&(c.update(this.atlasImage[n]),this.dirty=!1):(c=new s.T(i,this.atlasImage[n],_.RGBA),this.atlasTexture[n]=c),c.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(i){const n=[];for(const g in this.patterns[i])n.push(this.patterns[i][g].bin);const{w:_,h:c}=s.p(n),f=this.atlasImage[i];f.resize({width:_||1,height:c||1});for(const g in this.patterns[i]){const{bin:b}=this.patterns[i][g],A=b.x+1,E=b.y+1,O=this.images[i][g].data,S=O.width,L=O.height;s.h.copy(O,f,{x:0,y:0},{x:A,y:E},{width:S,height:L}),s.h.copy(O,f,{x:0,y:L-1},{x:A,y:E-1},{width:S,height:1}),s.h.copy(O,f,{x:0,y:0},{x:A,y:E+L},{width:S,height:1}),s.h.copy(O,f,{x:S-1,y:0},{x:A-1,y:E},{width:1,height:L}),s.h.copy(O,f,{x:0,y:0},{x:A+S,y:E},{width:1,height:L})}this.dirty=!0}beginFrame(){for(const i in this.images)this.callbackDispatchedThisFrame[i]={}}dispatchRenderCallbacks(i,n){for(const _ of i){if(this.callbackDispatchedThisFrame[n][_])continue;this.callbackDispatchedThisFrame[n][_]=!0;const c=this.images[n][_];ni(c)&&this.updateImage(_,n,c)}}}class oe{constructor(i,n,_,c){this.message=(i?`${i}: `:"")+_,c&&(this.identifier=c),n!=null&&n.__line__&&(this.line=n.__line__)}}class Qi extends oe{}function vi(d){const i=d.key,n=d.value,_=d.valueSpec||{},c=d.objectElementValidators||{},f=d.style,g=d.styleSpec;let b=[];const A=s.i(n);if(A!=="object")return[new oe(i,n,`object expected, ${A} found`)];for(const E in n){const O=E.split(".")[0];let S;c[O]?S=c[O]:_[O]?S=_i:c["*"]?S=c["*"]:_["*"]&&(S=_i),S?b=b.concat(S({key:(i&&`${i}.`)+E,value:n[E],valueSpec:_[O]||_["*"],style:f,styleSpec:g,object:n,objectKey:E},n)):b.push(new Qi(i,n[E],`unknown property "${E}"`))}for(const E in _)c[E]||_[E].required&&_[E].default===void 0&&n[E]===void 0&&b.push(new oe(i,n,`missing required property "${E}"`));return b}function Ve(d){const i=d.value,n=d.valueSpec,_=d.style,c=d.styleSpec,f=d.key,g=d.arrayElementValidator||_i;if(s.i(i)!=="array")return[new oe(f,i,`array expected, ${s.i(i)} found`)];if(n.length&&i.length!==n.length)return[new oe(f,i,`array length ${n.length} expected, length ${i.length} found`)];if(n["min-length"]&&i.length<n["min-length"])return[new oe(f,i,`array length at least ${n["min-length"]} expected, length ${i.length} found`)];let b={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};c.$version<7&&(b.function=n.function),s.i(n.value)==="object"&&(b=n.value);let A=[];for(let E=0;E<i.length;E++)A=A.concat(g({array:i,arrayIndex:E,value:i[E],valueSpec:b,style:_,styleSpec:c,key:`${f}[${E}]`},!0));return A}function Po(d){const i=d.key,n=d.value,_=d.valueSpec;let c=s.i(n);if(c==="number"&&n!=n&&(c="NaN"),c!=="number")return[new oe(i,n,`number expected, ${c} found`)];if("minimum"in _){let f=_.minimum;if(s.i(_.minimum)==="array"&&(f=_.minimum[d.arrayIndex]),n<f)return[new oe(i,n,`${n} is less than the minimum value ${f}`)]}if("maximum"in _){let f=_.maximum;if(s.i(_.maximum)==="array"&&(f=_.maximum[d.arrayIndex]),n>f)return[new oe(i,n,`${n} is greater than the maximum value ${f}`)]}return[]}function wi(d){const i=d.valueSpec,n=s.u(d.value.type);let _,c,f,g={};const b=n!=="categorical"&&d.value.property===void 0,A=!b,E=s.i(d.value.stops)==="array"&&s.i(d.value.stops[0])==="array"&&s.i(d.value.stops[0][0])==="object",O=vi({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(w){if(n==="identity")return[new oe(w.key,w.value,'identity function may not have a "stops" property')];let U=[];const B=w.value;return U=U.concat(Ve({key:w.key,value:B,valueSpec:w.valueSpec,style:w.style,styleSpec:w.styleSpec,arrayElementValidator:S})),s.i(B)==="array"&&B.length===0&&U.push(new oe(w.key,B,"array must have at least one stop")),U},default:function(w){return _i({key:w.key,value:w.value,valueSpec:i,style:w.style,styleSpec:w.styleSpec})}}});return n==="identity"&&b&&O.push(new oe(d.key,d.value,'missing required property "property"')),n==="identity"||d.value.stops||O.push(new oe(d.key,d.value,'missing required property "stops"')),n==="exponential"&&d.valueSpec.expression&&!s.s(d.valueSpec)&&O.push(new oe(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(A&&!s.k(d.valueSpec)?O.push(new oe(d.key,d.value,"property functions not supported")):b&&!s.m(d.valueSpec)&&O.push(new oe(d.key,d.value,"zoom functions not supported"))),n!=="categorical"&&!E||d.value.property!==void 0||O.push(new oe(d.key,d.value,'"property" property is required')),O;function S(w){let U=[];const B=w.value,k=w.key;if(s.i(B)!=="array")return[new oe(k,B,`array expected, ${s.i(B)} found`)];if(B.length!==2)return[new oe(k,B,`array length 2 expected, length ${B.length} found`)];if(E){if(s.i(B[0])!=="object")return[new oe(k,B,`object expected, ${s.i(B[0])} found`)];if(B[0].zoom===void 0)return[new oe(k,B,"object stop key must have zoom")];if(B[0].value===void 0)return[new oe(k,B,"object stop key must have value")];const M=s.u(B[0].zoom);if(typeof M!="number")return[new oe(k,B[0].zoom,"stop zoom values must be numbers")];if(f&&f>M)return[new oe(k,B[0].zoom,"stop zoom values must appear in ascending order")];M!==f&&(f=M,c=void 0,g={}),U=U.concat(vi({key:`${k}[0]`,value:B[0],valueSpec:{zoom:{}},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{zoom:Po,value:L}}))}else U=U.concat(L({key:`${k}[0]`,value:B[0],valueSpec:{},style:w.style,styleSpec:w.styleSpec},B));return s.n(s.o(B[1]))?U.concat([new oe(`${k}[1]`,B[1],"expressions are not allowed in function stops.")]):U.concat(_i({key:`${k}[1]`,value:B[1],valueSpec:i,style:w.style,styleSpec:w.styleSpec}))}function L(w,U){const B=s.i(w.value),k=s.u(w.value),M=w.value!==null?w.value:U;if(_){if(B!==_)return[new oe(w.key,M,`${B} stop domain type must match previous stop domain type ${_}`)]}else _=B;if(B!=="number"&&B!=="string"&&B!=="boolean"&&typeof k!="number"&&typeof k!="string"&&typeof k!="boolean")return[new oe(w.key,M,"stop domain value must be a number, string, or boolean")];if(B!=="number"&&n!=="categorical"){let H=`number expected, ${B} found`;return s.k(i)&&n===void 0&&(H+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new oe(w.key,M,H)]}return n!=="categorical"||B!=="number"||typeof k=="number"&&isFinite(k)&&Math.floor(k)===k?n!=="categorical"&&B==="number"&&typeof k=="number"&&typeof c=="number"&&c!==void 0&&k<c?[new oe(w.key,M,"stop domain values must appear in ascending order")]:(c=k,n==="categorical"&&k in g?[new oe(w.key,M,"stop domain values must be unique")]:(g[k]=!0,[])):[new oe(w.key,M,`integer expected, found ${String(k)}`)]}}function wo(d){const i=(d.expressionContext==="property"?s.q:s.r)(s.o(d.value),d.valueSpec);if(i.result==="error")return i.value.map(_=>new oe(`${d.key}${_.key}`,d.value,_.message));const n=i.value.expression||i.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!n.outputDefined())return[new oe(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!s.t(n))return[new oe(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter")return zi(n,d);if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!s.v(n,["zoom","feature-state"]))return[new oe(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!s.x(n))return[new oe(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zi(d,i){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const c of i.valueSpec.expression.parameters)n.delete(c);if(n.size===0)return[];const _=[];return d instanceof s.C&&n.has(d.name)?[new oe(i.key,i.value,`["${d.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(d.eachChild(c=>{_.push(...zi(c,i))}),_)}function $n(d){const i=d.key,n=d.value,_=d.valueSpec,c=[];return Array.isArray(_.values)?_.values.indexOf(s.u(n))===-1&&c.push(new oe(i,n,`expected one of [${_.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(_.values).indexOf(s.u(n))===-1&&c.push(new oe(i,n,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(n)} found`)),c}function vs(d){return s.z(s.o(d.value))?wo(s.j({},d,{expressionContext:"filter",valueSpec:d.styleSpec[`filter_${d.layerType||"fill"}`]})):pl(d)}function pl(d){const i=d.value,n=d.key;if(s.i(i)!=="array")return[new oe(n,i,`array expected, ${s.i(i)} found`)];const _=d.styleSpec;let c,f=[];if(i.length<1)return[new oe(n,i,"filter array must have at least 1 element")];switch(f=f.concat($n({key:`${n}[0]`,value:i[0],valueSpec:_.filter_operator,style:d.style,styleSpec:d.styleSpec})),s.u(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&s.u(i[1])==="$type"&&f.push(new oe(n,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&f.push(new oe(n,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(c=s.i(i[1]),c!=="string"&&f.push(new oe(`${n}[1]`,i[1],`string expected, ${c} found`)));for(let g=2;g<i.length;g++)c=s.i(i[g]),s.u(i[1])==="$type"?f=f.concat($n({key:`${n}[${g}]`,value:i[g],valueSpec:_.geometry_type,style:d.style,styleSpec:d.styleSpec})):c!=="string"&&c!=="number"&&c!=="boolean"&&f.push(new oe(`${n}[${g}]`,i[g],`string, number, or boolean expected, ${c} found`));break;case"any":case"all":case"none":for(let g=1;g<i.length;g++)f=f.concat(pl({key:`${n}[${g}]`,value:i[g],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":c=s.i(i[1]),i.length!==2?f.push(new oe(n,i,`filter array for "${i[0]}" operator must have 2 elements`)):c!=="string"&&f.push(new oe(`${n}[1]`,i[1],`string expected, ${c} found`))}return f}function hl(d,i){const n=d.key,_=d.style,c=d.layer,f=d.styleSpec,g=d.value,b=d.objectKey,A=f[`${i}_${d.layerType}`];if(!A)return[];const E=b.match(/^(.*)-transition$/);if(i==="paint"&&E&&A[E[1]]&&A[E[1]].transition)return _i({key:n,value:g,valueSpec:f.transition,style:_,styleSpec:f});const O=d.valueSpec||A[b];if(!O)return[new Qi(n,g,`unknown property "${b}"`)];let S;if(s.i(g)==="string"&&s.k(O)&&!O.tokens&&(S=/^{([^}]+)}$/.exec(g))){const w=`\`{ "type": "identity", "property": ${S?JSON.stringify(S[1]):'"_"'} }\``;return[new oe(n,g,`"${b}" does not support interpolation syntax
Use an identity property function instead: ${w}.`)]}const L=[];if(d.layerType==="symbol")b!=="text-field"||!_||_.glyphs||_.imports||L.push(new oe(n,g,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&s.A(s.o(g))&&s.u(g.type)==="identity"&&L.push(new oe(n,g,'"text-font" does not support identity functions'));else if(d.layerType==="model"&&i==="paint"&&c&&c.layout&&c.layout.hasOwnProperty("model-id")&&s.k(O)&&(s.B(O)||s.m(O))){const w=s.q(s.o(g),O),U=w.value.expression||w.value._styleExpression.expression;U&&!s.v(U,["measure-light"])&&(b==="model-emissive-strength"&&s.x(U)&&s.t(U)||L.push(new oe(n,g,`${b} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return L.concat(_i({key:d.key,value:g,valueSpec:O,style:_,styleSpec:f,expressionContext:"property",propertyType:i,propertyKey:b}))}function gl(d){return hl(d,"paint")}function Zn(d){return hl(d,"layout")}function Qo(d){let i=[];const n=d.value,_=d.key,c=d.style,f=d.styleSpec;n.type||n.ref||i.push(new oe(_,n,'either "type" or "ref" is required'));let g=s.u(n.type);const b=s.u(n.ref);if(n.id){const A=s.u(n.id);for(let E=0;E<d.arrayIndex;E++){const O=c.layers[E];s.u(O.id)===A&&i.push(new oe(_,n.id,`duplicate layer id "${n.id}", previously used at line ${O.id.__line__}`))}}if("ref"in n){let A;["type","source","source-layer","filter","layout"].forEach(E=>{E in n&&i.push(new oe(_,n[E],`"${E}" is prohibited for ref layers`))}),c.layers.forEach(E=>{s.u(E.id)===b&&(A=E)}),A?A.ref?i.push(new oe(_,n.ref,"ref cannot reference another ref layer")):g=s.u(A.type):typeof b=="string"&&i.push(new oe(_,n.ref,`ref layer "${b}" not found`))}else if(g!=="background"&&g!=="sky"&&g!=="slot")if(n.source){const A=c.sources&&c.sources[n.source],E=A&&s.u(A.type);A?E==="vector"&&g==="raster"?i.push(new oe(_,n.source,`layer "${n.id}" requires a raster source`)):E==="raster"&&g!=="raster"?i.push(new oe(_,n.source,`layer "${n.id}" requires a vector source`)):E!=="vector"||n["source-layer"]?E==="raster-dem"&&g!=="hillshade"?i.push(new oe(_,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="raster-array"||["raster","raster-particle"].includes(g)?g!=="line"||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||E==="geojson"&&A.lineMetrics?g==="raster-particle"&&E!=="raster-array"&&i.push(new oe(_,n.source,`layer "${n.id}" requires a 'raster-array' source.`)):i.push(new oe(_,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new oe(_,n.source,"raster-array source can only be used with layer type 'raster'.")):i.push(new oe(_,n,`layer "${n.id}" must specify a "source-layer"`)):i.push(new oe(_,n.source,`source "${n.source}" not found`))}else i.push(new oe(_,n,'missing required property "source"'));return i=i.concat(vi({key:_,value:n,valueSpec:f.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":()=>[],type:()=>_i({key:`${_}.type`,value:n.type,valueSpec:f.layer.type,style:d.style,styleSpec:d.styleSpec,object:n,objectKey:"type"}),filter:A=>vs(s.j({layerType:g},A)),layout:A=>vi({layer:n,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":E=>Zn(s.j({layerType:g},E))}}),paint:A=>vi({layer:n,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":E=>gl(s.j({layerType:g,layer:n},E))}})}})),i}function Hi(d){const i=d.value,n=d.key,_=s.i(i);return _!=="string"?[new oe(n,i,`string expected, ${_} found`)]:[]}const bo={promoteId:function({key:d,value:i}){if(s.i(i)==="string")return Hi({key:d,value:i});{const n=[];for(const _ in i)n.push(...Hi({key:`${d}.${_}`,value:i[_]}));return n}}};function uo(d){const i=d.value,n=d.key,_=d.styleSpec,c=d.style;if(!i.type)return[new oe(n,i,'"type" is required')];const f=s.u(i.type);let g=[];switch(["vector","raster","raster-dem","raster-array"].includes(f)&&(i.url||i.tiles||g.push(new Qi(n,i,'Either "url" or "tiles" is required.'))),f){case"vector":case"raster":case"raster-dem":case"raster-array":return g=g.concat(vi({key:n,value:i,valueSpec:_[`source_${f.replace("-","_")}`],style:d.style,styleSpec:_,objectElementValidators:bo})),g;case"geojson":if(g=vi({key:n,value:i,valueSpec:_.source_geojson,style:c,styleSpec:_,objectElementValidators:bo}),i.cluster)for(const b in i.clusterProperties){const[A,E]=i.clusterProperties[b],O=typeof A=="string"?[A,["accumulated"],["get",b]]:A;g.push(...wo({key:`${n}.${b}.map`,value:E,expressionContext:"cluster-map"})),g.push(...wo({key:`${n}.${b}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return g;case"video":return vi({key:n,value:i,valueSpec:_.source_video,style:c,styleSpec:_});case"image":return vi({key:n,value:i,valueSpec:_.source_image,style:c,styleSpec:_});case"canvas":return[new oe(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $n({key:`${n}.type`,value:i.type,valueSpec:{values:yr(_)},style:c,styleSpec:_})}}function yr(d){return d.source.reduce((i,n)=>{const _=d[n];return _.type.type==="enum"&&(i=i.concat(Object.keys(_.type.values))),i},[])}function ei(d){const i=d.value;let n=[];if(!i)return n;const _=s.i(i);return _!=="string"?(n=n.concat([new oe(d.key,i,`string expected, "${_}" found`)]),n):(function(c){const f=c.indexOf("://")===-1;try{return new URL(c,f?"http://example.com":void 0),!0}catch{return!1}}(i)||(n=n.concat([new oe(d.key,i,`invalid url "${i}"`)])),n)}function To(d){const i=d.value,n=d.styleSpec,_=n.light,c=d.style;let f=[];const g=s.i(i);if(i===void 0)return f;if(g!=="object")return f=f.concat([new oe("light",i,`object expected, ${g} found`)]),f;for(const b in i){const A=b.match(/^(.*)-transition$/);f=f.concat(A&&_[A[1]]&&_[A[1]].transition?_i({key:b,value:i[b],valueSpec:n.transition,style:c,styleSpec:n}):_[b]?_i({key:b,value:i[b],valueSpec:_[b],style:c,styleSpec:n}):[new oe(b,i[b],`unknown property "${b}"`)])}return f}function Jn(d){const i=d.value;let n=[];if(!i)return n;const _=s.i(i);if(_!=="object")return n=n.concat([new oe("light-3d",i,`object expected, ${_} found`)]),n;const c=d.styleSpec,f=c["light-3d"],g=d.key,b=d.style,A=d.style.lights;for(const S of["type","id"])if(!(S in i))return n=n.concat([new oe("light-3d",i,`missing property ${S} on light`)]),n;if(i.type&&A)for(let S=0;S<d.arrayIndex;S++){const L=s.u(i.type),w=A[S];s.u(w.type)===L&&n.push(new oe(g,i.id,`duplicate light type "${i.type}", previously defined at line ${w.id.__line__}`))}const E=`properties_light_${i.type}`;if(!(E in c))return n=n.concat([new oe("light-3d",i,`Invalid light type ${i.type}`)]),n;const O=c[E];for(const S in i)if(S==="properties"){const L=i[S],w=s.i(L);if(w!=="object")return n=n.concat([new oe("properties",L,`object expected, ${w} found`)]),n;for(const U in L)n=n.concat(O[U]?_i({key:U,value:L[U],valueSpec:O[U],style:b,styleSpec:c}):[new Qi(d.key,L[U],`unknown property "${U}"`)])}else{const L=S.match(/^(.*)-transition$/);n=n.concat(L&&f[L[1]]&&f[L[1]].transition?_i({key:S,value:i[S],valueSpec:c.transition,style:b,styleSpec:c}):f[S]?_i({key:S,value:i[S],valueSpec:f[S],style:b,styleSpec:c}):[new Qi(S,i[S],`unknown property "${S}"`)])}return n}function tn(d){const i=d.value,n=d.key,_=d.style,c=d.styleSpec,f=c.terrain;let g=[];const b=s.i(i);if(i===void 0||b==="null")return g;if(b!=="object")return g=g.concat([new oe("terrain",i,`object expected, ${b} found`)]),g;for(const A in i){const E=A.match(/^(.*)-transition$/);g=g.concat(E&&f[E[1]]&&f[E[1]].transition?_i({key:A,value:i[A],valueSpec:c.transition,style:_,styleSpec:c}):f[A]?_i({key:A,value:i[A],valueSpec:f[A],style:_,styleSpec:c}):[new Qi(A,i[A],`unknown property "${A}"`)])}if(i.source){const A=_.sources&&_.sources[i.source],E=A&&s.u(A.type);A?E!=="raster-dem"&&g.push(new oe(n,i.source,`terrain cannot be used with a source of type ${String(E)}, it only be used with a "raster-dem" source type`)):g.push(new oe(n,i.source,`source "${i.source}" not found`))}else g.push(new oe(n,i,'terrain is missing required property "source"'));return g}function Ko(d){const i=d.value,n=d.style,_=d.styleSpec,c=_.fog;let f=[];const g=s.i(i);if(i===void 0)return f;if(g!=="object")return f=f.concat([new oe("fog",i,`object expected, ${g} found`)]),f;for(const b in i){const A=b.match(/^(.*)-transition$/);f=f.concat(A&&c[A[1]]&&c[A[1]].transition?_i({key:b,value:i[b],valueSpec:_.transition,style:n,styleSpec:_}):c[b]?_i({key:b,value:i[b],valueSpec:c[b],style:n,styleSpec:_}):[new Qi(b,i[b],`unknown property "${b}"`)])}return f}const Qn={"*":()=>[],array:Ve,boolean:function(d){const i=d.value,n=d.key,_=s.i(i);return _!=="boolean"?[new oe(n,i,`boolean expected, ${_} found`)]:[]},number:Po,color:function(d){const i=d.key,n=d.value,_=s.i(n);return _!=="string"?[new oe(i,n,`color expected, ${_} found`)]:s.y(n)===null?[new oe(i,n,`color expected, "${n}" found`)]:[]},enum:$n,filter:vs,function:wi,layer:Qo,object:vi,source:uo,model:ei,light:To,"light-3d":Jn,terrain:tn,fog:Ko,string:Hi,formatted:function(d){return Hi(d).length===0?[]:wo(d)},resolvedImage:function(d){return Hi(d).length===0?[]:wo(d)},projection:function(d){const i=d.value,n=d.styleSpec,_=n.projection,c=d.style;let f=[];const g=s.i(i);if(g==="object")for(const b in i)f=f.concat(_i({key:b,value:i[b],valueSpec:_[b],style:c,styleSpec:n}));else g!=="string"&&(f=f.concat([new oe("projection",i,`object or string expected, ${g} found`)]));return f},import:function(d){const{value:i,styleSpec:n}=d,{data:_,...c}=i;Object.defineProperty(c,"__line__",{value:i.__line__,enumerable:!1});let f=vi(s.j({},d,{value:c,valueSpec:n.import}));return s.u(c.id)===""&&f.push(new oe(`${d.key}.id`,c,"import id can't be an empty string")),_&&(f=f.concat(Is(_,n,{key:`${d.key}.data`}))),f}};function _i(d,i=!1){const n=d.value,_=d.valueSpec,c=d.styleSpec;if(_.expression&&s.A(s.u(n)))return wi(d);if(_.expression&&s.n(s.o(n)))return wo(d);if(_.type&&Qn[_.type]){const f=Qn[_.type](d);return i===!0&&f.length>0&&s.i(d.value)==="array"?wo(d):f}return vi(s.j({},d,{valueSpec:_.type?c[_.type]:_}))}function Es(d){const i=d.value,n=d.key,_=Hi(d);return _.length||(i.indexOf("{fontstack}")===-1&&_.push(new oe(n,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&_.push(new oe(n,i,'"glyphs" url must include a "{range}" token'))),_}function Is(d,i=s.D,n={}){return _i({key:n.key||"",value:d,valueSpec:i.$root,styleSpec:i,style:d,objectElementValidators:{glyphs:Es,"*":()=>[]}})}function xo(d,i=s.D){return Lt(Is(d,i))}const en=d=>Lt(uo(d)),En=d=>Lt(To(d)),Mt=d=>Lt(Jn(d)),X=d=>Lt(tn(d)),Q=d=>Lt(Ko(d)),dt=d=>Lt(Qo(d)),Nt=d=>Lt(vs(d)),Ft=d=>Lt(gl(d)),Gt=d=>Lt(Zn(d)),ge=d=>Lt(ei(d));function Lt(d){return d.slice().sort((i,n)=>i.line&&n.line?i.line-n.line:0)}function Te(d,i){let n=!1;if(i&&i.length)for(const _ of i)_ instanceof Qi?s.w(_.message):(d.fire(new s.a(new Error(_.message))),n=!0);return n}const ce=new s.F({anchor:new s.G(s.D.light.anchor),position:new s.H(s.D.light.position),color:new s.G(s.D.light.color),intensity:new s.G(s.D.light.intensity)});class Ae extends s.E{constructor(i,n="flat"){super(),this._transitionable=new s.J(ce),this.setLight(i,n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,n,_={}){this._validate(En,i,_)||(this._transitionable.setTransitionOrValue(i),this.id=n)}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,n,_){return(!_||_.validate!==!1)&&Te(this,i.call(xo,s.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:s.D})))}}const Ze=new s.F({source:new s.G(s.D.terrain.source),exaggeration:new s.G(s.D.terrain.exaggeration)});let Ra=class extends s.E{constructor(d,i,n,_){super(),this.scope=n,this._transitionable=new s.J(Ze,n,_),this._transitionable.setTransitionOrValue(d,_),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i}get(){return this._transitionable.serialize()}set(d,i){this._transitionable.setTransitionOrValue(d,i)}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}getExaggeration(d){return this._transitioning.possiblyEvaluate(new s.K(d)).get("exaggeration")}isZoomDependent(){const d=this._transitionable._values.exaggeration;return d!=null&&d.value!=null&&d.value.expression!=null&&d.value.expression instanceof s.Z}};const Ha=45,Na=65,Ea=.05;function Ta(d,i,n,_){const c=s.O(Ha,Na,n),[f,g]=Ca(d,_);let b=1-Math.min(1,Math.exp((i-f)/(g-f)*-6));return b*=b*b,b=Math.min(1,1.00747*b),b*c*d.alpha}function Ca(d,i){const n=.5/Math.tan(.5*i);return[d.range[0]+n,d.range[1]+n]}function Ba(d,i,n,_,c){const f=s.N.transformMat4([],[i,n,_],c.mercatorFogMatrix);return Ta(d,s.N.length(f),c.pitch,c._fov)}function Ei(d,i,n,_,c,f,g){const b=[[n,_,0],[c,_,0],[c,f,0],[n,f,0]];let A=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(const O of b){const S=s.N.transformMat4([],O,i),L=s.N.length(S);A=Math.min(A,L),E=Math.max(E,L)}return[Ta(d,A,g.pitch,g._fov),Ta(d,E,g.pitch,g._fov)]}const za=new s.F({range:new s.G(s.D.fog.range),color:new s.G(s.D.fog.color),"high-color":new s.G(s.D.fog["high-color"]),"space-color":new s.G(s.D.fog["space-color"]),"horizon-blend":new s.G(s.D.fog["horizon-blend"]),"star-intensity":new s.G(s.D.fog["star-intensity"]),"vertical-range":new s.G(s.D.fog["vertical-range"])});class Ki extends s.E{constructor(i,n,_,c){super(),this._transitionable=new s.J(za,_,new Map(c)),this.set(i,c),this._transitioning=this._transitionable.untransitioned(),this._transform=n,this.properties=new s.Q(za)}get state(){const i=this._transform,n=i.projection.name==="globe",_=s.S(i.zoom),c=this.properties.get("range"),f=[.5,3];return{range:n?[s.U(f[0],c[0],_),s.U(f[1],c[1],_)]:c,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,n,_={}){if(this._validate(Q,i,_))return;const c=s.e({},i);for(const f of Object.keys(s.D.fog))c[f]===void 0&&(c[f]=s.D.fog[f].default);this._options=c,this._transitionable.setTransitionOrValue(this._options,n)}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.O(Ha,Na,i))*n.a}getOpacityAtLatLng(i,n){return this._transform.projection.supportsFog?function(_,c,f){const g=s.L.fromLngLat(c),b=f.elevation?f.elevation.getAtPointOrZero(g):0;return Ba(_,g.x,g.y,b,f)}(this.state,i,n):0}getOpacityForTile(i){if(!this._transform.projection.supportsFog)return[1,1];const n=this._transform.calculateFogTileMatrix(i.toUnwrapped());return Ei(this.state,n,0,0,s.V,s.V,this._transform)}getOpacityForBounds(i,n,_,c,f){return this._transform.projection.supportsFog?Ei(this.state,i,n,_,c,f,this._transform):[1,1]}getFovAdjustedRange(i){return this._transform.projection.supportsFog?Ca(this.state,i):[0,1]}isVisibleOnFrustum(i){if(!this._transform.projection.supportsFog)return!1;const n=[4,5,6,7];for(const _ of n){const c=i.points[_];let f;if(c[2]>=0)f=c;else{const g=i.points[_-4];f=s.W(g,c,g[2]/(g[2]-c[2]))}if(Ba(this.state,f[0],f[1],0,this._transform)>=Ea)return!0}return!1}updateConfig(i){this._transitionable.setTransitionOrValue(this._options,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,n,_){return(!_||_.validate!==!1)&&Te(this,i.call(xo,s.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:s.D})))}}class Gi extends s.E{constructor(i,n,_,c){super(),this.scope=_,this._options=i,this.properties=new s.Q(n),this._transitionable=new s.J(n,_,new Map(c)),this._transitionable.setTransitionOrValue(i.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(i){this._transitionable.setTransitionOrValue(this._options.properties,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(i,n){this._options=i,this._transitionable.setTransitionOrValue(i.properties,n)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const to=new s.F({color:new s.G(s.D.properties_light_ambient.color),intensity:new s.G(s.D.properties_light_ambient.intensity)}),fi=new s.F({direction:new s.X(s.D.properties_light_directional.direction),color:new s.G(s.D.properties_light_directional.color),intensity:new s.G(s.D.properties_light_directional.intensity),"cast-shadows":new s.G(s.D.properties_light_directional["cast-shadows"]),"shadow-intensity":new s.G(s.D.properties_light_directional["shadow-intensity"])});class ui{constructor(i,n,_,c){this.screenBounds=i,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,c)}static createFromScreenPoints(i,n){let _,c;if(i instanceof s.P||typeof i[0]=="number"){const f=s.P.convert(i);_=[f],c=n.isPointAboveHorizon(f)}else{const f=s.P.convert(i[0]),g=s.P.convert(i[1]);_=[f,g],c=s.Y(f,g).every(b=>n.isPointAboveHorizon(b))}return new ui(_,n.getCameraPoint(),c,n)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.Y(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const n=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new s.P(1,1)):this.screenBounds[1],c=s.Y(n,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<_.x?c.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?c[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(c[3]=this.cameraPoint)),s._(c,i)}bufferedCameraGeometryGlobe(i){const n=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new s.P(1,1)):this.screenBounds[1],c=s.Y(n,_,i),f=this.cameraPoint.clone();switch(3*((f.y>n.y)+(f.y>_.y))+((f.x>n.x)+(f.x>_.x))){case 0:c[0]=f,c[4]=f.clone();break;case 1:c.splice(1,0,f);break;case 2:c[1]=f;break;case 3:c.splice(4,0,f);break;case 5:c.splice(2,0,f);break;case 6:c[3]=f;break;case 7:c.splice(3,0,f);break;case 8:c[2]=f}return c}containsTile(i,n,_,c=0){const f=i.queryPadding/n._pixelsPerMercatorPixel+1,g=_?this._bufferedCameraMercator(f,n):this._bufferedScreenMercator(f,n);let b=i.tileID.wrap+(g.unwrapped?c:0);const A=g.polygon.map(k=>s.$(i.tileTransform,k,b));if(!s.a0(A,0,0,s.V,s.V))return;b=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?c:0);const E=this.screenGeometryMercator.polygon.map(k=>s.a1(i.tileTransform,k,b)),O=E.map(k=>new s.P(k[0],k[1])),S=n.getFreeCameraOptions().position||new s.L(0,0,0),L=s.a1(i.tileTransform,S,b),w=E.map(k=>{const M=s.N.sub(k,k,L);return s.N.normalize(M,M),new s.a2(L,M)}),U=s.a3(i,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:O,tilespaceRays:w,bufferedTilespaceGeometry:A,bufferedTilespaceBounds:(B=s.a4(A),B.min.x=s.aa(B.min.x,0,s.V),B.min.y=s.aa(B.min.y,0,s.V),B.max.x=s.aa(B.max.x,0,s.V),B.max.y=s.aa(B.max.y,0,s.V),B),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:U};var B}_bufferedScreenMercator(i,n){const _=Vt(i);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let c;return c=n.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),n):{polygon:this.bufferedScreenGeometry(i).map(f=>n.pointCoordinate3D(f)),unwrapped:!0},this._screenRaycastCache[_]=c,c}}_bufferedCameraMercator(i,n){const _=Vt(i);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let c;return c=n.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),n):{polygon:this.bufferedCameraGeometry(i).map(f=>n.pointCoordinate3D(f)),unwrapped:!0},this._cameraRaycastCache[_]=c,c}}_projectAndResample(i,n){const _=function(f,g){const b=s.a6.multiply([],g.pixelMatrix,g.globeMatrix),A=[0,-s.ab,0,1],E=[0,s.ab,0,1],O=[0,0,0,1];s.a7.transformMat4(A,A,b),s.a7.transformMat4(E,E,b),s.a7.transformMat4(O,O,b);const S=new s.P(A[0]/A[3],A[1]/A[3]),L=new s.P(E[0]/E[3],E[1]/E[3]),w=s.a8(f,S)&&A[3]<O[3],U=s.a8(f,L)&&E[3]<O[3];if(!w&&!U)return null;const B=function(Z,at,nt){for(let rt=1;rt<Z.length;rt++){const yt=Pt(at.pointCoordinate3D(Z[rt-1]).x),ut=Pt(at.pointCoordinate3D(Z[rt]).x);if(nt<0){if(yt<ut)return{idx:rt,t:-yt/(ut-1-yt)}}else if(ut<yt)return{idx:rt,t:(1-yt)/(ut+1-yt)}}return null}(f,g,w?-1:1);if(!B)return null;const{idx:k,t:M}=B;let H=k>1?St(f.slice(0,k),g):[],q=k<f.length?St(f.slice(k),g):[];H=H.map(Z=>new s.P(Pt(Z.x),Z.y)),q=q.map(Z=>new s.P(Pt(Z.x),Z.y));const V=[...H];V.length===0&&V.push(q[q.length-1]);const $=s.U(V[V.length-1].y,(q.length===0?H[0]:q[0]).y,M);let z;return z=w?[new s.P(0,$),new s.P(0,0),new s.P(1,0),new s.P(1,$)]:[new s.P(1,$),new s.P(1,1),new s.P(0,1),new s.P(0,$)],V.push(...z),q.length===0?V.push(H[0]):V.push(...q),{polygon:V.map(Z=>new s.L(Z.x,Z.y)),unwrapped:!1}}(i,n);if(_)return _;const c=function(f,g){let b=!1,A=-1/0,E=0;for(let S=0;S<f.length-1;S++)f[S].x>A&&(A=f[S].x,E=S);for(let S=0;S<f.length-1;S++){const L=(E+S)%(f.length-1),w=f[L],U=f[L+1];Math.abs(w.x-U.x)>.5&&(w.x<U.x?(w.x+=1,L===0&&(f[f.length-1].x+=1)):(U.x+=1,L+1===f.length-1&&(f[0].x+=1)),b=!0)}const O=s.a5(g.center.lng);return b&&O<Math.abs(O-1)&&f.forEach(S=>{S.x-=1}),{polygon:f,unwrapped:b}}(St(i,n).map(f=>new s.P(Pt(f.x),f.y)),n);return{polygon:c.polygon.map(f=>new s.L(f.x,f.y)),unwrapped:c.unwrapped}}}function St(d,i){return s.a9(d,n=>{const _=i.pointCoordinate3D(n);n.x=_.x,n.y=_.y},1/256)}function Pt(d){return d<0?1+d%1:d%1}function Vt(d){return 100*d|0}function te(d,i,n,_,c){const f=function(g,b){if(g)return c(g);if(b){d.url&&b.tiles&&d.tiles&&delete d.tiles;const A=s.ac(s.e(b,d),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(A.vectorLayers=b.vector_layers,A.vectorLayerIds=A.vectorLayers.map(E=>E.id)),b.raster_layers&&(A.rasterLayers=b.raster_layers,A.rasterLayerIds=A.rasterLayers.map(E=>E.id)),A.tiles=i.canonicalizeTileset(A,d.url),c(null,A)}};return d.url?s.g(i.transformRequest(i.normalizeSourceURL(d.url,null,n,_),s.R.Source),f):s.f.frame(()=>f(null,d))}class $t{constructor(i,n,_){this.bounds=s.ad.convert(this.validateBounds(i)),this.minzoom=n||0,this.maxzoom=_||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const n=Math.pow(2,i.z),_=Math.floor(s.a5(this.bounds.getWest())*n),c=Math.floor(s.ae(this.bounds.getNorth())*n),f=Math.ceil(s.a5(this.bounds.getEast())*n),g=Math.ceil(s.ae(this.bounds.getSouth())*n);return i.x>=_&&i.x<f&&i.y>=c&&i.y<g}}class ie extends s.E{constructor(i,n,_,c){if(super(),this.id=i,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.ac(n,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},n),this._collectResourceTiming=!!n.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(c),this._tileWorkers={},this._deduped=new s.af}load(i){this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=te(this._options,this.map._requestManager,n,_,(c,f)=>{this._tileJSONRequest=null,this._loaded=!0,c?(n&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${n}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new s.a(c))):f&&(s.e(this,f),f.bounds&&(this.tileBounds=new $t(f.bounds,this.minzoom,this.maxzoom)),s.aj(f.tiles,this.map._requestManager._customAccessToken),this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))),i&&i(c)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=s.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.e({},this._options)}loadTile(i,n){const _=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),c={request:this.map._requestManager.transformRequest(_,s.R.Tile),data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:s.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:i.isExtraShadowCaster};if(c.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=n:i.request=i.actor.send("reloadTile",c,f.bind(this));else if(i.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",c,f.bind(this),void 0,!0);else{const g=s.ah.call({deduped:this._deduped},c,(b,A)=>{b||!A?f.call(this,b):(c.data={cacheControl:A.cacheControl,expires:A.expires,rawData:A.rawData.slice(0)},i.actor&&i.actor.send("loadTile",c,f.bind(this),void 0,!0))},!0);i.request={cancel:g}}function f(g,b){return delete i.request,i.aborted?n(null):g&&g.status!==404?n(g):(b&&b.resourceTiming&&(i.resourceTiming=b.resourceTiming),this.map._refreshExpiredTiles&&b&&i.setExpiryData(b),i.loadVectorData(b,this.map.painter),s.ai(this.dispatcher),n(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(i){i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope}),i.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class ne extends s.E{constructor(i,n,_,c){super(),this.id=i,this.dispatcher=_,this.setEventedParent(c),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},n),s.e(this,s.ac(n,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"})),this._tileJSONRequest=te(this._options,this.map._requestManager,null,null,(n,_)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new s.a(n)):_&&(s.e(this,_),_.bounds&&(this.tileBounds=new $t(_.bounds,this.minzoom,this.maxzoom)),s.aj(_.tiles),this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))),i&&i(n)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();const i=s.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,n){const _=s.f.devicePixelRatio>=2,c=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);i.request=s.d(this.map._requestManager.transformRequest(c,s.R.Tile),(f,g,b,A)=>(delete i.request,i.aborted?(i.state="unloaded",n(null)):f?(i.state="errored",n(f)):g?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:b,expires:A}),i.setTexture(g,this.map.painter),i.state="loaded",s.ai(this.dispatcher),void n(null)):n(null)))}abortTile(i,n){i.request&&(i.request.cancel(),delete i.request),n()}unloadTile(i,n){i.texture&&i.texture instanceof s.T?(i.destroy(!0),i.texture&&i.texture instanceof s.T&&this.map.painter.saveTileTexture(i.texture)):i.destroy(),n()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Jt extends ne{constructor(i,n,_,c){super(i,n,_,c),this.type="raster-array",this.maxzoom=22,this._options=s.e({type:"raster-array"},n)}triggerRepaint(i){const n=this.map.painter._terrain,_=this.map.style.getSourceCache(this.id);n&&n.enabled&&_&&n._clearRenderCacheForTile(_.id,i.tileID),this.map.triggerRepaint()}loadTile(i,n){const _=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),c=this.map._requestManager.transformRequest(_,s.R.Tile);i.requestParams=c,i.actor||(i.actor=this.dispatcher.getActor()),i.request=i.fetchHeader(void 0,(f,g,b,A)=>{if(delete i.request,i.aborted)return i.state="unloaded",n(null);if(f)return f.code===20?void 0:(i.state="errored",n(f));this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:b,expires:A}),i.state="empty",n(null)})}unloadTile(i){const n=i.texture;n&&n instanceof s.T?(i.destroy(!0),this.map.painter.saveTileTexture(n)):(i.destroy(),i.flushQueues(),i._isHeaderLoaded=!1,delete i._mrt,delete i.textureDescriptor),i.fbo&&(i.fbo.destroy(),delete i.fbo),delete i.request,delete i.requestParams,delete i.neighboringTiles,i.state="unloaded"}prepareTile(i,n,_){i._isHeaderLoaded&&(i.state!=="empty"&&(i.state="reloading"),i.fetchBand(n,_,(c,f)=>{if(c)return i.state="errored",this.fire(new s.a(c)),void this.triggerRepaint(i);f&&(i.setTexture(f,this.map.painter),i.state="loaded",this.triggerRepaint(i))}))}getInitialBand(i){if(!this.rasterLayers)return 0;const n=this.rasterLayers.find(({id:f})=>f===i),_=n&&n.fields,c=_&&_.bands&&_.bands;return c?c[0]:0}getTextureDescriptor(i,n,_){if(!i)return;const c=n.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!c)return;let f=null;n instanceof s.an?f=n.paint.get("raster-array-band"):n instanceof s.ao&&(f=n.paint.get("raster-particle-array-band"));const g=f||this.getInitialBand(c);if(g!=null)if(i.textureDescriptor){if(!i.updateNeeded(c,g)||_)return Object.assign({},i.textureDescriptor,{texture:i.texture})}else this.prepareTile(i,c,g)}}const re=32,ee=33,De=new Uint16Array(8184);for(let d=0;d<2046;d++){let i=d+2,n=0,_=0,c=0,f=0,g=0,b=0;for(1&i?c=f=g=re:n=_=b=re;(i>>=1)>1;){const E=n+c>>1,O=_+f>>1;1&i?(c=n,f=_,n=g,_=b):(n=c,_=f,c=g,f=b),g=E,b=O}const A=4*d;De[A+0]=n,De[A+1]=_,De[A+2]=c,De[A+3]=f}const na=new Uint16Array(2178),Ie=new Uint8Array(1089),La=new Uint16Array(1089);function Va(d){return d===0?-.03125:d===32?.03125:0}class Ma{constructor(i,n,_,c){this.id=Ma.uniqueIdxCounter,Ma.uniqueIdxCounter++,this.context=i;const f=i.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||c||n.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){this.id=Ma.uniqueIdxCounter,Ma.uniqueIdxCounter++;const n=this.context.gl;this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Ma.uniqueIdxCounter=0;const pi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Wi{constructor(i,n,_,c,f,g){this.length=n.length,this.attributes=_,this.itemSize=n.bytesPerElement,this.dynamicDraw=c,this.instanceCount=g,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||f||n.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,n){for(let _=0;_<this.attributes.length;_++){const c=n.attributes[this.attributes[_].name];c!==void 0&&i.enableVertexAttribArray(c)}}setVertexAttribPointers(i,n,_){for(let c=0;c<this.attributes.length;c++){const f=this.attributes[c],g=n.attributes[f.name];g!==void 0&&i.vertexAttribPointer(g,f.components,i[pi[f.type]],!1,this.itemSize,f.offset+this.itemSize*(_||0))}}setVertexAttribDivisor(i,n,_){for(let c=0;c<this.attributes.length;c++){const f=n.attributes[this.attributes[c].name];f!==void 0&&this.instanceCount&&this.instanceCount>0&&i.vertexAttribDivisor(f,_)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ya{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class co extends ya{getDefault(){return s.ax.transparent}set(i){const n=this.current;(i.r!==n.r||i.g!==n.g||i.b!==n.b||i.a!==n.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Wo extends ya{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Mi extends ya{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class yl extends ya{getDefault(){return[!0,!0,!0,!0]}set(i){const n=this.current;(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||i[3]!==n[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class In extends ya{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Os extends ya{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Md extends ya{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const n=this.current;(i.func!==n.func||i.ref!==n.ref||i.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class ts extends ya{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const n=this.current;(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Dd extends ya{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;i?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=i,this.dirty=!1}}class Cs extends ya{getDefault(){return[0,1]}set(i){const n=this.current;(i[0]!==n[0]||i[1]!==n[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Vu extends ya{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;i?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=i,this.dirty=!1}}class br extends ya{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Fd extends ya{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;i?n.enable(n.BLEND):n.disable(n.BLEND),this.current=i,this.dirty=!1}}class Tr extends ya{getDefault(){const i=this.gl;return[i.ONE,i.ZERO,i.ONE,i.ZERO]}set(i){const n=this.current;(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||i[3]!==n[3]||this.dirty)&&(this.gl.blendFuncSeparate(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Bd extends ya{getDefault(){return s.ax.transparent}set(i){const n=this.current;(i.r!==n.r||i.g!==n.g||i.b!==n.b||i.a!==n.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class eo extends ya{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(i,i),this.current=i,this.dirty=!1)}}class ci extends ya{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;i?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=i,this.dirty=!1}}class sa extends ya{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Xu extends ya{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let xr=class extends ya{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}};class Ud extends ya{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class df extends ya{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const n=this.current;(i[0]!==n[0]||i[1]!==n[1]||i[2]!==n[2]||i[3]!==n[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class jo extends ya{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class kd extends ya{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class _f extends ya{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;n.bindTexture(n.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Ss extends ya{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class _e extends ya{getDefault(){return null}set(i){const n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class xa extends ya{getDefault(){return null}set(i){this.gl&&(i!==this.current||this.dirty)&&(this.gl.bindVertexArray(i),this.current=i,this.dirty=!1)}}class Aa extends ya{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Ao extends ya{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Rs extends ya{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ua extends ya{constructor(i,n){super(i),this.context=i,this.parent=n}getDefault(){return null}}class Ar extends ua{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ns extends ua{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,this.attachment(),n.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class bl extends ua{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,this.attachment(),n.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class ao extends Ns{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class li{constructor(i,n,_,c,f){this.context=i,this.width=n,this.height=_;const g=this.framebuffer=i.gl.createFramebuffer();c&&(this.colorAttachment=new Ar(i,g)),f&&(this.depthAttachmentType=f,this.depthAttachment=f==="renderbuffer"?new Ns(i,g):new bl(i,g))}destroy(){const i=this.context.gl;if(this.colorAttachment){const n=this.colorAttachment.get();n&&i.deleteTexture(n)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const n=this.depthAttachment.get();n&&i.deleteRenderbuffer(n)}else{const n=this.depthAttachment.get();n&&i.deleteTexture(n)}i.deleteFramebuffer(this.framebuffer)}}class Ne{constructor(i,n,_){this.func=i,this.mask=n,this.range=_}}Ne.ReadOnly=!1,Ne.ReadWrite=!0,Ne.disabled=new Ne(519,Ne.ReadOnly,[0,1]);const es=7680;class Be{constructor(i,n,_,c,f,g){this.test=i,this.ref=n,this.mask=_,this.fail=c,this.depthFail=f,this.pass=g}}Be.disabled=new Be({func:519,mask:0},0,0,es,es,es);const On=771;class Je{constructor(i,n,_,c){this.blendFunction=i,this.blendColor=n,this.mask=_,this.blendEquation=c}}Je.Replace=[1,0,1,0],Je.disabled=new Je(Je.Replace,s.ax.transparent,[!1,!1,!1,!1]),Je.unblended=new Je(Je.Replace,s.ax.transparent,[!0,!0,!0,!0]),Je.alphaBlended=new Je([1,On,1,On],s.ax.transparent,[!0,!0,!0,!0]),Je.multiply=new Je([774,0,774,0],s.ax.transparent,[!0,!0,!0,!0]);const Ls=1029,Di=2305;class Le{constructor(i,n,_){this.enable=i,this.mode=n,this.frontFace=_}}Le.disabled=new Le(!1,Ls,Di),Le.backCCW=new Le(!0,Ls,Di),Le.backCW=new Le(!0,Ls,2304),Le.frontCW=new Le(!0,1028,2304),Le.frontCCW=new Le(!0,1028,Di);class Ku{constructor(i,n){this.gl=i,this.clearColor=new co(this),this.clearDepth=new Wo(this),this.clearStencil=new Mi(this),this.colorMask=new yl(this),this.depthMask=new In(this),this.stencilMask=new Os(this),this.stencilFunc=new Md(this),this.stencilOp=new ts(this),this.stencilTest=new Dd(this),this.depthRange=new Cs(this),this.depthTest=new Vu(this),this.depthFunc=new br(this),this.blend=new Fd(this),this.blendFunc=new Tr(this),this.blendColor=new Bd(this),this.blendEquation=new eo(this),this.cullFace=new ci(this),this.cullFaceSide=new sa(this),this.frontFace=new Xu(this),this.program=new xr(this),this.activeTexture=new Ud(this),this.viewport=new df(this),this.bindFramebuffer=new jo(this),this.bindRenderbuffer=new kd(this),this.bindTexture=new _f(this),this.bindVertexBuffer=new Ss(this),this.bindElementBuffer=new _e(this),this.bindVertexArrayOES=new xa(this),this.pixelStoreUnpack=new Aa(this),this.pixelStoreUnpackPremultiplyAlpha=new Ao(this),this.pixelStoreUnpackFlipY=new Rs(this),this.options=n?{...n}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=i.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.maxPointSize=i.getParameter(i.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,n,_){return new Ma(this,i,n,_)}createVertexBuffer(i,n,_,c,f){return new Wi(this,i,n,_,c,f)}createRenderbuffer(i,n,_){const c=this.gl,f=c.createRenderbuffer();return this.bindRenderbuffer.set(f),c.renderbufferStorage(c.RENDERBUFFER,i,n,_),this.bindRenderbuffer.set(null),f}createFramebuffer(i,n,_,c){return new li(this,i,n,_,c)}clear({color:i,depth:n,stencil:_,colorMask:c}){const f=this.gl;let g=0;i&&(g|=f.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set(c||[!0,!0,!0,!0])),n!==void 0&&(g|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),_!==void 0&&(g|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),f.clear(g)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){ot(i.blendFunction,Je.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor),i.blendEquation?this.blendEquation.set(i.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(i.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}var as=s.ay([{name:"a_pos",type:"Float32",components:3}]);class hi{constructor(i,n,_,c){const f={width:_[0],height:_[1],data:null},g=i.gl;this.targetColorTexture=new s.T(i,f,g.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new s.T(i,f,g.RGBA,{useMipmap:!1}),this.context=i,this.setNumParticles(n,c),this.lastInvalidatedAt=0}setNumParticles(i,n){if(this.numParticles===n)return;(this.particleVertices0||this.particleVertices1||this.particleSegment)&&(this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy());const _=new s.az;_.reserve(Math.round(n));const c=s.aA(i.key);for(let f=0;f<n;f++)_.emplaceBack(c(),c(),c());this.particleVertices0=this.context.createVertexBuffer(_,as.members,!0),this.particleVertices1=this.context.createVertexBuffer(_,as.members,!0),this.particleSegment=s.aB.simpleSegment(0,0,this.particleVertices0.length,0),this.numParticles=n}update(i){return!(this.lastInvalidatedAt<i&&(this.lastInvalidatedAt=s.f.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy()}}const vo={type:2,extent:s.V,loadGeometry:()=>[[new s.P(0,0),new s.P(s.V+1,0),new s.P(s.V+1,s.V+1),new s.P(0,s.V+1),new s.P(0,0)]]};class Cn{constructor(i,n,_,c,f){this.tileID=i,this.uid=s.aC(),this.uses=0,this.tileSize=n,this.tileZoom=_,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=f,c&&c.style&&(this._lastUpdatedBrightness=c.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",c&&c.transform&&(this.projection=c.transform.projection)}registerFadeDuration(i){const n=i+this.timeAdded;n<s.f.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=s.as(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,n,_){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(c,f){const g={};if(!f)return g;for(const b of c){const A=b.layerIds.map(E=>f.getLayer(E)).filter(Boolean);if(A.length!==0){b.layers=A,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(E=>A.filter(O=>O.id===E)[0]));for(const E of A)g[E.fqid]=b}}return g}(i.buckets,n.style),this.hasSymbolBuckets=!1;for(const c in this.buckets){const f=this.buckets[c];if(f instanceof s.aE){if(this.hasSymbolBuckets=!0,!_)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const c in this.buckets){const f=this.buckets[c];if(f instanceof s.aE&&f.hasRTLText){this.hasRTLText=!0,s.aF();break}}this.queryPadding=0;for(const c in this.buckets){const f=this.buckets[c],g=n.style.getOwnLayer(c);if(!g)continue;const b=g.queryRadius(f);this.queryPadding=Math.max(this.queryPadding,b)}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas),this._lastUpdatedBrightness=i.brightness}else this.collisionBoxArray=new s.aD}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.fqid]}upload(i){for(const c in this.buckets){const f=this.buckets[c];f.uploadPending()&&f.upload(i)}const n=i.gl,_=this.imageAtlas;if(_&&!_.uploaded){const c=!!Object.keys(_.patternPositions).length;this.imageAtlasTexture=new s.T(i,_.image,n.RGBA,{useMipmap:c}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(i,this.glyphAtlasImage,n.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new s.T(i,this.lineAtlas.image,n.R8),this.lineAtlas.uploaded=!0)}prepare(i,n,_){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture,_),!n||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const c=n.style.getBrightness();(this._lastUpdatedBrightness||c)&&(this._lastUpdatedBrightness&&c&&Math.abs(this._lastUpdatedBrightness-c)<.001||(this._lastUpdatedBrightness=c,this.updateBuckets(void 0,n)))}queryRenderedFeatures(i,n,_,c,f,g,b,A){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:c,pixelPosMatrix:b,transform:g,params:f,tileTransform:this.tileTransform},i,n,_):{}}querySourceFeatures(i,n){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const c=_.loadVTLayers(),f=n?n.sourceLayer:"",g=c._geojsonTileLayer||c[f];if(!g)return;const b=s.aG(n&&n.filter),{z:A,x:E,y:O}=this.tileID.canonical,S={z:A,x:E,y:O};for(let L=0;L<g.length;L++){const w=g.feature(L);if(b.needGeometry){const k=s.aH(w,!0);if(!b.filter(new s.K(this.tileID.overscaledZ),k,this.tileID.canonical))continue}else if(!b.filter(new s.K(this.tileID.overscaledZ),w))continue;const U=_.getId(w,f),B=new s.aI(w,A,E,O,U);B.tile=S,i.push(B)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(const i in this.buckets)if(this.buckets[i].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const n=this.expirationTime;if(i.cacheControl){const _=s.aJ(i.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const _=Date.now();let c=!1;if(this.expirationTime>_)c=!1;else if(n)if(this.expirationTime<n)c=!0;else{const f=this.expirationTime-n;f?this.expirationTime=_+Math.max(f,3e4):c=!0}else c=!0;c?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,n){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(i).length!==0&&n&&this.updateBuckets(i,n)}updateBuckets(i,n){if(!this.latestFeatureIndex)return;const _=this.latestFeatureIndex.loadVTLayers(),c=n.style.listImages(),f=n.style.getBrightness();for(const g in this.buckets){if(!n.style.hasLayer(g))continue;const b=this.buckets[g],A=b.layers[0].sourceLayer||"_geojsonTileLayer",E=_[A];let O={};if(i&&(O=i[A],!E||!O||Object.keys(O).length===0))continue;if(b.update(O,E,c,this.imageAtlas&&this.imageAtlas.patternPositions||{},f),b instanceof s.aK||b instanceof s.aL){const L=n.style.getOwnSourceCache(b.layers[0].source);n._terrain&&n._terrain.enabled&&L&&b.programConfigurations.needsUpload&&n._terrain._clearRenderCacheForTile(L.id,this.tileID)}const S=n&&n.style&&n.style.getOwnLayer(g);S&&(this.queryPadding=Math.max(this.queryPadding,S.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.f.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=s.f.now()+i}setTexture(i,n){const _=n.context,c=_.gl;this.texture=this.texture||n.getTileTexture(i.width),this.texture&&this.texture instanceof s.T?this.texture.update(i,{useMipmap:!0}):(this.texture=new s.T(_,i,c.RGBA,{useMipmap:!0}),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE))}setDependencies(i,n){const _={};for(const c of n)_[c]=!0;this.dependencies[i]=_}hasDependency(i,n){for(const _ of i){const c=this.dependencies[_];if(c){for(const f of n)if(c[f])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,n){if(!n||n.name==="mercator"||this._tileDebugBuffer)return;const _=s.aM(vo,this.tileID.canonical,this.tileTransform)[0],c=new s.aN,f=new s.aO;for(let g=0;g<_.length;g++){const{x:b,y:A}=_[g];c.emplaceBack(b,A),f.emplaceBack(g)}f.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(f),this._tileDebugBuffer=i.createVertexBuffer(c,s.aP.members),this._tileDebugSegments=s.aB.simpleSegment(0,0,c.length,f.length)}_makeTileBoundsBuffers(i,n){if(this._tileBoundsBuffer||!n||n.name==="mercator")return;const _=s.aM(vo,this.tileID.canonical,this.tileTransform)[0];let c,f;if(this.isRaster){const g=function(b,A){const E=s.as(b,A),O=Math.pow(2,b.z);for(let k=0;k<ee;k++)for(let M=0;M<ee;M++){const H=s.at((b.x+(M+Va(M))/re)/O),q=s.au((b.y+(k+Va(k))/re)/O),V=A.project(H,q),$=k*ee+M;na[2*$+0]=Math.round((V.x*E.scale-E.x)*s.V),na[2*$+1]=Math.round((V.y*E.scale-E.y)*s.V)}Ie.fill(0),La.fill(0);for(let k=2045;k>=0;k--){const M=4*k,H=De[M+0],q=De[M+1],V=De[M+2],$=De[M+3],z=H+V>>1,Z=q+$>>1,at=z+Z-q,nt=Z+H-z,rt=q*ee+H,yt=$*ee+V,ut=Z*ee+z,It=Math.hypot((na[2*rt+0]+na[2*yt+0])/2-na[2*ut+0],(na[2*rt+1]+na[2*yt+1])/2-na[2*ut+1])>=16;Ie[ut]=Ie[ut]||(It?1:0),k<1022&&(Ie[ut]=Ie[ut]||Ie[(q+nt>>1)*ee+(H+at>>1)]||Ie[($+nt>>1)*ee+(V+at>>1)])}const S=new s.av,L=new s.aw;let w=0;function U(k,M){const H=M*ee+k;return La[H]===0&&(S.emplaceBack(na[2*H+0],na[2*H+1],k*s.V/re,M*s.V/re),La[H]=++w),La[H]-1}function B(k,M,H,q,V,$){const z=k+H>>1,Z=M+q>>1;if(Math.abs(k-V)+Math.abs(M-$)>1&&Ie[Z*ee+z])B(V,$,k,M,z,Z),B(H,q,V,$,z,Z);else{const at=U(k,M),nt=U(H,q),rt=U(V,$);L.emplaceBack(at,nt,rt)}}return B(0,0,re,re,re,0),B(re,re,0,0,0,re),{vertices:S,indices:L}}(this.tileID.canonical,n);c=g.vertices,f=g.indices}else{c=new s.av,f=new s.aw;for(const{x:b,y:A}of _)c.emplaceBack(b,A,0,0);const g=s.aQ(c.int16,void 0,4);for(let b=0;b<g.length;b+=3)f.emplaceBack(g[b],g[b+1],g[b+2])}this._tileBoundsBuffer=i.createVertexBuffer(c,s.aR.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(f),this._tileBoundsSegments=s.aB.simpleSegment(0,0,c.length,f.length)}_makeGlobeTileDebugBuffers(i,n){const _=n.projection;if(!_||_.name!=="globe"||n.freezeTileCoverage)return;const c=this.tileID.canonical,f=s.aS(c,n),g=s.aT(f),b=s.S(n.zoom);let A;b>0&&(A=s.a6.invert(new Float64Array(16),n.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,c,n,g,A,b),this._makeGlobeTileDebugTextBuffer(i,c,n,g,A,b)}_globePoint(i,n,_,c,f,g,b){let A=s.aU(i,n,_);if(g){const E=1<<_.z,O=s.a5(c.center.lng),S=s.ae(c.center.lat),L=(_.x+.5)/E-O;let w=0;L>.5?w=-1:L<-.5&&(w=1);let U=(i/s.V+_.x)/E+w,B=(n/s.V+_.y)/E;U=(U-O)*c._pixelsPerMercatorPixel+O,B=(B-S)*c._pixelsPerMercatorPixel+S;const k=[U*c.worldSize,B*c.worldSize,0];s.N.transformMat4(k,k,g),A=s.aV(A,k,b)}return s.N.transformMat4(A,A,f)}_makeGlobeTileDebugBorderBuffer(i,n,_,c,f,g){const b=new s.aN,A=new s.aO,E=new s.aW,O=(L,w,U,B,k)=>{const M=(U-L)/(k-1),H=(B-w)/(k-1),q=b.length;for(let V=0;V<k;V++){const $=L+V*M,z=w+V*H;b.emplaceBack($,z);const Z=this._globePoint($,z,n,_,c,f,g);E.emplaceBack(Z[0],Z[1],Z[2]),A.emplaceBack(q+V)}},S=s.V;O(0,0,S,0,16),O(S,0,S,S,16),O(S,S,0,S,16),O(0,S,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(A),this._tileDebugBuffer=i.createVertexBuffer(b,s.aP.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(E,s.aX.members),this._tileDebugSegments=s.aB.simpleSegment(0,0,b.length,A.length)}_makeGlobeTileDebugTextBuffer(i,n,_,c,f,g){const b=s.V/4,A=new s.aN,E=new s.aw,O=new s.aW,S=25;E.reserve(32),A.reserve(S),O.reserve(S);const L=(w,U)=>S*w+U;for(let w=0;w<S;w++){const U=w*b;for(let B=0;B<S;B++){const k=B*b;A.emplaceBack(k,U);const M=this._globePoint(k,U,n,_,c,f,g);O.emplaceBack(M[0],M[1],M[2])}}for(let w=0;w<4;w++)for(let U=0;U<4;U++){const B=L(w,U),k=L(w,U+1),M=L(w+1,U),H=L(w+1,U+1);E.emplaceBack(B,k,M),E.emplaceBack(M,k,H)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(E),this._tileDebugTextBuffer=i.createVertexBuffer(A,s.aP.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(O,s.aX.members),this._tileDebugTextSegments=s.aB.simpleSegment(0,0,S,32)}destroy(i=!1){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!i&&this.texture&&this.texture instanceof s.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}const an={vector:ie,raster:ne,"raster-dem":class extends ne{constructor(d,i,n,_){super(d,i,n,_),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(d,i){const n=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(c,f){c&&(d.state="errored",i(c)),f&&(d.dem=f,d.dem.onDeserialize(),d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0,d.state="loaded",i(null))}d.request=s.d(this.map._requestManager.transformRequest(n,s.R.Tile),(function(c,f,g,b){if(delete d.request,d.aborted)d.state="unloaded",i(null);else if(c)d.state="errored",i(c);else if(f){this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:g,expires:b});const A=ImageBitmap&&f instanceof ImageBitmap&&s.ak(),E=1-(f.width-s.al(f.width))/2;E<1||d.neighboringTiles||(d.neighboringTiles=this._getNeighboringTiles(d.tileID));const O=A?f:s.f.getImageData(f,E),S={uid:d.uid,coord:d.tileID,source:this.id,scope:this.scope,rawImageData:O,encoding:this.encoding,padding:E};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",S,_.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(d){const i=d.canonical,n=Math.pow(2,i.z),_=(i.x-1+n)%n,c=i.x===0?d.wrap-1:d.wrap,f=(i.x+1+n)%n,g=i.x+1===n?d.wrap+1:d.wrap,b={};return b[new s.am(d.overscaledZ,c,i.z,_,i.y).key]={backfilled:!1},b[new s.am(d.overscaledZ,g,i.z,f,i.y).key]={backfilled:!1},i.y>0&&(b[new s.am(d.overscaledZ,c,i.z,_,i.y-1).key]={backfilled:!1},b[new s.am(d.overscaledZ,d.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},b[new s.am(d.overscaledZ,g,i.z,f,i.y-1).key]={backfilled:!1}),i.y+1<n&&(b[new s.am(d.overscaledZ,c,i.z,_,i.y+1).key]={backfilled:!1},b[new s.am(d.overscaledZ,d.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},b[new s.am(d.overscaledZ,g,i.z,f,i.y+1).key]={backfilled:!1}),b}},"raster-array":Jt,geojson:class extends s.E{constructor(d,i,n,_){super(),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(_),this._data=i.data,this._options=s.e({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const c=s.V/this.tileSize;this.workerOptions=s.e({source:this.id,scope:this.scope,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*c,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*c,extent:s.V,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.V,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*c,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(d){this.map=d,this.setData(this._data)}setData(d){return this._data=d,this._updateWorkerData(),this}getClusterExpansionZoom(d,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id,scope:this.scope},i),this}getClusterChildren(d,i){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id,scope:this.scope},i),this}getClusterLeaves(d,i,n,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:d,limit:i,offset:n},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.b("dataloading",{dataType:"source"})),this._loaded=!1;const d=s.e({},this.workerOptions);d.scope=this.scope;const i=this._data;typeof i=="string"?(d.request=this.map._requestManager.transformRequest(s.f.resolveURL(i),s.R.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,d,(n,_)=>{if(this._loaded=!0,this._pendingLoad=null,n)this.fire(new s.a(n));else{const c={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(c.resourceTiming=_.resourceTiming[this.id]),this.fire(new s.b("data",c)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(d,i){const n=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const _={type:this.type,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:s.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};d.request=this.actor.send(n,_,(c,f)=>(delete d.request,d.destroy(),d.aborted?i(null):c?i(c):(d.loadVectorData(f,this.map.painter,n==="reloadTile"),i(null))),void 0,n==="loadTile")}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id,scope:this.scope}),d.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends s.ap{constructor(d,i,n,_){super(d,i,n,_),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const d=this.options;this.urls=[];for(const i of d.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.R.Source).url);s.aq(this.urls,(i,n)=>{this._loaded=!0,i?this.fire(new s.a(i)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const i=this.video.seekable;d<i.start(0)||d>i.end(0)?this.fire(new s.a(new oe(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const d=this.map.painter.context,i=d.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(d,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(d)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:s.ap,model:class extends s.E{constructor(d,i,n,_){super(),this.id=d,this.type="model",this.models=[],this._loaded=!1,this._options=i}load(){const d=[];for(const i in this._options.models){const n=this._options.models[i],_=s.l(this.map._requestManager.transformRequest(n.uri,s.R.Model).url).then(c=>{if(!c)return;const f=s.c(c),g=new s.M(i,n.position,n.orientation,f);g.computeBoundsAndApplyParent(),this.models.push(g)}).catch(c=>{this.fire(new s.a(new Error(`Could not load model ${i} from ${n.uri}: ${c.message}`)))});d.push(_)}return Promise.allSettled(d).then(()=>{this._loaded=!0,this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(i=>{this.fire(new s.a(new Error(`Could not load models: ${i.message}`)))})}onAdd(d){this.map=d,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(d,i){}serialize(){return{type:"model"}}},"batched-model":class extends s.E{constructor(d,i,n,_){super(),this.type="batched-model",this.id=d,this.tileSize=512,this._options=i,this.tiles=this._options.tiles,this.maxzoom=i.maxzoom||19,this.minzoom=i.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=n,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(_)}onAdd(d){this.map=d,this.load()}load(d){this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,n=this.map._worldview;this._tileJSONRequest=te(this._options,this.map._requestManager,i,n,(_,c)=>{this._tileJSONRequest=null,this._loaded=!0,_?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),n&&n.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${n}`),this.fire(new s.a(_))):c&&(s.e(this,c),c.bounds&&(this.tileBounds=new $t(c.bounds,this.minzoom,this.maxzoom)),s.aj(c.tiles,this.map._requestManager._customAccessToken),this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))),d&&d(_)})}hasTransition(){return!1}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loaded(){return this._loaded}loadTile(d,i){const n=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(n,s.R.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:d.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(d.actor&&d.state!=="expired")if(d.state==="loading")d.reloadCallback=i;else{if(d.buckets){const f=Object.values(d.buckets);for(const g of f)g.dirty=!0;return void(d.state="loaded")}d.request=d.actor.send("reloadTile",_,c.bind(this))}else d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",_,c.bind(this),void 0,!0);function c(f,g){return d.aborted?i(null):f&&f.status!==404?i(f):(g&&(g.resourceTiming&&(d.resourceTiming=g.resourceTiming),this.map._refreshExpiredTiles&&d.setExpiryData(g),d.buckets={...d.buckets,...g.buckets},g.featureIndex&&(d.latestFeatureIndex=g.featureIndex)),d.state="loaded",void i(null))}}serialize(){return s.e({},this._options)}},canvas:class extends s.ap{constructor(d,i,n,_){super(d,i,n,_),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(c=>!Array.isArray(c)||c.length!==2||c.some(f=>typeof f!="number"))||this.fire(new s.a(new oe(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.a(new oe(`sources.${d}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.a(new oe(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof HTMLCanvasElement||this.fire(new s.a(new oe(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.a(new oe(`sources.${d}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.a(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let d=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,d=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,d=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?!d&&!this._playing||this.texture instanceof s.ar||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}},custom:class extends s.E{constructor(d,i,n,_){super(),this.id=d,this.type="custom",this._dataType="raster",this._dispatcher=n,this._implementation=i,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.a(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.a(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new $t(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),s.e(this,s.ac(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.ac(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(d){this._map=d,this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(d),this.load()}onRemove(d){this._implementation.onRemove&&this._implementation.onRemove(d)}hasTile(d){if(this._implementation.hasTile){const{x:i,y:n,z:_}=d.canonical;return this._implementation.hasTile({x:i,y:n,z:_})}return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,i){const{x:n,y:_,z:c}=d.tileID.canonical,f=new AbortController;d.request=Promise.resolve(this._implementation.loadTile({x:n,y:_,z:c},{signal:f.signal})).then((function(g){return delete d.request,d.aborted?(d.state="unloaded",i(null)):g===void 0?(d.state="errored",i(null)):g===null?(this.loadTileData(d,{width:this.tileSize,height:this.tileSize,data:null}),d.state="loaded",i(null)):function(b){return b instanceof ImageData||b instanceof HTMLCanvasElement||b instanceof ImageBitmap||b instanceof HTMLImageElement}(g)?(this.loadTileData(d,g),d.state="loaded",void i(null)):(d.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(g=>{g.code!==20&&(d.state="errored",i(g))}),d.request.cancel=()=>f.abort()}loadTileData(d,i){d.setTexture(i,this._map.painter)}unloadTile(d,i){if(d.texture&&d.texture instanceof s.T?(d.destroy(!0),d.texture&&d.texture instanceof s.T&&this._map.painter.saveTileTexture(d.texture)):d.destroy(),this._implementation.unloadTile){const{x:n,y:_,z:c}=d.tileID.canonical;this._implementation.unloadTile({x:n,y:_,z:c})}i()}abortTile(d,i){d.request&&d.request.cancel&&(d.request.cancel(),delete d.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(d=>({x:d.canonical.x,y:d.canonical.y,z:d.canonical.z}))}_clearTiles(){const d=s.ag(this.id,this.scope);this._map.style.clearSource(d)}_update(){this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))}}},gi=function(d,i,n,_){const c=new an[i.type](d,i,n,_);if(c.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${c.id}`);return s.aY(["load","abort","unload","serialize","prepare"],c),c};function zd(d,i){const n=s.a6.identity([]);return s.a6.scale(n,n,[.5*d.width,.5*-d.height,1]),s.a6.translate(n,n,[1,-1,0]),s.a6.multiply(n,n,d.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(n)}function Hd(d,i,n,_,c,f,g,b=!1){const A=d.tilesIn(_,g,b);A.sort(Ps);const E=[];for(const S of A)E.push({wrappedTileID:S.tile.tileID.wrapped().key,queryResults:S.tile.queryRenderedFeatures(i,n,d._state,S,c,f,zd(d.transform,S.tile.tileID),b)});const O=function(S){const L={},w={};for(const U of S){const B=U.queryResults,k=U.wrappedTileID,M=w[k]=w[k]||{};for(const H in B){const q=B[H],V=M[H]=M[H]||{},$=L[H]=L[H]||[];for(const z of q)V[z.featureIndex]||(V[z.featureIndex]=!0,$.push(z))}}return L}(E);for(const S in O)O[S].forEach(L=>{const w=L.feature,U=w.layer;U&&U.type!=="background"&&U.type!=="sky"&&U.type!=="slot"&&(w.source=U.source,U["source-layer"]&&(w.sourceLayer=U["source-layer"]),w.state=w.id!==void 0?d.getFeatureState(U["source-layer"],w.id):{})});return O}function on(d,i){const n=d.getRenderableIds().map(f=>d.getTileByID(f)),_=[],c={};for(let f=0;f<n.length;f++){const g=n[f],b=g.tileID.canonical.key;c[b]||(c[b]=!0,g.querySourceFeatures(_,i))}return _}function Ps(d,i){const n=d.tileID,_=i.tileID;return n.overscaledZ-_.overscaledZ||n.canonical.y-_.canonical.y||n.wrap-_.wrap||n.canonical.x-_.canonical.x}class is extends Cn{constructor(i,n,_,c,f){super(i,n,_,c,f),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(i,n){const _=n.context,c=_.gl;this.texture=this.texture||n.getTileTexture(i.width),this.texture&&this.texture instanceof s.T?this.texture.update(i,{useMipmap:!1,premultiply:!1}):this.texture=new s.T(_,i,c.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(i=16384,n){const _=this._mrt=new s.aZ(30),c=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(i-1)}});return this.entireBuffer=null,this.request=s.a_(c,(f,g,b,A)=>{if(f)n(f);else try{const E=_.getHeaderLength(g);if(E>i)return void(this.request=this.fetchHeader(E,n));_.parseHeader(g),this._isHeaderLoaded=!0;let O=0;for(const S of Object.values(_.layers))O=Math.max(O,S.dataIndex[S.dataIndex.length-1].last_byte);g.byteLength>=O&&(this.entireBuffer=g),n(null,this.entireBuffer||g,b,A)}catch(E){n(E)}}),this.request}fetchBand(i,n,_){const c=this._mrt;if(!this._isHeaderLoaded||!c)return void _(new Error("Tile header is not ready"));const f=this.actor;if(!f)return void _(new Error("Can't fetch tile band without an actor"));let g;const b=(S,L)=>{g.complete(S,L),S?_(S):(this.updateTextureDescriptor(i,n),_(null,this.textureDescriptor&&this.textureDescriptor.img))},A=(S,L)=>{if(S)return _(S);const w=f.send("decodeRasterArray",{buffer:L,task:g},b,void 0,!0);this._workQueue.push(()=>{w&&w.cancel(),g.cancel()})},E=c.getLayer(i);if(!E)return void _(new Error(`Unknown sourceLayer "${i}"`));if(E.hasDataForBand(n))return this.updateTextureDescriptor(i,n),void _(null,this.textureDescriptor?this.textureDescriptor.img:null);const O=E.getDataRange([n]);if(g=c.createDecodingTask(O),!g||g.tasks.length)if(this.flushQueues(),this.entireBuffer)A(null,this.entireBuffer.slice(O.firstByte,O.lastByte+1));else{const S=Object.assign({},this.requestParams,{headers:{Range:`bytes=${O.firstByte}-${O.lastByte}`}}),L=s.a_(S,A);this._fetchQueue.push(()=>{L.cancel(),g.cancel()})}else _(null)}updateNeeded(i,n){return(!this.textureDescriptor||this.textureDescriptor.band!==n||this.textureDescriptor.layer!==i)&&this.state!=="errored"}updateTextureDescriptor(i,n){if(!this._mrt)return;const _=this._mrt.getLayer(i);if(!_||!_.hasBand(n)||!_.hasDataForBand(n))return;const{bytes:c,tileSize:f,buffer:g,offset:b,scale:A}=_.getBandView(n),E=f+2*g,O={data:c,width:E,height:E},S=this.texture;S&&S instanceof s.T&&S.update(O,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:i,band:n,img:O,buffer:g,offset:b,tileSize:f,format:_.pixelFormat,mix:[A,256*A,65536*A,16777216*A]}}}class ws{constructor(i,n){this.max=i,this.onRemove=n,this.reset()}reset(){for(const i in this.data)for(const n of this.data[i])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(i,n,_){const c=i.wrapped().key;this.data[c]===void 0&&(this.data[c]=[]);const f={value:n,timeout:void 0};if(_!==void 0&&(f.timeout=setTimeout(()=>{this.remove(i,f)},_)),this.data[c].push(f),this.order.push(c),this.order.length>this.max){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const n=this.data[i].shift();return n.timeout&&clearTimeout(n.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),n.value}getByKey(i){const n=this.data[i];return n?n[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,n){if(!this.has(i))return this;const _=i.wrapped().key,c=n===void 0?0:this.data[_].indexOf(n),f=this.data[_][c];return this.data[_].splice(c,1),f.timeout&&clearTimeout(f.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(f.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(i){const n=[];for(const _ in this.data)for(const c of this.data[_])i(c.value)||n.push(c);for(const _ of n)this.remove(_.value.tileID,_)}}class Mo extends s.E{constructor(i,n,_){super(),this.id=i,this._onlySymbols=_,n.on("data",c=>{c.dataType==="source"&&c.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&c.dataType==="source"&&c.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),n.on("error",()=>{this._sourceErrored=!0}),this._source=n,this._tiles={},this._cache=new ws(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=n.minTileCacheSize,this._maxTileCacheSize=n.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Oe,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const n=this._tiles[i];if(n.state!=="errored"&&(n.state!=="loaded"||!n.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,n){return i.isSymbolTile=this._onlySymbols,i.isExtraShadowCaster=this._shadowCasterTiles[i.tileID.key],this._source.loadTile(i,n)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const n in this._tiles){const _=this._tiles[n];_.upload(i),_.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return s.a$(this._tiles).map(i=>i.tileID).sort(vr).map(i=>i.key)}getRenderableIds(i,n){const _=[];for(const c in this._tiles)this._isIdRenderable(+c,i,n)&&_.push(this._tiles[c]);return i?_.sort((c,f)=>{const g=c.tileID,b=f.tileID,A=new s.P(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),E=new s.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-b.overscaledZ||E.y-A.y||E.x-A.x}).map(c=>c.tileID.key):_.map(c=>c.tileID).sort(vr).map(c=>c.key)}hasRenderableParent(i){const n=this.findLoadedParent(i,0);return!!n&&this._isIdRenderable(n.tileID.key)}_isIdRenderable(i,n,_){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(n||!this._tiles[i].holdingForFade())&&(_||!this._shadowCasterTiles[i])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,n){const _=this._tiles[i];_&&(_.state!=="loading"&&(_.state=n),this._loadTile(_,this._tileLoaded.bind(this,_,i,n)))}_tileLoaded(i,n,_,c){if(c)if(i.state="errored",c.status!==404)this._source.fire(new s.a(c,{tile:i}));else{if(!(i.tileID.key in this._loadedParentTiles))return void this._source.fire(new s.b("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const f=this.map.painter.terrain;this.update(this.transform,f.getScaledDemTileSize(),!0),f.resetTileLookupCache(this.id)}else this.update(this.transform)}else i.timeAdded=s.f.now(),_==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(n,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new s.b("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const n=this.getRenderableIds();for(let c=0;c<n.length;c++){const f=n[c];if(i.neighboringTiles&&i.neighboringTiles[f]){const g=this.getTileByID(f);_(i,g),_(g,i)}}function _(c,f){if(!c.dem||c.dem.borderReady)return;c.needsHillshadePrepare=!0,c.needsDEMTextureUpload=!0;let g=f.tileID.canonical.x-c.tileID.canonical.x;const b=f.tileID.canonical.y-c.tileID.canonical.y,A=Math.pow(2,c.tileID.canonical.z),E=f.tileID.key;g===0&&b===0||Math.abs(b)>1||(Math.abs(g)>1&&(Math.abs(g+A)===1?g+=A:Math.abs(g-A)===1&&(g-=A)),f.dem&&c.dem&&(c.dem.backfillBorder(f.dem,g,b),c.neighboringTiles&&c.neighboringTiles[E]&&(c.neighboringTiles[E].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,n,_,c){for(const f in this._tiles){let g=this._tiles[f];if(c[f]||!g.hasData()||g.tileID.overscaledZ<=n||g.tileID.overscaledZ>_)continue;let b=g.tileID;for(;g&&g.tileID.overscaledZ>n+1;){const E=g.tileID.scaledTo(g.tileID.overscaledZ-1);g=this._tiles[E.key],g&&g.hasData()&&(b=E)}let A=b;for(;A.overscaledZ>n;)if(A=A.scaledTo(A.overscaledZ-1),i[A.key]){c[b.key]=b;break}}}findLoadedParent(i,n){if(i.key in this._loadedParentTiles){const _=this._loadedParentTiles[i.key];return _&&_.tileID.overscaledZ>=n?_:null}for(let _=i.overscaledZ-1;_>=n;_--){const c=i.scaledTo(_),f=this._getLoadedTile(c);if(f)return f}}_getLoadedTile(i){const n=this._tiles[i.key];return n&&n.hasData()?n:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,n){n=n||this._source.tileSize;const _=Math.ceil(i.width/n)+1,c=Math.ceil(i.height/n)+1,f=Math.floor(_*c*5),g=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,f):f,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(b)}handleWrapJump(i){const n=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,n){const _={};for(const c in this._tiles){const f=this._tiles[c];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+n),_[f.tileID.key]=f}this._tiles=_;for(const c in this._timers)clearTimeout(this._timers[c]),delete this._timers[c];for(const c in this._tiles)this._setTileReloadTimer(+c,this._tiles[c])}}update(i,n,_,c){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!_)return;let f;if(this.updateCacheSize(i,n),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain)if(this._source.tileID)f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(A=>new s.am(A.canonical.z,A.wrap,A.canonical.z,A.canonical.x,A.canonical.y));else if(this.tileCoverLift!==0){const A=i.clone();A.tileCoverLift=this.tileCoverLift,f=A.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!_,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.minzoom<=1&&i.projection.name==="globe"&&(f.push(new s.am(1,0,1,0,0)),f.push(new s.am(1,0,1,1,0)),f.push(new s.am(1,0,1,0,1)),f.push(new s.am(1,0,1,1,1)))}else f=i.coveringTiles({tileSize:n||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!_,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(A=>this._source.hasTile(A)));else f=[];if(f.length>0&&this.castsShadows&&c&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!nn(this._source.type)){const A=i.coveringZoomLevel({tileSize:n||this._source.tileSize,roundZoom:this._source.roundZoom&&!_}),E=Math.min(A,this._source.maxzoom),O=i.extendTileCoverForShadows(f,c,E);for(const S of O)this._shadowCasterTiles[S.key]=!0,f.push(S)}const g=this._updateRetainedTiles(f);if(nn(this._source.type)&&f.length!==0){const A={},E={},O=Object.keys(g);for(const L of O){const w=g[L],U=this._tiles[L];if(!U||U.fadeEndTime&&U.fadeEndTime<=s.f.now())continue;const B=this.findLoadedParent(w,Math.max(w.overscaledZ-Mo.maxOverzooming,this._source.minzoom));B&&(this._addTile(B.tileID),A[B.tileID.key]=B.tileID),E[L]=w}const S=f[f.length-1].overscaledZ;for(const L in this._tiles){const w=this._tiles[L];if(g[L]||!w.hasData())continue;let U=w.tileID;for(;U.overscaledZ>S;){U=U.scaledTo(U.overscaledZ-1);const B=this._tiles[U.key];if(B&&B.hasData()&&E[U.key]){g[L]=w.tileID;break}}}for(const L in A)g[L]||(this._coveredTiles[L]=!0,g[L]=A[L])}for(const A in g)this._tiles[A].clearFadeHold();const b=s.b0(this._tiles,g);for(const A of b){const E=this._tiles[A];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+A)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const n={};if(i.length===0)return n;const _={},c=i.reduce((E,O)=>Math.min(E,O.overscaledZ),1/0),f=i[0].overscaledZ,g=Math.max(f-Mo.maxOverzooming,this._source.minzoom),b=Math.max(f+Mo.maxUnderzooming,this._source.minzoom),A={};for(const E of i){const O=this._addTile(E);n[E.key]=E,O.hasData()||c<this._source.maxzoom&&(A[E.key]=E)}this._retainLoadedChildren(A,c,b,n);for(const E of i){let O=this._tiles[E.key];if(O.hasData())continue;if(E.canonical.z>=this._source.maxzoom){const L=E.children(this._source.maxzoom)[0],w=this.getTile(L);if(w&&w.hasData()){n[L.key]=L;continue}}else{const L=E.children(this._source.maxzoom);if(n[L[0].key]&&n[L[1].key]&&n[L[2].key]&&n[L[3].key])continue}let S=O.wasRequested();for(let L=E.overscaledZ-1;L>=g;--L){const w=E.scaledTo(L);if(_[w.key]||(_[w.key]=!0,O=this.getTile(w),!O&&S&&(O=this._addTile(w)),O&&(n[w.key]=w,S=O.wasRequested(),O.hasData())))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const n=[];let _,c=this._tiles[i].tileID;for(;c.overscaledZ>0;){if(c.key in this._loadedParentTiles){_=this._loadedParentTiles[c.key];break}n.push(c.key);const f=c.scaledTo(c.overscaledZ-1);if(_=this._getLoadedTile(f),_)break;c=f}for(const f of n)this._loadedParentTiles[f]=_}}_addTile(i){let n=this._tiles[i.key];if(n)return n.isExtraShadowCaster!==!0||this._shadowCasterTiles[i.key]||this._reloadTile(i.key,"reloading"),n;n=this._cache.getAndRemove(i),n&&(this._setTileReloadTimer(i.key,n),n.tileID=i,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,n)));const _=!!n;if(!_){const c=this.map?this.map.painter:null,f=this._source.tileSize*i.overscaleFactor();n=this._source.type==="raster-array"?new is(i,f,this.transform.tileZoom,c,this._isRaster):new Cn(i,f,this.transform.tileZoom,c,this._isRaster),this._loadTile(n,this._tileLoaded.bind(this,n,i.key,n.state))}return n?(n.uses++,this._tiles[i.key]=n,_||this._source.fire(new s.b("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null}_setTileReloadTimer(i,n){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const _=n.getExpiryTimeout();_&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},_))}_removeTile(i){const n=this._tiles[i];n&&(n.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),n.uses>0||(n.hasData()&&n.state!=="reloading"||n.state==="empty"?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,n,_){const c=[],f=this.transform;if(!f)return c;const g=f.projection.name==="globe",b=s.a5(f.center.lng);for(const A in this._tiles){const E=this._tiles[A];if(_&&E.clearQueryDebugViz(),E.holdingForFade())continue;let O;if(g){const S=E.tileID.canonical;if(S.z===0){const L=[Math.abs(s.aa(b,...Tl(S,-1))-b),Math.abs(s.aa(b,...Tl(S,1))-b)];O=[0,2*L.indexOf(Math.min(...L))-1]}else{const L=[Math.abs(s.aa(b,...Tl(S,-1))-b),Math.abs(s.aa(b,...Tl(S,0))-b),Math.abs(s.aa(b,...Tl(S,1))-b)];O=[L.indexOf(Math.min(...L))-1]}}else O=[0];for(const S of O){const L=i.containsTile(E,f,n,S);L&&c.push(L)}}return c}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(i){return this._getRenderableCoordinates(i)}_getRenderableCoordinates(i,n){const _=this.getRenderableIds(i,n).map(f=>this._tiles[f].tileID),c=this.transform.projection.name==="globe";for(const f of _)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped()),f.expandedProjMatrix=c?this.transform.calculateProjMatrix(f.toUnwrapped(),!1,!0):f.projMatrix;return _}sortCoordinatesByDistance(i){const n=i.slice(),_=this.transform._camera.position,c=this.transform._camera.forward(),f={};for(const g of n){const b=1/(1<<g.canonical.z);f[g.key]=((g.canonical.x+.5)*b+g.wrap-_[0])*c[0]+((g.canonical.y+.5)*b-_[1])*c[1]-_[2]*c[2]}return n.sort((g,b)=>f[g.key]-f[b.key]),n}hasTransition(){if(this._source.hasTransition())return!0;if(nn(this._source.type))for(const i in this._tiles){const n=this._tiles[i];if(n.fadeEndTime!==void 0&&n.fadeEndTime>=s.f.now())return!0}return!1}setFeatureState(i,n,_){this._state.updateState(i=i||"_geojsonTileLayer",n,_)}removeFeatureState(i,n,_){this._state.removeFeatureState(i=i||"_geojsonTileLayer",n,_)}getFeatureState(i,n){return this._state.getState(i=i||"_geojsonTileLayer",n)}setDependencies(i,n,_){const c=this._tiles[i];c&&c.setDependencies(n,_)}reloadTilesForDependencies(i,n){for(const _ in this._tiles)this._tiles[_].hasDependency(i,n)&&this._reloadTile(+_,"reloading");this._cache.filter(_=>!_.hasDependency(i,n))}_preloadTiles(i,n){if(!this._sourceLoaded){const A=()=>{this._sourceLoaded&&(this._source.off("data",A),this._preloadTiles(i,n))};return void this._source.on("data",A)}const _=new Map,c=Array.isArray(i)?i:[i],f=this.map.painter.terrain,g=this.usedForTerrain&&f?f.getScaledDemTileSize():this._source.tileSize;for(const A of c){const E=A.coveringTiles({tileSize:g,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const O of E)_.set(O.key,O);this.usedForTerrain&&A.updateElevation(!1)}const b=Array.from(_.values());s.b1(b,(A,E)=>{const O=new Cn(A,this._source.tileSize*A.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(O,S=>{this._source.type==="raster-dem"&&O.dem&&this._backfillDEM(O),E(S,O)})},n)}}function vr(d,i){const n=Math.abs(2*d.wrap)-+(d.wrap<0),_=Math.abs(2*i.wrap)-+(i.wrap<0);return d.overscaledZ-i.overscaledZ||_-n||i.canonical.y-d.canonical.y||i.canonical.x-d.canonical.x}function nn(d){return d==="raster"||d==="image"||d==="video"||d==="custom"}function Tl(d,i){const n=1<<d.z;return[d.x/n+i,(d.x+1)/n+i]}Mo.maxOverzooming=10,Mo.maxUnderzooming=3;class ju{constructor(i){this.style=i,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const i=!1,n=!1;for(const _ in this.style._mergedLayers){const c=this.style._mergedLayers[_];if(c.type==="fill-extrusion")this.layers.push({layer:c,visible:i,visibilityChanged:n});else if(c.type==="model"){const f=this.style.getLayerSource(c);f&&f.type==="batched-model"&&this.layers.push({layer:c,visible:i,visibilityChanged:n})}}}onNewFrame(i){this.layersGotHidden=!1;for(const n of this.layers){const _=n.layer;let c=!1;_.type==="fill-extrusion"?c=!_.isHidden(i)&&_.paint.get("fill-extrusion-opacity")>0:_.type==="model"&&(c=!_.isHidden(i)&&_.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!c&&n.visible,n.visible=c}}updateZOffset(i,n){this.currentBuildingBuckets=[];for(const c of this.layers){const f=c.layer,g=this.style.getLayerSourceCache(f);let b=1;f.type==="fill-extrusion"&&(b=c.visible?f.paint.get("fill-extrusion-vertical-scale"):0);let A=g?g.getTile(n):null;if(!A&&g&&n.canonical.z>g.getSource().minzoom){let E=n.scaledTo(Math.min(g.getSource().maxzoom,n.overscaledZ-1));for(;E.overscaledZ>=g.getSource().minzoom&&(A=g.getTile(E),!A&&E.overscaledZ!==0);)E=E.scaledTo(E.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:A?A.getBucket(f):null,tileID:A?A.tileID:n,verticalScale:b})}i.hasAnyZOffset=!1;let _=!1;for(let c=0;c<i.symbolInstances.length;c++){const f=i.symbolInstances.get(c),g=f.zOffset,b=this._getHeightAtTileOffset(n,f.tileAnchorX,f.tileAnchorY);f.zOffset=b!==Number.NEGATIVE_INFINITY?b:g,_||g===f.zOffset||(_=!0),i.hasAnyZOffset||f.zOffset===0||(i.hasAnyZOffset=!0)}_&&(i.zOffsetBuffersNeedUpload=!0,i.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(i,n,_,c){let f=n,g=_;if(i.canonical.z!==c.canonical.z){const b=c.canonical,A=1/(1<<i.canonical.z-b.z);f=(n+i.canonical.x*s.V)*A-b.x*s.V|0,g=(_+i.canonical.y*s.V)*A-b.y*s.V|0}return{tileX:f,tileY:g}}_getHeightAtTileOffset(i,n,_){let c,f;for(let g=0;g<this.layers.length;++g){if(this.layers[g].layer.type!=="fill-extrusion")continue;const{bucket:b,tileID:A,verticalScale:E}=this.currentBuildingBuckets[g];if(!b)continue;const{tileX:O,tileY:S}=this._mapCoordToOverlappingTile(i,n,_,A),L=b.getHeightAtTileCoord(O,S);L&&L.height!==void 0&&(L.hidden?c=L.height:f=Math.max(L.height*E,f||0))}if(f!==void 0)return f;for(let g=0;g<this.layers.length;++g){const b=this.layers[g];if(b.layer.type!=="model"||!b.visible)continue;const{bucket:A,tileID:E}=this.currentBuildingBuckets[g];if(!A)continue;const{tileX:O,tileY:S}=this._mapCoordToOverlappingTile(i,n,_,E),L=A.getHeightAtTileCoord(O,S);if(L&&!L.hidden)return L.height===void 0&&c!==void 0?Math.min(L.maxHeight,c)*L.verticalScale:(L.height||0)*L.verticalScale}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function os(d,i){const n={};for(const _ in d)_!=="ref"&&(n[_]=d[_]);return s.b2.forEach(_=>{_ in i&&(n[_]=i[_])}),n}function qu(d){d=d.slice();const i=Object.create(null);for(let n=0;n<d.length;n++)i[d[n].id]=d[n];for(let n=0;n<d.length;n++)"ref"in d[n]&&(d[n]=os(d[n],i[d[n].ref]));return d}const ra={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function xl(d,i,n){n.push({command:ra.addSource,args:[d,i[d]]})}function Yd(d,i,n){i.push({command:ra.removeSource,args:[d]}),n[d]=!0}function uf(d,i,n,_){Yd(d,n,_),xl(d,i,n)}function cf(d,i,n){let _;for(_ in d[n])if(d[n].hasOwnProperty(_)&&_!=="data"&&!ot(d[n][_],i[n][_]))return!1;for(_ in i[n])if(i[n].hasOwnProperty(_)&&_!=="data"&&!ot(d[n][_],i[n][_]))return!1;return!0}function Sn(d,i,n,_,c,f){let g;for(g in i=i||{},d=d||{})d.hasOwnProperty(g)&&(ot(d[g],i[g])||n.push({command:f,args:[_,g,i[g],c]}));for(g in i)i.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&(ot(d[g],i[g])||n.push({command:f,args:[_,g,i[g],c]}))}function Rn(d){return d.id}function Er(d,i){return d[i.id]=i,d}class Ws{constructor(i,n){this.reset(i,n)}reset(i,n){this.points=i||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.aa(i,0,1);let n=1,_=this._distances[n];const c=i*this.paddedLength+this.padding;for(;_<c&&n<this._distances.length;)_=this._distances[++n];const f=n-1,g=this._distances[f],b=_-g,A=b>0?(c-g)/b:0;return this.points[f].mult(1-A).add(this.points[n].mult(A))}}class Gd{constructor(i,n,_){const c=this.boxCells=[],f=this.circleCells=[];this.xCellCount=Math.ceil(i/_),this.yCellCount=Math.ceil(n/_);for(let g=0;g<this.xCellCount*this.yCellCount;g++)c.push([]),f.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=n,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,n,_,c,f){this._forEachCell(n,_,c,f,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(n),this.bboxes.push(_),this.bboxes.push(c),this.bboxes.push(f)}insertCircle(i,n,_,c){this._forEachCell(n-c,_-c,n+c,_+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(n),this.circles.push(_),this.circles.push(c)}_insertBoxCell(i,n,_,c,f,g){this.boxCells[f].push(g)}_insertCircleCell(i,n,_,c,f,g){this.circleCells[f].push(g)}_query(i,n,_,c,f,g){if(_<0||i>this.width||c<0||n>this.height)return!f&&[];const b=[];if(i<=0&&n<=0&&this.width<=_&&this.height<=c){if(f)return!0;for(let A=0;A<this.boxKeys.length;A++)b.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const E=this.circles[3*A],O=this.circles[3*A+1],S=this.circles[3*A+2];b.push({key:this.circleKeys[A],x1:E-S,y1:O-S,x2:E+S,y2:O+S})}return g?b.filter(g):b}return this._forEachCell(i,n,_,c,this._queryCell,b,{hitTest:f,seenUids:{box:{},circle:{}}},g),f?b.length>0:b}_queryCircle(i,n,_,c,f){const g=i-_,b=i+_,A=n-_,E=n+_;if(b<0||g>this.width||E<0||A>this.height)return!c&&[];const O=[];return this._forEachCell(g,A,b,E,this._queryCellCircle,O,{hitTest:c,circle:{x:i,y:n,radius:_},seenUids:{box:{},circle:{}}},f),c?O.length>0:O}query(i,n,_,c,f){return this._query(i,n,_,c,!1,f)}hitTest(i,n,_,c,f){return this._query(i,n,_,c,!0,f)}hitTestCircle(i,n,_,c){return this._queryCircle(i,n,_,!0,c)}_queryCell(i,n,_,c,f,g,b,A){const E=b.seenUids,O=this.boxCells[f];if(O!==null){const L=this.bboxes;for(const w of O)if(!E.box[w]){E.box[w]=!0;const U=4*w;if(i<=L[U+2]&&n<=L[U+3]&&_>=L[U+0]&&c>=L[U+1]&&(!A||A(this.boxKeys[w]))){if(b.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[w],x1:L[U],y1:L[U+1],x2:L[U+2],y2:L[U+3]})}}}const S=this.circleCells[f];if(S!==null){const L=this.circles;for(const w of S)if(!E.circle[w]){E.circle[w]=!0;const U=3*w;if(this._circleAndRectCollide(L[U],L[U+1],L[U+2],i,n,_,c)&&(!A||A(this.circleKeys[w]))){if(b.hitTest)return g.push(!0),!0;{const B=L[U],k=L[U+1],M=L[U+2];g.push({key:this.circleKeys[w],x1:B-M,y1:k-M,x2:B+M,y2:k+M})}}}}}_queryCellCircle(i,n,_,c,f,g,b,A){const E=b.circle,O=b.seenUids,S=this.boxCells[f];if(S!==null){const w=this.bboxes;for(const U of S)if(!O.box[U]){O.box[U]=!0;const B=4*U;if(this._circleAndRectCollide(E.x,E.y,E.radius,w[B+0],w[B+1],w[B+2],w[B+3])&&(!A||A(this.boxKeys[U])))return g.push(!0),!0}}const L=this.circleCells[f];if(L!==null){const w=this.circles;for(const U of L)if(!O.circle[U]){O.circle[U]=!0;const B=3*U;if(this._circlesCollide(w[B],w[B+1],w[B+2],E.x,E.y,E.radius)&&(!A||A(this.circleKeys[U])))return g.push(!0),!0}}}_forEachCell(i,n,_,c,f,g,b,A){const E=this._convertToXCellCoord(i),O=this._convertToYCellCoord(n),S=this._convertToXCellCoord(_),L=this._convertToYCellCoord(c);for(let w=E;w<=S;w++)for(let U=O;U<=L;U++)if(f.call(this,i,n,_,c,this.xCellCount*U+w,g,b,A))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,n,_,c,f,g){const b=c-i,A=f-n,E=_+g;return E*E>b*b+A*A}_circleAndRectCollide(i,n,_,c,f,g,b){const A=(g-c)/2,E=Math.abs(i-(c+A));if(E>A+_)return!1;const O=(b-f)/2,S=Math.abs(n-(f+O));if(S>O+_)return!1;if(E<=A||S<=O)return!0;const L=E-A,w=S-O;return L*L+w*w<=_*_}}const sn={unknown:0,flipRequired:1,flipNotRequired:2},Nn=Math.tan(85*Math.PI/180);function Al(d,i,n,_,c,f,g){const b=s.a6.create();if(n)if(f.name==="globe"){const A=s.b3(c,i);s.a6.multiply(b,b,A)}else{const A=s.b4.invert([],g);b[0]=A[0],b[1]=A[1],b[4]=A[2],b[5]=A[3],_||s.a6.rotateZ(b,b,c.angle)}else s.a6.multiply(b,c.labelPlaneMatrix,d);return b}function Vd(d,i,n,_,c,f,g){const b=Al(d,i,n,_,c,f,g);return f.name==="globe"&&n||(b[2]=b[6]=b[10]=b[14]=0),b}function Xd(d,i,n,_,c,f,g){if(n){if(f.name==="globe"){const b=Al(d,i,n,_,c,f,g);return s.a6.invert(b,b),s.a6.multiply(b,d,b),b}{const b=s.a6.clone(d),A=s.a6.identity([]);return A[0]=g[0],A[1]=g[1],A[4]=g[2],A[5]=g[3],s.a6.multiply(b,b,A),_||s.a6.rotateZ(b,b,-c.angle),b}}return c.glCoordMatrix}function Eo(d,i,n,_){const c=[d,i,n,1];n?s.a7.transformMat4(c,c,_):Jd(c,c,_);const f=c[3];return c[0]/=f,c[1]/=f,c[2]/=f,c}function $u(d,i){return Math.min(.5+d/i*.5,1.5)}function Kd(d,i){const n=d[0]/d[3],_=d[1]/d[3];return n>=-i[0]&&n<=i[0]&&_>=-i[1]&&_<=i[1]}function jd(d,i,n,_,c,f,g,b,A,E){const O=n.transform,S=_?d.textSizeData:d.iconSizeData,L=s.b5(S,n.transform.zoom),w=O.projection.name==="globe",U=[256/n.width*2+1,256/n.height*2+1],B=_?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;B.clear();let k=null;w&&(k=_?d.text.globeExtVertexArray:d.icon.globeExtVertexArray);const M=d.lineVertexArray,H=_?d.text.placedSymbolArray:d.icon.placedSymbolArray,q=n.transform.width/n.transform.height;let V,$=!1;for(let z=0;z<H.length;z++){const Z=H.get(z),{numGlyphs:at,writingMode:nt}=Z;if(nt!==s.b6.vertical||$||V===s.b6.horizontal||($=!0),V=nt,(Z.hidden||nt===s.b6.vertical)&&!$){Ln(at,B);continue}$=!1;const rt=new s.P(Z.tileAnchorX,Z.tileAnchorY);let{x:yt,y:ut,z:It}=O.projection.projectTilePoint(rt.x,rt.y,E.canonical);if(A){const[ae,he,Ce]=A(rt);yt+=ae,ut+=he,It+=Ce}const vt=[yt,ut,It,1];if(s.a7.transformMat4(vt,vt,i),!Kd(vt,U)){Ln(at,B);continue}const Ut=vt[3],ct=$u(n.transform.getCameraToCenterDistance(O.projection),Ut),Tt=s.b7(S,L,Z),lt=g?Tt/ct:Tt*ct,pt=Eo(yt,ut,It,c);if(pt[3]<=0){Ln(at,B);continue}let kt={};const qt=g?null:A,Xt=Zd(Z,lt,!1,b,i,c,f,d.glyphOffsetArray,M,B,k,pt,rt,kt,q,qt,O.projection,E,g);$=Xt.useVertical,qt&&Xt.needsFlipping&&(kt={}),(Xt.notEnoughRoom||$||Xt.needsFlipping&&Zd(Z,lt,!0,b,i,c,f,d.glyphOffsetArray,M,B,k,pt,rt,kt,q,qt,O.projection,E,g).notEnoughRoom)&&Ln(at,B)}_?(d.text.dynamicLayoutVertexBuffer.updateData(B),k&&d.text.globeExtVertexBuffer&&d.text.globeExtVertexBuffer.updateData(k)):(d.icon.dynamicLayoutVertexBuffer.updateData(B),k&&d.icon.globeExtVertexBuffer&&d.icon.globeExtVertexBuffer.updateData(k))}function qd(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B){const{lineStartIndex:k,glyphStartIndex:M,segment:H}=b,q=M+b.numGlyphs,V=k+b.lineLength,$=i.getoffsetX(M),z=i.getoffsetX(q-1),Z=vl(d*$,n,_,c,f,g,H,k,V,A,E,O,S,L,!0,w,U,B);if(!Z)return null;const at=vl(d*z,n,_,c,f,g,H,k,V,A,E,O,S,L,!0,w,U,B);return at?{first:Z,last:at}:null}function $d(d,i,n,_){return d===s.b6.horizontal&&Math.abs(_)>Math.abs(n)?{useVertical:!0}:d===s.b6.vertical?_>0?{needsFlipping:!0}:null:i!==sn.unknown&&function(c,f){return c===0||Math.abs(f/c)>Nn}(n,_)?i===sn.flipRequired?{needsFlipping:!0}:null:n<0?{needsFlipping:!0}:null}function Zd(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k,M,H){const q=i/24,V=d.lineOffsetX*q,$=d.lineOffsetY*q,{lineStartIndex:z,glyphStartIndex:Z,numGlyphs:at,segment:nt,writingMode:rt,flipState:yt}=d,ut=z+d.lineLength,It=vt=>{if(O){const[lt,pt,kt]=vt.up,qt=E.length;s.b8(O,qt+0,lt,pt,kt),s.b8(O,qt+1,lt,pt,kt),s.b8(O,qt+2,lt,pt,kt),s.b8(O,qt+3,lt,pt,kt)}const[Ut,ct,Tt]=vt.point;s.b9(E,Ut,ct,Tt,vt.angle)};if(at>1){const vt=qd(q,b,V,$,n,S,L,d,A,f,w,B,!1,k,M,H);if(!vt)return{notEnoughRoom:!0};if(_&&!n){let[Ut,ct,Tt]=vt.first.point,[lt,pt,kt]=vt.last.point;[Ut,ct]=Eo(Ut,ct,Tt,g),[lt,pt]=Eo(lt,pt,kt,g);const qt=$d(rt,yt,(lt-Ut)*U,pt-ct);if(d.flipState=qt&&qt.needsFlipping?sn.flipRequired:sn.flipNotRequired,qt)return qt}It(vt.first);for(let Ut=Z+1;Ut<Z+at-1;Ut++){const ct=vl(q*b.getoffsetX(Ut),V,$,n,S,L,nt,z,ut,A,f,w,B,!1,!1,k,M,H);if(!ct)return E.length-=4*(Ut-Z),{notEnoughRoom:!0};It(ct)}It(vt.last)}else{if(_&&!n){const Ut=Eo(L.x,L.y,0,c),ct=z+nt+1,Tt=new s.P(A.getx(ct),A.gety(ct)),lt=Eo(Tt.x,Tt.y,0,c),pt=lt[3]>0?lt:Ir(L,Tt,Ut,1,c,void 0,k,M.canonical),kt=$d(rt,yt,(pt[0]-Ut[0])*U,pt[1]-Ut[1]);if(d.flipState=kt&&kt.needsFlipping?sn.flipRequired:sn.flipNotRequired,kt)return kt}const vt=vl(q*b.getoffsetX(Z),V,$,n,S,L,nt,z,ut,A,f,w,B,!1,!1,k,M,H);if(!vt)return{notEnoughRoom:!0};It(vt)}return{}}function Ms(d,i,n,_,c){const{x:f,y:g,z:b}=_.projectTilePoint(d.x,d.y,i);if(!c)return Eo(f,g,b,n);const[A,E,O]=c(d);return Eo(f+A,g+E,b+O,n)}function Ir(d,i,n,_,c,f,g,b){const A=Ms(d.sub(i)._unit()._add(d),b,c,g,f);return s.N.sub(A,n,A),s.N.normalize(A,A),s.N.scaleAndAdd(A,n,A,_)}function vl(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k,M){const H=_?d-i:d+i;let q=H>0?1:-1,V=0;_&&(q*=-1,V=Math.PI),q<0&&(V+=Math.PI);let $=b+g+(q>0?0:1)|0,z=c,Z=c,at=0,nt=0;const rt=Math.abs(H),yt=[],ut=[];let It=f,vt=It;const Ut=()=>Ir(vt,It,Z,rt-at+1,O,L,B,k.canonical);for(;at+nt<=rt;){if($+=q,$<b||$>=A)return null;if(Z=z,vt=It,yt.push(Z),w&&ut.push(vt),It=new s.P(E.getx($),E.gety($)),z=S[$],!z){const he=Ms(It,k.canonical,O,B,L);z=he[3]>0?S[$]=he:Ut()}at+=nt,nt=s.N.distance(Z,z)}U&&L&&(S[$]&&(z=Ut(),nt=s.N.distance(Z,z)),S[$]=z);const ct=(rt-at)/nt,Tt=It.sub(vt)._mult(ct)._add(vt),lt=s.N.sub([],z,Z),pt=s.N.scaleAndAdd([],Z,lt,ct);let kt=[0,0,1],qt=lt[0],Xt=lt[1];if(M&&(kt=B.upVector(k.canonical,Tt.x,Tt.y),kt[0]!==0||kt[1]!==0||kt[2]!==1)){const he=[kt[2],0,-kt[0]],Ce=s.N.cross([],kt,he);s.N.normalize(he,he),s.N.normalize(Ce,Ce),qt=s.N.dot(lt,he),Xt=s.N.dot(lt,Ce)}if(n){const he=s.N.cross([],kt,lt);s.N.normalize(he,he),s.N.scaleAndAdd(pt,pt,he,n*q)}const ae=V+Math.atan2(Xt,qt);return yt.push(pt),w&&ut.push(Tt),{point:pt,angle:ae,path:yt,tilePath:ut,up:kt}}function Ln(d,i){const n=i.length,_=n+4*d;i.resize(_),i.float32.fill(-1/0,4*n,4*_)}function Jd(d,i,n){const _=i[0],c=i[1];return d[0]=n[0]*_+n[4]*c+n[12],d[1]=n[1]*_+n[5]*c+n[13],d[3]=n[3]*_+n[7]*c+n[15],d}const Io=100;class se{constructor(i,n,_=new Gd(i.width+200,i.height+200,25),c=new Gd(i.width+200,i.height+200,25)){this.transform=i,this.grid=_,this.ignoredGrid=c,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Io,this.screenBottomBoundary=i.height+Io,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=n}placeCollisionBox(i,n,_,c,f,g,b,A){let E=_.projectedAnchorX,O=_.projectedAnchorY,S=_.projectedAnchorZ;const L=_.elevation,w=_.tileID,U=i.getProjection();if(L&&w){const[z,Z,at]=U.upVector(w.canonical,_.tileAnchorX,_.tileAnchorY),nt=U.upVectorScale(w.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;E+=z*L*nt,O+=Z*L*nt,S+=at*L*nt}const B=this.projectAndGetPerspectiveRatio(b,E,O,S,_.tileID,U.name==="globe"||!!L||this.transform.pitch>0,U),k=g*B.perspectiveRatio,M=(_.x1*n+c.x-_.padding)*k+B.point.x,H=(_.y1*n+c.y-_.padding)*k+B.point.y,q=(_.x2*n+c.x+_.padding)*k+B.point.x,V=(_.y2*n+c.y+_.padding)*k+B.point.y,$=B.perspectiveRatio<=.55||B.occluded;return!this.isInsideGrid(M,H,q,V)||!f&&this.grid.hitTest(M,H,q,V,A)||$?{box:[],offscreen:!1,occluded:B.occluded}:{box:[M,H,q,V],offscreen:this.isOffscreen(M,H,q,V),occluded:!1}}placeCollisionCircles(i,n,_,c,f,g,b,A,E,O,S,L,w,U,B){const k=[],M=this.transform.elevation,H=i.getProjection(),q=M?M.getAtTileOffsetFunc(B,this.transform.center.lat,this.transform.worldSize,H):null,V=new s.P(_.tileAnchorX,_.tileAnchorY);let{x:$,y:z,z:Z}=H.projectTilePoint(V.x,V.y,B.canonical);if(q){const[Tt,lt,pt]=q(V);$+=Tt,z+=lt,Z+=pt}const at=H.name==="globe",nt=this.projectAndGetPerspectiveRatio(b,$,z,Z,B,at||!!M||this.transform.pitch>0,H),{perspectiveRatio:rt}=nt,yt=(S?g/rt:g*rt)/s.bc,ut=Eo($,z,Z,A),It=nt.signedDistanceFromCamera>0?qd(yt,f,_.lineOffsetX*yt,_.lineOffsetY*yt,!1,ut,V,_,c,A,{},M&&!S?q:null,S&&!!M,H,B,S):null;let vt=!1,Ut=!1,ct=!0;if(It&&!nt.occluded){const Tt=.5*w*rt+U,lt=new s.P(-100,-100),pt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),kt=new Ws,{first:qt,last:Xt}=It,ae=qt.path.length;let he=[];for(let Ee=ae-1;Ee>=1;Ee--)he.push(qt.path[Ee]);for(let Ee=1;Ee<Xt.path.length;Ee++)he.push(Xt.path[Ee]);const Ce=2.5*Tt;E&&(he=he.map(([Ee,Xe,Fe],ze)=>(q&&!at&&(Fe=q(ze<ae-1?qt.tilePath[ae-1-ze]:Xt.tilePath[ze-ae+2])[2]),Eo(Ee,Xe,Fe,E))),he.some(Ee=>Ee[3]<=0)&&(he=[]));let xe=[];if(he.length>0){let Ee=1/0,Xe=-1/0,Fe=1/0,ze=-1/0;for(const ke of he)Ee=Math.min(Ee,ke[0]),Fe=Math.min(Fe,ke[1]),Xe=Math.max(Xe,ke[0]),ze=Math.max(ze,ke[1]);Xe>=lt.x&&Ee<=pt.x&&ze>=lt.y&&Fe<=pt.y&&(xe=[he.map(ke=>new s.P(ke[0],ke[1]))],(Ee<lt.x||Xe>pt.x||Fe<lt.y||ze>pt.y)&&(xe=s.ba(xe,lt.x,lt.y,pt.x,pt.y)))}for(const Ee of xe){kt.reset(Ee,.25*Tt);let Xe=0;Xe=kt.length<=.5*Tt?1:Math.ceil(kt.paddedLength/Ce)+1;for(let Fe=0;Fe<Xe;Fe++){const ze=Fe/Math.max(Xe-1,1),ke=kt.lerp(ze),da=ke.x+Io,Wa=ke.y+Io;k.push(da,Wa,Tt,0);const ta=da-Tt,$a=Wa-Tt,ea=da+Tt,fa=Wa+Tt;if(ct=ct&&this.isOffscreen(ta,$a,ea,fa),Ut=Ut||this.isInsideGrid(ta,$a,ea,fa),!n&&this.grid.hitTestCircle(da,Wa,Tt,L)&&(vt=!0,!O))return{circles:[],offscreen:!1,collisionDetected:vt,occluded:!1}}}}return{circles:!O&&vt||!Ut?[]:k,offscreen:ct,collisionDetected:vt,occluded:nt.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const n=[];let _=1/0,c=1/0,f=-1/0,g=-1/0;for(const O of i){const S=new s.P(O.x+Io,O.y+Io);_=Math.min(_,S.x),c=Math.min(c,S.y),f=Math.max(f,S.x),g=Math.max(g,S.y),n.push(S)}const b=this.grid.query(_,c,f,g).concat(this.ignoredGrid.query(_,c,f,g)),A={},E={};for(const O of b){const S=O.key;if(A[S.bucketInstanceId]===void 0&&(A[S.bucketInstanceId]={}),A[S.bucketInstanceId][S.featureIndex])continue;const L=[new s.P(O.x1,O.y1),new s.P(O.x2,O.y1),new s.P(O.x2,O.y2),new s.P(O.x1,O.y2)];s.bb(n,L)&&(A[S.bucketInstanceId][S.featureIndex]=!0,E[S.bucketInstanceId]===void 0&&(E[S.bucketInstanceId]=[]),E[S.bucketInstanceId].push(S.featureIndex))}return E}insertCollisionBox(i,n,_,c,f){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:c,collisionGroupID:f},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,n,_,c,f){const g=n?this.ignoredGrid:this.grid,b={bucketInstanceId:_,featureIndex:c,collisionGroupID:f};for(let A=0;A<i.length;A+=4)g.insertCircle(b,i[A],i[A+1],i[A+2])}projectAndGetPerspectiveRatio(i,n,_,c,f,g,b){const A=[n,_,c,1];let E=!1;c||this.transform.pitch>0?(s.a7.transformMat4(A,A,i),this.fogState&&f&&b.name!=="globe"&&(E=function(L,w,U,B,k,M){const H=M.calculateFogTileMatrix(k),q=[w,U,B];return s.N.transformMat4(q,q,H),Ta(L,s.N.length(q),M.pitch,M._fov)}(this.fogState,n,_,c,f.toUnwrapped(),this.transform)>.9)):Jd(A,A,i);const O=A[3];return{point:new s.P((A[0]/O+1)/2*this.transform.width+Io,(-A[1]/O+1)/2*this.transform.height+Io),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(b)/O*.5,1.5),signedDistanceFromCamera:O,occluded:g&&A[2]>O||E}}isOffscreen(i,n,_,c){return _<Io||i>=this.screenRightBoundary||c<Io||n>this.screenBottomBoundary}isInsideGrid(i,n,_,c){return _>=0&&i<this.gridRightBoundary&&c>=0&&n<this.gridBottomBoundary}getViewportMatrix(){const i=s.a6.identity([]);return s.a6.translate(i,i,[-100,-100,0]),i}}function Or(d,i,n){const _=i.createTileMatrix(d,d.worldSize,n.toUnwrapped());return s.a6.multiply(new Float32Array(16),d.projMatrix,_)}function Qd(d,i,n){if(i.projection.name===n.projection.name)return d.projMatrix;const _=n.clone();return _.setProjection(i.projection),Or(_,i.getProjection(),d)}function El(d,i,n){return i.name===n.projection.name?d.projMatrix:Or(n,i,d)}class t_{constructor(i,n,_,c){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?n:-n))):c&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Pn{constructor(i,n,_,c,f,g=!1){this.text=new t_(i?i.text:null,n,_,f),this.icon=new t_(i?i.icon:null,n,c,f),this.clipped=g}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Do{constructor(i,n,_,c=!1){this.text=i,this.icon=n,this.skipFade=_,this.clipped=c}}class e_{constructor(){this.invProjMatrix=s.a6.create(),this.viewportMatrix=s.a6.create(),this.circles=[]}}class ns{constructor(i,n,_,c,f){this.bucketInstanceId=i,this.featureIndex=n,this.sourceLayerIndex=_,this.bucketIndex=c,this.tileID=f}}class Cr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const n=++this.maxGroupID;this.collisionGroups[i]={ID:n,predicate:_=>_.collisionGroupID===n}}return this.collisionGroups[i]}}function ss(d,i,n,_,c){const{horizontalAlign:f,verticalAlign:g}=s.bf(d),b=-(f-.5)*i,A=-(g-.5)*n,E=s.bd(d,_);return new s.P(b+E[0]*c,A+E[1]*c)}function a_(d,i,n,_,c){const f=new s.P(d,i);return n&&f._rotate(_?c:-c),f}class mf{constructor(i,n,_,c,f,g){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new se(this.transform,f),this.buildingIndex=g,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Cr(_),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,n,_,c){const f=_.getBucket(n),g=_.latestFeatureIndex;if(!f||!g||n.fqid!==f.layerIds[0])return;const b=f.layers[0].layout,A=_.collisionBoxArray,E=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),O=_.tileSize/s.V,S=_.tileID.toUnwrapped();this.transform.setProjection(f.projection);const L=(w=_.tileID,U=f.getProjection(),B=this.transform,U.name===this.projection?B.calculateProjMatrix(w.toUnwrapped()):Or(B,U,w));var w,U,B;const k=b.get("text-pitch-alignment")==="map",M=b.get("text-rotation-alignment")==="map";n.compileFilter();const H=n.dynamicFilter(),q=n.dynamicFilterNeedsFeature(),V=this.transform.calculatePixelsToTileUnitsMatrix(_),$=Vd(L,_.tileID.canonical,k,M,this.transform,f.getProjection(),V);let z=null;if(k){const nt=Xd(L,_.tileID.canonical,k,M,this.transform,f.getProjection(),V);z=s.a6.multiply([],this.transform.labelPlaneMatrix,nt)}let Z=null;H&&_.latestFeatureIndex&&(Z={unwrappedTileID:S,dynamicFilter:H,dynamicFilterNeedsFeature:q,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[f.bucketInstanceId]=new ns(f.bucketInstanceId,g,f.sourceLayerIndex,f.index,_.tileID);const at={bucket:f,layout:b,posMatrix:L,textLabelPlaneMatrix:$,labelToScreenMatrix:z,clippingData:Z,scale:E,textPixelRatio:O,holdingForFade:_.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:s.b5(f.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.b5(f.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(f.sourceID)};if(c)for(const nt of f.sortKeyRanges){const{sortKey:rt,symbolInstanceStart:yt,symbolInstanceEnd:ut}=nt;i.push({sortKey:rt,symbolInstanceStart:yt,symbolInstanceEnd:ut,parameters:at})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:f.symbolInstances.length,parameters:at})}attemptAnchorPlacement(i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k,M,H){const{textOffset0:q,textOffset1:V,crossTileID:$}=L,z=[q,V],Z=ss(i,_,c,z,f),at=this.collisionIndex.placeCollisionBox(U,f,n,a_(Z.x,Z.y,g,b,this.transform.angle),S,A,E,O.predicate);if(k){const nt=U.getSymbolInstanceIconSize(H,this.transform.zoom,L.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(U,nt,k,a_(Z.x,Z.y,g,b,this.transform.angle),S,A,E,O.predicate).box.length===0)return}if(at.box.length>0){let nt;return this.prevPlacement&&this.prevPlacement.variableOffsets[$]&&this.prevPlacement.placements[$]&&this.prevPlacement.placements[$].text&&(nt=this.prevPlacement.variableOffsets[$].anchor),this.variableOffsets[$]={textOffset:z,width:_,height:c,anchor:i,textScale:f,prevAnchor:nt},this.markUsedJustification(U,i,L,B),U.allowVerticalPlacement&&(this.markUsedOrientation(U,B,L),this.placedOrientations[$]=B),{shift:Z,placedGlyphBoxes:at}}}placeLayerBucketPart(i,n,_,c){const{bucket:f,layout:g,posMatrix:b,textLabelPlaneMatrix:A,labelToScreenMatrix:E,clippingData:O,textPixelRatio:S,holdingForFade:L,collisionBoxArray:w,partiallyEvaluatedTextSize:U,partiallyEvaluatedIconSize:B,collisionGroup:k}=i.parameters,M=g.get("text-optional"),H=g.get("icon-optional"),q=g.get("text-allow-overlap"),V=g.get("icon-allow-overlap"),$=g.get("text-rotation-alignment")==="map",z=g.get("text-pitch-alignment")==="map",Z=g.get("symbol-z-order")==="viewport-y",at=g.get("symbol-z-elevate");this.transform.setProjection(f.projection);let nt=q&&(V||!f.hasIconData()||H),rt=V&&(q||!f.hasTextData()||M);!f.collisionArrays&&w&&f.deserializeCollisionBoxes(w),_&&c&&f.updateCollisionDebugBuffers(this.transform.zoom,w);const yt=(ut,It,vt)=>{const{crossTileID:Ut,numVerticalGlyphVertices:ct}=ut;if(O){const ea={zoom:this.transform.zoom,pitch:this.transform.pitch};let fa=null;if(O.dynamicFilterNeedsFeature){const aa=this.retainedQueryData[f.bucketInstanceId];fa=O.featureIndex.loadFeature({featureIndex:ut.featureIndex,bucketIndex:aa.bucketIndex,sourceLayerIndex:aa.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,O.dynamicFilter)(ea,fa,this.retainedQueryData[f.bucketInstanceId].tileID.canonical,new s.P(ut.tileAnchorX,ut.tileAnchorY),this.transform.calculateDistanceTileData(O.unwrappedTileID)))return this.placements[Ut]=new Do(!1,!1,!1,!0),void n.add(Ut)}if(n.has(Ut))return;if(L)return void(this.placements[Ut]=new Do(!1,!1,!1));let Tt=!1,lt=!1,pt=!0,kt=!1,qt=!1,Xt=null,ae={box:null,offscreen:null,occluded:null},he={box:null,offscreen:null,occluded:null},Ce=null,xe=null,Ee=null,Xe=0,Fe=0,ze=0;vt.textFeatureIndex?Xe=vt.textFeatureIndex:ut.useRuntimeCollisionCircles&&(Xe=ut.featureIndex),vt.verticalTextFeatureIndex&&(Fe=vt.verticalTextFeatureIndex);const ke=ea=>{ea.tileID=this.retainedQueryData[f.bucketInstanceId].tileID;const fa=this.transform.elevation;ea.elevation=ut.zOffset+(fa?fa.getAtTileOffset(ea.tileID,ea.tileAnchorX,ea.tileAnchorY):0)},da=vt.textBox;if(da){ke(da);const ea=aa=>{let ma=s.b6.horizontal;if(f.allowVerticalPlacement&&!aa&&this.prevPlacement){const Ua=this.prevPlacement.placedOrientations[Ut];Ua&&(this.placedOrientations[Ut]=Ua,ma=Ua,this.markUsedOrientation(f,ma,ut))}return ma},fa=(aa,ma)=>{if(f.allowVerticalPlacement&&ct>0&&vt.verticalTextBox){for(const Ua of f.writingModes)if(Ua===s.b6.vertical?(ae=ma(),he=ae):ae=aa(),ae&&ae.box&&ae.box.length)break}else ae=aa()};if(g.get("text-variable-anchor")){let aa=g.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ut]){const ba=this.prevPlacement.variableOffsets[Ut];aa.indexOf(ba.anchor)>0&&(aa=aa.filter(Oi=>Oi!==ba.anchor),aa.unshift(ba.anchor))}const ma=(ba,Oi,Bi)=>{const no=f.getSymbolInstanceTextSize(U,ut,this.transform.zoom,It),$o=(ba.x2-ba.x1)*no+2*ba.padding,so=(ba.y2-ba.y1)*no+2*ba.padding,Ci=ut.hasIconTextFit&&!V?Oi:null;Ci&&ke(Ci);let yi={box:[],offscreen:!1,occluded:!1};const Xi=q?2*aa.length:aa.length;for(let $i=0;$i<Xi;++$i){const lo=this.attemptAnchorPlacement(aa[$i%aa.length],ba,$o,so,no,$,z,S,b,k,$i>=aa.length,ut,It,f,Bi,Ci,U,B);if(lo&&(yi=lo.placedGlyphBoxes,yi&&yi.box&&yi.box.length)){Tt=!0,Xt=lo.shift;break}}return yi};fa(()=>ma(da,vt.iconBox,s.b6.horizontal),()=>{const ba=vt.verticalTextBox;return ba&&ke(ba),f.allowVerticalPlacement&&!(ae&&ae.box&&ae.box.length)&&ct>0&&ba?ma(ba,vt.verticalIconBox,s.b6.vertical):{box:null,offscreen:null,occluded:null}}),ae&&(Tt=ae.box,pt=ae.offscreen,kt=ae.occluded);const Ua=ea(!(!ae||!ae.box));if(!Tt&&this.prevPlacement){const ba=this.prevPlacement.variableOffsets[Ut];ba&&(this.variableOffsets[Ut]=ba,this.markUsedJustification(f,ba.anchor,ut,Ua))}}else{const aa=(ma,Ua)=>{const ba=f.getSymbolInstanceTextSize(U,ut,this.transform.zoom,It),Oi=this.collisionIndex.placeCollisionBox(f,ba,ma,new s.P(0,0),q,S,b,k.predicate);return Oi&&Oi.box&&Oi.box.length&&(this.markUsedOrientation(f,Ua,ut),this.placedOrientations[Ut]=Ua),Oi};fa(()=>aa(da,s.b6.horizontal),()=>{const ma=vt.verticalTextBox;return f.allowVerticalPlacement&&ct>0&&ma?(ke(ma),aa(ma,s.b6.vertical)):{box:null,offscreen:null,occluded:null}}),ea(!!(ae&&ae.box&&ae.box.length))}}if(Ce=ae,Tt=Ce&&Ce.box&&Ce.box.length>0,pt=Ce&&Ce.offscreen,kt=Ce&&Ce.occluded,ut.useRuntimeCollisionCircles){const ea=f.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex>=0?ut.centerJustifiedTextSymbolIndex:ut.verticalPlacedTextSymbolIndex),fa=s.b7(f.textSizeData,U,ea),aa=g.get("text-padding");xe=this.collisionIndex.placeCollisionCircles(f,q,ea,f.lineVertexArray,f.glyphOffsetArray,fa,b,A,E,_,z,k.predicate,ut.collisionCircleDiameter*fa/s.bc,aa,this.retainedQueryData[f.bucketInstanceId].tileID),Tt=q||xe.circles.length>0&&!xe.collisionDetected,pt=pt&&xe.offscreen,kt=xe.occluded}if(vt.iconFeatureIndex&&(ze=vt.iconFeatureIndex),vt.iconBox){const ea=fa=>{ke(fa);const aa=ut.hasIconTextFit&&Xt?a_(Xt.x,Xt.y,$,z,this.transform.angle):new s.P(0,0),ma=f.getSymbolInstanceIconSize(B,this.transform.zoom,ut.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(f,ma,fa,aa,V,S,b,k.predicate)};he&&he.box&&he.box.length&&vt.verticalIconBox?(Ee=ea(vt.verticalIconBox),lt=Ee.box.length>0):(Ee=ea(vt.iconBox),lt=Ee.box.length>0),pt=pt&&Ee.offscreen,qt=Ee.occluded}const Wa=M||ut.numHorizontalGlyphVertices===0&&ct===0,ta=H||ut.numIconVertices===0;if(Wa||ta?ta?Wa||(lt=lt&&Tt):Tt=lt&&Tt:lt=Tt=lt&&Tt,Tt&&Ce&&Ce.box&&this.collisionIndex.insertCollisionBox(Ce.box,g.get("text-ignore-placement"),f.bucketInstanceId,he&&he.box&&Fe?Fe:Xe,k.ID),lt&&Ee&&this.collisionIndex.insertCollisionBox(Ee.box,g.get("icon-ignore-placement"),f.bucketInstanceId,ze,k.ID),xe&&(Tt&&this.collisionIndex.insertCollisionCircles(xe.circles,g.get("text-ignore-placement"),f.bucketInstanceId,Xe,k.ID),_)){const ea=f.bucketInstanceId;let fa=this.collisionCircleArrays[ea];fa===void 0&&(fa=this.collisionCircleArrays[ea]=new e_);for(let aa=0;aa<xe.circles.length;aa+=4)fa.circles.push(xe.circles[aa+0]),fa.circles.push(xe.circles[aa+1]),fa.circles.push(xe.circles[aa+2]),fa.circles.push(xe.collisionDetected?1:0)}const $a=f.projection.name!=="globe";nt=nt&&($a||!kt),rt=rt&&($a||!qt),this.placements[Ut]=new Do(Tt||nt,lt||rt,pt||f.justReloaded),n.add(Ut)};if(at&&this.buildingIndex&&(this.buildingIndex.updateZOffset(f,this.retainedQueryData[f.bucketInstanceId].tileID),f.updateZOffset()),Z){const ut=f.getSortedSymbolIndexes(this.transform.angle);for(let It=ut.length-1;It>=0;--It){const vt=ut[It];yt(f.symbolInstances.get(vt),vt,f.collisionArrays[vt])}f.hasAnyZOffset&&s.w(`${f.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(f.hasAnyZOffset){const ut=f.getSortedIndexesByZOffset();for(let It=0;It<ut.length;++It){const vt=ut[It];yt(f.symbolInstances.get(vt),vt,f.collisionArrays[vt])}}else for(let ut=i.symbolInstanceStart;ut<i.symbolInstanceEnd;ut++)yt(f.symbolInstances.get(ut),ut,f.collisionArrays[ut]);if(_&&f.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[f.bucketInstanceId];s.a6.invert(ut.invProjMatrix,b),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}markUsedJustification(i,n,_,c){const{leftJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:g,rightJustifiedTextSymbolIndex:b,verticalPlacedTextSymbolIndex:A,crossTileID:E}=_,O=s.be(n),S=c===s.b6.vertical?A:O==="left"?f:O==="center"?g:O==="right"?b:-1;f>=0&&(i.text.placedSymbolArray.get(f).crossTileID=S>=0&&f!==S?0:E),g>=0&&(i.text.placedSymbolArray.get(g).crossTileID=S>=0&&g!==S?0:E),b>=0&&(i.text.placedSymbolArray.get(b).crossTileID=S>=0&&b!==S?0:E),A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=S>=0&&A!==S?0:E)}markUsedOrientation(i,n,_){const c=n===s.b6.horizontal||n===s.b6.horizontalOnly?n:0,f=n===s.b6.vertical?n:0,{leftJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,rightJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:E}=_,O=i.text.placedSymbolArray;g>=0&&(O.get(g).placedOrientation=c),b>=0&&(O.get(b).placedOrientation=c),A>=0&&(O.get(A).placedOrientation=c),E>=0&&(O.get(E).placedOrientation=f)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const n=this.prevPlacement;let _=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;const c=n?n.symbolFadeChange(i):1,f=n?n.opacities:{},g=n?n.variableOffsets:{},b=n?n.placedOrientations:{};for(const A in this.placements){const E=this.placements[A],O=f[A];O?(this.opacities[A]=new Pn(O,c,E.text,E.icon,null,E.clipped),_=_||E.text!==O.text.placed||E.icon!==O.icon.placed):(this.opacities[A]=new Pn(null,c,E.text,E.icon,E.skipFade,E.clipped),_=_||E.text||E.icon)}for(const A in f){const E=f[A];if(!this.opacities[A]){const O=new Pn(E,c,!1,!1);O.isHidden()||(this.opacities[A]=O,_=_||E.text.placed||E.icon.placed)}}for(const A in g)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=g[A]);for(const A in b)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=b[A]);_?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:i)}updateLayerOpacities(i,n){const _=new Set;for(const c of n){const f=c.getBucket(i);f&&c.latestFeatureIndex&&i.fqid===f.layerIds[0]&&(this.updateBucketOpacities(f,_,c.collisionBoxArray),f.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(f,c.tileID),f.updateZOffset()))}}updateBucketOpacities(i,n,_){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const c=i.layers[0].layout,f=!!i.layers[0].dynamicFilter(),g=new Pn(null,0,!1,!1,!0),b=c.get("text-allow-overlap"),A=c.get("icon-allow-overlap"),E=c.get("text-variable-anchor"),O=c.get("text-rotation-alignment")==="map",S=c.get("text-pitch-alignment")==="map",L=new Pn(null,0,b&&(A||!i.hasIconData()||c.get("icon-optional")),A&&(b||!i.hasTextData()||c.get("text-optional")),!0);!i.collisionArrays&&_&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(_);const w=(B,k,M)=>{for(let H=0;H<k/4;H++)B.opacityVertexArray.emplaceBack(M)};let U=0;for(let B=0;B<i.symbolInstances.length;B++){const k=i.symbolInstances.get(B),{numHorizontalGlyphVertices:M,numVerticalGlyphVertices:H,crossTileID:q,numIconVertices:V}=k,$=n.has(q);let z=this.opacities[q];$?z=g:z||(z=L,this.opacities[q]=z),n.add(q);const Z=M>0||H>0,at=V>0,nt=this.placedOrientations[q],rt=nt===s.b6.vertical,yt=nt===s.b6.horizontal||nt===s.b6.horizontalOnly;if(!Z&&!at||z.isHidden()||U++,Z){const ut=Qu(z.text);w(i.text,M,rt?Il:ut),w(i.text,H,yt?Il:ut);const It=z.text.isHidden(),{leftJustifiedTextSymbolIndex:vt,centerJustifiedTextSymbolIndex:Ut,rightJustifiedTextSymbolIndex:ct,verticalPlacedTextSymbolIndex:Tt}=k,lt=i.text.placedSymbolArray,pt=It||rt?1:0;vt>=0&&(lt.get(vt).hidden=pt),Ut>=0&&(lt.get(Ut).hidden=pt),ct>=0&&(lt.get(ct).hidden=pt),Tt>=0&&(lt.get(Tt).hidden=It||yt?1:0);const kt=this.variableOffsets[q];kt&&this.markUsedJustification(i,kt.anchor,k,nt);const qt=this.placedOrientations[q];qt&&(this.markUsedJustification(i,"left",k,qt),this.markUsedOrientation(i,qt,k))}if(at){const ut=Qu(z.icon),{placedIconSymbolIndex:It,verticalPlacedIconSymbolIndex:vt}=k,Ut=i.icon.placedSymbolArray,ct=z.icon.isHidden()?1:0;It>=0&&(w(i.icon,V,rt?Il:ut),Ut.get(It).hidden=ct),vt>=0&&(w(i.icon,k.numVerticalIconVertices,yt?Il:ut),Ut.get(vt).hidden=ct)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const ut=i.collisionArrays[B];if(ut){let It=new s.P(0,0),vt=!0;if(ut.textBox||ut.verticalTextBox){if(E){const ct=this.variableOffsets[q];ct?(It=ss(ct.anchor,ct.width,ct.height,ct.textOffset,ct.textScale),O&&It._rotate(S?this.transform.angle:-this.transform.angle)):vt=!1}f&&(vt=!z.clipped),ut.textBox&&Ds(i.textCollisionBox.collisionVertexArray,z.text.placed,!vt||rt,It.x,It.y),ut.verticalTextBox&&Ds(i.textCollisionBox.collisionVertexArray,z.text.placed,!vt||yt,It.x,It.y)}const Ut=vt&&!!(!yt&&ut.verticalIconBox);ut.iconBox&&Ds(i.iconCollisionBox.collisionVertexArray,z.icon.placed,Ut,k.hasIconTextFit?It.x:0,k.hasIconTextFit?It.y:0),ut.verticalIconBox&&Ds(i.iconCollisionBox.collisionVertexArray,z.icon.placed,!Ut,k.hasIconTextFit?It.x:0,k.hasIconTextFit?It.y:0)}}}if(i.fullyClipped=U===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const B=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=B.invProjMatrix,i.placementViewportMatrix=B.viewportMatrix,i.collisionCircleArray=B.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,n){const _=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*_>i}setStale(){this.stale=!0}}function Ds(d,i,n,_,c){d.emplaceBack(i?1:0,n?1:0,_||0,c||0),d.emplaceBack(i?1:0,n?1:0,_||0,c||0),d.emplaceBack(i?1:0,n?1:0,_||0,c||0),d.emplaceBack(i?1:0,n?1:0,_||0,c||0)}const ff=Math.pow(2,25),Zu=Math.pow(2,24),Ju=Math.pow(2,17),i_=Math.pow(2,16),pf=Math.pow(2,9),hf=Math.pow(2,8),gf=Math.pow(2,1);function Qu(d){if(d.opacity===0&&!d.placed)return 0;if(d.opacity===1&&d.placed)return 4294967295;const i=d.placed?1:0,n=Math.floor(127*d.opacity);return n*ff+i*Zu+n*Ju+i*i_+n*pf+i*hf+n*gf+i}const Il=0;class yf{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,n,_,c,f){const g=this._bucketParts;for(;this._currentTileIndex<i.length;)if(n.getBucketParts(g,c,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,f())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,g.sort((b,A)=>b.sortKey-A.sortKey));this._currentPartIndex<g.length;){const b=g[this._currentPartIndex];if(n.placeLayerBucketPart(b,this._seenCrossTileIDs,_,b.symbolInstanceStart===0),this._currentPartIndex++,f())return!0}return!1}}class Sr{constructor(i,n,_,c,f,g,b,A,E){this.placement=new mf(i,f,g,b,A,E),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=c,this._done=!1}isDone(){return this._done}continuePlacement(i,n,_,c){const f=s.f.now(),g=()=>{const b=s.f.now()-f;return!this._forceFullPlacement&&b>2};for(;this._currentPlacementIndex>=0;){const b=n[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=A)&&(!b.maxzoom||b.maxzoom>A)){const E=b,O=E.layout.get("symbol-z-elevate"),S=this._inProgressLayer=this._inProgressLayer||new yf(E),L=s.ag(b.source,b.scope);if(S.continuePlacement(O?c[L]:_[L],this.placement,this._showCollisionBoxes,b,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const o_=512/s.V/2;class tc{constructor(i,n,_){this.tileID=i,this.bucketInstanceId=_,this.index=new s.bg(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const c=i.canonical.x*s.V,f=i.canonical.y*s.V;for(let g=0;g<n.length;g++){const{key:b,crossTileID:A,tileAnchorX:E,tileAnchorY:O}=n.get(g),S=Math.floor((c+E)*o_),L=Math.floor((f+O)*o_);this.index.add(S,L),this.keys.push(b),this.crossTileIDs.push(A)}this.index.finish()}findMatches(i,n,_){const c=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),f=o_/Math.pow(2,n.canonical.z-this.tileID.canonical.z),g=n.canonical.x*s.V,b=n.canonical.y*s.V;for(let A=0;A<i.length;A++){const E=i.get(A);if(E.crossTileID)continue;const{key:O,tileAnchorX:S,tileAnchorY:L}=E,w=Math.floor((g+S)*f),U=Math.floor((b+L)*f),B=this.index.range(w-c,U-c,w+c,U+c);for(const k of B){const M=this.crossTileIDs[k];if(this.keys[k]===O&&!_.has(M)){_.add(M),E.crossTileID=M;break}}}}}class n_{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const n=Math.round((i-this.lng)/360);if(n!==0)for(const _ in this.indexes){const c=this.indexes[_],f={};for(const g in c){const b=c[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+n),f[b.tileID.key]=b}this.indexes[_]=f}this.lng=i}addBucket(i,n,_){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let f=0;f<n.symbolInstances.length;f++)n.symbolInstances.get(f).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);const c=this.usedCrossTileIDs[i.overscaledZ];for(const f in this.indexes){const g=this.indexes[f];if(Number(f)>i.overscaledZ)for(const b in g){const A=g[b];A.tileID.isChildOf(i)&&A.findMatches(n.symbolInstances,i,c)}else{const b=g[i.scaledTo(Number(f)).key];b&&b.findMatches(n.symbolInstances,i,c)}}for(let f=0;f<n.symbolInstances.length;f++){const g=n.symbolInstances.get(f);g.crossTileID||(g.crossTileID=_.generate(),c.add(g.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new tc(i,n.symbolInstances,n.bucketInstanceId),!0}removeBucketCrossTileIDs(i,n){for(const _ of n.crossTileIDs)this.usedCrossTileIDs[i].delete(_)}removeStaleBuckets(i){let n=!1;for(const _ in this.indexes){const c=this.indexes[_];for(const f in c)i[c[f].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,c[f]),delete c[f],n=!0)}return n}}class s_{constructor(){this.layerIndexes={},this.crossTileIDs=new n_,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,n,_,c){let f=this.layerIndexes[i.fqid];f===void 0&&(f=this.layerIndexes[i.fqid]=new Rr);let g=!1;const b={};c.name!=="globe"&&f.handleWrapJump(_);for(const A of n){const E=A.getBucket(i);E&&i.fqid===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(A.tileID,E,this.crossTileIDs)&&(g=!0),b[E.bucketInstanceId]=!0)}return f.removeStaleBuckets(b)&&(g=!0),g}pruneUnusedLayers(i){const n={};i.forEach(_=>{n[_]=!0});for(const _ in this.layerIndexes)n[_]||delete this.layerIndexes[_]}}class ls{constructor(i=0,n=0,_=0,c=0){if(isNaN(i)||i<0||isNaN(n)||n<0||isNaN(_)||_<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=n,this.left=_,this.right=c}interpolate(i,n,_){return n.top!=null&&i.top!=null&&(this.top=s.U(i.top,n.top,_)),n.bottom!=null&&i.bottom!=null&&(this.bottom=s.U(i.bottom,n.bottom,_)),n.left!=null&&i.left!=null&&(this.left=s.U(i.left,n.left,_)),n.right!=null&&i.right!=null&&(this.right=s.U(i.right,n.right,_)),this}getCenter(i,n){const _=s.aa((this.left+i-this.right)/2,0,i),c=s.aa((this.top+n-this.bottom)/2,0,n);return new s.P(_,c)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ls(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Nr(d,i){const n=s.bk(d,3);s.a6.fromQuat(d,i),s.bm(d,3,n)}function Ol(d,i){const n=s.bi.identity([]);return s.bi.rotateZ(n,n,-i),s.bi.rotateX(n,n,-d),n}function l_(d,i){const n=[d[0],d[1],0],_=[i[0],i[1],0];if(s.N.length(n)>=1e-15){const g=s.N.normalize([],n);s.N.scale(_,g,s.N.dot(_,g)),i[0]=_[0],i[1]=_[1]}const c=s.N.cross([],i,d);if(s.N.len(c)<1e-15)return null;const f=Math.atan2(-c[1],c[0]);return Ol(Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2]),f)}class Cl{constructor(i,n){this.position=i,this.orientation=n}get position(){return this._position}set position(i){if(i){const n=i instanceof s.L?i:new s.L(i[0],i[1],i[2]);this._renderWorldCopies&&(n.x=s.bh(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(i,n){if(this.orientation=null,!this.position)return;const _=this.position,c=this._elevation?this._elevation.getAtPointOrZero(s.L.fromLngLat(i)):0,f=s.L.fromLngLat(i,c),g=[f.x-_.x,f.y-_.y,f.z-_.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=l_(g,n)}setPitchBearing(i,n){this.orientation=Ol(s.bj(i),s.bj(-n))}}class Fs{constructor(i,n){this._transform=s.a6.identity([]),this.orientation=n,this.position=i}get mercatorPosition(){const i=this.position;return new s.L(i[0],i[1],i[2])}get position(){const i=s.bk(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var n;i&&s.bm(this._transform,3,[(n=i)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||s.bi.identity([]),i&&Nr(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),n=this.right();return{bearing:Math.atan2(-n[1],n[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,n){this._orientation=Ol(i,n),Nr(this._transform,this._orientation)}forward(){const i=s.bk(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.bk(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.bk(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,n){const _=new Float64Array(16);return s.a6.invert(_,this.getWorldToCamera(i,n)),_}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(i,n,_){const c=this.position;s.N.scale(c,c,-i);const f=new Float64Array(16);return s.a6.fromScaling(f,[_,_,_]),s.a6.translate(f,f,c),f[10]*=n,f}getWorldToCamera(i,n){const _=new Float64Array(16),c=new Float64Array(4),f=this.position;return s.bi.conjugate(c,this._orientation),s.N.scale(f,f,-i),s.a6.fromQuat(_,c),s.a6.translate(_,_,f),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=n,_[9]*=n,_[10]*=n,_[11]*=n,_}getCameraToClipPerspective(i,n,_,c){const f=new Float64Array(16);return s.a6.perspective(f,i,n,_,c),f}getCameraToClipOrthographic(i,n,_,c,f,g){const b=new Float64Array(16);return s.a6.ortho(b,i,n,_,c,f,g),b}getDistanceToElevation(i,n=!1){const _=i===0?0:s.bl(i,n?s.au(this.position[1]):this.position[1]),c=this.forward();return(_-this.position[2])/c[2]}clone(){return new Fs([...this.position],[...this.orientation])}}const Bs=(d,i,n)=>(1-n)*d+n*i,Sl=d=>d*d*d*d*d;class Rl{constructor(i,n,_,c,f,g,b){this.tileSize=512,this._renderWorldCopies=f===void 0||f,this._minZoom=i||0,this._maxZoom=n||22,this._minPitch=_??0,this._maxPitch=c??60,this.setProjection(g),this.setMaxBounds(b),this.width=0,this.height=0,this._center=new s.bn(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ls,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Fs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const i=new Rl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(i,n=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(i||_)&&this._constrainCamera(n),this._calcMatrices()}getProjection(){return s.ac(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const n=this.projection?this.getProjection():void 0;this.projection=s.bo(this.projectionOptions);const _=!ot(n,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setOrthographicProjectionAtLowPitch(i){return this._orthographicProjectionAtLowPitch!==i&&(this._orthographicProjectionAtLowPitch=i,this._calcMatrices(),!0)}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.bo({name:"mercator"});const n=i!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.bl(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return s.bh(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const n=-i*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=s.b4.create(),s.b4.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const n=s.aa(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=s.bj(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const n=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==n&&(this._unmodified=!1,this._setZoom(n),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(i){this._tileCoverLift!==i&&(this._tileCoverLift=i)}_updateCameraOnTerrain(){const i=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,n=this.elevation&&i===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||i===Number.NEGATIVE_INFINITY&&(!n||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const _=this._elevation;n||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&_.exaggeration()&&this._centerAltitudeValidForExaggeration!==_.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*_.exaggeration(),this._centerAltitudeValidForExaggeration=_.exaggeration()):(this._centerAltitude=i||0,this._centerAltitudeValidForExaggeration=_.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let c=0,f=0;for(let g=0;g<n.length;g++){const b=new s.P(n[g][0]*this.width,_+n[g][1]*(this.height-_)),A=i.pointCoordinate(b);if(!A)continue;const E=1/Math.hypot(A[0]-this._camera.position[0],A[1]-this._camera.position[1]);c+=A[3]*E,f+=E}return f===0?NaN:c/f}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,n=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*n,c=this._mercatorZfromZoom(i),f=this._mercatorZfromZoom(this._maxZoom),g=Math.max(c-_,f);this._setZoom(this._zoomFromMercatorZ(g))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let _;_=i.z<this._camera.position[2]?[n.x,n.y,n.z]:[i.x,i.y,i.z];const c=s.N.length(s.N.sub([],this._camera.position,_));return s.aa(this._zoomFromMercatorZ(c),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let n=!1;if(i.orientation&&!s.bi.exactEquals(i.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(i.orientation)),i.position){const _=[i.position.x,i.position.y,i.position.z];s.N.exactEquals(_,this._camera.position)||(this._setCameraPosition(_),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,n=new Cl;return n.position=new s.L(i[0],i[1],i[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(i){if(!s.bi.length(i))return!1;s.bi.normalize(i,i);const n=s.N.transformQuat([],[0,0,-1],i),_=s.N.transformQuat([],[0,-1,0],i);if(_[2]<0)return!1;const c=l_(n,_);return!!c&&(this._camera.orientation=c,!0)}_setCameraPosition(i){const n=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,c=this.cameraToCenterDistance;i[2]=s.aa(i[2],c/_,c/n),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,n,_){this._unmodified=!1,this._edgeInsets.interpolate(i,n,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const n=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,n)}getVisibleUnwrappedCoordinates(i){const n=[new s.bp(0,i)];if(this.renderWorldCopies){const _=this.pointCoordinate(new s.P(0,0)),c=this.pointCoordinate(new s.P(this.width,0)),f=this.pointCoordinate(new s.P(this.width,this.height)),g=this.pointCoordinate(new s.P(0,this.height)),b=Math.floor(Math.min(_.x,c.x,f.x,g.x)),A=Math.floor(Math.max(_.x,c.x,f.x,g.x)),E=1;for(let O=b-E;O<=A+E;O++)O!==0&&n.push(new s.bp(O,i))}return n}isLODDisabled(i){return(!i||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(i,n,_){let c=[];if(n[0]===0&&n[1]===0)return c;for(const g of i){const b=g.canonical,A=g.overscaledZ,E=g.wrap,O=1<<b.z,S=b.x+1<O,L=b.x>0,w=b.y+1<O,U=b.y>0,B=g.wrap-(L?0:1),k=g.wrap+(S?0:1),M=L?b.x-1:O-1,H=S?b.x+1:0;n[0]<0?(c.push(new s.am(A,k,b.z,H,b.y)),n[1]<0&&w&&(c.push(new s.am(A,E,b.z,b.x,b.y+1)),c.push(new s.am(A,k,b.z,H,b.y+1))),n[1]>0&&U&&(c.push(new s.am(A,E,b.z,b.x,b.y-1)),c.push(new s.am(A,k,b.z,H,b.y-1)))):n[0]>0?(c.push(new s.am(A,B,b.z,M,b.y)),n[1]<0&&w&&(c.push(new s.am(A,E,b.z,b.x,b.y+1)),c.push(new s.am(A,B,b.z,M,b.y+1))),n[1]>0&&U&&(c.push(new s.am(A,E,b.z,b.x,b.y-1)),c.push(new s.am(A,B,b.z,M,b.y-1)))):n[1]<0&&w?c.push(new s.am(A,E,b.z,b.x,b.y+1)):U&&c.push(new s.am(A,E,b.z,b.x,b.y-1))}if(c.length>1){c.sort((A,E)=>A.overscaledZ-E.overscaledZ||A.wrap-E.wrap||A.canonical.z-E.canonical.z||A.canonical.x-E.canonical.x||A.canonical.y-E.canonical.y);let g=0,b=0;for(;b<c.length;)c[b].equals(c[g])?++b:c[++g]=c[b++];c.length=g+1}const f=[];for(const g of c)c.some(b=>g.isChildOf(b))||f.push(g);return c=f.filter(g=>!i.some(b=>!!(g.overscaledZ<_&&b.isChildOf(g))||g.equals(b)||g.isChildOf(b))),c}coveringTiles(i){let n=this.coveringZoomLevel(i);const _=n,c=this.elevation&&this.elevation.exaggeration(),f=c&&!i.isTerrainDEM,g=this.projection.name==="mercator";if(i.minzoom!==void 0&&n<i.minzoom)return[];i.maxzoom!==void 0&&n>i.maxzoom&&(n=i.maxzoom);const b=this.locationCoordinate(this.center),A=this.center.lat,E=1<<n,O=[E*b.x,E*b.y,0],S=this.projection.name==="globe",L=!S,w=s.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,L),U=S?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),B=E*s.bl(1,this.center.lat),k=this._camera.position[2]/s.bl(1,this.center.lat),M=[E*U.x,E*U.y,k*(L?1:B)],H=S||c,q=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),V=this.isLODDisabled(!0)?n:0;let $;if(this._elevation&&i.isTerrainDEM)$=1e4*this._elevation.exaggeration();else if(this._elevation){const lt=this._elevation.getMinMaxForVisibleTiles();$=lt?lt.max:this._centerAltitude}else $=this._centerAltitude;const z=i.isTerrainDEM?-$:this._elevation?this._elevation.getMinElevationBelowMSL():0,Z=this.projection.isReprojectedInTileSpace?s.br(this):1,at=lt=>{const kt=new s.L(lt.x+25e-6,lt.y,lt.z),qt=new s.L(lt.x,lt.y+25e-6,lt.z),Xt=lt.toLngLat(),ae=kt.toLngLat(),he=qt.toLngLat(),Ce=this.locationCoordinate(Xt),xe=this.locationCoordinate(ae),Ee=this.locationCoordinate(he),Xe=Math.hypot(xe.x-Ce.x,xe.y-Ce.y),Fe=Math.hypot(Ee.x-Ce.x,Ee.y-Ce.y);return Math.sqrt(Xe*Fe)*Z/25e-6},nt=lt=>{const pt=$,kt=z;return{aabb:s.bu(this,E,0,0,0,lt,kt,pt,this.projection),zoom:0,x:0,y:0,minZ:kt,maxZ:pt,wrap:lt,fullyVisible:!1}},rt=[];let yt=[];const ut=n,It=i.reparseOverscaled?_:n,vt=lt=>lt*lt,Ut=vt((k-this._centerAltitude)*B),ct=lt=>{if(!this._elevation||!lt.tileID||!g)return;const pt=this._elevation.getMinMaxForTile(lt.tileID),kt=lt.aabb;pt?(kt.min[2]=pt.min,kt.max[2]=pt.max,kt.center[2]=(kt.min[2]+kt.max[2])/2):(lt.shouldSplit=Tt(lt),lt.shouldSplit||(kt.min[2]=kt.max[2]=kt.center[2]=this._centerAltitude))},Tt=lt=>{if(lt.zoom<V)return!0;if(lt.zoom===ut)return!1;if(lt.shouldSplit!=null)return lt.shouldSplit;const pt=lt.aabb.distanceX(M),kt=lt.aabb.distanceY(M);let qt=Ut,Xt=1;if(S){qt=vt(lt.aabb.distanceZ(M));const Ce=Math.pow(2,lt.zoom),xe=s.au((lt.y+1)/Ce),Ee=s.au(lt.y/Ce),Xe=Math.min(Math.max(A,xe),Ee),Fe=s.bJ(Xe)/s.bJ(A);if(Xt=Xe===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Fe/this._mercatorScaleRatio),this.zoom<=s.bG&&lt.zoom===ut-1&&Fe>=.9)return!0}else if(f&&(qt=vt(lt.aabb.distanceZ(M)*B)),this.projection.isReprojectedInTileSpace&&_<=5){const Ce=Math.pow(2,lt.zoom),xe=at(new s.L((lt.x+.5)/Ce,(lt.y+.5)/Ce));Xt=xe>.85?1:xe}const ae=pt*pt+kt*kt+qt,he=vt((1<<ut-lt.zoom)*q*Xt*((Ce,xe)=>{if(xe*vt(.707)<Ce)return 1;const Ee=Math.sqrt(xe/Ce);return Ee/(1.4144271570014144+(Math.pow(1.1,Ee-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(qt,Ut),ae));return ae<he};if(this.renderWorldCopies)for(let lt=1;lt<=3;lt++)rt.push(nt(-lt)),rt.push(nt(lt));for(rt.push(nt(0));rt.length>0;){const lt=rt.pop(),pt=lt.x,kt=lt.y;let qt=lt.fullyVisible;const Xt=()=>this.projection.name==="globe"&&(lt.y===0||lt.y===(1<<lt.zoom)-1);if(!qt){let ae=H?lt.aabb.intersects(w):lt.aabb.intersectsFlat(w);if(ae===0&&Xt()){const he=new s.bs(lt.zoom,pt,kt);ae=s.bt(this,E,he,!0).intersects(w)}if(ae===0)continue;qt=ae===2}if(lt.zoom!==ut&&Tt(lt))for(let ae=0;ae<4;ae++){const he=(pt<<1)+ae%2,Ce=(kt<<1)+(ae>>1),xe={aabb:g?lt.aabb.quadrant(ae):s.bu(this,E,lt.zoom+1,he,Ce,lt.wrap,lt.minZ,lt.maxZ,this.projection),zoom:lt.zoom+1,x:he,y:Ce,wrap:lt.wrap,fullyVisible:qt,tileID:void 0,shouldSplit:void 0,minZ:lt.minZ,maxZ:lt.maxZ};f&&!S&&(xe.tileID=new s.am(lt.zoom+1===ut?It:lt.zoom+1,lt.wrap,lt.zoom+1,he,Ce),ct(xe)),rt.push(xe)}else{const ae=lt.zoom===ut?It:lt.zoom;if(i.minzoom&&i.minzoom>ae)continue;if(!qt){let Ee=H?lt.aabb.intersectsPrecise(w):lt.aabb.intersectsPreciseFlat(w);if(Ee===0&&Xt()){const Xe=new s.bs(lt.zoom,pt,kt);Ee=s.bt(this,E,Xe,!0).intersectsPrecise(w)}if(Ee===0)continue}const he=O[0]-(.5+pt+(lt.wrap<<lt.zoom))*(1<<n-lt.zoom),Ce=O[1]-.5-kt,xe=lt.tileID?lt.tileID:new s.am(ae,lt.wrap,lt.zoom,pt,kt);yt.push({tileID:xe,distanceSq:he*he+Ce*Ce})}}if(this.fogCullDistSq){const lt=this.fogCullDistSq,pt=this.horizonLineFromTop();yt=yt.filter(kt=>{const qt=[0,0,0,1],Xt=[s.V,s.V,0,1],ae=this.calculateFogTileMatrix(kt.tileID.toUnwrapped());s.a7.transformMat4(qt,qt,ae),s.a7.transformMat4(Xt,Xt,ae);const he=s.a7.min([],qt,Xt),Ce=s.a7.max([],qt,Xt),xe=s.bv(he,Ce);if(xe===0)return!0;let Ee=!1;const Xe=this._elevation;if(Xe&&xe>lt&&pt!==0){const Fe=this.calculateProjMatrix(kt.tileID.toUnwrapped());let ze;i.isTerrainDEM||(ze=Xe.getMinMaxForTile(kt.tileID)),ze||(ze={min:z,max:$});const ke=s.bH(this.rotation),da=[ke[0]*s.V,ke[1]*s.V,ze.max];s.N.transformMat4(da,da,Fe),Ee=(1-da[1])*this.height*.5<pt}return xe<lt||Ee})}return yt.sort((lt,pt)=>lt.distanceSq-pt.distanceSq).map(lt=>lt.tileID)}resize(i,n){this.width=i,this.height=n,this.pixelsToGLUnits=[2/i,-2/n],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const n=s.aa(i.lat,-s.bw,s.bw),_=this.projection.project(i.lng,n);return new s.P(_.x*this.worldSize,_.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.bl(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,n){let _,c;const f=this.centerPoint;if(this.projection.name==="globe"){const b=this.worldSize;_=(n.x-f.x)/b,c=(n.y-f.y)/b}else{const b=this.pointCoordinate(n),A=this.pointCoordinate(f);_=b.x-A.x,c=b.y-A.y}const g=this.locationCoordinate(i);this.setLocation(new s.L(g.x-_,g.y-c))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,n){const _=n?s.bl(n,i.lat):void 0,c=this.projection.project(i.lng,i.lat);return new s.L(c.x,c.y,_)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,n){const _=n??this._centerAltitude,c=[i.x,i.y,0,1],f=[i.x,i.y,1,1];s.a7.transformMat4(c,c,this.pixelMatrixInverse),s.a7.transformMat4(f,f,this.pixelMatrixInverse);const g=f[3];s.a7.scale(c,c,1/c[3]),s.a7.scale(f,f,1/g);const b=c[2],A=f[2];return{p0:c,p1:f,t:b===A?0:(_-b)/(A-b)}}screenPointToMercatorRay(i){const n=[i.x,i.y,0,1],_=[i.x,i.y,1,1];return s.a7.transformMat4(n,n,this.pixelMatrixInverse),s.a7.transformMat4(_,_,this.pixelMatrixInverse),s.a7.scale(n,n,1/n[3]),s.a7.scale(_,_,1/_[3]),n[2]=s.bl(n[2],this._center.lat)*this.worldSize,_[2]=s.bl(_[2],this._center.lat)*this.worldSize,s.a7.scale(n,n,1/this.worldSize),s.a7.scale(_,_,1/this.worldSize),new s.a2([n[0],n[1],n[2]],s.N.normalize([],s.N.sub([],_,n)))}rayIntersectionCoordinate(i){const{p0:n,p1:_,t:c}=i,f=s.bl(n[2],this._center.lat),g=s.bl(_[2],this._center.lat);return new s.L(s.U(n[0],_[0],c)/this.worldSize,s.U(n[1],_[1],c)/this.worldSize,s.U(f,g,c))}pointCoordinate(i,n=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,n)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let n=this.projection.pointCoordinate3D(this,i.x,i.y);if(n)return new s.L(n[0],n[1],n[2]);let _=0,c=this.horizonLineFromTop();if(i.y>c)return this.pointCoordinate(i);const f=.02*c,g=i.clone();for(let b=0;b<10&&c-_>f;b++){g.y=s.U(_,c,.66);const A=this.projection.pointCoordinate3D(this,g.x,g.y);A?(c=g.y,n=A):_=g.y}return n?new s.L(n[0],n[1],n[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=s.bx)return!this.isPointAboveHorizon(i);const n=this.pointCoordinate(i);return n.y>=0&&n.y<=1}_coordinatePoint(i,n){const _=n&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,c=[i.x*this.worldSize,i.y*this.worldSize,_+i.toAltitude(),1];return s.a7.transformMat4(c,c,this.pixelMatrix),c[3]>0?new s.P(c[0]/c[3],c[1]/c[3]):new s.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:i,left:n}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,c=this.width-this._edgeInsets.right,f=this.pointLocation3D(new s.P(n,i)),g=this.pointLocation3D(new s.P(c,i)),b=this.pointLocation3D(new s.P(c,_)),A=this.pointLocation3D(new s.P(n,_));let E=Math.min(f.lng,g.lng,b.lng,A.lng),O=Math.max(f.lng,g.lng,b.lng,A.lng),S=Math.min(f.lat,g.lat,b.lat,A.lat),L=Math.max(f.lat,g.lat,b.lat,A.lat);const w=Math.pow(2,-this.zoom)/16*270,U=this.projection.name==="globe"?1:4,B=(k,M,H,q,V)=>{const $=(k+H)/2,z=(M+q)/2,Z=new s.P($,z),{lng:at,lat:nt}=this.pointLocation3D(Z),rt=Math.max(0,E-at,S-nt,at-O,nt-L);E=Math.min(E,at),O=Math.max(O,at),S=Math.min(S,nt),L=Math.max(L,nt),(V<U||rt>w)&&(B(k,M,$,z,V+1),B($,z,H,q,V+1))};if(B(n,i,c,i,1),B(c,i,c,_,1),B(c,_,n,_,1),B(n,_,n,i,1),this.projection.name==="globe"){const[k,M]=s.by(this);k?(L=90,O=180,E=-180):M&&(S=-90,O=180,E=-180)}return new s.ad(new s.bn(E,S),new s.bn(O,L))}_getBoundsRectangular(i,n){const{top:_,left:c}=this._edgeInsets,f=this.height-this._edgeInsets.bottom,g=this.width-this._edgeInsets.right,b=new s.P(c,_),A=new s.P(g,_),E=new s.P(g,f),O=new s.P(c,f);let S=this.pointCoordinate(b,i),L=this.pointCoordinate(A,i);const w=this.pointCoordinate(E,n),U=this.pointCoordinate(O,n),B=(k,M)=>(M.y-k.y)/(M.x-k.x);return S.y>1&&L.y>=0?S=new s.L((1-U.y)/B(U,S)+U.x,1):S.y<0&&L.y<=1&&(S=new s.L(-U.y/B(U,S)+U.x,0)),L.y>1&&S.y>=0?L=new s.L((1-w.y)/B(w,L)+w.x,1):L.y<0&&S.y<=1&&(L=new s.L(-w.y/B(w,L)+w.x,0)),new s.ad().extend(this.coordinateLocation(S)).extend(this.coordinateLocation(L)).extend(this.coordinateLocation(U)).extend(this.coordinateLocation(w))}_getBoundsRectangularTerrain(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);const n=i.visibleDemTiles.reduce((_,c)=>{if(c.dem){const f=c.dem.tree;_.min=Math.min(_.min,f.minimums[0]),_.max=Math.max(_.max,f.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(n.min*i.exaggeration(),n.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){const n=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,_=this.height/2-n*(1-this._horizonShift);return i?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-s.bw,this.maxLat=s.bw,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.a5(this.minLng)*this.tileSize,this.worldMaxX=s.a5(this.maxLng)*this.tileSize,this.worldMinY=s.ae(this.maxLat)*this.tileSize,this.worldMaxY=s.ae(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,n){return this.projection.createTileMatrix(this,n,i)}calculateDistanceTileData(i){const n=i.key,_=this._distanceTileDataCache;if(_[n])return _[n];const c=i.canonical,f=1/this.height,g=this.cameraWorldSize,b=g/this.zoomScale(c.z),A=(c.x+Math.pow(2,c.z)*i.wrap)*b,E=c.y*b,O=this.point;O.x*=g/this.worldSize,O.y*=g/this.worldSize;const S=this.angle,L=Math.sin(-S),w=-Math.cos(-S);return _[n]={bearing:[L,w],center:[(O.x-A)*f,(O.y-E)*f],scale:b/s.V*f},_[n]}calculateFogTileMatrix(i){const n=i.key,_=this._fogTileMatrixCache;if(_[n])return _[n];const c=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return s.a6.multiply(c,this.worldToFogMatrix,c),_[n]=new Float32Array(c),_[n]}calculateProjMatrix(i,n=!1,_=!1){const c=i.key;let f;if(f=_?this._expandedProjMatrixCache:n?this._alignedProjMatrixCache:this._projMatrixCache,f[c])return f[c];const g=this.calculatePosMatrix(i,this.worldSize);let b;return b=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:_?this.expandedFarZProjMatrix:n?this.alignedProjMatrix:this.projMatrix,s.a6.multiply(g,b,g),f[c]=new Float32Array(g),f[c]}calculatePixelsToTileUnitsMatrix(i){const n=i.tileID.key,_=this._pixelsToTileUnitsCache;if(_[n])return _[n];const c=s.bz(i,this);return _[n]=c,_[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const i=1/this.worldSize,n=s.a6.fromScaling([],[i,i,i]);return s.a6.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const i=this._elevation;this._updateCameraState();const n=s.bl(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(n),c=this._camera.forward(),f=s.bl(1,this._center.lat);_[2]/=f,c[2]/=f,s.N.normalize(c,c);const g=i.raycast(_,c,i.exaggeration());if(g){const b=s.N.scaleAndAdd([],_,c,g),A=new s.L(b[0],b[1],s.bl(b[2],s.au(b[1]))),E=(A.z+s.N.length([A.x-_[0],A.y-_[1],A.z-_[2]*f]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(E),this._centerAltitude=A.toAltitude(),this._center=this.coordinateLocation(A),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const n=this._elevation,_=s.bl(1,this._center.lat)*this.worldSize,c=this._computeCameraPosition(_),f=n.getAtPointOrZero(new s.L(...c)),g=this.pixelsPerMeter/this.worldSize*f,b=this._minimumHeightOverTerrain(),A=c[2]-g;if(A<=b)if(A<0||i){const E=this.locationCoordinate(this._center,this._centerAltitude),O=[c[0],c[1],E.z-c[2]],S=s.N.length(O);O[2]-=(b-A)/this._pixelsPerMercatorPixel;const L=s.N.length(O);if(L===0)return;s.N.scale(O,O,S/L*this._pixelsPerMercatorPixel),this._camera.position=[c[0],c[1],E.z*this._pixelsPerMercatorPixel-O[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const L=this.center;return L.lat=s.aa(L.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&(L.lng=s.aa(L.lng,this.minLng,this.maxLng)),this.center=L,void(this._constraining=!1)}const n=this._unmodified,{x:_,y:c}=this.point;let f=0,g=_,b=c;const A=this.width/2,E=this.height/2,O=this.worldMinY*this.scale,S=this.worldMaxY*this.scale;if(c-E<O&&(b=O+E),c+E>S&&(b=S-E),S-O<this.height&&(f=Math.max(f,this.height/(S-O)),b=(S+O)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const L=this.worldMinX*this.scale,w=this.worldMaxX*this.scale,U=this.worldSize/2-(L+w)/2;g=(_+U+this.worldSize)%this.worldSize-U,g-A<L&&(g=L+A),g+A>w&&(g=w-A),w-L<this.width&&(f=Math.max(f,this.width/(w-L)),g=(w+L)/2)}g===_&&b===c||(this.center=this.unproject(new s.P(g,b))),f&&(this.zoom+=this.scaleZoom(f)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,n=this.projection.name==="globe",_=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.bl(1,this.center.lat)/s.bl(1,s.bI));const c=s.bA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,c),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const f=this.projection.zAxisUnit==="meters"?_:1,g=this._camera.getWorldToCamera(this.worldSize,f);let b;const A=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(A[8]=2*-i.x/this.width,A[9]=2*i.y/this.height,this.isOrthographic){let nt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),rt=nt*this.aspect,yt=-rt,ut=-nt;rt-=i.x,yt-=i.x,nt+=i.y,ut+=i.y,b=this._camera.getCameraToClipOrthographic(yt,rt,ut,nt,this._nearZ,this._farZ),((It,vt,Ut,ct)=>{for(let Tt=0;Tt<16;Tt++)It[Tt]=Bs(vt[Tt],Ut[Tt],ct)})(b,b,A,Sl(this.pitch>=15?1:this.pitch/15))}else b=A;const E=s.a6.mul([],A,g);let O=s.a6.mul([],b,g);if(this.projection.isReprojectedInTileSpace){const nt=this.locationCoordinate(this.center),rt=s.a6.identity([]);s.a6.translate(rt,rt,[nt.x*this.worldSize,nt.y*this.worldSize,0]),s.a6.multiply(rt,rt,s.bB(this)),s.a6.translate(rt,rt,[-nt.x*this.worldSize,-nt.y*this.worldSize,0]),s.a6.multiply(O,O,rt),s.a6.multiply(E,E,rt),this.inverseAdjustmentMatrix=s.bC(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=s.a6.scale([],O,[this.worldSize,this.worldSize,this.worldSize/f,1]),this.projMatrix=O,this.invProjMatrix=s.a6.invert(new Float64Array(16),this.projMatrix),n){const nt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);nt[8]=2*-i.x/this.width,nt[9]=2*i.y/this.height,this.expandedFarZProjMatrix=s.a6.mul([],nt,g)}else this.expandedFarZProjMatrix=this.projMatrix;const S=s.a6.invert([],b);this.frustumCorners=s.bD.fromInvProjectionMatrix(S,this.horizonLineFromTop(),this.height),this.cameraFrustum=s.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!n);const L=new Float32Array(16);s.a6.identity(L),s.a6.scale(L,L,[1,-1,1]),s.a6.rotateX(L,L,this._pitch),s.a6.rotateZ(L,L,this.angle);const w=s.a6.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=s.a6.clone(w);const U=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;w[8]=2*-i.x/this.width,w[9]=2*(i.y+U)/this.height,this.skyboxMatrix=s.a6.multiply(L,w,L);const B=this.point,k=B.x,M=B.y,H=this.width%2/2,q=this.height%2/2,V=Math.cos(this.angle),$=Math.sin(this.angle),z=k-Math.round(k)+V*H+$*q,Z=M-Math.round(M)+V*q+$*H,at=new Float64Array(O);if(s.a6.translate(at,at,[z>.5?z-1:z,Z>.5?Z-1:Z,0]),this.alignedProjMatrix=at,O=s.a6.create(),s.a6.scale(O,O,[this.width/2,-this.height/2,1]),s.a6.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=s.a6.create(),s.a6.scale(O,O,[1,-1,1]),s.a6.translate(O,O,[-1,-1,0]),s.a6.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=s.a6.multiply(new Float64Array(16),this.labelPlaneMatrix,E),this._calcFogMatrices(),this._distanceTileDataCache={},O=s.a6.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.bE(this);const nt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.N.transformMat4(nt,nt,g),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,_=this._camera.position,c=1/this.height/this._pixelsPerMercatorPixel,f=[i,i,n];s.N.scale(f,f,c),s.N.scale(_,_,-1),s.N.multiply(_,_,f);const g=s.a6.create();s.a6.translate(g,g,_),s.a6.scale(g,g,f),this.mercatorFogMatrix=g,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,n,c)}_computeCameraPosition(i){const n=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),c=this.point,f=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*n-i/this.worldSize*this._centerAltitude;return[c.x/this.worldSize-_[0]*f,c.y/this.worldSize-_[1]*f,i/this.worldSize*this._centerAltitude-_[2]*f]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],c=i[2];let f=1;this.projection.wrap&&(this.center=this.center.wrap()),c>0&&(f=Math.min((n-_)/c,1)),this._camera.position=s.N.scaleAndAdd([],this._camera.position,i,f),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,n=this._camera.forward(),{pitch:_,bearing:c}=this._camera.getPitchBearing(),f=s.bl(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,g=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.bj(this._maxPitch)),b=Math.max((i[2]-f)/Math.cos(_),g),A=this._zoomFromMercatorZ(b);s.N.scaleAndAdd(i,i,n,b),this._pitch=s.aa(_,s.bj(this.minPitch),s.bj(this.maxPitch)),this.angle=s.bh(c,-Math.PI,Math.PI),this._setZoom(s.aa(A,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.L(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}zoomFromMercatorZAdjusted(i){let n=0,_=s.bx,c=0,f=1/0;for(;_-n>1e-6&&_>n;){const g=n+.5*(_-n),b=this.tileSize*Math.pow(2,g),A=this.getCameraToCenterDistance(this.projection,g,b),E=this.scaleZoom(A/(i*this.tileSize)),O=Math.abs(g-E);O<f&&(f=O,c=g),g<E?n=g:_=g}return c}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,n){const _=Math.min(i.x,n.x),c=Math.max(i.x,n.x),f=Math.min(i.y,n.y),g=Math.max(i.y,n.y);if(f<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const b=[new s.P(_,f),new s.P(c,g),new s.P(_,g),new s.P(c,f)],A=this.renderWorldCopies?-3:0,E=this.renderWorldCopies?4:1;for(const O of b){const S=this.pointRayIntersection(O);if(S.t<0)return!0;const L=this.rayIntersectionCoordinate(S);if(L.x<A||L.y<0||L.x>E||L.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.bF(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.P(0,0),new s.P(this.width,this.height))}zoomDeltaToMovement(i,n){const _=s.N.length(s.N.sub([],this._camera.position,i)),c=this._zoomFromMercatorZ(_)+n;return _-this._mercatorZfromZoom(c)}getCameraPoint(){if(this.projection.name==="globe"){const i=function([n,_,c],f){const g=[n,_,c,1];s.a7.transformMat4(g,g,f);const b=g[3]=Math.max(g[3],1e-6);return g[0]/=b,g[1]/=b,g[2]/=b,g}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.P(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,i))}}getCameraToCenterDistance(i,n=this.zoom,_=this.worldSize){const c=s.bA(i,n,this.width,this.height,1024),f=i.pixelSpaceConversion(this.center.lat,_,c);let g=.5/Math.tan(.5*this._fov)*this.height*f;return this.isOrthographic&&(g=Bs(1,g,Sl(this.pitch>=15?1:this.pitch/15))),g}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.a6.multiply(i,i,this.globeMatrix),i}getFrustum(i){return s.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,this.projection.zAxisUnit==="meters")}}const Fi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},wn=(d,i)=>{if(i>0&&d.terrain&&s.w("Cutoff is currently disabled on terrain"),i<=0||d.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const n=d.transform,_=Math.max(Math.abs(n._zoom-(d.minCutoffZoom-1)),1),c=n.isLODDisabled(!1)?s.O(60,45,n.pitch):s.O(30,15,n.pitch),f=n._farZ-n._nearZ,g=i*n.height,b=((1-(A=c))*n.cameraToCenterDistance+A*(n._farZ+g))*_;var A;return{shouldRenderCutoff:c<1,uniformValues:{u_cutoff_params:[n._nearZ,n._farZ,(b-n._nearZ)/f,(b-g-n._nearZ)/f]}}},ji={cascadeCount:2,shadowMapResolution:2048};class r_{constructor(i,n){this.aabb=i,this.lastCascade=n}}class ec{add(i,n){const _=this.receivers[i.key];_!==void 0?(_.aabb.min[0]=Math.min(_.aabb.min[0],n.min[0]),_.aabb.min[1]=Math.min(_.aabb.min[1],n.min[1]),_.aabb.min[2]=Math.min(_.aabb.min[2],n.min[2]),_.aabb.max[0]=Math.max(_.aabb.max[0],n.max[0]),_.aabb.max[1]=Math.max(_.aabb.max[1],n.max[1]),_.aabb.max[2]=Math.max(_.aabb.max[2],n.max[2])):this.receivers[i.key]=new r_(n,null)}clear(){this.receivers={}}get(i){return this.receivers[i.key]}computeRequiredCascades(i,n,_){const c=s.bS.fromPoints(i.points);let f=0;for(const g in this.receivers){const b=this.receivers[g];if(!b||!c.intersectsAabb(b.aabb))continue;b.aabb.min=c.closestPoint(b.aabb.min),b.aabb.max=c.closestPoint(b.aabb.max);const A=b.aabb.getCorners();for(let E=0;E<_.length;E++){let O=!0;for(const S of A){const L=[S[0]*n,S[1]*n,S[2]];if(s.N.transformMat4(L,L,_[E].matrix),L[0]<-1||L[0]>1||L[1]<-1||L[1]>1){O=!1;break}}if(b.lastCascade=E,f=Math.max(f,E),O)break}}return f+1}}class d_{constructor(i){this.painter=i,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new ec,this._depthMode=new Ne(i.context.gl.LEQUAL,Ne.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,i.tp.registerParameter(ji,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),i.tp.registerParameter(ji,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(const i of this._cascades)i.texture.destroy(),i.framebuffer.destroy();this._cascades=[]}updateShadowParameters(i,n){const _=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!n||!n.properties)return;const c=n.properties.get("shadow-intensity");if(!n.shadowsEnabled()||c<=0||(this._shadowLayerCount=_.style.order.reduce((U,B)=>{const k=_.style._mergedLayers[B];return U+(k.hasShadowPass()&&!k.isHidden(i.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;const f=_.context,g=ji.shadowMapResolution,b=ji.shadowMapResolution;if(this._cascades.length===0||ji.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let U=0;U<ji.cascadeCount;++U){const B=_._shadowMapDebug,k=f.gl,M=f.createFramebuffer(g,b,B,"texture"),H=new s.T(f,{width:g,height:b,data:null},k.DEPTH_COMPONENT);if(M.depthAttachment.set(H.texture),B){const q=new s.T(f,{width:g,height:b,data:null},k.RGBA);M.colorAttachment.set(q.texture)}this._cascades.push({framebuffer:M,texture:H,matrix:[],far:0,boundingSphereRadius:0,frustum:new s.bq,scale:0})}}this.shadowDirection=Lr(n);let A=0;if(i.elevation){const U=i.elevation,B=[1e4,-1e4];U.visibleDemTiles.filter(k=>k.dem).forEach(k=>{const M=k.dem.tree;B[0]=Math.min(B[0],M.minimums[0]),B[1]=Math.max(B[1],M.maximums[0])}),B[0]!==1e4&&(A=(B[1]-B[0])*U.exaggeration())}const E=1.5*i.cameraToCenterDistance,O=3*E,S=new Float64Array(16);for(let U=0;U<this._cascades.length;++U){const B=this._cascades[U];let k=i.height/50,M=1;ji.cascadeCount===1?M=O:U===0?M=E:(k=E,M=O);const[H,q]=ac(i,this.shadowDirection,k,M,ji.shadowMapResolution,A);B.scale=i.scale,B.matrix=H,B.boundingSphereRadius=q,s.a6.invert(S,B.matrix),B.frustum=s.bq.fromInvProjectionMatrix(S,1,0,!0),B.far=M}const L=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[L].far,this._cascades[L].far],this._uniformValues.u_shadow_intensity=c,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/ji.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=ji.shadowMapResolution,this._uniformValues.u_shadowmap_0=Fi.ShadowMap0,this._uniformValues.u_shadowmap_1=Fi.ShadowMap0+1,this._groundShadowTiles=_.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const w=_.transform.elevation;for(const U of this._groundShadowTiles){let B={min:0,max:0};if(w){const k=w.getMinMaxForTile(U);k&&(B=k)}this.addShadowReceiver(U.toUnwrapped(),B.min,B.max)}}get enabled(){return this._enabled}set enabled(i){this._enabled=i}drawShadowPass(i,n){if(!this._enabled)return;const _=this.painter,c=_.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(_.transform.getFrustum(0),_.transform.worldSize,this._cascades),c.viewport.set([0,0,ji.shadowMapResolution,ji.shadowMapResolution]);for(let f=0;f<this._numCascadesToRender;++f){_.currentShadowCascade=f,c.bindFramebuffer.set(this._cascades[f].framebuffer.framebuffer),c.clear({color:s.ax.white,depth:1});for(const g of i.order){const b=i._mergedLayers[g];if(!b.hasShadowPass()||b.isHidden(_.transform.zoom))continue;const A=i.getLayerSourceCache(b),E=A?n[A.id]:void 0;(b.type==="model"||E&&E.length)&&_.renderLayer(_,A,b,E)}}_.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;const i=this.painter,n=i.style,_=i.context,c=n.directionalLight,f=n.ambientLight;if(!c||!f)return;const g=[],b=wn(i,i.longestCutoffRange);b.shouldRenderCutoff&&g.push("RENDER_CUTOFF");const A=Nl(c,f),E=new Ne(_.gl.LEQUAL,Ne.ReadOnly,i.depthRangeFor3D);for(const O of this._groundShadowTiles){const S=O.toUnwrapped(),L=i.isTileAffectedByFog(O),w=i.getOrCreateProgram("groundShadow",{defines:g,overrideFog:L});this.setupShadows(S,w),i.uploadCommonUniforms(_,w,S,null,b);const U={u_matrix:i.transform.calculateProjMatrix(S),u_ground_shadow_factor:A};w.draw(i,_.gl.TRIANGLES,E,Be.disabled,Je.multiply,Le.disabled,U,"ground_shadow",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments,{},i.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Je.unblended:Je.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(i){const n=this.painter.transform,_=n.calculatePosMatrix(i,n.worldSize);return s.a6.multiply(_,this._cascades[this.painter.currentShadowCascade].matrix,_),Float32Array.from(_)}calculateShadowPassMatrixFromMatrix(i){return s.a6.multiply(i,this._cascades[this.painter.currentShadowCascade].matrix,i),Float32Array.from(i)}setupShadows(i,n,_,c=0){if(!this._enabled)return;const f=this.painter.transform,g=this.painter.context,b=g.gl,A=this._uniformValues,E=new Float64Array(16),O=f.calculatePosMatrix(i,f.worldSize);for(let S=0;S<this._cascades.length;S++)s.a6.multiply(E,this._cascades[S].matrix,O),A[S===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(E),g.activeTexture.set(b.TEXTURE0+Fi.ShadowMap0+S),this._cascades[S].texture.bind(b.NEAREST,b.CLAMP_TO_EDGE);if(this.useNormalOffset=!!_,this.useNormalOffset){const S=s.bR(i.canonical),L=2/f.tileSize*s.V/ji.shadowMapResolution,w=L*this._cascades[0].boundingSphereRadius,U=L*this._cascades[this._cascades.length-1].boundingSphereRadius,B=(_==="vector-tile"?1:3)/Math.pow(2,c-i.canonical.z-(1-f.zoom+Math.floor(f.zoom)));A.u_shadow_normal_offset=[S,w*B,U*B],A.u_shadow_bias=[6e-5,.0012,.012]}else A.u_shadow_bias=[36e-5,.0012,.012];n.setShadowUniformValues(g,A)}setupShadowsFromMatrix(i,n,_=!1){if(!this._enabled)return;const c=this.painter.context,f=c.gl,g=this._uniformValues,b=new Float64Array(16);for(let A=0;A<ji.cascadeCount;A++)s.a6.multiply(b,this._cascades[A].matrix,i),g[A===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(b),c.activeTexture.set(f.TEXTURE0+Fi.ShadowMap0+A),this._cascades[A].texture.bind(f.NEAREST,f.CLAMP_TO_EDGE);this.useNormalOffset=_,_?(g.u_shadow_normal_offset=[1,5,5],g.u_shadow_bias=[6e-5,.0012,.012]):g.u_shadow_bias=[36e-5,.0012,.012],n.setShadowUniformValues(c,g)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(i,n,_,c){if(c[2]>=0)return{};const f=function(A,E,O){const S=O/(1<<A.canonical.z);return new s.bS([A.canonical.x*S+A.wrap*O,A.canonical.y*S+A.wrap*O,0],[(A.canonical.x+1)*S+A.wrap*O,(A.canonical.y+1)*S+A.wrap*O,E])}(i,n,_).getCorners(),g=n/-c[2];c[0]<0?(s.N.add(f[0],f[0],[c[0]*g,0,0]),s.N.add(f[3],f[3],[c[0]*g,0,0])):c[0]>0&&(s.N.add(f[1],f[1],[c[0]*g,0,0]),s.N.add(f[2],f[2],[c[0]*g,0,0])),c[1]<0?(s.N.add(f[0],f[0],[0,c[1]*g,0]),s.N.add(f[1],f[1],[0,c[1]*g,0])):c[1]>0&&(s.N.add(f[2],f[2],[0,c[1]*g,0]),s.N.add(f[3],f[3],[0,c[1]*g,0]));const b={};return b.vertices=f,b.planes=[rs(f[1],f[0],f[4]),rs(f[2],f[1],f[5]),rs(f[3],f[2],f[6]),rs(f[0],f[3],f[7])],b}addShadowReceiver(i,n,_){this._receivers.add(i,s.bS.fromTileIdAndHeight(i,n,_))}getMaxCascadeForTile(i){const n=this._receivers.get(i);return n&&n.lastCascade?n.lastCascade:0}}function rs(d,i,n){const _=s.N.sub([],n,i),c=s.N.sub([],d,i),f=s.N.cross([],_,c),g=s.N.length(f);return g===0?[0,0,1,0]:(s.N.scale(f,f,1/g),[f[0],f[1],f[2],-s.N.dot(f,i)])}function Lr(d){const i=d.properties.get("direction"),n=s.bQ(i.x,i.y,i.z);n[2]=s.aa(n[2],0,75);const _=s.bT([n[0],n[1],n[2]]);return s.N.fromValues(_.x,_.y,_.z)}function Nl(d,i){const n=d.properties.get("color"),_=d.properties.get("intensity"),c=d.properties.get("direction"),f=[c.x,c.y,c.z],g=i.properties.get("color"),b=i.properties.get("intensity"),A=Math.max(s.N.dot([0,0,1],f),0),E=[0,0,0];s.N.scale(E,g.toArray01Linear().slice(0,3),b);const O=[0,0,0];return s.N.scale(O,n.toArray01Linear().slice(0,3),A*_),s.bU([E[0]>0?E[0]/(E[0]+O[0]):0,E[1]>0?E[1]/(E[1]+O[1]):0,E[2]>0?E[2]/(E[2]+O[2]):0])}function ac(d,i,n,_,c,f){const g=d.zoom,b=d.scale,A=d.worldSize,E=1/A,O=d.aspect,S=Math.sqrt(1+O*O)*Math.tan(.5*d.fovX),L=S*S,w=_-n,U=_+n;let B,k;L>w/U?(B=_,k=_*S):(B=.5*U*(1+L),k=.5*Math.sqrt(w*w+2*(_*_+n*n)*L+U*U*L*L));const M=d.projection.pixelsPerMeter(d.center.lat,A),H=d._camera.getCameraToWorldMercator(),q=[0,0,-B*E];s.N.transformMat4(q,q,H);let V=k*E;const $=d._edgeInsets;if(!($.left===0&&$.top===0&&$.right===0&&$.bottom===0||$.left===$.right&&$.top===$.bottom)){const qt=d._camera.getWorldToCamera(d.worldSize,d.projection.zAxisUnit==="meters"?M:1),Xt=d._camera.getCameraToClipPerspective(d._fov,d.width/d.height,n,_);Xt[8]=2*-d.centerOffset.x/d.width,Xt[9]=2*d.centerOffset.y/d.height;const ae=new Float64Array(16);s.a6.mul(ae,Xt,qt);const he=new Float64Array(16);s.a6.invert(he,ae);const Ce=s.bq.fromInvProjectionMatrix(he,A,g,!0);for(const xe of Ce.points){const Ee=((z=xe)[0]/=b,z[1]/=b,z[2]=s.bl(z[2],d._center.lat),z);V=Math.max(V,s.N.len(s.N.subtract([],q,Ee)))}}var z;V*=c/(c-1);const Z=Math.acos(i[2]),at=Math.atan2(-i[0],-i[1]),nt=new Fs;nt.position=q,nt.setPitchBearing(Z,at);const rt=nt.getWorldToCamera(A,M),yt=V*A,ut=Math.min(d._mercatorZfromZoom(17)*A*-2,-2*yt),It=nt.getCameraToClipOrthographic(-yt,yt,-yt,yt,ut,(yt+f*M)/i[2]),vt=new Float64Array(16);s.a6.multiply(vt,It,rt);const Ut=s.N.fromValues(Math.floor(1e6*q[0])/1e6*A,Math.floor(1e6*q[1])/1e6*A,0),ct=.5*c,Tt=[0,0,0];s.N.transformMat4(Tt,Ut,vt),s.N.scale(Tt,Tt,ct);const lt=[Math.floor(Tt[0]),Math.floor(Tt[1]),Math.floor(Tt[2])],pt=[0,0,0];s.N.sub(pt,Tt,lt),s.N.scale(pt,pt,-1/ct);const kt=new Float64Array(16);return s.a6.identity(kt),s.a6.translate(kt,kt,pt),s.a6.multiply(vt,kt,vt),[vt,yt]}const Wn=(d,i)=>Te(d,i&&i.filter(n=>n.identifier!=="source.canvas")),ic=s.ac(ra,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),Us=s.ac(ra,["setCenter","setZoom","setBearing","setPitch"]),__={version:8,layers:[],sources:{}},oc={duration:300,delay:0},bf=new Set(["fill","line","background","hillshade","raster"]);class Fo extends s.E{constructor(i,n={}){super(),this.map=i,this.scope=n.scope||"",this.fragments=[],this.importDepth=n.importDepth||0,this.importsCache=n.importsCache||new Map,this.resolvedImports=n.resolvedImports||new Set,this.transition=s.e({},oc),this._buildingIndex=new ju(this),this.crossTileSymbolIndex=new s_,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=n.styleChanges||new yo,this.dispatcher=n.dispatcher?n.dispatcher:new s.bW(s.bX(),this),n.imageManager?this.imageManager=n.imageManager:(this.imageManager=new ki,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=n.glyphManager?n.glyphManager:new s.bY(i._requestManager,n.localFontFamily?s.bZ.all:n.localIdeographFontFamily?s.bZ.ideographs:s.bZ.none,n.localFontFamily||n.localIdeographFontFamily),n.modelManager?this.modelManager=n.modelManager:(this.modelManager=new vn(i._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=n.configOptions?n.configOptions:new Map,this._configDependentLayers=n.configDependentLayers?n.configDependentLayers:new Set,this._config=n.config,this.dispatcher.broadcast("setReferrer",s.b_());const _=this;this._rtlTextPluginCallback=Fo.registerForPluginStateChange(c=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:c.pluginStatus,pluginURL:c.pluginURL},(f,g)=>{if(s.b$(f),g&&g.every(b=>b))for(const b in _._sourceCaches){const A=_._sourceCaches[b],E=A.getSource().type;E!=="vector"&&E!=="geojson"||A.reload()}})}),this.on("data",c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const f=this.getOwnSource(c.sourceId);if(f&&f.vectorLayerIds)for(const g in this._layers){const b=this._layers[g];b.source===f.id&&this._validateLayer(b)}})}loadURL(i,n={}){this.fire(new s.b("dataloading",{dataType:"style"}));const _=typeof n.validate=="boolean"?n.validate:!s.c0(i);i=this.map._requestManager.normalizeStyleURL(i,n.accessToken),this.resolvedImports.add(i);const c=this.importsCache.get(i);if(c)return this._load(c,_);const f=this.map._requestManager.transformRequest(i,s.R.Style);this._request=s.g(f,(g,b)=>{if(this._request=null,g)this.fire(new s.a(g));else if(b)return this.importsCache.set(i,b),this._load(b,_)})}loadJSON(i,n={}){this.fire(new s.b("dataloading",{dataType:"style"})),this._request=s.f.frame(()=>{this._request=null,this._load(i,n.validate!==!1)})}loadEmpty(){this.fire(new s.b("dataloading",{dataType:"style"})),this._load(__,!1)}_loadImports(i,n,_){if(this.importDepth>=4)return s.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const c=[];for(const f of i){const g=this._createFragmentStyle(f),b=new Promise(O=>{g.once("style.import.load",O),g.once("error",O)}).then(()=>this.mergeAll());if(c.push(b),this.resolvedImports.has(f.url)){g.loadEmpty();continue}const A=f.data||this.importsCache.get(f.url);A?g.loadJSON(A,{validate:n}):f.url?g.loadURL(f.url,{validate:n}):g.loadEmpty();const E={style:g,id:f.id,config:f.config};if(_){const O=this.fragments.findIndex(({id:S})=>S===_);this.fragments=this.fragments.slice(0,O).concat(E).concat(this.fragments.slice(O))}else this.fragments.push(E)}return Promise.allSettled(c)}_createFragmentStyle(i){const n=this.scope?s.ag(i.id,this.scope):i.id,_=new Fo(this.map,{scope:n,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:i.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return _.setEventedParent(this.map,{style:_}),_}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const i=this.isRootStyle();this._shouldPrecompile=i,this.fire(new s.b(i?"style.load":"style.import.load"))}_load(i,n){const _=i.schema;if(this.isRootStyle()&&(i.fragment||_&&i.fragment!==!1)){const g=s.e({},__,{imports:[{id:"basemap",data:i,url:""}]});return void this._load(g,n)}if(this.setConfig(this._config,_),n&&Wn(this,xo(i)))return;this._loaded=!0,this.stylesheet=s.c1(i);for(const g in i.sources)this.addSource(g,i.sources[g],{validate:!1,isInitialLoad:!0});i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(i.glyphs,this.scope);const c=qu(this.stylesheet.layers);if(this._order=c.map(g=>g.id),this.stylesheet.light&&s.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const g=this.stylesheet.lights[0];this.light=new Ae(g.properties,g.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Ae(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const g of c){const b=s.c2(g,this.scope,this.options);b.isConfigDependent&&this._configDependentLayers.add(b.fqid),b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize();const A=this.getOwnLayerSourceCache(b),E=!!this.directionalLight&&this.directionalLight.shadowsEnabled();A&&b.canCastShadows()&&E&&(A.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const f=this.stylesheet.terrain;f&&(this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=s.f.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?s.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(f,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new s.b("data",{dataType:"style"})),i.imports?this._loadImports(i.imports,n).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return this.importDepth===0}mergeAll(){let i,n,_,c,f,g,b,A;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(E=>{if(E.stylesheet){if(E.light!=null&&(i=E.light),E.stylesheet.lights)for(const O of E.stylesheet.lights)O.type==="ambient"&&E.ambientLight!=null&&(n=E.ambientLight),O.type==="directional"&&E.directionalLight!=null&&(_=E.directionalLight);c=this._prioritizeTerrain(c,E.terrain,E.stylesheet.terrain),E.stylesheet.fog&&E.fog!=null&&(f=E.fog),E.stylesheet.camera!=null&&(A=E.stylesheet.camera),E.stylesheet.projection!=null&&(g=E.stylesheet.projection),E.stylesheet.transition!=null&&(b=E.stylesheet.transition)}}),this.light=i,this.ambientLight=n,this.directionalLight=_,this.fog=f,c===null?delete this.terrain:this.terrain=c,this.camera=A||{"camera-projection":"perspective"},this.projection=g||{name:"mercator"},this.transition=s.e({},oc,b),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(i){const n=_=>{for(const c of _.fragments)n(c.style);i(_)};n(this)}_prioritizeTerrain(i,n,_){const c=i&&i.drapeRenderMode===0;return _===null?n&&n.drapeRenderMode===0?n:c?i:null:n!=null&&(!i||c||n&&n.drapeRenderMode===1)?n:i}mergeTerrain(){let i;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(n=>{i=this._prioritizeTerrain(i,n.terrain,n.stylesheet.terrain)}),i===null?delete this.terrain:this.terrain=i}mergeProjection(){let i;this.forEachFragmentStyle(n=>{n.stylesheet.projection!=null&&(i=n.stylesheet.projection)}),this.projection=i||{name:"mercator"}}mergeSources(){const i={},n={},_={};this.forEachFragmentStyle(c=>{for(const f in c._sourceCaches){const g=s.ag(f,c.scope);i[g]=c._sourceCaches[f]}for(const f in c._otherSourceCaches){const g=s.ag(f,c.scope);n[g]=c._otherSourceCaches[f]}for(const f in c._symbolSourceCaches){const g=s.ag(f,c.scope);_[g]=c._symbolSourceCaches[f]}}),this._mergedSourceCaches=i,this._mergedOtherSourceCaches=n,this._mergedSymbolSourceCaches=_}mergeLayers(){const i={},n=[],_={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(f=>{for(const g of f._order){const b=f._layers[g];if(b.type==="slot"){const A=s.c3(g);if(i[A])continue;i[A]=[]}b.slot&&i[b.slot]?i[b.slot].push(b):n.push(b)}}),this._mergedOrder=[];const c=(f=[])=>{for(const g of f)if(g.type==="slot"){const b=s.c3(g.id);i[b]&&c(i[b])}else{const b=s.ag(g.id,g.scope);this._mergedOrder.push(b),_[b]=g,g.is3D()&&(this._has3DLayers=!0),g.type==="circle"&&(this._hasCircleLayers=!0),g.type==="symbol"&&(this._hasSymbolLayers=!0)}};c(n),this._mergedLayers=_,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(i){return this.stylesheet.camera=s.e({},this.stylesheet.camera,i),this.camera=this.stylesheet.camera,this}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(i){this._spriteRequest=function(n,_,c){let f,g,b;const A=s.f.devicePixelRatio>1?"@2x":"";let E=s.g(_.transformRequest(_.normalizeSpriteURL(n,A,".json"),s.R.SpriteJSON),(L,w)=>{E=null,b||(b=L,f=w,S())}),O=s.d(_.transformRequest(_.normalizeSpriteURL(n,A,".png"),s.R.SpriteImage),(L,w)=>{O=null,b||(b=L,g=w,S())});function S(){if(b)c(b);else if(f&&g){const L=s.f.getImageData(g),w={};for(const U in f){const{width:B,height:k,x:M,y:H,sdf:q,pixelRatio:V,stretchX:$,stretchY:z,content:Z}=f[U],at=new s.h({width:B,height:k});s.h.copy(L,at,{x:M,y:H},{x:0,y:0},{width:B,height:k}),w[U]={data:at,pixelRatio:V,sdf:q,stretchX:$,stretchY:z,content:Z}}c(null,w)}}return{cancel(){E&&(E.cancel(),E=null),O&&(O.cancel(),O=null)}}}(i,this.map._requestManager,(n,_)=>{if(this._spriteRequest=null,n)this.fire(new s.a(n));else if(_)for(const c in _)this.imageManager.addImage(c,this.scope,_[c]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new s.b("data",{dataType:"style"}))})}_validateLayer(i){const n=this.getOwnSource(i.source);if(!n)return;const _=i.sourceLayer;_&&(n.type==="geojson"||n.vectorLayerIds&&n.vectorLayerIds.indexOf(_)===-1)&&this.fire(new s.a(new Error(`Source layer "${_}" does not exist on source "${n.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(const{style:i}of this.fragments)if(!i.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((i,n)=>{const _=this.fragments[n];return _&&_.style&&(i.data=_.style.serialize()),i})}_serializeSources(){const i={};for(const n in this._sourceCaches){const _=this._sourceCaches[n].getSource();i[_.id]||(i[_.id]=_.serialize())}return i}_serializeLayers(i){const n=[];for(const _ of i){const c=this._layers[_];c&&c.type!=="custom"&&n.push(c.serialize())}return n}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(i){return!!this.terrain&&(typeof i.isLayerDraped=="function"?i.isLayerDraped(this.getLayerSourceCache(i)):bf.has(i.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(i){const n=this.getOwnLayer(i);if(n)return n;this.fire(new s.a(new Error(`The layer '${i}' does not exist in the map's style.`)))}_checkSource(i){const n=this.getOwnSource(i);if(n)return n;this.fire(new s.a(new Error(`The source '${i}' does not exist in the map's style.`)))}update(i){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(i),this.directionalLight&&this.directionalLight.recalculate(i);const n=this.calculateLightsBrightness();i.brightness=n||0,n!==this._brightness&&(this._brightness=n,this.dispatcher.broadcast("setBrightness",n));const _=this._changes.isDirty();if(this._changes.isDirty()){const f=this._changes.getLayerUpdatesByScope();for(const g in f){const{updatedIds:b,removedIds:A}=f[g];(b||A)&&this._updateWorkerLayers(g,b,A)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(i),this.light&&this.light.updateTransitions(i),this.ambientLight&&this.ambientLight.updateTransitions(i),this.directionalLight&&this.directionalLight.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._changes.reset()}const c={};for(const f in this._mergedSourceCaches){const g=this._mergedSourceCaches[f];c[f]=g.used,g.used=!1,g.tileCoverLift=0}for(const f of this._mergedOrder){const g=this._mergedLayers[f];if(g.recalculate(i,this._availableImages),!g.isHidden(i.zoom)){const b=this.getLayerSourceCache(g);b&&(b.used=!0,b.tileCoverLift=Math.max(b.tileCoverLift,g.tileCoverLift()))}if(!this._precompileDone&&this._shouldPrecompile)for(let b=g.minzoom||0;b<(g.maxzoom||25.5);b++){const A=this.map.painter;if(A){const E=g.getProgramIds();if(!E)continue;for(const O of E){const S=g.getDefaultProgramParams(O,i.zoom);S&&(A.style=this,this.fog&&(A._fogVisible=!0,S.overrideFog=!0,A.getOrCreateProgram(O,S)),A._fogVisible=!1,S.overrideFog=!1,A.getOrCreateProgram(O,S),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(S.overrideRtt=!0,A.getOrCreateProgram(O,S)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(const f in c){const g=this._mergedSourceCaches[f];c[f]!==g.used&&g.getSource().fire(new s.b("data",{sourceDataType:"visibility",dataType:"source",sourceId:g.getSource().id}))}this.light&&this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),_&&this.fire(new s.b("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=this._changes.getUpdatedImages();if(i.length){for(const n in this._sourceCaches)this._sourceCaches[n].reloadTilesForDependencies(["icons","patterns"],i);this._changes.resetUpdatedImages()}}_updateWorkerLayers(i,n,_){const c=this.getFragmentStyle(i);c&&this.dispatcher.broadcast("updateLayers",{layers:n?c._serializeLayers(n):[],scope:i,removedIds:_||[],options:c.options})}setState(i){if(this._checkLoaded(),Wn(this,xo(i)))return!1;(i=s.c1(i)).layers=qu(i.layers);const n=function(c,f){if(!c)return[{command:ra.setStyle,args:[f]}];let g=[];try{if(!ot(c.version,f.version))return[{command:ra.setStyle,args:[f]}];ot(c.center,f.center)||g.push({command:ra.setCenter,args:[f.center]}),ot(c.zoom,f.zoom)||g.push({command:ra.setZoom,args:[f.zoom]}),ot(c.bearing,f.bearing)||g.push({command:ra.setBearing,args:[f.bearing]}),ot(c.pitch,f.pitch)||g.push({command:ra.setPitch,args:[f.pitch]}),ot(c.sprite,f.sprite)||g.push({command:ra.setSprite,args:[f.sprite]}),ot(c.glyphs,f.glyphs)||g.push({command:ra.setGlyphs,args:[f.glyphs]}),ot(c.imports,f.imports)||function(S=[],L=[],w){L=L||[];const U=(S=S||[]).map(Rn),B=L.map(Rn),k=S.reduce(Er,{}),M=L.reduce(Er,{}),H=U.slice();let q,V,$,z;for(q=0,V=0;q<U.length;q++)$=U[q],M.hasOwnProperty($)?V++:(w.push({command:ra.removeImport,args:[$]}),H.splice(H.indexOf($,V),1));for(q=0,V=0;q<B.length;q++)$=B[B.length-1-q],H[H.length-1-q]!==$&&(k.hasOwnProperty($)?(w.push({command:ra.removeImport,args:[$]}),H.splice(H.lastIndexOf($,H.length-V),1)):V++,z=H[H.length-q],w.push({command:ra.addImport,args:[M[$],z]}),H.splice(H.length-q,0,$));for(const Z of L){const at=k[Z.id];at&&!ot(at,Z)&&w.push({command:ra.updateImport,args:[Z.id,Z]})}}(c.imports,f.imports,g),ot(c.transition,f.transition)||g.push({command:ra.setTransition,args:[f.transition]}),ot(c.light,f.light)||g.push({command:ra.setLight,args:[f.light]}),ot(c.fog,f.fog)||g.push({command:ra.setFog,args:[f.fog]}),ot(c.projection,f.projection)||g.push({command:ra.setProjection,args:[f.projection]}),ot(c.lights,f.lights)||g.push({command:ra.setLights,args:[f.lights]}),ot(c.camera,f.camera)||g.push({command:ra.setCamera,args:[f.camera]});const b={},A=[];(function(S,L,w,U){let B;for(B in L=L||{},S=S||{})S.hasOwnProperty(B)&&(L.hasOwnProperty(B)||Yd(B,w,U));for(B in L){if(!L.hasOwnProperty(B))continue;const k=L[B];S.hasOwnProperty(B)?ot(S[B],k)||(S[B].type==="geojson"&&k.type==="geojson"&&cf(S,L,B)?w.push({command:ra.setGeoJSONSourceData,args:[B,k.data]}):uf(B,L,w,U)):xl(B,L,w)}})(c.sources,f.sources,A,b);const E=[];c.layers&&c.layers.forEach(S=>{S.source&&b[S.source]?g.push({command:ra.removeLayer,args:[S.id]}):E.push(S)});let O=c.terrain;O&&b[O.source]&&(g.push({command:ra.setTerrain,args:[void 0]}),O=void 0),g=g.concat(A),ot(O,f.terrain)||g.push({command:ra.setTerrain,args:[f.terrain]}),function(S,L,w){L=L||[];const U=(S=S||[]).map(Rn),B=L.map(Rn),k=S.reduce(Er,{}),M=L.reduce(Er,{}),H=U.slice(),q=Object.create(null);let V,$,z,Z,at,nt,rt;for(V=0,$=0;V<U.length;V++)z=U[V],M.hasOwnProperty(z)?$++:(w.push({command:ra.removeLayer,args:[z]}),H.splice(H.indexOf(z,$),1));for(V=0,$=0;V<B.length;V++)z=B[B.length-1-V],H[H.length-1-V]!==z&&(k.hasOwnProperty(z)?(w.push({command:ra.removeLayer,args:[z]}),H.splice(H.lastIndexOf(z,H.length-$),1)):$++,nt=H[H.length-V],w.push({command:ra.addLayer,args:[M[z],nt]}),H.splice(H.length-V,0,z),q[z]=!0);for(V=0;V<B.length;V++)if(z=B[V],Z=k[z],at=M[z],!q[z]&&!ot(Z,at))if(ot(Z.source,at.source)&&ot(Z["source-layer"],at["source-layer"])&&ot(Z.type,at.type)){for(rt in Sn(Z.layout,at.layout,w,z,null,ra.setLayoutProperty),Sn(Z.paint,at.paint,w,z,null,ra.setPaintProperty),ot(Z.slot,at.slot)||w.push({command:ra.setSlot,args:[z,at.slot]}),ot(Z.filter,at.filter)||w.push({command:ra.setFilter,args:[z,at.filter]}),ot(Z.minzoom,at.minzoom)&&ot(Z.maxzoom,at.maxzoom)||w.push({command:ra.setLayerZoomRange,args:[z,at.minzoom,at.maxzoom]}),Z)Z.hasOwnProperty(rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&rt!=="slot"&&(rt.indexOf("paint.")===0?Sn(Z[rt],at[rt],w,z,rt.slice(6),ra.setPaintProperty):ot(Z[rt],at[rt])||w.push({command:ra.setLayerProperty,args:[z,rt,at[rt]]}));for(rt in at)at.hasOwnProperty(rt)&&!Z.hasOwnProperty(rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&rt!=="slot"&&(rt.indexOf("paint.")===0?Sn(Z[rt],at[rt],w,z,rt.slice(6),ra.setPaintProperty):ot(Z[rt],at[rt])||w.push({command:ra.setLayerProperty,args:[z,rt,at[rt]]}))}else w.push({command:ra.removeLayer,args:[z]}),nt=H[H.lastIndexOf(z)+1],w.push({command:ra.addLayer,args:[at,nt]})}(E,f.layers,g)}catch(b){console.warn("Unable to compute style diff:",b),g=[{command:ra.setStyle,args:[f]}]}return g}(this.serialize(),i).filter(c=>!(c.command in Us));if(n.length===0)return!1;const _=n.filter(c=>!(c.command in ic));if(_.length>0)throw new Error(`Unimplemented: ${_.map(c=>c.command).join(", ")}.`);return n.forEach(c=>{this[c.command].apply(this,c.args)}),this.stylesheet=i,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(i,n){return this.getImage(i)?this.fire(new s.a(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,this.scope,n),this._afterImageUpdated(i),this)}updateImage(i,n){this.imageManager.updateImage(i,this.scope,n)}getImage(i){return this.imageManager.getImage(i,this.scope)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i,this.scope),this._afterImageUpdated(i),this):this.fire(new s.a(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(i),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new s.b("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(i,n,_={}){return this._checkLoaded(),this._validate(ge,`models.${i}`,n,null,_)||(this.modelManager.addModel(i,n,this.scope),this._changes.setDirty()),this}hasModel(i){return this.modelManager.hasModel(i,this.scope)}removeModel(i){return this.hasModel(i)?(this.modelManager.removeModel(i,this.scope),this):this.fire(new s.a(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(i,n,_={}){if(this._checkLoaded(),this.getOwnSource(i)!==void 0)throw new Error(`There is already a source with ID "${i}".`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(en,`sources.${i}`,n,null,_))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const c=gi(i,n,this.dispatcher,this);c.scope=this.scope,c.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c.id),source:c.serialize(),sourceId:c.id}));const f=g=>{const b=(g?"symbol:":"other:")+c.id,A=s.ag(b,this.scope),E=this._sourceCaches[b]=new Mo(A,c,g);(g?this._symbolSourceCaches:this._otherSourceCaches)[c.id]=E,E.onAdd(this.map)};f(!1),n.type!=="vector"&&n.type!=="geojson"||f(!0),c.onAdd&&c.onAdd(this.map),_.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(i){this._checkLoaded();const n=this.getOwnSource(i);if(!n)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===i)return this.fire(new s.a(new Error(`Source "${i}" cannot be removed while layer "${c}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===i)return this.fire(new s.a(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const _=this.getOwnSourceCaches(i);for(const c of _){const f=s.c3(c.id);delete this._sourceCaches[f],this._changes.discardSourceCacheUpdate(c.id),c.fire(new s.b("data",{sourceDataType:"metadata",dataType:"source",sourceId:c.getSource().id})),c.setEventedParent(null),c.clearTiles()}return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],this.mergeSources(),n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(i,n){this._checkLoaded(),this.getOwnSource(i).setData(n),this._changes.setDirty()}getOwnSource(i){const n=this.getOwnSourceCache(i);return n&&n.getSource()}getOwnSources(){const i=[];for(const n in this._otherSourceCaches){const _=this.getOwnSourceCache(n);_&&i.push(_.getSource())}return i}areTilesLoaded(){const i=this._mergedSourceCaches;for(const n in i){const _=i[n]._tiles;for(const c in _){const f=_[c];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}setLights(i){if(this._checkLoaded(),!i)return delete this.ambientLight,void delete this.directionalLight;const n=this._getTransitionParameters();for(const c of i){if(this._validate(Mt,"lights",c))return;switch(c.type){case"ambient":if(this.ambientLight){const f=this.ambientLight;f.set(c),f.updateTransitions(n)}else this.ambientLight=new Gi(c,to,this.scope,this.options);break;case"directional":if(this.directionalLight){const f=this.directionalLight;f.set(c),f.updateTransitions(n)}else this.directionalLight=new Gi(c,fi,this.scope,this.options)}}const _=new s.K(this.z||0,n);this.ambientLight&&this.ambientLight.recalculate(_),this.directionalLight&&this.directionalLight.recalculate(_),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const i=this.directionalLight,n=this.ambientLight;if(!i||!n)return;const _=S=>.2126*(S[0]<=.03928?S[0]/12.92:Math.pow((S[0]+.055)/1.055,2.4))+.7152*(S[1]<=.03928?S[1]/12.92:Math.pow((S[1]+.055)/1.055,2.4))+.0722*(S[2]<=.03928?S[2]/12.92:Math.pow((S[2]+.055)/1.055,2.4)),c=i.properties.get("color").toArray01(),f=i.properties.get("intensity"),g=i.properties.get("direction"),b=1-s.bQ(g.x,g.y,g.z)[2]/90,A=_(c)*f*b,E=n.properties.get("color").toArray01(),O=n.properties.get("intensity");return(A+_(E)*O)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const i=[];return this.directionalLight&&i.push(this.directionalLight.get()),this.ambientLight&&i.push(this.ambientLight.get()),i}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(i){if(!i)return this;if(s.c4(i)){const n=s.c5(i),_=this.fragments.find(({id:f})=>f===n);if(!_)throw new Error(`Style import not found: ${i}`);const c=s.c3(i);return _.style.getFragmentStyle(c)}{const n=this.fragments.find(({id:_})=>_===i);if(!n)throw new Error(`Style import not found: ${i}`);return n.style}}getConfigProperty(i,n){const _=this.getFragmentStyle(i);if(!_)return null;const c=s.ag(n,_.scope),f=_.options.get(c),g=f?f.value||f.default:null;return g?g.serialize():null}setConfigProperty(i,n,_){const c=s.r(_);if(c.result!=="success")return void Wn(this,c.value);const f=c.value.expression,g=this.getFragmentStyle(i);if(!g)return;const b=s.ag(n,g.scope),A=g.options.get(b);A&&(this.options.set(b,{...A,value:f}),this.updateConfigDependencies())}setConfig(i,n){if(this._config=i,i||n)if(n)for(const _ in n){let c,f;const g=s.r(n[_].default);if(g.result==="success"&&(c=g.value.expression),i&&i[_]!==void 0){const L=s.r(i[_]);L.result==="success"&&(f=L.value.expression)}const{minValue:b,maxValue:A,stepValue:E,type:O,values:S}=n[_];if(c){const L=s.ag(_,this.scope);this.options.set(L,{default:c,value:f,minValue:b,maxValue:A,stepValue:E,type:O,values:S})}else this.fire(new s.a(new Error(`No schema defined for config option "${_}".`)))}else this.fire(new s.a(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const i of this._configDependentLayers){const n=this.getLayer(i);n&&(n.possiblyEvaluateVisibility(),this._updateLayer(n))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this._changes.setDirty()}addLayer(i,n,_={}){this._checkLoaded();const c=i.id;if(this._layers[c])return void this.fire(new s.a(new Error(`Layer with id "${c}" already exists on this map`)));let f;if(i.type==="custom"){if(Wn(this,s.c6(i)))return;f=s.c2(i,this.scope,this.options)}else{if(typeof i.source=="object"&&(this.addSource(c,i.source),i=s.c1(i),i=s.e(i,{source:c})),this._validate(dt,`layers.${c}`,i,{arrayIndex:-1},_))return;f=s.c2(i,this.scope,this.options),this._validateLayer(f),f.setEventedParent(this,{layer:{id:c}}),this._serializedLayers[f.id]=f.serialize()}f.isConfigDependent&&this._configDependentLayers.add(f.fqid);let g=this._order.length;if(n){const O=this._order.indexOf(n);if(O===-1)return void this.fire(new s.a(new Error(`Layer with id "${n}" does not exist on this map.`)));f.slot===this._layers[n].slot?g=O:s.w(`Layer with id "${n}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(g,0,c),this._layerOrderChanged=!0,this._layers[c]=f;const b=this.getOwnLayerSourceCache(f),A=!!this.directionalLight&&this.directionalLight.shadowsEnabled();b&&f.canCastShadows()&&A&&(b.castsShadows=!0);const E=this._changes.getRemovedLayer(f);if(E&&f.source&&b&&f.type!=="custom"){this._changes.discardLayerRemoval(f);const O=s.ag(f.source,f.scope);E.type!==f.type?this._changes.updateSourceCache(O,"clear"):(this._changes.updateSourceCache(O,"reload"),b.pause())}this._updateLayer(f),f.onAdd&&f.onAdd(this.map),f.scope=this.scope,this.mergeLayers()}moveLayer(i,n){this._checkLoaded();const _=this._checkLayer(i);if(!_||i===n)return;const c=this._order.indexOf(i);this._order.splice(c,1);let f=this._order.length;if(n){const g=this._order.indexOf(n);if(g===-1)return void this.fire(new s.a(new Error(`Layer with id "${n}" does not exist on this map.`)));_.slot===this._layers[n].slot?f=g:s.w(`Layer with id "${n}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(f,0,i),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(i){this._checkLoaded();const n=this._checkLayer(i);if(!n)return;n.setEventedParent(null);const _=this._order.indexOf(i);this._order.splice(_,1),delete this._layers[i],delete this._serializedLayers[i],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(n.fqid),this._changes.removeLayer(n);const c=this.getOwnLayerSourceCache(n);if(c&&c.castsShadows){let f=!1;for(const g in this._layers)if(this._layers[g].source===n.source&&this._layers[g].canCastShadows()){f=!0;break}c.castsShadows=f}n.onRemove&&n.onRemove(this.map),this.mergeLayers()}getOwnLayer(i){return this._layers[i]}hasLayer(i){return i in this._mergedLayers}hasLayerType(i){for(const n in this._layers)if(this._layers[n].type===i)return!0;return!1}setLayerZoomRange(i,n,_){this._checkLoaded();const c=this._checkLayer(i);c&&(c.minzoom===n&&c.maxzoom===_||(n!=null&&(c.minzoom=n),_!=null&&(c.maxzoom=_),this._updateLayer(c)))}setSlot(i,n){this._checkLoaded();const _=this._checkLayer(i);_&&_.slot!==n&&(_.slot=n,this._updateLayer(_))}setFilter(i,n,_={}){this._checkLoaded();const c=this._checkLayer(i);if(c&&!ot(c.filter,n))return n==null?(c.filter=void 0,void this._updateLayer(c)):void(this._validate(Nt,`layers.${c.id}.filter`,n,{layerType:c.type},_)||(c.filter=s.c1(n),this._updateLayer(c)))}getFilter(i){const n=this._checkLayer(i);if(n)return s.c1(n.filter)}setLayoutProperty(i,n,_,c={}){this._checkLoaded();const f=this._checkLayer(i);if(f&&!ot(f.getLayoutProperty(n),_)){if(_!=null&&(!c||c.validate!==!1)&&Wn(f,Gt.call(xo,{key:`layers.${i}.layout.${n}`,layerType:f.type,objectKey:n,value:_,styleSpec:s.D,style:{glyphs:!0,sprite:!0}})))return;f.setLayoutProperty(n,_),f.isConfigDependent&&this._configDependentLayers.add(f.fqid),this._updateLayer(f)}}getLayoutProperty(i,n){const _=this._checkLayer(i);if(_)return _.getLayoutProperty(n)}setPaintProperty(i,n,_,c={}){this._checkLoaded();const f=this._checkLayer(i);if(!f||ot(f.getPaintProperty(n),_)||_!=null&&(!c||c.validate!==!1)&&Wn(f,Ft.call(xo,{key:`layers.${i}.paint.${n}`,layerType:f.type,objectKey:n,value:_,styleSpec:s.D})))return;const g=f.setPaintProperty(n,_);f.isConfigDependent&&this._configDependentLayers.add(f.fqid),g&&this._updateLayer(f),this._changes.updatePaintProperties(f)}getPaintProperty(i,n){const _=this._checkLayer(i);if(_)return _.getPaintProperty(n)}setFeatureState(i,n){this._checkLoaded();const _=i.source,c=i.sourceLayer,f=this._checkSource(_);if(!f)return;const g=f.type;if(g==="geojson"&&c)return void this.fire(new s.a(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(g==="vector"&&!c)return void this.fire(new s.a(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.a(new Error("The feature id parameter must be provided.")));const b=this.getOwnSourceCaches(_);for(const A of b)A.setFeatureState(c,i.id,n)}removeFeatureState(i,n){this._checkLoaded();const _=i.source,c=this._checkSource(_);if(!c)return;const f=c.type,g=f==="vector"?i.sourceLayer:void 0;if(f==="vector"&&!g)return void this.fire(new s.a(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.a(new Error("A feature id is required to remove its specific state property.")));const b=this.getOwnSourceCaches(_);for(const A of b)A.removeFeatureState(g,i.id,n)}getFeatureState(i){this._checkLoaded();const n=i.source,_=i.sourceLayer,c=this._checkSource(n);if(c){if(c.type!=="vector"||_)return i.id===void 0&&this.fire(new s.a(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(n)[0].getFeatureState(_,i.id);this.fire(new s.a(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(i){return this.stylesheet.transition=s.e({},this.stylesheet.transition,i),this.transition=this.stylesheet.transition,this}getTransition(){return s.e({},this.stylesheet.transition)}serialize(){this._checkLoaded();const i=this.getTerrain(),n=i&&this.terrain&&this.terrain.scope===this.scope?i:this.stylesheet.terrain;return s.c7({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:n,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},_=>_!==void 0)}_updateLayer(i){this._changes.updateLayer(i);const n=this.getLayerSourceCache(i),_=s.ag(i.source,i.scope),c=this._changes.getUpdatedSourceCaches();i.source&&!c[_]&&n&&n.getSource().type!=="raster"&&(this._changes.updateSourceCache(_,"reload"),n.pause()),i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const n=b=>this._mergedLayers[b].type==="fill-extrusion"||this._mergedLayers[b].type==="model",_=this.order,c={},f=[];for(let b=_.length-1;b>=0;b--){const A=_[b];if(n(A)){c[A]=b;for(const E of i){const O=E[A];if(O)for(const S of O)f.push(S)}}}f.sort((b,A)=>A.intersectionZ-b.intersectionZ);const g=[];for(let b=_.length-1;b>=0;b--){const A=_[b];if(n(A))for(let E=f.length-1;E>=0;E--){const O=f[E].feature;if(c[O.layer.id]<b)break;g.push(O),f.pop()}else for(const E of i){const O=E[A];if(O)for(const S of O)g.push(S.feature)}}return g}queryRenderedFeatures(i,n,_){n&&n.filter&&this._validate(Nt,"queryRenderedFeatures.filter",n.filter,null,n),n.scope=this.scope,n.availableImages=this._availableImages,n.serializedLayers=this._serializedLayers;const c={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new s.a(new Error("parameters.layers must be an Array."))),[];for(const E of n.layers){const O=this._mergedLayers[E];if(!O)return this.fire(new s.a(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];c[O.source]=!0}}const f=[],g=n.serializedLayers||{},b=n&&n.layers?n.layers.some(E=>{const O=this.getLayer(E);return O&&O.is3D()}):this.has3DLayers(),A=ui.createFromScreenPoints(i,_);for(const E in this._mergedSourceCaches){const O=this._mergedSourceCaches[E].getSource();if(!O||O.scope!==n.scope)continue;const S=this._mergedSourceCaches[E].getSource().id;n.layers&&!c[S]||f.push(Hd(this._mergedSourceCaches[E],this._mergedLayers,g,A,n,_,b,!!this.map._showQueryGeometry))}return this.placement&&f.push(function(E,O,S,L,w,U,B){const k={},M=U.queryRenderedSymbols(L),H=[];for(const q of Object.keys(M).map(Number))H.push(B[q]);H.sort(Ps);for(const q of H){const V=q.featureIndex.lookupSymbolFeatures(M[q.bucketInstanceId],O,q.bucketIndex,q.sourceLayerIndex,w.filter,w.layers,w.availableImages,E);for(const $ in V){const z=k[$]=k[$]||[],Z=V[$];Z.sort((at,nt)=>{const rt=q.featureSortOrder;if(rt){const yt=rt.indexOf(at.featureIndex);return rt.indexOf(nt.featureIndex)-yt}return nt.featureIndex-at.featureIndex});for(const at of Z)z.push(at)}}for(const q in k)k[q].forEach(V=>{const $=V.feature,z=S(E[q]);if(!z)return;const Z=z.getFeatureState($.layer["source-layer"],$.id);$.source=$.layer.source,$.layer["source-layer"]&&($.sourceLayer=$.layer["source-layer"]),$.state=Z});return k}(this._mergedLayers,g,this.getLayerSourceCache.bind(this),A.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)}querySourceFeatures(i,n){n&&n.filter&&this._validate(Nt,"querySourceFeatures.filter",n.filter,null,n);const _=this.getOwnSourceCaches(i);let c=[];for(const f of _)c=c.concat(on(f,n));return c}addSourceType(i,n,_){return Fo.getSourceType(i)?_(new Error(`A source type called "${i}" already exists.`)):(Fo.setSourceType(i,n),n.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:n.workerSourceURL},_):_(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(i,n,_={}){this._checkLoaded();const c=this.light.getLight();let f=!1;for(const b in i)if(!ot(i[b],c[b])){f=!0;break}if(!f)return;const g=this._getTransitionParameters();this.light.setLight(i,n,_),this.light.updateTransitions(g)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,n=1){if(this._checkLoaded(),!i)return this.terrainSetForDrapingOnly()&&n!==0||delete this.terrain,i===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=i;const c=i.source==null;if(n===1){if(typeof _.source=="object"){const b="terrain-dem-src";this.addSource(b,_.source),_=s.c1(_),_=s.e(_,{source:b})}const f=s.e({},_),g={};if(this.terrain&&c){f.source=this.terrain.get().source;const b=this.terrain?this.getFragmentStyle(this.terrain.scope):null;b&&(g.style=b.serialize())}if(this._validate(X,"terrain",f,g))return}if(!this.terrain||this.terrain.scope!==this.scope&&!c||this.terrain&&n!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,n),this.fire(new s.b("data",{dataType:"style"}))}else{const f=this.terrain,g=f.get();for(const b of Object.keys(s.D.terrain))!_.hasOwnProperty(b)&&s.D.terrain[b].default&&(_[b]=s.D.terrain[b].default);for(const b in i)if(!ot(i[b],g[b])){f.set(i,this.options),this.stylesheet.terrain=i;const A=this._getTransitionParameters({duration:0});f.updateTransitions(A),this.fire(new s.b("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const n=this.fog=new Ki(i,this.map.transform,this.scope,this.options);this.stylesheet.fog=n.get();const _=this._getTransitionParameters({duration:0});n.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog;if(!ot(n.get(),i)){n.set(i,this.options),this.stylesheet.fog=n.get();const _=this._getTransitionParameters({duration:0});n.updateTransitions(_)}}else this._createFog(i);this._markersNeedUpdate=!0}_getTransitionParameters(i){return{now:s.f.now(),transition:s.e(this.transition,i)}}updateDrapeFirstLayers(){if(!this.terrain)return;const i=[],n=[];for(const _ in this._mergedLayers)this.isLayerDraped(this._mergedLayers[_])?i.push(_):n.push(_);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...n)}_createTerrain(i,n){const _=this.terrain=new Ra(i,n,this.scope,this.options);n===1&&(this.stylesheet.terrain=i),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const c=this._getTransitionParameters({duration:0});_.updateTransitions(c)}_force3DLayerUpdate(){for(const i in this._layers){const n=this._layers[i];n.type==="fill-extrusion"&&this._updateLayer(n)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const n=this._layers[i];n.type==="symbol"&&this._updateLayer(n)}}_validate(i,n,_,c,f={}){if(f&&f.validate===!1)return!1;const g=s.e({},this.serialize());return Wn(this,i.call(xo,s.e({key:n,style:g,value:_,styleSpec:s.D},c)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.c8.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._mergedLayers)this._mergedLayers[i].setEventedParent(null);for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles(),this._mergedSourceCaches[i].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(i){const n=this.getSourceCaches(i);for(const _ of n)_.clearTiles()}clearSources(){for(const i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles()}reloadSource(i){const n=this.getSourceCaches(i);for(const _ of n)_.resume(),_.reload()}reloadSources(){for(const i of this.getSources())i.reload&&i.reload()}updateSources(i){let n;this.directionalLight&&(n=Lr(this.directionalLight));for(const _ in this._mergedSourceCaches)this._mergedSourceCaches[_].update(i,void 0,void 0,n)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const n=this._sourceCaches[i];n.resume(),n.reload()}}_updatePlacement(i,n,_,c,f=!1){let g=!1,b=!1;const A={},E={};for(const O of this._mergedOrder){const S=this._mergedLayers[O];if(S.type!=="symbol")continue;const L=s.ag(S.source,S.scope);let w=A[L];if(!w){const B=this.getLayerSourceCache(S);if(!B)continue;const k=B.getRenderableIds(!0).map(M=>B.getTileByID(M));E[L]=k.slice(),w=A[L]=k.sort((M,H)=>H.tileID.overscaledZ-M.tileID.overscaledZ||(M.tileID.isLessThan(H.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(S,w,i.center.lng,i.projection);g=g||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),f=f||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new s.b("neworder")),(f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.f.now(),i.zoom))&&(this.pauseablePlacement=new Sr(i,this._mergedOrder,f,n,_,c,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,A,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.f.now()),b=!0),g&&this.pauseablePlacement.placement.setStale()),b||g){this._buildingIndex.onNewFrame(i.zoom);for(const O of this._mergedOrder){const S=this._mergedLayers[O];S.type==="symbol"&&this.placement.updateLayerOpacities(S,A[s.ag(S.source,S.scope)])}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.f.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}addImport(i,n){this._checkLoaded();const _=this.stylesheet.imports=this.stylesheet.imports||[];if(_.findIndex(({id:f})=>f===i.id)!==-1)return this.fire(new s.a(new Error(`Import with id '${i.id}' already exists in the map's style.`)));if(!n)return _.push(i),this._loadImports([i],!0),this;const c=_.findIndex(({id:f})=>f===n);return c===-1?this.fire(new s.a(new Error(`Import with id "${n}" does not exist on this map.`))):(this.stylesheet.imports=_.slice(0,c).concat(i).concat(_.slice(c)),this._loadImports([i],!0,n),this)}updateImport(i,n){this._checkLoaded();const _=this.stylesheet.imports||[],c=this.getImportIndex(i);return c===-1?this:typeof n=="string"?(this.setImportUrl(i,n),this):(n.url&&n.url!==_[c].url&&this.setImportUrl(i,n.url),ot(n.config,_[c].config)||this.setImportConfig(i,n.config),ot(n.data,_[c].data)||this.setImportData(i,n.data),this)}moveImport(i,n){this._checkLoaded();let _=this.stylesheet.imports||[];const c=this.getImportIndex(i);if(c===-1)return this;const f=this.getImportIndex(n);if(f===-1)return this;const g=_[c],b=this.fragments[c];return _=_.filter(({id:A})=>A!==i),this.fragments=this.fragments.filter(({id:A})=>A!==i),this.stylesheet.imports=_.slice(0,f).concat(g).concat(_.slice(f)),this.fragments=this.fragments.slice(0,f).concat(b).concat(this.fragments.slice(f)),this.mergeLayers(),this}setImportUrl(i,n){this._checkLoaded();const _=this.stylesheet.imports||[],c=this.getImportIndex(i);if(c===-1)return this;_[c].url=n;const f=this.fragments[c];return f.style=this._createFragmentStyle(_[c]),f.style.on("style.import.load",()=>this.mergeAll()),f.style.loadURL(n),this}setImportData(i,n){this._checkLoaded();const _=this.getImportIndex(i),c=this.stylesheet.imports||[];return _===-1?this:n?(this.fragments[_].style.setState(n),this._reloadImports(),this):(delete c[_].data,this.setImportUrl(i,c[_].url))}setImportConfig(i,n){this._checkLoaded();const _=this.getImportIndex(i),c=this.stylesheet.imports||[];if(_===-1)return this;n?c[_].config=n:delete c[_].config;const f=this.fragments[_],g=f.style.stylesheet&&f.style.stylesheet.schema;return f.config=n,f.style.setConfig(n,g),this.updateConfigDependencies(),this}removeImport(i){this._checkLoaded();const n=this.stylesheet.imports||[],_=this.getImportIndex(i);return _===-1||(n.splice(_,1),this.fragments[_].style._remove(),this.fragments.splice(_,1),this._reloadImports()),this}getImportIndex(i){const n=(this.stylesheet.imports||[]).findIndex(_=>_.id===i);return n===-1&&this.fire(new s.a(new Error(`Import '${i}' does not exist in the map's style and cannot be updated.`))),n}getLayer(i){return this._mergedLayers[i]}getSources(){const i=[];for(const n in this._mergedOtherSourceCaches){const _=this._mergedOtherSourceCaches[n];_&&i.push(_.getSource())}return i}getSource(i,n){const _=this.getSourceCache(i,n);return _&&_.getSource()}getLayerSource(i){const n=this.getLayerSourceCache(i);return n&&n.getSource()}getSourceCache(i,n){const _=s.ag(i,n);return this._mergedOtherSourceCaches[_]}getLayerSourceCache(i){const n=s.ag(i.source,i.scope);return i.type==="symbol"?this._mergedSymbolSourceCaches[n]:this._mergedOtherSourceCaches[n]}getSourceCaches(i){const n=[];return this._mergedOtherSourceCaches[i]&&n.push(this._mergedOtherSourceCaches[i]),this._mergedSymbolSourceCaches[i]&&n.push(this._mergedSymbolSourceCaches[i]),n}updateSourceCaches(){const i=this._changes.getUpdatedSourceCaches();for(const n in i){const _=i[n];_==="reload"?this.reloadSource(n):_==="clear"&&this.clearSource(n)}}updateLayers(i){const n=this._changes.getUpdatedPaintProperties();for(const _ of n){const c=this.getLayer(_);c&&c.updateTransitions(i)}}getImages(i,n,_){this.imageManager.getImages(n.icons,n.scope,_),this._updateTilesForChangedImages();const c=f=>{f&&f.setDependencies(n.tileID.key,n.type,n.icons)};c(this._otherSourceCaches[n.source]),c(this._symbolSourceCaches[n.source])}getGlyphs(i,n,_){this.glyphManager.getGlyphs(n.stacks,n.scope,_)}getResource(i,n,_){return s.c9(n,_)}getOwnSourceCache(i){return this._otherSourceCaches[i]}getOwnLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}getOwnSourceCaches(i){const n=[];return this._otherSourceCaches[i]&&n.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&n.push(this._symbolSourceCaches[i]),n}_isSourceCacheLoaded(i){const n=this.getOwnSourceCaches(i);return n.length===0?(this.fire(new s.a(new Error(`There is no source with ID '${i}'`))),!1):n.every(_=>_.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(i=>{i.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Fo.getSourceType=function(d){return an[d]},Fo.setSourceType=function(d,i){an[d]=i},Fo.registerForPluginStateChange=s.bV;var Pr=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,wr=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}`,Wr=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Mr="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",u_=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,c_=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,nc=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,ks=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,zs=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform vec2 u_velocity_res;uniform float u_max_speed;const vec2 INVALID_VELOCITY=vec2(-1);uniform vec2 u_texture_offset;uniform float u_data_offset;uniform vec4 u_data_scale;vec2 lookup_velocity(vec2 uv) {uv=u_texture_offset.x+u_texture_offset.y*uv;vec2 fxy;ivec4 c=_raTexLinearCoord(uv,u_velocity_res,fxy);vec4 tl=texelFetch(u_velocity,c.yz,0);vec4 tr=texelFetch(u_velocity,c.xz,0);vec4 bl=texelFetch(u_velocity,c.yw,0);vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NODATA) {return INVALID_VELOCITY;}if (tr==NODATA) {return INVALID_VELOCITY;}if (bl==NODATA) {return INVALID_VELOCITY;}if (br==NODATA) {return INVALID_VELOCITY;}vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);
#ifdef DATA_FORMAT_UINT32
vec2 velocity=vec2(u_data_offset+dot(t,u_data_scale),0);return velocity;
#else
vec2 velocity=vec2(u_data_offset+dot(t.rg,u_data_scale.yx),-(u_data_offset+dot(t.ba,u_data_scale.yx)));
#endif
return velocity/max(u_max_speed,length(velocity));}
#endif`,m_=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Ll=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Hs=[];Mn(Pr,Hs),Mn(Wr,Hs),Mn(wr,Hs);const mo={"_prelude_fog.vertex.glsl":c_,"_prelude_terrain.vertex.glsl":u_,"_prelude_shadow.vertex.glsl":m_,"_prelude_fog.fragment.glsl":nc,"_prelude_shadow.fragment.glsl":Ll,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":ks,"_prelude_raster_particle.glsl":zs},Ys={};ca("",u_),ca(nc,c_),ca(Ll,m_),ca(ks,""),ca(zs,"");const f_=ca(wr,Wr),Dr=Pr;var p_={background:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:ca("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ca(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:ca(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ca("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:ca("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:ca("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:ca(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:ca(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:ca(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:ca(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;vec2 uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
vec2 uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:ca("precision highp float;uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`precision highp float;
#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {vec2 pos=a_pos.xy+u_tile_offset;vec2 tex_coords=fract(pos);gl_PointSize=1.0;vec2 velocity=lookup_velocity(tex_coords);if (velocity==INVALID_VELOCITY) {v_particle_speed=0.0;gl_Position=vec4(2.0,2.0,2.0,1.0);} else {v_particle_speed=length(velocity);gl_Position=vec4(2.0*pos-vec2(1.0),0.0,1.0);}}`),rasterParticleTexture:ca("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {v_tex_pos=0.5*a_pos+vec2(0.5);gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:ca("void main() {}",`#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform float u_speed_factor;uniform float u_lifetime_delta;uniform float u_rand_seed;out vec3 v_new_particle;const vec3 rand_constants=vec3(12.9898,78.233,4375.85453);float rand(const vec2 co) {float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {float lifetime=a_pos.z;vec2 pos=a_pos.xy;vec2 uv=clamp(pos,vec2(0.0),vec2(1.0));vec2 velocity=lookup_velocity(uv);float next_lifetime=lifetime-u_lifetime_delta;float t=step(0.0,next_lifetime);
#ifdef DATA_FORMAT_UINT32
vec2 dp=vec2(0);
#else
vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;
#endif
vec2 seed=pos*u_rand_seed;vec2 next_pos=pos+dp;vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));v_new_particle=vec3(
vec2(mix(random_pos,next_pos,t)),mix(1.0,next_lifetime,t)
);}`),symbolIcon:ca(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
uniform mediump float u_icon_saturation;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture(u_texture,v_tex_a)*alpha;
#endif
#ifdef SATURATION
vec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:ca(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:ca(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:ca("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:ca(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Mr),skyboxGradient:ca(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Mr),skyboxCapture:ca(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:ca(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:ca(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:ca(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:ca(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function Mn(d,i){const n=d.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of n)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const c=_.split(" ");for(const f of c)i.includes(f)||i.push(f)}}function ca(d,i){const n=/#include\s+"([^"]+)"/g,_=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let c=i.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);c&&(c=c.map(E=>{const O=E.split(" ");return O[O.length-1]}),c=[...new Set(c)]);const f={},g=[],b=[];if(d=d.replace(n,(E,O)=>(b.push(O),"")),(i=i.replace(n,(E,O)=>(g.push(O),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let A=[...Hs];Mn(d,A),Mn(i,A);for(const E of[...g,...b])mo[E]||console.error(`Undefined include: ${E}`),Ys[E]||(Ys[E]=[],Mn(mo[E],Ys[E])),A=[...A,...Ys[E]];return{fragmentSource:d=d.replace(_,(E,O,S,L,w)=>(f[w]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${w}
in ${S} ${L} ${w};
#else
uniform ${S} ${L} u_${w};
#endif
`:O==="initialize"?`
#ifdef HAS_UNIFORM_u_${w}
    ${S} ${L} ${w} = u_${w};
#endif
`:O==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${w}
    in ${S} ${L} ${w};
#endif
`:O==="initialize-attribute"?"":void 0)),vertexSource:i=i.replace(_,(E,O,S,L,w)=>{const U=L==="float"?"vec2":L,B=w.match(/color/)?"color":U;return O==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${w}
in ${S} ${L} a_${w};
#endif
`:f[w]?O==="define"?`
#ifndef HAS_UNIFORM_u_${w}
uniform lowp float u_${w}_t;
in ${S} ${U} a_${w};
out ${S} ${L} ${w};
#else
uniform ${S} ${L} u_${w};
#endif
`:O==="initialize"?B==="vec4"?`
#ifndef HAS_UNIFORM_u_${w}
    ${w} = a_${w};
#else
    ${S} ${L} ${w} = u_${w};
#endif
`:`
#ifndef HAS_UNIFORM_u_${w}
    ${w} = unpack_mix_${B}(a_${w}, u_${w}_t);
#else
    ${S} ${L} ${w} = u_${w};
#endif
`:O==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${w}
    in ${S} ${L} a_${w};
    out ${S} ${L} ${w};
#endif
`:O==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${w}
    ${w} = a_${w};
#endif
`:void 0:O==="define"?`
#ifndef HAS_UNIFORM_u_${w}
uniform lowp float u_${w}_t;
in ${S} ${U} a_${w};
#else
uniform ${S} ${L} u_${w};
#endif
`:O==="define-instanced"?B==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${w}0;
in vec4 a_${w}1;
in vec4 a_${w}2;
in vec4 a_${w}3;
#else
uniform ${S} ${L} u_${w};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${S} ${U} a_${w};
#else
uniform ${S} ${L} u_${w};
#endif
`:O==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${w}
    ${S} ${L} ${w} = a_${w};
#endif
`:B==="vec4"?`
#ifndef HAS_UNIFORM_u_${w}
    ${S} ${L} ${w} = a_${w};
#else
    ${S} ${L} ${w} = u_${w};
#endif
`:`
#ifndef HAS_UNIFORM_u_${w}
    ${S} ${L} ${w} = unpack_mix_${B}(a_${w}, u_${w}_t);
#else
    ${S} ${L} ${w} = u_${w};
#endif
`}),staticAttributes:c,usedDefines:A,vertexIncludes:g,fragmentIncludes:b}}class h_{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,n,_,c,f,g,b,A){this.context=i;let E=this.boundPaintVertexBuffers.length!==c.length;for(let S=0;!E&&S<c.length;S++)this.boundPaintVertexBuffers[S]!==c[S]&&(E=!0);let O=this.boundDynamicVertexBuffers.length!==b.length;for(let S=0;!O&&S<b.length;S++)this.boundDynamicVertexBuffers[S]!==b[S]&&(O=!0);if(!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==_||E||O||this.boundIndexBuffer!==f||this.boundVertexOffset!==g)this.freshBind(n,_,c,f,g,b,A);else{i.bindVertexArrayOES.set(this.vao);for(const S of b)S&&(S.bind(),A&&S.instanceCount&&S.setVertexAttribDivisor(i.gl,n,A));f&&f.dynamicDraw&&f.bind()}}freshBind(i,n,_,c,f,g,b){const A=i.numAttributes,E=this.context,O=E.gl;this.vao&&this.destroy(),this.vao=E.gl.createVertexArray(),E.bindVertexArrayOES.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=c,this.boundVertexOffset=f,this.boundDynamicVertexBuffers=g,n.enableAttributes(O,i),n.bind(),n.setVertexAttribPointers(O,i,f);for(const S of _)S.enableAttributes(O,i),S.bind(),S.setVertexAttribPointers(O,i,f);for(const S of g)S&&(S.enableAttributes(O,i),S.bind(),S.setVertexAttribPointers(O,i,f),b&&S.instanceCount&&S.setVertexAttribDivisor(O,i,b));c&&c.bind(),E.currentNumAttributes=A}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Tf(d,i){const n=Math.pow(2,i.canonical.z),_=i.canonical.y;return[new s.L(0,_/n).toLngLat().lat,new s.L(0,(_+1)/n).toLngLat().lat]}function Fr(d,i,n,_,c,f,g){const b=d.context,A=b.gl,E=n.hillshadeFBO;if(!E)return;d.prepareDrawTile();const O=d.isTileAffectedByFog(i),S=d.getOrCreateProgram("hillshade",{overrideFog:O});b.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,E.colorAttachment.get());const L=((k,M,H,q)=>{const V=H.paint.get("hillshade-shadow-color"),$=H.paint.get("hillshade-highlight-color"),z=H.paint.get("hillshade-accent-color"),Z=H.paint.get("hillshade-emissive-strength");let at=s.bj(H.paint.get("hillshade-illumination-direction"));if(H.paint.get("hillshade-illumination-anchor")==="viewport")at-=k.transform.angle;else if(k.style&&k.style.enable3dLights()&&k.style.directionalLight){const rt=k.style.directionalLight.properties.get("direction"),yt=s.bQ(rt.x,rt.y,rt.z);at=s.bj(yt[1])}const nt=!k.options.moving;return{u_matrix:q||k.transform.calculateProjMatrix(M.tileID.toUnwrapped(),nt),u_image:0,u_latrange:Tf(0,M.tileID),u_light:[H.paint.get("hillshade-exaggeration"),at],u_shadow:V,u_highlight:$,u_emissive_strength:Z,u_accent:z}})(d,n,_,d.terrain?i.projMatrix:null);d.uploadCommonUniforms(b,S,i.toUnwrapped());const{tileBoundsBuffer:w,tileBoundsIndexBuffer:U,tileBoundsSegments:B}=d.getTileBoundsBuffers(n);S.draw(d,A.TRIANGLES,c,f,g,Le.disabled,L,_.id,w,U,B)}function sc(d,i,n){if(!i.needsDEMTextureUpload)return;const _=d.context,c=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||d.getTileTexture(n.stride);const f=n.getPixels();i.demTexture?i.demTexture.update(f,{premultiply:!1}):i.demTexture=new s.T(_,f,c.R32F,{premultiply:!1}),i.needsDEMTextureUpload=!1}function g_(d,i,n){const _=d.context,c=_.gl;if(!i.dem)return;const f=i.dem;if(_.activeTexture.set(c.TEXTURE1),sc(d,i,f),!i.demTexture)return;i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);const g=f.dim;_.activeTexture.set(c.TEXTURE0);let b=i.hillshadeFBO;if(!b){const L=new s.T(_,{width:g,height:g,data:null},c.RGBA);L.bind(c.LINEAR,c.CLAMP_TO_EDGE),b=i.hillshadeFBO=_.createFramebuffer(g,g,!0,"renderbuffer"),b.colorAttachment.set(L.texture)}_.bindFramebuffer.set(b.framebuffer),_.viewport.set([0,0,g,g]);const{tileBoundsBuffer:A,tileBoundsIndexBuffer:E,tileBoundsSegments:O}=d.getMercatorTileBoundsBuffers(),S=[];d.linearFloatFilteringSupported()&&S.push("TERRAIN_DEM_FLOAT_FORMAT"),d.getOrCreateProgram("hillshadePrepare",{defines:S}).draw(d,c.TRIANGLES,Ne.disabled,Be.disabled,Je.unblended,Le.disabled,((L,w)=>{const U=w.stride,B=s.a6.create();return s.a6.ortho(B,0,s.V,-s.V,0,0,1),s.a6.translate(B,B,[0,-s.V,0]),{u_matrix:B,u_image:1,u_dimension:[U,U],u_zoom:L.overscaledZ}})(i.tileID,f),n.id,A,E,O),i.needsHillshadePrepare=!1}const lc=d=>({u_matrix:new s.bK(d),u_image0:new s.bO(d),u_skirt_height:new s.bN(d),u_ground_shadow_factor:new s.bM(d)}),Br=(d,i,n)=>({u_matrix:d,u_image0:0,u_skirt_height:i,u_ground_shadow_factor:n}),rc=(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B)=>({u_proj_matrix:Float32Array.from(d),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:n,u_zoom_transition:c,u_merc_center:f,u_image0:0,u_frustum_tl:g,u_frustum_tr:b,u_frustum_br:A,u_frustum_bl:E,u_globe_pos:O,u_globe_radius:S,u_viewport:L,u_grid_matrix:B?Float32Array.from(B):new Float32Array(9),u_skirt_height:w,u_far_z_cutoff:U});function Pl(d,i){return d!=null&&i!=null&&!(!d.hasData()||!i.hasData())&&d.demTexture!=null&&i.demTexture!=null&&d.tileID.key!==i.tileID.key}const Gs=new class{constructor(){this.operations={}}newMorphing(d,i,n,_,c){if(d in this.operations){const f=this.operations[d];f.to.tileID.key!==n.tileID.key&&(f.queued=n)}else this.operations[d]={startTime:_,phase:0,duration:c,from:i,to:n,queued:null}}getMorphValuesForProxy(d){if(!(d in this.operations))return null;const i=this.operations[d];return{from:i.from,to:i.to,phase:i.phase}}update(d){for(const i in this.operations){const n=this.operations[i];for(n.phase=(d-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,d)){delete this.operations[i];break}}}_nextOp(d,i){return!!d.queued&&(d.from=d.to,d.to=d.queued,d.queued=null,d.phase=0,d.startTime=i,!0)}_validOp(d){return d.from.hasData()&&d.to.hasData()}},y_={0:null,1:"TERRAIN_VERTEX_MORPHING"};function b_(d,i,n){if(i===0)return 0;const _=i<1&&n===514?.25/i:1;return 6*Math.pow(1.5,22-d)*Math.max(i,1)*_}function Vs(d,i){const n=1<<d.z;return!i&&(d.x===0||d.x===n-1)||d.y===0||d.y===n-1}const T_=d=>({u_matrix:d});function x_(d,i,n,_,c){if(c>0){const f=s.f.now(),g=(f-d.timeAdded)/c,b=i?(f-i.timeAdded)/c:-1,A=n.getSource(),E=_.coveringZoomLevel({tileSize:A.tileSize,roundZoom:A.roundZoom}),O=!i||Math.abs(i.tileID.overscaledZ-E)>Math.abs(d.tileID.overscaledZ-E),S=O&&d.refreshedUponExpiration?1:s.aa(O?g:1-b,0,1);return d.refreshedUponExpiration&&g>=1&&(d.refreshedUponExpiration=!1),i?{opacity:1,mix:1-S}:{opacity:S,mix:0}}return{opacity:1,mix:0}}class xf extends Mo{constructor(i){const n={type:"raster-dem",maxzoom:i.transform.maxZoom},_=new s.bW(s.bX(),null),c=gi("mock-dem",n,_,i.style);super("mock-dem",c,!1),c.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,n){i.state="loaded",n(null)}}class Af extends Mo{constructor(i){const n=gi("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new s.bW(s.bX(),null),i.style);super("proxy",n,!1),n.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,n,_){if(i.freezeTileCoverage)return;this.transform=i;const c=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((f,g)=>{if(f[g.key]="",!this._tiles[g.key]){const b=new Cn(g,this._source.tileSize*g.overscaleFactor(),i.tileZoom);b.state="loaded",this._tiles[g.key]=b}return f},{});for(const f in this._tiles)f in c||(this.freeFBO(f),this._tiles[f].unloadVectorData(),delete this._tiles[f])}freeFBO(i){const n=this.proxyCachedFBO[i];if(n!==void 0){const _=Object.values(n);this.renderCachePool.push(..._),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class dc extends s.am{constructor(i,n,_){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=n,this.projMatrix=_}}class vf extends s.ck{constructor(i,n){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},i.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,c,f]=function(A){const E=new s.aN,O=new s.aw,S=131;E.reserve(17161),O.reserve(33800);const L=s.V/128,w=s.V+L/2,U=w+L;for(let k=-L;k<U;k+=L)for(let M=-L;M<U;M+=L){const H=M<0||M>w||k<0||k>w?24575:0,q=s.aa(Math.round(M),0,s.V),V=s.aa(Math.round(k),0,s.V);E.emplaceBack(q+H,V)}const B=(k,M)=>{const H=M*S+k;O.emplaceBack(H+1,H,H+S),O.emplaceBack(H+S,H+S+1,H+1)};for(let k=1;k<129;k++)for(let M=1;M<129;M++)B(M,k);return[0,129].forEach(k=>{for(let M=0;M<130;M++)B(M,k),B(k,M)}),[E,O,32768]}(),g=i.context;this.gridBuffer=g.createVertexBuffer(_,s.aP.members),this.gridIndexBuffer=g.createIndexBuffer(c),this.gridSegments=s.aB.simpleSegment(0,0,_.length,c.length),this.gridNoSkirtSegments=s.aB.simpleSegment(0,0,_.length,f),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Af(n.map),this.orthoMatrix=s.a6.create(),s.a6.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.V,0,s.V,0,1);const b=g.gl;this._overlapStencilMode=new Be({func:b.GEQUAL,mask:255},0,255,b.KEEP,b.KEEP,b.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new xf(n.map),this._pendingGroundEffectLayers=[]}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),this._style=i,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,n,_){if(i&&i.terrain){this._style!==i&&(this.style=i,this._evaluationZoom=void 0);const c=i.terrain.properties,f=i.terrain.drapeRenderMode===0,g=i.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=s.f.now();const b=i.terrain&&i.terrain.scope,A=c.get("source"),E=f?this._mockSourceCache:i.getSourceCache(A,b);if(!E)return void s.w(`Couldn't find terrain source "${A}".`);if(this.sourceCache=E,this._exaggeration=g?this.calculateExaggeration(n):c.get("exaggeration"),!n.projection.requiresDraping&&g&&this._exaggeration===0)return void this._disable();this.enabled=!0;const O=()=>{this.sourceCache.used&&s.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const S=this.getScaledDemTileSize();this.sourceCache.update(n,S,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,O(),this._initializing=!0),O(),n.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0,this._previousZoom=n.zoom}else this._disable()}calculateExaggeration(i){const n=this._previousCameraAltitude,_=i.getFreeCameraOptions().position.z/i.pixelsPerMeter*i.worldSize;this._previousCameraAltitude=_;const c=n!=null?_-n:Number.MAX_VALUE;if(Math.abs(c)<2)return this._exaggeration;const f=i.zoom,g=this._style.terrain;if(!this._previousUpdateTimestamp)return g.getExaggeration(f);let b=f-this._previousZoom;const A=this._previousUpdateTimestamp;let E=f;this._evaluationZoom!=null&&(E=this._evaluationZoom,Math.abs(f-E)>.5&&(b=.5*(f-E+b)),b*c<0&&(E+=b)),this._evaluationZoom=E;const O=g.getExaggeration(E),S=O===g.getExaggeration(Math.max(0,E-.1));if(S&&Math.abs(O-this._exaggeration)<.01)return O;let L=Math.min(.1,.00375*(this._updateTimestamp-A));return(S||O<.1||Math.abs(b)<1e-4)&&(L=Math.min(.2,4*L)),s.U(this._exaggeration,O,L)}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._mergedSourceCaches)this._style._mergedSourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(s.L.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const c=this.proxyCoords=n.getIds().map(A=>{const E=n.getTileByID(A).tileID;return E.projMatrix=_.calculateProjMatrix(E.toUnwrapped()),E});(function(A,E){const O=E.transform.pointCoordinate(E.transform.getCameraPoint()),S=new s.P(O.x,O.y);A.sort((L,w)=>{if(w.overscaledZ-L.overscaledZ)return w.overscaledZ-L.overscaledZ;const U=new s.P(L.canonical.x+(1<<L.canonical.z)*L.wrap,L.canonical.y),B=new s.P(w.canonical.x+(1<<w.canonical.z)*w.wrap,w.canonical.y),k=S.mult(1<<L.canonical.z);return k.x-=.5,k.y-=.5,k.distSqr(U)-k.distSqr(B)})})(c,this.painter);const f=this.proxyToSource||{};this.proxyToSource={},c.forEach(A=>{this.proxyToSource[A.key]={}}),this.terrainTileForTile={};const g=this._style._mergedSourceCaches;for(const A in g){const E=g[A];if(!E.used||(E!==this.sourceCache&&this.resetTileLookupCache(E.id),this._setupProxiedCoordsForOrtho(E,i[A],f),E.usedForTerrain))continue;const O=i[A];E.getSource().reparseOverscaled&&this._assignTerrainTiles(O)}this.proxiedCoords[n.id]=c.map(A=>new dc(A,A.key,this.orthoMatrix)),this._assignTerrainTiles(c),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(f),this.renderingToTexture=!1;const b={};this._visibleDemTiles=[];for(const A of this.proxyCoords){const E=this.terrainTileForTile[A.key];if(!E)continue;const O=E.tileID.key;O in b||(this._visibleDemTiles.push(E),b[O]=O)}}_assignTerrainTiles(i){this._initializing||i.forEach(n=>{if(this.terrainTileForTile[n.key])return;const _=this._findTileCoveringTileID(n,this.sourceCache);_&&(this.terrainTileForTile[n.key]=_)})}_prepareDEMTextures(){const i=this.painter.context,n=i.gl;for(const _ in this.terrainTileForTile){const c=this.terrainTileForTile[_],f=c.dem;!f||c.demTexture&&!c.needsDEMTextureUpload||(i.activeTexture.set(n.TEXTURE1),sc(this.painter,c,f))}}_prepareDemTileUniforms(i,n,_,c){if(!n||n.demTexture==null)return!1;const f=i.tileID.canonical,g=Math.pow(2,n.tileID.canonical.z-f.z),b=c||"";return _[`u_dem_tl${b}`]=[f.x*g%1,f.y*g%1],_[`u_dem_scale${b}`]=g,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,n=i.gl;if(!this._emptyDepthBufferTexture){const _=new s.h({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.T(i,_,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const n=this._visibleDemTiles.reduce((_,c)=>{if(!c.dem)return _;const f=c.dem.tree.minimums[0];return f>0&&i++,_+f},0);return i?n/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,n=i.gl;i.activeTexture.set(n.TEXTURE2);const _=this._getLoadedAreaMinimum(),[c,f]=(()=>{const b=new s.cm({width:1,height:1},new Float32Array([_]));return[n.R32F,b]})();this._emptyDEMTextureDirty=!1;let g=this._emptyDEMTexture;return g?g.update(f,{premultiply:!1}):g=this._emptyDEMTexture=new s.T(i,f,c,{premultiply:!1}),g}setupElevationDraw(i,n,_){const c=this.painter.context,f=c.gl,g={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};g.u_exaggeration=this.exaggeration();let b=null,A=null,E=1;if(_&&_.morphing&&this._useVertexMorphing){const L=_.morphing.srcDemTile,w=_.morphing.dstDemTile;E=_.morphing.phase,L&&w&&(this._prepareDemTileUniforms(i,L,g,"_prev")&&(A=L),this._prepareDemTileUniforms(i,w,g)&&(b=w))}const O=L=>L&&L.demTexture&&this.painter.linearFloatFilteringSupported()?f.LINEAR:f.NEAREST,S=L=>{g.u_dem_size=L.size[0]===1?1:L.size[0]-2};if(A&&b)c.activeTexture.set(f.TEXTURE2),b.demTexture.bind(O(b),f.CLAMP_TO_EDGE),c.activeTexture.set(f.TEXTURE4),A.demTexture.bind(O(A),f.CLAMP_TO_EDGE),b.demTexture&&S(b.demTexture),g.u_dem_lerp=E;else{b=this.terrainTileForTile[i.tileID.key],c.activeTexture.set(f.TEXTURE2);const L=this._prepareDemTileUniforms(i,b,g)?b.demTexture:this.emptyDEMTexture;L.bind(O(b),f.CLAMP_TO_EDGE),S(L)}if(c.activeTexture.set(f.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(f.NEAREST,f.CLAMP_TO_EDGE),this._depthFBO&&(g.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(f.NEAREST,f.CLAMP_TO_EDGE),g.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&b){const L=(1<<b.tileID.canonical.z)*s.bl(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;g.u_meter_to_dem=L}if(_&&_.labelPlaneMatrixInv&&(g.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),n.setTerrainUniformValues(c,g),this.painter.transform.projection.name==="globe"){const L=this.globeUniformValues(this.painter.transform,i.tileID.canonical,_&&_.useDenormalizedUpVectorScale);n.setGlobeUniformValues(c,L)}}globeUniformValues(i,n,_){const c=i.projection;return{u_tile_tl_up:c.upVector(n,0,0),u_tile_tr_up:c.upVector(n,s.V,0),u_tile_br_up:c.upVector(n,s.V,s.V),u_tile_bl_up:c.upVector(n,0,s.V),u_tile_up_scale:_?s.cl(1):c.upVectorScale(n,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const n=this.painter,_=this.painter.context;i.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(c,f,g,b,A){if(c.transform.projection.name==="globe")(function(E,O,S,L,w){const U=E.context,B=U.gl;let k,M;const H=E.transform,q=s.cd(E,U,H),V=(It,vt)=>{if(M===vt)return;const Ut=[y_[vt],"PROJECTION_GLOBE_VIEW"];q&&Ut.push("CUSTOM_ANTIALIASING");const ct=E.isTileAffectedByFog(It);k=E.getOrCreateProgram("globeRaster",{defines:Ut,overrideFog:ct}),M=vt},$=E.colorModeForRenderPass(),z=new Ne(B.LEQUAL,Ne.ReadWrite,E.depthRangeFor3D);Gs.update(w);const Z=s.ce(H),at=[s.a5(H.center.lng),s.ae(H.center.lat)],nt=E.globeSharedBuffers,rt=[H.width*s.f.devicePixelRatio,H.height*s.f.devicePixelRatio],yt=Float32Array.from(H.globeMatrix),ut={useDenormalizedUpVectorScale:!0};{const It=E.transform,vt=b_(It.zoom,O.exaggeration(),O.sourceCache._source.tileSize);M=-1;const Ut=B.TRIANGLES;for(const ct of L){const Tt=S.getTile(ct),lt=Be.disabled,pt=O.prevTerrainTileForTile[ct.key],kt=O.terrainTileForTile[ct.key];Pl(pt,kt)&&Gs.newMorphing(ct.key,pt,kt,w,250),U.activeTexture.set(B.TEXTURE0),Tt.texture&&Tt.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE);const qt=Gs.getMorphValuesForProxy(ct.key),Xt=qt?1:0;qt&&s.j(ut,{morphing:{srcDemTile:qt.from,dstDemTile:qt.to,phase:s.cc(qt.phase)}});const ae=s.cf(ct.canonical),he=s.cg(ae.getCenter().lat),Ce=s.ch(ct.canonical,ae,he,It.worldSize/It._pixelsPerMercatorPixel),xe=s.aT(s.ci(ct.canonical)),Ee=rc(It.expandedFarZProjMatrix,yt,Z,xe,s.S(It.zoom),at,It.frustumCorners.TL,It.frustumCorners.TR,It.frustumCorners.BR,It.frustumCorners.BL,It.globeCenterInViewSpace,It.globeRadius,rt,vt,It._farZ,Ce);if(V(ct,Xt),k&&(O.setupElevationDraw(Tt,k,ut),E.uploadCommonUniforms(U,k,ct.toUnwrapped()),nt)){const[Xe,Fe,ze]=nt.getGridBuffers(he,vt!==0);k.draw(E,Ut,z,lt,$,Le.backCCW,Ee,"globe_raster",Xe,Fe,ze)}}}if(nt&&(E.renderDefaultNorthPole||E.renderDefaultSouthPole)){const It=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];q&&It.push("CUSTOM_ANTIALIASING"),k=E.getOrCreateProgram("globeRaster",{defines:It});for(const vt of L){const{x:Ut,y:ct,z:Tt}=vt.canonical,lt=ct===0,pt=ct===(1<<Tt)-1,[kt,qt,Xt,ae]=nt.getPoleBuffers(Tt,!1);if(ae&&(lt||pt)){const he=S.getTile(vt);U.activeTexture.set(B.TEXTURE0),he.texture&&he.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE);let Ce=s.cj(Tt,Ut,H);const xe=s.aT(s.ci(vt.canonical)),Ee=(Xe,Fe)=>Xe.draw(E,B.TRIANGLES,z,Be.disabled,$,Le.disabled,rc(H.expandedFarZProjMatrix,Ce,Ce,xe,0,at,H.frustumCorners.TL,H.frustumCorners.TR,H.frustumCorners.BR,H.frustumCorners.BL,H.globeCenterInViewSpace,H.globeRadius,rt,0,H._farZ),"globe_pole_raster",Fe,Xt,ae);O.setupElevationDraw(he,k,ut),E.uploadCommonUniforms(U,k,vt.toUnwrapped()),lt&&E.renderDefaultNorthPole&&Ee(k,kt),pt&&E.renderDefaultSouthPole&&(Ce=s.a6.scale(s.a6.create(),Ce,[1,-1,1]),Ee(k,qt))}}}})(c,f,g,b,A);else{const E=c.context,O=E.gl;let S,L;const w=c.shadowRenderer,U=wn(c,c.longestCutoffRange),B=$=>{if(L===$)return;const z=[];z.push(y_[$]),U.shouldRenderCutoff&&z.push("RENDER_CUTOFF"),S=c.getOrCreateProgram("terrainRaster",{defines:z}),L=$},k=c.colorModeForRenderPass(),M=new Ne(O.LEQUAL,Ne.ReadWrite,c.depthRangeFor3D);Gs.update(A);const H=c.transform,q=b_(H.zoom,f.exaggeration(),f.sourceCache._source.tileSize);let V=[0,0,0];if(w){const $=c.style.directionalLight,z=c.style.ambientLight;$&&z&&(V=Nl($,z))}{L=-1;const $=O.TRIANGLES,[z,Z]=[f.gridIndexBuffer,f.gridSegments];for(const at of b){const nt=g.getTile(at),rt=Be.disabled,yt=f.prevTerrainTileForTile[at.key],ut=f.terrainTileForTile[at.key];Pl(yt,ut)&&Gs.newMorphing(at.key,yt,ut,A,250),E.activeTexture.set(O.TEXTURE0),nt.texture&&nt.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE);const It=Gs.getMorphValuesForProxy(at.key),vt=It?1:0;let Ut;It&&(Ut={morphing:{srcDemTile:It.from,dstDemTile:It.to,phase:s.cc(It.phase)}});const ct=Br(at.projMatrix,Vs(at.canonical,H.renderWorldCopies)?q/10:q,V);if(B(vt),!S)continue;f.setupElevationDraw(nt,S,Ut);const Tt=at.toUnwrapped();w&&w.setupShadows(Tt,S),c.uploadCommonUniforms(E,S,Tt,null,U),S.draw(c,$,M,rt,k,Le.backCCW,ct,"terrain_raster",f.gridBuffer,z,Z)}}}}(n,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const n=this.painter,_=this.painter.context,c=this.proxySourceCache,f=this.proxiedCoords[c.id],g=this._drapedRenderBatches.shift(),b=n.style.order,A=[];let E=0;for(const O of f){const S=c.getTileByID(O.proxyTileKey),L=c.proxyCachedFBO[O.key]?c.proxyCachedFBO[O.key][i]:void 0,w=L!==void 0?c.renderCache[L]:this.pool[E++],U=L!==void 0;if(S.texture=w.tex,U&&!w.dirty){A.push(S.tileID);continue}let B;_.bindFramebuffer.set(w.fb.framebuffer),this.renderedToTile=!1,w.dirty&&(_.clear({color:s.ax.transparent,stencil:0}),w.dirty=!1);for(let k=g.start;k<=g.end;++k){const M=n.style._mergedLayers[b[k]];if(M.isHidden(n.transform.zoom))continue;const H=n.style.getLayerSourceCache(M),q=H?this.proxyToSource[O.key][H.id]:[O];if(!q)continue;const V=q;_.viewport.set([0,0,w.fb.width,w.fb.height]),B!==(H?H.id:null)&&(this._setupStencil(w,q,M,H),B=H?H.id:null),n.renderLayer(n,H,M,V)}if(this._drapedRenderBatches.length===0)for(const k of this._pendingGroundEffectLayers){const M=n.style._mergedLayers[b[k]];if(M.isHidden(n.transform.zoom))continue;const H=n.style.getLayerSourceCache(M),q=H?this.proxyToSource[O.key][H.id]:[O];if(!q)continue;const V=q;_.viewport.set([0,0,w.fb.width,w.fb.height]),B!==(H?H.id:null)&&(this._setupStencil(w,q,M,H),B=H?H.id:null),n.renderLayer(n,H,M,V)}this.renderedToTile?(w.dirty=!0,A.push(S.tileID)):U||--E,E===5&&(E=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,n.width,n.height]),g.end+1}postRender(){}isLayerOrderingCorrect(i){const n=i.order.length;let _=-1,c=n;for(let f=0;f<n;++f)this._style.isLayerDraped(i._mergedLayers[i.order[f]])?_=Math.max(_,f):c=Math.min(c,f);return c>_}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(n=>n.dem).forEach(n=>{i=Math.min(i,n.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,n,_){if(!this._visibleDemTiles)return null;const c=this._visibleDemTiles.filter(f=>f.dem).map(f=>{const g=f.tileID,b=1<<g.overscaledZ,{x:A,y:E}=g.canonical,O=A/b,S=(A+1)/b,L=E/b,w=(E+1)/b;return{minx:O,miny:L,maxx:S,maxy:w,t:f.dem.tree.raycastRoot(O,L,S,w,i,n,_),tile:f}});c.sort((f,g)=>(f.t!==null?f.t:Number.MAX_VALUE)-(g.t!==null?g.t:Number.MAX_VALUE));for(const f of c){if(f.t==null)return null;const g=f.tile.dem.tree.raycast(f.minx,f.miny,f.maxx,f.maxy,i,n,_);if(g!=null)return g}return null}_createFBO(){const i=this.painter.context,n=i.gl,_=this.drapeBufferSize;i.activeTexture.set(n.TEXTURE0);const c=new s.T(i,{width:_[0],height:_[1],data:null},n.RGBA);c.bind(n.LINEAR,n.CLAMP_TO_EDGE);const f=i.createFramebuffer(_[0],_[1],!0,null);return f.colorAttachment.set(c.texture),f.depthAttachment=new ao(i,f.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,f.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):f.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:f,tex:c,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const i in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const n=this._style._mergedLayers[i],_=n.isHidden(this.painter.transform.zoom);return n.type==="custom"?!_&&n.shouldRedrape():!_&&n.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(const _ of this._style.getSources())if(_ instanceof ie){i=!0;break}if(!i)return;const n={};for(let _=0;_<this._style.order.length;++_){const c=this._style._mergedLayers[this._style.order[_]],f=this._style.getLayerSourceCache(c);if(f&&!n[f.id]&&!c.isHidden(this.painter.transform.zoom)&&c.type==="line"&&c.widthExpression()instanceof s.Z){n[f.id]=!0;for(const g of this.proxyCoords){const b=this.proxyToSource[g.key][f.id];if(b)for(const A of b)this._clearRenderCacheForTile(f.id,A)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(const _ in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[_]._source instanceof ne){i=!0;break}if(!i)return;const n={};for(let _=0;_<this._style.order.length;++_){const c=this._style._mergedLayers[this._style.order[_]],f=this._style.getLayerSourceCache(c);if(!f||n[f.id]||c.isHidden(this.painter.transform.zoom)||c.type!=="raster")continue;const g=c.paint.get("raster-fade-duration");for(const b of this.proxyCoords){const A=this.proxyToSource[b.key][f.id];if(A)for(const E of A){const O=x_(f.getTile(E),f.findLoadedParent(E,0),f,this.painter.transform,g);(O.opacity!==1||O.mix!==0)&&this._clearRenderCacheForTile(f.id,E)}}}}_setupDrapedRenderBatches(){const i=this._style.order,n=i.length;if(n===0)return;const _=[];this._pendingGroundEffectLayers=[];let c,f=0,g=this._style._mergedLayers[i[f]];for(;!this._style.isLayerDraped(g)&&g.isHidden(this.painter.transform.zoom)&&++f<n;)g=this._style._mergedLayers[i[f]];for(;f<n;++f){const b=this._style._mergedLayers[i[f]];b.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(b)?c===void 0&&(c=f):(b.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(f),c!==void 0&&(_.push({start:c,end:f-1}),c=void 0)))}if(c!==void 0&&_.push({start:c,end:f-1}),_.length!==0){const b=_[_.length-1];this._pendingGroundEffectLayers.every(A=>A>b.end)||s.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=_}_setupRenderCache(i){const n=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,n.renderCache.length>n.renderCachePool.length){const g=Object.values(n.proxyCachedFBO);n.proxyCachedFBO={};for(let b=0;b<g.length;++b){const A=Object.values(g[b]);n.renderCachePool.push(...A)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,c=this._tilesDirty;for(let g=_.length-1;g>=0;g--){const b=_[g];if(n.getTileByID(b.key),n.proxyCachedFBO[b.key]!==void 0){const A=i[b.key],E=this.proxyToSource[b.key];let O=0;for(const S in E){const L=E[S],w=A[S];if(!w||w.length!==L.length||L.some((U,B)=>U!==w[B]||c[S]&&c[S].hasOwnProperty(U.key))){O=-1;break}++O}for(const S in n.proxyCachedFBO[b.key])n.renderCache[n.proxyCachedFBO[b.key][S]].dirty=O<0||O!==Object.values(A).length}}const f=[...this._drapedRenderBatches];f.sort((g,b)=>b.end-b.start-(g.end-g.start));for(const g of f)for(const b of _){if(n.proxyCachedFBO[b.key])continue;let A=n.renderCachePool.pop();A===void 0&&n.renderCache.length<50&&(A=n.renderCache.length,n.renderCache.push(this._createFBO())),A!==void 0&&(n.proxyCachedFBO[b.key]={},n.proxyCachedFBO[b.key][g.start]=A,n.renderCache[A].dirty=!0)}this._tilesDirty={}}_setupStencil(i,n,_,c){if(!c||!this._sourceTilesOverlap[c.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const f=this.painter.context,g=f.gl;if(n.length<=1)return void(this._overlapStencilType=!1);let b;if(_.isTileClipped())b=n.length,this._overlapStencilMode.test={func:g.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(n[0].overscaledZ>n[n.length-1].overscaledZ))return void(this._overlapStencilType=!1);b=1,this._overlapStencilMode.test={func:g.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+b>255&&(f.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=b,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(n,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):Be.disabled}_renderTileClippingMasks(i,n){const _=this.painter,c=this.painter.context,f=c.gl;_._tileClippingMaskIDs={},c.setColorMode(Je.disabled),c.setDepthMode(Ne.disabled);const g=_.getOrCreateProgram("clippingMask");for(const b of i){const A=_._tileClippingMaskIDs[b.key]=--n;g.draw(_,f.TRIANGLES,Ne.disabled,new Be({func:f.ALWAYS,mask:0},A,255,f.KEEP,f.KEEP,f.REPLACE),Je.disabled,Le.disabled,T_(b.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(i){const n=this.painter.transform;if(i.x<0||i.x>n.width||i.y<0||i.y>n.height)return null;const _=[i.x,i.y,1,1];s.a7.transformMat4(_,_,n.pixelMatrixInverse),s.a7.scale(_,_,1/_[3]),_[0]/=n.worldSize,_[1]/=n.worldSize;const c=n._camera.position,f=s.bl(1,n.center.lat),g=[c[0],c[1],c[2]/f,0],b=s.N.subtract([],_.slice(0,3),g);s.N.normalize(b,b);const A=this.raycast(g,b,this._exaggeration);return A!==null&&A?(s.N.scaleAndAdd(g,g,b,A),g[3]=g[2],g[2]*=f,g):null}drawDepth(){const i=this.painter,n=i.context,_=this.proxySourceCache,c=Math.ceil(i.width),f=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===c&&this._depthFBO.height===f||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const g=n.gl,b=n.createFramebuffer(c,f,!0,"renderbuffer");n.activeTexture.set(g.TEXTURE0);const A=new s.T(n,{width:c,height:f,data:null},g.RGBA);A.bind(g.NEAREST,g.CLAMP_TO_EDGE),b.colorAttachment.set(A.texture);const E=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,c,f);b.depthAttachment.set(E),this._depthFBO=b,this._depthTexture=A}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,c,f]),function(g,b,A,E){if(g.transform.projection.name==="globe")return;const O=g.context,S=O.gl;O.clear({depth:1});const L=g.getOrCreateProgram("terrainDepth"),w=new Ne(S.LESS,Ne.ReadWrite,g.depthRangeFor3D);for(const U of E){const B=A.getTile(U),k=Br(U.projMatrix,0,[0,0,0]);b.setupElevationDraw(B,L),L.draw(g,S.TRIANGLES,w,Be.disabled,Je.unblended,Le.backCCW,k,"terrain_depth",b.gridBuffer,b.gridIndexBuffer,b.gridNoSkirtSegments)}}(i,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,n,_){if(i.getSource()instanceof s.ap)return this._setupProxiedCoordsForImageSource(i,n,_);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const c=this.proxiedCoords[i.id]=[],f=this.proxyCoords;for(let A=0;A<f.length;A++){const E=f[A],O=this._findTileCoveringTileID(E,i);if(O){const S=this._createProxiedId(E,O,_[E.key]&&_[E.key][i.id]);c.push(S),this.proxyToSource[E.key][i.id]=[S]}}let g=!1;const b=new Set;for(let A=0;A<n.length;A++){const E=i.getTile(n[A]);if(!E||!E.hasData())continue;const O=this._findTileCoveringTileID(E.tileID,this.proxySourceCache);if(O&&O.tileID.canonical.z!==E.tileID.canonical.z){const S=this.proxyToSource[O.tileID.key][i.id],L=this._createProxiedId(O.tileID,E,_[O.tileID.key]&&_[O.tileID.key][i.id]);S?S.splice(S.length-1,0,L):this.proxyToSource[O.tileID.key][i.id]=[L];const w=this.proxyToSource[O.tileID.key][i.id];b.has(w)||b.add(w),c.push(L),g=!0}}if(this._sourceTilesOverlap[i.id]=g,g&&this._debugParams.sortTilesHiZFirst)for(const A of b)A.sort((E,O)=>O.overscaledZ-E.overscaledZ)}_setupProxiedCoordsForImageSource(i,n,_){if(!i.getSource().loaded())return;const c=this.proxiedCoords[i.id]=[],f=this.proxyCoords,g=i.getSource(),b=g.tileID;if(!b)return;const A=new s.P(b.x,b.y)._div(1<<b.z),E=g.coordinates.map(s.L.fromLngLat).reduce((S,L)=>(S.min.x=Math.min(S.min.x,L.x-A.x),S.min.y=Math.min(S.min.y,L.y-A.y),S.max.x=Math.max(S.max.x,L.x-A.x),S.max.y=Math.max(S.max.y,L.y-A.y),S),{min:new s.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),O=(S,L)=>{const w=S.wrap+S.canonical.x/(1<<S.canonical.z),U=S.canonical.y/(1<<S.canonical.z),B=s.V/(1<<S.canonical.z),k=L.wrap+L.canonical.x/(1<<L.canonical.z),M=L.canonical.y/(1<<L.canonical.z);return w+B<k+E.min.x||w>k+E.max.x||U+B<M+E.min.y||U>M+E.max.y};for(let S=0;S<f.length;S++){const L=f[S];for(let w=0;w<n.length;w++){const U=i.getTile(n[w]);if(!U||!U.hasData()||O(L,U.tileID))continue;const B=this._createProxiedId(L,U,_[L.key]&&_[L.key][i.id]),k=this.proxyToSource[L.key][i.id];k?k.push(B):this.proxyToSource[L.key][i.id]=[B],c.push(B)}}}_createProxiedId(i,n,_){let c=this.orthoMatrix;if(_){const f=_.find(g=>g.key===n.tileID.key);if(f)return f}if(n.tileID.key!==i.key){const f=i.canonical.z-n.tileID.canonical.z;let g,b,A;c=s.a6.create();const E=n.tileID.wrap-i.wrap<<i.overscaledZ;f>0?(g=s.V>>f,b=g*((n.tileID.canonical.x<<f)-i.canonical.x+E),A=g*((n.tileID.canonical.y<<f)-i.canonical.y)):(g=s.V<<-f,b=s.V*(n.tileID.canonical.x-(i.canonical.x+E<<-f)),A=s.V*(n.tileID.canonical.y-(i.canonical.y<<-f))),s.a6.ortho(c,0,g,0,g,0,1),s.a6.translate(c,c,[b,A,0])}return new dc(n.tileID,i.key,c)}_findTileCoveringTileID(i,n){let _=n.getTile(i);if(_&&_.hasData())return _;const c=this._findCoveringTileCache[n.id],f=c[i.key];if(_=f?n.getTileByID(f):null,_&&_.hasData()||f===null)return _;let g=_?_.tileID:i,b=g.overscaledZ;const A=n.getSource().minzoom,E=[];if(!f){const S=n.getSource().maxzoom;if(i.canonical.z>=S){const L=i.canonical.z-S;n.getSource().reparseOverscaled?(b=Math.max(i.canonical.z+2,n.transform.tileZoom),g=new s.am(b,i.wrap,S,i.canonical.x>>L,i.canonical.y>>L)):L!==0&&(b=S,g=new s.am(b,i.wrap,S,i.canonical.x>>L,i.canonical.y>>L))}g.key!==i.key&&(E.push(g.key),_=n.getTile(g))}const O=S=>{E.forEach(L=>{c[L]=S}),E.length=0};for(b-=1;b>=A&&(!_||!_.hasData());b--){_&&O(_.tileID.key);const S=g.calculateScaledKey(b);if(_=n.getTileByID(S),_&&_.hasData())break;const L=c[S];if(L===null)break;L===void 0?E.push(S):_=n.getTileByID(L)}return O(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,n){let _=this._tilesDirty[i];_||(_=this._tilesDirty[i]={}),_[n.key]=!0}}function A_(d,i,n){const _=function(b,A,E){const O=s.N.dot(A,b),S=s.N.dot(E,[.2126,.7152,.0722]),L=(U,B,k)=>(1-k)*U+k*B,w=L(1-.3*Math.min(S,1),1,Math.min(O+1,1));return L(.92,1,Math.asin(s.aa(A[2],-1,1))/Math.PI+.5)*w}(d,[0,0,1],i),c=[0,0,0];s.N.scale(c,n.slice(0,3),_);const f=[0,0,0];s.N.scale(f,i.slice(0,3),d[2]);const g=[0,0,0];return s.N.add(g,c,f),s.bU(g)}const v_=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],_c=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class E_{static cacheKey(i,n,_,c){let f=`${n}${c?c.cacheKey:""}`;for(const g of _)i.usedDefines.includes(g)&&(f+=`/${g}`);return f}constructor(i,n,_,c,f,g,b){const A=i.gl;this.program=A.createProgram(),this.configuration=c,this.name=n,this.fixedDefines=[...g];const E=c?c.getBinderAttributes():[],O=(_.staticAttributes||[]).concat(E);let S=c?c.defines():[];S=S.concat(g.map(M=>`#define ${M}`));const L=`#version 300 es
`;let w=L+S.concat("precision mediump float;",Dr,f_.fragmentSource).join(`
`);for(const M of _.fragmentIncludes)w+=`
${mo[M]}`;w+=`
${_.fragmentSource}`;let U=L+S.concat("precision highp float;",Dr,f_.vertexSource).join(`
`);for(const M of _.vertexIncludes)U+=`
${mo[M]}`;U+=`
${_.vertexSource}`;const B=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(B,w),A.compileShader(B),A.attachShader(this.program,B);const k=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource(k,U),A.compileShader(k),A.attachShader(this.program,k),this.attributes={},this.numAttributes=O.length;for(let M=0;M<this.numAttributes;M++)if(O[M]){const H=O[M].startsWith("a_")?O[M]:`a_${O[M]}`;A.bindAttribLocation(this.program,M,H),this.attributes[H]=M}b&&b.shaderVaryings.length>0&&A.transformFeedbackVaryings(this.program,b.shaderVaryings,b.bufferMode),A.linkProgram(this.program),A.deleteShader(k),A.deleteShader(B),this.fixedUniforms=f(i),this.binderUniforms=c?c.getUniforms(i):[],g.includes("TERRAIN")&&(this.terrainUniforms=(M=>({u_dem:new s.bO(M),u_dem_prev:new s.bO(M),u_dem_tl:new s.bL(M),u_dem_scale:new s.bN(M),u_dem_tl_prev:new s.bL(M),u_dem_scale_prev:new s.bN(M),u_dem_size:new s.bN(M),u_dem_lerp:new s.bN(M),u_exaggeration:new s.bN(M),u_depth:new s.bO(M),u_depth_size_inv:new s.bL(M),u_meter_to_dem:new s.bN(M),u_label_plane_matrix_inv:new s.bK(M)}))(i)),g.includes("GLOBE")&&(this.globeUniforms=(M=>({u_tile_tl_up:new s.bM(M),u_tile_tr_up:new s.bM(M),u_tile_br_up:new s.bM(M),u_tile_bl_up:new s.bM(M),u_tile_up_scale:new s.bN(M)}))(i)),g.includes("FOG")&&(this.fogUniforms=(M=>({u_fog_matrix:new s.bK(M),u_fog_range:new s.bL(M),u_fog_color:new s.bP(M),u_fog_horizon_blend:new s.bN(M),u_fog_vertical_limit:new s.bL(M),u_fog_temporal_offset:new s.bN(M),u_frustum_tl:new s.bM(M),u_frustum_tr:new s.bM(M),u_frustum_br:new s.bM(M),u_frustum_bl:new s.bM(M),u_globe_pos:new s.bM(M),u_globe_radius:new s.bN(M),u_globe_transition:new s.bN(M),u_is_globe:new s.bO(M),u_viewport:new s.bL(M)}))(i)),g.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(M=>({u_cutoff_params:new s.bP(M)}))(i)),g.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(M=>({u_lighting_ambient_color:new s.bM(M),u_lighting_directional_dir:new s.bM(M),u_lighting_directional_color:new s.bM(M),u_ground_radiance:new s.bM(M)}))(i)),g.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(M=>({u_light_matrix_0:new s.bK(M),u_light_matrix_1:new s.bK(M),u_fade_range:new s.bL(M),u_shadow_normal_offset:new s.bM(M),u_shadow_intensity:new s.bN(M),u_shadow_texel_size:new s.bN(M),u_shadow_map_resolution:new s.bN(M),u_shadow_direction:new s.bM(M),u_shadow_bias:new s.bM(M),u_shadowmap_0:new s.bO(M),u_shadowmap_1:new s.bO(M)}))(i))}}setTerrainUniformValues(i,n){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const c in n)_[c]&&_[c].set(this.program,c,n[c])}}setGlobeUniformValues(i,n){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const c in n)_[c]&&_[c].set(this.program,c,n[c])}}setFogUniformValues(i,n){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const c in n)_[c].set(this.program,c,n[c])}}setCutoffUniformValues(i,n){if(!this.cutoffUniforms)return;const _=this.cutoffUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const c in n)_[c].set(this.program,c,n[c])}}setLightsUniformValues(i,n){if(!this.lightsUniforms)return;const _=this.lightsUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const c in n)_[c].set(this.program,c,n[c])}}setShadowUniformValues(i,n){if(this.failedToCreate||!this.shadowUniforms)return;const _=this.shadowUniforms;i.program.set(this.program);for(const c in n)_[c].set(this.program,c,n[c])}_drawDebugWireframe(i,n,_,c,f,g,b,A,E,O){const S=i.options.wireframe;if(S.terrain===!1&&S.layers2D===!1&&S.layers3D===!1)return;const L=i.context;if(!(()=>!(!S.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!S.layers2D||i._terrain&&i._terrain.renderingToTexture||!v_.includes(this.name))||!(!S.layers3D||!_c.includes(this.name)))())return;const w=L.gl,U=i.wireframeDebugCache.getLinesFromTrianglesBuffer(i.frameCounter,f,L);if(!U)return;const B=[...this.fixedDefines];B.push("DEBUG_WIREFRAME");const k=i.getOrCreateProgram(this.name,{config:this.configuration,defines:B});L.program.set(k.program);const M=(V,$,z)=>{if($[V]&&z[V])for(const Z in $[V])z[V][Z]&&z[V][Z].set(z.program,Z,$[V][Z].current)};E&&E.setUniforms(k.program,L,k.binderUniforms,b,{zoom:A}),M("fixedUniforms",this,k),M("terrainUniforms",this,k),M("globeUniforms",this,k),M("fogUniforms",this,k),M("lightsUniforms",this,k),M("shadowUniforms",this,k),U.bind(),L.setColorMode(new Je([w.ONE,w.ONE_MINUS_SRC_ALPHA,w.ZERO,w.ONE],s.ax.transparent,[!0,!0,!0,!1])),L.setDepthMode(new Ne(n.func===w.LESS?w.LEQUAL:n.func,Ne.ReadOnly,n.range)),L.setStencilMode(Be.disabled);const H=3*g.primitiveLength*2,q=3*g.primitiveOffset*2*2;O&&O>1?w.drawElementsInstanced(w.LINES,H,w.UNSIGNED_SHORT,q,O):w.drawElements(w.LINES,H,w.UNSIGNED_SHORT,q),f.bind(),L.program.set(this.program),L.setDepthMode(n),L.setStencilMode(_),L.setColorMode(c)}draw(i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k,M){const H=i.context,q=H.gl;if(this.failedToCreate)return;H.program.set(this.program),H.setDepthMode(_),H.setStencilMode(c),H.setColorMode(f),H.setCullFace(g);for(const Z of Object.keys(this.fixedUniforms))this.fixedUniforms[Z].set(this.program,Z,b[Z]);U&&U.setUniforms(this.program,H,this.binderUniforms,L,{zoom:w});const V={[q.POINTS]:1,[q.LINES]:2,[q.TRIANGLES]:3,[q.LINE_STRIP]:1}[n],$=M&&M.length>0;if($){for(const Z of M)q.bindBufferBase(q.TRANSFORM_FEEDBACK_BUFFER,Z.targetIndex,Z.buffer.buffer);q.beginTransformFeedback(n)}const z=k&&k>0?1:void 0;for(const Z of S.get()){const at=Z.vaos||(Z.vaos={});(at[A]||(at[A]=new h_)).bind(H,this,E,U?U.getPaintVertexBuffers():[],O,Z.vertexOffset,B||[],z),k&&k>1?q.drawElementsInstanced(n,Z.primitiveLength*V,q.UNSIGNED_SHORT,Z.primitiveOffset*V*2,k):O?q.drawElements(n,Z.primitiveLength*V,q.UNSIGNED_SHORT,Z.primitiveOffset*V*2):q.drawArrays(n,Z.vertexOffset,Z.vertexLength),n===q.TRIANGLES&&O&&this._drawDebugWireframe(i,_,c,f,O,Z,L,w,U,k)}$&&q.endTransformFeedback()}}function I_(d,i){const n=Math.pow(2,i.tileID.overscaledZ),_=i.tileSize*Math.pow(2,d.transform.tileZoom)/n,c=_*(i.tileID.canonical.x+i.tileID.wrap*n),f=_*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/s.a3(i,1,d.transform.tileZoom),u_pixel_coord_upper:[c>>16,f>>16],u_pixel_coord_lower:[65535&c,65535&f]}}const uc=s.a6.create(),O_=(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B)=>{const k=i.style.light,M=k.properties.get("position"),H=[M.x,M.y,M.z],q=s.co.create();k.properties.get("anchor")==="viewport"&&(s.co.fromRotation(q,-i.transform.angle),s.N.transformMat3(H,H,q));const V=k.properties.get("color"),$=i.transform,z={u_matrix:d,u_lightpos:H,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[V.r,V.g,V.b],u_vertical_gradient:+n,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:uc,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:c,u_edge_radius:f,u_flood_light_color:S,u_vertical_scale:L,u_flood_light_intensity:w,u_ground_shadow_factor:U,u_emissive_strength:B};return $.projection.name==="globe"&&(z.u_tile_id=[g.canonical.x,g.canonical.y,1<<g.canonical.z],z.u_zoom_transition=A,z.u_inv_rot_matrix=O,z.u_merc_center=E,z.u_up_dir=$.projection.upVector(new s.bs(0,0,0),E[0]*s.V,E[1]*s.V),z.u_height_lift=b),z},C_=(d,i,n)=>({u_matrix:d,u_edge_radius:i,u_vertical_scale:n}),ds=(d,i,n,_,c,f,g,b,A,E,O,S,L,w)=>{const U=O_(d,i,n,_,c,f,g,A,E,O,S,L,w,1,[0,0,0],0),B={u_height_factor:-Math.pow(2,g.overscaledZ)/b.tileSize/8};return s.e(U,I_(i,b),B)},Xs=(d,i)=>({u_matrix:d,u_emissive_strength:i}),S_=(d,i,n,_)=>s.e(Xs(d,i),I_(n,_)),_s=(d,i,n)=>({u_matrix:d,u_world:n,u_emissive_strength:i}),cc=(d,i,n,_,c)=>s.e(S_(d,i,n,_),{u_world:c}),Ur=(d,i,n,_)=>{const c=s.V/n.tileSize;return{u_matrix:d,u_camera_to_center_distance:i.getCameraToCenterDistance(_),u_extrude_scale:[i.pixelsToGLUnits[0]/c,i.pixelsToGLUnits[1]/c]}},R_=(d,i,n=1)=>({u_matrix:d,u_color:i,u_overlay:0,u_overlay_scale:n}),mc=s.a6.create(),N_=(d,i,n,_,c,f,g)=>{const b=d.transform,A=b.projection.name==="globe",E=A?s.cp(b.zoom,i.canonical)*b._pixelsPerMercatorPixel:s.a3(n,1,f),O={u_matrix:i.projMatrix,u_extrude_scale:E,u_intensity:g,u_inv_rot_matrix:mc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){O.u_inv_rot_matrix=_,O.u_merc_center=c,O.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],O.u_zoom_transition=s.S(b.zoom);const S=c[0]*s.V,L=c[1]*s.V;O.u_up_dir=b.projection.upVector(new s.bs(0,0,0),S,L)}return O};function kr(d,[i,n,_,c],[f,g]){if(f===g)return[0,0,0,0];const b=255*(d-1)/(d*(g-f));return[i*b,n*b,_*b,c*b]}function fc(d,i,[n,_]){return n===_?0:.5/d+(i-n)*(d-1)/(d*(_-n))}const L_=(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k,M,H,q,V)=>{return{u_matrix:d,u_normalize_matrix:i,u_globe_matrix:n,u_merc_matrix:_,u_grid_matrix:c,u_tl_parent:f,u_scale_parent:E,u_fade_t:O.mix,u_opacity:O.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(z=S.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:($=S.paint.get("raster-contrast"),$>0?1/(1-$):1+$),u_spin_weights:wl(S.paint.get("raster-hue-rotate")),u_perspective_transform:L,u_raster_elevation:w,u_zoom_transition:g,u_merc_center:b,u_cutoff_params:A,u_colorization_mix:kr(s.cq,B,M),u_colorization_offset:fc(s.cq,k,M),u_color_ramp:U,u_texture_offset:[q/(H+2*q),H/(H+2*q)],u_texture_res:[H+2*q,H+2*q],u_emissive_strength:V};var $,z};function wl(d){d*=Math.PI/180;const i=Math.sin(d),n=Math.cos(d);return[(2*n+1)/3,(-Math.sqrt(3)*i-n+1)/3,(Math.sqrt(3)*i-n+1)/3]}const Ef=(d,i,n,_,c,f,g,b,A,E,O,S)=>({u_matrix:d,u_normalize_matrix:i,u_globe_matrix:n,u_merc_matrix:_,u_grid_matrix:c,u_tl_parent:f,u_scale_parent:E,u_fade_t:O.mix,u_opacity:O.opacity,u_image0:0,u_image1:1,u_raster_elevation:S,u_zoom_transition:g,u_merc_center:b,u_cutoff_params:A}),If=(d,i,n,_,c,f,g,b)=>({u_tile_offset:d,u_velocity:i,u_color_ramp:_,u_velocity_res:n,u_max_speed:c,u_texture_offset:f,u_data_scale:g,u_data_offset:b}),pc=(d,i,n,_,c,f,g,b)=>({u_velocity:d,u_velocity_res:i,u_max_speed:n,u_speed_factor:_,u_lifetime_delta:c,u_rand_seed:Math.random(),u_texture_offset:f,u_data_scale:g,u_data_offset:b}),hc=s.a6.create(),zr=(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k,M)=>{const H=c.transform,q={u_is_size_zoom_constant:+(d==="constant"||d==="source"),u_is_size_feature_constant:+(d==="constant"||d==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:H.getCameraToCenterDistance(B),u_rotate_symbol:+n,u_aspect_ratio:H.width/H.height,u_fade_change:c.options.fadeDuration?c.symbolFadeChange:1,u_matrix:f,u_label_plane_matrix:g,u_coord_matrix:b,u_is_text:+A,u_pitch_with_map:+_,u_texsize:E,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:hc,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:hc,u_up_vector:[0,-1,0],u_icon_transition:M||0,u_icon_saturation:k};return B.name==="globe"&&(q.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],q.u_zoom_transition=S,q.u_inv_rot_matrix=w,q.u_merc_center=L,q.u_camera_forward=H._camera.forward(),q.u_ecef_origin=s.cr(H.globeMatrix,O.toUnwrapped()),q.u_tile_matrix=Float32Array.from(H.globeMatrix),q.u_up_vector=U),q},Wl=(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k)=>s.e(zr(d,i,n,_,c,f,g,b,A,E,S,L,w,U,B,k,1),{u_gamma_scale:_?c.transform.getCameraToCenterDistance(k)*Math.cos(c.terrain?0:c.transform._pitch):1,u_device_pixel_ratio:s.f.devicePixelRatio,u_is_halo:+O,undefined:void 0}),Hr=(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B)=>s.e(Wl(d,i,n,_,c,f,g,b,!0,A,!0,O,S,L,w,U,B),{u_texsize_icon:E,u_texture_icon:1}),P_=(d,i,n,_)=>({u_matrix:d,u_emissive_strength:i,u_opacity:n,u_color:_}),Ml=(d,i,n,_,c,f,g)=>s.e(function(b,A,E,O){const S=E.imageManager.getPattern(b.toString(),A),{width:L,height:w}=E.imageManager.getPixelSize(A),U=Math.pow(2,O.tileID.overscaledZ),B=O.tileSize*Math.pow(2,E.transform.tileZoom)/U,k=B*(O.tileID.canonical.x+O.tileID.wrap*U),M=B*O.tileID.canonical.y;return{u_image:0,u_pattern_tl:S.tl,u_pattern_br:S.br,u_texsize:[L,w],u_pattern_size:S.displaySize,u_tile_units_to_pixels:1/s.a3(O,1,E.transform.tileZoom),u_pixel_coord_upper:[k>>16,M>>16],u_pixel_coord_lower:[65535&k,65535&M]}}(c,f,_,g),{u_matrix:d,u_emissive_strength:i,u_opacity:n}),Yr=(d,i,n,_,c,f,g,b,A,E,O,S,L=[0,0,0],w)=>{const U=_.style.light,B=U.properties.get("position"),k=[-B.x,-B.y,B.z],M=s.co.create();U.properties.get("anchor")==="viewport"&&(s.co.fromRotation(M,-_.transform.angle),s.N.transformMat3(k,k,M));const H=E.alphaMode==="MASK",q=U.properties.get("color"),V=S.paint.get("model-ambient-occlusion-intensity"),$=S.paint.get("model-color").constantOr(s.ax.white),z=S.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:d,u_lighting_matrix:i,u_normal_matrix:n,u_lightpos:k,u_lightintensity:U.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_camera_pos:L,u_opacity:c,u_baseTextureIsAlpha:0,u_alphaMask:+H,u_alphaCutoff:E.alphaCutoff,u_baseColorFactor:[f.r,f.g,f.b,f.a],u_emissiveFactor:[g[0],g[1],g[2],1],u_metallicFactor:b,u_roughnessFactor:A,u_baseColorTexture:Fi.BaseColor,u_metallicRoughnessTexture:Fi.MetallicRoughness,u_normalTexture:Fi.Normal,u_occlusionTexture:Fi.Occlusion,u_emissionTexture:Fi.Emission,u_color_mix:[$.r,$.g,$.b,z],u_aoIntensity:V,u_emissive_strength:O,u_occlusionTextureTransform:w||[0,0,0,0]}},Dl=new Float32Array(16),Fl=(d,i=Dl,n=Dl)=>({u_matrix:d,u_instance:i,u_node_matrix:n}),Of={fillExtrusion:d=>({u_matrix:new s.bK(d),u_lightpos:new s.bM(d),u_lightintensity:new s.bN(d),u_lightcolor:new s.bM(d),u_vertical_gradient:new s.bN(d),u_opacity:new s.bN(d),u_edge_radius:new s.bN(d),u_ao:new s.bL(d),u_tile_id:new s.bM(d),u_zoom_transition:new s.bN(d),u_inv_rot_matrix:new s.bK(d),u_merc_center:new s.bL(d),u_up_dir:new s.bM(d),u_height_lift:new s.bN(d),u_flood_light_color:new s.bM(d),u_vertical_scale:new s.bN(d),u_flood_light_intensity:new s.bN(d),u_ground_shadow_factor:new s.bM(d),u_emissive_strength:new s.bN(d)}),fillExtrusionDepth:d=>({u_matrix:new s.bK(d),u_edge_radius:new s.bN(d),u_vertical_scale:new s.bN(d)}),fillExtrusionPattern:d=>({u_matrix:new s.bK(d),u_lightpos:new s.bM(d),u_lightintensity:new s.bN(d),u_lightcolor:new s.bM(d),u_vertical_gradient:new s.bN(d),u_height_factor:new s.bN(d),u_edge_radius:new s.bN(d),u_ao:new s.bL(d),u_tile_id:new s.bM(d),u_zoom_transition:new s.bN(d),u_inv_rot_matrix:new s.bK(d),u_merc_center:new s.bL(d),u_up_dir:new s.bM(d),u_height_lift:new s.bN(d),u_image:new s.bO(d),u_texsize:new s.bL(d),u_pixel_coord_upper:new s.bL(d),u_pixel_coord_lower:new s.bL(d),u_tile_units_to_pixels:new s.bN(d),u_opacity:new s.bN(d)}),fillExtrusionGroundEffect:d=>({u_matrix:new s.bK(d),u_opacity:new s.bN(d),u_ao_pass:new s.bN(d),u_meter_to_tile:new s.bN(d),u_ao:new s.bL(d),u_flood_light_intensity:new s.bN(d),u_flood_light_color:new s.bM(d),u_attenuation:new s.bN(d),u_edge_radius:new s.bN(d),u_fb:new s.bO(d),u_fb_size:new s.bN(d)}),fill:d=>({u_matrix:new s.bK(d),u_emissive_strength:new s.bN(d)}),fillPattern:d=>({u_matrix:new s.bK(d),u_emissive_strength:new s.bN(d),u_image:new s.bO(d),u_texsize:new s.bL(d),u_pixel_coord_upper:new s.bL(d),u_pixel_coord_lower:new s.bL(d),u_tile_units_to_pixels:new s.bN(d)}),fillOutline:d=>({u_matrix:new s.bK(d),u_emissive_strength:new s.bN(d),u_world:new s.bL(d)}),fillOutlinePattern:d=>({u_matrix:new s.bK(d),u_emissive_strength:new s.bN(d),u_world:new s.bL(d),u_image:new s.bO(d),u_texsize:new s.bL(d),u_pixel_coord_upper:new s.bL(d),u_pixel_coord_lower:new s.bL(d),u_tile_units_to_pixels:new s.bN(d)}),circle:s.cs,collisionBox:d=>({u_matrix:new s.bK(d),u_camera_to_center_distance:new s.bN(d),u_extrude_scale:new s.bL(d)}),collisionCircle:d=>({u_matrix:new s.bK(d),u_inv_matrix:new s.bK(d),u_camera_to_center_distance:new s.bN(d),u_viewport_size:new s.bL(d)}),debug:d=>({u_color:new s.ca(d),u_matrix:new s.bK(d),u_overlay:new s.bO(d),u_overlay_scale:new s.bN(d)}),clippingMask:d=>({u_matrix:new s.bK(d)}),heatmap:d=>({u_extrude_scale:new s.bN(d),u_intensity:new s.bN(d),u_matrix:new s.bK(d),u_inv_rot_matrix:new s.bK(d),u_merc_center:new s.bL(d),u_tile_id:new s.bM(d),u_zoom_transition:new s.bN(d),u_up_dir:new s.bM(d)}),heatmapTexture:d=>({u_image:new s.bO(d),u_color_ramp:new s.bO(d),u_opacity:new s.bN(d)}),hillshade:d=>({u_matrix:new s.bK(d),u_image:new s.bO(d),u_latrange:new s.bL(d),u_light:new s.bL(d),u_shadow:new s.ca(d),u_highlight:new s.ca(d),u_emissive_strength:new s.bN(d),u_accent:new s.ca(d)}),hillshadePrepare:d=>({u_matrix:new s.bK(d),u_image:new s.bO(d),u_dimension:new s.bL(d),u_zoom:new s.bN(d)}),line:s.ct,linePattern:s.cu,raster:d=>({u_matrix:new s.bK(d),u_normalize_matrix:new s.bK(d),u_globe_matrix:new s.bK(d),u_merc_matrix:new s.bK(d),u_grid_matrix:new s.cb(d),u_tl_parent:new s.bL(d),u_scale_parent:new s.bN(d),u_fade_t:new s.bN(d),u_opacity:new s.bN(d),u_image0:new s.bO(d),u_image1:new s.bO(d),u_brightness_low:new s.bN(d),u_brightness_high:new s.bN(d),u_saturation_factor:new s.bN(d),u_contrast_factor:new s.bN(d),u_spin_weights:new s.bM(d),u_perspective_transform:new s.bL(d),u_raster_elevation:new s.bN(d),u_zoom_transition:new s.bN(d),u_merc_center:new s.bL(d),u_cutoff_params:new s.bP(d),u_colorization_mix:new s.bP(d),u_colorization_offset:new s.bN(d),u_color_ramp:new s.bO(d),u_texture_offset:new s.bL(d),u_texture_res:new s.bL(d),u_emissive_strength:new s.bN(d)}),rasterParticle:d=>({u_matrix:new s.bK(d),u_normalize_matrix:new s.bK(d),u_globe_matrix:new s.bK(d),u_merc_matrix:new s.bK(d),u_grid_matrix:new s.cb(d),u_tl_parent:new s.bL(d),u_scale_parent:new s.bN(d),u_fade_t:new s.bN(d),u_opacity:new s.bN(d),u_image0:new s.bO(d),u_image1:new s.bO(d),u_raster_elevation:new s.bN(d),u_zoom_transition:new s.bN(d),u_merc_center:new s.bL(d),u_cutoff_params:new s.bP(d)}),rasterParticleTexture:d=>({u_texture:new s.bO(d),u_opacity:new s.bN(d)}),rasterParticleDraw:d=>({u_tile_offset:new s.bL(d),u_velocity:new s.bO(d),u_color_ramp:new s.bO(d),u_velocity_res:new s.bL(d),u_max_speed:new s.bN(d),u_texture_offset:new s.bL(d),u_data_scale:new s.bP(d),u_data_offset:new s.bN(d)}),rasterParticleUpdate:d=>({u_velocity:new s.bO(d),u_velocity_res:new s.bL(d),u_max_speed:new s.bN(d),u_speed_factor:new s.bN(d),u_lifetime_delta:new s.bN(d),u_rand_seed:new s.bN(d),u_texture_offset:new s.bL(d),u_data_scale:new s.bP(d),u_data_offset:new s.bN(d)}),symbolIcon:d=>({u_is_size_zoom_constant:new s.bO(d),u_is_size_feature_constant:new s.bO(d),u_size_t:new s.bN(d),u_size:new s.bN(d),u_camera_to_center_distance:new s.bN(d),u_rotate_symbol:new s.bO(d),u_aspect_ratio:new s.bN(d),u_fade_change:new s.bN(d),u_matrix:new s.bK(d),u_label_plane_matrix:new s.bK(d),u_coord_matrix:new s.bK(d),u_is_text:new s.bO(d),u_pitch_with_map:new s.bO(d),u_texsize:new s.bL(d),u_tile_id:new s.bM(d),u_zoom_transition:new s.bN(d),u_inv_rot_matrix:new s.bK(d),u_merc_center:new s.bL(d),u_camera_forward:new s.bM(d),u_tile_matrix:new s.bK(d),u_up_vector:new s.bM(d),u_ecef_origin:new s.bM(d),u_texture:new s.bO(d),u_icon_transition:new s.bN(d),u_icon_saturation:new s.bN(d)}),symbolSDF:d=>({u_is_size_zoom_constant:new s.bO(d),u_is_size_feature_constant:new s.bO(d),u_size_t:new s.bN(d),u_size:new s.bN(d),u_camera_to_center_distance:new s.bN(d),u_rotate_symbol:new s.bO(d),u_aspect_ratio:new s.bN(d),u_fade_change:new s.bN(d),u_matrix:new s.bK(d),u_label_plane_matrix:new s.bK(d),u_coord_matrix:new s.bK(d),u_is_text:new s.bO(d),u_pitch_with_map:new s.bO(d),u_texsize:new s.bL(d),u_texture:new s.bO(d),u_gamma_scale:new s.bN(d),u_device_pixel_ratio:new s.bN(d),u_tile_id:new s.bM(d),u_zoom_transition:new s.bN(d),u_inv_rot_matrix:new s.bK(d),u_merc_center:new s.bL(d),u_camera_forward:new s.bM(d),u_tile_matrix:new s.bK(d),u_up_vector:new s.bM(d),u_ecef_origin:new s.bM(d),u_is_halo:new s.bO(d)}),symbolTextAndIcon:d=>({u_is_size_zoom_constant:new s.bO(d),u_is_size_feature_constant:new s.bO(d),u_size_t:new s.bN(d),u_size:new s.bN(d),u_camera_to_center_distance:new s.bN(d),u_rotate_symbol:new s.bO(d),u_aspect_ratio:new s.bN(d),u_fade_change:new s.bN(d),u_matrix:new s.bK(d),u_label_plane_matrix:new s.bK(d),u_coord_matrix:new s.bK(d),u_is_text:new s.bO(d),u_pitch_with_map:new s.bO(d),u_texsize:new s.bL(d),u_texsize_icon:new s.bL(d),u_texture:new s.bO(d),u_texture_icon:new s.bO(d),u_gamma_scale:new s.bN(d),u_device_pixel_ratio:new s.bN(d),u_is_halo:new s.bO(d)}),background:d=>({u_matrix:new s.bK(d),u_emissive_strength:new s.bN(d),u_opacity:new s.bN(d),u_color:new s.ca(d)}),backgroundPattern:d=>({u_matrix:new s.bK(d),u_emissive_strength:new s.bN(d),u_opacity:new s.bN(d),u_image:new s.bO(d),u_pattern_tl:new s.bL(d),u_pattern_br:new s.bL(d),u_texsize:new s.bL(d),u_pattern_size:new s.bL(d),u_pixel_coord_upper:new s.bL(d),u_pixel_coord_lower:new s.bL(d),u_tile_units_to_pixels:new s.bN(d)}),terrainRaster:lc,terrainDepth:lc,skybox:d=>({u_matrix:new s.bK(d),u_sun_direction:new s.bM(d),u_cubemap:new s.bO(d),u_opacity:new s.bN(d),u_temporal_offset:new s.bN(d)}),skyboxGradient:d=>({u_matrix:new s.bK(d),u_color_ramp:new s.bO(d),u_center_direction:new s.bM(d),u_radius:new s.bN(d),u_opacity:new s.bN(d),u_temporal_offset:new s.bN(d)}),skyboxCapture:d=>({u_matrix_3f:new s.cb(d),u_sun_direction:new s.bM(d),u_sun_intensity:new s.bN(d),u_color_tint_r:new s.bP(d),u_color_tint_m:new s.bP(d),u_luminance:new s.bN(d)}),globeRaster:d=>({u_proj_matrix:new s.bK(d),u_globe_matrix:new s.bK(d),u_normalize_matrix:new s.bK(d),u_merc_matrix:new s.bK(d),u_zoom_transition:new s.bN(d),u_merc_center:new s.bL(d),u_image0:new s.bO(d),u_grid_matrix:new s.cb(d),u_skirt_height:new s.bN(d),u_far_z_cutoff:new s.bN(d),u_frustum_tl:new s.bM(d),u_frustum_tr:new s.bM(d),u_frustum_br:new s.bM(d),u_frustum_bl:new s.bM(d),u_globe_pos:new s.bM(d),u_globe_radius:new s.bN(d),u_viewport:new s.bL(d)}),globeAtmosphere:d=>({u_frustum_tl:new s.bM(d),u_frustum_tr:new s.bM(d),u_frustum_br:new s.bM(d),u_frustum_bl:new s.bM(d),u_horizon:new s.bN(d),u_transition:new s.bN(d),u_fadeout_range:new s.bN(d),u_color:new s.bP(d),u_high_color:new s.bP(d),u_space_color:new s.bP(d),u_temporal_offset:new s.bN(d),u_horizon_angle:new s.bN(d)}),model:d=>({u_matrix:new s.bK(d),u_lighting_matrix:new s.bK(d),u_normal_matrix:new s.bK(d),u_lightpos:new s.bM(d),u_lightintensity:new s.bN(d),u_lightcolor:new s.bM(d),u_camera_pos:new s.bM(d),u_opacity:new s.bN(d),u_baseColorFactor:new s.bP(d),u_emissiveFactor:new s.bP(d),u_metallicFactor:new s.bN(d),u_roughnessFactor:new s.bN(d),u_baseTextureIsAlpha:new s.bO(d),u_alphaMask:new s.bO(d),u_alphaCutoff:new s.bN(d),u_baseColorTexture:new s.bO(d),u_metallicRoughnessTexture:new s.bO(d),u_normalTexture:new s.bO(d),u_occlusionTexture:new s.bO(d),u_emissionTexture:new s.bO(d),u_color_mix:new s.bP(d),u_aoIntensity:new s.bN(d),u_emissive_strength:new s.bN(d),u_occlusionTextureTransform:new s.bP(d)}),modelDepth:d=>({u_matrix:new s.bK(d),u_instance:new s.bK(d),u_node_matrix:new s.bK(d)}),groundShadow:d=>({u_matrix:new s.bK(d),u_ground_shadow_factor:new s.bM(d)}),stars:d=>({u_matrix:new s.bK(d),u_up:new s.bM(d),u_right:new s.bM(d),u_intensity_multiplier:new s.bN(d)})};let Bo;function Uo(d,i,n,_,c,f,g){const b=d.context,A=b.gl,E=d.transform,O=d.getOrCreateProgram("collisionBox"),S=[];let L=0,w=0;for(let V=0;V<_.length;V++){const $=_[V],z=i.getTile($),Z=z.getBucket(n);if(!Z)continue;const at=Qd($,Z,E);let nt=at;c[0]===0&&c[1]===0||(nt=d.translatePosMatrix(at,z,c,f));const rt=g?Z.textCollisionBox:Z.iconCollisionBox,yt=Z.collisionCircleArray;if(yt.length>0){const ut=s.a6.create(),It=nt;s.a6.mul(ut,Z.placementInvProjMatrix,E.glCoordMatrix),s.a6.mul(ut,ut,Z.placementViewportMatrix),S.push({circleArray:yt,circleOffset:w,transform:It,invTransform:ut,projection:Z.getProjection()}),L+=yt.length/4,w=L}rt&&(d.terrain&&d.terrain.setupElevationDraw(z,O),O.draw(d,A.LINES,Ne.disabled,Be.disabled,d.colorModeForRenderPass(),Le.disabled,Ur(nt,E,z,Z.getProjection()),n.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,null,E.zoom,null,[rt.collisionVertexBuffer,rt.collisionVertexBufferExt]))}if(!g||!S.length)return;const U=d.getOrCreateProgram("collisionCircle"),B=new s.cv;B.resize(4*L),B._trim();let k=0;for(const V of S)for(let $=0;$<V.circleArray.length/4;$++){const z=4*$,Z=V.circleArray[z+0],at=V.circleArray[z+1],nt=V.circleArray[z+2],rt=V.circleArray[z+3];B.emplace(k++,Z,at,nt,rt,0),B.emplace(k++,Z,at,nt,rt,1),B.emplace(k++,Z,at,nt,rt,2),B.emplace(k++,Z,at,nt,rt,3)}(!Bo||Bo.length<2*L)&&(Bo=function(V){const $=2*V,z=new s.aw;z.resize($),z._trim();for(let Z=0;Z<$;Z++){const at=6*Z;z.uint16[at+0]=4*Z+0,z.uint16[at+1]=4*Z+1,z.uint16[at+2]=4*Z+2,z.uint16[at+3]=4*Z+2,z.uint16[at+4]=4*Z+3,z.uint16[at+5]=4*Z+0}return z}(L));const M=b.createIndexBuffer(Bo,!0),H=b.createVertexBuffer(B,s.cw.members,!0);for(const V of S){const $={u_matrix:V.transform,u_inv_matrix:V.invTransform,u_camera_to_center_distance:(q=E).getCameraToCenterDistance(V.projection),u_viewport_size:[q.width,q.height]};U.draw(d,A.TRIANGLES,Ne.disabled,Be.disabled,d.colorModeForRenderPass(),Le.disabled,$,n.id,H,M,s.aB.simpleSegment(0,2*V.circleOffset,V.circleArray.length,V.circleArray.length/2),null,E.zoom)}var q;H.destroy(),M.destroy()}const ln=s.a6.create();function Bl(d){const i=d._camera.getWorldToCamera(d.worldSize,1),n=s.a6.multiply([],i,d.globeMatrix);s.a6.invert(n,n);const _=[0,0,0],c=[0,1,0,0];return s.a7.transformMat4(c,c,n),_[0]=c[0],_[1]=c[1],_[2]=c[2],s.N.normalize(_,_),_}function me({width:d,height:i,anchor:n,textOffset:_,textScale:c},f){const{horizontalAlign:g,verticalAlign:b}=s.bf(n),A=-(g-.5)*d,E=-(b-.5)*i,O=s.bd(n,_);return new s.P((A/c+O[0])*f,(E/c+O[1])*f)}function gc(d,i,n,_,c,f,g,b,A,E,O){const S=d.text.placedSymbolArray,L=d.text.dynamicLayoutVertexArray,w=d.icon.dynamicLayoutVertexArray,U={},B=d.getProjection(),k=El(b,B,f),M=f.elevation,H=B.upVectorScale(b.canonical,f.center.lat,f.worldSize).metersToTile;L.clear();for(let q=0;q<S.length;q++){const V=S.get(q),{tileAnchorX:$,tileAnchorY:z,numGlyphs:Z}=V,at=V.hidden||!V.crossTileID||d.allowVerticalPlacement&&!V.placedOrientation?null:_[V.crossTileID];if(at){let nt=0,rt=0,yt=0;if(M){const kt=M?M.getAtTileOffset(b,$,z):0,[qt,Xt,ae]=B.upVector(b.canonical,$,z);nt=kt*qt*H,rt=kt*Xt*H,yt=kt*ae*H}let[ut,It,vt,Ut]=Eo(V.projectedAnchorX+nt,V.projectedAnchorY+rt,V.projectedAnchorZ+yt,n?k:g);const ct=$u(f.getCameraToCenterDistance(B),Ut);let Tt=c.evaluateSizeForFeature(d.textSizeData,E,V)*ct/s.bc;n&&(Tt*=d.tilePixelRatio/A);const lt=me(at,Tt);n?({x:ut,y:It,z:vt}=B.projectTilePoint($+lt.x,z+lt.y,b.canonical),[ut,It,vt]=Eo(ut+nt,It+rt,vt+yt,g)):(i&&lt._rotate(-f.angle),ut+=lt.x,It+=lt.y,vt=0);const pt=d.allowVerticalPlacement&&V.placedOrientation===s.b6.vertical?Math.PI/2:0;for(let kt=0;kt<Z;kt++)s.b9(L,ut,It,vt,pt);O&&V.associatedIconIndex>=0&&(U[V.associatedIconIndex]={x:ut,y:It,z:vt,angle:pt})}else Ln(Z,L)}if(O){w.clear();const q=d.icon.placedSymbolArray;for(let V=0;V<q.length;V++){const $=q.get(V),{numGlyphs:z}=$,Z=U[V];if($.hidden||!Z)Ln(z,w);else{const{x:at,y:nt,z:rt,angle:yt}=Z;for(let ut=0;ut<z;ut++)s.b9(w,at,nt,rt,yt)}}d.icon.dynamicLayoutVertexBuffer.updateData(w)}d.text.dynamicLayoutVertexBuffer.updateData(L)}function Gr(d,i,n,_,c,f,g={}){const b=n.paint.get("icon-translate"),A=n.paint.get("text-translate"),E=n.paint.get("icon-translate-anchor"),O=n.paint.get("text-translate-anchor"),S=n.layout.get("icon-rotation-alignment"),L=n.layout.get("text-rotation-alignment"),w=n.layout.get("icon-pitch-alignment"),U=n.layout.get("text-pitch-alignment"),B=n.layout.get("icon-keep-upright"),k=n.layout.get("text-keep-upright"),M=n.paint.get("icon-color-saturation"),H=d.context,q=H.gl,V=d.transform,$=S==="map",z=L==="map",Z=w==="map",at=U==="map",nt=n.layout.get("symbol-sort-key").constantOr(1)!==void 0;let rt=!1;const yt=d.depthModeForSublayer(0,Ne.ReadOnly),ut=[s.a5(V.center.lng),s.ae(V.center.lat)],It=n.layout.get("text-variable-anchor"),vt=V.projection.name==="globe",Ut=[],ct=[0,-1,0];for(const Tt of _){const lt=i.getTile(Tt),pt=lt.getBucket(n);if(!pt||pt.projection.name==="mercator"&&vt||pt.fullyClipped)continue;const kt=pt.projection.name==="globe",qt=kt?s.S(V.zoom):0,Xt=El(Tt,pt.getProjection(),V),ae=V.calculatePixelsToTileUnitsMatrix(lt),he=It&&pt.hasTextData(),Ce=pt.hasIconTextFit()&&he&&pt.hasIconData(),xe=pt.getProjection().createInversionMatrix(V,Tt.canonical),Ee=()=>{const $a=$&&n.layout.get("symbol-placement")!=="point",ea=[],fa=$a||Ce,aa=n.paint.get("icon-image-cross-fade").constantOr(0);d.terrainRenderModeElevated()&&Z&&ea.push("PITCH_WITH_MAP_TERRAIN"),kt&&(ea.push("PROJECTION_GLOBE_VIEW"),fa&&ea.push("PROJECTED_POS_ON_VIEWPORT")),aa>0&&ea.push("ICON_TRANSITION"),pt.icon.zOffsetVertexBuffer&&ea.push("Z_OFFSET"),M<1&&ea.push("SATURATION");const ma=pt.icon.programConfigurations.get(n.id),Ua=d.getOrCreateProgram(pt.sdfIcons?"symbolSDF":"symbolIcon",{config:ma,defines:ea});let ba;const Oi=lt.imageAtlasTexture?lt.imageAtlasTexture.size:[0,0],Bi=pt.iconSizeData,no=s.b5(Bi,V.zoom),$o=Z||V.pitch!==0,so=Al(Xt,lt.tileID.canonical,Z,$,V,pt.getProjection(),ae),Ci=Xd(Xt,lt.tileID.canonical,Z,$,V,pt.getProjection(),ae),yi=d.translatePosMatrix(Ci,lt,b,E,!0),Xi=d.translatePosMatrix(Xt,lt,b,E),$i=fa?ln:so,lo=$&&!Z&&!$a;let Zo=ct;!vt&&!V.mercatorFromTransition||$||(Zo=Bl(V));const Gn=kt?Zo:ct;ba=pt.sdfIcons&&!pt.iconsInText?Wl(Bi.kind,no,lo,Z,d,Xi,$i,yi,!1,Oi,!0,Tt,qt,ut,xe,Gn,pt.getProjection()):zr(Bi.kind,no,lo,Z,d,Xi,$i,yi,!1,Oi,Tt,qt,ut,xe,Gn,pt.getProjection(),M,aa);const ps=lt.imageAtlasTexture?lt.imageAtlasTexture:null,ir=n.layout.get("icon-size").constantOr(0)!==1||pt.iconsNeedLinear,or=pt.sdfIcons||d.options.rotating||d.options.zooming||ir||$o?q.LINEAR:q.NEAREST,ru=pt.sdfIcons&&n.paint.get("icon-halo-width").constantOr(1)!==0,nr=d.terrain&&Z&&$a?s.a6.invert(s.a6.create(),so):ln;if($a&&pt.icon){const Zs=V.elevation,td=Zs?Zs.getAtTileOffsetFunc(Tt,V.center.lat,V.worldSize,pt.getProjection()):null,un=Vd(Xt,lt.tileID.canonical,Z,$,V,pt.getProjection(),ae);jd(pt,Xt,d,!1,un,Ci,Z,B,td,Tt)}return{program:Ua,buffers:pt.icon,uniformValues:ba,atlasTexture:ps,atlasTextureIcon:null,atlasInterpolation:or,atlasInterpolationIcon:null,isSDF:pt.sdfIcons,hasHalo:ru,tile:lt,labelPlaneMatrixInv:nr}},Xe=()=>{const $a=z&&n.layout.get("symbol-placement")!=="point",ea=[],fa=$a||It||Ce;d.terrainRenderModeElevated()&&at&&ea.push("PITCH_WITH_MAP_TERRAIN"),kt&&(ea.push("PROJECTION_GLOBE_VIEW"),fa&&ea.push("PROJECTED_POS_ON_VIEWPORT")),pt.text.zOffsetVertexBuffer&&ea.push("Z_OFFSET");const aa=pt.text.programConfigurations.get(n.id),ma=d.getOrCreateProgram(pt.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:aa,defines:ea});let Ua,ba=[0,0],Oi=null;const Bi=pt.textSizeData;pt.iconsInText&&(ba=lt.imageAtlasTexture?lt.imageAtlasTexture.size:[0,0],Oi=lt.imageAtlasTexture?lt.imageAtlasTexture:null,Ua=at||V.pitch!==0||d.options.rotating||d.options.zooming||Bi.kind==="composite"||Bi.kind==="camera"?q.LINEAR:q.NEAREST);const no=lt.glyphAtlasTexture?lt.glyphAtlasTexture.size:[0,0],$o=s.b5(Bi,V.zoom),so=Al(Xt,lt.tileID.canonical,at,z,V,pt.getProjection(),ae),Ci=Xd(Xt,lt.tileID.canonical,at,z,V,pt.getProjection(),ae),yi=d.translatePosMatrix(Ci,lt,A,O,!0),Xi=d.translatePosMatrix(Xt,lt,A,O),$i=fa?ln:so,lo=z&&!at&&!$a;let Zo=ct;!vt&&!V.mercatorFromTransition||z||(Zo=Bl(V));const Gn=kt?Zo:ct;let ps;ps=pt.iconsInText?Hr(Bi.kind,$o,lo,at,d,Xi,$i,yi,no,ba,Tt,qt,ut,xe,Gn,pt.getProjection()):Wl(Bi.kind,$o,lo,at,d,Xi,$i,yi,!0,no,!0,Tt,qt,ut,xe,Gn,pt.getProjection());const ir=lt.glyphAtlasTexture?lt.glyphAtlasTexture:null,or=q.LINEAR,ru=n.paint.get("text-halo-width").constantOr(1)!==0,nr=d.terrain&&at&&$a?s.a6.invert(s.a6.create(),so):ln;if($a&&pt.text){const Zs=V.elevation,td=Zs?Zs.getAtTileOffsetFunc(Tt,V.center.lat,V.worldSize,pt.getProjection()):null,un=Vd(Xt,lt.tileID.canonical,at,z,V,pt.getProjection(),ae);jd(pt,Xt,d,!0,un,Ci,at,k,td,Tt)}return{program:ma,buffers:pt.text,uniformValues:ps,atlasTexture:ir,atlasTextureIcon:Oi,atlasInterpolation:or,atlasInterpolationIcon:Ua,isSDF:!0,hasHalo:ru,tile:lt,labelPlaneMatrixInv:nr}},Fe=pt.icon.segments.get().length,ze=pt.text.segments.get().length,ke=Fe&&!g.onlyText?Ee():null,da=ze&&!g.onlyIcons?Xe():null,Wa=n.paint.get("icon-opacity").constantOr(1),ta=n.paint.get("text-opacity").constantOr(1);if(nt&&pt.canOverlap){rt=!0;const $a=Wa&&!g.onlyText?pt.icon.segments.get():[],ea=ta&&!g.onlyIcons?pt.text.segments.get():[];for(const fa of $a)Ut.push({segments:new s.aB([fa]),sortKey:fa.sortKey,state:ke});for(const fa of ea)Ut.push({segments:new s.aB([fa]),sortKey:fa.sortKey,state:da})}else g.onlyText||Ut.push({segments:Wa?pt.icon.segments:new s.aB([]),sortKey:0,state:ke}),g.onlyIcons||Ut.push({segments:ta?pt.text.segments:new s.aB([]),sortKey:0,state:da})}rt&&Ut.sort((Tt,lt)=>Tt.sortKey-lt.sortKey);for(const Tt of Ut){const lt=Tt.state;if(lt)if(d.terrain&&d.terrain.setupElevationDraw(lt.tile,lt.program,{useDepthForOcclusion:V.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:lt.labelPlaneMatrixInv}),H.activeTexture.set(q.TEXTURE0),lt.atlasTexture&&lt.atlasTexture.bind(lt.atlasInterpolation,q.CLAMP_TO_EDGE,!0),lt.atlasTextureIcon&&(H.activeTexture.set(q.TEXTURE1),lt.atlasTextureIcon&&lt.atlasTextureIcon.bind(lt.atlasInterpolationIcon,q.CLAMP_TO_EDGE,!0)),d.uploadCommonLightUniforms(d.context,lt.program),lt.hasHalo){const pt=lt.uniformValues;pt.u_is_halo=1,Dn(lt.buffers,Tt.segments,n,d,lt.program,yt,c,f,pt,2),pt.u_is_halo=0}else{if(lt.isSDF){const pt=lt.uniformValues;lt.hasHalo&&(pt.u_is_halo=1,Dn(lt.buffers,Tt.segments,n,d,lt.program,yt,c,f,pt,1)),pt.u_is_halo=0}Dn(lt.buffers,Tt.segments,n,d,lt.program,yt,c,f,lt.uniformValues,1)}}}function Dn(d,i,n,_,c,f,g,b,A,E){const O=[d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer,d.iconTransitioningVertexBuffer,d.globeExtVertexBuffer,d.zOffsetVertexBuffer];c.draw(_,_.context.gl.TRIANGLES,f,g,b,Le.disabled,A,n.id,d.layoutVertexBuffer,d.indexBuffer,i,n.paint,_.transform.zoom,d.programConfigurations.get(n.id),O,E)}function us(d,i,n,_,c,f,g){const b=d.context.gl,A=n.paint.get("fill-pattern"),E=A&&A.constantOr(1);let O,S,L,w,U;g?(S=E&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",O=b.LINES):(S=E?"fillPattern":"fill",O=b.TRIANGLES);for(const B of _){const k=i.getTile(B);if(E&&!k.patternsLoaded())continue;const M=k.getBucket(n);if(!M)continue;d.prepareDrawTile();const H=M.programConfigurations.get(n.id),q=d.isTileAffectedByFog(B),V=d.getOrCreateProgram(S,{config:H,overrideFog:q});E&&(d.context.activeTexture.set(b.TEXTURE0),k.imageAtlasTexture&&k.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),H.updatePaintBuffers());const $=A.constantOr(null);if($&&k.imageAtlas){const at=k.imageAtlas.patternPositions[$.toString()];at&&H.setConstantPatternPositions(at)}const z=d.translatePosMatrix(B.projMatrix,k,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor")),Z=n.paint.get("fill-emissive-strength");if(g){w=M.indexBuffer2,U=M.segments2;const at=d.terrain&&d.terrain.renderingToTexture?d.terrain.drapeBufferSize:[b.drawingBufferWidth,b.drawingBufferHeight];L=S==="fillOutlinePattern"&&E?cc(z,Z,d,k,at):_s(z,Z,at)}else w=M.indexBuffer,U=M.segments,L=E?S_(z,Z,d,k):Xs(z,Z);d.uploadCommonUniforms(d.context,V,B.toUnwrapped()),V.draw(d,O,c,d.stencilModeForClipping(B),f,Le.disabled,L,n.id,M.layoutVertexBuffer,w,U,n.paint,d.transform.zoom,H,void 0)}}function ye(d,i,n,_,c,f,g,b){n.resetLayerRenderingStats(d);const A=d.context,E=A.gl,O=d.transform,S=n.paint.get("fill-extrusion-pattern"),L=S.constantOr(1),w=n.paint.get("fill-extrusion-opacity"),U=d.style.enable3dLights(),B=n.paint.get(U&&!L?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),k=[n.paint.get("fill-extrusion-ambient-occlusion-intensity"),B],M=n.layout.get("fill-extrusion-edge-radius"),H=M>0&&!n.paint.get("fill-extrusion-rounded-roof"),q=H?0:M,V=O.projection.name==="globe"?s.cF():0,$=O.projection.name==="globe",z=$?s.S(O.zoom):0,Z=[s.a5(O.center.lng),s.ae(O.center.lat)],at=n.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),nt=n.paint.get("fill-extrusion-flood-light-intensity"),rt=n.paint.get("fill-extrusion-vertical-scale"),yt=wn(d,n.paint.get("fill-extrusion-cutoff-fade-range")),ut=n.paint.get("fill-extrusion-emissive-strength"),It=[];let vt;$&&It.push("PROJECTION_GLOBE_VIEW"),k[0]>0&&It.push("FAUX_AO"),H&&It.push("ZERO_ROOF_RADIUS"),b&&It.push("HAS_CENTROID"),nt>0&&It.push("FLOOD_LIGHT"),yt.shouldRenderCutoff&&It.push("RENDER_CUTOFF");const Ut=d.renderPass==="shadow",ct=d.shadowRenderer,Tt=Ut&&!!ct;d.shadowRenderer&&(d.shadowRenderer.useNormalOffset=!0);let lt=[0,0,0];if(ct){const qt=d.style.directionalLight,Xt=d.style.ambientLight;qt&&Xt&&(lt=Nl(qt,Xt)),vt=It.concat(["SHADOWS_SINGLE_CASCADE"])}const pt=Tt?"fillExtrusionDepth":L?"fillExtrusionPattern":"fillExtrusion",kt=n.getLayerRenderingStats();for(const qt of _){const Xt=i.getTile(qt),ae=Xt.getBucket(n);if(!ae||ae.projection.name!==O.projection.name)continue;let he=!1;ct&&(he=ct.getMaxCascadeForTile(qt.toUnwrapped())===0);const Ce=d.isTileAffectedByFog(qt),xe=ae.programConfigurations.get(n.id),Ee=d.getOrCreateProgram(pt,{config:xe,defines:he?vt:It,overrideFog:Ce});if(d.terrain&&d.terrain.setupElevationDraw(Xt,Ee,{useMeterToDem:!0}),!ae.centroidVertexBuffer){const Wa=Ee.attributes.a_centroid_pos;Wa!==void 0&&E.vertexAttrib2f(Wa,0,0)}!Ut&&ct&&ct.setupShadows(Xt.tileID.toUnwrapped(),Ee,"vector-tile",Xt.tileID.overscaledZ),L&&(d.context.activeTexture.set(E.TEXTURE0),Xt.imageAtlasTexture&&Xt.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),xe.updatePaintBuffers());const Xe=S.constantOr(null);if(Xe&&Xt.imageAtlas){const Wa=Xt.imageAtlas.patternPositions[Xe.toString()];Wa&&xe.setConstantPatternPositions(Wa)}const Fe=n.paint.get("fill-extrusion-vertical-gradient");let ze;if(Ut&&ct){if(bc(Xt.tileID,ae,d))continue;const Wa=ct.calculateShadowPassMatrixFromTile(Xt.tileID.toUnwrapped());ze=C_(Wa,q,rt)}else{const Wa=d.translatePosMatrix(qt.expandedProjMatrix,Xt,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),ta=O.projection.createInversionMatrix(O,qt.canonical);ze=L?ds(Wa,d,Fe,w,k,q,qt,Xt,V,z,Z,ta,at,rt):O_(Wa,d,Fe,w,k,q,qt,V,z,Z,ta,at,rt,nt,lt,ut)}d.uploadCommonUniforms(A,Ee,qt.toUnwrapped(),null,yt);let ke=ae.segments;if(O.projection.name==="mercator"&&!Ut&&(ke=ae.getVisibleSegments(Xt.tileID,d.terrain,d.transform.getFrustum(0)),!ke.get().length))continue;if(kt)if(Ut)for(const Wa of ke.get())kt.numRenderedVerticesInShadowPass+=Wa.primitiveLength;else for(const Wa of ke.get())kt.numRenderedVerticesInTransparentPass+=Wa.primitiveLength;const da=[];(d.terrain||b)&&da.push(ae.centroidVertexBuffer),$&&da.push(ae.layoutVertexExtBuffer),Ee.draw(d,A.gl.TRIANGLES,c,f,g,Le.backCCW,ze,n.id,ae.layoutVertexBuffer,ae.indexBuffer,ke,n.paint,d.transform.zoom,xe,da)}d.shadowRenderer&&(d.shadowRenderer.useNormalOffset=!1)}function Fn(d,i,n,_,c,f,g,b,A,E,O,S,L,w,U,B,k,M,H){const q=d.context,V=q.gl,$=d.transform,z=d.transform.zoom,Z=[],at=wn(d,n.paint.get("fill-extrusion-cutoff-fade-range"));E==="clear"?(Z.push("CLEAR_SUBPASS"),H&&(Z.push("CLEAR_FROM_TEXTURE"),q.activeTexture.set(V.TEXTURE0),H.bind(V.LINEAR,V.CLAMP_TO_EDGE))):E==="sdf"&&Z.push("SDF_SUBPASS"),k&&Z.push("HAS_CENTROID"),at.shouldRenderCutoff&&Z.push("RENDER_CUTOFF");const nt=n.layout.get("fill-extrusion-edge-radius"),rt=(yt,ut,It,vt,Ut)=>{const ct=ut.programConfigurations.get(n.id),Tt=d.isTileAffectedByFog(yt),lt=d.getOrCreateProgram("fillExtrusionGroundEffect",{config:ct,defines:Z,overrideFog:Tt}),pt=((qt,Xt,ae,he,Ce,xe,Ee,Xe,Fe,ze,ke)=>({u_matrix:Xt,u_opacity:ae,u_ao_pass:he?1:0,u_meter_to_tile:Ce,u_ao:xe,u_flood_light_intensity:Ee,u_flood_light_color:Xe,u_attenuation:Fe,u_edge_radius:ze,u_fb:0,u_fb_size:ke}))(0,vt,O,A,Ut,[S,L*Ut],w,U,B,z>=17?0:nt*Ut,H?H.size[0]:0),kt=[];k&&kt.push(ut.hiddenByLandmarkVertexBuffer),d.uploadCommonUniforms(q,lt,yt.toUnwrapped(),null,at),lt.draw(d,q.gl.TRIANGLES,c,f,g,b,pt,n.id,ut.vertexBuffer,ut.indexBuffer,It,n.paint,z,ct,kt)};for(const yt of _){const ut=i.getTile(yt),It=ut.getBucket(n);if(!It||It.projection.name!==$.projection.name||!It.groundEffect||It.groundEffect&&!It.groundEffect.hasData())continue;const vt=It.groundEffect,Ut=1/It.tileToMeter;{const ct=d.translatePosMatrix(yt.projMatrix,ut,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),Tt=vt.getDefaultSegment();rt(yt,vt,Tt,ct,Ut)}if(M)for(let ct=0;ct<4;ct++){const Tt=s.cG[ct](yt),lt=i.getTile(Tt);if(!lt)continue;const pt=lt.getBucket(n);if(!pt||pt.projection.name!==$.projection.name||!pt.groundEffect||pt.groundEffect&&!pt.groundEffect.hasData())continue;const kt=pt.groundEffect;let qt,Xt;ct===0?(qt=[-s.V,0,0],Xt=1):ct===1?(qt=[s.V,0,0],Xt=0):ct===2?(qt=[0,-s.V,0],Xt=3):(qt=[0,s.V,0],Xt=2);const ae=kt.regionSegments[Xt];if(!ae)continue;const he=new Float32Array(16);s.a6.translate(he,yt.projMatrix,qt),rt(yt,kt,ae,d.translatePosMatrix(he,ut,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),Ut)}}}function Cf(d,i,n,_,c,f,g){_.centroidVertexArray.length===0&&_.createCentroidsBuffer();const b=f?f.findDEMTileFor(n):null;if(!(b&&b.dem||g))return;const A=M=>new s.P(Math.ceil((M+s.cJ)*s.cK),0),E=M=>{const H=i.getSource().minzoom,q=$=>{const z=i.getTileByID($);if(z&&z.hasData())return z.getBucket(c)},V=[0,-1,1];for(const $ of V){if(M.overscaledZ+$<H)continue;const z=q(M.calculateScaledKey(M.overscaledZ+$));if(z)return z}},O=[0,0,0],S=(M,H)=>(O[0]=Math.min(M.min.y,H.min.y),O[1]=Math.max(M.max.y,H.max.y),O[2]=s.V-H.min.x>M.max.x?H.min.x-s.V:M.max.x,O),L=(M,H)=>(O[0]=Math.min(M.min.x,H.min.x),O[1]=Math.max(M.max.x,H.max.x),O[2]=s.V-H.min.y>M.max.y?H.min.y-s.V:M.max.y,O),w=[(M,H)=>S(M,H),(M,H)=>S(H,M),(M,H)=>L(M,H),(M,H)=>L(H,M)],U=(M,H,q,V,$,z,Z)=>{if(!f)return 0;const at=[[z?q:M,z?M:q,0],[z?q:H,z?H:q,0]],nt=Z<0?s.V+Z:Z,rt=[z?nt:(M+H)/2,z?(M+H)/2:nt,0];return q===0&&Z<0||q!==0&&Z>0?f.getForTilePoints($,[rt],!0,V):at.push(rt),f.getForTilePoints(n,at,!0,b),Math.max(at[0][2],at[1][2],rt[2])/f.exaggeration()};for(let M=0;M<4;M++){const H=_.borderFeatureIndices[M];if(H.length===0)continue;const q=s.cG[M](n),V=E(q);if(!(V&&V instanceof s.cH)||_.borderDoneWithNeighborZ[M]===V.canonical.z)continue;V.centroidVertexArray.length===0&&V.createCentroidsBuffer();const $=f?f.findDEMTileFor(q):null;if(!($&&$.dem||g))continue;const z=(M<2?1:5)-M,Z=V.borderDoneWithNeighborZ[z]!==_.canonical.z,at=V.borderFeatureIndices[z];let nt=0;if(_.canonical.z!==V.canonical.z){for(const rt of H)_.showCentroid(_.featuresOnBorder[rt]);if(Z)for(const rt of at)V.showCentroid(V.featuresOnBorder[rt]);_.borderDoneWithNeighborZ[M]=V.canonical.z,V.borderDoneWithNeighborZ[z]=_.canonical.z}for(const rt of H){const yt=_.featuresOnBorder[rt],ut=_.centroidData[yt.centroidDataIndex],It=yt.borders[M];let vt;for(;nt<at.length;){vt=V.featuresOnBorder[at[nt]];const Ut=vt.borders[z];if(Ut[1]>It[0]+3||Ut[0]>It[0]-3)break;V.showCentroid(vt),nt++}if(vt&&nt<at.length){const Ut=nt;let ct=0;for(;!(vt.borders[z][0]>It[1]-3)&&(ct++,++nt!==at.length);)vt=V.featuresOnBorder[at[nt]];if(vt=V.featuresOnBorder[at[Ut]],ct>1){const pt=vt.borders[z];Math.abs(It[0]-pt[0])<3&&Math.abs(It[1]-pt[1])<3&&(ct=1,nt=Ut+1)}else if(ct===0){_.showCentroid(yt);continue}const Tt=V.centroidData[vt.centroidDataIndex];g&&ct===1&&(((B=ut).flags|(k=Tt).flags)&s.cI?(B.flags|=s.cI,k.flags|=s.cI):(B.flags&=~s.cI,k.flags&=~s.cI));const lt=yt.intersectsCount()>1||vt.intersectsCount()>1;if(ct>1)nt=Ut,ut.centroidXY=Tt.centroidXY=new s.P(0,0);else if($&&$.dem&&!lt){const pt=w[M](ut,Tt),kt=M%2?s.V-1:0,qt=U(pt[0],Math.min(s.V-1,pt[1]),kt,$,q,M<2,pt[2]);ut.centroidXY=Tt.centroidXY=A(qt)}else lt?ut.centroidXY=Tt.centroidXY=new s.P(0,0):(ut.centroidXY=_.encodeBorderCentroid(yt),Tt.centroidXY=V.encodeBorderCentroid(vt));_.writeCentroidToBuffer(ut),V.writeCentroidToBuffer(Tt)}else _.showCentroid(yt)}_.borderDoneWithNeighborZ[M]=V.canonical.z,V.borderDoneWithNeighborZ[z]=_.canonical.z}var B,k;(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(d)}const Sf=[1,0,0],w_=[0,1,0],yc=[0,0,1];function bc(d,i,n){const _=n.transform,c=n.shadowRenderer;if(!c)return!0;const f=d.toUnwrapped(),g=_.tileSize*c._cascades[n.currentShadowCascade].scale;let b=i.maxHeight;if(_.elevation){const B=_.elevation.getMinMaxForTile(d);B&&(b+=B.max)}const A=[...c.shadowDirection];A[2]=-A[2];const E=c.computeSimplifiedTileShadowVolume(f,b,g,A);if(!E)return!1;const O=[Sf,w_,yc,A,[A[0],0,A[2]],[0,A[1],A[2]]],S=_.projection.name==="globe",L=_.scaleZoom(g),w=s.bq.fromInvProjectionMatrix(_.invProjMatrix,_.worldSize,L,!S),U=c.getCurrentCascadeFrustum();return w.intersectsPrecise(E.vertices,E.planes,O)===0||U.intersectsPrecise(E.vertices,E.planes,O)===0}function Tc(d){return[d[0]*s.cL,d[1]*s.cL,d[2]*s.cL,0]}function W_(d,i,n,_,c,f,g,b,A){const E=_.getSource(),O=n.globeSharedBuffers;if(!O)return;let S,L,w;if(i&&(S=_.getTile(i)),E instanceof s.ap?(L=E.texture,w=s.cj(0,0,n.transform)):S&&i&&(L=S.texture,w=s.cj(i.canonical.z,i.canonical.x,n.transform)),!L||!w)return;d||(w=s.a6.scale(s.a6.create(),w,[1,-1,1]));const U=n.context,B=U.gl,k=c.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR,M=n.colorModeForDrapableLayerRenderPass(f),H=g.defines;H.push("GLOBE_POLES");const q=new Ne(B.LEQUAL,Ne.ReadWrite,n.depthRangeFor3D),V=Float32Array.from(n.transform.expandedFarZProjMatrix),$=Float32Array.from(s.aT(s.ci(new s.bs(0,0,0))));n.terrain&&n.terrain.prepareDrawTile(),U.activeTexture.set(B.TEXTURE0),L.bind(k,B.CLAMP_TO_EDGE),U.activeTexture.set(B.TEXTURE1),L.bind(k,B.CLAMP_TO_EDGE),L.useMipmap&&U.extTextureFilterAnisotropic&&n.transform.pitch>20&&B.texParameterf(B.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax);const[z,Z,at,nt]=i?O.getPoleBuffers(i.canonical.z,!1):O.getPoleBuffers(0,!0),rt=c.paint.get("raster-elevation");let yt;d?(yt=z,n.renderDefaultNorthPole=rt!==0):(yt=Z,n.renderDefaultSouthPole=rt!==0);const ut=Tc(g.mix),It=((Ut,ct,Tt,lt,pt,kt,qt,Xt,ae,he,Ce,xe,Ee)=>L_(Ut,ct,Tt,new Float32Array(16),new Float32Array(9),[0,0],lt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},kt,[0,0],Xt,2,he,Ce,xe,1,0,Ee))(V,$,w,s.S(n.transform.zoom),0,c,0,rt,0,ut,g.offset,g.range,f),vt=n.getOrCreateProgram("raster",{defines:H});n.uploadCommonUniforms(U,vt,null),vt.draw(n,B.TRIANGLES,q,A,M,b,It,c.id,yt,at,nt)}function M_(d){const i=d._nearZ,n=d.projection.farthestPixelDistance(d),_=n-i,c=.2*d.height,f=i+c;return[i,n,(f-c-i)/_,(f-i)/_]}function D_(d,i,n,_){if(d)return i instanceof Jt&&d instanceof is?i.getTextureDescriptor(d,n,!0):{texture:d.texture,mix:Tc(_.mix),offset:_.offset,buffer:0,tileSize:1}}function F_(d,i,n){if(!d)return null;const _=i.getTextureDescriptor(d,n,!0);if(!_)return null;let{texture:c,mix:f,offset:g,tileSize:b,buffer:A,format:E}=_;if(!c||!E)return null;let O=!1;return E==="uint32"&&(O=!0,f[3]=0,f=kr(s.cM,f,[0,n.paint.get("raster-particle-max-speed")]),g=fc(s.cM,g,[0,n.paint.get("raster-particle-max-speed")])),{texture:c,textureOffset:[A/(b+2*A),b/(b+2*A)],tileSize:b,scalarData:O,scale:f,offset:g,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[E]]}}function B_(d){const i=d._nearZ,n=d.projection.farthestPixelDistance(d),_=n-i,c=.2*d.height,f=i+c;return[i,n,(f-c-i)/_,(f-i)/_]}const io=new s.ax(1,0,0,1),Bn=new s.ax(0,1,0,1),xc=new s.ax(0,0,1,1),U_=new s.ax(1,0,1,1),k_=new s.ax(0,1,1,1);function Un(d,i,n,_,c,f,g){const b=d.context,A=d.transform,E=b.gl,O=A.projection.name==="globe",S=O?["PROJECTION_GLOBE_VIEW"]:[];let L=s.a6.clone(n.projMatrix);if(O&&s.S(A.zoom)>0){const ut=s.aS(n.canonical,A),It=s.cN(ut);L=s.a6.multiply(new Float32Array(16),A.globeMatrix,It),s.a6.multiply(L,A.projMatrix,L)}const w=s.a6.create();w[12]+=2*c/(s.f.devicePixelRatio*A.width),w[13]+=2*f/(s.f.devicePixelRatio*A.height),s.a6.multiply(L,w,L);const U=d.getOrCreateProgram("debug",{defines:S}),B=i.getTileByID(n.key);d.terrain&&d.terrain.setupElevationDraw(B,U);const k=Ne.disabled,M=Be.disabled,H=d.colorModeForRenderPass(),q="$debug";b.activeTexture.set(E.TEXTURE0),d.emptyTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),O?B._makeGlobeTileDebugBuffers(d.context,A):B._makeDebugTileBoundsBuffers(d.context,A.projection);const V=B._tileDebugBuffer||d.debugBuffer,$=B._tileDebugIndexBuffer||d.debugIndexBuffer,z=B._tileDebugSegments||d.debugSegments;if(U.draw(d,E.LINE_STRIP,k,M,H,Le.disabled,R_(L,_),q,V,$,z,null,null,null,[B._globeTileDebugBorderBuffer]),g){const ut=B.latestRawTileData,It=Math.floor((ut&&ut.byteLength||0)/1024);let vt=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(vt+=` => ${n.overscaledZ}`),vt+=` ${B.state}`,vt+=` ${It}kb`,function(Ut,ct){Ut.initDebugOverlayCanvas();const Tt=Ut.debugOverlayCanvas,lt=Ut.context.gl,pt=Ut.debugOverlayCanvas.getContext("2d");pt.clearRect(0,0,Tt.width,Tt.height),pt.shadowColor="white",pt.shadowBlur=2,pt.lineWidth=1.5,pt.strokeStyle="white",pt.textBaseline="top",pt.font="bold 36px Open Sans, sans-serif",pt.fillText(ct,5,5),pt.strokeText(ct,5,5),Ut.debugOverlayTexture.update(Tt),Ut.debugOverlayTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE)}(d,vt)}const Z=i.getTile(n).tileSize,at=512/Math.min(Z,512)*(n.overscaledZ/A.zoom)*.5,nt=B._tileDebugTextBuffer||d.debugBuffer,rt=B._tileDebugTextIndexBuffer||d.quadTriangleIndexBuffer,yt=B._tileDebugTextSegments||d.debugSegments;U.draw(d,E.TRIANGLES,k,M,Je.alphaBlended,Le.disabled,R_(L,s.ax.transparent,at),q,nt,rt,yt,null,null,null,[B._globeTileDebugTextBuffer])}function z_(d,i,n,_){ja(d,0,i+n/2,d.transform.width,n,_)}function fo(d,i,n,_){ja(d,i-n/2,0,n,d.transform.height,_)}function ja(d,i,n,_,c,f){const g=d.context,b=g.gl;b.enable(b.SCISSOR_TEST),b.scissor(i*s.f.devicePixelRatio,n*s.f.devicePixelRatio,_*s.f.devicePixelRatio,c*s.f.devicePixelRatio),g.clear({color:f}),b.disable(b.SCISSOR_TEST)}const Vr=s.ay([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:H_}=Vr;function rn(d,i,n,_){d.emplaceBack(i,n,_)}class Y_{constructor(i){this.vertexArray=new s.az,this.indices=new s.aw,rn(this.vertexArray,-1,-1,1),rn(this.vertexArray,1,-1,1),rn(this.vertexArray,-1,1,1),rn(this.vertexArray,1,1,1),rn(this.vertexArray,-1,-1,-1),rn(this.vertexArray,1,-1,-1),rn(this.vertexArray,-1,1,-1),rn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,H_),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.aB.simpleSegment(0,0,36,12)}}function cs(d,i,n,_,c,f){const g=d.context.gl,b=i.paint.get("sky-atmosphere-color"),A=i.paint.get("sky-atmosphere-halo-color"),E=i.paint.get("sky-atmosphere-sun-intensity"),O=((S,L,w,U,B)=>({u_matrix_3f:S,u_sun_direction:L,u_sun_intensity:w,u_color_tint_r:[U.r,U.g,U.b,U.a],u_color_tint_m:[B.r,B.g,B.b,B.a],u_luminance:5e-5}))(s.co.fromMat4(s.co.create(),_),c,E,b,A);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+f,i.skyboxTexture,0),n.draw(d,g.TRIANGLES,Ne.disabled,Be.disabled,Je.unblended,Le.frontCW,O,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const Rf=s.ay([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ks{constructor(i){const n=new s.cO;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const _=new s.aw;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(n,Rf.members),this.indexBuffer=i.createIndexBuffer(_),this.segments=s.aB.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ul=s.ay([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Zt{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Se{constructor(i){this.colorModeAlphaBlendedWriteRGB=new Je([1,On,1,On],s.ax.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Je([1,0,1,0],s.ax.transparent,[!1,!1,!1,!0]),this.params=new Zt,this.updateNeeded=!0,i.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),i.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(i){const n=i.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Ks(n);const _=this.params.sizeRange,c=this.params.intensityRange,f=function(O){const S=s.aA(30),L=[];for(let w=0;w<O;++w){const U=2*Math.PI*S(),B=Math.acos(1-2*S())-.5*Math.PI;L.push(s.N.fromValues(Math.cos(B)*Math.cos(U),Math.cos(B)*Math.sin(U),Math.sin(B)))}return L}(this.params.starsCount),g=s.aA(300),b=new s.cP,A=new s.aw;let E=0;for(let O=0;O<f.length;++O){const S=s.N.scale([],f[O],200),L=Math.max(0,1+.01*_*(1*g()-.5)),w=Math.max(0,1+.01*c*(1*g()-.5));b.emplaceBack(S[0],S[1],S[2],-1,-1,L,w),b.emplaceBack(S[0],S[1],S[2],1,-1,L,w),b.emplaceBack(S[0],S[1],S[2],1,1,L,w),b.emplaceBack(S[0],S[1],S[2],-1,1,L,w),A.emplaceBack(E+0,E+1,E+2),A.emplaceBack(E+0,E+2,E+3),E+=4}this.starsVx=n.createVertexBuffer(b,Ul.members),this.starsIdx=n.createIndexBuffer(A),this.starsSegments=s.aB.simpleSegment(0,0,b.length,A.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(i,n){const _=i.context,c=_.gl,f=i.transform,g=new Ne(c.LEQUAL,Ne.ReadOnly,[0,1]),b=s.S(f.zoom),A=n.properties.get("color").toArray01(),E=n.properties.get("high-color").toArray01(),O=n.properties.get("space-color").toArray01PremultipliedAlpha(),S=5e-4,L=s.cQ(n.properties.get("horizon-blend"),0,1,S,.25),w=s.cd(i,_,f)&&L===S?f.worldSize/(2*Math.PI*1.025)-1:f.globeRadius,U=i.frameCounter/1e3%1,B=s.N.length(f.globeCenterInViewSpace),k=Math.sqrt(Math.pow(B,2)-Math.pow(w,2)),M=Math.acos(k/B),H=q=>{const V=f.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];q&&V.push("ALPHA_PASS");const $=i.getOrCreateProgram("globeAtmosphere",{defines:V}),z=((at,nt,rt,yt,ut,It,vt,Ut,ct,Tt,lt,pt)=>({u_frustum_tl:at,u_frustum_tr:nt,u_frustum_br:rt,u_frustum_bl:yt,u_horizon:ut,u_transition:It,u_fadeout_range:vt,u_color:Ut,u_high_color:ct,u_space_color:Tt,u_temporal_offset:lt,u_horizon_angle:pt}))(f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.frustumCorners.horizon,b,L,A,E,O,U,M);i.uploadCommonUniforms(_,$);const Z=this.atmosphereBuffer;Z&&$.draw(i,c.TRIANGLES,g,Be.disabled,q?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Le.backCW,z,q?"atmosphere_glow_alpha":"atmosphere_glow",Z.vertexBuffer,Z.indexBuffer,Z.segments)};H(!1),H(!0)}drawStars(i,n){const _=s.aa(n.properties.get("star-intensity"),0,1);if(_===0)return;const c=i.context,f=c.gl,g=i.transform,b=i.getOrCreateProgram("stars"),A=s.bi.identity([]);s.bi.rotateX(A,A,-g._pitch),s.bi.rotateZ(A,A,-g.angle),s.bi.rotateX(A,A,s.bj(g._center.lat)),s.bi.rotateY(A,A,-s.bj(g._center.lng));const E=s.a6.fromQuat(new Float32Array(16),A),O=s.a6.multiply([],g.starsProjMatrix,E),S=s.co.fromMat4([],E),L=s.co.invert([],S),w=[0,1,0];s.N.transformMat3(w,w,L),s.N.scale(w,w,this.params.sizeMultiplier);const U=[1,0,0];s.N.transformMat3(U,U,L),s.N.scale(U,U,this.params.sizeMultiplier);const B=(k=w,M=U,H=_,{u_matrix:Float32Array.from(O),u_up:k,u_right:M,u_intensity_multiplier:H});var k,M,H;i.uploadCommonUniforms(c,b),this.starsVx&&this.starsIdx&&b.draw(i,f.TRIANGLES,Ne.disabled,Be.disabled,this.colorModeAlphaBlendedWriteRGB,Le.disabled,B,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function ms(d,i){const n=[...d],_=i.cameraWorldSizeForFog/i.worldSize,c=s.a6.identity([]);return s.a6.scale(c,c,[_,_,1]),s.a6.multiply(n,c,n),s.a6.multiply(n,i.worldToFogMatrix,n),n}function qa(d,i,n,_){const c=n.material,f=_.context,{baseColorTexture:g,metallicRoughnessTexture:b}=c.pbrMetallicRoughness,{normalTexture:A,occlusionTexture:E,emissionTexture:O}=c;function S(L,w,U){if(L&&(d.push(w),f.activeTexture.set(f.gl.TEXTURE0+U),L.gfxTexture)){const{minFilter:B,magFilter:k,wrapS:M,wrapT:H}=L.sampler;L.gfxTexture.bindExtraParam(B,k,M,H)}}S(g,"HAS_TEXTURE_u_baseColorTexture",Fi.BaseColor),S(b,"HAS_TEXTURE_u_metallicRoughnessTexture",Fi.MetallicRoughness),S(A,"HAS_TEXTURE_u_normalTexture",Fi.Normal),S(E,"HAS_TEXTURE_u_occlusionTexture",Fi.Occlusion),S(O,"HAS_TEXTURE_u_emissionTexture",Fi.Emission),n.texcoordBuffer&&(d.push("HAS_ATTRIBUTE_a_uv_2f"),i.push(n.texcoordBuffer)),n.colorBuffer&&(d.push(n.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),i.push(n.colorBuffer)),n.normalBuffer&&(d.push("HAS_ATTRIBUTE_a_normal_3f"),i.push(n.normalBuffer)),n.pbrBuffer&&(d.push("HAS_ATTRIBUTE_a_pbr"),d.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),i.push(n.pbrBuffer)),c.alphaMode!=="OPAQUE"&&c.alphaMode!=="MASK"||d.push("UNPREMULT_TEXTURE_IN_SHADER"),c.defined||d.push("DIFFUSE_SHADED"),d.push("USE_STANDARD_DERIVATIVES")}function kl(d,i,n,_,c,f){const g=n.paint.get("model-opacity"),b=i.context,A=new Ne(i.context.gl.LEQUAL,Ne.ReadWrite,i.depthRangeFor3D),E=i.transform,O=d.mesh,S=O.material,L=S.pbrMetallicRoughness,w=i.style.fog;let U;U=i.transform.projection.zAxisUnit==="pixels"?[...d.nodeModelMatrix]:s.a6.multiply([],_.zScaleMatrix,d.nodeModelMatrix),s.a6.multiply(U,_.negCameraPosMatrix,U);const B=s.a6.invert([],U);s.a6.transpose(B,B);const k=n.paint.get("model-emissive-strength").constantOr(0),M=Yr(new Float32Array(d.worldViewProjection),new Float32Array(U),new Float32Array(B),i,g,L.baseColorFactor,S.emissiveFactor,L.metallicFactor,L.roughnessFactor,S,k,n),H={defines:[]},q=[];qa(H.defines,q,O,i);const V=i.shadowRenderer;V&&(V.useNormalOffset=!1);let $=null;if(w){const at=ms(d.nodeModelMatrix,i.transform);if($=new Float32Array(at),E.projection.name!=="globe"){const nt=O.aabb.min,rt=O.aabb.max,[yt,ut]=w.getOpacityForBounds(at,nt[0],nt[1],rt[0],rt[1]);H.overrideFog=yt>=Ea||ut>=Ea}}const z=wn(i,n.paint.get("model-cutoff-fade-range"));z.shouldRenderCutoff&&H.defines.push("RENDER_CUTOFF");const Z=i.getOrCreateProgram("model",H);i.uploadCommonUniforms(b,Z,null,$,z),i.renderPass!=="shadow"&&V&&V.setupShadowsFromMatrix(d.nodeModelMatrix,Z),Z.draw(i,b.gl.TRIANGLES,A,c,f,O.material.doubleSided?Le.disabled:Le.backCCW,M,n.id,O.vertexBuffer,O.indexBuffer,O.segments,n.paint,i.transform.zoom,void 0,q)}function zl(d,i,n,_,c,f,g){let b;b=d.projection.name==="globe"?s.cS(n,d):[...n],s.a6.multiply(b,b,i.matrix);const A=s.a6.multiply([],_,b);if(i.meshes)for(const E of i.meshes){if(E.material.alphaMode!=="BLEND"){g.push({mesh:E,depth:0,modelIndex:c,worldViewProjection:A,nodeModelMatrix:b});continue}const O=s.N.transformMat4([],E.centroid,A);O[2]>0&&f.push({mesh:E,depth:O[2],modelIndex:c,worldViewProjection:A,nodeModelMatrix:b})}if(i.children)for(const E of i.children)zl(d,E,n,_,c,f,g)}function gt(d,i,n,_){const c=n.shadowRenderer;if(!c)return;const f=c.getShadowPassDepthMode(),g=c.getShadowPassColorMode(),b=c.calculateShadowPassMatrixFromMatrix(i),A=Fl(b);n.getOrCreateProgram("modelDepth",{defines:n._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(n,n.context.gl.TRIANGLES,f,Be.disabled,g,Le.backCCW,A,_.id,d.vertexBuffer,d.indexBuffer,d.segments,_.paint,n.transform.zoom,void 0,void 0)}function G_(d,i,n){const _=i.updateZoomBasedPaintProperties(),c=function(f,g,b){let A,E,O,S=f.terrain?f.terrain.exaggeration():0;if(f.terrain&&S>0){const L=f.terrain,w=L.findDEMTileFor(b);w&&w.dem?A=s.cU.create(L,b,w):S=0}if(S===0&&(g.terrainElevationMin=0,g.terrainElevationMax=0),S===g.validForExaggeration&&(S===0||A&&A._demTile&&A._demTile.tileID===g.validForDEMTile.id&&A._dem._timestamp===g.validForDEMTile.timestamp))return!1;for(const L in g.instancesPerModel){const w=g.instancesPerModel[L];for(let U=0;U<w.instancedDataArray.length;++U){const B=(A?S*A.getElevationAt(0|w.instancedDataArray.float32[16*U],0|w.instancedDataArray.float32[16*U+1],!0,!0):0)+w.instancesEvaluatedElevation[U];w.instancedDataArray.float32[16*U+6]=B,E=E?Math.min(g.terrainElevationMin,B):B,O=O?Math.max(g.terrainElevationMax,B):B}}return g.terrainElevationMin=E||0,g.terrainElevationMax=O||0,g.validForExaggeration=S,g.validForDEMTile=A&&A._demTile?{id:A._demTile.tileID,timestamp:A._dem._timestamp}:{id:void 0,timestamp:0},!0}(d,i,n);(_||c)&&(i.uploaded=!1,i.upload(d.context))}const po={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new s.bS([0,0,0],[s.V,s.V,0])};function Ac(d,i){const n=1<<d.canonical.z,_=i.getFreeCameraOptions().position,c=i.elevation,f=d.canonical.x/n,g=(d.canonical.x+1)/n,b=d.canonical.y/n,A=(d.canonical.y+1)/n;let E=i._centerAltitude;if(c){const w=c.getMinMaxForTile(d);w&&w.max>E&&(E=w.max)}const O=s.aa(_.x,f,g)-_.x,S=s.aa(_.y,b,A)-_.y,L=s.bl(E,i.center.lat)-_.z;return i._zoomFromMercatorZ(Math.sqrt(O*O+S*S+L*L))}function V_(d,i,n,_,c,f,g){const b=d.context,A=d.renderPass==="shadow",E=d.shadowRenderer,O=A&&E?E.getShadowPassDepthMode():new Ne(b.gl.LEQUAL,Ne.ReadWrite,d.depthRangeFor3D),S=d.isTileAffectedByFog(f);if(n.meshes)for(const L of n.meshes){const w=["MODEL_POSITION_ON_GPU"],U=[];let B,k,M;_.instancedDataArray.length>20&&w.push("INSTANCED_ARRAYS");const H=wn(d,i.paint.get("model-cutoff-fade-range"));if(H.shouldRenderCutoff&&w.push("RENDER_CUTOFF"),A&&E)B=d.getOrCreateProgram("modelDepth",{defines:w}),k=Fl(g.shadowTileMatrix,g.shadowTileMatrix,Float32Array.from(n.matrix)),M=E.getShadowPassColorMode();else{qa(w,U,L,d),B=d.getOrCreateProgram("model",{defines:w,overrideFog:S});const V=L.material,$=V.pbrMetallicRoughness,z=i.paint.get("model-opacity"),Z=i.paint.get("model-emissive-strength").constantOr(0);k=Yr(f.expandedProjMatrix,Float32Array.from(n.matrix),new Float32Array(16),d,z,$.baseColorFactor,V.emissiveFactor,$.metallicFactor,$.roughnessFactor,V,Z,i,c),E&&(g.shadowUniformsInitialized?B.setShadowUniformValues(b,E.getShadowUniformValues()):(E.setupShadows(f.toUnwrapped(),B,"model-tile",f.overscaledZ),g.shadowUniformsInitialized=!0)),M=H.shouldRenderCutoff||z<1||V.alphaMode!=="OPAQUE"?Je.alphaBlended:Je.unblended}d.uploadCommonUniforms(b,B,f.toUnwrapped(),null,H);const q=L.material.doubleSided?Le.disabled:Le.backCCW;if(_.instancedDataArray.length>20)U.push(_.instancedDataBuffer),B.draw(d,b.gl.TRIANGLES,O,Be.disabled,M,q,k,i.id,L.vertexBuffer,L.indexBuffer,L.segments,i.paint,d.transform.zoom,void 0,U,_.instancedDataArray.length);else{const V=A?"u_instance":"u_normal_matrix";for(let $=0;$<_.instancedDataArray.length;++$)k[V]=new Float32Array(_.instancedDataArray.arrayBuffer,64*$,16),B.draw(d,b.gl.TRIANGLES,O,Be.disabled,M,q,k,i.id,L.vertexBuffer,L.indexBuffer,L.segments,i.paint,d.transform.zoom,void 0,U)}}if(n.children)for(const L of n.children)V_(d,i,L,_,c,f,g)}const js=[1,-1,1];function Nf(d,i,n,_){if(!n.modelManager)return!0;const c=n.modelManager;if(!n.shadowRenderer)return!0;const f=n.shadowRenderer,g=i.aabb;let b=!0,A=d.maxHeight;if(A===0){let O=0;for(const S in d.instancesPerModel){const L=c.getModel(S,_);L?O=Math.max(O,Math.max(Math.max(L.aabb.max[0],L.aabb.max[1]),L.aabb.max[2])):b=!1}A=d.maxScale*O*1.41+d.maxVerticalOffset,b&&(d.maxHeight=A)}g.max[2]=A,g.min[2]+=d.terrainElevationMin,g.max[2]+=d.terrainElevationMax,s.N.transformMat4(g.min,g.min,i.tileMatrix),s.N.transformMat4(g.max,g.max,i.tileMatrix);const E=g.intersects(f.getCurrentCascadeFrustum());return n.currentShadowCascade===0&&(d.isInsideFirstShadowMapFrustum=E===2),E===0}class Lf{}class vc{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(i,n,_){{const S=this._storage.get(n.id);if(S)return S.lastUsedFrameIdx=i,S.buf}const c=_.gl,f=c.getBufferParameter(c.ELEMENT_ARRAY_BUFFER,c.BUFFER_SIZE),g=new ArrayBuffer(f),b=new Int16Array(g);c.getBufferSubData(c.ELEMENT_ARRAY_BUFFER,0,new Int16Array(g));const A=new s.cW;for(let S=0;S<f/2;S+=3){const L=b[S],w=b[S+1],U=b[S+2];A.emplaceBack(L,w),A.emplaceBack(w,U),A.emplaceBack(U,L)}const E=_.bindVertexArrayOES.current,O=new Lf;return O.buf=new Ma(_,A),O.lastUsedFrameIdx=i,this._storage.set(n.id,O),_.bindVertexArrayOES.set(E),O.buf}update(i){for(const[n,_]of this._storage)i-_.lastUsedFrameIdx>30&&(_.buf.destroy(),this._storage.delete(n))}destroy(){for(const[i,n]of this._storage)n.buf.destroy(),this._storage.delete(i)}}class Hl{registerParameter(i,n,_,c,f){}registerButton(i,n,_){}}const Yl={symbol:function(d,i,n,_,c){if(d.renderPass!=="translucent")return;const f=Be.disabled,g=d.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(E,O,S,L,w,U,B){const k=O.transform,M=w==="map",H=U==="map";for(const q of E){const V=L.getTile(q),$=V.getBucket(S);if(!$||!$.text||!$.text.segments.get().length)continue;const z=s.b5($.textSizeData,k.zoom),Z=El(q,$.getProjection(),k),at=k.calculatePixelsToTileUnitsMatrix(V),nt=Al(Z,V.tileID.canonical,H,M,k,$.getProjection(),at),rt=$.hasIconTextFit()&&$.hasIconData();if(z){const yt=Math.pow(2,k.zoom-V.tileID.overscaledZ);gc($,M,H,B,s.cx,k,nt,q,yt,z,rt)}}}(_,d,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),c);const b=n.paint.get("icon-opacity").constantOr(1)!==0,A=n.paint.get("text-opacity").constantOr(1)!==0;n.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(b||A)?Gr(d,i,n,_,f,g):(b&&Gr(d,i,n,_,f,g,{onlyIcons:!0}),A&&Gr(d,i,n,_,f,g,{onlyText:!0})),i.map.showCollisionBoxes&&(Uo(d,i,n,_,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Uo(d,i,n,_,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(d,i,n,_){if(d.renderPass!=="translucent")return;const c=n.paint.get("circle-opacity"),f=n.paint.get("circle-stroke-width"),g=n.paint.get("circle-stroke-opacity"),b=n.layout.get("circle-sort-key").constantOr(1)!==void 0,A=n.paint.get("circle-emissive-strength");if(c.constantOr(1)===0&&(f.constantOr(1)===0||g.constantOr(1)===0))return;const E=d.context,O=E.gl,S=d.transform,L=d.depthModeForSublayer(0,Ne.ReadOnly),w=Be.disabled,U=d.colorModeForDrapableLayerRenderPass(A),B=S.projection.name==="globe",k=[s.a5(S.center.lng),s.ae(S.center.lat)],M=[];for(let q=0;q<_.length;q++){const V=_[q],$=i.getTile(V),z=$.getBucket(n);if(!z||z.projection.name!==S.projection.name)continue;const Z=z.programConfigurations.get(n.id),at=s.cy(n),nt=d.isTileAffectedByFog(V);B&&at.push("PROJECTION_GLOBE_VIEW");const rt=d.getOrCreateProgram("circle",{config:Z,defines:at,overrideFog:nt}),yt=z.layoutVertexBuffer,ut=z.globeExtVertexBuffer,It=z.indexBuffer,vt=S.projection.createInversionMatrix(S,V.canonical),Ut={programConfiguration:Z,program:rt,layoutVertexBuffer:yt,globeExtVertexBuffer:ut,indexBuffer:It,uniformValues:s.cz(d,V,$,vt,k,n),tile:$};if(b){const ct=z.segments.get();for(const Tt of ct)M.push({segments:new s.aB([Tt]),sortKey:Tt.sortKey,state:Ut})}else M.push({segments:z.segments,sortKey:0,state:Ut})}b&&M.sort((q,V)=>q.sortKey-V.sortKey);const H={useDepthForOcclusion:S.depthOcclusionForSymbolsAndCircles};for(const q of M){const{programConfiguration:V,program:$,layoutVertexBuffer:z,globeExtVertexBuffer:Z,indexBuffer:at,uniformValues:nt,tile:rt}=q.state,yt=q.segments;d.terrain&&d.terrain.setupElevationDraw(rt,$,H),d.uploadCommonUniforms(E,$,rt.tileID.toUnwrapped()),$.draw(d,O.TRIANGLES,L,w,U,Le.disabled,nt,n.id,z,at,yt,n.paint,S.zoom,V,[Z])}},heatmap:function(d,i,n,_){if(n.paint.get("heatmap-opacity")!==0)if(d.renderPass==="offscreen"){const c=d.context,f=c.gl,g=Be.disabled,b=new Je([f.ONE,f.ONE,f.ONE,f.ONE],s.ax.transparent,[!0,!0,!0,!0]);(function(w,U,B,k){const M=w.gl,H=U.width*k,q=U.height*k;w.activeTexture.set(M.TEXTURE1),w.viewport.set([0,0,H,q]);let V=B.heatmapFbo;if(!V||V&&(V.width!==H||V.height!==q)){V&&V.destroy();const $=M.createTexture();M.bindTexture(M.TEXTURE_2D,$),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.LINEAR),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.LINEAR),V=B.heatmapFbo=w.createFramebuffer(H,q,!0,null),function(z,Z,at,nt,rt,yt){const ut=z.gl;ut.texImage2D(ut.TEXTURE_2D,0,z.extRenderToTextureHalfFloat?ut.RGBA16F:ut.RGBA,rt,yt,0,ut.RGBA,z.extRenderToTextureHalfFloat?ut.HALF_FLOAT:ut.UNSIGNED_BYTE,null),nt.colorAttachment.set(at)}(w,0,$,V,H,q)}else M.bindTexture(M.TEXTURE_2D,V.colorAttachment.get()),w.bindFramebuffer.set(V.framebuffer)})(c,d,n,d.transform.projection.name==="globe"?.5:.25),c.clear({color:s.ax.transparent});const A=d.transform,E=A.projection.name==="globe",O=E?["PROJECTION_GLOBE_VIEW"]:[],S=E?Le.frontCCW:Le.disabled,L=[s.a5(A.center.lng),s.ae(A.center.lat)];for(let w=0;w<_.length;w++){const U=_[w];if(i.hasRenderableParent(U))continue;const B=i.getTile(U),k=B.getBucket(n);if(!k||k.projection.name!==A.projection.name)continue;const M=d.isTileAffectedByFog(U),H=k.programConfigurations.get(n.id),q=d.getOrCreateProgram("heatmap",{config:H,defines:O,overrideFog:M}),{zoom:V}=d.transform;d.terrain&&d.terrain.setupElevationDraw(B,q),d.uploadCommonUniforms(c,q,U.toUnwrapped());const $=A.projection.createInversionMatrix(A,U.canonical);q.draw(d,f.TRIANGLES,Ne.disabled,g,b,S,N_(d,U,B,$,L,V,n.paint.get("heatmap-intensity")),n.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,n.paint,d.transform.zoom,H,E?[k.globeExtVertexBuffer]:null)}c.viewport.set([0,0,d.width,d.height])}else d.renderPass==="translucent"&&(d.context.setColorMode(d.colorModeForRenderPass()),function(c,f){const g=c.context,b=g.gl,A=f.heatmapFbo;if(!A)return;g.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,A.colorAttachment.get()),g.activeTexture.set(b.TEXTURE1);let E=f.colorRampTexture;E||(E=f.colorRampTexture=new s.T(g,f.colorRamp,b.RGBA)),E.bind(b.LINEAR,b.CLAMP_TO_EDGE),c.getOrCreateProgram("heatmapTexture").draw(c,b.TRIANGLES,Ne.disabled,Be.disabled,c.colorModeForRenderPass(),Le.disabled,((O,S,L,w)=>({u_image:0,u_color_ramp:1,u_opacity:S.paint.get("heatmap-opacity")}))(0,f),f.id,c.viewportBuffer,c.quadTriangleIndexBuffer,c.viewportSegments,f.paint,c.transform.zoom)}(d,n))},line:function(d,i,n,_){if(d.renderPass!=="translucent")return;const c=n.paint.get("line-opacity"),f=n.paint.get("line-width");if(c.constantOr(1)===0||f.constantOr(1)===0)return;const g=n.paint.get("line-emissive-strength"),b=d.depthModeForSublayer(0,Ne.ReadOnly),A=d.colorModeForDrapableLayerRenderPass(g),E=d.terrain&&d.terrain.renderingToTexture?1:s.f.devicePixelRatio,O=n.paint.get("line-dasharray"),S=O.constantOr(1),L=n.layout.get("line-cap"),w=n.paint.get("line-pattern"),U=w.constantOr(1),B=n.paint.get("line-pattern").constantOr(1),k=n.paint.get("line-opacity").constantOr(1)!==1;let M=!B&&k;const H=n.paint.get("line-gradient"),q=U?"linePattern":"line",V=d.context,$=V.gl,z=s.cA(n);d.terrain&&d.terrain.clipOrMaskOverlapStencilType()&&(M=!1);for(const Z of _){const at=i.getTile(Z);if(U&&!at.patternsLoaded())continue;const nt=at.getBucket(n);if(!nt)continue;d.prepareDrawTile();const rt=nt.programConfigurations.get(n.id),yt=d.isTileAffectedByFog(Z),ut=d.getOrCreateProgram(q,{config:rt,defines:z,overrideFog:yt}),It=w.constantOr(null);if(It&&at.imageAtlas){const qt=at.imageAtlas.patternPositions[It.toString()];qt&&rt.setConstantPatternPositions(qt)}const vt=O.constantOr(null),Ut=L.constantOr(null);if(!U&&vt&&Ut&&at.lineAtlas){const qt=at.lineAtlas.getDash(vt,Ut);qt&&rt.setConstantPatternPositions(qt)}let[ct,Tt]=n.paint.get("line-trim-offset");(Ut==="round"||Ut==="square")&&ct!==Tt&&(ct===0&&(ct-=1),Tt===1&&(Tt+=1));const lt=d.terrain?Z.projMatrix:null,pt=U?s.cB(d,at,n,lt,E,[ct,Tt]):s.cC(d,at,n,lt,nt.lineClipsArray.length,E,[ct,Tt]);if(H){const qt=nt.gradients[n.id];let Xt=qt.texture;if(n.gradientVersion!==qt.version){let ae=256;if(n.stepInterpolant){const he=i.getSource().maxzoom,Ce=Z.canonical.z===he?Math.ceil(1<<d.transform.maxZoom-Z.canonical.z):1;ae=s.aa(s.cD(nt.maxLineLength/s.V*1024*Ce),256,V.maxTextureSize)}qt.gradient=s.cE({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:ae,image:qt.gradient||void 0,clips:nt.lineClipsArray}),qt.texture?qt.texture.update(qt.gradient):qt.texture=new s.T(V,qt.gradient,$.RGBA),qt.version=n.gradientVersion,Xt=qt.texture}V.activeTexture.set($.TEXTURE1),Xt.bind(n.stepInterpolant?$.NEAREST:$.LINEAR,$.CLAMP_TO_EDGE)}S&&(V.activeTexture.set($.TEXTURE0),at.lineAtlasTexture&&at.lineAtlasTexture.bind($.LINEAR,$.REPEAT),rt.updatePaintBuffers()),U&&(V.activeTexture.set($.TEXTURE0),at.imageAtlasTexture&&at.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),rt.updatePaintBuffers()),d.uploadCommonUniforms(V,ut,Z.toUnwrapped());const kt=qt=>{ut.draw(d,$.TRIANGLES,b,qt,A,Le.disabled,pt,n.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,n.paint,d.transform.zoom,rt,[nt.layoutVertexBuffer2])};if(M){const qt=d.stencilModeForClipping(Z).ref;qt===0&&d.terrain&&V.clear({stencil:0});const Xt={func:$.EQUAL,mask:255};pt.u_alpha_discard_threshold=.8,kt(new Be(Xt,qt,255,$.KEEP,$.KEEP,$.INVERT)),pt.u_alpha_discard_threshold=0,kt(new Be(Xt,qt,255,$.KEEP,$.KEEP,$.KEEP))}else kt(d.stencilModeForClipping(Z))}M&&(d.resetStencilClippingMasks(),d.terrain&&V.clear({stencil:0}))},fill:function(d,i,n,_){const c=n.paint.get("fill-color"),f=n.paint.get("fill-opacity");if(f.constantOr(1)===0)return;const g=n.paint.get("fill-emissive-strength"),b=d.colorModeForDrapableLayerRenderPass(g),A=n.paint.get("fill-pattern"),E=d.opaquePassEnabledForLayer()&&!A.constantOr(1)&&c.constantOr(s.ax.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(d.renderPass===E){const O=d.depthModeForSublayer(1,d.renderPass==="opaque"?Ne.ReadWrite:Ne.ReadOnly);us(d,i,n,_,O,b,!1)}if(d.renderPass==="translucent"&&n.paint.get("fill-antialias")){const O=d.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Ne.ReadOnly);us(d,i,n,_,O,b,!0)}},"fill-extrusion":function(d,i,n,_){const c=n.paint.get("fill-extrusion-opacity"),f=d.context,g=f.gl,b=d.terrain,A=b&&b.renderingToTexture;if(c===0)return;const E=d.conflationActive&&d.layerUsedInConflation(n,i.getSource());if(E&&function(O,S,L,w){for(const U of w){const B=S.getTile(U).getBucket(L);B&&(B.updateReplacement(U,O.replacementSource),B.uploadCentroid(O.context))}}(d,i,n,_),b||E)for(const O of _){const S=i.getTile(O).getBucket(n);S&&Cf(d.context,i,O,S,n,b,E)}if(d.renderPass==="shadow"&&d.shadowRenderer){const O=d.shadowRenderer;if(b&&c<.65&&n._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof s.Z)return;const S=O.getShadowPassDepthMode(),L=O.getShadowPassColorMode();ye(d,i,n,_,S,Be.disabled,L,E)}else if(d.renderPass==="translucent"){const O=!n.paint.get("fill-extrusion-pattern").constantOr(1),S=n.paint.get("fill-extrusion-color").constantOr(s.ax.white);if(!A&&S.a!==0){const L=new Ne(d.context.gl.LEQUAL,Ne.ReadWrite,d.depthRangeFor3D);c===1&&O?ye(d,i,n,_,L,Be.disabled,Je.unblended,E):(ye(d,i,n,_,L,Be.disabled,Je.disabled,E),ye(d,i,n,_,L,d.stencilModeFor3D(),d.colorModeForRenderPass(),E),d.resetStencilClippingMasks())}if(d.style.enable3dLights()&&O&&(!b&&d.transform.projection.name!=="globe"||A)){const L=n.paint.get("fill-extrusion-opacity"),w=n.paint.get("fill-extrusion-ambient-occlusion-intensity"),U=n.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),B=n.paint.get("fill-extrusion-flood-light-intensity"),k=n.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),M=w>0&&U>0,H=B>0,q=($,z,Z)=>(1-Z)*$+Z*z,V=$=>{const z=d.depthModeForSublayer(1,Ne.ReadOnly,g.LEQUAL,!0),Z=n.paint.get($?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),at=q(.1,3,Z),nt=d._showOverdrawInspector;if(!nt){const rt=new Be({func:g.ALWAYS,mask:255},255,255,g.KEEP,g.KEEP,g.REPLACE),yt=new Je([g.ONE,g.ONE,g.ONE,g.ONE],s.ax.transparent,[!1,!1,!1,!0],g.MIN);Fn(d,i,n,_,z,rt,yt,Le.disabled,$,"sdf",L,w,U,B,k,at,E,!1)}{const rt=nt?Be.disabled:new Be({func:g.EQUAL,mask:255},255,255,g.KEEP,g.DECR,g.DECR),yt=nt?d.colorModeForRenderPass():new Je([g.ONE_MINUS_DST_ALPHA,g.DST_ALPHA,g.ONE,g.ONE],s.ax.transparent,[!0,!0,!0,!0]);Fn(d,i,n,_,z,rt,yt,Le.disabled,$,"color",L,w,U,B,k,at,E,!1)}};if(A){const $=(z,Z,at)=>{const nt=d.depthModeForSublayer(1,Ne.ReadOnly,g.LEQUAL,!1),rt=n.paint.get(z?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),yt=q(.1,3,rt);{const ut=new Je([g.ONE,g.ONE,g.ONE,g.ONE],s.ax.transparent,[!1,!1,!1,!0]);Fn(d,i,n,_,nt,Be.disabled,ut,Le.disabled,z,"clear",L,w,U,B,k,yt,E,Z)}{const ut=new Be({func:g.ALWAYS,mask:255},255,255,g.KEEP,g.KEEP,g.REPLACE),It=new Je([g.ONE,g.ONE,g.ONE,g.ONE],s.ax.transparent,[!1,!1,!1,!0],g.MIN);Fn(d,i,n,_,nt,ut,It,Le.disabled,z,"sdf",L,w,U,B,k,yt,E,Z)}{const ut=z?g.ZERO:g.ONE_MINUS_DST_ALPHA,It=new Be({func:g.EQUAL,mask:255},255,255,g.KEEP,g.DECR,g.DECR),vt=new Je([ut,g.DST_ALPHA,g.ONE_MINUS_DST_ALPHA,g.ZERO],s.ax.transparent,[!0,!0,!0,!0]);Fn(d,i,n,_,nt,It,vt,Le.disabled,z,"color",L,w,U,B,k,yt,E,Z)}{const ut=new Je([g.ONE,g.ONE,g.ONE,z?g.ZERO:g.ONE],s.ax.transparent,[!1,!1,!1,!0],z?g.FUNC_ADD:g.MAX);Fn(d,i,n,_,nt,Be.disabled,ut,Le.disabled,z,"clear",L,w,U,B,k,yt,E,Z,at)}};if(M||H){let z;if(d.prepareDrawTile(),b){const Z=b.drapeBufferSize[0],at=b.drapeBufferSize[1];z=b.framebufferCopyTexture,z&&(!z||z.size[0]===Z&&z.size[1]===at)||(z&&z.destroy(),z=b.framebufferCopyTexture=new s.T(f,new s.h({width:Z,height:at}),g.RGBA)),z.bind(g.LINEAR,g.CLAMP_TO_EDGE),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGBA,0,0,Z,at,0)}M&&$(!0,!1,z),H&&$(!1,!0,z)}}else M&&V(!0),H&&V(!1)}}},hillshade:function(d,i,n,_){if(d.renderPass!=="offscreen"&&d.renderPass!=="translucent"||d.style.disableElevatedTerrain)return;const c=d.context,f=d.terrain&&d.terrain.renderingToTexture,[g,b]=d.renderPass!=="translucent"||f?[{},_]:d.stencilConfigForOverlap(_);for(const A of b){const E=i.getTile(A);if(E.needsHillshadePrepare&&d.renderPass==="offscreen")g_(d,E,n);else if(d.renderPass==="translucent"){const O=d.depthModeForSublayer(0,Ne.ReadOnly),S=n.paint.get("hillshade-emissive-strength"),L=d.colorModeForDrapableLayerRenderPass(S),w=f&&d.terrain?d.terrain.stencilModeForRTTOverlap(A):g[A.overscaledZ];Fr(d,A,E,n,O,w,L)}}c.viewport.set([0,0,d.width,d.height]),d.resetStencilClippingMasks()},raster:function(d,i,n,_,c,f){if(d.renderPass!=="translucent"||n.paint.get("raster-opacity")===0)return;const g=d.transform.projection.name==="globe",b=n.paint.get("raster-elevation")!==0,A=b&&g;if(d.renderElevatedRasterBackface&&!A)return;const E=d.context,O=E.gl,S=i.getSource(),L=function(z,Z,at,nt){const rt=Z.paint.get("raster-color"),yt=z.type==="raster-array",ut=[],It=Z.paint.get("raster-resampling"),vt=Z.paint.get("raster-color-mix");let Ut=Z.paint.get("raster-color-range");const ct=[vt[0],vt[1],vt[2],0],Tt=vt[3];let lt=It==="nearest"?nt.NEAREST:nt.LINEAR;if(yt&&(ut.push("RASTER_ARRAY"),rt||ut.push("RASTER_COLOR"),It==="linear"&&ut.push("RASTER_ARRAY_LINEAR"),lt=nt.NEAREST,!Ut&&z.rasterLayers)){const pt=z.rasterLayers.find(({id:kt})=>kt===Z.sourceLayer);pt&&pt.fields&&pt.fields.range&&(Ut=pt.fields.range)}if(Ut=Ut||[0,1],rt){ut.push("RASTER_COLOR"),at.activeTexture.set(nt.TEXTURE2),Z.updateColorRamp(Ut);let pt=Z.colorRampTexture;pt||(pt=Z.colorRampTexture=new s.T(at,Z.colorRamp,nt.RGBA)),pt.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}return{mix:ct,range:Ut,offset:Tt,defines:ut,resampling:lt}}(S,n,E,O);if(S instanceof s.ap&&!_.length&&!g)return;const w=n.paint.get("raster-emissive-strength"),U=d.colorModeForDrapableLayerRenderPass(w),B=d.terrain&&d.terrain.renderingToTexture,k=!d.options.moving,M=n.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;if(S instanceof s.ap&&!_.length&&(S.onNorthPole||S.onSouthPole)){const z=b?d.stencilModeFor3D():Be.disabled;return void W_(!!S.onNorthPole,null,d,i,n,w,L,Le.disabled,z)}if(!_.length)return;const[H,q]=S instanceof s.ap||B?[{},_]:d.stencilConfigForOverlap(_),V=q[q.length-1].overscaledZ;A&&L.defines.push("PROJECTION_GLOBE_VIEW"),b&&L.defines.push("RENDER_CUTOFF");const $=(z,Z,at)=>{for(const nt of z){const rt=nt.toUnwrapped(),yt=i.getTile(nt);if(B&&(!yt||!yt.hasData()))continue;E.activeTexture.set(O.TEXTURE0);const ut=D_(yt,S,n,L);if(!ut||!ut.texture)continue;const{texture:It,mix:vt,offset:Ut,tileSize:ct,buffer:Tt}=ut;let lt,pt;B?(lt=Ne.disabled,pt=nt.projMatrix):b?(lt=new Ne(O.LEQUAL,Ne.ReadWrite,d.depthRangeFor3D),pt=g?Float32Array.from(d.transform.expandedFarZProjMatrix):d.transform.calculateProjMatrix(rt,k)):(lt=d.depthModeForSublayer(nt.overscaledZ-V,n.paint.get("raster-opacity")===1?Ne.ReadWrite:Ne.ReadOnly,O.LESS),pt=d.transform.calculateProjMatrix(rt,k));const kt=d.terrain&&B?d.terrain.stencilModeForRTTOverlap(nt):H[nt.overscaledZ],qt=f?0:n.paint.get("raster-fade-duration");yt.registerFadeDuration(qt);const Xt=i.findLoadedParent(nt,0),ae=x_(yt,Xt,i,d.transform,qt);let he,Ce;d.terrain&&d.terrain.prepareDrawTile(),E.activeTexture.set(O.TEXTURE0),It.bind(M,O.CLAMP_TO_EDGE),E.activeTexture.set(O.TEXTURE1),Xt?(Xt.texture&&Xt.texture.bind(M,O.CLAMP_TO_EDGE),he=Math.pow(2,Xt.tileID.overscaledZ-yt.tileID.overscaledZ),Ce=[yt.tileID.canonical.x*he%1,yt.tileID.canonical.y*he%1]):It.bind(M,O.CLAMP_TO_EDGE),It.useMipmap&&E.extTextureFilterAnisotropic&&d.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax);const xe=d.transform;let Ee;const Xe=b?M_(xe):[0,0,0,0];let Fe,ze,ke,da,Wa,ta=0;if(A&&S instanceof s.ap&&S.coordinates.length>3)Fe=Float32Array.from(s.aT(s.ci(new s.bs(0,0,0)))),ze=Float32Array.from(xe.globeMatrix),ke=Float32Array.from(s.ce(xe)),da=[s.a5(xe.center.lng),s.ae(xe.center.lat)],Ee=S.elevatedGlobePerspectiveTransform,Wa=S.elevatedGlobeGridMatrix||new Float32Array(9);else if(A){const aa=s.cf(nt.canonical);ta=s.cg(aa.getCenter().lat),Fe=Float32Array.from(s.aT(s.ci(nt.canonical))),ze=Float32Array.from(xe.globeMatrix),ke=Float32Array.from(s.ce(xe)),da=[s.a5(xe.center.lng),s.ae(xe.center.lat)],Ee=[0,0],Wa=Float32Array.from(s.ch(nt.canonical,aa,ta,xe.worldSize/xe._pixelsPerMercatorPixel))}else Ee=S instanceof s.ap?S.perspectiveTransform:[0,0],Fe=new Float32Array(16),ze=new Float32Array(9),ke=new Float32Array(16),da=[0,0],Wa=new Float32Array(9);const $a=L_(pt,Fe,ze,ke,Wa,Ce||[0,0],s.S(d.transform.zoom),da,Xe,he||1,ae,n,Ee,b?n.paint.get("raster-elevation"):0,2,vt,Ut,L.range,ct,Tt,w),ea=d.isTileAffectedByFog(nt),fa=d.getOrCreateProgram("raster",{defines:L.defines,overrideFog:ea});if(d.uploadCommonUniforms(E,fa,rt),S instanceof s.ap){const aa=S.elevatedGlobeVertexBuffer,ma=S.elevatedGlobeIndexBuffer;if(B||!g)S.boundsBuffer&&S.boundsSegments&&fa.draw(d,O.TRIANGLES,lt,Be.disabled,U,Le.disabled,$a,n.id,S.boundsBuffer,d.quadTriangleIndexBuffer,S.boundsSegments);else if(aa&&ma){const Ua=xe.zoom<=s.bG?S.elevatedGlobeSegments:S.getSegmentsForLongitude(xe.center.lng);Ua&&fa.draw(d,O.TRIANGLES,lt,Be.disabled,U,Z,$a,n.id,aa,ma,Ua)}}else if(A){lt=new Ne(O.LEQUAL,Ne.ReadOnly,d.depthRangeFor3D);const aa=d.globeSharedBuffers;if(aa){const[ma,Ua,ba]=aa.getGridBuffers(ta,!1);fa.draw(d,O.TRIANGLES,lt,at||kt,d.colorModeForRenderPass(),Z,$a,n.id,ma,Ua,ba)}}else{const{tileBoundsBuffer:aa,tileBoundsIndexBuffer:ma,tileBoundsSegments:Ua}=d.getTileBoundsBuffers(yt);fa.draw(d,O.TRIANGLES,lt,kt,U,Le.disabled,$a,n.id,aa,ma,Ua)}}if(!(S instanceof s.ap)&&A)for(const nt of z){const rt=nt.canonical.y===(1<<nt.canonical.z)-1;nt.canonical.y===0&&W_(!0,nt,d,i,n,w,L,Z,at||Be.disabled),rt&&W_(!1,nt,d,i,n,w,L,Z===Le.frontCW?Le.backCW:Le.frontCW,at||Be.disabled)}};A?$(q,d.renderElevatedRasterBackface?Le.backCW:Le.frontCW,d.stencilModeFor3D()):$(q,Le.disabled,void 0),d.resetStencilClippingMasks()},"raster-particle":function(d,i,n,_,c,f){d.renderPass==="offscreen"&&function(g,b,A,E){if(!E.length)return;const O=g.context,S=O.gl,L=b.getSource();if(!(L instanceof Jt))return;const w=[];for(const k of E){const M=b.getTile(k);if(!(M instanceof is))continue;const H=F_(M,L,A);if(!H)continue;const q=[H.tileSize,H.tileSize];let V=A.tileFramebuffer;V||(V=A.tileFramebuffer=O.createFramebuffer(q[0],q[1],!0,null));let $=M.rasterParticleState;const z=A.paint.get("raster-particle-count");$||($=M.rasterParticleState=new hi(O,k,q,z));const Z=$.update(A.lastInvalidatedAt);$.numParticles!==z&&$.setNumParticles(k,z);const at=$.targetColorTexture;$.targetColorTexture=$.backgroundColorTexture,$.backgroundColorTexture=at;const nt=$.particleVertices0;$.particleVertices0=$.particleVertices1,$.particleVertices1=nt,w.push([k,H,$,Z])}if(w.length===0)return;const U=s.f.now(),B=A.previousDrawTimestamp?.001*(U-A.previousDrawTimestamp):.0167;if(A.previousDrawTimestamp=U,A.hasColorMap()){O.activeTexture.set(S.TEXTURE0+2);let k=A.colorRampTexture;k||(k=A.colorRampTexture=new s.T(O,A.colorRamp,S.RGBA)),k.bind(S.LINEAR,S.CLAMP_TO_EDGE)}O.bindFramebuffer.set(A.tileFramebuffer.framebuffer),O.activeTexture.set(S.TEXTURE0),function(k,M,H){const q=k.context,V=q.gl,$=M.tileFramebuffer;q.activeTexture.set(V.TEXTURE0);const z={u_texture:0,u_opacity:1.05*(at=M.paint.get("raster-particle-fade-opacity-factor"))/(at+.05)},Z=k.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var at;for(const nt of H){const[,,rt,yt]=nt;$.colorAttachment.set(rt.targetColorTexture.texture),q.viewport.set([0,0,$.width,$.height]),q.clear({color:s.ax.transparent}),yt&&(rt.backgroundColorTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE),Z.draw(k,V.TRIANGLES,Ne.disabled,Be.disabled,Je.alphaBlended,Le.disabled,z,M.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments))}}(g,A,w),function(k,M,H,q){const V=k.context.gl,$=H.tileFramebuffer,z=k.transform.projection.name==="globe",Z=H.paint.get("raster-particle-max-speed");for(const at of q){const[nt,rt,yt]=at;rt.texture.bind(V.LINEAR,V.CLAMP_TO_EDGE),$.colorAttachment.set(yt.targetColorTexture.texture);const ut=k.getOrCreateProgram("rasterParticleDraw",{defines:rt.defines,overrideFog:!1}),It=rt.scalarData?[]:[0,1,2,3].map(ct=>s.cG[ct](nt));It.push(nt);const vt=nt.canonical.x,Ut=nt.canonical.y;for(const ct of It){const Tt=M.getTile(z?ct.wrapped():ct);if(!Tt)continue;const lt=Tt.rasterParticleState;if(!lt)continue;const pt=If([ct.canonical.x+(1<<ct.canonical.z)*(ct.wrap-nt.wrap)-vt,ct.canonical.y-Ut],0,rt.texture.size,2,Z,rt.textureOffset,rt.scale,rt.offset);ut.draw(k,V.POINTS,Ne.disabled,Be.disabled,Je.alphaBlended,Le.disabled,pt,H.id,lt.particleVertices0,void 0,lt.particleSegment)}}}(g,b,A,w),function(k,M,H,q){const V=k.context.gl;let $=M.transformFeedbackObject;$||($=M.transformFeedbackObject=V.createTransformFeedback()),V.bindTransformFeedback(V.TRANSFORM_FEEDBACK,M.transformFeedbackObject);const z=M.paint.get("raster-particle-max-speed"),Z=q*M.paint.get("raster-particle-speed-factor")*.3,at=(nt=M.paint.get("raster-particle-reset-rate-factor"),Math.pow(nt,6));var nt;for(const rt of H){const[,yt,ut]=rt;yt.texture.bind(V.LINEAR,V.CLAMP_TO_EDGE);const It=pc(0,yt.texture.size,z,Z,at,yt.textureOffset,yt.scale,yt.offset);k.getOrCreateProgram("rasterParticleUpdate",{defines:yt.defines,transformFeedback:{bufferMode:V.SEPARATE_ATTRIBS,shaderVaryings:["v_new_particle"]}}).draw(k,V.POINTS,Ne.disabled,Be.disabled,Je.disabled,Le.disabled,It,M.id,ut.particleVertices0,void 0,ut.particleSegment,{},void 0,void 0,void 0,void 0,[{buffer:ut.particleVertices1,targetIndex:0}])}V.bindTransformFeedback(V.TRANSFORM_FEEDBACK,null)}(g,A,w,B)}(d,i,n,_),d.renderPass==="translucent"&&(function(g,b,A,E,O){const S=g.context,L=S.gl,w=!g.options.moving,U=g.transform.projection.name==="globe";if(!E.length)return;const[B,k]=g.stencilConfigForOverlap(E),M=[];U&&M.push("PROJECTION_GLOBE_VIEW");for(const H of k){const q=H.toUnwrapped(),V=b.getTile(H);if(!V.rasterParticleState)continue;const $=V.rasterParticleState,z=100;V.registerFadeDuration(z);const Z=b.findLoadedParent(H,0),at=x_(V,Z,b,g.transform,z);let nt,rt;g.terrain&&g.terrain.prepareDrawTile(),S.activeTexture.set(L.TEXTURE0),$.targetColorTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),S.activeTexture.set(L.TEXTURE1),Z&&Z.rasterParticleState?(Z.rasterParticleState.targetColorTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),nt=Math.pow(2,Z.tileID.overscaledZ-V.tileID.overscaledZ),rt=[V.tileID.canonical.x*nt%1,V.tileID.canonical.y*nt%1]):$.targetColorTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE);const yt=U?Float32Array.from(g.transform.expandedFarZProjMatrix):g.transform.calculateProjMatrix(q,w),ut=g.transform,It=B_(ut),vt=s.cf(H.canonical),Ut=s.cg(vt.getCenter().lat);let ct,Tt,lt,pt,kt;U?(ct=Float32Array.from(s.aT(s.ci(H.canonical))),Tt=Float32Array.from(ut.globeMatrix),lt=Float32Array.from(s.ce(ut)),pt=[s.a5(ut.center.lng),s.ae(ut.center.lat)],kt=Float32Array.from(s.ch(H.canonical,vt,Ut,ut.worldSize/ut._pixelsPerMercatorPixel))):(ct=new Float32Array(16),Tt=new Float32Array(9),lt=new Float32Array(16),pt=[0,0],kt=new Float32Array(9));const qt=Ef(yt,ct,Tt,lt,kt,rt||[0,0],s.S(g.transform.zoom),pt,It,nt||1,at,250),Xt=g.isTileAffectedByFog(H),ae=g.getOrCreateProgram("rasterParticle",{defines:M,overrideFog:Xt});if(g.uploadCommonUniforms(S,ae,q),U){const he=new Ne(L.LEQUAL,Ne.ReadWrite,g.depthRangeFor3D),Ce=0,xe=g.globeSharedBuffers;if(xe){const[Ee,Xe,Fe]=xe.getGridBuffers(Ut,Ce!==0);ae.draw(g,L.TRIANGLES,he,Be.disabled,Je.alphaBlended,Le.backCCW,qt,A.id,Ee,Xe,Fe)}}else{const he=g.depthModeForSublayer(0,Ne.ReadOnly),Ce=B[H.overscaledZ],{tileBoundsBuffer:xe,tileBoundsIndexBuffer:Ee,tileBoundsSegments:Xe}=g.getTileBoundsBuffers(V);ae.draw(g,L.TRIANGLES,he,Ce,Je.alphaBlended,Le.disabled,qt,A.id,xe,Ee,Xe)}}g.resetStencilClippingMasks()}(d,i,n,_),d.style.map.triggerRepaint())},background:function(d,i,n,_){const c=n.paint.get("background-color"),f=n.paint.get("background-opacity"),g=n.paint.get("background-emissive-strength");if(f===0)return;const b=d.context,A=b.gl,E=d.transform,O=E.tileSize,S=n.paint.get("background-pattern");if(d.isPatternMissing(S,n.scope))return;const L=!S&&c.a===1&&f===1&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass!==L)return;const w=Be.disabled,U=d.depthModeForSublayer(0,L==="opaque"?Ne.ReadWrite:Ne.ReadOnly),B=d.colorModeForDrapableLayerRenderPass(g),k=S?"backgroundPattern":"background";let M,H=_;H||(M=d.getBackgroundTiles(),H=Object.values(M).map(q=>q.tileID)),S&&(b.activeTexture.set(A.TEXTURE0),d.imageManager.bind(d.context,n.scope));for(const q of H){const V=d.isTileAffectedByFog(q),$=d.getOrCreateProgram(k,{overrideFog:V}),z=q.toUnwrapped(),Z=_?q.projMatrix:d.transform.calculateProjMatrix(z);d.prepareDrawTile();const at=i?i.getTile(q):M?M[q.key]:new Cn(q,O,E.zoom,d),nt=S?Ml(Z,g,f,d,S,n.scope,{tileID:q,tileSize:O}):P_(Z,g,f,c);d.uploadCommonUniforms(b,$,z);const{tileBoundsBuffer:rt,tileBoundsIndexBuffer:yt,tileBoundsSegments:ut}=d.getTileBoundsBuffers(at);$.draw(d,A.TRIANGLES,U,w,B,Le.disabled,nt,n.id,rt,yt,ut)}},sky:function(d,i,n){const _=d._atmosphere?s.S(d.transform.zoom):1,c=n.paint.get("sky-opacity")*_;if(c===0)return;const f=d.context,g=n.paint.get("sky-type"),b=new Ne(f.gl.LEQUAL,Ne.ReadOnly,[0,1]),A=d.frameCounter/1e3%1;g==="atmosphere"?d.renderPass==="offscreen"?n.needsSkyboxCapture(d)&&(function(E,O,S,L){const w=E.context,U=w.gl;let B=O.skyboxFbo;if(!B){B=O.skyboxFbo=w.createFramebuffer(32,32,!0,null),O.skyboxGeometry=new Y_(w),O.skyboxTexture=w.gl.createTexture(),U.bindTexture(U.TEXTURE_CUBE_MAP,O.skyboxTexture),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_WRAP_S,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_WRAP_T,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MAG_FILTER,U.LINEAR);for(let q=0;q<6;++q)U.texImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+q,0,U.RGBA,32,32,0,U.RGBA,U.UNSIGNED_BYTE,null)}w.bindFramebuffer.set(B.framebuffer),w.viewport.set([0,0,32,32]);const k=O.getCenter(E,!0),M=E.getOrCreateProgram("skyboxCapture"),H=new Float64Array(16);s.a6.identity(H),s.a6.rotateY(H,H,.5*-Math.PI),cs(E,O,M,H,k,0),s.a6.identity(H),s.a6.rotateY(H,H,.5*Math.PI),cs(E,O,M,H,k,1),s.a6.identity(H),s.a6.rotateX(H,H,.5*-Math.PI),cs(E,O,M,H,k,2),s.a6.identity(H),s.a6.rotateX(H,H,.5*Math.PI),cs(E,O,M,H,k,3),s.a6.identity(H),cs(E,O,M,H,k,4),s.a6.identity(H),s.a6.rotateY(H,H,Math.PI),cs(E,O,M,H,k,5),w.viewport.set([0,0,E.width,E.height])}(d,n),n.markSkyboxValid(d)):d.renderPass==="sky"&&function(E,O,S,L,w){const U=E.context,B=U.gl,k=E.transform,M=E.getOrCreateProgram("skybox");U.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_CUBE_MAP,O.skyboxTexture);const H=((q,V,$,z,Z)=>({u_matrix:q,u_sun_direction:V,u_cubemap:0,u_opacity:z,u_temporal_offset:Z}))(k.skyboxMatrix,O.getCenter(E,!1),0,L,w);E.uploadCommonUniforms(U,M),M.draw(E,B.TRIANGLES,S,Be.disabled,E.colorModeForRenderPass(),Le.backCW,H,"skybox",O.skyboxGeometry.vertexBuffer,O.skyboxGeometry.indexBuffer,O.skyboxGeometry.segment)}(d,n,b,c,A):g==="gradient"&&d.renderPass==="sky"&&function(E,O,S,L,w){const U=E.context,B=U.gl,k=E.transform,M=E.getOrCreateProgram("skyboxGradient");O.skyboxGeometry||(O.skyboxGeometry=new Y_(U)),U.activeTexture.set(B.TEXTURE0);let H=O.colorRampTexture;H||(H=O.colorRampTexture=new s.T(U,O.colorRamp,B.RGBA)),H.bind(B.LINEAR,B.CLAMP_TO_EDGE);const q=((V,$,z,Z,at)=>({u_matrix:V,u_color_ramp:0,u_center_direction:$,u_radius:s.bj(z),u_opacity:Z,u_temporal_offset:at}))(k.skyboxMatrix,O.getCenter(E,!1),O.paint.get("sky-gradient-radius"),L,w);E.uploadCommonUniforms(U,M),M.draw(E,B.TRIANGLES,S,Be.disabled,E.colorModeForRenderPass(),Le.backCW,q,"skyboxGradient",O.skyboxGeometry.vertexBuffer,O.skyboxGeometry.indexBuffer,O.skyboxGeometry.segment)}(d,n,b,c,A)},debug:function(d,i,n,_,c,f){for(let g=0;g<n.length;g++)if(c){const E=new s.ax(_.r*.8,_.g*.8,_.b*.8,1);Un(d,i,n[g],_,-1,-1,f),Un(d,i,n[g],_,-1,1,f),Un(d,i,n[g],_,1,1,f),Un(d,i,n[g],_,1,-1,f),Un(d,i,n[g],E,0,0,f)}else Un(d,i,n[g],_,0,0,f)},custom:function(d,i,n,_){const c=d.context,f=n.implementation;if(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes("custom")||d.terrain&&(d.terrain.renderingToTexture||d.renderPass==="offscreen")&&n.isLayerDraped(i)){if(d.renderPass==="offscreen"){const g=f.prerender;if(g){if(d.setCustomLayerDefaults(),c.setColorMode(d.colorModeForRenderPass()),d.transform.projection.name==="globe"){const b=d.transform.pointMerc;g.call(f,c.gl,d.transform.customLayerMatrix(),d.transform.getProjection(),d.transform.globeToMercatorMatrix(),s.S(d.transform.zoom),[b.x,b.y],d.transform.pixelsPerMeterRatio)}else g.call(f,c.gl,d.transform.customLayerMatrix());c.setDirty(),d.setBaseState()}}else if(d.renderPass==="translucent"){if(d.terrain&&d.terrain.renderingToTexture){const b=f.renderToTile;if(b){const A=_[0].canonical,E=new s.L(A.x+_[0].wrap*(1<<A.z),A.y,A.z);c.setDepthMode(Ne.disabled),c.setStencilMode(Be.disabled),c.setColorMode(d.colorModeForRenderPass()),d.setCustomLayerDefaults(),b.call(f,c.gl,E),c.setDirty(),d.setBaseState()}return}d.setCustomLayerDefaults(),c.setColorMode(d.colorModeForRenderPass()),c.setStencilMode(Be.disabled);const g=f.renderingMode==="3d"?new Ne(d.context.gl.LEQUAL,Ne.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,Ne.ReadOnly);if(c.setDepthMode(g),d.transform.projection.name==="globe"){const b=d.transform.pointMerc;f.render(c.gl,d.transform.customLayerMatrix(),d.transform.getProjection(),d.transform.globeToMercatorMatrix(),s.S(d.transform.zoom),[b.x,b.y],d.transform.pixelsPerMeterRatio)}else f.render(c.gl,d.transform.customLayerMatrix());c.setDirty(),d.setBaseState(),c.bindFramebuffer.set(null)}}else s.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(d,i,n,_){if(d.renderPass==="opaque")return;const c=n.paint.get("model-opacity");if(c===0)return;const f=n.paint.get("model-cast-shadows");if(d.renderPass==="shadow"&&(!f||d.terrain&&c<.65&&n._transitionablePaint._values["model-opacity"].value.expression instanceof s.Z))return;const g=d.shadowRenderer,b=n.paint.get("model-receive-shadows");g&&(g.useNormalOffset=!0,b||(g.enabled=!1));const A=()=>{g&&(g.useNormalOffset=!0,b||(g.enabled=!0))},E=i.getSource();if(d.renderPass==="light-beam"&&E.type!=="batched-model")return;if(E.type==="vector"||E.type==="geojson")return function(M,H,q,V){const $=M.transform;if($.projection.name!=="mercator")return void s.w(`Drawing 3D models for ${$.projection.name} projection is not yet implemented`);const z=$.getFreeCameraOptions().position;if(!M.modelManager)return;const Z=M.modelManager;q.modelManager=Z;const at=M.shadowRenderer;if(!q._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const nt=q._unevaluatedLayout._values["model-id"],rt={...q.layout.get("model-id").parameters};for(const yt of V){const ut=H.getTile(yt).getBucket(q);if(!ut||ut.projection.name!==$.projection.name)continue;const It=Ac(yt,$);rt.zoom=It;const vt=nt.possiblyEvaluate(rt);if(G_(M,ut,yt),po.shadowUniformsInitialized=!1,po.useSingleShadowCascade=!!at&&at.getMaxCascadeForTile(yt.toUnwrapped())===0,M.renderPass==="shadow"&&at){if(M.currentShadowCascade===1&&ut.isInsideFirstShadowMapFrustum)continue;const Tt=$.calculatePosMatrix(yt.toUnwrapped(),$.worldSize);if(po.tileMatrix.set(Tt),po.shadowTileMatrix=Float32Array.from(at.calculateShadowPassMatrixFromMatrix(Tt)),po.aabb.min.fill(0),po.aabb.max[0]=po.aabb.max[1]=s.V,po.aabb.max[2]=0,Nf(ut,po,M,q.scope))continue}const Ut=1<<yt.canonical.z,ct=[((z.x-yt.wrap)*Ut-yt.canonical.x)*s.V,(z.y*Ut-yt.canonical.y)*s.V,z.z*Ut*s.V];for(let Tt in ut.instancesPerModel){const lt=ut.instancesPerModel[Tt];lt.features.length>0&&(Tt=vt.evaluate(lt.features[0].feature,{}));const pt=Z.getModel(Tt,q.scope);if(pt&&pt.uploaded)for(const kt of pt.nodes)V_(M,q,kt,lt,ct,yt,po)}}}(d,i,n,_),void A();if(!E.loaded())return;if(E.type==="batched-model")return function(M,H,q,V){q.resetLayerRenderingStats(M);const $=M.context,z=M.transform,Z=M.style.fog,at=M.shadowRenderer;if(z.projection.name!=="mercator")return void s.w(`Drawing 3D landmark models for ${z.projection.name} projection is not yet implemented`);const nt=M.transform.getFreeCameraOptions().position,rt=s.N.scale([],[nt.x,nt.y,nt.z],M.transform.worldSize);s.N.negate(rt,rt);const yt=s.a6.identity([]),ut=s.cR(z.center.lat,z.zoom),It=s.a6.fromScaling([],[1,1,1/ut]);s.a6.translate(yt,yt,rt);const vt=q.paint.get("model-opacity"),Ut=new Ne($.gl.LEQUAL,Ne.ReadWrite,M.depthRangeFor3D),ct=new Ne($.gl.LEQUAL,Ne.ReadOnly,M.depthRangeFor3D),Tt=new s.bS([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),lt=M.renderPass==="shadow",pt=lt&&at?at.getCurrentCascadeFrustum():z.getFrustum(z.scaleZoom(z.worldSize)),kt=q.getLayerRenderingStats(),qt=function(Xt,ae){for(const he of V){const Ce=H.getTile(he).getBucket(q);if(!Ce||!Ce.uploaded)continue;let xe=!1;at&&(xe=at.getMaxCascadeForTile(he.toUnwrapped())===0);const Ee=z.calculatePosMatrix(he.toUnwrapped(),z.worldSize),Xe=Ce.modelTraits;for(const Fe of Ce.getNodesInfo()){if(Fe.hiddenByReplacement||!Fe.node.meshes)continue;const ze=Fe.evaluatedScale,ke=Fe.node;let da=0;if(M.terrain&&ke.elevation&&(da=ke.elevation*M.terrain.exaggeration()),ze[0]<=1&&ze[1]<=1&&ze[2]<=1&&(()=>{const Ua=Fe.getLocalBounds();return Tt.min=[...Ua.min],Tt.max=[...Ua.max],Tt.min[2]+=da,Tt.max[2]+=da,s.N.transformMat4(Tt.min,Tt.min,Ee),s.N.transformMat4(Tt.max,Tt.max,Ee),Tt})().intersects(pt)===0)continue;const Wa=M.renderPass==="light-beam",ta=[...Ee];s.a6.translate(ta,ta,[(ke.anchor?ke.anchor[0]:0)*(ze[0]-1),(ke.anchor?ke.anchor[1]:0)*(ze[1]-1),da]),s.N.exactEquals(ze,s.cT)||s.a6.scale(ta,ta,ze),s.a6.multiply(ta,ta,ke.matrix);const $a=s.a6.multiply([],It,ta);s.a6.multiply($a,yt,$a);const ea=s.a6.invert([],$a);s.a6.transpose(ea,ea),s.a6.scale(ea,ea,js);const fa=s.a6.multiply([],z.expandedFarZProjMatrix,ta),aa=Xe&s.cV.HasMapboxMeshFeatures,ma=aa?0:Fe.evaluatedRMEA[0][2];for(let Ua=0;Ua<ke.meshes.length;++Ua){const ba=ke.meshes[Ua],Oi=Ua===ke.lightMeshIndex;if(Oi){if(!Wa&&!M.terrain&&M.shadowRenderer){M.currentLayer<M.firstLightBeamLayer&&(M.firstLightBeamLayer=M.currentLayer);continue}}else if(Wa)continue;const Bi={defines:[]},no=[];if(qa(Bi.defines,no,ba,M),aa||Bi.defines.push("DIFFUSE_SHADED"),xe&&Bi.defines.push("SHADOWS_SINGLE_CASCADE"),kt&&(lt?kt.numRenderedVerticesInShadowPass+=ba.vertexArray.length:kt.numRenderedVerticesInTransparentPass+=ba.vertexArray.length),lt){gt(ba,ta,M,q);continue}let $o=null;if(Z){const lo=ms(ta,M.transform);if($o=new Float32Array(lo),z.projection.name!=="globe"){const Zo=ba.aabb.min,Gn=ba.aabb.max,[ps,ir]=Z.getOpacityForBounds(lo,Zo[0],Zo[1],Gn[0],Gn[1]);Bi.overrideFog=ps>=Ea||ir>=Ea}}const so=ba.material;let Ci;so.occlusionTexture&&so.occlusionTexture.offsetScale&&(Ci=so.occlusionTexture.offsetScale,Bi.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!lt&&at&&(at.useNormalOffset=!!ba.normalBuffer);const yi=M.getOrCreateProgram("model",Bi);!lt&&at&&at.setupShadowsFromMatrix(ta,yi,at.useNormalOffset),M.uploadCommonUniforms($,yi,he.toUnwrapped(),$o);const Xi=so.pbrMetallicRoughness;Xi.metallicFactor=.9,Xi.roughnessFactor=.5;const $i=Yr(new Float32Array(fa),new Float32Array($a),new Float32Array(ea),M,vt,Xi.baseColorFactor,so.emissiveFactor,Xi.metallicFactor,Xi.roughnessFactor,so,ma,q,[0,0,0],Ci);yi.draw(M,$.gl.TRIANGLES,ae&&!Oi?Ut:ct,Be.disabled,Xt?Oi||vt<1||Fe.hasTranslucentParts?Je.alphaBlended:Je.unblended:Je.disabled,Le.backCCW,$i,q.id,ba.vertexBuffer,ba.indexBuffer,ba.segments,q.paint,M.transform.zoom,void 0,no)}}}};(function(Xt,ae,he,Ce){const xe=Xt.terrain?Xt.terrain.exaggeration():0,Ee=Xt.transform.zoom;for(const Xe of Ce){const Fe=ae.getTile(Xe).getBucket(he);Fe&&(Xt.conflationActive&&Fe.updateReplacement(Xe,Xt.replacementSource),Fe.evaluateScale(Xt,he),Xt.terrain&&xe>0&&Fe.elevationUpdate(Xt.terrain,xe,Xe,he.source),Fe.needsReEvaluation(Xt,Ee,he)&&Fe.evaluate(he))}})(M,H,q,V),vt===1?qt(!0,!0):(qt(!1,!0),qt(!0,!1))}(d,i,n,_),void A();const O=E.getModels(),S=[],L=d.transform.getFreeCameraOptions().position,w=s.N.scale([],[L.x,L.y,L.z],d.transform.worldSize);s.N.negate(w,w);const U=[],B=[];let k=0;for(const M of O){const H=n.paint.get("model-rotation").constantOr(null),q=n.paint.get("model-scale").constantOr(null),V=n.paint.get("model-translation").constantOr(null);M.computeModelMatrix(d,H,q,V,!0,!0,!1);const $=s.a6.identity([]),z=s.cR(M.position.lat,d.transform.zoom),Z=s.a6.fromScaling([],[1,1,1/z]);s.a6.translate($,$,w),S.push({zScaleMatrix:Z,negCameraPosMatrix:$});for(const at of M.nodes)zl(d.transform,at,M.matrix,d.transform.expandedFarZProjMatrix,k,U,B);k++}if(U.sort((M,H)=>H.depth-M.depth),d.renderPass!=="shadow"){if(c===1)for(const M of B)kl(M,d,n,S[M.modelIndex],Be.disabled,d.colorModeForRenderPass());else{for(const M of B)kl(M,d,n,S[M.modelIndex],Be.disabled,Je.disabled);for(const M of B)kl(M,d,n,S[M.modelIndex],d.stencilModeFor3D(),d.colorModeForRenderPass());d.resetStencilClippingMasks()}for(const M of U)kl(M,d,n,S[M.modelIndex],Be.disabled,d.colorModeForRenderPass());A()}else{for(const M of B)gt(M.mesh,M.nodeModelMatrix,d,n);for(const M of U)gt(M.mesh,M.nodeModelMatrix,d,n);A()}}},X_={model:function(d,i,n){const _=d.scope,c=i.getSource();if(!c.loaded())return;if(c.type==="vector"||c.type==="geojson")return void(n.modelManager&&n.modelManager.upload(n,_));if(c.type==="batched-model")return;const f=c.getModels();for(const g of f)g.upload(n.context)},raster:function(d,i,n){const _=i.getSource();if(!(_ instanceof Jt&&_.loaded()))return;const c=d.sourceLayer||_.rasterLayerIds&&_.rasterLayerIds[0];if(!c)return;const f=d.paint.get("raster-array-band")||_.getInitialBand(c);if(f==null)return;const g=i.getIds().map(b=>i.getTileByID(b));for(const b of g)b.updateNeeded(c,f)&&_.prepareTile(b,c,f)},"raster-particle":function(d,i,n){const _=i.getSource();if(!(_ instanceof Jt&&_.loaded()))return;const c=d.sourceLayer||_.rasterLayerIds&&_.rasterLayerIds[0];if(!c)return;const f=d.paint.get("raster-particle-array-band")||_.getInitialBand(c);if(f==null)return;const g=i.getIds().map(b=>i.getTileByID(b));for(const b of g)b.updateNeeded(c,f)&&_.prepareTile(b,c,f)}};class Ec{constructor(i,n,_,c){this.context=new Ku(i,n),this.transform=_,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=c,this._debugParams={showTerrainProxyTiles:!1},c.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=Mo.maxUnderzooming+Mo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new s.cX,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new d_(this),this._wireframeDebugCache=new vc,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(i,n){const _=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new vf(this,i));const c=this._terrain;this.transform.elevation=_?c:null,c.update(i,this.transform,n),this.transform.elevation&&!c.enabled&&(this.transform.elevation=null)}_updateFog(i){const n=i.fog;if(!n||this.transform.projection.name==="globe"||n.getOpacity(this.transform.pitch)<1||n.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,c]=n.getFovAdjustedRange(this.transform._fov);if(_>c)return void(this.transform.fogCullDistSq=null);const f=_+.78*(c-_);this.transform.fogCullDistSq=f*f}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(i,n){if(this.width=i*s.f.devicePixelRatio,this.height=n*s.f.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._mergedLayers[_].resize()}setup(){const i=this.context,n=new s.aN;n.emplaceBack(0,0),n.emplaceBack(s.V,0),n.emplaceBack(0,s.V),n.emplaceBack(s.V,s.V),this.tileExtentBuffer=i.createVertexBuffer(n,s.aP.members),this.tileExtentSegments=s.aB.simpleSegment(0,0,4,2);const _=new s.aN;_.emplaceBack(0,0),_.emplaceBack(s.V,0),_.emplaceBack(0,s.V),_.emplaceBack(s.V,s.V),this.debugBuffer=i.createVertexBuffer(_,s.aP.members),this.debugSegments=s.aB.simpleSegment(0,0,4,5);const c=new s.aN;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(-1,1),c.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(c,s.aP.members),this.viewportSegments=s.aB.simpleSegment(0,0,4,2);const f=new s.av;f.emplaceBack(0,0,0,0),f.emplaceBack(s.V,0,s.V,0),f.emplaceBack(0,s.V,0,s.V),f.emplaceBack(s.V,s.V,s.V,s.V),this.mercatorBoundsBuffer=i.createVertexBuffer(f,s.aR.members),this.mercatorBoundsSegments=s.aB.simpleSegment(0,0,4,2);const g=new s.aw;g.emplaceBack(0,1,2),g.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(g);const b=new s.aO;for(const E of[0,1,3,2,0])b.emplaceBack(E);this.debugIndexBuffer=i.createIndexBuffer(b),this.emptyTexture=new s.T(i,new s.h({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=s.a6.create();const A=this.context.gl;this.stencilClearMode=new Be({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,i.TRIANGLES,Ne.disabled,this.stencilClearMode,Je.disabled,Le.disabled,T_(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,n,_){if(!n||this.currentStencilSource===n.id||!i.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let b=!1;for(const A of _)if(this._tileClippingMaskIDs[A.key]===void 0){b=!0;break}if(!b)return}this.currentStencilSource=n.id;const c=this.context,f=c.gl;this.nextStencilID+_.length>256&&this.clearStencil(),c.setColorMode(Je.disabled),c.setDepthMode(Ne.disabled);const g=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const b of _){const A=n.getTile(b),E=this._tileClippingMaskIDs[b.key]=this.nextStencilID++,{tileBoundsBuffer:O,tileBoundsIndexBuffer:S,tileBoundsSegments:L}=this.getTileBoundsBuffers(A);g.draw(this,f.TRIANGLES,Ne.disabled,new Be({func:f.ALWAYS,mask:0},E,255,f.KEEP,f.KEEP,f.REPLACE),Je.disabled,Le.disabled,T_(b.projMatrix),"$clipping",O,S,L)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,n=this.context.gl;return new Be({func:n.NOTEQUAL,mask:255},i,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const n=this.context.gl;return new Be({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(i){const n=this.context.gl,_=i.sort((g,b)=>b.overscaledZ-g.overscaledZ),c=_[_.length-1].overscaledZ,f=_[0].overscaledZ-c+1;if(f>1){this.currentStencilSource=void 0,this.nextStencilID+f>256&&this.clearStencil();const g={};for(let b=0;b<f;b++)g[b+c]=new Be({func:n.GEQUAL,mask:255},b+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=f,[g,_]}return[{[c]:Be.disabled},_]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Je([i.CONSTANT_COLOR,i.ONE,i.CONSTANT_COLOR,i.ONE],new s.ax(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Je.unblended:Je.alphaBlended}colorModeForDrapableLayerRenderPass(i){const n=this.context.gl;return(()=>this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture)()&&this.renderPass==="translucent"?new Je([n.ONE,n.ONE_MINUS_SRC_ALPHA,n.CONSTANT_ALPHA,n.ONE_MINUS_SRC_ALPHA],new s.ax(0,0,0,i===void 0?0:i),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(i,n,_,c=!1){if(!this.opaquePassEnabledForLayer()&&!c)return Ne.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Ne(_||this.context.gl.LEQUAL,n,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,n){this._wireframeDebugCache.update(this.frameCounter),this.style=i,this.options=n;const _=this.style._mergedLayers,c=this.style.order,f=c.map(z=>_[z]),g=this.style._mergedSourceCaches;this.imageManager=i.imageManager,this.modelManager=i.modelManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.f.now()),this.imageManager.beginFrame();let b=0,A=!1;for(const z in g){const Z=g[z];Z.used&&(Z.prepare(this.context),Z.getSource().usedInConflation&&++b)}for(const z of f)z.isHidden(this.transform.zoom)||this.prepareLayer(z);const E={},O={},S={},L={},w={};for(const z in g){const Z=g[z];E[z]=Z.getVisibleCoordinates(),O[z]=E[z].slice().reverse(),S[z]=Z.getVisibleCoordinates(!0).reverse(),L[z]=Z.getShadowCasterCoordinates(),w[z]=Z.sortCoordinatesByDistance(E[z])}const U=z=>{const Z=this.style.getLayerSourceCache(z);return Z&&Z.used?Z.getSource():null};if(b){const z=[];for(const Z of f)this.layerUsedInConflation(Z,U(Z))&&z.push(Z);if(z&&z.length>1){const Z=[];for(const at of z){const nt=this.style.getLayerSourceCache(at);nt&&nt.used&&nt.getSource().usedInConflation&&Z.push({layer:at.fqid,cache:nt})}this.replacementSource.setSources(Z),A=!0}}A||this.replacementSource.clear(),this.conflationActive=A,this.minCutoffZoom=0,this.longestCutoffRange=0;for(const z of f){const Z=z.cutoffRange();if(this.longestCutoffRange=Math.max(Z,this.longestCutoffRange),Z>0){const at=U(z);at&&(this.minCutoffZoom=Math.max(at.minzoom,this.minCutoffZoom)),z.minzoom&&(this.minCutoffZoom=Math.max(z.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let z=0;z<f.length;z++)if(f[z].is3D()){this.opaquePassCutoff=z;break}const B=this.style&&this.style.fog;B?(this._fogVisible=B.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=B.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(S),this.opaquePassCutoff=0);const k=this._shadowRenderer;if(k){k.updateShadowParameters(this.transform,this.style.directionalLight);for(const z in g)for(const Z of E[z]){let at={min:0,max:0};this.terrain&&(at=this.terrain.getMinMaxForTile(Z)||at),k.addShadowReceiver(Z.toUnwrapped(),at.min,at.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.cY(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Se(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!s.cZ(this.context.gl))return;this.renderPass="offscreen";for(const z of f){const Z=i.getLayerSourceCache(z);if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const at=Z?O[Z.id]:void 0;(z.type==="custom"||z.type==="raster"||z.type==="raster-particle"||z.isSky()||at&&at.length)&&this.renderLayer(this,Z,z,at)}this.depthRangeFor3D=[0,1-(f.length+2)*this.numSublayers*this.depthEpsilon];const M=this.terrain;M&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&M.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,L)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const H=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),q=(()=>{if(n.showOverdrawInspector)return s.ax.black;if(this.style.fog&&this.transform.projection.supportsFog&&!H){const z=this.style.fog.properties.get("color").toArray01();return new s.ax(...z)}if(this.style.fog&&this.transform.projection.supportsFog&&H){const z=this.style.fog.properties.get("space-color").toArray01();return new s.ax(...z)}return s.ax.transparent})();if(this.context.clear({color:q,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&H&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){const z=f[this.currentLayer],Z=i.getLayerSourceCache(z);if(z.isSky())continue;const at=Z?(z.is3D()?w:O)[Z.id]:void 0;this._renderTileClippingMasks(z,Z,at),this.renderLayer(this,Z,z,at)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&H&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||s.S(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){const z=f[this.currentLayer],Z=i.getLayerSourceCache(z);z.isSky()&&this.renderLayer(this,Z,z,Z?O[Z.id]:void 0)}function V(z,Z){let at;return Z&&(at=(z.type==="symbol"?S:z.is3D()?w:O)[Z.id]),at}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<c.length;){const z=f[this.currentLayer];if(z.type==="raster"){const Z=i.getLayerSourceCache(z);this.renderLayer(this,Z,z,V(z,Z))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let $=0;for(k&&($=k.getShadowCastingLayerCount());this.currentLayer<c.length;){const z=f[this.currentLayer],Z=i.getLayerSourceCache(z);if(z.isSky())++this.currentLayer;else if(M&&this.style.isLayerDraped(z)){if(z.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=M.renderBatch(this.currentLayer)}else{if(this._renderTileClippingMasks(z,Z,Z?E[Z.id]:void 0),this.renderLayer(this,Z,z,V(z,Z)),!M&&k&&$>0&&z.hasShadowPass()&&--$==0&&(k.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const at=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=at;this.currentLayer++){const nt=f[this.currentLayer];if(!nt.hasLightBeamPass())continue;const rt=i.getLayerSourceCache(nt);this.renderLayer(this,rt,nt,rt?O[rt.id]:void 0)}this.currentLayer=at,this.renderPass="translucent"}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let z=null;f.forEach(Z=>{const at=i.getLayerSourceCache(Z);at&&!Z.isHidden(this.transform.zoom)&&at.getVisibleCoordinates().length&&(!z||z.getSource().maxzoom<at.getSource().maxzoom)&&(z=at)}),z&&this.options.showTileBoundaries&&Yl.debug(this,z,z.getVisibleCoordinates(),s.ax.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Yl.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new s.ax(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(z){const Z=z.transform.padding;z_(z,z.transform.height-(Z.top||0),3,io),z_(z,Z.bottom||0,3,Bn),fo(z,Z.left||0,3,xc),fo(z,z.transform.width-(Z.right||0),3,U_);const at=z.transform.centerPoint;(function(nt,rt,yt,ut){ja(nt,rt-1,yt-10,2,20,ut),ja(nt,rt-10,yt-1,20,2,ut)})(z,at.x,z.transform.height-at.y,k_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),A||(this.conflationActive=!1)}prepareLayer(i){this.gpuTimingStart(i);const{unsupportedLayers:n}=this.transform.projection,_=!n||!n.includes(i.type);if(X_[i.type]&&(_||this.terrain&&i.type==="custom")){const c=this.style.getLayerSourceCache(i);X_[i.type](i,c,this)}this.gpuTimingEnd()}renderLayer(i,n,_,c){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||_.type==="model"||_.type==="raster"||_.type==="raster-particle"||c&&c.length)&&(this.id=_.id,this.gpuTimingStart(_),(!i.transform.projection.unsupportedLayers||!i.transform.projection.unsupportedLayers.includes(_.type)||i.terrain&&_.type==="custom")&&Yl[_.type](i,n,_,c,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery,_=this.context.gl;let c=this.gpuTimers[i.id];c||(c=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:_.createQuery()}),c.calls++,_.beginQuery(n.TIME_ELAPSED_EXT,c.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,n=this.context.gl,_=n.createQuery();this.deferredRenderGpuTimeQueries.push(_),n.beginQuery(i.TIME_ELAPSED_EXT,_)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const n={};for(const _ in i){const c=i[_],f=this.context.extTimerQuery,g=f.getQueryParameter(c.query,this.context.gl.QUERY_RESULT)/1e6;f.deleteQueryEXT(c.query),n[_]=g}return n}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const n=this.context.extTimerQuery,_=this.context.gl;let c=0;for(const f of i)c+=n.getQueryParameter(f,_.QUERY_RESULT)/1e6,n.deleteQueryEXT(f);return c}translatePosMatrix(i,n,_,c,f){if(!_[0]&&!_[1])return i;const g=f?c==="map"?this.transform.angle:0:c==="viewport"?-this.transform.angle:0;if(g){const E=Math.sin(g),O=Math.cos(g);_=[_[0]*O-_[1]*E,_[0]*E+_[1]*O]}const b=[f?_[0]:s.a3(n,_[0],this.transform.zoom),f?_[1]:s.a3(n,_[1],this.transform.zoom),0],A=new Float32Array(16);return s.a6.translate(A,i,b),A}saveTileTexture(i){const n=i.size[0],_=this._tileTextures[n];_?_.push(i):this._tileTextures[n]=[i]}getTileTexture(i){const n=this._tileTextures[i];return n&&n.length>0?n.pop():null}isPatternMissing(i,n){return i===null||i!==void 0&&!this.imageManager.getPattern(i.toString(),n)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(i,n,_){const c=_===void 0?this.terrain&&this.terrain.renderingToTexture:_,f=this.terrain&&this.terrain.exaggeration()===0,g=[];return this.style&&this.style.enable3dLights()&&(i==="globeRaster"||i==="terrainRaster"?(g.push("LIGHTING_3D_MODE"),g.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):c||g.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||g.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?g.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):g.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(g.push("TERRAIN"),this.linearFloatFilteringSupported()&&g.push("TERRAIN_DEM_FLOAT_FORMAT"),f&&g.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&g.push("GLOBE"),!this._fogVisible||c||n!==void 0&&!n||g.push("FOG","FOG_DITHERING"),c&&g.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&g.push("OVERDRAW_INSPECTOR"),g}getOrCreateProgram(i,n){this.cache=this.cache||{};const _=n&&n.defines||[],c=n&&n.config,f=n&&n.transformFeedback,g=this.currentGlobalDefines(i,n&&n.overrideFog,n&&n.overrideRtt).concat(_),b=E_.cacheKey(p_[i],i,g,c);return this.cache[b]||(this.cache[b]=new E_(this.context,i,p_[i],c,Of[i],g,f)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(i,n){if(this.style.enable3dLights()){const _=this.style.directionalLight,c=this.style.ambientLight;if(_&&c){const f=((g,b)=>{const A=g.properties.get("direction"),E=g.properties.get("color").toArray01(),O=g.properties.get("intensity"),S=b.properties.get("color").toArray01(),L=b.properties.get("intensity"),w=[A.x,A.y,A.z],U=s.cn(S,L),B=s.cn(E,O);return{u_lighting_ambient_color:U,u_lighting_directional_dir:w,u_lighting_directional_color:B,u_ground_radiance:A_(w,B,U)}})(_,c);n.setLightsUniformValues(i,f)}}}uploadCommonUniforms(i,n,_,c,f){if(this.uploadCommonLightUniforms(i,n),this.terrain&&this.terrain.renderingToTexture)return;const g=this.style.fog;if(g){const b=g.getOpacity(this.transform.pitch),A=((E,O,S,L,w,U,B,k,M,H,q,V)=>{const $=E.transform,z=O.properties.get("color").toArray01();z[3]=L;const Z=E.frameCounter/1e3%1,[at,nt]=O.properties.get("vertical-range");return{u_fog_matrix:S?$.calculateFogTileMatrix(S):V||E.identityMat,u_fog_range:O.getFovAdjustedRange($._fov),u_fog_color:z,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(at,nt),nt],u_fog_temporal_offset:Z,u_frustum_tl:w,u_frustum_tr:U,u_frustum_br:B,u_frustum_bl:k,u_globe_pos:M,u_globe_radius:H,u_viewport:q,u_globe_transition:s.S($.zoom),u_is_globe:+($.projection.name==="globe")}})(this,g,_,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.f.devicePixelRatio,this.transform.height*s.f.devicePixelRatio],c);n.setFogUniformValues(i,A)}f&&n.setCutoffUniformValues(i,f.uniformValues)}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){const i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){const i=this.context.gl,n=i.createTexture();return i.bindTexture(i.TEXTURE_2D,n),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),n}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,n=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const c of _)n[c.key]=i[c.key]||new Cn(c,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(i,n){return!(!i.is3D()||i.minzoom&&i.minzoom>this.transform.zoom||i.sourceLayer!=="building"&&(!n||n.type!=="batched-model"))}isTileAffectedByFog(i){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let n=this._cachedTileFogOpacities[i.key];return n||(this._cachedTileFogOpacities[i.key]=n=this.style.fog.getOpacityForTile(i)),n[0]>=Ea||n[1]>=Ea}}function Gl(d,i){let n=!1,_=null;const c=()=>{_=null,n&&(d(),_=setTimeout(c,i),n=!1)};return()=>(n=!0,_||c(),_)}class Xr{constructor(i){this._hashName=i&&encodeURIComponent(i),s.aY(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Gl(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const n=K_(i);if(this._hashName){const _=this._hashName;let c=!1;const f=location.hash.slice(1).split("&").map(g=>{const b=g.split("=")[0];return b===_?(c=!0,`${b}=${n}`):g}).filter(g=>g);return c||f.push(`${_}=${n}`),`#${f.join("&")}`}return`#${n}`}_getCurrentHash(){const i=location.hash.replace("#","");if(this._hashName){let n;return i.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(n=_)}),(n&&n[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const n=this._getCurrentHash();if(n.length>=3&&!n.some(_=>isNaN(_))){const _=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(n[3]||0):i.getBearing();return i.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:_,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function K_(d,i){const n=d.getCenter(),_=Math.round(100*d.getZoom())/100,c=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),f=Math.pow(10,c),g=Math.round(n.lng*f)/f,b=Math.round(n.lat*f)/f,A=d.getBearing(),E=d.getPitch();let O=i?`/${g}/${b}/${_}`:`${_}/${b}/${g}`;return(A||E)&&(O+="/"+Math.round(10*A)/10),E&&(O+=`/${Math.round(E)}`),O}const Vl={linearity:.3,easing:s.c_(0,0,.3,1)},oo=s.e({deceleration:2500,maxSpeed:1400},Vl),Pf=s.e({deceleration:20,maxSpeed:1400},Vl),Kr=s.e({deceleration:1e3,maxSpeed:360},Vl),Ya=s.e({deceleration:1e3,maxSpeed:90},Vl);class Ia{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.f.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,n=s.f.now();for(;i.length>0&&n-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const n={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:f}of this._inertiaBuffer)n.zoom+=f.zoomDelta||0,n.bearing+=f.bearingDelta||0,n.pitch+=f.pitchDelta||0,f.panDelta&&n.pan._add(f.panDelta),f.around&&(n.around=f.around),f.pinchAround&&(n.pinchAround=f.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,c={};if(n.pan.mag()){const f=ko(n.pan.mag(),_,s.e({},oo,i||{}));c.offset=n.pan.mult(f.amount/n.pan.mag()),c.center=this._map.transform.center,Xl(c,f)}if(n.zoom){const f=ko(n.zoom,_,Pf);c.zoom=this._map.transform.zoom+f.amount,Xl(c,f)}if(n.bearing){const f=ko(n.bearing,_,Kr);c.bearing=this._map.transform.bearing+s.aa(f.amount,-179,179),Xl(c,f)}if(n.pitch){const f=ko(n.pitch,_,Ya);c.pitch=this._map.transform.pitch+f.amount,Xl(c,f)}if(c.zoom||c.bearing){const f=n.pinchAround===void 0?n.around:n.pinchAround;c.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),c.noMoveStart=!0,c}}function Xl(d,i){(!d.duration||d.duration<i.duration)&&(d.duration=i.duration,d.easing=i.easing)}function ko(d,i,n){const{maxSpeed:_,linearity:c,deceleration:f}=n,g=s.aa(d*c/(i/1e3),-_,_),b=Math.abs(g)/(f*c);return{easing:n.easing,duration:1e3*b,amount:g*(b/2)}}class qi extends s.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,n,_,c={}){const f=ia(n.getCanvasContainer(),_),g=n.unproject(f);super(i,s.e({point:f,lngLat:g,originalEvent:_},c)),this._defaultPrevented=!1,this.target=n}}class dn extends s.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,n,_){const c=i==="touchend"?_.changedTouches:_.touches,f=Oa(n.getCanvasContainer(),c),g=f.map(A=>n.unproject(A)),b=f.reduce((A,E,O,S)=>A.add(E.div(S.length)),new s.P(0,0));super(i,{points:f,point:b,lngLats:g,lngLat:n.unproject(b),originalEvent:_}),this._defaultPrevented=!1}}class j_ extends s.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,n,_){super(i,{originalEvent:_}),this._defaultPrevented=!1}}class q_{constructor(i,n){this._map=i,this._clickTolerance=n.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new j_(i.type,this._map,i))}mousedown(i,n){return this._mousedownPos=n,this._firePreventable(new qi(i.type,this._map,i))}mouseup(i){this._map.fire(new qi(i.type,this._map,i))}preclick(i){const n=s.e({},i);n.type="preclick",this._map.fire(new qi(n.type,this._map,n))}click(i,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||(this.preclick(i),this._map.fire(new qi(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new qi(i.type,this._map,i))}mouseover(i){this._map.fire(new qi(i.type,this._map,i))}mouseout(i){this._map.fire(new qi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new dn(i.type,this._map,i))}touchmove(i){this._map.fire(new dn(i.type,this._map,i))}touchend(i){this._map.fire(new dn(i.type,this._map,i))}touchcancel(i){this._map.fire(new dn(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kn{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new qi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new qi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zn{constructor(i,n){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,n){this.isEnabled()&&i.shiftKey&&i.button===0&&(ue(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(i,n){if(!this._active)return;const _=n,c=this._startPos,f=this._lastPos;if(!c||!f||f.equals(_)||!this._box&&_.dist(c)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=Rt("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const g=Math.min(c.x,_.x),b=Math.max(c.x,_.x),A=Math.min(c.y,_.y),E=Math.max(c.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${g}px,${A}px)`,this._box.style.width=b-g+"px",this._box.style.height=E-A+"px")})}mouseupWindow(i,n){if(!this._active)return;const _=this._startPos,c=n;if(_&&i.button===0){if(this.reset(),Fa(),_.x!==c.x||_.y!==c.y)return this._map.fire(new s.b("boxzoomend",{originalEvent:i})),{cameraAnimation:f=>f.fitScreenCoordinates(_,c,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),be(),delete this._startPos,delete this._lastPos}_fireEvent(i,n){return this._map.fire(new s.b(i,{originalEvent:n}))}}function qs(d,i){const n={};for(let _=0;_<d.length;_++)n[d[_].identifier]=i[_];return n}class jr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,n,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),_.length===this.numTouches&&(this.centroid=function(c){const f=new s.P(0,0);for(const g of c)f._add(g);return f.div(c.length)}(n),this.touches=qs(_,n)))}touchmove(i,n,_){if(this.aborted||!this.centroid)return;const c=qs(_,n);for(const f in this.touches){const g=c[f];(!g||g.dist(this.touches[f])>30)&&(this.aborted=!0)}}touchend(i,n,_){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const c=!this.aborted&&this.centroid;if(this.reset(),c)return c}}}class Kl{constructor(i){this.singleTap=new jr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,n,_){this.singleTap.touchstart(i,n,_)}touchmove(i,n,_){this.singleTap.touchmove(i,n,_)}touchend(i,n,_){const c=this.singleTap.touchend(i,n,_);if(c){const f=i.timeStamp-this.lastTime<500,g=!this.lastTap||this.lastTap.dist(c)<30;if(f&&g||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}}}class $_{constructor(){this._zoomIn=new Kl({numTouches:1,numTaps:2}),this._zoomOut=new Kl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,n,_){this._zoomIn.touchstart(i,n,_),this._zoomOut.touchstart(i,n,_)}touchmove(i,n,_){this._zoomIn.touchmove(i,n,_),this._zoomOut.touchmove(i,n,_)}touchend(i,n,_){const c=this._zoomIn.touchend(i,n,_),f=this._zoomOut.touchend(i,n,_);return c?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:g=>g.easeTo({duration:300,zoom:g.getZoom()+1,around:g.unproject(c)},{originalEvent:i})}):f?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:g=>g.easeTo({duration:300,zoom:g.getZoom()-1,around:g.unproject(f)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Z_={0:1,2:2};class qo{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,n){return!1}_move(i,n){return{}}mousedown(i,n){if(this._lastPoint)return;const _=Ai(i);this._correctButton(i,_)&&(this._lastPoint=n,this._eventButton=_)}mousemoveWindow(i,n){const _=this._lastPoint;if(_){if(i.preventDefault(),this._eventButton!=null&&function(c,f){const g=Z_[f];return c.buttons===void 0||(c.buttons&g)!==g}(i,this._eventButton))this.reset();else if(this._moved||!(n.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=n,this._move(_,n)}}mouseupWindow(i){this._lastPoint&&Ai(i)===this._eventButton&&(this._moved&&Fa(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class J_ extends qo{mousedown(i,n){super.mousedown(i,n),this._lastPoint&&(this._active=!0)}_correctButton(i,n){return n===0&&!i.ctrlKey}_move(i,n){return{around:n,panDelta:n.sub(i)}}}class jl extends qo{_correctButton(i,n){return n===0&&i.ctrlKey||n===2}_move(i,n){const _=.8*(n.x-i.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(i){i.preventDefault()}}class qr extends qo{_correctButton(i,n){return n===0&&i.ctrlKey||n===2}_move(i,n){const _=-.5*(n.y-i.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(i){i.preventDefault()}}class Q_{constructor(i,n){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),s.aY(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}touchstart(i,n,_){return this._calculateTransform(i,n,_)}touchmove(i,n,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!s.c$())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,n,_)}}touchend(i,n,_){this._calculateTransform(i,n,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,n,_){_.length>0&&(this._active=!0);const c=qs(_,n),f=new s.P(0,0),g=new s.P(0,0);let b=0;for(const E in c){const O=c[E],S=this._touches[E];S&&(f._add(O),g._add(O.sub(S)),b++,c[E]=O)}if(this._touches=c,b<this._minTouches||!g.mag())return;const A=g.div(b);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:f.div(b),panDelta:A}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Rt("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Ii{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,n,_){return{}}touchstart(i,n,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([n[0],n[1]]))}touchmove(i,n,_){const c=this._firstTwoTouches;if(!c)return;i.preventDefault();const[f,g]=c,b=$s(_,n,f),A=$s(_,n,g);if(!b||!A)return;const E=this._aroundCenter?null:b.add(A).div(2);return this._move([b,A],E,i)}touchend(i,n,_){if(!this._firstTwoTouches)return;const[c,f]=this._firstTwoTouches,g=$s(_,n,c),b=$s(_,n,f);g&&b||(this._active&&Fa(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function $s(d,i,n){for(let _=0;_<d.length;_++)if(d[_].identifier===n)return i[_]}function $r(d,i){return Math.log(d/i)/Math.LN2}class ql extends Ii{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,n){const _=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs($r(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$r(this._distance,_),pinchAround:n}}}function Hn(d,i){return 180*d.angleWith(i)/Math.PI}class tu extends Ii{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,n){const _=this._vector;if(this._vector=i[0].sub(i[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Hn(this._vector,_),pinchAround:n}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const n=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const c=Hn(i,_);return Math.abs(c)<n}}function $l(d){return Math.abs(d.y)>Math.abs(d.x)}class eu extends Ii{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,$l(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,n,_){const c=this._lastPoints;if(!c)return;const f=i[0].sub(c[0]),g=i[1].sub(c[1]);return this._map._cooperativeGestures&&!s.c$()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(f,g,_.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(f.y+g.y)/2*-.5})}gestureBeginsVertically(i,n,_){if(this._valid!==void 0)return this._valid;const c=i.mag()>=2,f=n.mag()>=2;if(!c&&!f)return;if(!c||!f)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const g=i.y>0==n.y>0;return $l(i)&&$l(n)&&g}}const fs={panStep:100,bearingStep:15,pitchStep:10};class Zl{constructor(){const i=fs;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let n=0,_=0,c=0,f=0,g=0;switch(i.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:i.shiftKey?_=-1:(i.preventDefault(),f=-1);break;case 39:i.shiftKey?_=1:(i.preventDefault(),f=1);break;case 38:i.shiftKey?c=1:(i.preventDefault(),g=-1);break;case 40:i.shiftKey?c=-1:(i.preventDefault(),g=1);break;default:return}return this._rotationDisabled&&(_=0,c=0),{cameraAnimation:b=>{const A=b.getZoom();b.easeTo({duration:300,easeId:"keyboardHandler",easing:au,zoom:n?Math.round(A)+n*(i.shiftKey?2:1):A,bearing:b.getBearing()+_*this._bearingStep,pitch:b.getPitch()+c*this._pitchStep,offset:[-f*this._panStep,-g*this._panStep],center:b.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function au(d){return d*(2-d)}const Jl=4.000244140625,iu=1/450;class Ic{constructor(i,n){this._map=i,this._el=i.getCanvasContainer(),this._handler=n,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=iu,s.aY(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||s.c$()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const _=s.f.now(),c=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,n!==0&&n%Jl==0?this._type="wheel":n!==0&&Math.abs(n)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(c*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),i.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=i,this._delta-=n,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=ia(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:n,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Jl?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&O!==0&&(O=1/O);const S=n(),L=Math.pow(2,S),w=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):L;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(w*O))),this._type==="wheel"&&(this._startZoom=S,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:n(),c=this._startZoom,f=this._easing;let g,b=!1;if(this._type==="wheel"&&c&&f){const E=Math.min((s.f.now()-this._lastWheelEventTime)/200,1),O=f(E);g=s.U(c,_,O),E<1?this._frameId||(this._frameId=!0):b=!0}else g=_,b=!0;this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let A=g-n();return A*this._lastDelta<0&&(A=0),{noInertia:!0,needsRenderFrame:!b,zoomDelta:A,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let n=s.d0;if(this._prevEase){const _=this._prevEase,c=(s.f.now()-_.start)/_.duration,f=_.easing(c+.01)-_.easing(c),g=.27/Math.sqrt(f*f+1e-4)*.01,b=Math.sqrt(.0729-g*g);n=s.c_(g,b,.25,1)}return this._prevEase={start:s.f.now(),duration:i,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Rt("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Oc{constructor(i,n){this._clickZoom=i,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Cc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,n){return i.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(i.shiftKey?-1:1),around:_.unproject(n)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sc{constructor(){this._tap=new Kl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,n,_){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=n[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(i,n,_))}touchmove(i,n,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const c=n[0],f=c.y-this._swipePoint.y;return this._swipePoint=c,i.preventDefault(),this._active=!0,{zoomDelta:f/128}}}else this._tap.touchmove(i,n,_)}touchend(i,n,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(i,n,_)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rc{constructor(i,n,_){this._el=i,this._mousePan=n,this._touchPan=_}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Nc{constructor(i,n,_){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=n,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Lc{constructor(i,n,_,c){this._el=i,this._touchZoom=n,this._touchRotate=_,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ql=d=>d.zoom||d.drag||d.pitch||d.rotate;class Pc extends s.b{}class wc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,n){const _=s.N.sub([],n,i);this.radius=s.N.length(_[2]<0?s.N.div([],_,this.constants):[_[0],_[1],0])}projectRay(i){s.N.div(i,i,this.constants),s.N.normalize(i,i),s.N.mul(i,i,this.constants);const n=s.N.scale([],i,this.radius);if(n[2]>0){const _=s.N.scale([],[0,0,1],s.N.dot(n,[0,0,1])),c=s.N.scale([],s.N.normalize([],[n[0],n[1],0]),this.radius),f=s.N.add([],n,s.N.scale([],s.N.sub([],s.N.add([],c,_),n),2));n[0]=f[0],n[1]=f[1]}return n}}function tr(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}class wf{constructor(i,n){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ia(i),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new wc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),s.aY(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[c,f,g]of this._listeners){const b=c===document?this.handleWindowEvent:this.handleEvent;c.addEventListener(f,b,g)}}destroy(){for(const[i,n,_]of this._listeners){const c=i===document?this.handleWindowEvent:this.handleEvent;i.removeEventListener(n,c,_)}}_addDefaultHandlers(i){const n=this._map,_=n.getCanvasContainer();this._add("mapEvent",new q_(n,i));const c=n.boxZoom=new zn(n,i);this._add("boxZoom",c);const f=new $_,g=new Cc;n.doubleClickZoom=new Oc(g,f),this._add("tapZoom",f),this._add("clickZoom",g);const b=new Sc;this._add("tapDragZoom",b);const A=n.touchPitch=new eu(n);this._add("touchPitch",A);const E=new jl(i),O=new qr(i);n.dragRotate=new Nc(i,E,O),this._add("mouseRotate",E,["mousePitch"]),this._add("mousePitch",O,["mouseRotate"]);const S=new J_(i),L=new Q_(n,i);n.dragPan=new Rc(_,S,L),this._add("mousePan",S),this._add("touchPan",L,["touchZoom","touchRotate"]);const w=new tu,U=new ql;n.touchZoomRotate=new Lc(_,U,w,b),this._add("touchRotate",w,["touchPan","touchZoom"]),this._add("touchZoom",U,["touchPan","touchRotate"]),this._add("blockableMapEvent",new kn(n));const B=n.scrollZoom=new Ic(n,this);this._add("scrollZoom",B,["mousePan"]);const k=n.keyboard=new Zl;this._add("keyboard",k);for(const M of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[M]&&n[M].enable(i[M])}_add(i,n,_){this._handlers.push({handlerName:i,handler:n,allowed:_}),this._handlersById[i]=n}stop(i){if(!this._updatingCamera){for(const{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ql(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,n,_){for(const c in i)if(c!==_&&(!n||n.indexOf(c)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const n=[];for(const _ of i)this._el.contains(_.target)&&n.push(_);return n}handleEvent(i,n){this._updatingCamera=!0;const _=i.type==="renderFrame",c=_?void 0:i,f={needsRenderFrame:!1},g={},b={},A=i.touches?this._getMapTouches(i.touches):void 0,E=A?Oa(this._el,A):_?void 0:ia(this._el,i);for(const{handlerName:L,handler:w,allowed:U}of this._handlers){if(!w.isEnabled())continue;let B;this._blockedByActive(b,U,L)?w.reset():w[n||i.type]&&(B=w[n||i.type](i,E,A),this.mergeHandlerResult(f,g,B,L,c),B&&B.needsRenderFrame&&this._triggerRenderFrame()),(B||w.isActive())&&(b[L]=w)}const O={};for(const L in this._previousActiveHandlers)b[L]||(O[L]=c);this._previousActiveHandlers=b,(Object.keys(O).length||tr(f))&&(this._changes.push([f,g,O]),this._triggerRenderFrame()),(Object.keys(b).length||tr(f))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:S}=f;S&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],S(this._map))}mergeHandlerResult(i,n,_,c,f){if(!_)return;s.e(i,_);const g={handlerName:c,originalEvent:_.originalEvent||f};_.zoomDelta!==void 0&&(n.zoom=g),_.panDelta!==void 0&&(n.drag=g),_.pitchDelta!==void 0&&(n.pitch=g),_.bearingDelta!==void 0&&(n.rotate=g)}_applyChanges(){const i={},n={},_={};for(const[c,f,g]of this._changes)c.panDelta&&(i.panDelta=(i.panDelta||new s.P(0,0))._add(c.panDelta)),c.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+c.zoomDelta),c.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+c.bearingDelta),c.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+c.pitchDelta),c.around!==void 0&&(i.around=c.around),c.aroundCoord!==void 0&&(i.aroundCoord=c.aroundCoord),c.pinchAround!==void 0&&(i.pinchAround=c.pinchAround),c.noInertia&&(i.noInertia=c.noInertia),s.e(n,f),s.e(_,g);this._updateMapTransform(i,n,_),this._changes=[]}_updateMapTransform(i,n,_){const c=this._map,f=c.transform,g=H=>[H.x,H.y,H.z];if((H=>{const q=this._eventsInProgress.drag;return q&&!this._handlersById[q.handlerName].isActive()})()&&!tr(i)){const H=f.zoom;f.cameraElevationReference="sea",this._originalZoom!=null&&f._orthographicProjectionAtLowPitch&&f.projection.name!=="globe"&&f.pitch===0?(f.cameraElevationReference="ground",f.zoom=this._originalZoom):(f.recenterOnTerrain(),f.cameraElevationReference="ground"),H!==f.zoom&&this._map._update(!0)}if(f._isCameraConstrained&&c._stop(!0),!tr(i))return void this._fireEvents(n,_,!0);let{panDelta:b,zoomDelta:A,bearingDelta:E,pitchDelta:O,around:S,aroundCoord:L,pinchAround:w}=i;f._isCameraConstrained&&(A>0&&(A=0),f._isCameraConstrained=!1),w!==void 0&&(S=w),(A||(H=>n[H]&&!this._eventsInProgress[H])("drag"))&&S&&(this._dragOrigin=g(f.pointCoordinate3D(S)),this._originalZoom=f.zoom,this._trackingEllipsoid.setup(f._camera.position,this._dragOrigin)),f.cameraElevationReference="sea",c._stop(!0),S=S||c.transform.centerPoint,E&&(f.bearing+=E),O&&(f.pitch+=O),f._updateCameraState();const U=[0,0,0];if(b)if(f.projection.name==="mercator"){const H=this._trackingEllipsoid.projectRay(f.screenPointToMercatorRay(S).dir),q=this._trackingEllipsoid.projectRay(f.screenPointToMercatorRay(S.sub(b)).dir);U[0]=q[0]-H[0],U[1]=q[1]-H[1]}else{const H=f.pointCoordinate(S);if(f.projection.name==="globe"){b=b.rotate(-f.angle);const q=f._pixelsPerMercatorPixel/f.worldSize;U[0]=-b.x*s.d1(s.au(H.y))*q,U[1]=-b.y*s.d1(f.center.lat)*q}else{const q=f.pointCoordinate(S.sub(b));H&&q&&(U[0]=q.x-H.x,U[1]=q.y-H.y)}}const B=f.zoom,k=[0,0,0];if(A){const H=g(L||f.pointCoordinate3D(S)),q={dir:s.N.normalize([],s.N.sub([],H,f._camera.position))};if(q.dir[2]<0){const V=f.zoomDeltaToMovement(H,A);s.N.scale(k,q.dir,V)}}const M=s.N.add(U,U,k);f._translateCameraConstrained(M),A&&Math.abs(f.zoom-B)>1e-4&&f.recenterOnTerrain(),f.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(n,_,!0)}_fireEvents(i,n,_){const c=Ql(this._eventsInProgress),f=Ql(i),g={};for(const O in i){const{originalEvent:S}=i[O];this._eventsInProgress[O]||(g[`${O}start`]=S),this._eventsInProgress[O]=i[O]}!c&&f&&this._fireEvent("movestart",f.originalEvent);for(const O in g)this._fireEvent(O,g[O]);f&&this._fireEvent("move",f.originalEvent);for(const O in i){const{originalEvent:S}=i[O];this._fireEvent(O,S)}const b={};let A;for(const O in this._eventsInProgress){const{handlerName:S,originalEvent:L}=this._eventsInProgress[O];this._handlersById[S].isActive()||(delete this._eventsInProgress[O],A=n[S]||L,b[`${O}end`]=A)}for(const O in b)this._fireEvent(O,b[O]);const E=Ql(this._eventsInProgress);if(_&&(c||f)&&!E){this._updatingCamera=!0;const O=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),S=L=>L!==0&&-this._bearingSnap<L&&L<this._bearingSnap;O?(S(O.bearing||this._map.getBearing())&&(O.bearing=0),this._map.easeTo(O,{originalEvent:A})):(this._map.fire(new s.b("moveend",{originalEvent:A})),S(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,n){this._map.fire(new s.b(i,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new Pc("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Wc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ai extends s.E{constructor(i,n){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=n.respectPrefersReducedMotion!==!1,s.aY(["_renderFrameCallback"],this)}getCenter(){return new s.bn(this.transform.center.lng,this.transform.center.lat)}setCenter(i,n){return this.jumpTo({center:i},n)}panBy(i,n,_){return i=s.P.convert(i).mult(-1),this.panTo(this.transform.center,s.e({offset:i},n),_)}panTo(i,n,_){return this.easeTo(s.e({center:i},n),_)}getZoom(){return this.transform.zoom}setZoom(i,n){return this.jumpTo({zoom:i},n),this}zoomTo(i,n,_){return this.easeTo(s.e({zoom:i},n),_)}zoomIn(i,n){return this.zoomTo(this.getZoom()+1,i,n),this}zoomOut(i,n){return this.zoomTo(this.getZoom()-1,i,n),this}getBearing(){return this.transform.bearing}setBearing(i,n){return this.jumpTo({bearing:i},n),this}getPadding(){return this.transform.padding}setPadding(i,n){return this.jumpTo({padding:i},n),this}rotateTo(i,n,_){return this.easeTo(s.e({bearing:i},n),_)}resetNorth(i,n){return this.rotateTo(0,s.e({duration:1e3},i),n),this}resetNorthPitch(i,n){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},i),n),this}snapToNorth(i,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,n):this}getPitch(){return this.transform.pitch}setPitch(i,n){return this.jumpTo({pitch:i},n),this}cameraForBounds(i,n){i=s.ad.convert(i);const _=n&&n.bearing||0,c=n&&n.pitch||0,f=i.getNorthWest(),g=i.getSouthEast();return this._cameraForBounds(this.transform,f,g,_,c,n)}_extendCameraOptions(i){const n={top:0,bottom:0,right:0,left:0};if(typeof(i=s.e({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){const _=i.padding;i.padding={top:_,bottom:_,right:_,left:_}}return i.padding=s.e(n,i.padding),i}_minimumAABBFrustumDistance(i,n){const _=n.max[0]-n.min[0],c=n.max[1]-n.min[1];return _/c>i.aspect?_/(2*Math.tan(.5*i.fovX)*i.aspect):c/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,n,_,c,f,g){const b=i.clone(),A=this._extendCameraOptions(g);b.bearing=c,b.pitch=f;const E=s.bn.convert(n),O=s.bn.convert(_),S=.5*(E.lat+O.lat),L=.5*(E.lng+O.lng),w=s.d2(S,L),U=s.N.normalize([],w),B=s.N.normalize([],s.N.cross([],U,[0,1,0])),k=s.N.cross([],B,U),M=[B[0],B[1],B[2],0,k[0],k[1],k[2],0,U[0],U[1],U[2],0,0,0,0,1],H=[w,s.d2(E.lat,E.lng),s.d2(O.lat,E.lng),s.d2(O.lat,O.lng),s.d2(E.lat,O.lng),s.d2(S,E.lng),s.d2(S,O.lng),s.d2(E.lat,L),s.d2(O.lat,L)];let q=s.bS.fromPoints(H.map(pt=>[s.N.dot(B,pt),s.N.dot(k,pt),s.N.dot(U,pt)]));const V=s.N.transformMat4([],q.center,M);s.N.squaredLength(V)===0&&s.N.set(V,0,0,1),s.N.normalize(V,V),s.N.scale(V,V,s.ab),b.center=s.d3(V);const $=b.getWorldToCameraMatrix(),z=s.a6.invert(new Float64Array(16),$);q=s.bS.applyTransform(q,s.a6.multiply([],$,M)),s.N.transformMat4(V,V,$);const Z=.5*(q.max[2]-q.min[2]),at=this._minimumAABBFrustumDistance(b,q),nt=s.N.scale([],[0,0,1],Z),rt=s.N.add(nt,V,nt),yt=at+(b.pitch===0?0:s.N.distance(V,rt)),ut=b.globeCenterInViewSpace,It=s.N.sub([],V,[ut[0],ut[1],ut[2]]);s.N.normalize(It,It),s.N.scale(It,It,yt);const vt=s.N.add([],V,It);s.N.transformMat4(vt,vt,z);const Ut=s.d4/s.ab,ct=s.N.length(vt),Tt=s.bl(Math.max(ct*Ut-s.d4,Number.EPSILON),0),lt=Math.min(b.zoomFromMercatorZAdjusted(Tt),A.maxZoom);return lt>.5*(s.bG+s.bx)?(b.setProjection({name:"mercator"}),b.zoom=lt,this._cameraForBounds(b,n,_,c,f,g)):{center:b.center,zoom:lt,bearing:c,pitch:f}}queryTerrainElevation(i,n){const _=this.transform.elevation;return _?(n=s.e({},{exaggerated:!0},n),_.getAtPoint(s.L.fromLngLat(i),null,n.exaggerated)):null}_cameraForBounds(i,n,_,c,f,g){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,n,_,c,f,g);const b=i.clone(),A=this._extendCameraOptions(g),E=b.padding;b.bearing=c,b.pitch=f;const O=s.bn.convert(n),S=s.bn.convert(_),L=new s.bn(O.lng,S.lat),w=new s.bn(S.lng,O.lat),U=b.project(O),B=b.project(S),k=this.queryTerrainElevation(O),M=this.queryTerrainElevation(S),H=this.queryTerrainElevation(L),q=this.queryTerrainElevation(w),V=[[U.x,U.y,Math.min(k||0,M||0,H||0,q||0)],[B.x,B.y,Math.max(k||0,M||0,H||0,q||0)]];let $=s.bS.fromPoints(V);const z=b.getWorldToCameraMatrix(),Z=s.a6.invert(new Float64Array(16),z);$=s.bS.applyTransform($,z);const at=s.N.sub([],$.max,$.min),nt=E.left||0,rt=E.right||0,yt=E.bottom||0,ut=E.top||0,{left:It,right:vt,top:Ut,bottom:ct}=A.padding,Tt=.5*(nt+rt),lt=.5*(ut+yt),pt=Math.min(b.scaleZoom(b.scale*Math.min((b.width-(nt+rt+It+vt))/at[0],(b.height-(yt+ut+ct+Ut))/at[1])),A.maxZoom),kt=b.scale/b.zoomScale(pt);$=new s.bS([$.min[0]-(It+Tt)*kt,$.min[1]-(ct+lt)*kt,$.min[2]],[$.max[0]+(vt+Tt)*kt,$.max[1]+(Ut+lt)*kt,$.max[2]]);const qt=.5*at[2],Xt=this._minimumAABBFrustumDistance(b,$),ae=[0,0,1,0];s.a7.transformMat4(ae,ae,z),s.a7.normalize(ae,ae);const he=s.N.scale([],ae,Xt+qt),Ce=s.N.add([],$.center,he),xe=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new s.P(A.offset.x,A.offset.y):s.P.convert(A.offset)).rotate(-s.bj(c));$.center[0]-=xe.x*kt,$.center[1]+=xe.y*kt,s.N.transformMat4($.center,$.center,Z),s.N.transformMat4(Ce,Ce,Z);const Ee=[$.center[0],$.center[1],Ce[2]*b.pixelsPerMeter];s.N.scale(Ee,Ee,1/b.worldSize);const Xe=s.at(Ee[0]),Fe=s.au(Ee[1]),ze=Math.min(b._zoomFromMercatorZ(Ee[2]),A.maxZoom),ke=new s.bn(Xe,Fe);return b.mercatorFromTransition&&ze<.5*(s.bG+s.bx)?(b.setProjection({name:"globe"}),b.zoom=ze,this._cameraForBounds(b,n,_,c,f,g)):{center:ke,zoom:ze,bearing:c,pitch:f}}fitBounds(i,n,_){const c=this.cameraForBounds(i,n);return this._fitInternal(c,n,_)}fitScreenCoordinates(i,n,_,c,f){const g=s.P.convert(i),b=s.P.convert(n),A=new s.P(Math.min(g.x,b.x),Math.min(g.y,b.y)),E=new s.P(Math.max(g.x,b.x),Math.max(g.y,b.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(g,b))return this;const O=this.transform.pointLocation3D(A),S=this.transform.pointLocation3D(E),L=this.transform.pointLocation3D(new s.P(A.x,E.y)),w=this.transform.pointLocation3D(new s.P(E.x,A.y)),U=[Math.min(O.lng,S.lng,L.lng,w.lng),Math.min(O.lat,S.lat,L.lat,w.lat)],B=[Math.max(O.lng,S.lng,L.lng,w.lng),Math.max(O.lat,S.lat,L.lat,w.lat)],k=c&&c.pitch?c.pitch:this.getPitch(),M=this._cameraForBounds(this.transform,U,B,_,k,c);return this._fitInternal(M,c,f)}_fitInternal(i,n,_){return i?(delete(n=s.e(i,n)).padding,n.linear?this.easeTo(n,_):this.flyTo(n,_)):this}jumpTo(i,n){this.stop();const _=i.preloadOnly?this.transform.clone():this.transform;let c=!1,f=!1,g=!1;return"zoom"in i&&_.zoom!==+i.zoom&&(c=!0,_.zoom=+i.zoom),i.center!==void 0&&(_.center=s.bn.convert(i.center)),"bearing"in i&&_.bearing!==+i.bearing&&(f=!0,_.bearing=+i.bearing),"pitch"in i&&_.pitch!==+i.pitch&&(g=!0,_.pitch=+i.pitch),i.padding==null||_.isPaddingEqual(i.padding)||(_.padding=i.padding),i.preloadOnly?(this._preloadTiles(_),this):(this.fire(new s.b("movestart",n)).fire(new s.b("move",n)),c&&this.fire(new s.b("zoomstart",n)).fire(new s.b("zoom",n)).fire(new s.b("zoomend",n)),f&&this.fire(new s.b("rotatestart",n)).fire(new s.b("rotate",n)).fire(new s.b("rotateend",n)),g&&this.fire(new s.b("pitchstart",n)).fire(new s.b("pitch",n)).fire(new s.b("pitchend",n)),this.fire(new s.b("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.w(Wc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,n){const _=this.transform;if(!_.projection.supportsFreeCamera)return s.w(Wc),this;this.stop();const c=_.zoom,f=_.pitch,g=_.bearing;_.setFreeCameraOptions(i);const b=c!==_.zoom,A=f!==_.pitch,E=g!==_.bearing;return this.fire(new s.b("movestart",n)).fire(new s.b("move",n)),b&&this.fire(new s.b("zoomstart",n)).fire(new s.b("zoom",n)).fire(new s.b("zoomend",n)),E&&this.fire(new s.b("rotatestart",n)).fire(new s.b("rotate",n)).fire(new s.b("rotateend",n)),A&&this.fire(new s.b("pitchstart",n)).fire(new s.b("pitch",n)).fire(new s.b("pitchend",n)),this.fire(new s.b("moveend",n)),this}easeTo(i,n){this._stop(!1,i.easeId),((i=s.e({offset:[0,0],duration:500,easing:s.d0},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);const _=this.transform,c=this.getZoom(),f=this.getBearing(),g=this.getPitch(),b=this.getPadding(),A="zoom"in i?+i.zoom:c,E="bearing"in i?this._normalizeBearing(i.bearing,f):f,O="pitch"in i?+i.pitch:g,S="padding"in i?i.padding:_.padding,L=s.P.convert(i.offset);let w,U,B;if(_.projection.name==="globe"){const nt=s.L.fromLngLat(_.center),rt=L.rotate(-_.angle);nt.x+=rt.x/_.worldSize,nt.y+=rt.y/_.worldSize;const yt=nt.toLngLat(),ut=s.bn.convert(i.center||yt);this._normalizeCenter(ut),w=_.centerPoint.add(rt),U=new s.P(nt.x,nt.y).mult(_.worldSize),B=new s.P(s.a5(ut.lng),s.ae(ut.lat)).mult(_.worldSize).sub(U)}else{w=_.centerPoint.add(L);const nt=_.pointLocation(w),rt=s.bn.convert(i.center||nt);this._normalizeCenter(rt),U=_.project(nt),B=_.project(rt).sub(U)}const k=_.zoomScale(A-c);let M,H;i.around&&(M=s.bn.convert(i.around),H=_.locationPoint(M));const q=this._zooming||A!==c,V=this._rotating||f!==E,$=this._pitching||O!==g,z=!_.isPaddingEqual(S),Z=nt=>rt=>{if(q&&(nt.zoom=s.U(c,A,rt)),V&&(nt.bearing=s.U(f,E,rt)),$&&(nt.pitch=s.U(g,O,rt)),z&&(nt.interpolatePadding(b,S,rt),w=nt.centerPoint.add(L)),M)nt.setLocationAtPoint(M,H);else{const yt=nt.zoomScale(nt.zoom-c),ut=A>c?Math.min(2,k):Math.max(.5,k),It=Math.pow(ut,1-rt),vt=nt.unproject(U.add(B.mult(rt*It)).mult(yt));nt.setLocationAtPoint(nt.renderWorldCopies?vt.wrap():vt,w)}return i.preloadOnly||this._fireMoveEvents(n),nt};if(i.preloadOnly){const nt=this._emulate(Z,i.duration,_);return this._preloadTiles(nt),this}const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=q,this._rotating=V,this._pitching=$,this._easeId=i.easeId,this._prepareEase(n,i.noMoveStart,at),this._ease(Z(_),nt=>{_.cameraElevationReference==="sea"&&_.recenterOnTerrain(),this._afterEase(n,nt)},i),this}_prepareEase(i,n,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),n||_.moving||this.fire(new s.b("movestart",i)),this._zooming&&!_.zooming&&this.fire(new s.b("zoomstart",i)),this._rotating&&!_.rotating&&this.fire(new s.b("rotatestart",i)),this._pitching&&!_.pitching&&this.fire(new s.b("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.b("move",i)),this._zooming&&this.fire(new s.b("zoom",i)),this._rotating&&this.fire(new s.b("rotate",i)),this._pitching&&this.fire(new s.b("pitch",i))}_afterEase(i,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,c=this._rotating,f=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,_&&this.fire(new s.b("zoomend",i)),c&&this.fire(new s.b("rotateend",i)),f&&this.fire(new s.b("pitchend",i)),this.fire(new s.b("moveend",i))}flyTo(i,n){if(this._prefersReducedMotion(i)){const ct=s.ac(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ct,n)}this.stop(),i=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.d0},i);const _=this.transform,c=this.getZoom(),f=this.getBearing(),g=this.getPitch(),b="zoom"in i?s.aa(+i.zoom,_.minZoom,_.maxZoom):c,A="bearing"in i?this._normalizeBearing(i.bearing,f):f,E="pitch"in i?+i.pitch:g,O=_.zoomScale(b-c),S=s.P.convert(i.offset),L=_.centerPoint.add(S),w=_.pointLocation(L);let U=i.center;if(U&&i.padding){const ct=this._cameraForBounds(this.transform,U,U,A,E,i);ct&&(U=ct.center)}U=s.bn.convert(U||w),this._normalizeCenter(U);const B=_.project(w),k=_.project(U).sub(B);let M=i.curve;const H=Math.max(_.width,_.height),q=H/O,V=k.mag();if("minZoom"in i){const ct=s.aa(Math.min(i.minZoom,c,b),_.minZoom,_.maxZoom),Tt=H/_.zoomScale(ct-c);M=Math.sqrt(Tt/V*2)}const $=M*M;function z(ct){const Tt=(q*q-H*H+(ct?-1:1)*$*$*V*V)/(2*(ct?q:H)*$*V);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function Z(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function at(ct){return(Math.exp(ct)+Math.exp(-ct))/2}const nt=z(0);let rt=function(ct){return at(nt)/at(nt+M*ct)},yt=function(ct){return H*((at(nt)*(Z(Tt=nt+M*ct)/at(Tt))-Z(nt))/$)/V;var Tt},ut=(z(1)-nt)/M;if(Math.abs(V)<1e-6||!isFinite(ut)){if(Math.abs(H-q)<1e-6)return this.easeTo(i,n);const ct=q<H?-1:1;ut=Math.abs(Math.log(q/H))/M,yt=function(){return 0},rt=function(Tt){return Math.exp(ct*M*Tt)}}i.duration="duration"in i?+i.duration:1e3*ut/("screenSpeed"in i?+i.screenSpeed/M:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const It=f!==A,vt=E!==g,Ut=ct=>Tt=>{const lt=Tt*ut,pt=1/rt(lt);ct.zoom=Tt===1?b:c+ct.scaleZoom(pt),It&&(ct.bearing=s.U(f,A,Tt)),vt&&(ct.pitch=s.U(g,E,Tt));const kt=Tt===1?U:ct.unproject(B.add(k.mult(yt(lt))).mult(pt));return ct.setLocationAtPoint(ct.renderWorldCopies?kt.wrap():kt,L),ct._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(n),ct};if(i.preloadOnly){const ct=this._emulate(Ut,i.duration,_);return this._preloadTiles(ct),this}return this._zooming=!0,this._rotating=It,this._pitching=vt,this._prepareEase(n,!1),this._ease(Ut(_),()=>this._afterEase(n),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,n){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,n)}if(!i){const _=this.handlers;_&&_.stop(!1)}return this}_ease(i,n,_){_.animate===!1||_.duration===0?(i(1),n()):(this._easeStart=s.f.now(),this._easeOptions=_,this._onEaseFrame=i,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.f.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,n){i=s.bh(i,-180,180);const _=Math.abs(i-n);return Math.abs(i-360-n)<_&&(i-=360),Math.abs(i+360-n)<_&&(i+=360),i}_normalizeCenter(i){const n=this.transform;if(n.maxBounds||n.projection.name!=="globe"&&!n.renderWorldCopies)return;const _=i.lng-n.center.lng;i.lng+=_>180?-360:_<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&s.f.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,n,_){const c=Math.ceil(15*n/1e3),f=[],g=i(_.clone());for(let b=0;b<=c;b++){const A=g(b/c);f.push(A.clone())}return f}}class ou{constructor(i={}){this.options=i,s.aY(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const n=this.options&&this.options.compact;return this._map=i,this._container=Rt("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Rt("button","mapboxgl-ctrl-attrib-button",this._container),Rt("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Rt("div","mapboxgl-ctrl-attrib-inner",this._container),n&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),n===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,n){const _=this._map._getUIString(`AttributionControl.${n}`);i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.d5.ACCESS_TOKEN}];if(i){const _=n.reduce((c,f,g)=>(f.value&&(c+=`${f.key}=${f.value}${g<n.length-1?"&":""}`),c),"?");i.href=`${s.d5.FEEDBACK_URL}/${_}#${K_(this._map,!0)}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const c=this._map.style.stylesheet;this.styleOwner=c.owner,this.styleId=c.id}const n=this._map.style._mergedSourceCaches;for(const c in n){const f=n[c];if(f.used){const g=f.getSource();g.attribution&&i.indexOf(g.attribution)<0&&i.push(g.attribution)}}i.sort((c,f)=>c.length-f.length),i=i.filter((c,f)=>{for(let g=f+1;g<i.length;g++)if(i[g].indexOf(c)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const _=i.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,i.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Mc{constructor(){s.aY(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=Rt("div","mapboxgl-ctrl");const n=Rt("a","mapboxgl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://www.mapbox.com/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const n in i){const _=i[n].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const n=i[0];this._map.getCanvasContainer().offsetWidth<250?n.classList.add("mapboxgl-compact"):n.classList.remove("mapboxgl-compact")}}}class Dc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const n=++this._id;return this._queue.push({callback:i,id:n,cancelled:!1}),n}remove(i){const n=this._currentlyRunning,_=n?this._queue.concat(n):this._queue;for(const c of _)if(c.id===i)return void(c.cancelled=!0)}run(i=0){const n=this._currentlyRunning=this._queue;this._queue=[];for(const _ of n)if(!_.cancelled&&(_.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function er(d,i,n){if(d=new s.bn(d.lng,d.lat),i){const _=new s.bn(d.lng-360,d.lat),c=new s.bn(d.lng+360,d.lat),f=360*Math.ceil(Math.abs(d.lng-n.center.lng)/360),g=n.locationPoint(d).distSqr(i),b=i.x<0||i.y<0||i.x>n.width||i.y>n.height;n.locationPoint(_).distSqr(i)<g&&(b||Math.abs(_.lng-n.center.lng)<f)?d=_:n.locationPoint(c).distSqr(i)<g&&(b||Math.abs(c.lng-n.center.lng)<f)&&(d=c)}for(;Math.abs(d.lng-n.center.lng)>180;){const _=n.locationPoint(d);if(_.x>=0&&_.y>=0&&_.x<=n.width&&_.y<=n.height)break;d.lng>n.center.lng?d.lng-=360:d.lng+=360}return d}const Zr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class nu extends s.E{constructor(i,n){if(super(),(i instanceof HTMLElement||n)&&(i=s.e({element:i},n)),s.aY(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=s.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=Rt("div");const f=41,g=27,b=le("svg",{display:"block",height:f*this._scale+"px",width:g*this._scale+"px",viewBox:`0 0 ${g} ${f}`},this._element),A=le("radialGradient",{id:"shadowGradient"},le("defs",{},b));le("stop",{offset:"10%","stop-opacity":.4},A),le("stop",{offset:"100%","stop-opacity":.05},A),le("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},b),le("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},b),le("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},b),le("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},b),this._offset=s.P.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()});const _=this._element.classList;for(const f in Zr)_.remove(`mapboxgl-marker-anchor-${f}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`);const c=i&&i.className?i.className.trim().split(/\s+/):[];_.add(...c),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.bn.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const c=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(38.1-13.5+c)],"bottom-right":[-c,-1*(38.1-13.5+c)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const n=i.code,_=i.charCode||i.keyCode;n!=="Space"&&n!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(i){const n=i.originalEvent.target,_=this._element;this._popup&&(n===_||_.contains(n))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,n=this._pos;if(!i||!n)return!1;const _=i.unproject(n),c=i.getFreeCameraOptions();if(!c.position)return!1;const f=c.position.toLngLat();return f.distanceTo(_)<.9*f.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const n=this._pos;if(!n||n.x<0||n.x>i.transform.width||n.y<0||n.y>i.transform.height)return void this._clearFadeTimer();const _=i.unproject(n);let c;i._showingGlobe()&&s.d6(i.transform,this._lngLat)?c=0:(c=1-i._queryFogOpacity(_),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(c*=this._occludedOpacity)),this._element.style.opacity=`${c}`,this._element.style.pointerEvents=c>0?"auto":"none",this._popup&&this._popup._setOpacity(c),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const n=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${Zr[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${n.x}px,${n.y}px)
        `}_calculateXYTransform(){const i=this._pos,n=this._map,_=this.getPitchAlignment();if(!n||!i||_!=="map")return"";if(!n._showingGlobe()){const A=n.getPitch();return A?`rotateX(${A}deg)`:""}const c=s.bF(s.d7(n.transform,this._lngLat)),f=i.sub(s.d8(n.transform)),g=Math.abs(f.x)+Math.abs(f.y);if(g===0)return"";const b=c/g;return`rotateX(${-f.y*b}deg) rotateY(${f.x*b}deg)`}_calculateZTransform(){const i=this._pos,n=this._map;if(!n||!i)return"";let _=0;const c=this.getRotationAlignment();if(c==="map")if(n._showingGlobe()){const f=n.project(new s.bn(this._lngLat.lng,this._lngLat.lat+.001)),g=n.project(new s.bn(this._lngLat.lng,this._lngLat.lat-.001)).sub(f);_=s.bF(Math.atan2(g.y,g.x))-90}else _=-n.getBearing();else if(c==="horizon"){const f=s.O(4,6,n.getZoom()),g=s.d8(n.transform);g.y+=f*n.transform.height;const b=i.sub(g),A=s.bF(Math.atan2(b.y,b.x));_=(A>90?A-270:A+90)*(1-f)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(i){cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=er(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),i===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),n._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=s.P.convert(i),this._update(),this}addClassName(i){return this._element.classList.add(i),this}removeClassName(i){return this._element.classList.remove(i),this}toggleClassName(i){return this._element.classList.toggle(i)}_onMove(i){const n=this._map;if(!n)return;const _=this._pointerdownPos,c=this._positionDelta;if(_&&c){if(!this._isDragging){const f=this._clickTolerance||n._clickTolerance;if(i.point.dist(_)<f)return;this._isDragging=!0}this._pos=i.point.sub(c),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.b("dragstart"))),this.fire(new s.b("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.b("dragend")),this._state="inactive"}_addDragHandler(i){const n=this._map,_=this._pos;n&&_&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(_),this._pointerdownPos=i.point,this._state="pending",n.on("mousemove",this._onMove),n.on("touchmove",this._onMove),n.once("mouseup",this._onUp),n.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const n=this._map;return n&&(i?(n.on("mousedown",this._addDragHandler),n.on("touchstart",this._addDragHandler)):(n.off("mousedown",this._addDragHandler),n.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Fc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Bc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Uc(d=new s.P(0,0),i="bottom"){if(typeof d=="number"){const n=Math.round(Math.sqrt(.5*Math.pow(d,2)));switch(i){case"top":return new s.P(0,d);case"top-left":return new s.P(n,n);case"top-right":return new s.P(-n,n);case"bottom":return new s.P(0,-d);case"bottom-left":return new s.P(n,-n);case"bottom-right":return new s.P(-n,-n);case"left":return new s.P(d,0);case"right":return new s.P(-d,0)}return new s.P(0,0)}return d instanceof s.P||Array.isArray(d)?s.P.convert(d):s.P.convert(d[i]||[0,0])}class su{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const n=s.cc((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,n,_){this._start=this.getValue(n),this._end=i,this._startTime=n,this._endTime=n+_}}const ar={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},kc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class lu{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.showParseStatus=!1,this.continuousRedraw=!1,this.showTileAABBs=!1,this.showPadding=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}const Jr={showCompass:!0,showZoom:!0,visualizePitch:!1};class _n{constructor(i,n,_=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new jl({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,_&&(this.mousePitch=new qr({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.aY(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(i,n){this.mouseRotate.mousedown(i,n),this.mousePitch&&this.mousePitch.mousedown(i,n),ue()}move(i,n){const _=this.map,c=this.mouseRotate.mousemoveWindow(i,n),f=c&&c.bearingDelta;if(f&&_.setBearing(_.getBearing()+f),this.mousePitch){const g=this.mousePitch.mousemoveWindow(i,n),b=g&&g.pitchDelta;b&&_.setPitch(_.getPitch()+b)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){be(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.e({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),ia(this.element,i)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,ia(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Oa(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=Oa(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Qr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Vi={maxWidth:100,unit:"metric"},Yn={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:s.dk,supported:ht,setRTLTextPlugin:s.dm,getRTLTextPluginStatus:s.dn,Map:class extends ai{constructor(d){const i=d;if((d=s.e({},kc,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(d.antialias&&s.d9(window)&&(d.antialias=!1,s.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Rl(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies),d),this._repaint=!1,this._interactive=d.interactive,this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=d.crossSourceCollisions,this._collectResourceTiming=d.collectResourceTiming,this._language=this._parseLanguage(d.language),this._worldview=d.worldview,this._renderTaskQueue=new Dc,this._domRenderTaskQueue=new Dc,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.aC(),this._locale=s.e({},ar,d.locale),this._clickTolerance=d.clickTolerance,this._cooperativeGestures=d.cooperativeGestures,this._performanceMetricsCollection=d.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new su(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.da(d.transformRequest,d.accessToken,d.testMode),this._silenceAuthErrors=!!d.testMode,this._contextCreateOptions=d.contextCreateOptions?{...d.contextCreateOptions}:{},typeof d.container=="string"){const n=document.getElementById(d.container);if(!n)throw new Error(`Container '${d.container.toString()}' not found.`);this._container=n}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(this._container.childNodes.length>0&&s.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),d.maxBounds&&this.setMaxBounds(d.maxBounds),s.aY(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new lu,this._tp=d.devtools?new Hl(this):new Hl,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showParseStatus",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,n=>{this.repaint=n}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileAABBs",void 0,n=>{this.showTileAABBs=n}),this._tp.registerParameter(this._debugParams,["Debug"],"showPadding",void 0,n=>{this.showPadding=n}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new wf(this,d),this._localFontFamily=d.localFontFamily,this._localIdeographFontFamily=d.localIdeographFontFamily,(d.style||!d.testMode)&&this.setStyle(d.style||s.d5.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),d.projection&&this.setProjection(d.projection),d.hash&&(this._hash=new Xr(typeof d.hash=="string"&&d.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){i.center==null&&i.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch});const n=d.bounds;n&&(this.resize(),this.fitBounds(n,s.e({},d.fitBoundsOptions,{duration:0})))}this.resize(),d.attributionControl&&this.addControl(new ou({customAttribution:d.customAttribution})),this._logoControl=new Mc,this.addControl(this._logoControl,d.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",n=>{this._update(n.dataType==="style"),this.fire(new s.b(`${n.dataType}data`,n))}),this.on("dataloading",n=>{this.fire(new s.b(`${n.dataType}dataloading`,n))})}_getMapId(){return this._mapId}addControl(d,i){if(i===void 0&&(i=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new s.a(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=d.onAdd(this);this._controls.push(d);const _=this._controlPositions[i];return i.indexOf("bottom")!==-1?_.insertBefore(n,_.firstChild):_.appendChild(n),this}removeControl(d){if(!d||!d.onRemove)return this.fire(new s.a(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(d);return i>-1&&this._controls.splice(i,1),d.onRemove(this),this}hasControl(d){return this._controls.indexOf(d)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(d){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.b("movestart",d)).fire(new s.b("move",d)),this.fire(new s.b("resize",d)),i&&this.fire(new s.b("moveend",d)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(d){return this.transform.setMaxBounds(s.ad.convert(d)),this._update()}setMinZoom(d){if((d=d??-2)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d?this.setZoom(d):this.fire(new s.b("zoomstart")).fire(new s.b("zoom")).fire(new s.b("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(d){if((d=d??22)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d?this.setZoom(d):this.fire(new s.b("zoomstart")).fire(new s.b("zoom")).fire(new s.b("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(d){if((d=d??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d?this.setPitch(d):this.fire(new s.b("pitchstart")).fire(new s.b("pitch")).fire(new s.b("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(d){if((d=d??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d?this.setPitch(d):this.fire(new s.b("pitchstart")).fire(new s.b("pitch")).fire(new s.b("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(d){return this.transform.renderWorldCopies=d,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(d){return d==="auto"?navigator.language:Array.isArray(d)?d.length===0?void 0:d.map(i=>i==="auto"?navigator.language:i):d}setLanguage(d){const i=this._parseLanguage(d);if(!this.style||i===this._language)return this;this._language=i,this.style.reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(d){return this.style&&d!==this._worldview?(this._worldview=d,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(d){return this._lazyInitEmptyStyle(),d?typeof d=="string"&&(d={name:d}):d=null,this._useExplicitProjection=!!d,this._prioritizeAndUpdateProjection(d,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const d=this.transform,i=d.projection.name;let n;i==="globe"&&d.zoom>=s.bx?(d.setMercatorFromTransition(),n=!0):i==="mercator"&&d.zoom<s.bx&&(d.setProjection({name:"globe"}),n=!0),n&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(d,i){return this._updateProjection(d||i||{name:"mercator"})}_updateProjection(d){let i;return i=d.name==="globe"&&this.transform.zoom>=s.bx?this.transform.setMercatorFromTransition():this.transform.setProjection(d),this.style.applyProjectionUpdate(),i&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(d){return this.transform.locationPoint3D(s.bn.convert(d))}unproject(d){return this.transform.pointLocation3D(s.P.convert(d))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(d,i,n){if(d==="mouseenter"||d==="mouseover"){let _=!1;const c=g=>{const b=i.filter(E=>this.getLayer(E)),A=b.length?this.queryRenderedFeatures(g.point,{layers:b}):[];A.length?_||(_=!0,n.call(this,new qi(d,this,g.originalEvent,{features:A}))):_=!1},f=()=>{_=!1};return{layers:new Set(i),listener:n,delegates:{mousemove:c,mouseout:f}}}if(d==="mouseleave"||d==="mouseout"){let _=!1;const c=g=>{const b=i.filter(A=>this.getLayer(A));(b.length?this.queryRenderedFeatures(g.point,{layers:b}):[]).length?_=!0:_&&(_=!1,n.call(this,new qi(d,this,g.originalEvent)))},f=g=>{_&&(_=!1,n.call(this,new qi(d,this,g.originalEvent)))};return{layers:new Set(i),listener:n,delegates:{mousemove:c,mouseout:f}}}{const _=c=>{const f=i.filter(b=>this.getLayer(b)),g=f.length?this.queryRenderedFeatures(c.point,{layers:f}):[];g.length&&(c.features=g,n.call(this,c),delete c.features)};return{layers:new Set(i),listener:n,delegates:{[d]:_}}}}on(d,i,n){if(n===void 0)return super.on(d,i);if(Array.isArray(i)||(i=[i]),i){for(const c of i)if(!this._isValidId(c))return this}const _=this._createDelegatedListener(d,i,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(_);for(const c in _.delegates)this.on(c,_.delegates[c]);return this}once(d,i,n){if(n===void 0)return super.once(d,i);if(Array.isArray(i)||(i=[i]),i){for(const c of i)if(!this._isValidId(c))return this}const _=this._createDelegatedListener(d,i,n);for(const c in _.delegates)this.once(c,_.delegates[c]);return this}off(d,i,n){if(n===void 0)return super.off(d,i);i=new Set(Array.isArray(i)?i:[i]);for(const f of i)if(!this._isValidId(f))return this;const _=(f,g)=>{if(f.size!==g.size)return!1;for(const b of f)if(!g.has(b))return!1;return!0},c=this._delegatedListeners?this._delegatedListeners[d]:void 0;return c&&(f=>{for(let g=0;g<f.length;g++){const b=f[g];if(b.listener===n&&_(b.layers,i)){for(const A in b.delegates)this.off(A,b.delegates[A]);return f.splice(g,1),this}}})(c),this}queryRenderedFeatures(d,i){if(!this.style)return[];if(i!==void 0||d===void 0||d instanceof s.P||Array.isArray(d)||(i=d,d=void 0),d=d||[[0,0],[this.transform.width,this.transform.height]],(i=i||{}).layers&&Array.isArray(i.layers)){for(const n of i.layers)if(!this._isValidId(n))return[]}return this.style.queryRenderedFeatures(d,i,this.transform)}querySourceFeatures(d,i){return this._isValidId(d)?this.style.querySourceFeatures(d,i):[]}isPointOnSurface(d){const{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&s.w(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.P.convert(d))}setStyle(d,i){return(i=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&d?(this._diffStyle(d,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(d,i))}_getUIString(d){const i=this._locale[d];if(i==null)throw new Error(`Missing UI string '${d}'`);return i}_updateStyle(d,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),d&&(this.style=new Fo(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Fo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(d,i){if(typeof d=="string"){const n=this._requestManager.normalizeStyleURL(d),_=this._requestManager.transformRequest(n,s.R.Style);s.g(_,(c,f)=>{c?this.fire(new s.a(c)):f&&this._updateDiff(f,i)})}else typeof d=="object"&&this._updateDiff(d,i)}_updateDiff(d,i){try{this.style.setState(d)&&this._update(!0)}catch(n){s.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(d,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.w("There is no style added to the map."),!1)}_isValidId(d){return d==null?(this.fire(new s.a(new Error("IDs can't be empty."))),!1):!s.c4(d)||(this.fire(new s.a(new Error(`IDs can't contain special symbols: "${d}".`))),!1)}addSource(d,i){return this._isValidId(d)?(this._lazyInitEmptyStyle(),this.style.addSource(d,i),this._update(!0)):this}isSourceLoaded(d){return!!this._isValidId(d)&&!!this.style&&this.style._isSourceCacheLoaded(d)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(d,i,n){this._lazyInitEmptyStyle(),this.style.addSourceType(d,i,n)}removeSource(d){return this._isValidId(d)?(this.style.removeSource(d),this._updateTerrain(),this._update(!0)):this}getSource(d){return this._isValidId(d)?this.style.getOwnSource(d):null}addImage(d,i,{pixelRatio:n=1,sdf:_=!1,stretchX:c,stretchY:f,content:g}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap){const{width:b,height:A,data:E}=s.f.getImageData(i);this.style.addImage(d,{data:new s.h({width:b,height:A},E),pixelRatio:n,stretchX:c,stretchY:f,content:g,sdf:_,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new s.a(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:b,height:A}=i,E=i;this.style.addImage(d,{data:new s.h({width:b,height:A},new Uint8Array(E.data)),pixelRatio:n,stretchX:c,stretchY:f,content:g,sdf:_,version:0,userImage:E}),E.onAdd&&E.onAdd(this,d)}}updateImage(d,i){this._lazyInitEmptyStyle();const n=this.style.getImage(d);if(!n)return void this.fire(new s.a(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap?s.f.getImageData(i):i,{width:c,height:f}=_,g=_.data;if(c===void 0||f===void 0)return void this.fire(new s.a(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(c!==n.data.width||f!==n.data.height)return void this.fire(new s.a(new Error(`The width and height of the updated image (${c}, ${f})
                must be that same as the previous version of the image
                (${n.data.width}, ${n.data.height})`)));const b=!(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap);n.data.replace(g,b),this.style.updateImage(d,n)}hasImage(d){return d?!!this.style&&!!this.style.getImage(d):(this.fire(new s.a(new Error("Missing required image id"))),!1)}removeImage(d){this.style.removeImage(d)}loadImage(d,i){s.d(this._requestManager.transformRequest(d,s.R.Image),(n,_)=>{i(n,_ instanceof HTMLImageElement?s.f.getImageData(_):_)})}listImages(){return this.style.listImages()}addModel(d,i){this._lazyInitEmptyStyle(),this.style.addModel(d,i)}hasModel(d){return d?this.style.hasModel(d):(this.fire(new s.a(new Error("Missing required model id"))),!1)}removeModel(d){this.style.removeModel(d)}listModels(){return this.style.listModels()}addLayer(d,i){return this._isValidId(d.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(d,i),this._update(!0)):this}getSlot(d){const i=this.getLayer(d);return i&&i.slot||null}setSlot(d,i){return this.style.setSlot(d,i),this.style.mergeLayers(),this._update(!0)}addImport(d,i){return this.style.addImport(d,i),this}updateImport(d,i){return typeof i!="string"&&i.id!==d?(this.removeImport(d),this.addImport(i)):(this.style.updateImport(d,i),this._update(!0))}removeImport(d){return this.style.removeImport(d),this}moveImport(d,i){return this.style.moveImport(d,i),this._update(!0)}moveLayer(d,i){return this._isValidId(d)?(this.style.moveLayer(d,i),this._update(!0)):this}removeLayer(d){return this._isValidId(d)?(this.style.removeLayer(d),this._update(!0)):this}getLayer(d){return this._isValidId(d)?this.style.getOwnLayer(d):null}setLayerZoomRange(d,i,n){return this._isValidId(d)?(this.style.setLayerZoomRange(d,i,n),this._update(!0)):this}setFilter(d,i,n={}){return this._isValidId(d)?(this.style.setFilter(d,i,n),this._update(!0)):this}getFilter(d){return this._isValidId(d)?this.style.getFilter(d):null}setPaintProperty(d,i,n,_={}){return this._isValidId(d)?(this.style.setPaintProperty(d,i,n,_),this._update(!0)):this}getPaintProperty(d,i){return this._isValidId(d)?this.style.getPaintProperty(d,i):null}setLayoutProperty(d,i,n,_={}){return this._isValidId(d)?(this.style.setLayoutProperty(d,i,n,_),this._update(!0)):this}getLayoutProperty(d,i){return this._isValidId(d)?this.style.getLayoutProperty(d,i):null}getConfigProperty(d,i){return this.style.getConfigProperty(d,i)}setConfigProperty(d,i,n){return this.style.setConfigProperty(d,i,n),this._update(!0)}setLights(d){if(this._lazyInitEmptyStyle(),d&&d.length===1&&d[0].type==="flat"){const i=d[0];i.properties?this.style.setFlatLight(i.properties,i.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(d),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const d=this.style.getLights()||[];return d.length===0&&d.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),d}setLight(d,i={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:d}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(d){return this._lazyInitEmptyStyle(),!d&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(d),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(d){return this._lazyInitEmptyStyle(),this.style.setFog(d),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(d){return this.style.setCamera(d),this._triggerCameraUpdate(d)}_triggerCameraUpdate(d){return this._update(this.transform.setOrthographicProjectionAtLowPitch(d["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(d){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.bn.convert(d),this.transform):0}setFeatureState(d,i){return this._isValidId(d.source)?(this.style.setFeatureState(d,i),this._update()):this}removeFeatureState(d,i){return this._isValidId(d.source)?(this.style.removeFeatureState(d,i),this._update()):this}getFeatureState(d){return this._isValidId(d.source)?this.style.getFeatureState(d):null}_updateContainerDimensions(){if(!this._container)return;const d=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let n,_,c,f=this._container;for(;f&&(!_||!c);){const g=window.getComputedStyle(f).transform;g&&g!=="none"&&(n=g.match(/matrix.*\((.+)\)/)[1].split(", "),n[0]&&n[0]!=="0"&&n[0]!=="1"&&(_=n[0]),n[3]&&n[3]!=="0"&&n[3]!=="1"&&(c=n[3])),f=f.parentElement}this._containerWidth=_?Math.abs(d/_):d,this._containerHeight=c?Math.abs(i/c):i}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=Rt("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=Rt("div","mapboxgl-canvas-container",d);this._canvas=Rt("canvas","mapboxgl-canvas",i),this._interactive&&(i.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=Rt("div","mapboxgl-control-container",d),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(c=>{_[c]=Rt("div",`mapboxgl-ctrl-${c}`,n)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(d,i){const n=s.f.devicePixelRatio||1;this._canvas.width=n*Math.ceil(d),this._canvas.height=n*Math.ceil(i),this._canvas.style.width=`${d}px`,this._canvas.style.height=`${i}px`}_addMarker(d){this._markers.push(d)}_removeMarker(d){const i=this._markers.indexOf(d);i!==-1&&this._markers.splice(i,1)}_addPopup(d){this._popups.push(d)}_removePopup(d){const i=this._popups.indexOf(d);i!==-1&&this._popups.splice(i,1)}_setupPainter(){const d=s.e({},ht.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl2",d);i?(s.db(i,!0),this.painter=new Ec(i,this._contextCreateOptions,this.transform,this._tp),this.on("data",n=>{n.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.dc.testSupport(i)):this.fire(new s.a(new Error("Failed to initialize WebGL")))}_contextLost(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.b("webglcontextlost",{originalEvent:d}))}_contextRestored(d){this._setupPainter(),this.resize(),this._update(),this.fire(new s.b("webglcontextrestored",{originalEvent:d}))}_onMapScroll(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(d){return this._update(),this._renderTaskQueue.add(d)}_cancelRenderFrame(d){this._renderTaskQueue.remove(d)}_requestDomTask(d){!this.loaded()||this.loaded()&&!this.isMoving()?d():this._domRenderTaskQueue.add(d)}_render(d){let i;this.fire(new s.b("renderstart"));const n=this.painter.context.extTimerQuery,_=s.f.now(),c=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(i=c.createQuery(),c.beginQuery(n.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(d),this._domRenderTaskQueue.run(d),this._removed)return;this._updateProjectionTransition();const f=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const A=this.transform.zoom,E=this.transform.pitch,O=s.f.now(),S=new s.K(A,{now:O,fadeDuration:f,pitch:E,transition:this.style.transition});this.style.update(S)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let g=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),g=this._updateAverageElevation(_),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):g=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,f,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,showParseStatus:this.showParseStatus||this._debugParams.showParseStatus,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs||this._debugParams.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:f,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding||this._debugParams.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.b("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.b("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const A=s.f.now()-_;c.endQuery(n.TIME_ELAPSED_EXT),setTimeout(()=>{const E=c.getQueryParameter(i,c.QUERY_RESULT)/1e6;c.deleteQuery(i),this.fire(new s.b("gpu-timing-frame",{cpuTime:A,gpuTime:E}))},50)}if(this.listens("gpu-timing-layer")){const A=this.painter.collectGpuTimers();setTimeout(()=>{const E=this.painter.queryGpuTimers(A);this.fire(new s.b("gpu-timing-layer",{layerTimes:E}))},50)}if(this.listens("gpu-timing-deferred-render")){const A=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const E=this.painter.queryGpuTimeDeferredRender(A);this.fire(new s.b("gpu-timing-deferred-render",{gpuTime:E}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty||g;if(b||this._repaint)this.triggerRepaint();else{const A=!this.isMoving()&&this.loaded();if(A&&(g=this._updateAverageElevation(_,!0)),g)this.triggerRepaint();else if(this._triggerFrame(!1),A&&(this.fire(new s.b("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const E=this._calculateSpeedIndex();this.fire(new s.b("speedindexcompleted",{speedIndex:E})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,this._performanceMetricsCollection&&s.dd(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(d){for(const i of this._markers)d&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!d||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(d,i=!1){const n=c=>(this.transform.averageElevation=c,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&n(0);const _=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(_||(i||d-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(d)){const c=this.transform.averageElevation;let f=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(f)?f=0:this._averageElevationLastSampledAt=d;const g=Math.abs(c-f);if(g>1){if(this._isInitialLoad||_)return this._averageElevation.jumpTo(f),n(f);this._averageElevation.easeTo(f,d,300)}else if(g>1e-4)return this._averageElevation.jumpTo(f),n(f)}return!!this._averageElevation.isEasing(d)&&n(this._averageElevation.getValue(d))}_authenticate(){s.de(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,d=>{if(d&&(d.message===s.df||d.status===401)){const i=this.painter.context.gl;s.db(i,!1),this._logoControl instanceof Mc&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.a(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.dg(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const d=this._isDragging();this.painter.updateTerrain(this.style,d)}_calculateSpeedIndex(){const d=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const n=this.painter.context.gl,_=n.createFramebuffer();function c(f){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,f,0);const g=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,g),g}return n.bindFramebuffer(n.FRAMEBUFFER,_),this._canvasPixelComparison(c(d),i.canvasCopies.map(c),i.timeStamps)}_canvasPixelComparison(d,i,n){let _=n[1]-n[0];const c=d.length/4;for(let f=0;f<i.length;f++){const g=i[f];let b=0;for(let A=0;A<g.length;A+=4)g[A]===d[A]&&g[A+1]===d[A+1]&&g[A+2]===d[A+2]&&g[A+3]===d[A+3]&&(b+=1);_+=(n[f+2]-n[f+1])*(1-b/c)}return _}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const d=this.painter.context.gl.getExtension("WEBGL_lose_context");d&&d.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.dh(this.painter.context.gl),s.di.remove(),s.dj.remove(),this._removed=!0,this.fire(new s.b("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(d){this._renderNextFrame=this._renderNextFrame||d,this.style&&!this._frame&&(this._frame=s.f.frame(i=>{const n=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,n&&this._render(i)}))}_preloadTiles(d){const i=this.style?Object.values(this.style._sourceCaches):[];return s.b1(i,(n,_)=>n._preloadTiles(d,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(d){this._trackResize&&this.resize({originalEvent:d})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(d){this._showParseStatus!==d&&(this._showParseStatus=d,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(d){this._showTerrainWireframe!==d&&(this._showTerrainWireframe=d,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(d){this._showLayers2DWireframe!==d&&(this._showLayers2DWireframe=d,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(d){this._showLayers3DWireframe!==d&&(this._showLayers3DWireframe=d,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(d){this._speedIndexTiming!==d&&(this._speedIndexTiming=d,this._update())}get showPadding(){return!!this._showPadding}set showPadding(d){this._showPadding!==d&&(this._showPadding=d,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())}get repaint(){return!!this._repaint}set repaint(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(d){this._vertices=d,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(d){this._showTileAABBs!==d&&(this._showTileAABBs=d,d&&this._update())}_setCacheLimits(d,i){s.dl(d,i)}get version(){return s.dk}},NavigationControl:class{constructor(d){this.options=s.e({},Jr,d),this._container=Rt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.aY(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),Rt("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),Rt("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.aY(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const n=this._map;n&&(this.options.visualizePitch?n.resetNorthPitch({},{originalEvent:i}):n.resetNorth({},{originalEvent:i}))}),this._compassIcon=Rt("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const d=this._map;if(!d)return;const i=d.getZoom(),n=i===d.getMaxZoom(),_=i===d.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const d=this._map;if(!d)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(d.transform.pitch*(Math.PI/180)),.5)}) rotateX(${d.transform.pitch}deg) rotateZ(${d.transform.angle*(180/Math.PI)}deg)`:`rotate(${d.transform.angle*(180/Math.PI)}deg)`;d._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),d.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&d.on("pitch",this._rotateCompassArrow),d.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _n(d,this._compass,this.options.visualizePitch)),this._container}onRemove(){const d=this._map;d&&(this._container.remove(),this.options.showZoom&&d.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&d.off("pitch",this._rotateCompassArrow),d.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(d,i){const n=Rt("button",d,this._container);return n.type="button",n.addEventListener("click",i),n}_setButtonTitle(d,i){if(!this._map)return;const n=this._map._getUIString(`NavigationControl.${i}`);d.setAttribute("aria-label",n),d.firstElementChild&&d.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends s.E{constructor(d){super();const i=navigator.geolocation;this.options=s.e({geolocation:i},Qr,d),s.aY(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Gl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(d){return this._map=d,this._container=Rt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(d){const i=(n=!!this.options.geolocation)=>{this._supportsGeolocation=n,d(n)};this._supportsGeolocation!==void 0?d(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(n=>i(n.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(d){const i=this._map.getMaxBounds(),n=d.coords;return!!i&&(n.longitude<i.getWest()||n.longitude>i.getEast()||n.latitude<i.getSouth()||n.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(d){if(this._map){if(this._isOutOfMapMaxBounds(d))return this._setErrorState(),this.fire(new s.b("outofmaxbounds",d)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(d),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new s.b("geolocate",d)),this._finish()}}_updateCamera(d){const i=new s.bn(d.coords.longitude,d.coords.latitude),n=d.coords.accuracy,_=this._map.getBearing(),c=s.e({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),c,{geolocateSource:!0})}_updateMarker(d){if(d){const i=new s.bn(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const d=this._map.transform,i=s.bl(1,d._center.lat)*d.worldSize,n=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(d){if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new s.b("error",d)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(d){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=Rt("button","mapboxgl-ctrl-geolocate",this._container),Rt("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",d===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Rt("div","mapboxgl-user-location"),this._dotElement.appendChild(Rt("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Rt("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new nu({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Rt("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new nu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.b("trackuserlocationend")))})}}_onDeviceOrientation(d){this._userLocationDotMarker&&(d.webkitCompassHeading?this._heading=d.webkitCompassHeading:d.absolute===!0&&(this._heading=-1*d.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.b("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.b("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.b("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let d;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(d={maximumAge:6e5,timeout:0},this._noTimeout=!0):(d=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,d),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const d=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&d()}).catch(console.error):d()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ou,ScaleControl:class{constructor(d){this.options=s.e({},Vi,d),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.aY(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const d=this.options.maxWidth||100,i=this._map,n=i._containerHeight/2,_=i._containerWidth/2-d/2,c=i.unproject([_,n]),f=i.unproject([_+d,n]),g=c.distanceTo(f);if(this.options.unit==="imperial"){const b=3.2808*g;b>5280?this._setScale(d,b/5280,"mile"):this._setScale(d,b,"foot")}else this.options.unit==="nautical"?this._setScale(d,g/1852,"nautical-mile"):g>=1e3?this._setScale(d,g/1e3,"kilometer"):this._setScale(d,g,"meter")}_setScale(d,i,n){this._map._requestDomTask(()=>{const _=function(f){const g=Math.pow(10,`${Math.floor(f)}`.length-1);let b=f/g;return b=b>=10?10:b>=5?5:b>=3?3:b>=2?2:b>=1?1:function(A){const E=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*E)/E}(b),g*b}(i),c=_/i;this._container.innerHTML=this._isNumberFormatSupported&&n!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(_):`${_}&nbsp;${Yn[n]}`,this._container.style.width=d*c+"px"})}onAdd(d){return this._map=d,this._language=d.getLanguage(),this._container=Rt("div","mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(d){this._language=d,this._update()}setUnit(d){this.options.unit=d,this._update()}},FullscreenControl:class{constructor(d){this._fullscreen=!1,d&&d.container&&(d.container instanceof HTMLElement?this._container=d.container:s.w("Full screen control 'container' must be a DOM element.")),s.aY(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=Rt("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const d=this._fullscreenButton=Rt("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Rt("span","mapboxgl-ctrl-icon",d).setAttribute("aria-hidden","true"),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",d)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.E{constructor(d){super(),this.options=s.e(Object.create(Fc),d),s.aY(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(d&&d.className?d.className.trim().split(/\s+/):[])}addTo(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&d.on("preclick",this._onClose),this.options.closeOnMove&&d.on("move",this._onClose),d.on("remove",this.remove),this._update(),d._addPopup(this),this._focusFirstElement(),this._trackPointer?(d.on("mousemove",this._onMouseEvent),d.on("mouseup",this._onMouseEvent),d._canvasContainer.classList.add("mapboxgl-track-pointer")):d.on("move",this._update),this.fire(new s.b("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const d=this._map;return d&&(d.off("move",this._update),d.off("move",this._onClose),d.off("preclick",this._onClose),d.off("click",this._onClose),d.off("remove",this.remove),d.off("mousemove",this._onMouseEvent),d.off("mouseup",this._onMouseEvent),d.off("drag",this._onMouseEvent),d._canvasContainer&&d._canvasContainer.classList.remove("mapboxgl-track-pointer"),d._removePopup(this),this._map=void 0),this.fire(new s.b("close")),this}getLngLat(){return this._lngLat}setLngLat(d){this._lngLat=s.bn.convert(d),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const d=this._map;return d&&(d.off("move",this._update),d.on("mousemove",this._onMouseEvent),d.on("drag",this._onMouseEvent),d._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(d){return this.setDOMContent(document.createTextNode(d))}setHTML(d){const i=document.createDocumentFragment(),n=document.createElement("body");let _;for(n.innerHTML=d;_=n.firstChild,_;)i.appendChild(_);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(d){return this.options.maxWidth=d,this._update(),this}setDOMContent(d){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=Rt("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(d),this.options.closeButton){const n=this._closeButton=Rt("button","mapboxgl-popup-close-button",i);n.type="button",n.setAttribute("aria-label","Close popup"),n.setAttribute("aria-hidden","true"),n.innerHTML="&#215;",n.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(d){return this._classList.add(d),this._updateClassList(),this}removeClassName(d){return this._classList.delete(d),this._updateClassList(),this}setOffset(d){return this.options.offset=d,this._update(),this}toggleClassName(d){let i;return this._classList.delete(d)?i=!1:(this._classList.add(d),i=!0),this._updateClassList(),i}_onMouseEvent(d){this._update(d.point)}_getAnchor(d){if(this.options.anchor)return this.options.anchor;const i=this._map,n=this._container,_=this._pos;if(!i||!n||!_)return"bottom";const c=n.offsetWidth,f=n.offsetHeight,g=_.x<c/2,b=_.x>i.transform.width-c/2;if(_.y+d<f)return g?"top-left":b?"top-right":"top";if(_.y>i.transform.height-f){if(g)return"bottom-left";if(b)return"bottom-right"}return g?"left":b?"right":"bottom"}_updateClassList(){const d=this._container;if(!d)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),d.className=i.join(" ")}_update(d){const i=this._map,n=this._content;if(!i||!this._lngLat&&!this._trackPointer||!n)return;let _=this._container;if(_||(_=this._container=Rt("div","mapboxgl-popup",i.getContainer()),this._tip=Rt("div","mapboxgl-popup-tip",_),_.appendChild(n)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=er(this._lngLat,this._pos,i.transform)),!this._trackPointer||d){const c=this._pos=this._trackPointer&&d?d:i.project(this._lngLat),f=Uc(this.options.offset),g=this._anchor=this._getAnchor(f.y),b=Uc(this.options.offset,g),A=c.add(b).round();i._requestDomTask(()=>{this._container&&g&&(this._container.style.transform=`${Zr[g]} translate(${A.x}px,${A.y}px)`)})}if(!this._marker&&i._showingGlobe()){const c=s.d6(i.transform,this._lngLat)?0:1;this._setOpacity(c)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const d=this._container.querySelector(Bc);d&&d.focus()}_onClose(){this.remove()}_setOpacity(d){this._container&&(this._container.style.opacity=`${d}`),this._content&&(this._content.style.pointerEvents=d?"auto":"none")}},Marker:nu,Style:Fo,LngLat:s.bn,LngLatBounds:s.ad,Point:s.P,MercatorCoordinate:s.L,FreeCameraOptions:Cl,Evented:s.E,config:s.d5,prewarm:s.dp,clearPrewarmedResources:s.dq,get accessToken(){return s.d5.ACCESS_TOKEN},set accessToken(d){s.d5.ACCESS_TOKEN=d},get baseApiUrl(){return s.d5.API_URL},set baseApiUrl(d){s.d5.API_URL=d},get workerCount(){return s.dr.workerCount},set workerCount(d){s.dr.workerCount=d},get maxParallelImageRequests(){return s.d5.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){s.d5.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage(d){s.ds(d)},get workerUrl(){return s.dt.workerUrl},set workerUrl(d){s.dt.workerUrl=d},get workerClass(){return s.dt.workerClass},set workerClass(d){s.dt.workerClass=d},get workerParams(){return s.dt.workerParams},set workerParams(d){s.dt.workerParams=d},get dracoUrl(){return s.du()},set dracoUrl(d){s.dv(d)},get meshoptUrl(){return s.dw()},set meshoptUrl(d){s.dx(d)},setNow:s.f.setNow,restoreNow:s.f.restoreNow}});var it=G;return it})})(Cb);var LA=Cb.exports;const Ed=sf(LA);function Rb(T,I){return T<I?-1:T>I?1:T>=I?0:NaN}function Nb(T){let I=T,P=T;T.length===1&&(I=(it,s)=>T(it)-s,P=PA(T));function F(it,s,ot,ht){for(ot==null&&(ot=0),ht==null&&(ht=it.length);ot<ht;){const At=ot+ht>>>1;P(it[At],s)<0?ot=At+1:ht=At}return ot}function G(it,s,ot,ht){for(ot==null&&(ot=0),ht==null&&(ht=it.length);ot<ht;){const At=ot+ht>>>1;P(it[At],s)>0?ht=At:ot=At+1}return ot}function et(it,s,ot,ht){ot==null&&(ot=0),ht==null&&(ht=it.length);const At=F(it,s,ot,ht-1);return At>ot&&I(it[At-1],s)>-I(it[At],s)?At-1:At}return{left:F,center:et,right:G}}function PA(T){return(I,P)=>Rb(T(I),P)}function wA(T){return T===null?NaN:+T}const WA=Nb(Rb),MA=WA.right;Nb(wA).center;const DA=MA;var ph=Math.sqrt(50),hh=Math.sqrt(10),gh=Math.sqrt(2);function FA(T,I,P){var F,G=-1,et,it,s;if(I=+I,T=+T,P=+P,T===I&&P>0)return[T];if((F=I<T)&&(et=T,T=I,I=et),(s=Lb(T,I,P))===0||!isFinite(s))return[];if(s>0){let ot=Math.round(T/s),ht=Math.round(I/s);for(ot*s<T&&++ot,ht*s>I&&--ht,it=new Array(et=ht-ot+1);++G<et;)it[G]=(ot+G)*s}else{s=-s;let ot=Math.round(T*s),ht=Math.round(I*s);for(ot/s<T&&++ot,ht/s>I&&--ht,it=new Array(et=ht-ot+1);++G<et;)it[G]=(ot+G)/s}return F&&it.reverse(),it}function Lb(T,I,P){var F=(I-T)/Math.max(0,P),G=Math.floor(Math.log(F)/Math.LN10),et=F/Math.pow(10,G);return G>=0?(et>=ph?10:et>=hh?5:et>=gh?2:1)*Math.pow(10,G):-Math.pow(10,-G)/(et>=ph?10:et>=hh?5:et>=gh?2:1)}function BA(T,I,P){var F=Math.abs(I-T)/Math.max(0,P),G=Math.pow(10,Math.floor(Math.log(F)/Math.LN10)),et=F/G;return et>=ph?G*=10:et>=hh?G*=5:et>=gh&&(G*=2),I<T?-G:G}function UA(T,I){switch(arguments.length){case 0:break;case 1:this.range(T);break;default:this.range(I).domain(T);break}return this}function Ah(T,I,P){T.prototype=I.prototype=P,P.constructor=T}function Pb(T,I){var P=Object.create(T.prototype);for(var F in I)P[F]=I[F];return P}function Gu(){}var ku=.7,jm=1/ku,Cd="\\s*([+-]?\\d+)\\s*",zu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kA=/^#([0-9a-f]{3,8})$/,zA=new RegExp(`^rgb\\(${Cd},${Cd},${Cd}\\)$`),HA=new RegExp(`^rgb\\(${qn},${qn},${qn}\\)$`),YA=new RegExp(`^rgba\\(${Cd},${Cd},${Cd},${zu}\\)$`),GA=new RegExp(`^rgba\\(${qn},${qn},${qn},${zu}\\)$`),VA=new RegExp(`^hsl\\(${zu},${qn},${qn}\\)$`),XA=new RegExp(`^hsla\\(${zu},${qn},${qn},${zu}\\)$`),j1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ah(Gu,Hu,{copy(T){return Object.assign(new this.constructor,this,T)},displayable(){return this.rgb().displayable()},hex:q1,formatHex:q1,formatHex8:KA,formatHsl:jA,formatRgb:$1,toString:$1});function q1(){return this.rgb().formatHex()}function KA(){return this.rgb().formatHex8()}function jA(){return wb(this).formatHsl()}function $1(){return this.rgb().formatRgb()}function Hu(T){var I,P;return T=(T+"").trim().toLowerCase(),(I=kA.exec(T))?(P=I[1].length,I=parseInt(I[1],16),P===6?Z1(I):P===3?new No(I>>8&15|I>>4&240,I>>4&15|I&240,(I&15)<<4|I&15,1):P===8?Bm(I>>24&255,I>>16&255,I>>8&255,(I&255)/255):P===4?Bm(I>>12&15|I>>8&240,I>>8&15|I>>4&240,I>>4&15|I&240,((I&15)<<4|I&15)/255):null):(I=zA.exec(T))?new No(I[1],I[2],I[3],1):(I=HA.exec(T))?new No(I[1]*255/100,I[2]*255/100,I[3]*255/100,1):(I=YA.exec(T))?Bm(I[1],I[2],I[3],I[4]):(I=GA.exec(T))?Bm(I[1]*255/100,I[2]*255/100,I[3]*255/100,I[4]):(I=VA.exec(T))?tb(I[1],I[2]/100,I[3]/100,1):(I=XA.exec(T))?tb(I[1],I[2]/100,I[3]/100,I[4]):j1.hasOwnProperty(T)?Z1(j1[T]):T==="transparent"?new No(NaN,NaN,NaN,0):null}function Z1(T){return new No(T>>16&255,T>>8&255,T&255,1)}function Bm(T,I,P,F){return F<=0&&(T=I=P=NaN),new No(T,I,P,F)}function qA(T){return T instanceof Gu||(T=Hu(T)),T?(T=T.rgb(),new No(T.r,T.g,T.b,T.opacity)):new No}function yh(T,I,P,F){return arguments.length===1?qA(T):new No(T,I,P,F??1)}function No(T,I,P,F){this.r=+T,this.g=+I,this.b=+P,this.opacity=+F}Ah(No,yh,Pb(Gu,{brighter(T){return T=T==null?jm:Math.pow(jm,T),new No(this.r*T,this.g*T,this.b*T,this.opacity)},darker(T){return T=T==null?ku:Math.pow(ku,T),new No(this.r*T,this.g*T,this.b*T,this.opacity)},rgb(){return this},clamp(){return new No(gr(this.r),gr(this.g),gr(this.b),qm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J1,formatHex:J1,formatHex8:$A,formatRgb:Q1,toString:Q1}));function J1(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}`}function $A(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}${hr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Q1(){const T=qm(this.opacity);return`${T===1?"rgb(":"rgba("}${gr(this.r)}, ${gr(this.g)}, ${gr(this.b)}${T===1?")":`, ${T})`}`}function qm(T){return isNaN(T)?1:Math.max(0,Math.min(1,T))}function gr(T){return Math.max(0,Math.min(255,Math.round(T)||0))}function hr(T){return T=gr(T),(T<16?"0":"")+T.toString(16)}function tb(T,I,P,F){return F<=0?T=I=P=NaN:P<=0||P>=1?T=I=NaN:I<=0&&(T=NaN),new Tn(T,I,P,F)}function wb(T){if(T instanceof Tn)return new Tn(T.h,T.s,T.l,T.opacity);if(T instanceof Gu||(T=Hu(T)),!T)return new Tn;if(T instanceof Tn)return T;T=T.rgb();var I=T.r/255,P=T.g/255,F=T.b/255,G=Math.min(I,P,F),et=Math.max(I,P,F),it=NaN,s=et-G,ot=(et+G)/2;return s?(I===et?it=(P-F)/s+(P<F)*6:P===et?it=(F-I)/s+2:it=(I-P)/s+4,s/=ot<.5?et+G:2-et-G,it*=60):s=ot>0&&ot<1?0:it,new Tn(it,s,ot,T.opacity)}function ZA(T,I,P,F){return arguments.length===1?wb(T):new Tn(T,I,P,F??1)}function Tn(T,I,P,F){this.h=+T,this.s=+I,this.l=+P,this.opacity=+F}Ah(Tn,ZA,Pb(Gu,{brighter(T){return T=T==null?jm:Math.pow(jm,T),new Tn(this.h,this.s,this.l*T,this.opacity)},darker(T){return T=T==null?ku:Math.pow(ku,T),new Tn(this.h,this.s,this.l*T,this.opacity)},rgb(){var T=this.h%360+(this.h<0)*360,I=isNaN(T)||isNaN(this.s)?0:this.s,P=this.l,F=P+(P<.5?P:1-P)*I,G=2*P-F;return new No(ah(T>=240?T-240:T+120,G,F),ah(T,G,F),ah(T<120?T+240:T-120,G,F),this.opacity)},clamp(){return new Tn(eb(this.h),Um(this.s),Um(this.l),qm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const T=qm(this.opacity);return`${T===1?"hsl(":"hsla("}${eb(this.h)}, ${Um(this.s)*100}%, ${Um(this.l)*100}%${T===1?")":`, ${T})`}`}}));function eb(T){return T=(T||0)%360,T<0?T+360:T}function Um(T){return Math.max(0,Math.min(1,T||0))}function ah(T,I,P){return(T<60?I+(P-I)*T/60:T<180?P:T<240?I+(P-I)*(240-T)/60:I)*255}const vh=T=>()=>T;function JA(T,I){return function(P){return T+P*I}}function QA(T,I,P){return T=Math.pow(T,P),I=Math.pow(I,P)-T,P=1/P,function(F){return Math.pow(T+F*I,P)}}function tv(T){return(T=+T)==1?Wb:function(I,P){return P-I?QA(I,P,T):vh(isNaN(I)?P:I)}}function Wb(T,I){var P=I-T;return P?JA(T,P):vh(isNaN(T)?I:T)}const ab=function T(I){var P=tv(I);function F(G,et){var it=P((G=yh(G)).r,(et=yh(et)).r),s=P(G.g,et.g),ot=P(G.b,et.b),ht=Wb(G.opacity,et.opacity);return function(At){return G.r=it(At),G.g=s(At),G.b=ot(At),G.opacity=ht(At),G+""}}return F.gamma=T,F}(1);function ev(T,I){I||(I=[]);var P=T?Math.min(I.length,T.length):0,F=I.slice(),G;return function(et){for(G=0;G<P;++G)F[G]=T[G]*(1-et)+I[G]*et;return F}}function av(T){return ArrayBuffer.isView(T)&&!(T instanceof DataView)}function iv(T,I){var P=I?I.length:0,F=T?Math.min(P,T.length):0,G=new Array(F),et=new Array(P),it;for(it=0;it<F;++it)G[it]=Eh(T[it],I[it]);for(;it<P;++it)et[it]=I[it];return function(s){for(it=0;it<F;++it)et[it]=G[it](s);return et}}function ov(T,I){var P=new Date;return T=+T,I=+I,function(F){return P.setTime(T*(1-F)+I*F),P}}function $m(T,I){return T=+T,I=+I,function(P){return T*(1-P)+I*P}}function nv(T,I){var P={},F={},G;(T===null||typeof T!="object")&&(T={}),(I===null||typeof I!="object")&&(I={});for(G in I)G in T?P[G]=Eh(T[G],I[G]):F[G]=I[G];return function(et){for(G in P)F[G]=P[G](et);return F}}var bh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ih=new RegExp(bh.source,"g");function sv(T){return function(){return T}}function lv(T){return function(I){return T(I)+""}}function rv(T,I){var P=bh.lastIndex=ih.lastIndex=0,F,G,et,it=-1,s=[],ot=[];for(T=T+"",I=I+"";(F=bh.exec(T))&&(G=ih.exec(I));)(et=G.index)>P&&(et=I.slice(P,et),s[it]?s[it]+=et:s[++it]=et),(F=F[0])===(G=G[0])?s[it]?s[it]+=G:s[++it]=G:(s[++it]=null,ot.push({i:it,x:$m(F,G)})),P=ih.lastIndex;return P<I.length&&(et=I.slice(P),s[it]?s[it]+=et:s[++it]=et),s.length<2?ot[0]?lv(ot[0].x):sv(I):(I=ot.length,function(ht){for(var At=0,Yt;At<I;++At)s[(Yt=ot[At]).i]=Yt.x(ht);return s.join("")})}function Eh(T,I){var P=typeof I,F;return I==null||P==="boolean"?vh(I):(P==="number"?$m:P==="string"?(F=Hu(I))?(I=F,ab):rv:I instanceof Hu?ab:I instanceof Date?ov:av(I)?ev:Array.isArray(I)?iv:typeof I.valueOf!="function"&&typeof I.toString!="function"||isNaN(I)?nv:$m)(T,I)}function dv(T,I){return T=+T,I=+I,function(P){return Math.round(T*(1-P)+I*P)}}function _v(T){return function(){return T}}function uv(T){return+T}var ib=[0,1];function cl(T){return T}function Th(T,I){return(I-=T=+T)?function(P){return(P-T)/I}:_v(isNaN(I)?NaN:.5)}function cv(T,I){var P;return T>I&&(P=T,T=I,I=P),function(F){return Math.max(T,Math.min(I,F))}}function mv(T,I,P){var F=T[0],G=T[1],et=I[0],it=I[1];return G<F?(F=Th(G,F),et=P(it,et)):(F=Th(F,G),et=P(et,it)),function(s){return et(F(s))}}function fv(T,I,P){var F=Math.min(T.length,I.length)-1,G=new Array(F),et=new Array(F),it=-1;for(T[F]<T[0]&&(T=T.slice().reverse(),I=I.slice().reverse());++it<F;)G[it]=Th(T[it],T[it+1]),et[it]=P(I[it],I[it+1]);return function(s){var ot=DA(T,s,1,F)-1;return et[ot](G[ot](s))}}function pv(T,I){return I.domain(T.domain()).range(T.range()).interpolate(T.interpolate()).clamp(T.clamp()).unknown(T.unknown())}function hv(){var T=ib,I=ib,P=Eh,F,G,et,it=cl,s,ot,ht;function At(){var Rt=Math.min(T.length,I.length);return it!==cl&&(it=cv(T[0],T[Rt-1])),s=Rt>2?fv:mv,ot=ht=null,Yt}function Yt(Rt){return Rt==null||isNaN(Rt=+Rt)?et:(ot||(ot=s(T.map(F),I,P)))(F(it(Rt)))}return Yt.invert=function(Rt){return it(G((ht||(ht=s(I,T.map(F),$m)))(Rt)))},Yt.domain=function(Rt){return arguments.length?(T=Array.from(Rt,uv),At()):T.slice()},Yt.range=function(Rt){return arguments.length?(I=Array.from(Rt),At()):I.slice()},Yt.rangeRound=function(Rt){return I=Array.from(Rt),P=dv,At()},Yt.clamp=function(Rt){return arguments.length?(it=Rt?!0:cl,At()):it!==cl},Yt.interpolate=function(Rt){return arguments.length?(P=Rt,At()):P},Yt.unknown=function(Rt){return arguments.length?(et=Rt,Yt):et},function(Rt,le){return F=Rt,G=le,At()}}function gv(T){return Math.abs(T=Math.round(T))>=1e21?T.toLocaleString("en").replace(/,/g,""):T.toString(10)}function Zm(T,I){if((P=(T=I?T.toExponential(I-1):T.toExponential()).indexOf("e"))<0)return null;var P,F=T.slice(0,P);return[F.length>1?F[0]+F.slice(2):F,+T.slice(P+1)]}function Ld(T){return T=Zm(Math.abs(T)),T?T[1]:NaN}function yv(T,I){return function(P,F){for(var G=P.length,et=[],it=0,s=T[0],ot=0;G>0&&s>0&&(ot+s+1>F&&(s=Math.max(1,F-ot)),et.push(P.substring(G-=s,G+s)),!((ot+=s+1)>F));)s=T[it=(it+1)%T.length];return et.reverse().join(I)}}function bv(T){return function(I){return I.replace(/[0-9]/g,function(P){return T[+P]})}}var Tv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jm(T){if(!(I=Tv.exec(T)))throw new Error("invalid format: "+T);var I;return new Ih({fill:I[1],align:I[2],sign:I[3],symbol:I[4],zero:I[5],width:I[6],comma:I[7],precision:I[8]&&I[8].slice(1),trim:I[9],type:I[10]})}Jm.prototype=Ih.prototype;function Ih(T){this.fill=T.fill===void 0?" ":T.fill+"",this.align=T.align===void 0?">":T.align+"",this.sign=T.sign===void 0?"-":T.sign+"",this.symbol=T.symbol===void 0?"":T.symbol+"",this.zero=!!T.zero,this.width=T.width===void 0?void 0:+T.width,this.comma=!!T.comma,this.precision=T.precision===void 0?void 0:+T.precision,this.trim=!!T.trim,this.type=T.type===void 0?"":T.type+""}Ih.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xv(T){t:for(var I=T.length,P=1,F=-1,G;P<I;++P)switch(T[P]){case".":F=G=P;break;case"0":F===0&&(F=P),G=P;break;default:if(!+T[P])break t;F>0&&(F=0);break}return F>0?T.slice(0,F)+T.slice(G+1):T}var Mb;function Av(T,I){var P=Zm(T,I);if(!P)return T+"";var F=P[0],G=P[1],et=G-(Mb=Math.max(-8,Math.min(8,Math.floor(G/3)))*3)+1,it=F.length;return et===it?F:et>it?F+new Array(et-it+1).join("0"):et>0?F.slice(0,et)+"."+F.slice(et):"0."+new Array(1-et).join("0")+Zm(T,Math.max(0,I+et-1))[0]}function ob(T,I){var P=Zm(T,I);if(!P)return T+"";var F=P[0],G=P[1];return G<0?"0."+new Array(-G).join("0")+F:F.length>G+1?F.slice(0,G+1)+"."+F.slice(G+1):F+new Array(G-F.length+2).join("0")}const nb={"%":(T,I)=>(T*100).toFixed(I),b:T=>Math.round(T).toString(2),c:T=>T+"",d:gv,e:(T,I)=>T.toExponential(I),f:(T,I)=>T.toFixed(I),g:(T,I)=>T.toPrecision(I),o:T=>Math.round(T).toString(8),p:(T,I)=>ob(T*100,I),r:ob,s:Av,X:T=>Math.round(T).toString(16).toUpperCase(),x:T=>Math.round(T).toString(16)};function sb(T){return T}var lb=Array.prototype.map,rb=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vv(T){var I=T.grouping===void 0||T.thousands===void 0?sb:yv(lb.call(T.grouping,Number),T.thousands+""),P=T.currency===void 0?"":T.currency[0]+"",F=T.currency===void 0?"":T.currency[1]+"",G=T.decimal===void 0?".":T.decimal+"",et=T.numerals===void 0?sb:bv(lb.call(T.numerals,String)),it=T.percent===void 0?"%":T.percent+"",s=T.minus===void 0?"":T.minus+"",ot=T.nan===void 0?"NaN":T.nan+"";function ht(Yt){Yt=Jm(Yt);var Rt=Yt.fill,le=Yt.align,Kt=Yt.sign,we=Yt.symbol,Ot=Yt.zero,ue=Yt.width,be=Yt.comma,Me=Yt.precision,Fa=Yt.trim,ia=Yt.type;ia==="n"?(be=!0,ia="g"):nb[ia]||(Me===void 0&&(Me=12),Fa=!0,ia="g"),(Ot||Rt==="0"&&le==="=")&&(Ot=!0,Rt="0",le="=");var Oa=we==="$"?P:we==="#"&&/[boxX]/.test(ia)?"0"+ia.toLowerCase():"",Ai=we==="$"?F:/[%p]/.test(ia)?it:"",jt=nb[ia],yo=/[defgprs%]/.test(ia);Me=Me===void 0?6:/[gprs]/.test(ia)?Math.max(1,Math.min(21,Me)):Math.max(0,Math.min(20,Me));function vn(Oe){var ni=Oa,ki=Ai,oe,Qi,vi;if(ia==="c")ki=jt(Oe)+ki,Oe="";else{Oe=+Oe;var Ve=Oe<0||1/Oe<0;if(Oe=isNaN(Oe)?ot:jt(Math.abs(Oe),Me),Fa&&(Oe=xv(Oe)),Ve&&+Oe==0&&Kt!=="+"&&(Ve=!1),ni=(Ve?Kt==="("?Kt:s:Kt==="-"||Kt==="("?"":Kt)+ni,ki=(ia==="s"?rb[8+Mb/3]:"")+ki+(Ve&&Kt==="("?")":""),yo){for(oe=-1,Qi=Oe.length;++oe<Qi;)if(vi=Oe.charCodeAt(oe),48>vi||vi>57){ki=(vi===46?G+Oe.slice(oe+1):Oe.slice(oe))+ki,Oe=Oe.slice(0,oe);break}}}be&&!Ot&&(Oe=I(Oe,1/0));var Po=ni.length+Oe.length+ki.length,wi=Po<ue?new Array(ue-Po+1).join(Rt):"";switch(be&&Ot&&(Oe=I(wi+Oe,wi.length?ue-ki.length:1/0),wi=""),le){case"<":Oe=ni+Oe+ki+wi;break;case"=":Oe=ni+wi+Oe+ki;break;case"^":Oe=wi.slice(0,Po=wi.length>>1)+ni+Oe+ki+wi.slice(Po);break;default:Oe=wi+ni+Oe+ki;break}return et(Oe)}return vn.toString=function(){return Yt+""},vn}function At(Yt,Rt){var le=ht((Yt=Jm(Yt),Yt.type="f",Yt)),Kt=Math.max(-8,Math.min(8,Math.floor(Ld(Rt)/3)))*3,we=Math.pow(10,-Kt),Ot=rb[8+Kt/3];return function(ue){return le(we*ue)+Ot}}return{format:ht,formatPrefix:At}}var km,Db,Fb;Ev({thousands:",",grouping:[3],currency:["$",""]});function Ev(T){return km=vv(T),Db=km.format,Fb=km.formatPrefix,km}function Iv(T){return Math.max(0,-Ld(Math.abs(T)))}function Ov(T,I){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ld(I)/3)))*3-Ld(Math.abs(T)))}function Cv(T,I){return T=Math.abs(T),I=Math.abs(I)-T,Math.max(0,Ld(I)-Ld(T))+1}function Sv(T,I,P,F){var G=BA(T,I,P),et;switch(F=Jm(F??",f"),F.type){case"s":{var it=Math.max(Math.abs(T),Math.abs(I));return F.precision==null&&!isNaN(et=Ov(G,it))&&(F.precision=et),Fb(F,it)}case"":case"e":case"g":case"p":case"r":{F.precision==null&&!isNaN(et=Cv(G,Math.max(Math.abs(T),Math.abs(I))))&&(F.precision=et-(F.type==="e"));break}case"f":case"%":{F.precision==null&&!isNaN(et=Iv(G))&&(F.precision=et-(F.type==="%")*2);break}}return Db(F)}function Rv(T){var I=T.domain;return T.ticks=function(P){var F=I();return FA(F[0],F[F.length-1],P??10)},T.tickFormat=function(P,F){var G=I();return Sv(G[0],G[G.length-1],P??10,F)},T.nice=function(P){P==null&&(P=10);var F=I(),G=0,et=F.length-1,it=F[G],s=F[et],ot,ht,At=10;for(s<it&&(ht=it,it=s,s=ht,ht=G,G=et,et=ht);At-- >0;){if(ht=Lb(it,s,P),ht===ot)return F[G]=it,F[et]=s,I(F);if(ht>0)it=Math.floor(it/ht)*ht,s=Math.ceil(s/ht)*ht;else if(ht<0)it=Math.ceil(it*ht)/ht,s=Math.floor(s*ht)/ht;else break;ot=ht}return T},T}function db(T){return function(I){return I<0?-Math.pow(-I,T):Math.pow(I,T)}}function Nv(T){return T<0?-Math.sqrt(-T):Math.sqrt(T)}function Lv(T){return T<0?-T*T:T*T}function Pv(T){var I=T(cl,cl),P=1;function F(){return P===1?T(cl,cl):P===.5?T(Nv,Lv):T(db(P),db(1/P))}return I.exponent=function(G){return arguments.length?(P=+G,F()):P},Rv(I)}function Bb(){var T=Pv(hv());return T.copy=function(){return pv(T,Bb()).exponent(T.exponent())},UA.apply(T,arguments),T}function wv(){return Bb.apply(null,arguments).exponent(.5)}function _b(T,I,P){const F=T.slice();return F[2]=I[P].label,F[3]=I[P].value,F}function ub(T){let I,P,F,G,et,it,s=T[2]+"",ot,ht;return{c(){I=Ji("div"),P=k1("svg"),F=k1("circle"),et=xn(),it=Ji("span"),ot=Ab(s),ht=xn(),bi(F,"cx","20"),bi(F,"cy","20"),bi(F,"r",G=T[0](T[3])),bi(F,"fill","grey"),bi(P,"width","40"),bi(P,"height","40"),bi(it,"class","svelte-1tl7k48"),bi(I,"class","legend-item svelte-1tl7k48")},m(At,Yt){Bu(At,I,Yt),ri(I,P),ri(P,F),ri(I,et),ri(I,it),ri(it,ot),ri(I,ht)},p(At,Yt){Yt&1&&G!==(G=At[0](At[3]))&&bi(F,"r",G)},d(At){At&&Nd(I)}}}function Wv(T){let I,P,F,G,et=T[1],it=[];for(let s=0;s<et.length;s+=1)it[s]=ub(_b(T,et,s));return{c(){I=Ji("div"),P=Ji("span"),P.textContent="Measured in dry tons",F=xn(),G=Ji("div");for(let s=0;s<it.length;s+=1)it[s].c();bi(P,"class","dek"),bi(G,"class","items svelte-1tl7k48"),bi(I,"class","legend svelte-1tl7k48")},m(s,ot){Bu(s,I,ot),ri(I,P),ri(I,F),ri(I,G);for(let ht=0;ht<it.length;ht+=1)it[ht]&&it[ht].m(G,null)},p(s,[ot]){if(ot&3){et=s[1];let ht;for(ht=0;ht<et.length;ht+=1){const At=_b(s,et,ht);it[ht]?it[ht].p(At,ot):(it[ht]=ub(At),it[ht].c(),it[ht].m(G,null))}for(;ht<it.length;ht+=1)it[ht].d(1);it.length=et.length}},i:go,o:go,d(s){s&&Nd(I),Qx(it,s)}}}function Mv(T,I,P){let{rScale:F}=I;const G=[{label:"1k",value:1e3},{label:"10k",value:1e4},{label:"100k",value:1e5}];return T.$$set=et=>{"rScale"in et&&P(0,F=et.rScale)},[F,G]}class Dv extends nf{constructor(I){super(),of(this,I,Mv,Wv,Yu,{rScale:0})}}var Wd=Bv,Fv=Object.prototype.hasOwnProperty;function Bv(){for(var T={},I=0;I<arguments.length;I++){var P=arguments[I];for(var F in P)Fv.call(P,F)&&(T[F]=P[F])}return T}var Ub={exports:{}};(function(T,I){(function(){var P={};T.exports=P,P.simpleFilter=function(F,G){return G.filter(function(et){return P.test(F,et)})},P.test=function(F,G){return P.match(F,G)!==null},P.match=function(F,G,et){et=et||{};var it=0,s=[],ot=G.length,ht=0,At=0,Yt=et.pre||"",Rt=et.post||"",le=et.caseSensitive&&G||G.toLowerCase(),Kt;F=et.caseSensitive&&F||F.toLowerCase();for(var we=0;we<ot;we++)Kt=G[we],le[we]===F[it]?(Kt=Yt+Kt+Rt,it+=1,At+=1+At):At=0,ht+=At,s[s.length]=Kt;return it===F.length?(ht=le===F?1/0:ht,{rendered:s.join(""),score:ht}):null},P.filter=function(F,G,et){return!G||G.length===0?[]:typeof F!="string"?G:(et=et||{},G.reduce(function(it,s,ot,ht){var At=s;et.extract&&(At=et.extract(s));var Yt=P.match(F,At,et);return Yt!=null&&(it[it.length]={string:Yt.rendered,score:Yt.score,index:ot,original:s}),it},[]).sort(function(it,s){var ot=s.score-it.score;return ot||it.index-s.index}))}})()})(Ub);var Uv=Ub.exports,Lo=function(T){return this.component=T,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,T.el.parentNode.insertBefore(this.wrapper,T.el.nextSibling),this};Lo.prototype.show=function(){this.element.style.display="block"};Lo.prototype.hide=function(){this.element.style.display="none"};Lo.prototype.add=function(T){this.items.push(T)};Lo.prototype.clear=function(){this.items=[],this.active=0};Lo.prototype.isEmpty=function(){return!this.items.length};Lo.prototype.isVisible=function(){return this.element.style.display==="block"};Lo.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var T=0;T<this.items.length;T++)this.drawItem(this.items[T],this.active===T);this.show()};Lo.prototype.drawItem=function(T,I){var P=document.createElement("li"),F=document.createElement("a");I&&(P.className+=" active"),F.innerHTML=T.string,P.appendChild(F),this.element.appendChild(P),P.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),P.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,T)}).bind(this))};Lo.prototype.handleMouseUp=function(T){this.selectingListItem=!1,this.component.value(T.original),this.clear(),this.draw()};Lo.prototype.move=function(T){this.active=T,this.draw()};Lo.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Lo.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Lo.prototype.drawError=function(T){var I=document.createElement("li");I.innerHTML=T,this.element.appendChild(I),this.show()};var kv=Lo,zv=Wd,Hv=Uv,Yv=kv,_o=function(T,I,P){return P=P||{},this.options=zv({minLength:2,limit:5,filter:!0,hideOnBlur:!0},P),this.el=T,this.data=I||[],this.list=new Yv(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(F){this.handleKeyUp(F.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(F){this.handleKeyDown(F)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(F){this.handlePaste(F)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};_o.prototype.handleKeyUp=function(T){T===40||T===38||T===27||T===13||T===9||this.handleInputChange(this.el.value)};_o.prototype.handleKeyDown=function(T){switch(T.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&T.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};_o.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};_o.prototype.handlePaste=function(T){if(T.clipboardData)this.handleInputChange(T.clipboardData.getData("Text"));else{var I=this;setTimeout(function(){I.handleInputChange(T.target.value)},100)}};_o.prototype.handleInputChange=function(T){if(this.query=this.normalize(T),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(I){for(var P=0;P<I.length&&(this.list.add(I[P]),P!==this.options.limit-1);P++);this.list.draw()}).bind(this))};_o.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};_o.prototype.update=function(T){this.data=T,this.handleKeyUp()};_o.prototype.clear=function(){this.data=[],this.list.clear()};_o.prototype.normalize=function(T){return T=T.toLowerCase(),T};_o.prototype.match=function(T,I){return T.indexOf(I)>-1};_o.prototype.value=function(T){if(this.selected=T,this.el.value=this.getItemValue(T),document.createEvent){var I=document.createEvent("HTMLEvents");I.initEvent("change",!0,!1),this.el.dispatchEvent(I)}else this.el.fireEvent("onchange")};_o.prototype.getCandidates=function(T){var I={pre:"<strong>",post:"</strong>",extract:(function(F){return this.getItemValue(F)}).bind(this)},P;this.options.filter?(P=Hv.filter(this.query,this.data,I),P=P.map((function(F){return{original:F.original,string:this.render(F.original,F.string)}}).bind(this))):P=this.data.map((function(F){var G=this.render(F);return{original:F,string:G}}).bind(this)),T(P)};_o.prototype.getItemValue=function(T){return T};_o.prototype.render=function(T,I){if(I)return I;for(var P=T.original?this.getItemValue(T.original):this.getItemValue(T),F=this.normalize(P),G=F.lastIndexOf(this.query);G>-1;){var et=G+this.query.length;P=P.slice(0,G)+"<strong>"+P.slice(G,et)+"</strong>"+P.slice(et),G=F.slice(0,G).lastIndexOf(this.query)}return P};_o.prototype.renderError=function(T){this.list.drawError(T)};var Gv=_o,kb=Gv,Vv=kb;typeof window<"u"&&(window.Suggestions=kb);var Oh={exports:{}},Sd=typeof Reflect=="object"?Reflect:null,cb=Sd&&typeof Sd.apply=="function"?Sd.apply:function(I,P,F){return Function.prototype.apply.call(I,P,F)},Ym;Sd&&typeof Sd.ownKeys=="function"?Ym=Sd.ownKeys:Object.getOwnPropertySymbols?Ym=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:Ym=function(I){return Object.getOwnPropertyNames(I)};function Xv(T){console&&console.warn&&console.warn(T)}var zb=Number.isNaN||function(I){return I!==I};function oi(){oi.init.call(this)}Oh.exports=oi;Oh.exports.once=$v;oi.EventEmitter=oi;oi.prototype._events=void 0;oi.prototype._eventsCount=0;oi.prototype._maxListeners=void 0;var mb=10;function lf(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(oi,"defaultMaxListeners",{enumerable:!0,get:function(){return mb},set:function(T){if(typeof T!="number"||T<0||zb(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");mb=T}});oi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};oi.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||zb(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function Hb(T){return T._maxListeners===void 0?oi.defaultMaxListeners:T._maxListeners}oi.prototype.getMaxListeners=function(){return Hb(this)};oi.prototype.emit=function(I){for(var P=[],F=1;F<arguments.length;F++)P.push(arguments[F]);var G=I==="error",et=this._events;if(et!==void 0)G=G&&et.error===void 0;else if(!G)return!1;if(G){var it;if(P.length>0&&(it=P[0]),it instanceof Error)throw it;var s=new Error("Unhandled error."+(it?" ("+it.message+")":""));throw s.context=it,s}var ot=et[I];if(ot===void 0)return!1;if(typeof ot=="function")cb(ot,this,P);else for(var ht=ot.length,At=Kb(ot,ht),F=0;F<ht;++F)cb(At[F],this,P);return!0};function Yb(T,I,P,F){var G,et,it;if(lf(P),et=T._events,et===void 0?(et=T._events=Object.create(null),T._eventsCount=0):(et.newListener!==void 0&&(T.emit("newListener",I,P.listener?P.listener:P),et=T._events),it=et[I]),it===void 0)it=et[I]=P,++T._eventsCount;else if(typeof it=="function"?it=et[I]=F?[P,it]:[it,P]:F?it.unshift(P):it.push(P),G=Hb(T),G>0&&it.length>G&&!it.warned){it.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+it.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=T,s.type=I,s.count=it.length,Xv(s)}return T}oi.prototype.addListener=function(I,P){return Yb(this,I,P,!1)};oi.prototype.on=oi.prototype.addListener;oi.prototype.prependListener=function(I,P){return Yb(this,I,P,!0)};function Kv(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Gb(T,I,P){var F={fired:!1,wrapFn:void 0,target:T,type:I,listener:P},G=Kv.bind(F);return G.listener=P,F.wrapFn=G,G}oi.prototype.once=function(I,P){return lf(P),this.on(I,Gb(this,I,P)),this};oi.prototype.prependOnceListener=function(I,P){return lf(P),this.prependListener(I,Gb(this,I,P)),this};oi.prototype.removeListener=function(I,P){var F,G,et,it,s;if(lf(P),G=this._events,G===void 0)return this;if(F=G[I],F===void 0)return this;if(F===P||F.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete G[I],G.removeListener&&this.emit("removeListener",I,F.listener||P));else if(typeof F!="function"){for(et=-1,it=F.length-1;it>=0;it--)if(F[it]===P||F[it].listener===P){s=F[it].listener,et=it;break}if(et<0)return this;et===0?F.shift():jv(F,et),F.length===1&&(G[I]=F[0]),G.removeListener!==void 0&&this.emit("removeListener",I,s||P)}return this};oi.prototype.off=oi.prototype.removeListener;oi.prototype.removeAllListeners=function(I){var P,F,G;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[I]),this;if(arguments.length===0){var et=Object.keys(F),it;for(G=0;G<et.length;++G)it=et[G],it!=="removeListener"&&this.removeAllListeners(it);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=F[I],typeof P=="function")this.removeListener(I,P);else if(P!==void 0)for(G=P.length-1;G>=0;G--)this.removeListener(I,P[G]);return this};function Vb(T,I,P){var F=T._events;if(F===void 0)return[];var G=F[I];return G===void 0?[]:typeof G=="function"?P?[G.listener||G]:[G]:P?qv(G):Kb(G,G.length)}oi.prototype.listeners=function(I){return Vb(this,I,!0)};oi.prototype.rawListeners=function(I){return Vb(this,I,!1)};oi.listenerCount=function(T,I){return typeof T.listenerCount=="function"?T.listenerCount(I):Xb.call(T,I)};oi.prototype.listenerCount=Xb;function Xb(T){var I=this._events;if(I!==void 0){var P=I[T];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}oi.prototype.eventNames=function(){return this._eventsCount>0?Ym(this._events):[]};function Kb(T,I){for(var P=new Array(I),F=0;F<I;++F)P[F]=T[F];return P}function jv(T,I){for(;I+1<T.length;I++)T[I]=T[I+1];T.pop()}function qv(T){for(var I=new Array(T.length),P=0;P<I.length;++P)I[P]=T[P].listener||T[P];return I}function $v(T,I){return new Promise(function(P,F){function G(it){T.removeListener(I,et),F(it)}function et(){typeof T.removeListener=="function"&&T.removeListener("error",G),P([].slice.call(arguments))}jb(T,I,et,{once:!0}),I!=="error"&&Zv(T,G,{once:!0})})}function Zv(T,I,P){typeof T.on=="function"&&jb(T,"error",I,P)}function jb(T,I,P,F){if(typeof T.on=="function")F.once?T.once(I,P):T.on(I,P);else if(typeof T.addEventListener=="function")T.addEventListener(I,function G(et){F.once&&T.removeEventListener(I,G),P(et)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}var Jv=Oh.exports,Qv={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function tE(T){var I=T.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return I?{key:I[1],value:I[2]}:null}function eE(T){var I=T.match(/<?([^>]*)>(.*)/);if(!I)return null;var P=I[1],F=I[2].split(";"),G=null,et=F.reduce(function(it,s){var ot=tE(s);return ot?ot.key==="rel"?(G||(G=ot.value),it):(it[ot.key]=ot.value,it):it},{});return G?{url:P,rel:G,params:et}:null}function aE(T){return T?T.split(/,\s*</).reduce(function(I,P){var F=eE(P);if(!F)return I;var G=F.rel.split(/\s+/);return G.forEach(function(et){I[et]||(I[et]={url:F.url,params:F.params})}),I},{}):{}}var iE=aE,oE=iE;function Ch(T,I){this.request=T,this.headers=I.headers,this.rawBody=I.body,this.statusCode=I.statusCode;try{this.body=JSON.parse(I.body||"{}")}catch{this.body=I.body}this.links=oE(this.headers.link)}Ch.prototype.hasNextPage=function(){return!!this.links.next};Ch.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var nE=Ch,rf={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},fb=rf;function sE(T){var I=T.type||fb.ERROR_HTTP,P;if(T.body)try{P=JSON.parse(T.body)}catch{P=T.body}else P=null;var F=T.message||null;F||(typeof P=="string"?F=P:P&&typeof P.message=="string"?F=P.message:I===fb.ERROR_REQUEST_ABORTED&&(F="Request aborted")),this.message=F,this.type=I,this.statusCode=T.statusCode||null,this.request=T.request,this.body=P}var lE=sE;function rE(T){var I=T.indexOf(":"),P=T.substring(0,I).trim().toLowerCase(),F=T.substring(I+1).trim();return{name:P,value:F}}function dE(T){var I={};return T&&T.trim().split(/[\r|\n]+/).forEach(function(P){var F=rE(P);I[F.name]=F.value}),I}var _E=dE,uE=nE,pb=lE,oh=rf,cE=_E,Qm={};function mE(T){var I=Qm[T.id];I&&(I.abort(),delete Qm[T.id])}function fE(T,I){return new uE(T,{body:I.response,headers:cE(I.getAllResponseHeaders()),statusCode:I.status})}function hb(T){var I=T.total,P=T.loaded,F=100*P/I;return{total:I,transferred:P,percent:F}}function qb(T,I){return new Promise(function(P,F){I.onprogress=function(it){T.emitter.emit(oh.EVENT_PROGRESS_DOWNLOAD,hb(it))};var G=T.file;G&&(I.upload.onprogress=function(it){T.emitter.emit(oh.EVENT_PROGRESS_UPLOAD,hb(it))}),I.onerror=function(it){F(it)},I.onabort=function(){var it=new pb({request:T,type:oh.ERROR_REQUEST_ABORTED});F(it)},I.onload=function(){if(delete Qm[T.id],I.status<200||I.status>=400){var it=new pb({request:T,body:I.response,statusCode:I.status});F(it);return}P(I)};var et=T.body;typeof et=="string"?I.send(et):et?I.send(JSON.stringify(et)):G?I.send(G):I.send(),Qm[T.id]=I}).then(function(P){return fE(T,P)})}function $b(T,I){var P=T.url(I),F=new window.XMLHttpRequest;return F.open(T.method,P),Object.keys(T.headers).forEach(function(G){F.setRequestHeader(G,T.headers[G])}),F}function pE(T){return Promise.resolve().then(function(){var I=$b(T,T.client.accessToken);return qb(T,I)})}var hE={browserAbort:mE,sendRequestXhr:qb,browserSend:pE,createRequestXhr:$b},tf={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */tf.exports;(function(T,I){(function(P){var F=I,G=T&&T.exports==F&&T,et=typeof An=="object"&&An;(et.global===et||et.window===et)&&(P=et);var it=function(Kt){this.message=Kt};it.prototype=new Error,it.prototype.name="InvalidCharacterError";var s=function(Kt){throw new it(Kt)},ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ht=/[\t\n\f\r ]/g,At=function(Kt){Kt=String(Kt).replace(ht,"");var we=Kt.length;we%4==0&&(Kt=Kt.replace(/==?$/,""),we=Kt.length),(we%4==1||/[^+a-zA-Z0-9/]/.test(Kt))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var Ot=0,ue,be,Me="",Fa=-1;++Fa<we;)be=ot.indexOf(Kt.charAt(Fa)),ue=Ot%4?ue*64+be:be,Ot++%4&&(Me+=String.fromCharCode(255&ue>>(-2*Ot&6)));return Me},Yt=function(Kt){Kt=String(Kt),/[^\0-\xFF]/.test(Kt)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var we=Kt.length%3,Ot="",ue=-1,be,Me,Fa,ia,Oa=Kt.length-we;++ue<Oa;)be=Kt.charCodeAt(ue)<<16,Me=Kt.charCodeAt(++ue)<<8,Fa=Kt.charCodeAt(++ue),ia=be+Me+Fa,Ot+=ot.charAt(ia>>18&63)+ot.charAt(ia>>12&63)+ot.charAt(ia>>6&63)+ot.charAt(ia&63);return we==2?(be=Kt.charCodeAt(ue)<<8,Me=Kt.charCodeAt(++ue),ia=be+Me,Ot+=ot.charAt(ia>>10)+ot.charAt(ia>>4&63)+ot.charAt(ia<<2&63)+"="):we==1&&(ia=Kt.charCodeAt(ue),Ot+=ot.charAt(ia>>2)+ot.charAt(ia<<4&63)+"=="),Ot},Rt={encode:Yt,decode:At,version:"0.1.0"};if(F&&!F.nodeType)if(G)G.exports=Rt;else for(var le in Rt)Rt.hasOwnProperty(le)&&(F[le]=Rt[le]);else P.base64=Rt})(An)})(tf,tf.exports);var gE=tf.exports,yE=gE,nh={};function bE(T){if(nh[T])return nh[T];var I=T.split("."),P=I[0],F=I[1];if(!F)throw new Error("Invalid token");var G=TE(F),et={usage:P,user:G.u};return fr(G,"a")&&(et.authorization=G.a),fr(G,"exp")&&(et.expires=G.exp*1e3),fr(G,"iat")&&(et.created=G.iat*1e3),fr(G,"scopes")&&(et.scopes=G.scopes),fr(G,"client")&&(et.client=G.client),fr(G,"ll")&&(et.lastLogin=G.ll),fr(G,"iu")&&(et.impersonator=G.iu),nh[T]=et,et}function TE(T){try{return JSON.parse(yE.decode(T))}catch{throw new Error("Invalid token")}}function fr(T,I){return Object.prototype.hasOwnProperty.call(T,I)}var Zb=bE,Jb={exports:{}};(function(T){var I=Object.prototype.hasOwnProperty,P="~";function F(){}Object.create&&(F.prototype=Object.create(null),new F().__proto__||(P=!1));function G(ot,ht,At){this.fn=ot,this.context=ht,this.once=At||!1}function et(ot,ht,At,Yt,Rt){if(typeof At!="function")throw new TypeError("The listener must be a function");var le=new G(At,Yt||ot,Rt),Kt=P?P+ht:ht;return ot._events[Kt]?ot._events[Kt].fn?ot._events[Kt]=[ot._events[Kt],le]:ot._events[Kt].push(le):(ot._events[Kt]=le,ot._eventsCount++),ot}function it(ot,ht){--ot._eventsCount===0?ot._events=new F:delete ot._events[ht]}function s(){this._events=new F,this._eventsCount=0}s.prototype.eventNames=function(){var ht=[],At,Yt;if(this._eventsCount===0)return ht;for(Yt in At=this._events)I.call(At,Yt)&&ht.push(P?Yt.slice(1):Yt);return Object.getOwnPropertySymbols?ht.concat(Object.getOwnPropertySymbols(At)):ht},s.prototype.listeners=function(ht){var At=P?P+ht:ht,Yt=this._events[At];if(!Yt)return[];if(Yt.fn)return[Yt.fn];for(var Rt=0,le=Yt.length,Kt=new Array(le);Rt<le;Rt++)Kt[Rt]=Yt[Rt].fn;return Kt},s.prototype.listenerCount=function(ht){var At=P?P+ht:ht,Yt=this._events[At];return Yt?Yt.fn?1:Yt.length:0},s.prototype.emit=function(ht,At,Yt,Rt,le,Kt){var we=P?P+ht:ht;if(!this._events[we])return!1;var Ot=this._events[we],ue=arguments.length,be,Me;if(Ot.fn){switch(Ot.once&&this.removeListener(ht,Ot.fn,void 0,!0),ue){case 1:return Ot.fn.call(Ot.context),!0;case 2:return Ot.fn.call(Ot.context,At),!0;case 3:return Ot.fn.call(Ot.context,At,Yt),!0;case 4:return Ot.fn.call(Ot.context,At,Yt,Rt),!0;case 5:return Ot.fn.call(Ot.context,At,Yt,Rt,le),!0;case 6:return Ot.fn.call(Ot.context,At,Yt,Rt,le,Kt),!0}for(Me=1,be=new Array(ue-1);Me<ue;Me++)be[Me-1]=arguments[Me];Ot.fn.apply(Ot.context,be)}else{var Fa=Ot.length,ia;for(Me=0;Me<Fa;Me++)switch(Ot[Me].once&&this.removeListener(ht,Ot[Me].fn,void 0,!0),ue){case 1:Ot[Me].fn.call(Ot[Me].context);break;case 2:Ot[Me].fn.call(Ot[Me].context,At);break;case 3:Ot[Me].fn.call(Ot[Me].context,At,Yt);break;case 4:Ot[Me].fn.call(Ot[Me].context,At,Yt,Rt);break;default:if(!be)for(ia=1,be=new Array(ue-1);ia<ue;ia++)be[ia-1]=arguments[ia];Ot[Me].fn.apply(Ot[Me].context,be)}}return!0},s.prototype.on=function(ht,At,Yt){return et(this,ht,At,Yt,!1)},s.prototype.once=function(ht,At,Yt){return et(this,ht,At,Yt,!0)},s.prototype.removeListener=function(ht,At,Yt,Rt){var le=P?P+ht:ht;if(!this._events[le])return this;if(!At)return it(this,le),this;var Kt=this._events[le];if(Kt.fn)Kt.fn===At&&(!Rt||Kt.once)&&(!Yt||Kt.context===Yt)&&it(this,le);else{for(var we=0,Ot=[],ue=Kt.length;we<ue;we++)(Kt[we].fn!==At||Rt&&!Kt[we].once||Yt&&Kt[we].context!==Yt)&&Ot.push(Kt[we]);Ot.length?this._events[le]=Ot.length===1?Ot[0]:Ot:it(this,le)}return this},s.prototype.removeAllListeners=function(ht){var At;return ht?(At=P?P+ht:ht,this._events[At]&&it(this,At)):(this._events=new F,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=P,s.EventEmitter=s,T.exports=s})(Jb);var xE=Jb.exports;function AE(T){return T.map(encodeURIComponent).join(",")}function Qb(T){return Array.isArray(T)?AE(T):encodeURIComponent(String(T))}function tT(T,I,P){if(P===!1||P===null)return T;var F=/\?/.test(T)?"&":"?",G=encodeURIComponent(I);return P!==void 0&&P!==""&&P!==!0&&(G+="="+Qb(P)),""+T+F+G}function vE(T,I){if(!I)return T;var P=T;return Object.keys(I).forEach(function(F){var G=I[F];G!==void 0&&(Array.isArray(G)&&(G=G.filter(function(et){return et!=null}).join(",")),P=tT(P,F,G))}),P}function EE(T,I){if(!I||T.slice(0,4)==="http")return T;var P=T[0]==="/"?"":"/";return""+I.replace(/\/$/,"")+P+T}function IE(T,I){return I?T.replace(/\/:([a-zA-Z0-9]+)/g,function(P,F){var G=I[F];if(G===void 0)throw new Error("Unspecified route parameter "+F);var et=Qb(G);return"/"+et}):T}var OE={appendQueryObject:vE,appendQueryParam:tT,prependOrigin:EE,interpolateRouteParams:IE},CE=Zb,Sh=Wd,SE=xE,zm=OE,gb=rf,RE=1;function ml(T,I){if(!T)throw new Error("MapiRequest requires a client");if(!I||!I.path||!I.method)throw new Error("MapiRequest requires an options object with path and method properties");var P={};I.body&&(P["content-type"]="application/json");var F=Sh(P,I.headers),G=Object.keys(F).reduce(function(et,it){return et[it.toLowerCase()]=F[it],et},{});this.id=RE++,this._options=I,this.emitter=new SE,this.client=T,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=I.path,this.method=I.method,this.origin=I.origin||T.origin,this.query=I.query||{},this.params=I.params||{},this.body=I.body||null,this.file=I.file||null,this.encoding=I.encoding||"utf8",this.sendFileAs=I.sendFileAs||null,this.headers=G}ml.prototype.url=function(I){var P=zm.prependOrigin(this.path,this.origin);P=zm.appendQueryObject(P,this.query);var F=this.params,G=I??this.client.accessToken;if(G){P=zm.appendQueryParam(P,"access_token",G);var et=CE(G).user;F=Sh({ownerId:et},F)}return P=zm.interpolateRouteParams(P,F),P};ml.prototype.send=function(){var I=this;if(I.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return I.sent=!0,I.client.sendRequest(I).then(function(P){return I.response=P,I.emitter.emit(gb.EVENT_RESPONSE,P),P},function(P){throw I.error=P,I.emitter.emit(gb.EVENT_ERROR,P),P})};ml.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};ml.prototype.eachPage=function(I){var P=this;function F(it){function s(){delete P._nextPageRequest;var ot=it.nextPage();ot&&(P._nextPageRequest=ot,et(ot))}I(null,it,s)}function G(it){I(it,null,function(){})}function et(it){it.send().then(F,G)}et(this)};ml.prototype.clone=function(){return this._extend()};ml.prototype._extend=function(I){var P=Sh(this._options,I);return new ml(this.client,P)};var NE=ml,LE=Zb,PE=NE,wE=rf;function eT(T){if(!T||!T.accessToken)throw new Error("Cannot create a client without an access token");LE(T.accessToken),this.accessToken=T.accessToken,this.origin=T.origin||wE.API_ORIGIN}eT.prototype.createRequest=function(I){return new PE(this,I)};var aT=eT,iT=hE,oT=aT;function Pd(T){oT.call(this,T)}Pd.prototype=Object.create(oT.prototype);Pd.prototype.constructor=Pd;Pd.prototype.sendRequest=iT.browserSend;Pd.prototype.abortRequest=iT.browserAbort;function WE(T){return new Pd(T)}var nT=WE,ME=nT,DE=ME,FE=Object.prototype.toString,BE=function(T){var I;return FE.call(T)==="[object Object]"&&(I=Object.getPrototypeOf(T),I===null||I===Object.getPrototypeOf({}))},UE=BE,kE=Wd,sT="value",sh=`
  `,di={};di.assert=function(T,I){return I=I||{},function(P){var F=fl(T,P);if(F){var G=Rh(F,I);throw I.apiName&&(G=I.apiName+": "+G),new Error(G)}}};di.shape=function(I){var P=GE(I);return function(G){var et=fl(di.plainObject,G);if(et)return et;for(var it,s,ot=[],ht=0;ht<P.length;ht++)it=P[ht].key,s=P[ht].value,et=fl(s,G[it]),et&&ot.push([it].concat(et));return ot.length<2?ot[0]:function(At){ot=ot.map(function(le){var Kt=le[0],we=Rh(le,At).split(`
`).join(sh);return"- "+Kt+": "+we});var Yt=At.path.join("."),Rt=Yt===sT?"":" of "+Yt;return"The following properties"+Rt+" have invalid values:"+sh+ot.join(sh)}}};di.strictShape=function(I){var P=di.shape(I);return function(G){var et=P(G);if(et)return et;var it=Object.keys(G).reduce(function(s,ot){return I[ot]===void 0&&s.push(ot),s},[]);if(it.length!==0)return function(){return"The following keys are invalid: "+it.join(", ")}}};di.arrayOf=function(I){return lT(I)};di.tuple=function(){var I=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return lT(I)};function lT(T){var I=Array.isArray(T),P=function(F){return I?T[F]:T};return function(G){var et=fl(di.plainArray,G);if(et)return et;if(I&&G.length!==T.length)return"an array with "+T.length+" items";for(var it=0;it<G.length;it++)if(et=fl(P(it),G[it]),et)return[it].concat(et)}}di.required=function(I){function P(F){return F==null?function(G){return rT(G,dT(G.path)?"cannot be undefined/null.":"is required.")}:I.apply(this,arguments)}return P.__required=!0,P};di.oneOfType=function(){var I=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(F){var G=I.map(function(et){return fl(et,F)}).filter(Boolean);if(G.length===I.length)return G.every(function(et){return et.length===1&&typeof et[0]=="string"})?zE(G.map(function(et){return et[0]})):G.reduce(function(et,it){return it.length>et.length?it:et})}};di.equal=function(I){return function(F){if(F!==I)return JSON.stringify(I)}};di.oneOf=function(){var I=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),P=I.map(function(F){return di.equal(F)});return di.oneOfType.apply(this,P)};di.range=function(I){var P=I[0],F=I[1];return function(et){var it=fl(di.number,et);if(it||et<P||et>F)return"number between "+P+" & "+F+" (inclusive)"}};di.any=function(){};di.boolean=function(I){if(typeof I!="boolean")return"boolean"};di.number=function(I){if(typeof I!="number")return"number"};di.plainArray=function(I){if(!Array.isArray(I))return"array"};di.plainObject=function(I){if(!UE(I))return"object"};di.string=function(I){if(typeof I!="string")return"string"};di.func=function(I){if(typeof I!="function")return"function"};function fl(T,I){if(!(I==null&&!T.hasOwnProperty("__required"))){var P=T(I);if(P)return Array.isArray(P)?P:[P]}}function Rh(T,I){var P=T.length,F=T[P-1],G=T.slice(0,P-1);return G.length===0&&(G=[sT]),I=kE(I,{path:G}),typeof F=="function"?F(I):rT(I,HE(F))}function zE(T){return T.length<2?T[0]:T.length===2?T.join(" or "):T.slice(0,-1).join(", ")+", or "+T.slice(-1)}function HE(T){return"must be "+YE(T)+"."}function YE(T){return/^an? /.test(T)?T:/^[aeiou]/i.test(T)?"an "+T:/^[a-z]/i.test(T)?"a "+T:T}function rT(T,I){var P=dT(T.path),F=T.path.join(".")+" "+I,G=P?"Item at position ":"";return G+F}function dT(T){return typeof T[T.length-1]=="number"||typeof T[0]=="number"}function GE(T){return Object.keys(T||{}).map(function(I){return{key:I,value:T[I]}})}di.validate=fl;di.processMessage=Rh;var VE=di,XE=Wd,Rd=VE;function KE(T){if(typeof window<"u")return T instanceof An.Blob||T instanceof An.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof T=="string"||T.pipe!==void 0))return"Filename or Readable stream"}function jE(T,I){return Rd.assert(Rd.strictShape(T),I)}function qE(T){var I="date";if(typeof T=="boolean")return I;try{var P=new Date(T);if(P.getTime&&isNaN(P.getTime()))return I}catch{return I}}function $E(T){return Rd.tuple(Rd.number,Rd.number)(T)}var ZE=XE(Rd,{file:KE,date:qE,coordinates:$E,assertShape:jE});function JE(T,I){var P=function(F,G){return I.indexOf(F)!==-1&&G!==void 0};return typeof I=="function"&&(P=I),Object.keys(T).filter(function(F){return P(F,T[F])}).reduce(function(F,G){return F[G]=T[G],F},{})}var QE=JE;function t4(T,I){return Object.keys(T).reduce(function(P,F){return P[F]=I(F,T[F]),P},{})}var e4=t4,a4=e4;function i4(T){return a4(T,function(I,P){return typeof P=="boolean"?JSON.stringify(P):P})}var o4=i4,n4=aT,s4=nT;function l4(T){return function(I){var P;n4.prototype.isPrototypeOf(I)?P=I:P=s4(I);var F=Object.create(T);return F.client=P,F}}var r4=l4,_T=Wd,Da=ZE,ef=QE,uT=o4,d4=r4,Nh={},cT=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Nh.forwardGeocode=function(T){Da.assertShape({query:Da.required(Da.string),mode:Da.oneOf("mapbox.places","mapbox.places-permanent"),countries:Da.arrayOf(Da.string),proximity:Da.oneOf(Da.coordinates,"ip"),types:Da.arrayOf(Da.oneOf(cT)),autocomplete:Da.boolean,bbox:Da.arrayOf(Da.number),limit:Da.number,language:Da.arrayOf(Da.string),routing:Da.boolean,fuzzyMatch:Da.boolean,worldview:Da.string})(T),T.mode=T.mode||"mapbox.places";var I=uT(_T({country:T.countries},ef(T,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:ef(T,["mode","query"]),query:I})};Nh.reverseGeocode=function(T){Da.assertShape({query:Da.required(Da.coordinates),mode:Da.oneOf("mapbox.places","mapbox.places-permanent"),countries:Da.arrayOf(Da.string),types:Da.arrayOf(Da.oneOf(cT)),bbox:Da.arrayOf(Da.number),limit:Da.number,language:Da.arrayOf(Da.string),reverseMode:Da.oneOf("distance","score"),routing:Da.boolean,worldview:Da.string})(T),T.mode=T.mode||"mapbox.places";var I=uT(_T({country:T.countries},ef(T,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:ef(T,["mode","query"]),query:I})};var _4=d4(Nh);let u4="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",mT=T=>crypto.getRandomValues(new Uint8Array(T)),fT=(T,I,P)=>{let F=(2<<Math.log(T.length-1)/Math.LN2)-1,G=-~(1.6*F*I/T.length);return(et=I)=>{let it="";for(;;){let s=P(G),ot=G;for(;ot--;)if(it+=T[s[ot]&F]||"",it.length===et)return it}}},c4=(T,I=21)=>fT(T,I,mT),m4=(T=21)=>crypto.getRandomValues(new Uint8Array(T)).reduce((I,P)=>(P&=63,P<36?I+=P.toString(36):P<62?I+=(P-26).toString(36).toUpperCase():P>62?I+="-":I+="_",I),"");const f4=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:c4,customRandom:fT,nanoid:m4,random:mT,urlAlphabet:u4},Symbol.toStringTag,{value:"Module"})),p4=rA(f4);var h4=p4.nanoid;function pT(T){this.origin=T.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=T.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=T,this.send=this.send.bind(this),this.countries=T.countries?T.countries.split(","):null,this.types=T.types?T.types.split(","):null,this.bbox=T.bbox?T.bbox:null,this.language=T.language?T.language.split(","):null,this.limit=T.limit?+T.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(T),this.eventQueue=new Array,this.flushInterval=T.flushInterval||1e3,this.maxQueueSize=T.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}pT.prototype={select:function(T,I){var P=this.getSelectedIndex(T,I),F=this.getEventPayload("search.select",I);if(F.resultIndex=P,F.resultPlaceName=T.place_name,F.resultId=T.id,!(P===this.lastSentIndex&&F.queryString===this.lastSentInput||P==-1)&&(this.lastSentIndex=P,this.lastSentInput=F.queryString,!!F.queryString))return this.push(F)},start:function(T){var I=this.getEventPayload("search.start",T);if(I.queryString)return this.push(I)},keyevent:function(T,I){if(T.key&&!(T.metaKey||[9,27,37,39,13,38,40].indexOf(T.keyCode)!==-1)){var P=this.getEventPayload("search.keystroke",I);if(P.lastAction=T.key,!!P.queryString)return this.push(P)}},send:function(T,I){if(!this.enableEventLogging)return I?I():void 0;var P=this.getRequestOptions(T);this.request(P,(function(F){if(F)return this.handleError(F,I);if(I)return I()}).bind(this))},getRequestOptions:function(T){Array.isArray(T)||(T=[T]);var I={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(T)};return I},getEventPayload:function(T,I){var P;I.options.proximity?typeof I.options.proximity=="object"?P=[I.options.proximity.longitude,I.options.proximity.latitude]:I.options.proximity==="ip"?P=[999,999]:P=I.options.proximity:P=null;var F=I._map?I._map.getZoom():void 0,G={event:T,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:I.options.autocomplete,fuzzyMatch:I.options.fuzzyMatch,proximity:P,limit:I.options.limit,routing:I.options.routing,worldview:I.options.worldview,mapZoom:F,keyboardLocale:this.locale};return T==="search.select"?G.queryString=I.inputString:T!="search.select"&&I._inputEl?G.queryString=I._inputEl.value:G.queryString=I.inputString,G},request:function(T,I){var P=new XMLHttpRequest;P.onreadystatechange=function(){if(this.readyState==4)return this.status==204?I(null):I(this.statusText)},P.open(T.method,T.host+"/"+T.path,!0);for(var F in T.headers){var G=T.headers[F];P.setRequestHeader(F,G)}P.send(T.body)},handleError:function(T,I){if(I)return I(T)},generateSessionID:function(){return h4()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(T,I){if(I._typeahead){var P=I._typeahead.data,F=T.id,G=P.map(function(it){return it.id}),et=G.indexOf(F);return et}},shouldEnableLogging:function(T){return!(T.enableEventLogging===!1||T.origin&&T.origin!=="https://api.mapbox.com"||T.localGeocoder||T.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(T,I){this.eventQueue.push(T),(this.eventQueue.length>=this.maxQueueSize||I)&&this.flush()},remove:function(){this.flush()}};var g4=pT,y4={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},b4={placeholder:y4},hT={exports:{}};(function(T){(function(I,P,F){T.exports?T.exports=F():I[P]=F()})(An,"subtag",function(){var I="",P=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function F(ot){return ot.match(P)||[]}function G(ot){return F(ot).filter(function(ht,At){return ht&&At})}function et(ot){return ot=F(ot),{language:ot[1]||I,extlang:ot[2]||I,script:ot[3]||I,region:ot[4]||I}}function it(ot,ht,At){Object.defineProperty(ot,ht,{value:At,enumerable:!0})}function s(ot,ht,At){function Yt(Rt){return F(Rt)[ot]||I}it(Yt,"pattern",ht),it(et,At,Yt)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),it(et,"split",G),et})})(hT);var T4=hT.exports;function gT(){}gT.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const T={enableHighAccuracy:!0};return new Promise(function(I,P){window.navigator.geolocation.getCurrentPosition(I,P,T)})}};var x4=gT;function A4(T,I){const P=yT(T),F=["address","street","place","country"];var G;if(typeof I=="function")return I(P);const et=F.indexOf(I);return et===-1?G=F:G=F.slice(et),G.reduce(function(it,s){return P[s]?(it!==""&&(it=it+", "),it+P[s]):it},"")}function yT(T){const I=T.address||"",P=T.text||"",F=T.place_name||"",et={address:F.split(",")[0],houseNumber:I,street:P,placeName:F};return T.context.forEach(function(it){const s=it.id.split(".")[0];et[s]=it.text}),et}const v4=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var E4={transformFeatureToGeolocationText:A4,getAddressInfo:yT,REVERSE_GEOCODE_COORD_RGX:v4},I4=Vv,O4=Ib,pr=Wd,C4=Jv.EventEmitter,yb=Qv,lh=DE,rh=_4,S4=g4,R4=b4,N4=T4,L4=x4,bb=E4;const ul={FORWARD:0,LOCAL:1,REVERSE:2};function P4(){var T=document.createElement("div");return T.className="mapboxgl-ctrl-geocoder--powered-by",T.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',T}function bT(T){this._eventEmitter=new C4,this.options=pr({},this.options,T),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new L4}bT.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(T){return T.place_name},render:function(T){var I=T.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+I[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+I.splice(1,I.length).join(",")+"</div></div>"}},addTo:function(T){function I(P,F){if(!document.body.contains(F))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const G=P.onAdd();F.appendChild(G)}if(T._controlContainer)T.addControl(this);else if(T instanceof HTMLElement)I(this,T);else if(typeof T=="string"){const P=document.querySelectorAll(T);if(P.length===0)throw new Error("Element ",T,"not found.");if(P.length>1)throw new Error("Geocoder can only be added to a single html element");I(this,P[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(T){if(T&&typeof T!="string"&&(this._map=T),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=rh(lh({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new S4(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var I=this.container=document.createElement("div");I.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var P=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",O4(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(ht){this.eventManager.keyevent(ht,this)}).bind(this));var F=document.createElement("div");F.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var G=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(G),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),F.appendChild(this._clearEl),F.appendChild(this._loadingEl),I.appendChild(P),I.appendChild(this._inputEl),I.appendChild(F),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var et=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(et),F.appendChild(this._geolocateEl),this._showGeolocateButton()}var it=this._typeahead=new I4(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),it.getItemValue=this.options.getItemValue;var s=it.list.draw,ot=this._footerNode=P4();return it.list.draw=function(){s.call(this),ot.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),ot.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(ot)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),I},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(T){this._hideLoadingIcon();const I={geometry:{type:"Point",coordinates:[T.coords.longitude,T.coords.latitude]}};this._handleMarker(I),this._fly(I),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(I),this._showClearButton(),this.fresh=!1;const P={limit:1,language:[this.options.language],query:I.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const F=I.geometry.coordinates[0]+","+I.geometry.coordinates[1];this._setInputValue(F),this._eventEmitter.emit("result",{result:I})}else this.geocoderService.reverseGeocode(P).send().then((function(F){const G=F.body.features[0];if(G){const et=bb.transformFeatureToGeolocationText(G,this.options.addressAccuracy);this._setInputValue(et),G.user_coordinates=I.geometry.coordinates,this._eventEmitter.emit("result",{result:G})}else this._eventEmitter.emit("result",{result:{user_coordinates:I.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(T){T.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(T,I){var P=document.createElementNS("http://www.w3.org/2000/svg","svg");return P.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+T),P.setAttribute("viewBox","0 0 18 18"),P.setAttribute("xml:space","preserve"),P.setAttribute("width",18),P.setAttribute("height",18),P.innerHTML=I,P},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(T){this._inputEl.value=T,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(T){var I=(T.clipboardData||window.clipboardData).getData("text");I.length>=this.options.minLength&&this._geocode(I)},_onKeyDown:function(T){var I=27,P=9;if(T.keyCode===I&&this.options.clearAndBlurOnEsc)return this._clear(T),this._inputEl.blur();var F=T.target&&T.target.shadowRoot?T.target.shadowRoot.activeElement:T.target,G=F?F.value:"";if(!G)return this.fresh=!0,T.keyCode!==P&&this.clear(T),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(T.metaKey||[P,I,37,39,13,38,40].indexOf(T.keyCode)!==-1)&&F.value.length>=this.options.minLength&&this._geocode(F.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(T){this.options.clearOnBlur&&this._clearOnBlur(T),this.options.collapsed&&this._collapse()},_onChange:function(){var T=this._typeahead.selected;T&&JSON.stringify(T)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(T),this.options.marker&&this._mapboxgl&&this._handleMarker(T),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(T),this._eventEmitter.emit("result",{result:T}),this.eventManager.select(T,this))},_fly:function(T){var I;if(T.properties&&yb[T.properties.short_code])I=pr({},this.options.flyTo),this._map&&this._map.fitBounds(yb[T.properties.short_code].bbox,I);else if(T.bbox){var P=T.bbox;I=pr({},this.options.flyTo),this._map&&this._map.fitBounds([[P[0],P[1]],[P[2],P[3]]],I)}else{var F={zoom:this.options.zoom};I=pr({},F,this.options.flyTo),T.center?I.center=T.center:T.geometry&&T.geometry.type&&T.geometry.type==="Point"&&T.geometry.coordinates&&(I.center=T.geometry.coordinates),this._map&&this._map.flyTo(I)}},_requestType:function(T,I){var P;return T.localGeocoderOnly?P=ul.LOCAL:T.reverseGeocode&&bb.REVERSE_GEOCODE_COORD_RGX.test(I)?P=ul.REVERSE:P=ul.FORWARD,P},_setupConfig:function(T,I){const P=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],F=/[\s,]+/;var G=this,et=P.reduce(function(s,ot){if(G.options[ot]===void 0||G.options[ot]===null)return s;["countries","types","language"].indexOf(ot)>-1?s[ot]=G.options[ot].split(F):s[ot]=G.options[ot];const ht=typeof G.options[ot].longitude=="number"&&typeof G.options[ot].latitude=="number";if(ot==="proximity"&&ht){const At=G.options[ot].longitude,Yt=G.options[ot].latitude;s[ot]=[At,Yt]}return s},{});switch(T){case ul.REVERSE:{var it=I.split(F).map(function(s){return parseFloat(s,10)});G.options.flipCoordinates||it.reverse(),et.types&&et.types[0],et=pr(et,{query:it,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(s){s in et&&delete et[s]})}break;case ul.FORWARD:{const s=I.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(s)&&(I=I.replace(/,/g," ")),et=pr(et,{query:I})}break}return et},_geocode:function(T){this.inputString=T,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:T});const I=this._requestType(this.options,T),P=this._setupConfig(I,T);var F;switch(I){case ul.LOCAL:F=Promise.resolve();break;case ul.FORWARD:F=this.geocoderService.forwardGeocode(P).send();break;case ul.REVERSE:F=this.geocoderService.reverseGeocode(P).send();break}var G=this.options.localGeocoder?this.options.localGeocoder(T)||[]:[],et=[],it=null;return F.catch((function(s){it=s}).bind(this)).then((function(s){this._hideLoadingIcon();var ot={};return s?s.statusCode=="200"&&(ot=s.body,ot.request=s.request,ot.headers=s.headers):ot={type:"FeatureCollection",features:[]},ot.config=P,this.fresh&&(this.eventManager.start(this),this.fresh=!1),ot.features=ot.features?G.concat(ot.features):G,this.options.externalGeocoder?(et=this.options.externalGeocoder(T,ot.features)||Promise.resolve([]),et.then(function(ht){return ot.features=ot.features?ht.concat(ot.features):ht,ot},function(){return ot})):ot}).bind(this)).then((function(s){if(it)throw it;this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter)),s.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",s),this._typeahead.update(s.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))}).bind(this)).catch((function(s){this._hideLoadingIcon(),this._hideAttribution(),G.length&&this.options.localGeocoder||et.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(G)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:G}),this._eventEmitter.emit("error",{error:s})}).bind(this)),F},_clear:function(T){T&&T.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(T){this._clear(T),this._inputEl.focus()},_clearOnBlur:function(T){var I=this;T.relatedTarget&&I._clear(T)},_onQueryResult:function(T){var I=T.body;if(I.features.length){var P=I.features[0];this._typeahead.selected=P,this._inputEl.value=P.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var T=this._map.getCenter().wrap();this.setProximity({longitude:T.lng,latitude:T.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(T){return this._geocode(T).then(this._onQueryResult),this},_renderError:function(){var T="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(T)},_renderLocationError:function(){var T="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(T)},_renderNoResults:function(){var T="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(T)},_renderUserDeniedGeolocationError:function(){var T="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(T)},_renderMessage:function(T){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(T)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var T=this.options.language.split(",")[0],I=N4.language(T),P=R4.placeholder[I];if(P)return P}return"Search"},setInput:function(T,I){return I===void 0&&(I=!1),this._inputEl.value=T,this._typeahead.selected=null,this._typeahead.clear(),T.length>=this.options.minLength&&(I?this._geocode(T):this._onChange()),this},setProximity:function(T,I=!0){return this.options.proximity=T,I&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(T){return T&&typeof T=="function"&&(this._typeahead.render=T),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(T){var I=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=T||this.options.language||I,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(T){return this.options.zoom=T,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(T){return this.options.flyTo=T,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(T){return this.options.placeholder=T||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(T){return this.options.bbox=T,this},getCountries:function(){return this.options.countries},setCountries:function(T){return this.options.countries=T,this},getTypes:function(){return this.options.types},setTypes:function(T){return this.options.types=T,this},getMinLength:function(){return this.options.minLength},setMinLength:function(T){return this.options.minLength=T,this._typeahead&&(this._typeahead.options.minLength=T),this},getLimit:function(){return this.options.limit},setLimit:function(T){return this.options.limit=T,this._typeahead&&(this._typeahead.options.limit=T),this},getFilter:function(){return this.options.filter},setFilter:function(T){return this.options.filter=T,this},setOrigin:function(T){return this.options.origin=T,this.geocoderService=rh(lh({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(T){return this.options.accessToken=T,this.geocoderService=rh(lh({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(T){return this.options.autocomplete=T,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(T){return this.options.fuzzyMatch=T,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(T){return this.options.routing=T,this},getRouting:function(){return this.options.routing},setWorldview:function(T){return this.options.worldview=T,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(T){if(this._map){this._removeMarker();var I={color:"#4668F2"},P=pr({},I,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(P),T.center?this.mapMarker.setLngLat(T.center).addTo(this._map):T.geometry&&T.geometry.type&&T.geometry.type==="Point"&&T.geometry.coordinates&&this.mapMarker.setLngLat(T.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(T,I){return this._eventEmitter.on(T,I),this},off:function(T,I){return this._eventEmitter.removeListener(T,I),this.eventManager.remove(),this}};var w4=bT;const W4=sf(w4);const M4=[{facility_name:"LACSD - A.K. WARREN WATER RESOURCE FACILITY",city:"Whittier","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:112530,amount_of_biosolids_managed_land_applied:5224,latitude:33.96071322,longitude:-118.0256606},{facility_name:"MWRDGC STICKNEY WRP",city:"Cicero","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:110377,amount_of_biosolids_managed_land_applied:98548,latitude:41.82159,longitude:-87.77285},{facility_name:"NURSERY PRODUCTS HAWES COMPOSTING FACILITY",city:"Helendale","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:107869,amount_of_biosolids_managed_land_applied:107869,latitude:34.75804744,longitude:-117.2593508},{facility_name:"SAN JOSE/SANTA CLARA RWF",city:"San Jose","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:95497,amount_of_biosolids_managed_land_applied:0,latitude:37.43251,longitude:-121.952738},{facility_name:"MET COUNCIL METROPOLITAN WWTP",city:"St Paul","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:79896,amount_of_biosolids_managed_land_applied:0,latitude:44.923243,longitude:-93.046563},{facility_name:"WALNUT CREEK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:58278,amount_of_biosolids_managed_land_applied:0,latitude:30.35353,longitude:-97.69609},{facility_name:"CENTRAL REGIONAL WWTF",city:"Arlington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:51910,amount_of_biosolids_managed_land_applied:50527.3,latitude:32.77389,longitude:-96.93083},{facility_name:"LOS ANGELES HYPERION WWTP",city:"Playa Del Rey","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:50025,amount_of_biosolids_managed_land_applied:34304.15,latitude:33.93077,longitude:-118.43494},{facility_name:"INDIANAPOLIS BELMONT & SOUTHPORT AWTP",city:"Indianapolis","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:46716,amount_of_biosolids_managed_land_applied:0,latitude:39.79398,longitude:-86.15734},{facility_name:"D. C. BUREAU WASTEWATER TREATM",city:"Washington","state_postal;":"DC",state:"D.C.",amount_of_biosolids_generated:45266,amount_of_biosolids_managed_land_applied:45265,latitude:38.813645,longitude:-77.027176},{facility_name:"CENTRAL WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:42634,amount_of_biosolids_managed_land_applied:0,latitude:30.419384,longitude:-97.604747},{facility_name:"PASSAIC VALLEY SEWERAGE COMM",city:"Newark","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:39893,amount_of_biosolids_managed_land_applied:0,latitude:40.714786,longitude:-74.136198},{facility_name:"SYNAGRO SOUTH KERN COMPOST MANUFACTURING",city:"Taft","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:39790,amount_of_biosolids_managed_land_applied:39790,latitude:35.15483588,longitude:-119.458795},{facility_name:"SACRAMENTO RWTP",city:"Sacramento","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:39124,amount_of_biosolids_managed_land_applied:0,latitude:38.4485,longitude:-121.461667},{facility_name:"CLARK COUNTY WRD WWTP",city:"Las Vegas","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:39090,amount_of_biosolids_managed_land_applied:0,latitude:36.114839,longitude:-115.047256},{facility_name:"SOUTHERLY WASTEWATER TRTMNT CTR, NEORSD",city:"Cuyahoga Heights","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:38478,amount_of_biosolids_managed_land_applied:0,latitude:41.39919,longitude:-81.62666},{facility_name:"TULLY ENVIRONMENTAL INC. - NATURAL SOIL PRODUCTS",city:"Tremont","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:37538,amount_of_biosolids_managed_land_applied:37538.29,latitude:40.629245,longitude:-76.457895},{facility_name:"MWRA - DEER ISLAND P O T W",city:"Boston","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:36946,amount_of_biosolids_managed_land_applied:32543,latitude:42.3111,longitude:-71.05848},{facility_name:"BARR-TECH, LLC",city:"Sprague","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:36438,amount_of_biosolids_managed_land_applied:36438,latitude:47.391634,longitude:-117.858804},{facility_name:"M C STILES WASTEWASTER",city:"Memphis","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:33126,amount_of_biosolids_managed_land_applied:12218,latitude:35.188949,longitude:-90.050959},{facility_name:"HARTFORD WPCP",city:"Hartford","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:32754,amount_of_biosolids_managed_land_applied:0,latitude:41.731389,longitude:-72.656389},{facility_name:"INLAND EMPIRE REGIONAL COMPOSTING FACILITY",city:"Chino Hills","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:32536,amount_of_biosolids_managed_land_applied:32536,latitude:33.97307512,longitude:-117.7343957},{facility_name:"WOONSOCKET REG WW INCINERATOR",city:"Woonsocket","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:32403,amount_of_biosolids_managed_land_applied:0,latitude:41.999843,longitude:-71.494367},{facility_name:"SAN DIEGO MBC",city:"San Diego","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:32113,amount_of_biosolids_managed_land_applied:32112.94,latitude:32.71616,longitude:-117.160515},{facility_name:"METRO WASTE WATER RECLAMATION DISTRICT",city:"Denver","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:31952,amount_of_biosolids_managed_land_applied:27454.76,latitude:39.81497,longitude:-104.95923},{facility_name:"CENTRAL WWTF",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:31664,amount_of_biosolids_managed_land_applied:0,latitude:32.729222,longitude:-96.763056},{facility_name:"STEVEN M CLOUSE WATER RECYCLING CENTER",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30825,amount_of_biosolids_managed_land_applied:0,latitude:29.235588,longitude:-98.418434},{facility_name:"GLWA WRRF",city:"Detroit","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:30806,amount_of_biosolids_managed_land_applied:0,latitude:42.2834,longitude:-83.12575},{facility_name:"ALCOSAN WASTEWATER TREAT PLANT",city:"Pittsburgh","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:30624,amount_of_biosolids_managed_land_applied:6268,latitude:40.47454,longitude:-80.04086},{facility_name:"LIBERTY PROCESSING & SOILS, LLC",city:"Tremont","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:30455,amount_of_biosolids_managed_land_applied:30455,latitude:40.61809,longitude:-76.38599},{facility_name:"CITY OF KANSAS CITY",city:"Kansas City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:30300,amount_of_biosolids_managed_land_applied:7676.6,latitude:39.01323,longitude:-94.52917},{facility_name:"SHELLEY'S SEPTIC TANKS RMF",city:"Zellwood","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:29756,amount_of_biosolids_managed_land_applied:29755.3,latitude:28.731004,longitude:-81.599198},{facility_name:"MIDDLESEX CNTY UA",city:"Sayreville","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:29462,amount_of_biosolids_managed_land_applied:0,latitude:40.488828,longitude:-74.312661},{facility_name:"ORANGE COUNTY SD #1",city:"Fountain Valley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:28679,amount_of_biosolids_managed_land_applied:7210,latitude:33.6907,longitude:-117.9419},{facility_name:"MWRDGC NORTHSIDE WRP",city:"Skokie","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:28575,amount_of_biosolids_managed_land_applied:0,latitude:42.02142,longitude:-87.71992},{facility_name:"GRASSLANDS",city:"Chateaugay","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:27140,amount_of_biosolids_managed_land_applied:28877,latitude:44.945043,longitude:-74.030892},{facility_name:"LIBERTY COMPOSTING",city:"Lost Hills","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:26537,amount_of_biosolids_managed_land_applied:26537,latitude:35.6160018,longitude:-119.6939584},{facility_name:"CITY OF HOUSTON",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25743,amount_of_biosolids_managed_land_applied:0,latitude:29.75579,longitude:-95.29791},{facility_name:"HAWK RIDGE COMPOST FACILITY",city:"Unity","state_postal;":"ME",state:"Maine",amount_of_biosolids_generated:25178,amount_of_biosolids_managed_land_applied:22841,latitude:44.61396824,longitude:-69.32506881},{facility_name:"MILL CREEK WWTP -MSD",city:"Cincinnati","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:24632,amount_of_biosolids_managed_land_applied:0,latitude:39.10749,longitude:-84.54556},{facility_name:"MWRDGC CALUMET WRP",city:"Chicago","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:24328,amount_of_biosolids_managed_land_applied:14805,latitude:41.661976,longitude:-87.609077},{facility_name:"LAMONT WWTP",city:"Lamont","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:24311,amount_of_biosolids_managed_land_applied:0,latitude:35.256086,longitude:-118.909077},{facility_name:"CITY OF CHATTANOOGA",city:"Chattanooga","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:22989,amount_of_biosolids_managed_land_applied:22674.2,latitude:35.052025,longitude:-85.335368},{facility_name:"NORTHERN KY SANITATION DISTRICT 1",city:"Villa Hills","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:22721,amount_of_biosolids_managed_land_applied:0,latitude:39.058611,longitude:-84.618056},{facility_name:"DALLAS SOUTHSIDE WWTF",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21715,amount_of_biosolids_managed_land_applied:0,latitude:32.641333,longitude:-96.646867},{facility_name:"PINEY ORCHARD WWTP",city:"Odenton","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:21667,amount_of_biosolids_managed_land_applied:21667.3,latitude:39.06126,longitude:-76.72804},{facility_name:"VILLAGE CREEK WWTF",city:"Fort Worth","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21505,amount_of_biosolids_managed_land_applied:18870,latitude:32.779848,longitude:-97.143936},{facility_name:"NASHVILLE-CENTRAL STP",city:"Nashville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:21151,amount_of_biosolids_managed_land_applied:21144.5,latitude:36.186111,longitude:-86.788889},{facility_name:"MSD BISSELL POINT WASTEWATER TREATMENT PLANT",city:"St. Louis","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:21081,amount_of_biosolids_managed_land_applied:0,latitude:38.63107,longitude:-90.21532},{facility_name:"KENT COUNTY STP",city:"Frederica","state_postal;":"DE",state:"Del.",amount_of_biosolids_generated:20442,amount_of_biosolids_managed_land_applied:9056.81,latitude:38.998212,longitude:-75.437604},{facility_name:"CITY OF RALEIGH PUBLIC UTILITIES DEPARTMENT",city:"Raleigh","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:20190,amount_of_biosolids_managed_land_applied:685.04,latitude:35.720733,longitude:-78.484831},{facility_name:"SOLID WASTE AUTH OF PALM BEACH BIOSOLIDS PELLETIZATION FACI",city:"West Palm Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:19467,amount_of_biosolids_managed_land_applied:19369.37,latitude:26.7725,longitude:-80.1416},{facility_name:"CITY OF GREENSBORO",city:"Greensboro","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:18869,amount_of_biosolids_managed_land_applied:0,latitude:36.098214,longitude:-79.687741},{facility_name:"DELCORA",city:"Chester","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:18717,amount_of_biosolids_managed_land_applied:0,latitude:39.828617,longitude:-75.393105},{facility_name:"PATAPSCO WWTP",city:"Baltimore","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:18363,amount_of_biosolids_managed_land_applied:0,latitude:39.23208,longitude:-76.56699},{facility_name:"FORT WAYNE WWTP",city:"Ft Wayne","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:18257,amount_of_biosolids_managed_land_applied:18256.82,latitude:41.06450135,longitude:-85.16355891},{facility_name:"FRESNO-CLOVIS RWRF",city:"Fresno","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:18149,amount_of_biosolids_managed_land_applied:18149,latitude:36.702666,longitude:-119.893464},{facility_name:"WESTERN REGIONAL WATER RECLAMATION FACILITY",city:"Petersburg","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:17729,amount_of_biosolids_managed_land_applied:0,latitude:39.00703,longitude:-84.84121},{facility_name:"NYCDEP - NEWTOWN CREEK WRRF",city:"Brooklyn","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:17540,amount_of_biosolids_managed_land_applied:0,latitude:40.73499,longitude:-73.86499},{facility_name:"WILSON CREEK REGIONAL WWTF",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17225,amount_of_biosolids_managed_land_applied:0,latitude:33.124035,longitude:-96.565558},{facility_name:"ROCHESTER PURE WATERS DIST",city:"Rochester","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:17197,amount_of_biosolids_managed_land_applied:0,latitude:43.15537,longitude:-77.61405},{facility_name:"MIAMI-DADE COUNTY - PUBLIC WORKS DEPARTMENT",city:"Miami","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:17078,amount_of_biosolids_managed_land_applied:17077.9,latitude:25.7479,longitude:-80.1501},{facility_name:"COMPOST USA OF HIGHLANDS COUNTY - HICORIA ROAD COMPOSTING FACILITY",city:"Venus","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:16814,amount_of_biosolids_managed_land_applied:16814.46,latitude:27.15336,longitude:-81.3351},{facility_name:"UPPER BLACKSTONE W P A D",city:"Millbury","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:16319,amount_of_biosolids_managed_land_applied:0,latitude:42.19799303,longitude:-71.76906326},{facility_name:"SYNAGRO CENTRAL VALLEY COMPOST FACILITY",city:"Dos Palos","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:16203,amount_of_biosolids_managed_land_applied:16203,latitude:37.090087,longitude:-120.552421},{facility_name:"ORANGE COUNTY SD #2",city:"Fountain Valley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:15989,amount_of_biosolids_managed_land_applied:11615,latitude:33.6907,longitude:-117.9419},{facility_name:"LYSTEK INTERNATIONAL",city:"Fairfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:15283,amount_of_biosolids_managed_land_applied:15283,latitude:38.24059324,longitude:-122.1143481},{facility_name:"ERVING CENTER WWTP 2",city:"Erving","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:15241,amount_of_biosolids_managed_land_applied:1019,latitude:42.59966,longitude:-72.39864},{facility_name:"SAN FRANCISCO SOUTHEAST WWTP",city:"San Francisco","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:14973,amount_of_biosolids_managed_land_applied:3094,latitude:37.7403,longitude:-122.3903},{facility_name:"CENTRAL CONTRA COSTA WWTF",city:"Martinez","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:14937,amount_of_biosolids_managed_land_applied:275,latitude:37.99789,longitude:-122.06827},{facility_name:"EAST BAY MUD WWTP",city:"Oakland","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:14729,amount_of_biosolids_managed_land_applied:7842.49,latitude:37.80618731,longitude:-122.2995054},{facility_name:"DES MOINES METROPOLITAN WRA",city:"Des Moines","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:13996,amount_of_biosolids_managed_land_applied:13996.1,latitude:41.572778,longitude:-93.557778},{facility_name:"MSD LEMAY WASTEWATER TREATMENT PLANT",city:"St. Louis","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:13611,amount_of_biosolids_managed_land_applied:0,latitude:38.63107,longitude:-90.21532},{facility_name:"SYNAGRO TECHNOLOGIES - PATAPSCO PELLETIZER FACILITY",city:"Baltimore","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:13587,amount_of_biosolids_managed_land_applied:12995,latitude:39.23222,longitude:-76.567064},{facility_name:"COMPOST USA OF SUMTER COUNTY",city:"Lake Panasoffkee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:13463,amount_of_biosolids_managed_land_applied:13463,latitude:28.743151,longitude:-82.091653},{facility_name:"MONTEREY RWPCA",city:"Monterey","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:13261,amount_of_biosolids_managed_land_applied:0,latitude:36.58316196,longitude:-121.8572418},{facility_name:"LOWER POTOMAC POLL CONTROL PLT",city:"Lorton","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:13197,amount_of_biosolids_managed_land_applied:0,latitude:38.704002,longitude:-77.207057},{facility_name:"BROWARD COUNTY WATER AND WASTEWATER SERVICES",city:"Pompano Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:12909,amount_of_biosolids_managed_land_applied:10500,latitude:26.261586,longitude:-80.152722},{facility_name:"SYNAGRO TECHNOLOGIES - WATERSHED RESOURCE CENTER",city:"Curtis Bay","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:12545,amount_of_biosolids_managed_land_applied:12545,latitude:39.206612,longitude:-76.586093},{facility_name:"KING COUNTY SOUTH WWTP",city:"Seattle","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:12490,amount_of_biosolids_managed_land_applied:12490,latitude:47.469196,longitude:-122.238935},{facility_name:"LAS VEGAS WQCP",city:"Las Vegas","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:12200,amount_of_biosolids_managed_land_applied:0,latitude:36.13722,longitude:-115.04326},{facility_name:"MDWASA SOUTH DISTRICT WWTF",city:"Miami","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:12109,amount_of_biosolids_managed_land_applied:12109.45,latitude:25.551905,longitude:-80.335729},{facility_name:"NYCDEP - WARD'S ISLAND WRRF",city:"New York","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:12100,amount_of_biosolids_managed_land_applied:3011,latitude:40.65925,longitude:-73.80226},{facility_name:"CITY OF TAMPA - DEPARTMENT OF SANITARY SEWERS",city:"Tampa","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:12001,amount_of_biosolids_managed_land_applied:12001,latitude:27.9227,longitude:-82.4363},{facility_name:"LEE COUNTY COMPOSTING FACILITY",city:"Fort Myers","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:11650,amount_of_biosolids_managed_land_applied:11650.39,latitude:26.59463,longitude:-81.88183},{facility_name:"SUFFOLK COUNTY",city:"Hauppauge","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:11621,amount_of_biosolids_managed_land_applied:0,latitude:40.72338796,longitude:-73.36344784},{facility_name:"BERGEN CNTY UTILITIES AUTHORIT (LITTLE FERRY)",city:"Little Ferry","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:11438,amount_of_biosolids_managed_land_applied:0,latitude:40.84642,longitude:-74.03902},{facility_name:"PORTLAND - COLUMBIA BLVD STP",city:"Portland","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:11336,amount_of_biosolids_managed_land_applied:11336,latitude:45.5975,longitude:-122.719},{facility_name:"TONAWANDA (T)",city:"Tonawanda","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:11310,amount_of_biosolids_managed_land_applied:0,latitude:42.99376,longitude:-78.90162},{facility_name:"ATLANTA (R.M. CLAYTON WPCP)",city:"Atlanta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:11113,amount_of_biosolids_managed_land_applied:0,latitude:33.82333,longitude:-84.45528},{facility_name:"NEW HAVEN EAST SHORE WPCF",city:"New Haven","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:11054,amount_of_biosolids_managed_land_applied:0,latitude:41.282563,longitude:-72.902505},{facility_name:"RICHMOND CITY OF",city:"Richmond","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:11e3,amount_of_biosolids_managed_land_applied:10081.5,latitude:37.522046,longitude:-77.422183},{facility_name:"CITY OF CEDAR RAPIDS",city:"Cedar Rapids","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:10731,amount_of_biosolids_managed_land_applied:1515.936,latitude:41.97766,longitude:-91.66936},{facility_name:"KING COUNTY WEST POINT WWTP",city:"Seattle","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:10701,amount_of_biosolids_managed_land_applied:10700,latitude:47.663487,longitude:-122.427318},{facility_name:"WATER AND SEWER AUTHORITY OF CABARRUS COUNTY",city:"Concord","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:10695,amount_of_biosolids_managed_land_applied:0,latitude:35.326239,longitude:-80.539345},{facility_name:"CHARLOTTE WATER",city:"Charlotte","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:10695,amount_of_biosolids_managed_land_applied:6226,latitude:35.068738,longitude:-80.872449},{facility_name:"PARKER AG- CAKE BLENDING FIELD OPS",city:"Limon","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:10491,amount_of_biosolids_managed_land_applied:10491.47,latitude:39.26164933,longitude:-103.6820031},{facility_name:"LAMBLAND, INC. DBA A1 ORGANICS",city:"Eaton","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:10235,amount_of_biosolids_managed_land_applied:10235,latitude:40.538851,longitude:-104.747476},{facility_name:"ALBUQUERQUE BERNALILLO COUNTY WATER UTILITY AUTHORITY",city:"Albuquerque","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:10112,amount_of_biosolids_managed_land_applied:2422,latitude:35.0177,longitude:-106.6661},{facility_name:"GREEN BAY METROPOLITAN SEWERAGE DISTRICT",city:"Green Bay","state_postal;":"WI",state:"Wis.",amount_of_biosolids_generated:9843,amount_of_biosolids_managed_land_applied:0,latitude:44.53348,longitude:-87.99401},{facility_name:"WILMINGTON STP",city:"Wilmington","state_postal;":"DE",state:"Del.",amount_of_biosolids_generated:9811,amount_of_biosolids_managed_land_applied:9810.96,latitude:39.72954,longitude:-75.504334},{facility_name:"NYCDEP - HUNT'S POINT WRRF",city:"Bronx","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:9656,amount_of_biosolids_managed_land_applied:8692,latitude:40.81300072,longitude:-73.88613715},{facility_name:"MATTABASSETT DISTRICT CROMWELL",city:"Cromwell","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:9423,amount_of_biosolids_managed_land_applied:0,latitude:41.586897,longitude:-72.650828},{facility_name:'FORT SMITH, CITY OF (P" STREE"',city:"Fort Smith","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:9287,amount_of_biosolids_managed_land_applied:0,latitude:35.406202,longitude:-94.420215},{facility_name:"CITY OF WAXAHACHIE WWTP",city:"Waxahachie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9200,amount_of_biosolids_managed_land_applied:0,latitude:32.36546,longitude:-96.84138},{facility_name:"SPRINGFIELD W W T P",city:"Agawam","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:9161,amount_of_biosolids_managed_land_applied:4282,latitude:42.087793,longitude:-72.588998},{facility_name:"METROPOLITAN COUNCIL-SENECA",city:"Eagan","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:9153,amount_of_biosolids_managed_land_applied:0,latitude:44.826722,longitude:-93.212},{facility_name:"NYCDEP - BOWERY BAY WRRF",city:"Astoria","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:8922,amount_of_biosolids_managed_land_applied:3859,latitude:40.77069839,longitude:-73.92387396},{facility_name:"NYCDEP - OWLS HEAD WPCP",city:"Brooklyn","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:8854,amount_of_biosolids_managed_land_applied:3491,latitude:40.64066723,longitude:-74.01804373},{facility_name:"ENGEL & GRAY COMPOST FACILITY",city:"Santa Maria","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:8743,amount_of_biosolids_managed_land_applied:8743,latitude:34.93151676,longitude:-120.4345626},{facility_name:"SOUTHEAST COUNTY LANDFILL",city:"Lithia","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:8724,amount_of_biosolids_managed_land_applied:8723.52,latitude:27.762601,longitude:-82.20147},{facility_name:"NYCDEP - CONEY ISLAND WRRF",city:"Brooklyn","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:8613,amount_of_biosolids_managed_land_applied:0,latitude:40.58500592,longitude:-73.94873697},{facility_name:"TRUCKEE MEADOWS WRF",city:"Sparks","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:8567,amount_of_biosolids_managed_land_applied:0,latitude:39.54104,longitude:-119.74897},{facility_name:"LOS LUNAS WWTP",city:"Los Lunas","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:8513,amount_of_biosolids_managed_land_applied:0,latitude:34.780084,longitude:-106.731165},{facility_name:"CITY OF HOLLYWOOD",city:"Hollywood","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:8502,amount_of_biosolids_managed_land_applied:8040.38,latitude:26.026578,longitude:-80.134767},{facility_name:"CLAYTON CO-CASEY & HUIE WRF",city:"Morrow","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:8495,amount_of_biosolids_managed_land_applied:4478,latitude:33.515369,longitude:-84.371975},{facility_name:"OMAHA PAPILLION CREEK WWTF",city:"Bellevue","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:8484,amount_of_biosolids_managed_land_applied:8483.7,latitude:41.08264,longitude:-95.8879},{facility_name:"SEVIERVILLE MCCROSKY ISLAND ST",city:"Sevierville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:8481,amount_of_biosolids_managed_land_applied:0,latitude:35.926091,longitude:-83.601216},{facility_name:"NYCDEP - NORTH RIVER WPCP",city:"Manhattan (Subdivision)","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:8458,amount_of_biosolids_managed_land_applied:0,latitude:40.82519532,longitude:-73.94947243},{facility_name:"WESTERN BRANCH WWTP",city:"Upper Marlboro","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:8411,amount_of_biosolids_managed_land_applied:8411,latitude:38.796977,longitude:-76.729667},{facility_name:"ORLANDO - CONSERV II WRF",city:"Orlando","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:8270,amount_of_biosolids_managed_land_applied:8270,latitude:28.50474,longitude:-81.45091},{facility_name:"INLAND EMPIRE UTILITIES PLT 1",city:"Chino Hills","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:8156,amount_of_biosolids_managed_land_applied:0,latitude:33.97307512,longitude:-117.7343957},{facility_name:"SEACOAST UTIL-PGA WWTP",city:"Palm Beach Gardens","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:8128,amount_of_biosolids_managed_land_applied:0,latitude:26.855833,longitude:-80.143889},{facility_name:"HENRICO REGIONAL WWTP",city:"Richmond","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:8022,amount_of_biosolids_managed_land_applied:8022.27,latitude:37.41572,longitude:-77.32345},{facility_name:"WEST COUNTY WASTEWATER DISTRICT WWTP",city:"Richmond","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:7956,amount_of_biosolids_managed_land_applied:0,latitude:37.962591,longitude:-122.376256},{facility_name:"ATLANTIC COUNTY UTIL AUTH WWTF",city:"Atlantic City","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:7940,amount_of_biosolids_managed_land_applied:0,latitude:39.37774,longitude:-74.45342},{facility_name:"LYNCHBURG STP",city:"Lynchburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:7855,amount_of_biosolids_managed_land_applied:1927,latitude:37.395561,longitude:-79.113797},{facility_name:"MUNCIE WATER POLLUTION CONTROL FACILITY",city:"Muncie","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:7825,amount_of_biosolids_managed_land_applied:0,latitude:40.19549,longitude:-85.38733},{facility_name:"NORTH LAS VEGAS WRF",city:"Las Vegas","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:7748,amount_of_biosolids_managed_land_applied:0,latitude:36.206873,longitude:-115.057525},{facility_name:"OMAHA MISSOURI RIVER WWTF",city:"Omaha","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:7683,amount_of_biosolids_managed_land_applied:7682.7,latitude:41.20753,longitude:-95.9298},{facility_name:"METROPOLITAN SEWERAGE DISTRICT OF BUNCOMBE COUNTY NORTH CAROLINA",city:"Asheville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:7608,amount_of_biosolids_managed_land_applied:0,latitude:35.650655,longitude:-82.598193},{facility_name:"OCEAN CO.UA -FMD FERTILIZER MANUFACTURING DIVISION",city:"Bayville","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:7545,amount_of_biosolids_managed_land_applied:7354.51,latitude:39.90178232,longitude:-74.17450513},{facility_name:"VANCOUVER WEST STP",city:"Vancouver","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:7496,amount_of_biosolids_managed_land_applied:0,latitude:45.634882,longitude:-122.69365},{facility_name:"COLTON WRF",city:"Colton","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:7279,amount_of_biosolids_managed_land_applied:7278.5,latitude:34.050596,longitude:-117.333082},{facility_name:"WESTCHESTER CO DEPT ENV FAC",city:"New Rochelle","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:7261,amount_of_biosolids_managed_land_applied:0,latitude:40.91181,longitude:-73.7826},{facility_name:"COX CREEK RECLAMATION FACILITY",city:"Curtis Bay","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:7210,amount_of_biosolids_managed_land_applied:7210.33,latitude:39.174556,longitude:-76.534917},{facility_name:"BALLENGER CREEK STP",city:"Frederick","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:7178,amount_of_biosolids_managed_land_applied:7178,latitude:39.36509,longitude:-77.41395},{facility_name:"SPOKANE RIVERSIDE PARK AWTF AND CSOS",city:"Spokane","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:7168,amount_of_biosolids_managed_land_applied:7168,latitude:47.695191,longitude:-117.473588},{facility_name:"LBVSD, ATHERTON PLANT",city:"Independence","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:7132,amount_of_biosolids_managed_land_applied:350.5,latitude:39.163078,longitude:-94.324898},{facility_name:"MORRIS FORMAN WQTC MSD",city:"Louisville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:7095,amount_of_biosolids_managed_land_applied:6220.914,latitude:38.232528,longitude:-85.829484},{facility_name:"MERRELL BROTHERS INC. - REGIONAL BIOSOLIDS CENTER",city:"Kokomo","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:7088,amount_of_biosolids_managed_land_applied:7088,latitude:40.476428,longitude:-86.147896},{facility_name:"THE PROCTER AND GAMBLE PAPER PRODUCTS CO",city:"Jackson","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:7055,amount_of_biosolids_managed_land_applied:0,latitude:37.48357,longitude:-89.507477},{facility_name:"SOUTH ESSEX SEWERAGE DISTRICT",city:"Salem","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:7027,amount_of_biosolids_managed_land_applied:0,latitude:42.5277,longitude:-70.8765},{facility_name:"NARRAGANSETT BAY COMMISSION",city:"Providence","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:7010,amount_of_biosolids_managed_land_applied:0,latitude:41.79228,longitude:-71.39029},{facility_name:"BILLERICA W W T P",city:"Billerica","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:7003,amount_of_biosolids_managed_land_applied:0,latitude:42.600475,longitude:-71.284157},{facility_name:"METROPOLITAN COUNCIL-BLUE LAKE",city:"Shakopee","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:7003,amount_of_biosolids_managed_land_applied:7003,latitude:44.80017,longitude:-93.42806},{facility_name:"ORLANDO, CITY OF",city:"Orlando","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:6986,amount_of_biosolids_managed_land_applied:0,latitude:28.623656,longitude:-81.22502},{facility_name:"CITY OF HOUSTON",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6946,amount_of_biosolids_managed_land_applied:0,latitude:29.699936,longitude:-95.266914},{facility_name:"DEREK R GUTHRIE WQTC MSD",city:"Louisville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:6929,amount_of_biosolids_managed_land_applied:0,latitude:38.08614,longitude:-85.89878},{facility_name:"COBB CO - SOUTH",city:"Marietta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:6860,amount_of_biosolids_managed_land_applied:508.87,latitude:33.773806,longitude:-84.537167},{facility_name:"SYNAGRO TECHNOLOGIES - CHARLOTTE COUNTY BIO-RECYCLING CENTER",city:"Punta Gorda","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:6852,amount_of_biosolids_managed_land_applied:6852,latitude:26.79941,longitude:-81.9646},{facility_name:"HRSD VIRGINIA INITIATIVE PLANT",city:"Norfolk","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:6829,amount_of_biosolids_managed_land_applied:0,latitude:36.88233,longitude:-76.3125},{facility_name:"LOWELL REGIONAL WW UTILITY",city:"Lowell","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:6791,amount_of_biosolids_managed_land_applied:0,latitude:42.648304,longitude:-71.288911},{facility_name:"CITY OF GARLAND",city:"Sunnyvale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6756,amount_of_biosolids_managed_land_applied:0,latitude:32.795065,longitude:-96.523218},{facility_name:"RIVERSIDE RWQCP",city:"Riverside","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:6715,amount_of_biosolids_managed_land_applied:0,latitude:33.98094,longitude:-117.37516},{facility_name:"STONY BROOK RSA",city:"Princeton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:6640,amount_of_biosolids_managed_land_applied:0,latitude:40.38401,longitude:-74.62306},{facility_name:"ALBANY CO SD",city:"Albany","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:6639,amount_of_biosolids_managed_land_applied:0,latitude:42.6823962,longitude:-73.73647273},{facility_name:"NEW BEDFORD W W T F",city:"New Bedford","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:6633,amount_of_biosolids_managed_land_applied:0,latitude:41.61428281,longitude:-70.91671461},{facility_name:"NYCDEP - JAMAICA WWRF",city:"Jamaica","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:6608,amount_of_biosolids_managed_land_applied:0,latitude:40.65925,longitude:-73.80226},{facility_name:"PISCATAWAY WWTP",city:"Accokeek","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:6607,amount_of_biosolids_managed_land_applied:6205,latitude:38.688645,longitude:-76.996768},{facility_name:"TULARE LAKE COMPOST",city:"Kettleman City","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:6596,amount_of_biosolids_managed_land_applied:6596,latitude:35.94242,longitude:-119.87903},{facility_name:"JT MTG OF ESSEX & UNION CNTY",city:"Elizabeth","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:6555,amount_of_biosolids_managed_land_applied:6554.92,latitude:40.639537,longitude:-74.200357},{facility_name:"DELAWARE #1 WATER POL CON FAC",city:"Camden","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:6439,amount_of_biosolids_managed_land_applied:5422.96,latitude:39.91675769,longitude:-75.10992288},{facility_name:"HENDERSON WRF",city:"Henderson","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:6355,amount_of_biosolids_managed_land_applied:0,latitude:36.03463947,longitude:-114.9757789},{facility_name:"ENCINA WPCF",city:"Carlsbad","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:6319,amount_of_biosolids_managed_land_applied:5471.75,latitude:33.118846,longitude:-117.323517},{facility_name:"CITY OF AUGUSTA (J.B. MESSERLY)",city:"Augusta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:6286,amount_of_biosolids_managed_land_applied:4537.22,latitude:33.375556,longitude:-81.953972},{facility_name:"ALMEDA SIMS WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6273,amount_of_biosolids_managed_land_applied:0,latitude:29.629134,longitude:-95.409126},{facility_name:"KUB-KUWAHEE STP",city:"Knoxville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:6266,amount_of_biosolids_managed_land_applied:6266,latitude:35.944642,longitude:-83.930089},{facility_name:"GREATER LAWRENCE SANITARY DISTRICT",city:"North Andover","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:6171,amount_of_biosolids_managed_land_applied:6155.73,latitude:42.714543,longitude:-71.128793},{facility_name:"HOT SPRINGS, CITY OF (HOT SPGS",city:"Hot Springs","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:6140,amount_of_biosolids_managed_land_applied:6140,latitude:34.451373,longitude:-93.016844},{facility_name:"OCUD/SOUTH WRF",city:"Orlando","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:6122,amount_of_biosolids_managed_land_applied:4439.75,latitude:28.45009,longitude:-81.43923},{facility_name:"NASSAU (C) BAY PARK STP",city:"East Rockaway","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:6102,amount_of_biosolids_managed_land_applied:0,latitude:40.63404,longitude:-73.6623},{facility_name:"NASSAU CO DPW",city:"Westbury","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:6096,amount_of_biosolids_managed_land_applied:0,latitude:40.76431,longitude:-73.55276},{facility_name:"NYCDEP - 26TH WARD WPCP",city:"Brooklyn","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:6077,amount_of_biosolids_managed_land_applied:19158,latitude:40.66903125,longitude:-73.89519579},{facility_name:"HRSD-WILLIAMSBURG STP",city:"Williamsburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:6045,amount_of_biosolids_managed_land_applied:0,latitude:37.214856,longitude:-76.635531},{facility_name:"PRINCE WILLIAM CTY SERV AUTH",city:"Woodbridge","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:6026,amount_of_biosolids_managed_land_applied:0,latitude:38.61623,longitude:-77.26961},{facility_name:"HOPEWELL STP CITY OF",city:"Hopewell","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:5927,amount_of_biosolids_managed_land_applied:0,latitude:37.2910097,longitude:-77.2989443},{facility_name:"VEOLIA WATER-CRANSTON WPCF",city:"Cranston","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:5917,amount_of_biosolids_managed_land_applied:0,latitude:41.7526,longitude:-71.4425},{facility_name:"EDWARD C. LITTLE WRP",city:"Carson","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:5914,amount_of_biosolids_managed_land_applied:5914.39,latitude:33.90829,longitude:-118.39308},{facility_name:"CITY OF SPRINGFIELD",city:"Springfield","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:5900,amount_of_biosolids_managed_land_applied:5324,latitude:37.21538219,longitude:-93.29428548},{facility_name:"CITY OF LANCASTER",city:"Lancaster","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:5900,amount_of_biosolids_managed_land_applied:1957,latitude:40.016667,longitude:-76.305556},{facility_name:"BRUSHY CREEK REGIONAL EAST WWTF",city:"Round Rock","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5893,amount_of_biosolids_managed_land_applied:0,latitude:30.5262,longitude:-97.6195},{facility_name:"LYNN REGIONAL WPCF",city:"Lynn","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:5873,amount_of_biosolids_managed_land_applied:0,latitude:42.45293,longitude:-70.956287},{facility_name:"YPSILANTI COMMUNITY UTILITIES AUTHORITY",city:"Ypsilanti","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:5849,amount_of_biosolids_managed_land_applied:0,latitude:42.22486,longitude:-83.55442},{facility_name:"CITY OF SIOUX CITY",city:"Sioux City","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:5801,amount_of_biosolids_managed_land_applied:7164.4,latitude:42.49265332,longitude:-96.40189444},{facility_name:"UPPER OCCOQUAN S.A. (UOSA)",city:"Centreville","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:5724,amount_of_biosolids_managed_land_applied:5660,latitude:38.81142,longitude:-77.45508},{facility_name:"TIMPANOGOS SPECIAL SERVICE DIS",city:"Pleasant Grove","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:5664,amount_of_biosolids_managed_land_applied:0,latitude:40.384151,longitude:-111.742462},{facility_name:"FOX METRO WRD STP",city:"Oswego","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:5657,amount_of_biosolids_managed_land_applied:5469,latitude:41.71486,longitude:-88.3534},{facility_name:"MERRELL BROTHERS INC. - FLORIDAGREEN",city:"Spring Hill","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:5632,amount_of_biosolids_managed_land_applied:5631.58,latitude:28.36328,longitude:-82.56346},{facility_name:"PINELLAS COUNTY UTILITIES",city:"Largo","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:5627,amount_of_biosolids_managed_land_applied:5627,latitude:27.823504,longitude:-82.74107},{facility_name:"GREATER PEORIA SANITARY AND SEWAGE DISTRICT",city:"Peoria","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:5615,amount_of_biosolids_managed_land_applied:14961,latitude:40.65945,longitude:-89.62497},{facility_name:"MILLERCOORS LLC",city:"Golden","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:5590,amount_of_biosolids_managed_land_applied:0,latitude:39.7425166,longitude:-105.2105415},{facility_name:"CWS - ROCK CREEK STP",city:"Hillsboro","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:5587,amount_of_biosolids_managed_land_applied:5587,latitude:45.49503,longitude:-122.944973},{facility_name:"CENTRAL VALLEY WTR RFB-CENTRAL",city:"South Salt Lake","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:5556,amount_of_biosolids_managed_land_applied:5556,latitude:40.68173,longitude:-111.89973},{facility_name:"EMERALD COAST UTILITIES AUTHORITY",city:"Cantonment","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:5555,amount_of_biosolids_managed_land_applied:5555,latitude:30.589173,longitude:-87.262211},{facility_name:"NEW ALBANY WWTP",city:"New Albany","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:5552,amount_of_biosolids_managed_land_applied:0,latitude:38.27948,longitude:-85.832298},{facility_name:"MWMC - EUGENE/SPRINGFIELD STP",city:"Eugene","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:5495,amount_of_biosolids_managed_land_applied:2574,latitude:44.095584,longitude:-123.111946},{facility_name:"SENECA WWTP",city:"Germantown","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:5481,amount_of_biosolids_managed_land_applied:5481,latitude:39.17102,longitude:-77.26272},{facility_name:"ORO LOMA WWTF",city:"San Lorenzo","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:5456,amount_of_biosolids_managed_land_applied:5455.66,latitude:37.67988,longitude:-122.126482},{facility_name:"METROPOLITAN WRDGC-KIRIE",city:"Chicago","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:5440,amount_of_biosolids_managed_land_applied:0,latitude:42.02135,longitude:-87.93707},{facility_name:"PALO ALTO REGIONAL WQCP",city:"Palo Alto","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:5437,amount_of_biosolids_managed_land_applied:0,latitude:37.458333,longitude:-122.110833},{facility_name:"WYOMING VALLEY SANITARY AUTHOR",city:"Wilkes Barre","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:5431,amount_of_biosolids_managed_land_applied:0,latitude:41.23317,longitude:-75.93908},{facility_name:"JOCO-MILL CREEK REGIONAL WWTP",city:"Olathe","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:5428,amount_of_biosolids_managed_land_applied:5428.24,latitude:38.91572,longitude:-94.79924},{facility_name:"STOCKTON RWCF",city:"Stockton","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:5412,amount_of_biosolids_managed_land_applied:5412.25,latitude:37.937778,longitude:-121.335556},{facility_name:"HAYWARD WPCF",city:"Hayward","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:5400,amount_of_biosolids_managed_land_applied:0,latitude:37.633275,longitude:-122.131995},{facility_name:"MATTAWOMAN WWTP",city:"Charles County","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:5387,amount_of_biosolids_managed_land_applied:5387.38,latitude:38.578036,longitude:-77.110999},{facility_name:"MWRDGC-JOHN E. EGAN WRP",city:"Schaumburg","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:5378,amount_of_biosolids_managed_land_applied:0,latitude:42.019542,longitude:-88.045704},{facility_name:"CHARLESTON CPW/PLUM ISLAND",city:"Charleston","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:5323,amount_of_biosolids_managed_land_applied:1107.35,latitude:32.758611,longitude:-79.949444},{facility_name:"METROPOLITAN ST. LOUIS SEWER DISTRICT",city:"St. Louis","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:5318,amount_of_biosolids_managed_land_applied:0,latitude:38.63107,longitude:-90.21532},{facility_name:"ANCHORAGE, MUNICIPALITY OF",city:"Anchorage","state_postal;":"AK",state:"Alaska",amount_of_biosolids_generated:5318,amount_of_biosolids_managed_land_applied:0,latitude:61.196425,longitude:-150.023509},{facility_name:"MIDLAND WATER POLLUTION CONTROL 1 WWTP",city:"Midland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5292,amount_of_biosolids_managed_land_applied:41.5,latitude:31.999606,longitude:-102.0186},{facility_name:"VISALIA WCP",city:"Visalia","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:5282,amount_of_biosolids_managed_land_applied:1013.39,latitude:36.330729,longitude:-119.2787},{facility_name:"CITY OF EDINBURG WWTP",city:"Edinburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5221,amount_of_biosolids_managed_land_applied:0,latitude:26.309177,longitude:-98.136498},{facility_name:"ALEXANDRIA CITY SANITARY AUTHO",city:"Alexandria","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:5181,amount_of_biosolids_managed_land_applied:4982.27,latitude:38.7989,longitude:-77.0606},{facility_name:"ROBERTO R BUSTAMANTE WWTP",city:"El Paso","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5144,amount_of_biosolids_managed_land_applied:0,latitude:31.65392,longitude:-106.32109},{facility_name:"FORT LAUDERDALE - G T LOHMEYER WWTP",city:"Fort Lauderdale","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:5136,amount_of_biosolids_managed_land_applied:0,latitude:26.09952,longitude:-80.12476},{facility_name:"NEW ORLEANS, CITY OF (EAST BAN",city:"New Orleans","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:5118,amount_of_biosolids_managed_land_applied:0,latitude:29.976667,longitude:-89.997222},{facility_name:"CITY OF HIGH POINT",city:"High Point","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:5110,amount_of_biosolids_managed_land_applied:0,latitude:35.942626,longitude:-79.908075},{facility_name:"WICHITA, CITY OF",city:"Wichita","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:5093,amount_of_biosolids_managed_land_applied:5093.4,latitude:37.68598801,longitude:-97.33435526},{facility_name:"FORT SMITH, CITY OF (MASSARD W",city:"Barling","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:5076,amount_of_biosolids_managed_land_applied:0,latitude:35.32869,longitude:-94.31158},{facility_name:"JACKSON POTW - SAVANNA STREET",city:"Jackson","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:5073,amount_of_biosolids_managed_land_applied:4238.4,latitude:32.237372,longitude:-90.208956},{facility_name:"SOUTH VALLEY WATER RECLAM FAC",city:"West Jordan","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:5031,amount_of_biosolids_managed_land_applied:0,latitude:40.614637,longitude:-111.923776},{facility_name:"GARDEN CITY, CITY OF",city:"Garden City","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:4994,amount_of_biosolids_managed_land_applied:4994.4,latitude:37.9588357,longitude:-100.6157567},{facility_name:"NYCDEP - PORT RICHMOND WPCF",city:"Staten Island, Borough Of","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:4899,amount_of_biosolids_managed_land_applied:0,latitude:40.63325414,longitude:-74.11699094},{facility_name:"DECATUR SD MAIN STP",city:"Decatur","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:4883,amount_of_biosolids_managed_land_applied:3409,latitude:39.84004,longitude:-89.00085},{facility_name:"MERRIMACK W W T F",city:"Merrimack","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:4857,amount_of_biosolids_managed_land_applied:4765,latitude:42.809523,longitude:-71.475871},{facility_name:"JACKSONVILLE SEWER COMMISSION",city:"Jacksonville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:4850,amount_of_biosolids_managed_land_applied:0,latitude:34.864503,longitude:-92.112049},{facility_name:"CITY OF KANSAS CITY",city:"Kansas City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:4842,amount_of_biosolids_managed_land_applied:0,latitude:39.01323,longitude:-94.52917},{facility_name:"SYNAGRO ORGANIC FERTILIZER CO OF SACRAMENTO",city:"Elk Grove","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4831,amount_of_biosolids_managed_land_applied:4825,latitude:38.442517,longitude:-121.459114},{facility_name:"LOMPOC RWRP",city:"Lompoc","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4808,amount_of_biosolids_managed_land_applied:0,latitude:34.63910164,longitude:-120.4669499},{facility_name:"RESOURCE MANAGEMENT INC",city:"New Hampton","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:4795,amount_of_biosolids_managed_land_applied:4794.89,latitude:43.63083,longitude:-71.65012},{facility_name:"VICTOR VALLEY WRA WWTP",city:"Hesperia","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4794,amount_of_biosolids_managed_land_applied:4337.3,latitude:34.616658,longitude:-117.355048},{facility_name:"CAMP CREEK WPCP",city:"Fulton County","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:4792,amount_of_biosolids_managed_land_applied:0,latitude:33.678256,longitude:-84.634493},{facility_name:"ROWLETT CREEK REGIONAL WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4778,amount_of_biosolids_managed_land_applied:0,latitude:33.124035,longitude:-96.565558},{facility_name:"PECAN CREEK WATER RECLAMATION PLANT",city:"Denton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4770,amount_of_biosolids_managed_land_applied:4769.3,latitude:33.19826,longitude:-97.08457},{facility_name:"HAMMOND SANITARY DISTRICT WWTP",city:"Hammond","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:4762,amount_of_biosolids_managed_land_applied:4763.66,latitude:41.620237,longitude:-87.500051},{facility_name:"NORTH DURHAM COMPOSTING FACILITY",city:"Durham","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:4742,amount_of_biosolids_managed_land_applied:4742,latitude:35.99597,longitude:-78.8996},{facility_name:"SAN BERNARDINO WRF",city:"San Bernardino","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4723,amount_of_biosolids_managed_land_applied:0,latitude:34.10456,longitude:-117.29191},{facility_name:"ROCK HILL/MANCHESTER CREEK",city:"Rock Hill","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:4695,amount_of_biosolids_managed_land_applied:0,latitude:34.955978,longitude:-80.958298},{facility_name:"NYCDEP - TALLMAN ISLAND WPCP",city:"College Point","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:4680,amount_of_biosolids_managed_land_applied:0,latitude:40.78528303,longitude:-73.84311167},{facility_name:"LACSD - VALENCIA WRP",city:"Whittier","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4607,amount_of_biosolids_managed_land_applied:0,latitude:33.96071322,longitude:-118.0256606},{facility_name:"OXNARD WWTP",city:"Oxnard","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4508,amount_of_biosolids_managed_land_applied:0,latitude:34.141619,longitude:-119.184014},{facility_name:"WINTER GARDEN PARK WWTP",city:"Harlingen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4500,amount_of_biosolids_managed_land_applied:0,latitude:26.169056,longitude:-97.783694},{facility_name:"TWA - SOUTH BERMUDA",city:"Kissimmee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:4497,amount_of_biosolids_managed_land_applied:0,latitude:28.27425,longitude:-81.42118},{facility_name:"WACO METROPOLITAN AREA REGIONAL SEWARGE SYSTEM",city:"Waco","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4496,amount_of_biosolids_managed_land_applied:4313,latitude:31.517822,longitude:-97.064841},{facility_name:"COBB CO - NORTHWEST WRF",city:"Marietta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:4488,amount_of_biosolids_managed_land_applied:2714.27,latitude:34.0446,longitude:-84.6571},{facility_name:"JEFFERSON COUNTY COMMISSION ENVIRONMENTAL SERVICES DEPARTMENT",city:"Birmingham","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:4480,amount_of_biosolids_managed_land_applied:4480,latitude:33.3928,longitude:-87.0083},{facility_name:"SARATOGA COUNTY",city:"Ballston Spa","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:4471,amount_of_biosolids_managed_land_applied:0,latitude:42.99873,longitude:-73.850511},{facility_name:"CITY OF HOUSTON",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4462,amount_of_biosolids_managed_land_applied:0,latitude:29.66529,longitude:-95.29868},{facility_name:"HILLSBOROUGH COUNTY WATER DEPARTMENT",city:"Tampa","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:4443,amount_of_biosolids_managed_land_applied:0,latitude:28.072785,longitude:-82.609342},{facility_name:"MANCHESTER CITY OF",city:"Manchester","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:4424,amount_of_biosolids_managed_land_applied:0,latitude:42.94447,longitude:-71.45794},{facility_name:"SOUTH CENTRAL REGIONAL WW TRT & DISPOSAL BOARD",city:"Delray Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:4385,amount_of_biosolids_managed_land_applied:0,latitude:26.482778,longitude:-80.088889},{facility_name:"PRASA PUERTO NUEVO",city:"San Juan","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:4367,amount_of_biosolids_managed_land_applied:0,latitude:18.430087,longitude:-66.084137},{facility_name:"UNION SANITARY DISTRICT WWTP",city:"Union City","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4360,amount_of_biosolids_managed_land_applied:2963.37,latitude:37.593046,longitude:-122.088431},{facility_name:"VEOLIA WATER NORTH AMERICA, LLC - BALTIMORE CITY COMPOSTING FACILITY",city:"Baltimore","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:4348,amount_of_biosolids_managed_land_applied:0,latitude:39.20581,longitude:-76.55936},{facility_name:"LINCOLN THERESA WWTF",city:"Lincoln","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:4341,amount_of_biosolids_managed_land_applied:3088,latitude:40.83803,longitude:-96.68647},{facility_name:"SANTA ROSA LAGUNA WWTP",city:"Santa Rosa","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4318,amount_of_biosolids_managed_land_applied:2415,latitude:38.36876,longitude:-122.7686},{facility_name:"ST. PETERSBURG, CITY OF - SOUTHWEST WRF",city:"Saint Petersburg","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:4295,amount_of_biosolids_managed_land_applied:4295.1,latitude:27.7895102,longitude:-82.67934},{facility_name:"LEAVENWORTH, CITY OF",city:"Leavenworth","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:4265,amount_of_biosolids_managed_land_applied:0,latitude:39.31927,longitude:-94.9156},{facility_name:"AMHERST (T)",city:"Williamsville","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:4261,amount_of_biosolids_managed_land_applied:0,latitude:42.98618,longitude:-78.76306},{facility_name:"WATERBURY WPCF",city:"Waterbury","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:4256,amount_of_biosolids_managed_land_applied:0,latitude:41.52065,longitude:-73.04561},{facility_name:"NORTHWEST BERGEN COUNTY UA",city:"Waldwick","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:4197,amount_of_biosolids_managed_land_applied:0,latitude:41.006541,longitude:-74.119143},{facility_name:"SOMERSET RARITAN VALLEY SA",city:"Bridgewater","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:4168,amount_of_biosolids_managed_land_applied:0,latitude:40.557339,longitude:-74.567103},{facility_name:"HRSD- ATLANTIC",city:"Virginia Beach","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:4163,amount_of_biosolids_managed_land_applied:4163,latitude:36.771635,longitude:-75.971575},{facility_name:"SALT LAKE CITY CORP-WAST WATER",city:"Salt Lake City","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:4148,amount_of_biosolids_managed_land_applied:3974.6,latitude:40.8131,longitude:-111.9309},{facility_name:"BROCKTON A W R F",city:"Brockton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:4142,amount_of_biosolids_managed_land_applied:0,latitude:42.04928,longitude:-71.0028},{facility_name:"CITY OF WINSTON-SALEM",city:"Winston Salem","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:4126,amount_of_biosolids_managed_land_applied:4126,latitude:36.036999,longitude:-80.309196},{facility_name:"CITY OF WINSTON-SALEM",city:"Winston Salem","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:4126,amount_of_biosolids_managed_land_applied:4126,latitude:35.995932,longitude:-80.332791},{facility_name:"ATLANTA (SOUTH RIVER WRC)",city:"Atlanta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:4108,amount_of_biosolids_managed_land_applied:0,latitude:33.68244,longitude:-84.36565},{facility_name:"EVANSVILLE EAST WWTP",city:"Evansville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:4107,amount_of_biosolids_managed_land_applied:0,latitude:37.954444,longitude:-87.56825},{facility_name:"MOUNT HOUSTON RD MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4103,amount_of_biosolids_managed_land_applied:0,latitude:29.909328,longitude:-95.444255},{facility_name:"INLAND EMPIRE UTILITIES PLT 2",city:"Chino Hills","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4096,amount_of_biosolids_managed_land_applied:0,latitude:33.97307512,longitude:-117.7343957},{facility_name:"SOUTH MESQUITE CREEK WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3984,amount_of_biosolids_managed_land_applied:0,latitude:32.709733,longitude:-96.541833},{facility_name:"NORTHEAST OHIO REGIONAL S D",city:"Cleveland","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:3963,amount_of_biosolids_managed_land_applied:0,latitude:41.49288,longitude:-81.72462},{facility_name:"TORNILLO WWTF",city:"Tornillo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3934,amount_of_biosolids_managed_land_applied:0,latitude:31.433556,longitude:-106.106028},{facility_name:"CWS - DURHAM STP",city:"Tigard","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:3929,amount_of_biosolids_managed_land_applied:3929,latitude:45.401132,longitude:-122.761381},{facility_name:"KANKAKEE RIVER METRO AGENCY",city:"Kankakee","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:3926,amount_of_biosolids_managed_land_applied:1841,latitude:41.135644,longitude:-87.885397},{facility_name:"EMWD - PERRIS VALLEY RWRF",city:"Perris","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3868,amount_of_biosolids_managed_land_applied:3868.32,latitude:33.98325227,longitude:-117.0081718},{facility_name:"FALL RIVER W W T P",city:"Fall River","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:3855,amount_of_biosolids_managed_land_applied:0,latitude:41.67677,longitude:-71.193934},{facility_name:"NASHVILLE-WHITES CR STP",city:"Nashville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:3833,amount_of_biosolids_managed_land_applied:0,latitude:36.181389,longitude:-86.856667},{facility_name:"GREATER HAZLETON WWTP",city:"Hazleton","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:3791,amount_of_biosolids_managed_land_applied:0,latitude:40.97348,longitude:-76.01966},{facility_name:"MANATEE COUNTY SOUTHEAST REGIONAL WWTF",city:"Bradenton","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:3773,amount_of_biosolids_managed_land_applied:3667.06,latitude:27.469668,longitude:-82.45878},{facility_name:"THREE RIVERS REGIONAL WASTEWATER",city:"Kelso","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:3753,amount_of_biosolids_managed_land_applied:3753.34,latitude:46.100391,longitude:-122.928604},{facility_name:"MAYAGUEZ COMPOSTING PLANT",city:"Mayaguez","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:3748,amount_of_biosolids_managed_land_applied:7962.5,latitude:18.19836159,longitude:-67.12626216},{facility_name:"SILICON VALLEY CLEAN WATER",city:"Redwood City","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3730,amount_of_biosolids_managed_land_applied:1930.88,latitude:37.542795,longitude:-122.231095},{facility_name:"MONROE CO DIV OF PURE WATERS",city:"Rochester","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:3687,amount_of_biosolids_managed_land_applied:0,latitude:43.15537,longitude:-77.61405},{facility_name:"LITTLE MIAMI WWTP - METRO CINCINNATI SEWER DISTRICT",city:"Cincinnati","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:3681,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"STAMFORD WPCA",city:"Stamford","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:3679,amount_of_biosolids_managed_land_applied:3706,latitude:41.045627,longitude:-73.530356},{facility_name:"SOUTH AUSTIN REGIONAL WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3666,amount_of_biosolids_managed_land_applied:0,latitude:30.208001,longitude:-97.60419},{facility_name:"DECATUR UTILITIES",city:"Decatur","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:3648,amount_of_biosolids_managed_land_applied:0,latitude:34.62107,longitude:-86.99649},{facility_name:"LIBERTY HILL REGIONAL WWTP",city:"Liberty Hill","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3647,amount_of_biosolids_managed_land_applied:0,latitude:30.616972,longitude:-97.84675},{facility_name:"BELLINGHAM STP",city:"Bellingham","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:3645,amount_of_biosolids_managed_land_applied:0,latitude:48.717831,longitude:-122.513963},{facility_name:"ANNAPOLIS WRF",city:"Annapolis","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:3642,amount_of_biosolids_managed_land_applied:3641.93,latitude:38.958111,longitude:-76.481361},{facility_name:"HARRISONBURG-ROCKINGHAM RSA",city:"Mount Crawford","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:3622,amount_of_biosolids_managed_land_applied:1452,latitude:38.343547,longitude:-78.92986},{facility_name:"HILLSBOROUGH COUNTY PUBLIC UTILITIES DEPARTMENT",city:"Tampa","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:3620,amount_of_biosolids_managed_land_applied:0,latitude:27.953056,longitude:-82.341389},{facility_name:"FULTON COUNTY (BIG CREEK)",city:"Atlanta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:3608,amount_of_biosolids_managed_land_applied:0,latitude:33.75083,longitude:-84.39142},{facility_name:"GAINESVILLE REGIONAL UTILITIES",city:"Gainesville","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:3592,amount_of_biosolids_managed_land_applied:0,latitude:29.620566,longitude:-82.411895},{facility_name:"LITTLETON/ENGLEWOOD CITIES OF",city:"Englewood","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:3586,amount_of_biosolids_managed_land_applied:3586,latitude:39.66133,longitude:-105.00381},{facility_name:"HAVERHILL W P A F",city:"Bradford","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:3572,amount_of_biosolids_managed_land_applied:0,latitude:42.75941,longitude:-71.061607},{facility_name:"TOPEKA, CITY OF",city:"Topeka","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:3554,amount_of_biosolids_managed_land_applied:2523,latitude:39.07127,longitude:-95.6431},{facility_name:"CITY OF TEXARKANA SOUTH REGIONAL WWTP",city:"Texarkana","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3537,amount_of_biosolids_managed_land_applied:0,latitude:33.378528,longitude:-94.046484},{facility_name:"PROCTORS CREEK WASTEWATER TREATMENT PLANT",city:"Chester","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:3536,amount_of_biosolids_managed_land_applied:3536,latitude:37.381453,longitude:-77.378036},{facility_name:"HILLEBRANDT WWTP",city:"Beaumont","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3491,amount_of_biosolids_managed_land_applied:0,latitude:30.035341,longitude:-94.133575},{facility_name:"MARINE PARK STP",city:"Vancouver","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:3478,amount_of_biosolids_managed_land_applied:0,latitude:45.615876,longitude:-122.620752},{facility_name:"MORRISVILLE BORO MUN AUTH - ST",city:"Morrisville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:3477,amount_of_biosolids_managed_land_applied:0,latitude:40.2107,longitude:-74.77575},{facility_name:"ESCONDIDO HALE AVE RRF",city:"Escondido","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3465,amount_of_biosolids_managed_land_applied:3465,latitude:33.10517,longitude:-117.11138},{facility_name:"VALLEJO SFCD",city:"Vallejo","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3462,amount_of_biosolids_managed_land_applied:3428,latitude:38.091697,longitude:-122.250298},{facility_name:"TOWN OF CARY",city:"Cary","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:3462,amount_of_biosolids_managed_land_applied:3222,latitude:35.651341,longitude:-78.755234},{facility_name:"PAW PAW WWTF",city:"Denison","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3454,amount_of_biosolids_managed_land_applied:0,latitude:33.772798,longitude:-96.501864},{facility_name:"GLOVERSVILLE-JOHNSTOWN JOINT W",city:"Johnstown","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:3451,amount_of_biosolids_managed_land_applied:0,latitude:42.9925,longitude:-74.399667},{facility_name:"NSSD-GURNEE STP",city:"Gurnee","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:3441,amount_of_biosolids_managed_land_applied:3367,latitude:42.35689,longitude:-87.925215},{facility_name:"ROANOKE STP",city:"Roanoke","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:3433,amount_of_biosolids_managed_land_applied:3432.89,latitude:37.263578,longitude:-79.91236},{facility_name:"PETERSBURG STP",city:"Petersburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:3426,amount_of_biosolids_managed_land_applied:3426,latitude:37.23754,longitude:-77.39709},{facility_name:"SOUTHEAST WATER RECLAMATION PLANT",city:"Lubbock","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3419,amount_of_biosolids_managed_land_applied:0,latitude:33.561417,longitude:-101.800639},{facility_name:"HAMBY WATER RECLAMATION WWTP",city:"Abilene","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3385,amount_of_biosolids_managed_land_applied:0,latitude:32.561611,longitude:-99.622556},{facility_name:"PATUXENT WATER RECLAMATION FAC",city:"Crofton","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:3354,amount_of_biosolids_managed_land_applied:3353.6,latitude:39.018056,longitude:-76.700583},{facility_name:"SPRINGDALE, CITY OF",city:"Springdale","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:3346,amount_of_biosolids_managed_land_applied:0,latitude:36.177123,longitude:-94.11217},{facility_name:"COLUMBUS WATER WORKS",city:"Columbus","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:3342,amount_of_biosolids_managed_land_applied:3341.72,latitude:32.410056,longitude:-84.979389},{facility_name:"HASKELL R STREET WWTF",city:"El Paso","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3340,amount_of_biosolids_managed_land_applied:0,latitude:31.761615,longitude:-106.44289},{facility_name:"SARASOTA COUNTY PUBLIC UTILITIES",city:"Sarasota","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:3333,amount_of_biosolids_managed_land_applied:0,latitude:27.276067,longitude:-82.550898},{facility_name:"ST GEORGE CITY CORP",city:"St. George","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:3305,amount_of_biosolids_managed_land_applied:0,latitude:37.11157,longitude:-113.57967},{facility_name:"RIVANNA W&SA-MOORES CREEK STP",city:"Charlottesville","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:3299,amount_of_biosolids_managed_land_applied:0,latitude:38.017507,longitude:-78.460485},{facility_name:"MACON WATER AUTHORITY-ROCKY CR",city:"Macon","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:3296,amount_of_biosolids_managed_land_applied:2366.81,latitude:32.769534,longitude:-83.640199},{facility_name:"NAUGATUCK WPCF",city:"Naugatuck","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:3285,amount_of_biosolids_managed_land_applied:0,latitude:41.472975,longitude:-73.053986},{facility_name:"JORDAN BASIN WATER RECLAMATION FACILITY",city:"Riverton","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:3277,amount_of_biosolids_managed_land_applied:3277,latitude:40.503889,longitude:-111.919444},{facility_name:"NORWALK WPCF",city:"Norwalk","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:3251,amount_of_biosolids_managed_land_applied:0,latitude:41.104383,longitude:-73.411125},{facility_name:"FAIRFIELD-SUISUN WWTP",city:"Fairfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3241,amount_of_biosolids_managed_land_applied:0,latitude:38.220275,longitude:-122.080276},{facility_name:"LITTLE ROCK, CITY OF-FOURCHE CREEK WWTP",city:"Little Rock","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:3226,amount_of_biosolids_managed_land_applied:5098.24,latitude:34.698357,longitude:-92.162882},{facility_name:"SOD RUN WASTEWATER TREATMENT",city:"Perryman","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:3224,amount_of_biosolids_managed_land_applied:2403,latitude:39.426181,longitude:-76.221057},{facility_name:"HUNTINGDON, CITY OF",city:"Huntington","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:3191,amount_of_biosolids_managed_land_applied:0,latitude:38.426951,longitude:-82.43265},{facility_name:"RIVER ROAD WWTF",city:"Amarillo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3176,amount_of_biosolids_managed_land_applied:0,latitude:35.333025,longitude:-101.804168},{facility_name:"LITTLE ROCK, CITY OF-ADAMS FIE",city:"Little Rock","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:3171,amount_of_biosolids_managed_land_applied:5098.24,latitude:34.734604,longitude:-92.216529},{facility_name:"WOODFOREST INTERIM 1 WWTP",city:"Sugarland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3138,amount_of_biosolids_managed_land_applied:3137.98,latitude:30.266388,longitude:-95.547777},{facility_name:"ROCKLAND COUNTY SD#1 STP",city:"Orangeburg","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:3131,amount_of_biosolids_managed_land_applied:3131,latitude:41.0445,longitude:-73.94419},{facility_name:"GREENWOOD PLANT WWTP",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3130,amount_of_biosolids_managed_land_applied:0,latitude:27.71713,longitude:-97.45753},{facility_name:"CROSSVILLE STP",city:"Crossville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:3126,amount_of_biosolids_managed_land_applied:3126,latitude:35.94709,longitude:-85.02846},{facility_name:"CITY OF HOUSTON",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3121,amount_of_biosolids_managed_land_applied:0,latitude:29.844961,longitude:-95.463295},{facility_name:"OCEAN CITY WWTP",city:"Ocean City","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:3117,amount_of_biosolids_managed_land_applied:2869.1179,latitude:38.387613,longitude:-75.070183},{facility_name:"ZACATE CREEK WWTP",city:"Laredo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3108,amount_of_biosolids_managed_land_applied:0,latitude:27.498694,longitude:-99.493806},{facility_name:"SOCWA REGIONAL TP",city:"Laguna Niguel","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3106,amount_of_biosolids_managed_land_applied:0,latitude:33.543841,longitude:-117.702564},{facility_name:"DENTON CREEK REGIONAL WWTF",city:"Arlington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3103,amount_of_biosolids_managed_land_applied:0,latitude:33.021059,longitude:-97.214585},{facility_name:"HRSD-NANSEMOND",city:"Suffolk","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:3093,amount_of_biosolids_managed_land_applied:0,latitude:36.84832715,longitude:-76.4769789},{facility_name:"NORTHFIELD",city:"Northfield","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:3090,amount_of_biosolids_managed_land_applied:3090,latitude:44.471094,longitude:-93.156441},{facility_name:"WEALING BROTHERS LLC",city:"Fowler","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:3066,amount_of_biosolids_managed_land_applied:3066,latitude:40.66651,longitude:-87.21073},{facility_name:"ROCK RIVER WRD",city:"Rockford","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:3050,amount_of_biosolids_managed_land_applied:3245,latitude:42.222022,longitude:-89.093305},{facility_name:"SOUTHWEST WRF",city:"Cape Coral","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:3048,amount_of_biosolids_managed_land_applied:0,latitude:26.592816,longitude:-82.017581},{facility_name:"SOUTHWEST WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3048,amount_of_biosolids_managed_land_applied:0,latitude:29.686501,longitude:-95.450849},{facility_name:"FAYETTEVILLE, CITY OF",city:"Fayetteville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:3034,amount_of_biosolids_managed_land_applied:0,latitude:36.079167,longitude:-94.087778},{facility_name:"ATTLEBORO W P C F",city:"Attleboro","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:3023,amount_of_biosolids_managed_land_applied:0,latitude:41.94422,longitude:-71.28109},{facility_name:"ATLANTA (UTOY CREEK WRC)",city:"Atlanta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:3008,amount_of_biosolids_managed_land_applied:0,latitude:33.74721,longitude:-84.554744},{facility_name:"OSO WWTP",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3005,amount_of_biosolids_managed_land_applied:0,latitude:27.70828,longitude:-97.33911},{facility_name:"TRACY WWTP",city:"Tracy","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3e3,amount_of_biosolids_managed_land_applied:3e3,latitude:37.765556,longitude:-121.420833},{facility_name:"DELTA DIABLO WWTP",city:"Antioch","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2983,amount_of_biosolids_managed_land_applied:2663.15,latitude:38.01668,longitude:-121.84091},{facility_name:"SIMI VALLEY WQCP",city:"Simi Valley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2978,amount_of_biosolids_managed_land_applied:0,latitude:34.287676,longitude:-118.717797},{facility_name:"KCMO WATER SERVICES",city:"Kansas City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:2974,amount_of_biosolids_managed_land_applied:5750.24,latitude:39.01323,longitude:-94.52917},{facility_name:"CITY OF SAN MARCOS WWTF",city:"San Marcos","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2927,amount_of_biosolids_managed_land_applied:0,latitude:29.86615,longitude:-97.925294},{facility_name:"KING COUNTY BRIGHTWATER WWTP",city:"Seattle","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:2913,amount_of_biosolids_managed_land_applied:2913,latitude:47.789647,longitude:-122.141082},{facility_name:"TEN MILE CREEK PLANT",city:"Arlington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2894,amount_of_biosolids_managed_land_applied:0,latitude:32.563831,longitude:-96.633251},{facility_name:"WESTERN WAKE REGIONAL WRF",city:"New Hill","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:2889,amount_of_biosolids_managed_land_applied:2827.2,latitude:35.671033,longitude:-78.939968},{facility_name:"PRASA BAYAMON",city:"Catano","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:2865,amount_of_biosolids_managed_land_applied:0,latitude:18.486944,longitude:-66.139167},{facility_name:"EMWD - TEMECULA VALLEY RWRF",city:"Perris","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2864,amount_of_biosolids_managed_land_applied:2864.38,latitude:33.98325227,longitude:-117.0081718},{facility_name:"IRVINE RANCH WATER DISTRICT",city:"Irvine","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2855,amount_of_biosolids_managed_land_applied:2854.71,latitude:33.66166483,longitude:-117.8297478},{facility_name:"SONOMA VALLEY WWTP",city:"Santa Rosa","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2854,amount_of_biosolids_managed_land_applied:0,latitude:38.48271717,longitude:-122.7536447},{facility_name:"SCRANTON CITY SEW AUTH",city:"Scranton","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2824,amount_of_biosolids_managed_land_applied:0,latitude:41.409223,longitude:-75.662269},{facility_name:"TACOMA CENTRAL NO 1",city:"Tacoma","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:2817,amount_of_biosolids_managed_land_applied:2816.9,latitude:47.24621,longitude:-122.411674},{facility_name:"BAYSHORE REGIONAL SEW AUTH",city:"Union Beach","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:2806,amount_of_biosolids_managed_land_applied:0,latitude:40.4403,longitude:-74.191057},{facility_name:"BENTLY RANCH COMPOST",city:"Minden","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:2803,amount_of_biosolids_managed_land_applied:2803,latitude:38.95706757,longitude:-119.7712328},{facility_name:"NORTH DAVIS SEWER DISTRICT",city:"Syracuse","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:2801,amount_of_biosolids_managed_land_applied:2801,latitude:41.084387,longitude:-112.109111},{facility_name:"FISHERS CHEENEY CREEK WWTP",city:"Fishers","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:2799,amount_of_biosolids_managed_land_applied:0,latitude:39.934278,longitude:-86.065111},{facility_name:"HRSD - BOAT HARBOR STP",city:"Newport News","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:2789,amount_of_biosolids_managed_land_applied:0,latitude:36.96569,longitude:-76.41479},{facility_name:"THOMAS P. SMITH WWTP",city:"Tallahassee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:2789,amount_of_biosolids_managed_land_applied:2788.68,latitude:30.392575,longitude:-84.322783},{facility_name:"HONOLULU SAND ISLAND WWTP",city:"Kapolei","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:2781,amount_of_biosolids_managed_land_applied:0,latitude:21.33003,longitude:-158.08158},{facility_name:"HATFIELD TWP. MUN. AUTH.",city:"Colmar","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2778,amount_of_biosolids_managed_land_applied:0,latitude:40.278507,longitude:-75.255135},{facility_name:"POTTSTOWN BORO",city:"Pottstown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2776,amount_of_biosolids_managed_land_applied:1350.88,latitude:40.23593,longitude:-75.62463},{facility_name:"NORFOLK WWTF",city:"Norfolk","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:2767,amount_of_biosolids_managed_land_applied:2766.726,latitude:42.008306,longitude:-97.400556},{facility_name:"COBB CO (NOONDAY CRK. WPCP)",city:"Marietta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:2759,amount_of_biosolids_managed_land_applied:1767.81,latitude:34.073472,longitude:-84.537944},{facility_name:"LOS ANGELES TERMINAL ISLAND WRP",city:"San Pedro","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2755,amount_of_biosolids_managed_land_applied:0,latitude:33.747788,longitude:-118.26247},{facility_name:"RAHWAY VALLEY SEWERAGE AUTH",city:"Rahway","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:2727,amount_of_biosolids_managed_land_applied:0,latitude:40.600268,longitude:-74.259033},{facility_name:"TURLOCK WQCF",city:"Turlock","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2708,amount_of_biosolids_managed_land_applied:2708,latitude:37.492505,longitude:-120.846925},{facility_name:"SIOUX FALLS, CITY OF (BIOSOLIDS)",city:"Sioux Falls","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:2705,amount_of_biosolids_managed_land_applied:2308.49,latitude:43.595767,longitude:-96.664134},{facility_name:"PRAIRIE CREEK WWTP",city:"Lewisville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2692,amount_of_biosolids_managed_land_applied:0,latitude:33.05667,longitude:-96.97843},{facility_name:"OPEQUON STP",city:"Winchester","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:2684,amount_of_biosolids_managed_land_applied:2617.88,latitude:39.17912,longitude:-78.07576},{facility_name:"JEFFERSON COUNTY COMMISSION ENVIRONMENTAL SERVICES DEPARTMENT",city:"Birmingham","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:2657,amount_of_biosolids_managed_land_applied:2657,latitude:33.526315,longitude:-86.894838},{facility_name:"METROPOLITAN ST. LOUIS SEWER DISTRICT MI",city:"St. Louis","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:2643,amount_of_biosolids_managed_land_applied:0,latitude:38.745778,longitude:-90.495194},{facility_name:"SPRINGFIELD SD- SPRING CREEK",city:"Springfield","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:2633,amount_of_biosolids_managed_land_applied:0,latitude:39.843797,longitude:-89.644817},{facility_name:"CHARLOTTE WATER",city:"Charlotte","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:2629,amount_of_biosolids_managed_land_applied:1211,latitude:35.195744,longitude:-80.905047},{facility_name:"FAYETTEVILLE/WEST SIDE WWTP",city:"Fayetteville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:2619,amount_of_biosolids_managed_land_applied:0,latitude:36.063362,longitude:-94.232835},{facility_name:"JOCO TOMAHAWK CREEK WWTP",city:"Olathe","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:2613,amount_of_biosolids_managed_land_applied:2613.07,latitude:38.91572,longitude:-94.79924},{facility_name:"ELLETTSVILLE MUNICIPAL WWTP",city:"Ellettsville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:2607,amount_of_biosolids_managed_land_applied:0,latitude:39.265972,longitude:-86.628222},{facility_name:"CITY OF KEOKUK",city:"Keokuk","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:2603,amount_of_biosolids_managed_land_applied:2603.2,latitude:40.40712845,longitude:-91.41166242},{facility_name:"CHISHOLM CK UTILITY AUTHORITY",city:"Park City","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:2603,amount_of_biosolids_managed_land_applied:2602.8,latitude:37.78393,longitude:-97.33587},{facility_name:"METROPOLITAN COUNCIL-EMPIRE",city:"Farmington","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:2591,amount_of_biosolids_managed_land_applied:1244.4,latitude:44.664278,longitude:-93.104361},{facility_name:"NSSD-WAUKEGAN STP",city:"Waukegan","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:2587,amount_of_biosolids_managed_land_applied:2579,latitude:42.373938,longitude:-87.817736},{facility_name:"ELSINORE VALLEY REGIONAL FACILITY",city:"Lake Elsinore","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2583,amount_of_biosolids_managed_land_applied:0,latitude:33.629311,longitude:-117.3562059},{facility_name:"METROPOLITAN COUNCIL-EAGLE PT",city:"Cottage Grove","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:2579,amount_of_biosolids_managed_land_applied:0,latitude:44.78634,longitude:-92.91902},{facility_name:"REWA/MAULDIN RD WWTP",city:"Greenville","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:2576,amount_of_biosolids_managed_land_applied:1733.85,latitude:34.796389,longitude:-82.365278},{facility_name:"SYNAGRO TECHNOLOGIES - BACK RIVER PELLETIZER FACILITY",city:"Baltimore","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:2559,amount_of_biosolids_managed_land_applied:2463,latitude:39.29973,longitude:-76.494201},{facility_name:"CENTRAL WEBER SEWER IMP",city:"Ogden","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:2556,amount_of_biosolids_managed_land_applied:1754,latitude:41.27143,longitude:-112.04325},{facility_name:"CITY OF WILSON",city:"Wilson","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:2542,amount_of_biosolids_managed_land_applied:1846.68,latitude:35.68733,longitude:-77.894267},{facility_name:"READING CITY - FRITZ ISLAND WW",city:"Berks County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2536,amount_of_biosolids_managed_land_applied:0,latitude:40.29882,longitude:-75.9408},{facility_name:"SALEM, CITY OF",city:"Keizer","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:2532,amount_of_biosolids_managed_land_applied:2319.46,latitude:45.008574,longitude:-123.05457},{facility_name:"GLOUCESTER CNTY UTIL AUTH",city:"West Deptford Twp","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:2529,amount_of_biosolids_managed_land_applied:0,latitude:39.852891,longitude:-75.22521},{facility_name:"TEMPLE BELTON WWTP",city:"Temple 76501","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2524,amount_of_biosolids_managed_land_applied:0,latitude:31.045891,longitude:-97.438742},{facility_name:"WICHITA FALLS RESOURCES RECOVERY FACILITY",city:"Wichita Falls","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2524,amount_of_biosolids_managed_land_applied:0,latitude:33.922259,longitude:-98.475954},{facility_name:"HILLSBOROUGH COUNTY PUBLIC UTILITIES DEPARTMENT",city:"Tampa","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:2522,amount_of_biosolids_managed_land_applied:0,latitude:27.954893,longitude:-82.2196},{facility_name:"FOX RIVER WRD - ALBIN D. PAGORSKI WRF",city:"Elgin","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:2497,amount_of_biosolids_managed_land_applied:2752.06,latitude:42.01511,longitude:-88.27357},{facility_name:"WILLOWOOD WWTP",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2485,amount_of_biosolids_managed_land_applied:2484.87,latitude:29.915444,longitude:-95.5015},{facility_name:"HENDERSON STP",city:"Henderson","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:2453,amount_of_biosolids_managed_land_applied:0,latitude:37.81666,longitude:-87.620401},{facility_name:"SAN FRANCISCO OCEANSIDE WWTP",city:"San Francisco","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2451,amount_of_biosolids_managed_land_applied:399,latitude:37.7286,longitude:-122.50485},{facility_name:"CITY OF WATERLOO",city:"Waterloo","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:2442,amount_of_biosolids_managed_land_applied:2441.59,latitude:42.49875,longitude:-92.3325},{facility_name:"SOUTH LAREDO WWTP",city:"Laredo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2440,amount_of_biosolids_managed_land_applied:0,latitude:27.449744,longitude:-99.487624},{facility_name:"SOUTH COUNTY REGIONAL WWTP",city:"Gilroy","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2432,amount_of_biosolids_managed_land_applied:0,latitude:36.986847,longitude:-121.538825},{facility_name:"SOUTH BEND MUNICIPAL WWTP",city:"South Bend","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:2417,amount_of_biosolids_managed_land_applied:611.7,latitude:41.718163,longitude:-86.269828},{facility_name:"LEBANON W W T F",city:"West Lebanon","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:2416,amount_of_biosolids_managed_land_applied:0,latitude:43.636805,longitude:-72.320541},{facility_name:"CHAMBERS CREEK STP",city:"University Place","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:2410,amount_of_biosolids_managed_land_applied:2410,latitude:47.194131,longitude:-122.574999},{facility_name:"SOUTHSIDE WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2388,amount_of_biosolids_managed_land_applied:0,latitude:32.254763,longitude:-95.322647},{facility_name:"DRWPCC",city:"Downingtown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2382,amount_of_biosolids_managed_land_applied:2382,latitude:39.99715,longitude:-75.7016},{facility_name:"ALLENTOWN CITY AUTHORITY-WASTE",city:"Allentown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2376,amount_of_biosolids_managed_land_applied:2375.8,latitude:40.603625,longitude:-75.466694},{facility_name:"ST. LOUIS METROPOLITAN SEWER DISTRICT",city:"Valley Park","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:2369,amount_of_biosolids_managed_land_applied:0,latitude:38.559472,longitude:-90.474556},{facility_name:"LACSD - LANCASTER WRP",city:"Whittier","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2361,amount_of_biosolids_managed_land_applied:0,latitude:33.96071322,longitude:-118.0256606},{facility_name:"BLUEFIELD STP",city:"Bluefield","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:2353,amount_of_biosolids_managed_land_applied:0,latitude:37.261,longitude:-81.2818},{facility_name:"NYCDEP - RED HOOK WRRF",city:"Brooklyn","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:2342,amount_of_biosolids_managed_land_applied:1508,latitude:40.69355929,longitude:-73.96536912},{facility_name:"ZIONSVILLE WWTP",city:"Zionsville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:2338,amount_of_biosolids_managed_land_applied:0,latitude:39.95019,longitude:-86.2749},{facility_name:"NASHVILLE-DRY CREEK STP",city:"Madison","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:2330,amount_of_biosolids_managed_land_applied:0,latitude:36.28951,longitude:-86.69068},{facility_name:"ROCKAWAY VALLEY REGIONAL SA",city:"Parsippany","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:2325,amount_of_biosolids_managed_land_applied:0,latitude:40.88801,longitude:-74.39252},{facility_name:"PARKWAY WWTP",city:"Laurel","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:2314,amount_of_biosolids_managed_land_applied:2313.88,latitude:39.06167,longitude:-76.832633},{facility_name:"SPRINGETTSBURY TOWNSHIP_WWTF",city:"York","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2310,amount_of_biosolids_managed_land_applied:2706.09,latitude:40.017028,longitude:-76.691333},{facility_name:"CVWD WRP 10 PALM DESERT",city:"Coachella","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2300,amount_of_biosolids_managed_land_applied:0,latitude:33.685745,longitude:-116.1675911},{facility_name:"MUDDY CREEK WWTP - MSD",city:"Cincinnati","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:2300,amount_of_biosolids_managed_land_applied:0,latitude:39.10749,longitude:-84.54556},{facility_name:"CITY OF ST. JOSEPH",city:"St. Joseph","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:2288,amount_of_biosolids_managed_land_applied:424.79,latitude:39.76869,longitude:-94.84733},{facility_name:"HILLSBOROUGH COUNTY PUBLIC UTILITIES DEPT.",city:"Tampa","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:2280,amount_of_biosolids_managed_land_applied:0,latitude:27.720426,longitude:-82.383963},{facility_name:"CITY OF ROME",city:"Rome","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:2280,amount_of_biosolids_managed_land_applied:1735,latitude:34.229323,longitude:-85.194485},{facility_name:"SYNGARO SAND ISLAND HEAT DRYER",city:"Honolulu","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:2276,amount_of_biosolids_managed_land_applied:1585,latitude:21.304152,longitude:-157.871871},{facility_name:"BROAD RUN WATER RECLAMATION",city:"Ashburn","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:2268,amount_of_biosolids_managed_land_applied:2268,latitude:39.03503,longitude:-77.44757},{facility_name:"HONOLULU HONOULIULI WWTP",city:"Kapolei","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:2263,amount_of_biosolids_managed_land_applied:0,latitude:21.33003,longitude:-158.08158},{facility_name:"VALLEY FORGE SEWER AUTHORITY",city:"Phoenixville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2262,amount_of_biosolids_managed_land_applied:1717.07,latitude:40.11526,longitude:-75.47193},{facility_name:"LAS VEGAS ST WWTF",city:"Colorado Springs","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:2254,amount_of_biosolids_managed_land_applied:0,latitude:38.815753,longitude:-104.811087},{facility_name:"GRESHAM, CITY OF",city:"Portland","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:2252,amount_of_biosolids_managed_land_applied:1598,latitude:45.546612,longitude:-122.459182},{facility_name:"PRASA - CAGUAS RWWTP",city:"Caguas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:2249,amount_of_biosolids_managed_land_applied:0,latitude:18.2615,longitude:-66.027167},{facility_name:"CAPE FEAR PUBLIC UTILITY AUTHORITY",city:"Wilmington","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:2249,amount_of_biosolids_managed_land_applied:0,latitude:34.264722,longitude:-77.921111},{facility_name:"NYCDEP - OAKWOOD BEACH WPCP",city:"Staten Island, Borough Of","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:2231,amount_of_biosolids_managed_land_applied:1059,latitude:40.734015,longitude:-73.86348},{facility_name:"SILOAM SPRINGS, CITY OF",city:"Siloam Springs","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:2223,amount_of_biosolids_managed_land_applied:0,latitude:36.194167,longitude:-94.564722},{facility_name:"DALLAS COUNTY PARK CITIES MUD WWTP",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2219,amount_of_biosolids_managed_land_applied:0,latitude:32.838611,longitude:-96.870556},{facility_name:"MCMINNVILLE STP",city:"Mcminnville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:2209,amount_of_biosolids_managed_land_applied:2208.9,latitude:35.675349,longitude:-85.75887},{facility_name:"BOONVILLE MUNICIPAL WWTP",city:"Boonville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:2206,amount_of_biosolids_managed_land_applied:0,latitude:38.03985924,longitude:-87.22932338},{facility_name:"OAKS WASTEWATER TREATMENT PLANT",city:"Oaks","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2202,amount_of_biosolids_managed_land_applied:2202.23,latitude:40.118235,longitude:-75.345129},{facility_name:"HARRISBURG AUTHORITY, THE",city:"Harrisburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2201,amount_of_biosolids_managed_land_applied:2194.3,latitude:40.239078,longitude:-76.856111},{facility_name:"CITY OF GASTONIA",city:"Gastonia","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:2199,amount_of_biosolids_managed_land_applied:2199.4,latitude:35.306944,longitude:-81.134444},{facility_name:"WEST RANKIN UTILITY AUTHORITY WWTF",city:"Richland","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:2198,amount_of_biosolids_managed_land_applied:2198.3,latitude:32.245278,longitude:-90.200278},{facility_name:"FARGO CITY OF",city:"Fargo","state_postal;":"ND",state:"N.D.",amount_of_biosolids_generated:2193,amount_of_biosolids_managed_land_applied:0,latitude:46.95591,longitude:-96.803606},{facility_name:"OAK GROVE WWTF",city:"Ennis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2193,amount_of_biosolids_managed_land_applied:0,latitude:32.3045,longitude:-96.61566},{facility_name:"CITY OF MISSOULA",city:"Missoula","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:2168,amount_of_biosolids_managed_land_applied:2168,latitude:46.87425,longitude:-113.99454},{facility_name:"CITY OF CARTERSVILLE",city:"Cartersville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:2164,amount_of_biosolids_managed_land_applied:1624.77,latitude:34.143153,longitude:-84.830773},{facility_name:"CITY OF BURLINGTON",city:"Burlington","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:2156,amount_of_biosolids_managed_land_applied:0,latitude:36.019884,longitude:-79.373458},{facility_name:"SCHENECTADY (C)",city:"Schenectady","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:2152,amount_of_biosolids_managed_land_applied:0,latitude:42.81416,longitude:-73.93989},{facility_name:"ST CHARLES PAR COUNCIL-DEST",city:"Destrehan","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:2148,amount_of_biosolids_managed_land_applied:0,latitude:29.943696,longitude:-90.347893},{facility_name:"EMWD - MORENO VALLEY RWRF",city:"Perris","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2148,amount_of_biosolids_managed_land_applied:2147.67,latitude:33.98325227,longitude:-117.0081718},{facility_name:"WESTSIDE WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2144,amount_of_biosolids_managed_land_applied:0,latitude:32.3969,longitude:-95.4114},{facility_name:"KISHWAUKEE WATER RECLAMATION DISTRICT",city:"Dekalb","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:2131,amount_of_biosolids_managed_land_applied:2131.216,latitude:41.94445,longitude:-88.74211},{facility_name:"QUINCY STP, CITY OF",city:"Quincy","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:2125,amount_of_biosolids_managed_land_applied:2105,latitude:39.9026,longitude:-91.426498},{facility_name:"CITY OF DURHAM",city:"Durham","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:2122,amount_of_biosolids_managed_land_applied:2122,latitude:35.904318,longitude:-78.976588},{facility_name:"ASH CREEK WWTP",city:"Azle","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2119,amount_of_biosolids_managed_land_applied:0,latitude:32.888187,longitude:-97.531729},{facility_name:"ST. LOUIS METROPOLITAN SEWER DISTRICT",city:"Valley Park","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:2118,amount_of_biosolids_managed_land_applied:0,latitude:38.559472,longitude:-90.474556},{facility_name:"CORONA WWTP 1",city:"Corona","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2105,amount_of_biosolids_managed_land_applied:0,latitude:33.889466,longitude:-117.607528},{facility_name:"UPPER GWYNEDD-TOWAMENCIN MUN A",city:"Lansdale","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2093,amount_of_biosolids_managed_land_applied:2092.7,latitude:40.229444,longitude:-75.351667},{facility_name:"LAFAYETTE WWTP",city:"Lafayette","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:2088,amount_of_biosolids_managed_land_applied:2887.42,latitude:40.402624,longitude:-86.907696},{facility_name:"WESTERN RIVERSIDE COUNTY REGIONAL WWTP",city:"Corona","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2086,amount_of_biosolids_managed_land_applied:0,latitude:33.931802,longitude:-117.604631},{facility_name:"AUBURN (C)",city:"Auburn","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:2084,amount_of_biosolids_managed_land_applied:0,latitude:42.93015,longitude:-76.566},{facility_name:"NASHUA CITY OF",city:"Nashua","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:2076,amount_of_biosolids_managed_land_applied:2076,latitude:42.74827,longitude:-71.4473},{facility_name:"CITY OF BILLINGS",city:"Billings","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:2074,amount_of_biosolids_managed_land_applied:0,latitude:45.75533,longitude:-108.535473},{facility_name:"FLORENCE/MAIN PLANT",city:"Florence","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:2071,amount_of_biosolids_managed_land_applied:391.65,latitude:34.136389,longitude:-79.551389},{facility_name:"CITY OF GARLAND ROWLETT CREEK WWTF",city:"Garland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2069,amount_of_biosolids_managed_land_applied:0,latitude:32.90029,longitude:-96.60039},{facility_name:"SUNNYVALE WPCP",city:"Sunnyvale","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2069,amount_of_biosolids_managed_land_applied:2069,latitude:37.41170793,longitude:-122.0175076},{facility_name:"STEWART CREEK WEST WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2063,amount_of_biosolids_managed_land_applied:0,latitude:33.1172,longitude:-96.86067},{facility_name:"NORTH HUDSON-ADAMS STREET FACILITY - HOBOKEN STP-TRI CITY",city:"Hoboken","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:2053,amount_of_biosolids_managed_land_applied:0,latitude:40.756984,longitude:-74.032199},{facility_name:"OCEANSIDE SAN LUIS REY WWTP",city:"Oceanside","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2052,amount_of_biosolids_managed_land_applied:1587,latitude:33.19383319,longitude:-117.3558029},{facility_name:"KEEGANS BAYOU WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2049,amount_of_biosolids_managed_land_applied:0,latitude:29.67085,longitude:-95.54144},{facility_name:"BETHLEHEM AUTHORITY-WASTEWATER",city:"Bethlehm","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:2049,amount_of_biosolids_managed_land_applied:2048.69,latitude:40.613667,longitude:-75.334934},{facility_name:"CENTENNIAL WATER AND SAN DIST",city:"Highlands Ranch","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:2025,amount_of_biosolids_managed_land_applied:39.33,latitude:39.55887,longitude:-104.98919},{facility_name:"ERIE COUNTY",city:"Buffalo","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:2019,amount_of_biosolids_managed_land_applied:0,latitude:42.88376,longitude:-78.87736},{facility_name:"SANTA FE, CITY OF (AIRPORT RD",city:"Santa Fe","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:2011,amount_of_biosolids_managed_land_applied:2011,latitude:35.68994,longitude:-105.938},{facility_name:"GREENFIELD WWTP",city:"Greenfield","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:2e3,amount_of_biosolids_managed_land_applied:2600,latitude:39.77725,longitude:-85.762972},{facility_name:"FORT COLLINS CITY OF",city:"Fort Collins","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1993,amount_of_biosolids_managed_land_applied:1993.25,latitude:40.553889,longitude:-105.020556},{facility_name:"ROGERS, CITY OF",city:"Rogers","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:1985,amount_of_biosolids_managed_land_applied:1985.24,latitude:36.301944,longitude:-94.216111},{facility_name:"HRSD-ARMY BASE",city:"Norfolk","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:1981,amount_of_biosolids_managed_land_applied:0,latitude:36.92224,longitude:-76.32237},{facility_name:"MONTVILLE WPCA",city:"Uncasville","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1976,amount_of_biosolids_managed_land_applied:0,latitude:41.0990754,longitude:-73.42135482},{facility_name:"MASSAPONAX REGIONAL STP",city:"Fredericksburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:1975,amount_of_biosolids_managed_land_applied:1975.06,latitude:38.24944,longitude:-77.42358},{facility_name:"ROCHESTER",city:"Rochester","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:1975,amount_of_biosolids_managed_land_applied:1974.5,latitude:44.06165,longitude:-92.46627},{facility_name:"S DAVIS CO SEWER-NORTH",city:"West Bountiful","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1962,amount_of_biosolids_managed_land_applied:1878,latitude:40.902946,longitude:-111.931877},{facility_name:"LAS VIRGENES TAPIA WRF/COMPOST",city:"Calabasas","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1961,amount_of_biosolids_managed_land_applied:1961,latitude:34.13644,longitude:-118.70223},{facility_name:"SANTA CRUZ WWTF",city:"Santa Cruz","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1960,amount_of_biosolids_managed_land_applied:1960,latitude:36.963246,longitude:-122.034009},{facility_name:"CITY OF O'FALLON",city:"O'Fallon","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:1958,amount_of_biosolids_managed_land_applied:0,latitude:38.805368,longitude:-90.675982},{facility_name:"PANTHER CREEK WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1956,amount_of_biosolids_managed_land_applied:0,latitude:32.983,longitude:-96.516},{facility_name:"DANBURY WPCF",city:"Danbury","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1955,amount_of_biosolids_managed_land_applied:0,latitude:41.40426,longitude:-73.422888},{facility_name:"SOCWA J. B. LATHAM TP",city:"Dana Point","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1951,amount_of_biosolids_managed_land_applied:0,latitude:33.466574,longitude:-117.685766},{facility_name:"JOLIET EASTSIDE STP, CITY OF",city:"Joliet","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1943,amount_of_biosolids_managed_land_applied:1943,latitude:41.50594,longitude:-88.09061},{facility_name:"CITY OF BOCA RATON",city:"Boca Raton","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1938,amount_of_biosolids_managed_land_applied:0,latitude:26.367208,longitude:-80.109733},{facility_name:"LOGAN CITY CORPORATION",city:"Logan","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1935,amount_of_biosolids_managed_land_applied:1368,latitude:41.75787,longitude:-111.84902},{facility_name:"EASTERN REGIONAL STP",city:"Fort Wright","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:1932,amount_of_biosolids_managed_land_applied:0,latitude:38.94797,longitude:-84.37049},{facility_name:"INDEPENDENCE,ROCK CR WWTF",city:"Independence","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:1930,amount_of_biosolids_managed_land_applied:588.15,latitude:39.116833,longitude:-94.462861},{facility_name:"HOLYOKE W P C F",city:"Holyoke","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1921,amount_of_biosolids_managed_land_applied:0,latitude:42.191041,longitude:-72.612574},{facility_name:"ODO J. RIEDEL REGIONAL WWTP",city:"Schertz","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1912,amount_of_biosolids_managed_land_applied:750.97,latitude:29.550169,longitude:-98.246881},{facility_name:"LANCASTER AREA SEWER AUTHORITY",city:"Lancaster County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1904,amount_of_biosolids_managed_land_applied:1904.3,latitude:39.9845,longitude:-76.45862},{facility_name:"VENTURA WRF",city:"Ventura","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1889,amount_of_biosolids_managed_land_applied:1889,latitude:34.279597,longitude:-119.2904863},{facility_name:"ROSEVILLE PLEASANT GROVE WWTP",city:"Roseville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1885,amount_of_biosolids_managed_land_applied:912.21,latitude:38.76830703,longitude:-121.3540591},{facility_name:"SPRINGVILLE, CITY OF",city:"Springville","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1884,amount_of_biosolids_managed_land_applied:2335.3,latitude:40.24307,longitude:-111.66745},{facility_name:"TWO BRIDGES WW TREATMENT PLANT",city:"Lincoln Park","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1884,amount_of_biosolids_managed_land_applied:0,latitude:40.9038,longitude:-74.274},{facility_name:"MUNICIPAL UTILITIES BOARD OF ALBERTVILLE",city:"Albertville","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:1870,amount_of_biosolids_managed_land_applied:1837.88,latitude:34.272222,longitude:-86.190556},{facility_name:"TRI-CITY SERVICE DISTRICT",city:"Oregon City","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:1865,amount_of_biosolids_managed_land_applied:1427,latitude:45.375317,longitude:-122.59025},{facility_name:"MUDDY CREEK REGIONAL WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1863,amount_of_biosolids_managed_land_applied:0,latitude:32.971944,longitude:-96.547222},{facility_name:"BINGHAMTON-JOHNSON (C) JNT SB",city:"Vestal","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1861,amount_of_biosolids_managed_land_applied:0,latitude:42.096207,longitude:-75.962666},{facility_name:"FRANKFORT WWTP, CITY OF",city:"Frankfort","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1855,amount_of_biosolids_managed_land_applied:1855,latitude:40.28067,longitude:-86.50978},{facility_name:"WESTBOROUGH W W T P",city:"Westborough","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1851,amount_of_biosolids_managed_land_applied:0,latitude:42.28019,longitude:-71.63248},{facility_name:"MANTECA WQCF",city:"Manteca","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1847,amount_of_biosolids_managed_land_applied:0,latitude:37.799173,longitude:-121.231075},{facility_name:"NAPERVILLE-SPRINGBROOK WRC",city:"Naperville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1846,amount_of_biosolids_managed_land_applied:2199.1,latitude:41.70105,longitude:-88.16671},{facility_name:"NARRAGANSETT BAY COMMISSION",city:"Providence","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:1839,amount_of_biosolids_managed_land_applied:0,latitude:41.79228,longitude:-71.39029},{facility_name:"REWA/PELHAM WWTP",city:"Greer","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:1837,amount_of_biosolids_managed_land_applied:1347.23,latitude:34.858333,longitude:-82.23},{facility_name:"STRATFORD WPCF (TOWN HALL)",city:"Stratford","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1836,amount_of_biosolids_managed_land_applied:0,latitude:41.19701,longitude:-73.13192},{facility_name:"ONE STOP LANDSCAPE SUPPLY COMPOSTING",city:"Redlands","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1831,amount_of_biosolids_managed_land_applied:1831,latitude:34.018445,longitude:-117.188975},{facility_name:"LAS CRUCES, CITY OF",city:"Las Cruces","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:1829,amount_of_biosolids_managed_land_applied:724,latitude:32.30255,longitude:-106.81319},{facility_name:"TACOMA NORTH NO 3",city:"Tacoma","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1829,amount_of_biosolids_managed_land_applied:0,latitude:47.285685,longitude:-122.489297},{facility_name:"HOLLY HILL, CITY OF",city:"Holly Hill","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1828,amount_of_biosolids_managed_land_applied:1827.86,latitude:29.24371,longitude:-81.0468},{facility_name:"CATOMA CREEK WWTP",city:"Montgomery","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:1824,amount_of_biosolids_managed_land_applied:1824,latitude:32.362222,longitude:-86.443611},{facility_name:"WALLACE R. KNOX WWTP",city:"Texas City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1819,amount_of_biosolids_managed_land_applied:0,latitude:29.417167,longitude:-94.896306},{facility_name:"GSW&SA/SCHWARTZ, MYRTLE BEACH",city:"Conway","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:1813,amount_of_biosolids_managed_land_applied:1813,latitude:33.642951,longitude:-79.043803},{facility_name:"SWIFT BEEF COMPANY",city:"Hyrum","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1809,amount_of_biosolids_managed_land_applied:1809,latitude:41.64415,longitude:-111.86086},{facility_name:"FIVE OAKS WWTP",city:"Highlands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1805,amount_of_biosolids_managed_land_applied:0,latitude:30.109639,longitude:-95.498528},{facility_name:"CITY OF MORGANTON",city:"Morganton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1803,amount_of_biosolids_managed_land_applied:580,latitude:35.774026,longitude:-81.665752},{facility_name:"AGSPREAD, INC.",city:"Lincoln City","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1800,amount_of_biosolids_managed_land_applied:2362.37,latitude:38.12197,longitude:-87.002493},{facility_name:"CITY OF LEMARS",city:"Lemars","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:1800,amount_of_biosolids_managed_land_applied:720.4,latitude:42.78691,longitude:-96.16690776},{facility_name:"CITY OF PLAINVIEW WWTF",city:"Plainview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1793,amount_of_biosolids_managed_land_applied:0,latitude:34.169807,longitude:-101.676836},{facility_name:"HRSD -JAMES RIVER STP",city:"Newport News","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:1792,amount_of_biosolids_managed_land_applied:0,latitude:37.084011,longitude:-76.531216},{facility_name:"GRAND ISLAND WWTF",city:"Grand Island","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:1784,amount_of_biosolids_managed_land_applied:0,latitude:40.922386,longitude:-98.3079},{facility_name:"SANTA BARBARA EL ESTERO WWTP",city:"Santa Barbara","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1773,amount_of_biosolids_managed_land_applied:0,latitude:34.41888,longitude:-119.68471},{facility_name:"AUBURN WWTP",city:"Auburn","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1771,amount_of_biosolids_managed_land_applied:0,latitude:41.34305795,longitude:-85.02198547},{facility_name:"PUEBLO CITY OF",city:"Pueblo","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1763,amount_of_biosolids_managed_land_applied:0,latitude:38.25722,longitude:-104.578333},{facility_name:"PWC/FAYETTEVILLE",city:"Fayetteville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1760,amount_of_biosolids_managed_land_applied:1760,latitude:35.059346,longitude:-78.860466},{facility_name:"TAFT WWTF",city:"Bakersfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1760,amount_of_biosolids_managed_land_applied:0,latitude:35.31323593,longitude:-118.9210295},{facility_name:"SOUTHSIDE WWTF",city:"Brownsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1759,amount_of_biosolids_managed_land_applied:0,latitude:25.897222,longitude:-97.468778},{facility_name:"ALBANY CO SD",city:"Albany","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1751,amount_of_biosolids_managed_land_applied:0,latitude:42.6823962,longitude:-73.73647273},{facility_name:"CENTRAL DAVIS CO SEWER",city:"Kaysville","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1749,amount_of_biosolids_managed_land_applied:1327,latitude:41.0007,longitude:-111.944932},{facility_name:"CHARLES RIVER P C D",city:"Medway","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1744,amount_of_biosolids_managed_land_applied:0,latitude:42.14087,longitude:-71.38896},{facility_name:"TWO RIVERS WATER RECLAMATION A",city:"Monmouth Beach","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1741,amount_of_biosolids_managed_land_applied:132,latitude:40.336956,longitude:-73.991718},{facility_name:"SAN MATEO WWTP",city:"San Mateo","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1736,amount_of_biosolids_managed_land_applied:1736.47,latitude:37.5685,longitude:-122.29484},{facility_name:"UNIFIED GOVERNMENT OF ATHENS-CLARKE CO (NORTH OCONEE)",city:"Athens","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1734,amount_of_biosolids_managed_land_applied:0,latitude:33.95989,longitude:-83.37726},{facility_name:"PALM SPRINGS WWTP",city:"Palm Springs","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1731,amount_of_biosolids_managed_land_applied:0,latitude:33.80853,longitude:-116.49866},{facility_name:"THOUSAND OAKS HILL CANYON WWTP",city:"Thousand Oaks","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1728,amount_of_biosolids_managed_land_applied:0,latitude:34.17585,longitude:-118.84841},{facility_name:"LACSD - PALMDALE WRP",city:"Whittier","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1725,amount_of_biosolids_managed_land_applied:0,latitude:33.96071322,longitude:-118.0256606},{facility_name:"SOUTH ADAMS COUNTY WSD",city:"Commerce City","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1724,amount_of_biosolids_managed_land_applied:0,latitude:39.883473,longitude:-104.7918926},{facility_name:"LCDPW-DES PLAINES RIVER STP",city:"Buffalo Grove","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1724,amount_of_biosolids_managed_land_applied:1724,latitude:42.16734,longitude:-87.93602},{facility_name:"GRACE CREEK WWTP",city:"Longview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1724,amount_of_biosolids_managed_land_applied:0,latitude:32.462467,longitude:-94.758067},{facility_name:"WEST DISTRICT WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1722,amount_of_biosolids_managed_land_applied:0,latitude:29.76522,longitude:-95.56275},{facility_name:"COATESVILLE WASTEWATER TP",city:"Coatsville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1718,amount_of_biosolids_managed_land_applied:1718,latitude:39.99267,longitude:-75.87465},{facility_name:"FULTON COUNTY JOHNS CREEK ENVIRON CAMPUS",city:"Atlanta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1718,amount_of_biosolids_managed_land_applied:0,latitude:33.977594,longitude:-84.265494},{facility_name:"AIKEN PSA/HORSE CREEK WWTF",city:"Beech Island","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:1718,amount_of_biosolids_managed_land_applied:1717.64,latitude:33.469722,longitude:-81.913611},{facility_name:"CITY OF COLUMBIA",city:"Columbia","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:1715,amount_of_biosolids_managed_land_applied:1400.6,latitude:38.95270199,longitude:-92.33086506},{facility_name:"CITY OF BURLINGTON",city:"Burlington","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1714,amount_of_biosolids_managed_land_applied:1714,latitude:36.098185,longitude:-79.37666},{facility_name:"DCDPW-WOODRIDGE GREEN VALLEY",city:"Woodridge","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1706,amount_of_biosolids_managed_land_applied:1706,latitude:41.744924,longitude:-88.061239},{facility_name:"CITY OF HOLLAND WWTF",city:"Holland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1702,amount_of_biosolids_managed_land_applied:0,latitude:30.880722,longitude:-97.394167},{facility_name:"BROADNECK_WRF",city:"Annapolis","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:1700,amount_of_biosolids_managed_land_applied:1699.71,latitude:39.025556,longitude:-76.406944},{facility_name:"WARWICK SEWER AUTHORITY",city:"Warwick","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:1700,amount_of_biosolids_managed_land_applied:0,latitude:41.736483,longitude:-71.451444},{facility_name:"CITY OF MACCLENNY",city:"Macclenny","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1693,amount_of_biosolids_managed_land_applied:0,latitude:30.270687,longitude:-82.124907},{facility_name:"BLOOMINGTON/NORMAL WRD STP",city:"Bloomington","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1692,amount_of_biosolids_managed_land_applied:1404,latitude:40.47341,longitude:-89.0083},{facility_name:"JOCO DOUGLAS SMITH MIDDLE BASIN",city:"Olathe","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:1689,amount_of_biosolids_managed_land_applied:1689.13,latitude:38.91572,longitude:-94.79924},{facility_name:"SUNRISE NO 3 WWTP (SAWGRASS)",city:"Sunrise","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1686,amount_of_biosolids_managed_land_applied:0,latitude:26.13137,longitude:-80.337},{facility_name:"BRISTOL",city:"Bristol","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1686,amount_of_biosolids_managed_land_applied:0,latitude:41.67346,longitude:-72.94587},{facility_name:"YORK CITY_SEWER AUTHORITY STP",city:"York County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1678,amount_of_biosolids_managed_land_applied:1678.41,latitude:39.987594,longitude:-76.725791},{facility_name:"BRISTOL STP #2",city:"Bluff City","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:1677,amount_of_biosolids_managed_land_applied:3347,latitude:36.500432,longitude:-82.289707},{facility_name:"TOWN OF MANCHESTER",city:"Manchester","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1675,amount_of_biosolids_managed_land_applied:0,latitude:41.75858,longitude:-72.51661},{facility_name:"SAINT CLOUD",city:"St Cloud","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:1673,amount_of_biosolids_managed_land_applied:1672.8,latitude:45.473611,longitude:-94.119444},{facility_name:"EMWD - SAN JACINTO RWRF",city:"Perris","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1668,amount_of_biosolids_managed_land_applied:1668.11,latitude:33.77295098,longitude:-116.9550549},{facility_name:"HARLINGEN WWTP",city:"Harlingen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1662,amount_of_biosolids_managed_land_applied:24.6,latitude:26.182167,longitude:-97.640361},{facility_name:"LOXAHATCHEE ENVIRONMENTAL CONTROL DISTRICT - WWTP",city:"Jupiter","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1656,amount_of_biosolids_managed_land_applied:0,latitude:26.924069,longitude:-80.140161},{facility_name:"VACAVILLE EASTERLY WWTP",city:"Elmira","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1649,amount_of_biosolids_managed_land_applied:0,latitude:38.34848578,longitude:-121.9086538},{facility_name:"TAUNTON W W T P",city:"Taunton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1648,amount_of_biosolids_managed_land_applied:0,latitude:41.87435,longitude:-71.09723},{facility_name:"HRSD YORK RIVER STP",city:"Seaford","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:1646,amount_of_biosolids_managed_land_applied:0,latitude:37.20112,longitude:-76.44525},{facility_name:"RIALTO WRF",city:"Bloomington","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1645,amount_of_biosolids_managed_land_applied:0,latitude:34.0559,longitude:-117.36134},{facility_name:"CITY OF ROSENBERG WWTF 2",city:"Rosenburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1643,amount_of_biosolids_managed_land_applied:0,latitude:29.528248,longitude:-95.812757},{facility_name:"DUBLIN SAN RAMON RWTF",city:"Dublin","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1643,amount_of_biosolids_managed_land_applied:0,latitude:37.705686,longitude:-121.920739},{facility_name:"CITY OF GREAT FALLS",city:"Great Falls","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:1640,amount_of_biosolids_managed_land_applied:0,latitude:47.50646077,longitude:-111.304097},{facility_name:"CITY OF LARGO. WWTP",city:"Largo","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1610,amount_of_biosolids_managed_land_applied:0,latitude:27.9086,longitude:-82.70374},{facility_name:"MANATEE COUNTY SOUTHWEST REGIONAL WWTP",city:"Bradenton","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1608,amount_of_biosolids_managed_land_applied:0,latitude:27.455075,longitude:-82.624504},{facility_name:"MODESTO WQCF",city:"Modesto","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1605,amount_of_biosolids_managed_land_applied:1605.39,latitude:37.613722,longitude:-121.011778},{facility_name:"FREMONT WWTF",city:"Fremont","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:1597,amount_of_biosolids_managed_land_applied:2185,latitude:41.421985,longitude:-96.413297},{facility_name:"STEEP BANK FLAT BANK CREEK WWTP",city:"Missouri City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1592,amount_of_biosolids_managed_land_applied:0,latitude:29.546889,longitude:-95.573},{facility_name:"BAKERSFIELD WWTP 3",city:"Bakersfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1587,amount_of_biosolids_managed_land_applied:1587,latitude:35.25615989,longitude:-119.0566543},{facility_name:"VERNON WPCF",city:"Vernon","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1585,amount_of_biosolids_managed_land_applied:0,latitude:41.86482,longitude:-72.487307},{facility_name:"DALLAS SALMON WWTP",city:"League City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1583,amount_of_biosolids_managed_land_applied:0,latitude:29.51873,longitude:-95.09124},{facility_name:"WORTHINGTON",city:"Worthington","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:1578,amount_of_biosolids_managed_land_applied:1578,latitude:43.645366,longitude:-95.579616},{facility_name:"HOLLYWOOD ROAD WWTP",city:"Amarillo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1577,amount_of_biosolids_managed_land_applied:0,latitude:35.106936,longitude:-101.791867},{facility_name:"GREELEY CITY OF",city:"Greeley","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1569,amount_of_biosolids_managed_land_applied:16.38,latitude:40.423628,longitude:-104.676788},{facility_name:"CITY OF IOWA CITY",city:"Iowa City","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:1564,amount_of_biosolids_managed_land_applied:986,latitude:41.66005,longitude:-91.529},{facility_name:"EMERALD COAST UTILITIES AUTHORITY",city:"Cantonment","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1559,amount_of_biosolids_managed_land_applied:0,latitude:30.436378,longitude:-87.328078},{facility_name:"LOTT BUDD INLET WATER RECLAMATION FACILITY",city:"Olympia","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1557,amount_of_biosolids_managed_land_applied:1557.42,latitude:47.049372,longitude:-122.898656},{facility_name:"STEUBEN LAKES RWD",city:"Angola","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1557,amount_of_biosolids_managed_land_applied:1557.16,latitude:41.66352,longitude:-85.1435},{facility_name:"MT PLEASANT/CENTER ST & RR RD.",city:"Mount Pleasant","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:1554,amount_of_biosolids_managed_land_applied:0,latitude:32.809579,longitude:-79.835013},{facility_name:"PWC/FAYETTEVILLE",city:"Fayetteville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1552,amount_of_biosolids_managed_land_applied:1552,latitude:34.964309,longitude:-78.832922},{facility_name:"BELL COUNTY WCID 1 WWTF",city:"Killeen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1550,amount_of_biosolids_managed_land_applied:1550.26986,latitude:31.10821,longitude:-97.70166},{facility_name:"LOGANSPORT WASTEWATER TREATMENT PLANT",city:"Logansport","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1550,amount_of_biosolids_managed_land_applied:0,latitude:40.747611,longitude:-86.387611},{facility_name:"SEARCY BOARD OF PUB. UTILITIES",city:"Searcy","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:1549,amount_of_biosolids_managed_land_applied:1548.84,latitude:35.26876,longitude:-91.71355},{facility_name:"ROSEVILLE DRY CREEK WWTP",city:"Roseville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1542,amount_of_biosolids_managed_land_applied:1542,latitude:38.733889,longitude:-121.321667},{facility_name:"CITY OF AUBURN - HC MORGAN WPCF",city:"Auburn","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:1540,amount_of_biosolids_managed_land_applied:1540,latitude:32.537526,longitude:-85.506272},{facility_name:"UNION COUNTY",city:"Monroe","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1538,amount_of_biosolids_managed_land_applied:0,latitude:34.95473,longitude:-80.76425},{facility_name:"JEFFERSON COUNTY COMMISSION ENVIRONMENTAL SERVICES DEPARTMENT",city:"Birmingham","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:1532,amount_of_biosolids_managed_land_applied:1532,latitude:33.5937,longitude:-86.8619},{facility_name:"DUPAGE COUNTY PUBLIC WORKS-KNOLLWOOD STP",city:"Burr Ridge","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1527,amount_of_biosolids_managed_land_applied:0,latitude:41.71236,longitude:-87.933685},{facility_name:"BROOMFIELD CITY AND COUNTY",city:"Broomfield","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1525,amount_of_biosolids_managed_land_applied:0,latitude:39.9213,longitude:-105.02351},{facility_name:"THORN CREEK BASIN SD STP",city:"Chicago Heights","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1513,amount_of_biosolids_managed_land_applied:225,latitude:41.51725,longitude:-87.62656},{facility_name:"TORRINGTON WPCF",city:"Torrington","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1513,amount_of_biosolids_managed_land_applied:0,latitude:41.77697,longitude:-73.11818},{facility_name:"LAUREL POTW, NUMBER 2",city:"Laurel","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:1500,amount_of_biosolids_managed_land_applied:0,latitude:31.687028,longitude:-89.114806},{facility_name:"GREENWICH WPCF",city:"Greenwich","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1499,amount_of_biosolids_managed_land_applied:0,latitude:41.013329,longitude:-73.624833},{facility_name:"ROBINDALE WWTP",city:"Brownsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1491,amount_of_biosolids_managed_land_applied:0,latitude:25.954014,longitude:-97.453935},{facility_name:"CITY OF PLANT CITY",city:"Plant City","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1490,amount_of_biosolids_managed_land_applied:0,latitude:28.02018,longitude:-82.13938},{facility_name:"CHEROKEE COUNTY WATER & SEWERAGE AUTHORITY (CCWSA)",city:"Canton","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1486,amount_of_biosolids_managed_land_applied:0,latitude:34.102722,longitude:-84.447972},{facility_name:"MERIDEN WPCF",city:"Meriden","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1486,amount_of_biosolids_managed_land_applied:0,latitude:41.51139,longitude:-72.82825},{facility_name:"POCATELLO, CITY OF",city:"Pocatello","state_postal;":"ID",state:"Idaho",amount_of_biosolids_generated:1485,amount_of_biosolids_managed_land_applied:1485,latitude:42.914973,longitude:-112.516555},{facility_name:"MANKATO",city:"Mankato","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:1481,amount_of_biosolids_managed_land_applied:1253,latitude:44.18261,longitude:-94.00032},{facility_name:"MOBILE CITY OF W AND S COMM",city:"Mobile","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:1481,amount_of_biosolids_managed_land_applied:1480.69,latitude:30.66365,longitude:-88.03875},{facility_name:"FOX LAKE NW REGIONAL WRF",city:"Fox Lake","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1479,amount_of_biosolids_managed_land_applied:1603,latitude:42.3905,longitude:-88.1767},{facility_name:"NORTHEAST REGIONAL WWTF",city:"Bartow","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1479,amount_of_biosolids_managed_land_applied:0,latitude:27.894946,longitude:-81.84235},{facility_name:"LOS ANGELES GRIFFITH PARK COMPOST",city:"Los Angeles","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1478,amount_of_biosolids_managed_land_applied:1868,latitude:33.93077,longitude:-118.43494},{facility_name:"BOB DERRINGTON WATER RECLAMATION PLANT",city:"Odessa","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1474,amount_of_biosolids_managed_land_applied:0,latitude:31.82183,longitude:-102.255718},{facility_name:"NEWPORT CITY HALL",city:"Newport","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:1473,amount_of_biosolids_managed_land_applied:0,latitude:41.49189,longitude:-71.31164},{facility_name:"CITY OF WEBSTER CENTRAL WWTF",city:"Webster","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1462,amount_of_biosolids_managed_land_applied:0,latitude:29.529003,longitude:-95.117019},{facility_name:"BEAUMONT WWTP #1",city:"Beaumont","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1462,amount_of_biosolids_managed_land_applied:0,latitude:33.95137155,longitude:-116.9920128},{facility_name:"SOUTH SAN FRANCISCO - SAN BRUNO WQCP",city:"S. San Francisco","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1462,amount_of_biosolids_managed_land_applied:0,latitude:37.641603,longitude:-122.39997},{facility_name:"RICHMOND WWTP",city:"Richmond","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1450,amount_of_biosolids_managed_land_applied:1449.83,latitude:39.85298896,longitude:-84.8875605},{facility_name:"CITY OF MCALLEN NORTH WWTP",city:"Mcallen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1448,amount_of_biosolids_managed_land_applied:1448,latitude:26.304794,longitude:-98.219196},{facility_name:"CITY OF LUMBERTON",city:"Lumberton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1446,amount_of_biosolids_managed_land_applied:1445.82,latitude:34.604568,longitude:-78.99126},{facility_name:"SANTA MARGARITA CHIQUITA WRF",city:"San Juan Capistrano","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1438,amount_of_biosolids_managed_land_applied:0,latitude:33.55501922,longitude:-117.669677},{facility_name:"BELLEVILLE STP #1, CITY OF",city:"Belleville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1429,amount_of_biosolids_managed_land_applied:1796,latitude:38.49887,longitude:-89.97946},{facility_name:"DERRY TOWNSHIP STP",city:"Hershey","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1420,amount_of_biosolids_managed_land_applied:1420.1,latitude:40.2837,longitude:-76.68368},{facility_name:"BOULDER CITY OF",city:"Boulder","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1420,amount_of_biosolids_managed_land_applied:0,latitude:40.01476,longitude:-105.27889},{facility_name:"WEST NEW YORK MUA STP",city:"West New York","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1417,amount_of_biosolids_managed_land_applied:0,latitude:40.789316,longitude:-73.99989},{facility_name:"ROTH LANE TREATMENT PLANT",city:"Mechanicsburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1409,amount_of_biosolids_managed_land_applied:1409,latitude:40.27425,longitude:-76.977113},{facility_name:"CITY OF PANAMA CITY BEACH",city:"Panama City Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1409,amount_of_biosolids_managed_land_applied:1390.3,latitude:30.216107,longitude:-85.85367},{facility_name:"PASCO WWTP",city:"Pasco","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1384,amount_of_biosolids_managed_land_applied:850.65,latitude:46.222213,longitude:-119.084842},{facility_name:"DOE BRANCH REG WATER REC PLANT",city:"Lewisville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1383,amount_of_biosolids_managed_land_applied:0,latitude:33.04627,longitude:-97.00117},{facility_name:"VALPARAISO WWTP",city:"Valparaiso","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1382,amount_of_biosolids_managed_land_applied:505.47,latitude:41.46908807,longitude:-87.03326735},{facility_name:"FORT RILEY - CAMP FUNSTON",city:"Ft Riley","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:1368,amount_of_biosolids_managed_land_applied:1368,latitude:38.4985464,longitude:-98.3834298},{facility_name:"MEYER RANCH MUD WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1366,amount_of_biosolids_managed_land_applied:1366.11,latitude:29.780709,longitude:-98.280149},{facility_name:"CITY OF LENOIR",city:"Lenoir","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1365,amount_of_biosolids_managed_land_applied:745,latitude:35.8819,longitude:-81.5771},{facility_name:"BUTLER AREA SEWER AUTH-WTR POL",city:"Butler","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1365,amount_of_biosolids_managed_land_applied:0,latitude:40.839183,longitude:-79.920039},{facility_name:"CUMBERLAND WWTP",city:"Cumberland","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:1360,amount_of_biosolids_managed_land_applied:1217,latitude:39.652151,longitude:-78.762236},{facility_name:"GLENS FALLS (C)",city:"Glens Falls","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1357,amount_of_biosolids_managed_land_applied:0,latitude:43.304944,longitude:-73.623694},{facility_name:"PORTERVILLE WWTF",city:"Porterville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1352,amount_of_biosolids_managed_land_applied:1210,latitude:36.070906,longitude:-119.016191},{facility_name:"CITY OF WARNER ROBINS-SANDY RUN WPCP",city:"Warner Robins","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1348,amount_of_biosolids_managed_land_applied:1348.07,latitude:32.578624,longitude:-83.594865},{facility_name:"URBANA-CHAMPAIGN SD-NE STP",city:"Urbana","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1348,amount_of_biosolids_managed_land_applied:1795,latitude:40.115828,longitude:-88.19299},{facility_name:"RICHEY ROAD MUD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1348,amount_of_biosolids_managed_land_applied:0,latitude:30.008867,longitude:-95.391419},{facility_name:"MEMPHIS-TE MAXSON STP SO PLT",city:"Memphis","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:1346,amount_of_biosolids_managed_land_applied:0,latitude:35.06935,longitude:-90.1316},{facility_name:"COUNTY OF HAWAII PAPAIKOU-PAUKAA WWTP",city:"Hilo","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:1344,amount_of_biosolids_managed_land_applied:0,latitude:19.70581,longitude:-155.060638},{facility_name:"KULAIMANO WASTEWATER TREATMENT PLANT",city:"Pepeekeo","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:1344,amount_of_biosolids_managed_land_applied:0,latitude:19.83251,longitude:-155.09438},{facility_name:"HILO WWTP",city:"Hilo","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:1343,amount_of_biosolids_managed_land_applied:0,latitude:19.70581,longitude:-155.060638},{facility_name:"CITY OF EL CAMPO WWTF",city:"El Campo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1342,amount_of_biosolids_managed_land_applied:0,latitude:29.183972,longitude:-96.256556},{facility_name:"SHREVEPORT, CITY OF (LUCAS)",city:"Shreveport","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:1341,amount_of_biosolids_managed_land_applied:1141,latitude:32.369444,longitude:-93.775833},{facility_name:"CITY OF MUSCATINE",city:"Muscatine","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:1337,amount_of_biosolids_managed_land_applied:938.68,latitude:41.407499,longitude:-91.071913},{facility_name:"DUNKIRK (C)",city:"Dunkirk","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1337,amount_of_biosolids_managed_land_applied:0,latitude:42.48325,longitude:-79.33447},{facility_name:"MOUNTAIN VIEW STP",city:"Wayne","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1336,amount_of_biosolids_managed_land_applied:0,latitude:40.913167,longitude:-74.251163},{facility_name:"PORT ORCHARD WWTP",city:"Port Orchard","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1334,amount_of_biosolids_managed_land_applied:1334.09,latitude:47.546071,longitude:-122.613234},{facility_name:"GALLATIN STP",city:"Gallatin","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:1331,amount_of_biosolids_managed_land_applied:6.01,latitude:36.331477,longitude:-86.462479},{facility_name:"PLAINFIELD N STP, VILLAGE OF",city:"Plainfield","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1330,amount_of_biosolids_managed_land_applied:1330,latitude:41.61622,longitude:-88.2119},{facility_name:"EL PASO WATER UTILITIES NORTHWEST WWTP",city:"El Paso","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1330,amount_of_biosolids_managed_land_applied:0,latitude:31.79472,longitude:-106.5222},{facility_name:"DURHAM COUNTY",city:"Durham","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1330,amount_of_biosolids_managed_land_applied:0,latitude:35.879585,longitude:-78.895783},{facility_name:"SANTA MARIA WWTP",city:"Santa Maria","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1329,amount_of_biosolids_managed_land_applied:0,latitude:34.952597,longitude:-120.384126},{facility_name:"COMMANDING OFFICER MARINE CORPS BASE CAMP LEJEUNE",city:"Camp Lejeune","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1327,amount_of_biosolids_managed_land_applied:402.02,latitude:34.673616,longitude:-77.325577},{facility_name:"CARTER CREEK WWTP",city:"College Station","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1326,amount_of_biosolids_managed_land_applied:0,latitude:30.61602,longitude:-96.28182},{facility_name:"LYNNWOOD STP",city:"Lynnwood","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1324,amount_of_biosolids_managed_land_applied:0,latitude:47.846298,longitude:-122.338351},{facility_name:"NORTHERN TREATMENT PLANT",city:"Brighton","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1323,amount_of_biosolids_managed_land_applied:802.65,latitude:40.004,longitude:-104.822},{facility_name:"EXETER TOWN OF",city:"Exeter","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:1318,amount_of_biosolids_managed_land_applied:0,latitude:42.996706,longitude:-70.944428},{facility_name:"CLEVELAND UTILITIES STP",city:"Cleveland","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:1315,amount_of_biosolids_managed_land_applied:1315,latitude:35.314517,longitude:-84.799943},{facility_name:"WHEELING WPC DIVISION",city:"Wheeling","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:1312,amount_of_biosolids_managed_land_applied:0,latitude:40.0565,longitude:-80.7271},{facility_name:"MONMOUTH NORTH STP",city:"Monmouth","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1310,amount_of_biosolids_managed_land_applied:776,latitude:40.944686,longitude:-90.642554},{facility_name:"HITE CREEK WQTC MSD",city:"Louisville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:1308,amount_of_biosolids_managed_land_applied:0,latitude:38.322222,longitude:-85.555},{facility_name:"MELBOURNE/DB LEE WWTP",city:"Melbourne","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1307,amount_of_biosolids_managed_land_applied:1306.59,latitude:28.12066,longitude:-80.6385},{facility_name:"ENFIELD POTW",city:"Enfield","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1290,amount_of_biosolids_managed_land_applied:0,latitude:42.00025,longitude:-72.594022},{facility_name:"REWA/LOWER REEDY RIVER WWTP",city:"Greenville","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:1289,amount_of_biosolids_managed_land_applied:1027.14,latitude:34.687393,longitude:-82.300086},{facility_name:"LINCOLN WTRF",city:"Lincoln","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1283,amount_of_biosolids_managed_land_applied:0,latitude:38.94136,longitude:-121.223576},{facility_name:"RIO RANCHO, CITY OF",city:"Rio Rancho","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:1282,amount_of_biosolids_managed_land_applied:0,latitude:35.25856,longitude:-106.63226},{facility_name:"PLATTSBURGH (C)",city:"Plattsburgh","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1276,amount_of_biosolids_managed_land_applied:0,latitude:44.69914,longitude:-73.45157},{facility_name:"CITY OF JEFFERSON CITY",city:"Jefferson City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:1274,amount_of_biosolids_managed_land_applied:1260,latitude:38.571991,longitude:-92.171592},{facility_name:"FALLING CREEK WASTEWATER TREATMENT PLANT",city:"Richmond","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:1272,amount_of_biosolids_managed_land_applied:1272,latitude:37.49357,longitude:-77.43117},{facility_name:"CITY OF EAST PROVIDENCE",city:"East Providence","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:1271,amount_of_biosolids_managed_land_applied:1271.43,latitude:41.81972,longitude:-71.37596},{facility_name:"RAPID CITY, CITY OF",city:"Rapid City","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:1270,amount_of_biosolids_managed_land_applied:0,latitude:44.02201,longitude:-103.09853},{facility_name:"RENSSELAER WWTP, CITY OF",city:"Rensselaer","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1267,amount_of_biosolids_managed_land_applied:0,latitude:40.923722,longitude:-87.175778},{facility_name:"CITY OF SPRINGFIELD",city:"Springfield","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:1266,amount_of_biosolids_managed_land_applied:0,latitude:37.21538219,longitude:-93.29428548},{facility_name:"NORTH WATER RECLAMATION FACILITY",city:"Parker","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1266,amount_of_biosolids_managed_land_applied:0,latitude:39.55281,longitude:-104.78229},{facility_name:"CENTRAL MARIN SANITATION AGENCY WWTP",city:"San Rafael","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1263,amount_of_biosolids_managed_land_applied:80,latitude:37.95,longitude:-122.49658},{facility_name:"GERONIMO CREEK WWTP",city:"Seguin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1261,amount_of_biosolids_managed_land_applied:0,latitude:29.55266,longitude:-97.91403},{facility_name:"ORANGE CO DEPT OF EF AND S",city:"Goshen","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1258,amount_of_biosolids_managed_land_applied:0,latitude:41.38863423,longitude:-74.31772315},{facility_name:"CITY OF LAGRANGE",city:"Lagrange","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1253,amount_of_biosolids_managed_land_applied:1252.52,latitude:32.970056,longitude:-85.074944},{facility_name:"GLENBARD WASTEWATER AUTH-MAIN",city:"Glen Ellyn","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1251,amount_of_biosolids_managed_land_applied:926.778,latitude:41.845974,longitude:-88.044495},{facility_name:"SAN LEANDRO WPCP",city:"San Leandro","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1250,amount_of_biosolids_managed_land_applied:260.77,latitude:37.71486,longitude:-122.19282},{facility_name:"JONESBORO, CITY WATER & LIGHT-E",city:"Jonesboro","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:1248,amount_of_biosolids_managed_land_applied:1248,latitude:35.79199,longitude:-90.63282},{facility_name:"SALMON CREEK STP",city:"Vancouver","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1248,amount_of_biosolids_managed_land_applied:1247.6,latitude:45.732006,longitude:-122.727486},{facility_name:"CITY OF POTTSBORO WWTP",city:"Pottsboro","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1246,amount_of_biosolids_managed_land_applied:0,latitude:33.786944,longitude:-96.669},{facility_name:"VICTORIA REGIONAL WWTP",city:"Victoria","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1241,amount_of_biosolids_managed_land_applied:0,latitude:28.753601,longitude:-97.006329},{facility_name:"MOUNT LAUREL TWP MUA",city:"Mt Laurel","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1240,amount_of_biosolids_managed_land_applied:1239.57,latitude:39.92029,longitude:-74.92752},{facility_name:"TWA - SANDHILL ROAD WWTF",city:"Kissimmee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1235,amount_of_biosolids_managed_land_applied:0,latitude:28.30926015,longitude:-81.42518101},{facility_name:"LAKEVIEW REGIONAL WATER RECLAMATION",city:"Lewisville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1235,amount_of_biosolids_managed_land_applied:0,latitude:33.0568,longitude:-96.9872},{facility_name:"MARLBOROUGH EASTERLY WWTF",city:"Marlborough","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1234,amount_of_biosolids_managed_land_applied:0,latitude:42.350563,longitude:-71.494881},{facility_name:"ORANGE VIRGINIA,TOWN OF,SEWAGE",city:"Orange","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:1232,amount_of_biosolids_managed_land_applied:0,latitude:38.261,longitude:-78.15161},{facility_name:"LOWER LACKAWANNA VALLEY SAN. A",city:"Duryea","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1232,amount_of_biosolids_managed_land_applied:0,latitude:41.348611,longitude:-75.780179},{facility_name:"PROVO CITY CORP",city:"Provo","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1231,amount_of_biosolids_managed_land_applied:1222,latitude:40.21594,longitude:-111.65257},{facility_name:"CITY OF GREENVILLE WWTP",city:"Greenville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1231,amount_of_biosolids_managed_land_applied:0,latitude:33.121111,longitude:-96.075},{facility_name:"NORTHEAST WWTF",city:"Alice","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1230,amount_of_biosolids_managed_land_applied:0,latitude:27.774472,longitude:-98.037389},{facility_name:"CITY OF BRENHAM WWTP",city:"Brenham","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1230,amount_of_biosolids_managed_land_applied:1229.6,latitude:30.171694,longitude:-96.378528},{facility_name:"SOUTH TAHOE PUD WWTP",city:"South Lake Tahoe","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1227,amount_of_biosolids_managed_land_applied:0,latitude:38.92205,longitude:-119.96947},{facility_name:"LIVERMORE WRP",city:"Livermore","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1226,amount_of_biosolids_managed_land_applied:180.8,latitude:37.689444,longitude:-121.8075},{facility_name:"CITY OF CLEARWATER PUBLIC UTILITIES DEPARTMENT",city:"Clearwater","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1223,amount_of_biosolids_managed_land_applied:1222.82,latitude:28.02709,longitude:-82.701043},{facility_name:"CHICOPEE W P C F",city:"Chicopee","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1222,amount_of_biosolids_managed_land_applied:996.425,latitude:42.15376,longitude:-72.62166},{facility_name:"PIERRE, CITY OF (BIOSOLIDS)",city:"Pierre, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:1219,amount_of_biosolids_managed_land_applied:0,latitude:44.350634,longitude:-100.323996},{facility_name:"YAKIMA POTW",city:"Yakima","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1218,amount_of_biosolids_managed_land_applied:1218,latitude:46.579403,longitude:-120.46983},{facility_name:"CITY OF SARASOTA",city:"Sarasota","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1218,amount_of_biosolids_managed_land_applied:0,latitude:27.347711,longitude:-82.533154},{facility_name:"MISHAWAKA MUNICIPAL WWTP",city:"Mishawaka","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1217,amount_of_biosolids_managed_land_applied:736,latitude:41.661584,longitude:-86.164335},{facility_name:"PULASKI STP",city:"Pulaski","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:1213,amount_of_biosolids_managed_land_applied:1213.4,latitude:35.183917,longitude:-87.04175},{facility_name:"CHARLOTTE WATER",city:"Charlotte","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1212,amount_of_biosolids_managed_land_applied:979,latitude:35.383596,longitude:-80.941433},{facility_name:"PLANTATION REGIONAL WWTP",city:"Plantation","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1208,amount_of_biosolids_managed_land_applied:1207.55,latitude:26.13957,longitude:-80.23719},{facility_name:"BOROUGH OF CHAMBERSBURG",city:"Chambersburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1205,amount_of_biosolids_managed_land_applied:133.91,latitude:39.925278,longitude:-77.674167},{facility_name:"DOWNERS GROVE SD WTC",city:"Downers Grove","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1202,amount_of_biosolids_managed_land_applied:1202,latitude:41.794707,longitude:-88.05228},{facility_name:"HAMILTON TWP WPCF",city:"Hamilton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1202,amount_of_biosolids_managed_land_applied:0,latitude:40.183063,longitude:-74.710695},{facility_name:"CONROE SOUTHWEST REGIONAL WWTF",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1199,amount_of_biosolids_managed_land_applied:0,latitude:30.2739,longitude:-95.4919},{facility_name:"GREENSBURG WWTP",city:"Greensburg","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1197,amount_of_biosolids_managed_land_applied:1197.21,latitude:39.327555,longitude:-85.485439},{facility_name:"CARMEL WWTP",city:"Indianapolis","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1197,amount_of_biosolids_managed_land_applied:0,latitude:39.92896,longitude:-86.07925},{facility_name:"BRENTWOOD WWTF",city:"Brentwood","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1196,amount_of_biosolids_managed_land_applied:0,latitude:37.92329701,longitude:-121.6998941},{facility_name:"CITY OF WINTER HAVEN",city:"Winter Haven","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1195,amount_of_biosolids_managed_land_applied:0,latitude:27.951798,longitude:-81.7091},{facility_name:"CASPER, CITY OF",city:"Casper","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:1195,amount_of_biosolids_managed_land_applied:0,latitude:42.8515,longitude:-106.32662},{facility_name:"CITY OF BROWNWOOD WWTP",city:"Brownwood","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1189,amount_of_biosolids_managed_land_applied:0,latitude:31.695271,longitude:-98.950093},{facility_name:"EMPORIA, CITY OF",city:"Emporia","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:1181,amount_of_biosolids_managed_land_applied:1181.4,latitude:38.41229,longitude:-96.21918088},{facility_name:"KILLINGLY",city:"Danielson","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:1175,amount_of_biosolids_managed_land_applied:0,latitude:38.9011896,longitude:-77.00896},{facility_name:"COPPERAS COVE NORTHWEST WWTP",city:"Copperas Cove","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1171,amount_of_biosolids_managed_land_applied:0,latitude:31.150473,longitude:-97.90698},{facility_name:"KEENE CITY OF",city:"Swanzey","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:1171,amount_of_biosolids_managed_land_applied:0,latitude:42.893,longitude:-72.2737},{facility_name:"REWA/GILDER CK WWTP",city:"Simpsonville","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:1167,amount_of_biosolids_managed_land_applied:1131.91,latitude:34.7897,longitude:-82.1586},{facility_name:"CITY OF DUBUQUE",city:"Dubuque","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:1165,amount_of_biosolids_managed_land_applied:438.05,latitude:42.50537,longitude:-90.667775},{facility_name:"JACKSON COUNTY UTILITY AUTHORITY, WEST JACKSON COUNTY POTW",city:"Ocean Springs","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:1165,amount_of_biosolids_managed_land_applied:1284,latitude:30.364556,longitude:-88.561833},{facility_name:"CHARLOTTE WATER",city:"Charlotte","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1164,amount_of_biosolids_managed_land_applied:1164,latitude:35.33441,longitude:-80.696481},{facility_name:"MIRAMAR, CITY OF WWTF",city:"Miramar","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1163,amount_of_biosolids_managed_land_applied:1162,latitude:25.99311,longitude:-80.33409},{facility_name:"CLAYTON CO (NORTHEAST WPCP)",city:"Morrow","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1160,amount_of_biosolids_managed_land_applied:1147,latitude:33.573489,longitude:-84.262837},{facility_name:"CITY OF ROCKY MOUNT",city:"Rocky Mount","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1160,amount_of_biosolids_managed_land_applied:1159.53,latitude:35.991997,longitude:-77.727395},{facility_name:"LONGMONT CITY OF",city:"Longmont","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1159,amount_of_biosolids_managed_land_applied:1158.93,latitude:40.14617,longitude:-105.11557},{facility_name:"COLLINSVILLE STP, CITY OF",city:"Collinsville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1159,amount_of_biosolids_managed_land_applied:0,latitude:38.666768,longitude:-90.031345},{facility_name:"CITY OF JOPLIN",city:"Joplin","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:1156,amount_of_biosolids_managed_land_applied:1156,latitude:37.08525,longitude:-94.51344},{facility_name:"SOUTH MISSION 1 WWTP",city:"Mission","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1155,amount_of_biosolids_managed_land_applied:0,latitude:26.194333,longitude:-98.331972},{facility_name:"WAILUKU-KAHULUI WASTEWATER RECLAMATION FACILITY",city:"Kahului","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:1154,amount_of_biosolids_managed_land_applied:0,latitude:20.898643,longitude:-156.45865},{facility_name:"ROSWELL, NEW MEXICO",city:"Roswell","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:1152,amount_of_biosolids_managed_land_applied:1152,latitude:33.408732,longitude:-104.489017},{facility_name:"KARLE ENVIRO ORGANIC RECYCLING INC.",city:"Crawfordsville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1150,amount_of_biosolids_managed_land_applied:1150,latitude:40.041822,longitude:-86.890163},{facility_name:"SILVER CITY, TOWN OF",city:"Grant County","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:1150,amount_of_biosolids_managed_land_applied:0,latitude:32.715976,longitude:-108.248976},{facility_name:"NEW PORT RICHEY CITY OF WWTF",city:"New Port Richey","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1148,amount_of_biosolids_managed_land_applied:0,latitude:28.248207,longitude:-82.735459},{facility_name:"PENN TWP BOARD OF COMMISSIONS",city:"Hanover","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1147,amount_of_biosolids_managed_land_applied:1147,latitude:39.794095,longitude:-76.968804},{facility_name:"CITY OF BELLAIRE WWTP",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1141,amount_of_biosolids_managed_land_applied:0,latitude:29.69073,longitude:-95.44921},{facility_name:"MARLEY-TAYLOR WRF",city:"Lexington Park","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:1141,amount_of_biosolids_managed_land_applied:1141.18,latitude:38.26704,longitude:-76.41166},{facility_name:"LONG BRANCH SA",city:"Long Branch","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1139,amount_of_biosolids_managed_land_applied:0,latitude:40.31294,longitude:-73.98603},{facility_name:"GAINESVILLE REGIONAL UTILITIES",city:"Gainesville","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1133,amount_of_biosolids_managed_land_applied:0,latitude:29.63392,longitude:-82.32635},{facility_name:"LEOMINSTER W W T P",city:"Leominster","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1133,amount_of_biosolids_managed_land_applied:0,latitude:42.521522,longitude:-71.739264},{facility_name:"BOXELDER SANITATION DISTRICT",city:"Fort Collins","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1127,amount_of_biosolids_managed_land_applied:782.75,latitude:40.5482164,longitude:-105.0648327},{facility_name:"ALBANY-MILLERSBURG WRF",city:"Albany","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:1126,amount_of_biosolids_managed_land_applied:139.92,latitude:44.643333,longitude:-123.075278},{facility_name:"GUNTERSVILLE WATER AND SEWER BOARD",city:"Guntersville","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:1125,amount_of_biosolids_managed_land_applied:1124.73,latitude:34.346335,longitude:-86.286714},{facility_name:"NIAGARA COUNTY SD NO.1",city:"Niagara Falls","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1122,amount_of_biosolids_managed_land_applied:0,latitude:43.070086,longitude:-78.922768},{facility_name:"YUBA CITY WWTP",city:"Yuba City","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1122,amount_of_biosolids_managed_land_applied:0,latitude:39.1075,longitude:-121.612278},{facility_name:"CHEYENNE BOARD OF PUBLIC UTILITIES",city:"Cheyenne","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:1121,amount_of_biosolids_managed_land_applied:1139,latitude:41.126871,longitude:-104.707689},{facility_name:"CITY OF ALBANY",city:"Albany","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1118,amount_of_biosolids_managed_land_applied:1118.48,latitude:31.538215,longitude:-84.147694},{facility_name:"MCALLEN SOUTH WWTP",city:"Mcallen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1116,amount_of_biosolids_managed_land_applied:0,latitude:26.1975,longitude:-98.2506},{facility_name:"CITY OF SALISBURY",city:"Salisbury","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1111,amount_of_biosolids_managed_land_applied:1111,latitude:35.712263,longitude:-80.4318},{facility_name:"CITY OF BOZEMAN",city:"Bozeman","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:1108,amount_of_biosolids_managed_land_applied:0,latitude:45.723889,longitude:-111.078611},{facility_name:"PARAGOULD, CITY WATER & LIGHT",city:"Paragould","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:1102,amount_of_biosolids_managed_land_applied:1102,latitude:36.038149,longitude:-90.489826},{facility_name:"CITY OF SANFORD",city:"Sanford","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1102,amount_of_biosolids_managed_land_applied:1102,latitude:35.546513,longitude:-79.219919},{facility_name:"PENN RIDGE WASTE WATER TREATME",city:"Sellersville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1102,amount_of_biosolids_managed_land_applied:1006,latitude:40.354176,longitude:-75.312947},{facility_name:"NEBRASKA CITY WWTF",city:"Nebraska City","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:1102,amount_of_biosolids_managed_land_applied:1101.6,latitude:40.67645,longitude:-95.84609},{facility_name:"INDIAN RIVER COUNTY UTILITIES DEPARTMENT (IRCUD)",city:"Vero Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:1101,amount_of_biosolids_managed_land_applied:0,latitude:27.58702,longitude:-80.40103},{facility_name:"SALINA, CITY OF",city:"Salina","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:1098,amount_of_biosolids_managed_land_applied:1098.3,latitude:38.84288199,longitude:-97.60683514},{facility_name:"YORKTOWN WWTP, TOWN OF",city:"Yorktown","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:1097,amount_of_biosolids_managed_land_applied:0,latitude:40.173944,longitude:-85.503194},{facility_name:"SULPHUR SPRINGS WWTF",city:"Sulphur Springs","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1086,amount_of_biosolids_managed_land_applied:0,latitude:33.150417,longitude:-95.550417},{facility_name:"NEW ORLEANS PAR-WESTBANK STP",city:"New Orleans","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:1086,amount_of_biosolids_managed_land_applied:0,latitude:29.90427,longitude:-89.96483},{facility_name:"SAN CLEMENTE WRP",city:"San Clemente","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1083,amount_of_biosolids_managed_land_applied:0,latitude:33.43444,longitude:-117.629167},{facility_name:"WESTMINSTER CITY OF",city:"Westminster","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1078,amount_of_biosolids_managed_land_applied:576.3,latitude:39.856598,longitude:-105.069523},{facility_name:"JOLIET WEST STP, CITY OF",city:"Joliet","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1076,amount_of_biosolids_managed_land_applied:1076,latitude:41.476105,longitude:-88.167494},{facility_name:"FARIBAULT",city:"Faribault","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:1074,amount_of_biosolids_managed_land_applied:1074,latitude:44.309722,longitude:-93.266111},{facility_name:"BELTWAY WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1074,amount_of_biosolids_managed_land_applied:0,latitude:29.70102,longitude:-95.67086},{facility_name:"NEWBURGH (C)",city:"Newburgh","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1073,amount_of_biosolids_managed_land_applied:0,latitude:41.49994,longitude:-74.01008},{facility_name:"WATER & WASTEWATER BOARD OF THE CITY OF MADISON",city:"Madison","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:1072,amount_of_biosolids_managed_land_applied:1072,latitude:34.567014,longitude:-86.75539},{facility_name:"CITY OF ASHEBORO",city:"Asheboro","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1072,amount_of_biosolids_managed_land_applied:1071.7,latitude:35.76481,longitude:-79.78735},{facility_name:"OREM CITY CORPORATION",city:"Orem","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1065,amount_of_biosolids_managed_land_applied:730.84,latitude:40.31477,longitude:-111.71747},{facility_name:"PETALUMA ELLIS CREEK WRF",city:"Petaluma","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1055,amount_of_biosolids_managed_land_applied:939,latitude:38.226828,longitude:-122.586829},{facility_name:"LOVELAND CITY OF",city:"Loveland","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1055,amount_of_biosolids_managed_land_applied:1054,latitude:40.39536,longitude:-105.11481},{facility_name:"SELMA-KINGSBURG-FOWLER WWTP",city:"Kingsburg","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1054,amount_of_biosolids_managed_land_applied:0,latitude:36.52255755,longitude:-119.5642071},{facility_name:"KITSAP COUNTY CENTRAL KITSAP WWTP",city:"Poulsbo","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1053,amount_of_biosolids_managed_land_applied:0,latitude:47.67397,longitude:-122.629947},{facility_name:"LOWER STROUBLES CREEK WWTP",city:"Montgomery County","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:1052,amount_of_biosolids_managed_land_applied:0,latitude:37.191389,longitude:-80.519444},{facility_name:"CITY OF COUNCIL BLUFFS",city:"Council Bluffs","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:1051,amount_of_biosolids_managed_land_applied:1050.6,latitude:41.15310296,longitude:-95.85879998},{facility_name:"PORTLAND - TRYON CREEK WWTP",city:"Lake Oswego","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:1050,amount_of_biosolids_managed_land_applied:0,latitude:45.421607,longitude:-122.658561},{facility_name:"LEXINGTON WWTF",city:"Lexington","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:1049,amount_of_biosolids_managed_land_applied:1049,latitude:40.76545,longitude:-99.7195},{facility_name:"EWING-LAWRENCE SA WTP",city:"Lawrenceville","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1049,amount_of_biosolids_managed_land_applied:0,latitude:40.24808,longitude:-74.72687},{facility_name:"NORTH EAST BORO",city:"North East","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1048,amount_of_biosolids_managed_land_applied:0,latitude:42.214498,longitude:-79.846626},{facility_name:"ORANGE WATER AND SEWER AUTHORITY",city:"Carrboro","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:1045,amount_of_biosolids_managed_land_applied:614.7,latitude:35.896449,longitude:-79.025655},{facility_name:"CHICO WQCP",city:"Chico","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1035,amount_of_biosolids_managed_land_applied:1200,latitude:39.69961,longitude:-121.91076},{facility_name:"BURLINGTON MAIN WASTEWATER TREATMENT PLANT",city:"Burlington","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:1035,amount_of_biosolids_managed_land_applied:0,latitude:44.472691,longitude:-73.219078},{facility_name:"SU-REGIONAL WWTF PLANT",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1032,amount_of_biosolids_managed_land_applied:0,latitude:29.792631,longitude:-95.159911},{facility_name:"BARSTOW WWTF",city:"Barstow","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1031,amount_of_biosolids_managed_land_applied:0,latitude:34.89237,longitude:-117.02519},{facility_name:"NEW HOLLAND BORO AUTH",city:"New Holland","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1031,amount_of_biosolids_managed_land_applied:1109,latitude:40.0917,longitude:-76.08497},{facility_name:"GRANDVIEW POTW",city:"Grandview","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:1029,amount_of_biosolids_managed_land_applied:0,latitude:46.211527,longitude:-119.911051},{facility_name:"OLATHE CEDAR CREEK WWTF",city:"Olathe","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:1028,amount_of_biosolids_managed_land_applied:29.6,latitude:38.88216299,longitude:-94.81818301},{facility_name:"DANVILLE SD",city:"Danville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:1027,amount_of_biosolids_managed_land_applied:0,latitude:40.10766,longitude:-87.603386},{facility_name:"CITY OF EASTLAND WWTF",city:"Eastland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1026,amount_of_biosolids_managed_land_applied:0,latitude:32.387333,longitude:-98.809778},{facility_name:"HUTCHINSON, CITY OF",city:"Hutchinson","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:1023,amount_of_biosolids_managed_land_applied:1023.26,latitude:38.07152,longitude:-97.91975},{facility_name:"UPPER MORELAND-HATBORO JOINT",city:"Willow Grove","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:1023,amount_of_biosolids_managed_land_applied:0,latitude:40.156925,longitude:-75.108025},{facility_name:"FALLS CITY WWTF",city:"Falls City","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:1019,amount_of_biosolids_managed_land_applied:0,latitude:40.064602,longitude:-95.60855},{facility_name:"LITTLE RIVER WPCP",city:"Evans","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1017,amount_of_biosolids_managed_land_applied:1017.32,latitude:33.59227,longitude:-82.139772},{facility_name:"BAMMEL UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1017,amount_of_biosolids_managed_land_applied:0,latitude:30.009513,longitude:-95.499569},{facility_name:"TAHOE-TRUCKEE WWTP",city:"Truckee","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:1016,amount_of_biosolids_managed_land_applied:893.9,latitude:39.337778,longitude:-120.128611},{facility_name:"ORANGETOWN (T)",city:"Orangetown","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:1010,amount_of_biosolids_managed_land_applied:1010.14,latitude:41.05046503,longitude:-73.97365668},{facility_name:"MOUNT HOLLY WPCF",city:"Mount Holly","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1010,amount_of_biosolids_managed_land_applied:1009.79,latitude:39.995507,longitude:-74.797534},{facility_name:"HARPETH VALLEY UTILITY DISTRIC",city:"Nashville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:1009,amount_of_biosolids_managed_land_applied:1008.97,latitude:36.14742,longitude:-86.91265},{facility_name:"ELMWOOD WTP",city:"Marlton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:1007,amount_of_biosolids_managed_land_applied:1007,latitude:39.87960532,longitude:-74.90819647},{facility_name:"NEWBERG, CITY OF",city:"Newberg","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:1007,amount_of_biosolids_managed_land_applied:1007,latitude:45.287342,longitude:-122.953529},{facility_name:"ATHENS UB-OOSTANAULA CREEK STP",city:"Athens","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:998,amount_of_biosolids_managed_land_applied:998.1,latitude:35.425833,longitude:-84.589722},{facility_name:"SOUTH CHARLESTON S.T.P.",city:"South Charleston","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:998,amount_of_biosolids_managed_land_applied:0,latitude:38.36751,longitude:-81.68553},{facility_name:"LODI WHITE SLOUGH WPCF",city:"Lodi","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:993,amount_of_biosolids_managed_land_applied:993,latitude:38.11634,longitude:-121.28816},{facility_name:"BONNER SPRINGS, CITY OF",city:"Bonner Springs","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:993,amount_of_biosolids_managed_land_applied:0,latitude:39.08222369,longitude:-94.88133},{facility_name:"CEDAR CITY CORPORATION",city:"Cedar City","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:992,amount_of_biosolids_managed_land_applied:360,latitude:37.810773,longitude:-113.089265},{facility_name:"COLONIE (T)",city:"Newtonville","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:991,amount_of_biosolids_managed_land_applied:0,latitude:42.751872,longitude:-73.77839671},{facility_name:"RENSSELAER COUNTY SD NO.1",city:"Troy","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:990,amount_of_biosolids_managed_land_applied:990,latitude:42.759965,longitude:-73.677381},{facility_name:"WILLMAR",city:"Willmar","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:989,amount_of_biosolids_managed_land_applied:988.95,latitude:45.109,longitude:-95.03521},{facility_name:"LAWRENCE, CITY OF",city:"Lawrence","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:987,amount_of_biosolids_managed_land_applied:457,latitude:38.98963,longitude:-95.23112002},{facility_name:"SYCAMORE WWTP - MSD",city:"Cincinnati","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:987,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"PRINCETON WASTEWATER TREATMENT PLANT",city:"Princeton","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:987,amount_of_biosolids_managed_land_applied:0,latitude:38.3516,longitude:-87.59375},{facility_name:"THREE OAKS WWTF",city:"Fort Myers","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:986,amount_of_biosolids_managed_land_applied:0,latitude:26.471599,longitude:-81.791771},{facility_name:"NORTHAMPTON P O T W",city:"Northampton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:981,amount_of_biosolids_managed_land_applied:0,latitude:42.313056,longitude:-72.623333},{facility_name:"SCHERERVILLE WASTEWATER TREATMENT PLANT",city:"Schererville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:981,amount_of_biosolids_managed_land_applied:980.87,latitude:41.500639,longitude:-87.464417},{facility_name:"NAPA SOSCOL WRF",city:"Napa","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:979,amount_of_biosolids_managed_land_applied:979,latitude:38.302906,longitude:-122.287843},{facility_name:"CITY OF ORMOND BEACH",city:"Ormond Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:979,amount_of_biosolids_managed_land_applied:0,latitude:29.293611,longitude:-81.083056},{facility_name:"NORTH OF RIVER S. D. I WWTF",city:"Bakersfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:974,amount_of_biosolids_managed_land_applied:974,latitude:35.43194,longitude:-119.02252},{facility_name:"NORTH SAN MATEO COUNTY WWTP",city:"Daly City","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:973,amount_of_biosolids_managed_land_applied:905.44,latitude:37.703425,longitude:-122.485943},{facility_name:"COLUMBUS WWTP, CITY OF",city:"Columbus","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:972,amount_of_biosolids_managed_land_applied:913.1,latitude:39.21069,longitude:-85.8897},{facility_name:"INLAND BAYS REGIONAL WASTEWATER FACILITY",city:"Millsboro","state_postal;":"DE",state:"Del.",amount_of_biosolids_generated:972,amount_of_biosolids_managed_land_applied:71.42,latitude:38.63598,longitude:-75.23259},{facility_name:"SEDRON SERVICES SUMNER WASHINGTON - SEPTAGE MANAGEMENT FACILITY",city:"Sumner","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:971,amount_of_biosolids_managed_land_applied:971,latitude:47.234303,longitude:-122.225967},{facility_name:"NSSD-CLAVEY ROAD STP",city:"Highland Park","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:971,amount_of_biosolids_managed_land_applied:966,latitude:42.15744,longitude:-87.798256},{facility_name:"CLAREMONT W W T F",city:"Claremont","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:971,amount_of_biosolids_managed_land_applied:724,latitude:43.38962,longitude:-72.379045},{facility_name:"PASO ROBLES WWTP",city:"Paso Robles","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:970,amount_of_biosolids_managed_land_applied:0,latitude:35.64468,longitude:-120.68572},{facility_name:"BISMARCK CITY OF",city:"Bismarck","state_postal;":"ND",state:"N.D.",amount_of_biosolids_generated:968,amount_of_biosolids_managed_land_applied:968,latitude:46.800694,longitude:-100.794403},{facility_name:"CHEROKEE COUNTY WATER & SEWERAGE AUTHORITY (WSA)",city:"Canton","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:965,amount_of_biosolids_managed_land_applied:0,latitude:34.136306,longitude:-84.567306},{facility_name:"CITY OF CALHOUN",city:"Calhoun","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:962,amount_of_biosolids_managed_land_applied:748.75,latitude:34.509692,longitude:-84.962892},{facility_name:"WESTFIELD W P C P",city:"Westfield","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:962,amount_of_biosolids_managed_land_applied:0,latitude:42.12019,longitude:-72.75452},{facility_name:"WATERTOWN (C)",city:"Watertown","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:962,amount_of_biosolids_managed_land_applied:961.6,latitude:43.97275,longitude:-75.91118},{facility_name:"ROMEOVILLE WASTEWATER TREATMENT FACILITY",city:"Romeoville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:960,amount_of_biosolids_managed_land_applied:960.43,latitude:41.6483,longitude:-88.0764},{facility_name:"PLYMOUTH W W T P",city:"Plymouth","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:960,amount_of_biosolids_managed_land_applied:0,latitude:41.927406,longitude:-70.643157},{facility_name:"WALNUT BRANCH WWTP",city:"Seguin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:957,amount_of_biosolids_managed_land_applied:0,latitude:29.56163,longitude:-97.964477},{facility_name:"MANHEIM STP",city:"Lancaster County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:956,amount_of_biosolids_managed_land_applied:899.06,latitude:40.1675,longitude:-76.425278},{facility_name:"LEESBURG TOWN - WATER POLLUTION CONTROL DIVISION",city:"Leesburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:953,amount_of_biosolids_managed_land_applied:872.08,latitude:39.092486,longitude:-77.530644},{facility_name:"TOPEKA, CITY OF",city:"Topeka","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:953,amount_of_biosolids_managed_land_applied:677,latitude:39.07127,longitude:-95.6431},{facility_name:"MANHATTAN, CITY OF",city:"Manhattan","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:951,amount_of_biosolids_managed_land_applied:712.52,latitude:39.17948,longitude:-96.57414},{facility_name:"CITY OF HOUSTON UPPER BRAYS WWTF",city:"Hoston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:951,amount_of_biosolids_managed_land_applied:0,latitude:29.71676,longitude:-95.5922},{facility_name:"CITY OF EDNA WWTF",city:"Edna","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:950,amount_of_biosolids_managed_land_applied:0,latitude:28.97468,longitude:-96.63059},{facility_name:"TOWN OF FLOWER MOUND WWTP",city:"Flower Mound","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:949,amount_of_biosolids_managed_land_applied:0,latitude:32.996537,longitude:-97.032517},{facility_name:"MELBOURNE, CITY OF",city:"Melbourne","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:945,amount_of_biosolids_managed_land_applied:945.4,latitude:28.0735,longitude:-80.609827},{facility_name:"NW AR CONSERVATION AUTHORITY",city:"Bentonville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:945,amount_of_biosolids_managed_land_applied:0,latitude:36.227482,longitude:-94.288334},{facility_name:"REDLANDS WWTP",city:"Redlands","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:943,amount_of_biosolids_managed_land_applied:943,latitude:33.98765933,longitude:-117.1462605},{facility_name:"BARNSTABLE WATER POLLUTION CONTROL FACILITY",city:"Barnstable (Hyannis)","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:942,amount_of_biosolids_managed_land_applied:0,latitude:41.6657,longitude:-70.3043},{facility_name:"FRESHWATER SUPPLY DISTRICT 23",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:941,amount_of_biosolids_managed_land_applied:0,latitude:29.84417,longitude:-95.27571},{facility_name:"PRASA GUAYAMA REGIONAL WWTP",city:"Guayama","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:941,amount_of_biosolids_managed_land_applied:0,latitude:18.01019,longitude:-66.62173},{facility_name:"MARYVILLE STP",city:"Maryville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:940,amount_of_biosolids_managed_land_applied:940,latitude:35.8527,longitude:-83.94958},{facility_name:"METROPOLITAN COUNCIL-ST. CROIX",city:"Oak Park Heights","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:940,amount_of_biosolids_managed_land_applied:0,latitude:45.03849,longitude:-92.79243},{facility_name:"BURTON CREEK WWTP",city:"Bryan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:939,amount_of_biosolids_managed_land_applied:0,latitude:30.641198,longitude:-96.320498},{facility_name:"WINTER GARDEN, CITY OF",city:"Winter Garden","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:938,amount_of_biosolids_managed_land_applied:938.3,latitude:28.57782,longitude:-81.581993},{facility_name:"PLUM CREEK WATER RECLAMATION AUTHORITY",city:"Castle Rock","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:936,amount_of_biosolids_managed_land_applied:0,latitude:39.427006,longitude:-104.904846},{facility_name:"GRANTS PASS, CITY OF",city:"Grants Pass","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:935,amount_of_biosolids_managed_land_applied:0,latitude:42.429923,longitude:-123.343678},{facility_name:"WILDWOOD/LOWER REGION WTF",city:"Rio Grande","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:935,amount_of_biosolids_managed_land_applied:0,latitude:39.013371,longitude:-74.87401},{facility_name:"CITY OF SWAINSBORO",city:"Swainsboro","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:931,amount_of_biosolids_managed_land_applied:0,latitude:32.5869,longitude:-82.31749},{facility_name:"GRETNA, CITY OF",city:"Gretna","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:930,amount_of_biosolids_managed_land_applied:0,latitude:29.92986,longitude:-90.04488},{facility_name:"ATHENS-CLARKE COUNTY - CLASSIC CITY COMPOST",city:"Winterville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:929,amount_of_biosolids_managed_land_applied:928.68,latitude:33.91754,longitude:-83.27076},{facility_name:"MERCED WWTF",city:"Merced","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:928,amount_of_biosolids_managed_land_applied:928,latitude:37.30327,longitude:-120.485},{facility_name:"TOWN OF MOORESVILLE",city:"Mooresville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:926,amount_of_biosolids_managed_land_applied:926.4,latitude:35.52447,longitude:-80.78004},{facility_name:"CITY OF CLEARWATER PUBLIC UTILITIES DEPT.",city:"Clearwater","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:926,amount_of_biosolids_managed_land_applied:926.3,latitude:27.98152,longitude:-82.787233},{facility_name:"STP 2A WWTP",city:"Nacogdoches","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:925,amount_of_biosolids_managed_land_applied:0,latitude:31.576391,longitude:-94.645012},{facility_name:"MORGANTOWN, CITY OF",city:"Morgantown","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:924,amount_of_biosolids_managed_land_applied:924,latitude:39.65563,longitude:-79.991968},{facility_name:"LINCOLN NORTHEAST WWTF",city:"Lincoln","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:919,amount_of_biosolids_managed_land_applied:2123,latitude:40.88259,longitude:-96.6245},{facility_name:"FLAGG CREEK WRD MCELWAIN STP",city:"Burr Ridge","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:919,amount_of_biosolids_managed_land_applied:1218,latitude:41.764163,longitude:-87.90667},{facility_name:"BUTTE SILVER BOW CITY AND COUNTY",city:"Butte","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:918,amount_of_biosolids_managed_land_applied:0,latitude:45.99695,longitude:-112.55362},{facility_name:"PEACH STREET WWTP",city:"Grapevine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:917,amount_of_biosolids_managed_land_applied:0,latitude:32.94778,longitude:-97.0825},{facility_name:"MARTIN COUNTY TROPICAL FARMS WWTF",city:"Stuart","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:917,amount_of_biosolids_managed_land_applied:0,latitude:27.132068,longitude:-80.188662},{facility_name:"GOSHEN WWTP",city:"Goshen","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:917,amount_of_biosolids_managed_land_applied:0,latitude:41.58485,longitude:-85.83298},{facility_name:"SPANISH FORK WASTE WATER TREAT",city:"Spanish Fork","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:915,amount_of_biosolids_managed_land_applied:7.87,latitude:40.13767,longitude:-111.650955},{facility_name:"CITY OF KYLE WWTP",city:"Kyle","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:913,amount_of_biosolids_managed_land_applied:0,latitude:29.968166,longitude:-97.833019},{facility_name:"NORTHEAST WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:912,amount_of_biosolids_managed_land_applied:0,latitude:29.781278,longitude:-95.213028},{facility_name:"LANDIS SEWERAGE AUTHORITY",city:"Vineland","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:911,amount_of_biosolids_managed_land_applied:911.15,latitude:39.46435,longitude:-75.06325},{facility_name:"LCDPW-NEW CENTURY TOWN STP",city:"Vernon Hills","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:910,amount_of_biosolids_managed_land_applied:910.4,latitude:42.225556,longitude:-87.947778},{facility_name:"WEST LAFAYETTE WWTP",city:"West Lafayette","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:910,amount_of_biosolids_managed_land_applied:909.6,latitude:40.4167,longitude:-86.90786},{facility_name:"SPENCER'S CROSSING WWTF",city:"Orange Park","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:908,amount_of_biosolids_managed_land_applied:903.45,latitude:30.173678,longitude:-81.808133},{facility_name:"HENDERSON SOUTH STP #2",city:"Henderson","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:908,amount_of_biosolids_managed_land_applied:0,latitude:37.648449,longitude:-87.513177},{facility_name:"PORTSMOUTH-PIERCE CITY OF",city:"Portsmouth","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:905,amount_of_biosolids_managed_land_applied:0,latitude:43.04657,longitude:-70.77497},{facility_name:"ANACORTES WWTP",city:"Anacortes","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:904,amount_of_biosolids_managed_land_applied:0,latitude:48.521668,longitude:-122.609444},{facility_name:"BLOOMINGTON S (DILLMAN ROAD)",city:"Bloomington","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:903,amount_of_biosolids_managed_land_applied:0,latitude:39.09296,longitude:-86.54603},{facility_name:"REDMOND WWTP",city:"Redmond","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:902,amount_of_biosolids_managed_land_applied:728,latitude:44.303604,longitude:-121.190186},{facility_name:"FLEMING ISLAND REGIONAL WWTF",city:"Orange Park","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:898,amount_of_biosolids_managed_land_applied:816.85,latitude:30.09204,longitude:-81.71907},{facility_name:"LINDEN ROSELLE SEWAGE AUTH",city:"Linden","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:896,amount_of_biosolids_managed_land_applied:0,latitude:40.609387,longitude:-74.220417},{facility_name:"CITY OF SANGER WWTP",city:"Sanger","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:894,amount_of_biosolids_managed_land_applied:0,latitude:33.354807,longitude:-97.164411},{facility_name:"SNYDER WATER RECLAMATION PLANT",city:"Snyder","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:893,amount_of_biosolids_managed_land_applied:0,latitude:32.696928,longitude:-100.900824},{facility_name:"ALEXANDRIA LAKE AREA SD",city:"Alexandria","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:893,amount_of_biosolids_managed_land_applied:893,latitude:45.865566,longitude:-95.408191},{facility_name:"AUSTIN",city:"Austin","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:892,amount_of_biosolids_managed_land_applied:892,latitude:43.6556,longitude:-92.9736},{facility_name:"STEWART CREEK WWTP",city:"The Colony","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:890,amount_of_biosolids_managed_land_applied:0,latitude:33.104167,longitude:-96.889444},{facility_name:"SHIPPENSBURG BOROUGH AUTHORITY",city:"Shippensburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:889,amount_of_biosolids_managed_land_applied:889.16,latitude:40.05144,longitude:-77.5232},{facility_name:"RARITAN TOWNSHIP STP",city:"Raritan Township","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:889,amount_of_biosolids_managed_land_applied:0,latitude:40.517687,longitude:-74.805164},{facility_name:"MIDDLETOWN (C)",city:"Middletown","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:887,amount_of_biosolids_managed_land_applied:0,latitude:41.44568,longitude:-74.4214},{facility_name:"WESTCHESTER CO DEPT ENV FAC",city:"New Rochelle","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:887,amount_of_biosolids_managed_land_applied:0,latitude:40.91181,longitude:-73.7826},{facility_name:"LITTLE FALLS RUN",city:"Stafford","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:881,amount_of_biosolids_managed_land_applied:850.56,latitude:38.26138,longitude:-77.41134},{facility_name:"WALNUT CREEK WRF LAS",city:"Mcdonough","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:881,amount_of_biosolids_managed_land_applied:0,latitude:33.481641,longitude:-84.036573},{facility_name:"CAMARILLO WRP",city:"Camarillo","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:876,amount_of_biosolids_managed_land_applied:0,latitude:34.22221216,longitude:-119.0419942},{facility_name:"WEST KNOX UD (WKUD) - MELTON HILL POTW",city:"Knoxville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:875,amount_of_biosolids_managed_land_applied:0,latitude:35.8925,longitude:-84.2439},{facility_name:"HANFORD WWTF",city:"Hanford","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:875,amount_of_biosolids_managed_land_applied:875,latitude:36.31032628,longitude:-119.64597},{facility_name:"CITY OF HACKBERRY WWTP",city:"Frisco","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:874,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"SUMTER/POCOTALIGO RIVER PLANT",city:"Sumter","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:873,amount_of_biosolids_managed_land_applied:0,latitude:33.849722,longitude:-80.315556},{facility_name:"CITY OF FORT DODGE",city:"Fort Dodge","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:873,amount_of_biosolids_managed_land_applied:924,latitude:42.504117,longitude:-94.186968},{facility_name:"CITY OF PHARR WWTP",city:"Pharr","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:872,amount_of_biosolids_managed_land_applied:871.57,latitude:26.163722,longitude:-98.172278},{facility_name:"PRASA MAYAGUEZ R W W T P",city:"Mayaguez","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:869,amount_of_biosolids_managed_land_applied:869.15,latitude:18.19836159,longitude:-67.12626216},{facility_name:"HARRISON CO WASTEWATER & SWMA, GULFPORT POTW, NORTH",city:"Gulfport","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:869,amount_of_biosolids_managed_land_applied:869,latitude:30.43804,longitude:-89.056898},{facility_name:"BLACKHAWK REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:868,amount_of_biosolids_managed_land_applied:0,latitude:29.80027,longitude:-95.34098},{facility_name:"TOWN OF BOONE",city:"Boone","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:866,amount_of_biosolids_managed_land_applied:866,latitude:36.213425,longitude:-81.646171},{facility_name:"DARTMOUTH W P C F",city:"South Dartmouth","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:865,amount_of_biosolids_managed_land_applied:900,latitude:41.58867,longitude:-70.98878},{facility_name:"SEYMOUR WWTP, CITY OF",city:"Seymour","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:865,amount_of_biosolids_managed_land_applied:0,latitude:38.96012,longitude:-85.89074},{facility_name:"LITCHFIELD",city:"Litchfield","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:864,amount_of_biosolids_managed_land_applied:863.6,latitude:45.11562,longitude:-94.52364},{facility_name:"LAKOTA WWTP",city:"Federal Way","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:863,amount_of_biosolids_managed_land_applied:862.9,latitude:47.327338,longitude:-122.372195},{facility_name:"HEARD FARMS INC.",city:"Roseburg","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:858,amount_of_biosolids_managed_land_applied:858.4,latitude:43.342048,longitude:-123.339764},{facility_name:"SOUTH WINDSOR WPCF",city:"South Windsor","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:858,amount_of_biosolids_managed_land_applied:0,latitude:41.8288,longitude:-72.55427},{facility_name:"CRYSTAL LAKE STP #2, CITY OF",city:"Crystal Lake","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:857,amount_of_biosolids_managed_land_applied:857,latitude:42.211464,longitude:-88.33589},{facility_name:"CITY OF ST. PETERS",city:"St. Peters","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:857,amount_of_biosolids_managed_land_applied:856.59,latitude:38.80337,longitude:-90.611358},{facility_name:"SUSSEX CNTY MUA U WALLKILL FAC",city:"Hardyston Twp","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:856,amount_of_biosolids_managed_land_applied:0,latitude:41.0786548,longitude:-74.52532051},{facility_name:"MADISONVILLE STP WEST SIDE",city:"Madisonville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:854,amount_of_biosolids_managed_land_applied:0,latitude:37.318493,longitude:-87.549857},{facility_name:"FREEDOM DISTRICT WWTP",city:"Millersville","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:854,amount_of_biosolids_managed_land_applied:852.2,latitude:39.092174,longitude:-76.631072},{facility_name:"CLAYTON COUNTY",city:"Morrow","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:848,amount_of_biosolids_managed_land_applied:785,latitude:33.41082,longitude:-84.38307},{facility_name:"CARSON CITY WRF",city:"Carson City","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:848,amount_of_biosolids_managed_land_applied:0,latitude:39.161649,longitude:-119.733367},{facility_name:"CLOVIS, CITY OF",city:"Unknown","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:847,amount_of_biosolids_managed_land_applied:847,latitude:34.5729841,longitude:-103.3460546},{facility_name:"METROPOLITAN COUNCIL-HASTINGS",city:"Hastings","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:846,amount_of_biosolids_managed_land_applied:0,latitude:44.702313,longitude:-92.86325814},{facility_name:"MANATEE COUNTY NORTH REGIONAL WRF",city:"Bradenton","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:843,amount_of_biosolids_managed_land_applied:0,latitude:27.579722,longitude:-82.478333},{facility_name:"EASTHAVEN WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:841,amount_of_biosolids_managed_land_applied:0,latitude:29.64322,longitude:-95.26425},{facility_name:"MOUNT VERNON MUNICIPAL WWTP",city:"Mount Vernon","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:840,amount_of_biosolids_managed_land_applied:0,latitude:37.924083,longitude:-87.910639},{facility_name:"WARMINSTER TOWNSHIP M.A. TRM P",city:"Warminster","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:838,amount_of_biosolids_managed_land_applied:838.1,latitude:40.216954,longitude:-75.074051},{facility_name:"AMHERST W W T P",city:"Hadley","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:838,amount_of_biosolids_managed_land_applied:0,latitude:42.385276,longitude:-72.536249},{facility_name:"POLK RUN WWTP - MSD",city:"Cincinnati","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:837,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"AMSTERDAM (C)",city:"Amsterdam","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:836,amount_of_biosolids_managed_land_applied:0,latitude:42.97044,longitude:-74.14898},{facility_name:"COLUMBUS WWTF",city:"Columbus","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:835,amount_of_biosolids_managed_land_applied:835.3,latitude:41.424627,longitude:-97.344444},{facility_name:"VAN BUREN, CITY OF-MAIN PLANT",city:"Van Buren","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:835,amount_of_biosolids_managed_land_applied:1352.6,latitude:35.417722,longitude:-94.340889},{facility_name:"CITY OF BEND WATER RECLAMATION FACILITY",city:"Bend","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:835,amount_of_biosolids_managed_land_applied:835,latitude:44.118071,longitude:-121.211439},{facility_name:"PRASA ARECIBO RWWTP",city:"Santurce","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:833,amount_of_biosolids_managed_land_applied:833,latitude:18.480556,longitude:-66.677694},{facility_name:"GROVE CITY BOROUGH WWP",city:"Grove City","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:833,amount_of_biosolids_managed_land_applied:0,latitude:41.144861,longitude:-80.096639},{facility_name:"CITY OF FLORENCE WATER/WASTEWATER DEPARTMENT",city:"Florence","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:832,amount_of_biosolids_managed_land_applied:832.12,latitude:34.783884,longitude:-87.701497},{facility_name:"MISSOURI CITY REGIONAL SURFACE WWTP",city:"Missouri City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:832,amount_of_biosolids_managed_land_applied:0,latitude:29.507777,longitude:-95.5475},{facility_name:"ALLEGHENY VALLEY JOINT SEWER A",city:"Cheswick","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:831,amount_of_biosolids_managed_land_applied:0,latitude:40.530346,longitude:-79.84755},{facility_name:"DECATUR, CITY OF",city:"Decatur","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:830,amount_of_biosolids_managed_land_applied:830.14,latitude:36.344139,longitude:-94.472694},{facility_name:"VALLEY SANITARY DISTRICT WWTF",city:"Indio","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:830,amount_of_biosolids_managed_land_applied:830,latitude:33.715278,longitude:-116.196944},{facility_name:"HURRICANE CREEK WWTP",city:"Lufkin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:827,amount_of_biosolids_managed_land_applied:0,latitude:31.286,longitude:-94.7494},{facility_name:"MOORHEAD",city:"Moorhead","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:827,amount_of_biosolids_managed_land_applied:854,latitude:46.905067,longitude:-96.749179},{facility_name:"WATSONVILLE WWTP",city:"Watsonville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:826,amount_of_biosolids_managed_land_applied:188.59,latitude:36.88302688,longitude:-121.7147818},{facility_name:"POUGHKEEPSIE (C)",city:"Poughkeepsie","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:823,amount_of_biosolids_managed_land_applied:0,latitude:41.70632,longitude:-73.928},{facility_name:"WEATHERFORD FACILITY",city:"Weatherford","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:821,amount_of_biosolids_managed_land_applied:0,latitude:32.747651,longitude:-97.769409},{facility_name:"METROPOLITAN SAINT LOUIS SEWER DISTRICT",city:"St. Louis","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:821,amount_of_biosolids_managed_land_applied:0,latitude:38.63107,longitude:-90.21532},{facility_name:"LITTLE FALLS (C)",city:"Little Falls","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:820,amount_of_biosolids_managed_land_applied:819.8,latitude:43.02828967,longitude:-74.86896673},{facility_name:"GREENWOOD/WILSON CREEK WWTF",city:"Greenwood","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:819,amount_of_biosolids_managed_land_applied:0,latitude:34.208056,longitude:-82.059444},{facility_name:"CITY OF DOTHAN",city:"Dothan","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:817,amount_of_biosolids_managed_land_applied:0,latitude:31.2533,longitude:-85.5043},{facility_name:"MIDDLETOWN SEWERAGE AUTHORITY",city:"Belford","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:815,amount_of_biosolids_managed_land_applied:0,latitude:40.42622,longitude:-74.08296},{facility_name:"YUCAIPA VALLEY HENRY N. WOCHHOLZ WWTP",city:"Yucaipa","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:815,amount_of_biosolids_managed_land_applied:0,latitude:34.052356,longitude:-116.987612},{facility_name:"TELL CITY MUNICIPAL WWTP",city:"Tell City","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:815,amount_of_biosolids_managed_land_applied:0,latitude:37.957278,longitude:-86.774667},{facility_name:"SOUTH DEARBORN R.S.D.",city:"Lawrenceburg","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:814,amount_of_biosolids_managed_land_applied:0,latitude:39.074917,longitude:-84.870528},{facility_name:"WEBSTER (T)",city:"Webster","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:812,amount_of_biosolids_managed_land_applied:0,latitude:43.26009,longitude:-77.41995},{facility_name:"CAPE MAY COUNTY MUA",city:"Cape May Ct House","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:812,amount_of_biosolids_managed_land_applied:0,latitude:39.107891,longitude:-74.793248},{facility_name:"NORTH MUSTANG ISLAND WWTP",city:"Port Aransas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:811,amount_of_biosolids_managed_land_applied:0,latitude:27.827097,longitude:-97.079288},{facility_name:"GARDNER W P C F",city:"East Templeton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:811,amount_of_biosolids_managed_land_applied:0,latitude:42.5698,longitude:-72.0201},{facility_name:"BELL COUNTY WCID 1 WWTP",city:"Killeen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:810,amount_of_biosolids_managed_land_applied:0,latitude:31.125444,longitude:-97.515556},{facility_name:"CHELFORD CITY REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:809,amount_of_biosolids_managed_land_applied:0,latitude:29.710068,longitude:-95.651953},{facility_name:"HAVERSTRAW JOINT REGIONAL SB",city:"West Haverstraw","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:808,amount_of_biosolids_managed_land_applied:808,latitude:41.2135,longitude:-73.963556},{facility_name:"CITY OF CUMMING",city:"Cumming","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:807,amount_of_biosolids_managed_land_applied:0,latitude:34.196083,longitude:-84.186556},{facility_name:"DAVIS WWTP",city:"Davis","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:802,amount_of_biosolids_managed_land_applied:0,latitude:38.548744,longitude:-121.731047},{facility_name:"PARKERSBURG_UTILITY BOARD",city:"Parkersburg","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:802,amount_of_biosolids_managed_land_applied:407.72,latitude:39.28069,longitude:-81.55706},{facility_name:"PHILLIPSBURG TOWN STP",city:"Phillipsburg","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:801,amount_of_biosolids_managed_land_applied:0,latitude:40.680599,longitude:-75.177009},{facility_name:"MACON WATER AUTHORITY",city:"Macon","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:798,amount_of_biosolids_managed_land_applied:626.15,latitude:32.811708,longitude:-83.603778},{facility_name:"SOUTH PORTLAND CITY OF",city:"South Portland","state_postal;":"ME",state:"Maine",amount_of_biosolids_generated:797,amount_of_biosolids_managed_land_applied:0,latitude:43.63888,longitude:-70.25646},{facility_name:"CITY OF KATY WWTP",city:"Katy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:796,amount_of_biosolids_managed_land_applied:763.85,latitude:29.773302,longitude:-95.82699},{facility_name:"LAKE IN THE HILLS SD STP",city:"Lake In The Hills","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:793,amount_of_biosolids_managed_land_applied:792.64,latitude:42.18956,longitude:-88.31591},{facility_name:"CVWD WRP 4 MID VALLEY",city:"Coachella","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:790,amount_of_biosolids_managed_land_applied:0,latitude:33.685745,longitude:-116.1675911},{facility_name:"SPRINGFIELD MSD-SUGAR CRK STP",city:"Springfield","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:786,amount_of_biosolids_managed_land_applied:0,latitude:39.80263,longitude:-89.53013},{facility_name:"CITY OF NEWTON",city:"Newton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:784,amount_of_biosolids_managed_land_applied:784,latitude:35.627833,longitude:-81.233983},{facility_name:"MARGATE,CITY OF WEST WWTP",city:"Margate","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:783,amount_of_biosolids_managed_land_applied:783.01,latitude:26.2413,longitude:-80.21507},{facility_name:"CITY OF SHINER WWTP",city:"Shiner","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:782,amount_of_biosolids_managed_land_applied:0,latitude:29.41689,longitude:-97.16336},{facility_name:"LACKAWANNA RIVER BASIN SEWER A",city:"Dickson City","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:782,amount_of_biosolids_managed_land_applied:270.88,latitude:41.4494,longitude:-75.63191},{facility_name:"LAKE CHARLES, CITY OF (PLANT C",city:"Lake Charles","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:778,amount_of_biosolids_managed_land_applied:0,latitude:30.205556,longitude:-93.240278},{facility_name:"SUSANVILLE WWTP",city:"Susanville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:777,amount_of_biosolids_managed_land_applied:0,latitude:40.40144724,longitude:-120.6490004},{facility_name:"HUNTINGTON (T)",city:"Huntington","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:777,amount_of_biosolids_managed_land_applied:0,latitude:40.87437,longitude:-73.41957},{facility_name:"MOUNT JOY BOROUGH AUTHORITY",city:"Mount Joy","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:773,amount_of_biosolids_managed_land_applied:773.11,latitude:40.099167,longitude:-76.493611},{facility_name:"SAN ELIJO WRF",city:"Cardiff By The Sea","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:773,amount_of_biosolids_managed_land_applied:604,latitude:33.02187514,longitude:-117.272529},{facility_name:"MASSENA (V)",city:"Massena","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:773,amount_of_biosolids_managed_land_applied:772.59,latitude:44.93132,longitude:-74.89284},{facility_name:"GSW&SA/GEORGE R VEREEN WWTP",city:"Longs","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:771,amount_of_biosolids_managed_land_applied:771,latitude:33.841111,longitude:-78.726111},{facility_name:"MCMINNVILLE, CITY OF",city:"Mcminnville","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:771,amount_of_biosolids_managed_land_applied:427.5,latitude:45.222715,longitude:-123.159066},{facility_name:"KIHEI WASTEWATER RECLAMATION FACILITY",city:"Kihei","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:768,amount_of_biosolids_managed_land_applied:0,latitude:20.73541,longitude:-156.444449},{facility_name:"EAST BANK WWTP",city:"Center","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:768,amount_of_biosolids_managed_land_applied:0,latitude:31.738899,longitude:-94.160247},{facility_name:"PORTAGE UTILITY SERVICE FACILITY WWTP",city:"Portage","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:765,amount_of_biosolids_managed_land_applied:765.06,latitude:41.600028,longitude:-87.202556},{facility_name:"CULPEPER TOWN OF-WWTREAT PLANT",city:"Culpeper","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:765,amount_of_biosolids_managed_land_applied:571,latitude:38.481944,longitude:-78.009722},{facility_name:"NOVATO WWTP",city:"Novato","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:762,amount_of_biosolids_managed_land_applied:0,latitude:38.10034,longitude:-122.55484},{facility_name:"EAST WINDSOR WATER POL CON PLT",city:"East Windsor","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:759,amount_of_biosolids_managed_land_applied:0,latitude:40.28677,longitude:-74.56165},{facility_name:"MOUNTAIN CREEK REG WWTF",city:"Arlington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:756,amount_of_biosolids_managed_land_applied:0,latitude:32.501222,longitude:-97.019722},{facility_name:"CITY OF GLOUCESTER",city:"Gloucester","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:756,amount_of_biosolids_managed_land_applied:0,latitude:42.61493,longitude:-70.66332},{facility_name:"RUSSELLVILLE, CITY CORPORATION",city:"Russellville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:755,amount_of_biosolids_managed_land_applied:755.26,latitude:35.247222,longitude:-93.1125},{facility_name:"FAULKEY GULLY MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:754,amount_of_biosolids_managed_land_applied:754.44,latitude:29.998556,longitude:-95.606083},{facility_name:"RED OAK CREEK REGIONAL WWTP",city:"Arlington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:754,amount_of_biosolids_managed_land_applied:0,latitude:32.531881,longitude:-96.82636},{facility_name:"MARTINEZ II WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:753,amount_of_biosolids_managed_land_applied:16630,latitude:29.299155,longitude:-94.82871},{facility_name:"CEDAR CREEK WQTC MSD",city:"Louisville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:752,amount_of_biosolids_managed_land_applied:0,latitude:38.122354,longitude:-85.587648},{facility_name:"FARMINGTON, CITY OF (WWTP)",city:"Farmington","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:752,amount_of_biosolids_managed_land_applied:122,latitude:36.71727,longitude:-108.21725},{facility_name:"QUEEN ANNE'S CO. SANITARY DIST",city:"Stevensville","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:751,amount_of_biosolids_managed_land_applied:466,latitude:38.985232,longitude:-76.320238},{facility_name:"LANCASTER CO/INDIANLAND WWTP",city:"Lancaster","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:751,amount_of_biosolids_managed_land_applied:239,latitude:34.700836,longitude:-80.75382},{facility_name:"VENICE, CITY OF",city:"Venice","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:751,amount_of_biosolids_managed_land_applied:0,latitude:27.13236,longitude:-82.401388},{facility_name:"CHESTER STP",city:"Chester","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:750,amount_of_biosolids_managed_land_applied:0,latitude:37.8875,longitude:-89.788333},{facility_name:"ST. CHARLES PARISH COUNCIL",city:"Hahnville","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:748,amount_of_biosolids_managed_land_applied:0,latitude:29.968853,longitude:-90.427595},{facility_name:"MILLVILLE NJ SEWER UTILITY",city:"Millville","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:748,amount_of_biosolids_managed_land_applied:121.24,latitude:39.3830396,longitude:-75.04103705},{facility_name:"SOUTH HADLEY WWTP",city:"Chicopee","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:746,amount_of_biosolids_managed_land_applied:0,latitude:42.205371,longitude:-72.58814},{facility_name:"CITY OF NAPLES PUBLIC WORKS UTILITIES DIVISION",city:"Naples","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:745,amount_of_biosolids_managed_land_applied:0,latitude:26.151903,longitude:-81.78819},{facility_name:"SAN LUIS OBISPO WRF",city:"San Luis Obispo","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:744,amount_of_biosolids_managed_land_applied:0,latitude:35.25615,longitude:-120.67291},{facility_name:"DUCKETT CREEK SANITARY DISTRICT",city:"O'Fallon","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:739,amount_of_biosolids_managed_land_applied:739,latitude:38.74857648,longitude:-90.73337783},{facility_name:"MFN REGIONAL WASTEWATER DIST",city:"Norton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:738,amount_of_biosolids_managed_land_applied:0,latitude:41.952198,longitude:-71.061965},{facility_name:"KELLOGG CREEK WWTP",city:"Milwaukie","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:738,amount_of_biosolids_managed_land_applied:566,latitude:45.440114,longitude:-122.642494},{facility_name:"BUFFALO CREEK WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:734,amount_of_biosolids_managed_land_applied:0,latitude:32.877384,longitude:-96.458098},{facility_name:"MUNDELEIN STP, VILLAGE OF",city:"Libertyville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:733,amount_of_biosolids_managed_land_applied:733,latitude:42.25471,longitude:-87.947295},{facility_name:"O'FALLON STP, CITY OF",city:"O'Fallon","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:732,amount_of_biosolids_managed_land_applied:732.1,latitude:38.5627,longitude:-89.85086},{facility_name:"MARYLAND CTY WATER RECLAMATION",city:"Laurel","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:730,amount_of_biosolids_managed_land_applied:729.7,latitude:39.081927,longitude:-76.826856},{facility_name:"HERKIMER CO SD",city:"Mohawk","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:730,amount_of_biosolids_managed_land_applied:729.67,latitude:43.01003,longitude:-75.01303},{facility_name:"DCSD, DUCKETT CREEK DST",city:"O'Fallon","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:729,amount_of_biosolids_managed_land_applied:729,latitude:38.73030275,longitude:-90.63413552},{facility_name:"HAYS CO WCID 1 WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:728,amount_of_biosolids_managed_land_applied:727.8,latitude:30.20295,longitude:-97.983802},{facility_name:"LEE COUNTY UTILITIES",city:"Fort Myers","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:727,amount_of_biosolids_managed_land_applied:0,latitude:26.541003,longitude:-81.904221},{facility_name:"CITY OF MARSHALLTOWN WATER POLLUTION CONTROL PLANT",city:"Marshalltown","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:725,amount_of_biosolids_managed_land_applied:725.2,latitude:42.064822,longitude:-92.899547},{facility_name:"GRUENE ROAD WATER RECLAMATION FACILITY",city:"New Braunfels","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:725,amount_of_biosolids_managed_land_applied:0,latitude:29.737999,longitude:-98.106237},{facility_name:"RIVERBEND REG WATER RECLAMATION FACILITY",city:"Lewisville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:724,amount_of_biosolids_managed_land_applied:0,latitude:33.228611,longitude:-96.937278},{facility_name:"PORT WASHINGTON WPCD",city:"Port Washington","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:722,amount_of_biosolids_managed_land_applied:0,latitude:40.83944,longitude:-73.69721},{facility_name:"CITY OF FLORESVILLE WWTP",city:"Floresville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:721,amount_of_biosolids_managed_land_applied:0,latitude:29.128833,longitude:-98.173083},{facility_name:"NEWPORT, CITY OF",city:"Newport","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:719,amount_of_biosolids_managed_land_applied:717.32,latitude:44.59777,longitude:-124.04844},{facility_name:"TJOELKER ENTERPRISES INC.",city:"Blaine","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:719,amount_of_biosolids_managed_land_applied:691.8,latitude:48.98737,longitude:-122.550649},{facility_name:"NASSAU COUNTY",city:"Westbury","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:718,amount_of_biosolids_managed_land_applied:0,latitude:40.76431,longitude:-73.55276},{facility_name:"BERGEN CNTY WTP",city:"Edgewater","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:718,amount_of_biosolids_managed_land_applied:0,latitude:40.84642,longitude:-74.03902},{facility_name:"CITY OF LAMESA WWTP",city:"Lamesa","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:717,amount_of_biosolids_managed_land_applied:0,latitude:32.711944,longitude:-101.946111},{facility_name:"DAYTON SOUTHWEST WWTF",city:"Dayton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:715,amount_of_biosolids_managed_land_applied:0,latitude:30.035708,longitude:-94.896241},{facility_name:"MAGNA WATER & SEWER DIST",city:"Magna","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:715,amount_of_biosolids_managed_land_applied:0,latitude:40.727863,longitude:-112.073997},{facility_name:"SANFORD, CITY OF",city:"Sanford","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:715,amount_of_biosolids_managed_land_applied:0,latitude:28.81617,longitude:-81.27911},{facility_name:"BELL COUNTY WCID 3 WWTP",city:"Nolanville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:713,amount_of_biosolids_managed_land_applied:0,latitude:31.069227,longitude:-97.605361},{facility_name:"MWRDGC HANOVER PARK WRP",city:"Hanover Park","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:710,amount_of_biosolids_managed_land_applied:1805,latitude:42.000228,longitude:-88.13813},{facility_name:"CAPE FEAR PUBLIC UTILITY AUTHORITY",city:"Wilmington","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:709,amount_of_biosolids_managed_land_applied:0,latitude:34.164483,longitude:-77.945016},{facility_name:"SUNRISE NO 1 WWTP (SPRINGTREE)",city:"Sunrise","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:709,amount_of_biosolids_managed_land_applied:0,latitude:26.17732,longitude:-80.26371},{facility_name:"SECAUCUS TOWN OF",city:"Secaucus","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:707,amount_of_biosolids_managed_land_applied:0,latitude:40.798406,longitude:-74.047585},{facility_name:"WORTHINGTON INDUSTRIAL",city:"Worthington","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:704,amount_of_biosolids_managed_land_applied:704.03,latitude:43.62415813,longitude:-95.60625681},{facility_name:"DESTIN WATER USERS, INC.",city:"Destin","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:703,amount_of_biosolids_managed_land_applied:703.47,latitude:30.393056,longitude:-86.445},{facility_name:"HAMPTON W W T P",city:"Hampton","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:703,amount_of_biosolids_managed_land_applied:0,latitude:42.925,longitude:-70.81998},{facility_name:"TWA/CAMELOT S/D WWTF",city:"Kissimmee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:702,amount_of_biosolids_managed_land_applied:0,latitude:28.31835,longitude:-81.49642},{facility_name:"ESPANOLA, CITY OF",city:"Espanola","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:700,amount_of_biosolids_managed_land_applied:0,latitude:35.998662,longitude:-106.077829},{facility_name:"DENZIL BOWMAN WASTEWATER",city:"Greeneville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:699,amount_of_biosolids_managed_land_applied:698.94,latitude:36.10841,longitude:-82.83705},{facility_name:"FRANKFORT MUNICIPAL STP",city:"Frankfort","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:699,amount_of_biosolids_managed_land_applied:0,latitude:38.213957,longitude:-84.873705},{facility_name:"WESTMINISTER WWTP",city:"Westminister","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:699,amount_of_biosolids_managed_land_applied:0,latitude:39.559167,longitude:-77.039444},{facility_name:"ARAPAHOE COUNTY WATER AND WASTEWATER AUTHORITY",city:"Centennial","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:697,amount_of_biosolids_managed_land_applied:7.32,latitude:39.60144,longitude:-104.83735},{facility_name:"GLEAMLOCK FARMS WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:697,amount_of_biosolids_managed_land_applied:696.65,latitude:30.039344,longitude:-95.567021},{facility_name:"CITY OF KEARNEY",city:"Kearney","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:695,amount_of_biosolids_managed_land_applied:695.49,latitude:39.37327639,longitude:-94.37872823},{facility_name:"HONOLULU KAILUA WWTP",city:"Kapolei","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:694,amount_of_biosolids_managed_land_applied:0,latitude:21.33003,longitude:-158.08158},{facility_name:"RICHLAND POTW",city:"Richland","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:694,amount_of_biosolids_managed_land_applied:929,latitude:46.255717,longitude:-119.275617},{facility_name:"GILLETTE, CITY OF",city:"Gillette","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:692,amount_of_biosolids_managed_land_applied:692,latitude:44.27246,longitude:-105.50751},{facility_name:"BREMERTON STP",city:"Bremerton","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:691,amount_of_biosolids_managed_land_applied:691.2,latitude:47.550825,longitude:-122.672186},{facility_name:"LAHAINA WASTEWATER RECLAMATION FACILITY",city:"Lahaina","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:690,amount_of_biosolids_managed_land_applied:0,latitude:20.948889,longitude:-156.69},{facility_name:"JACKSONVILLE WATER WORKS GAS AND SEWER BD",city:"Jacksonville","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:690,amount_of_biosolids_managed_land_applied:0,latitude:33.8139,longitude:-85.7641},{facility_name:"HARRISON CO UTILITY AUTHORITY, WEST BILOXI POTW",city:"Biloxi","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:688,amount_of_biosolids_managed_land_applied:688,latitude:30.407105,longitude:-88.968923},{facility_name:"NORTH ATTLEBOROUGH W W T P",city:"North Attleborough","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:688,amount_of_biosolids_managed_land_applied:0,latitude:41.96089,longitude:-71.30695},{facility_name:"DOVER CITY OF WWTP",city:"Dover","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:688,amount_of_biosolids_managed_land_applied:0,latitude:43.19353,longitude:-70.87427},{facility_name:"FALL CREEK REG. WASTE DIST.",city:"Pendleton","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:688,amount_of_biosolids_managed_land_applied:1533,latitude:39.968,longitude:-85.795306},{facility_name:"SIMSBURY",city:"Simsbury","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:685,amount_of_biosolids_managed_land_applied:0,latitude:41.870817,longitude:-72.797855},{facility_name:"ADDISON NORTH STP, VILLAGE OF",city:"Addison","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:685,amount_of_biosolids_managed_land_applied:684.52,latitude:41.940474,longitude:-87.988669},{facility_name:"VA AMERICAN WATER PWWW - PLANT 8",city:"Woodbridge","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:684,amount_of_biosolids_managed_land_applied:684.44,latitude:38.646133,longitude:-77.34706},{facility_name:"TOWN OF SOUTH KINGSTOWN",city:"Wakefield","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:684,amount_of_biosolids_managed_land_applied:0,latitude:41.4417,longitude:-71.50229},{facility_name:"LIBERTY WASTEWATER TREATMENT PLANT",city:"Liberty","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:684,amount_of_biosolids_managed_land_applied:683.55,latitude:39.197004,longitude:-94.436847},{facility_name:"NORTHGLENN CITY OF",city:"Northglenn","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:682,amount_of_biosolids_managed_land_applied:682.48,latitude:39.90925,longitude:-104.98698},{facility_name:"COOKEVILLE STP",city:"Cookeville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:681,amount_of_biosolids_managed_land_applied:681,latitude:36.10828,longitude:-85.50571},{facility_name:"UPPER BLUE SANITATION DISTRICT",city:"Breckenridge","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:681,amount_of_biosolids_managed_land_applied:0,latitude:39.5002267,longitude:-106.0430996},{facility_name:"THE WOODLANDS WWTF 1",city:"The Woodlands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:679,amount_of_biosolids_managed_land_applied:0,latitude:30.195784,longitude:-95.491353},{facility_name:"LAFAYETTE CONSOLDATED GOVERNMENT - AMBASSADOR CAFFERY TREATMENT PLANT",city:"Lafayette","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:679,amount_of_biosolids_managed_land_applied:678.8,latitude:30.16397,longitude:-92.05742},{facility_name:"LAGUNA CSD WRF",city:"Santa Maria","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:678,amount_of_biosolids_managed_land_applied:0,latitude:34.88673,longitude:-120.4323636},{facility_name:"GROTON WPCF TOWN OF",city:"Groton","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:678,amount_of_biosolids_managed_land_applied:0,latitude:41.33687,longitude:-72.02011},{facility_name:"FAIRFIELD WPCF",city:"Fairfield","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:677,amount_of_biosolids_managed_land_applied:677,latitude:41.126264,longitude:-73.245169},{facility_name:"JAMESTOWN (C) BOARD OF PUB UTILITIES",city:"Jamestown","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:677,amount_of_biosolids_managed_land_applied:0,latitude:42.092795,longitude:-79.246809},{facility_name:"CAPE GIRARDEAU MUNICIPAL WWTF",city:"Cape Girardeau","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:675,amount_of_biosolids_managed_land_applied:675.41,latitude:37.283209,longitude:-89.523128},{facility_name:"HOOSAC WPCF",city:"Williamstown","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:675,amount_of_biosolids_managed_land_applied:253,latitude:42.729594,longitude:-73.211578},{facility_name:"BETHLEHEM (T)",city:"Delmar","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:674,amount_of_biosolids_managed_land_applied:0,latitude:42.61984,longitude:-73.83941},{facility_name:"CARPENTERSVILLE MAIN STP",city:"Carpentersville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:673,amount_of_biosolids_managed_land_applied:673.3,latitude:42.112764,longitude:-88.276137},{facility_name:"CITY OF LEBANON AUTHORITY WAST",city:"Lebanon County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:671,amount_of_biosolids_managed_land_applied:670.6,latitude:40.337513,longitude:-76.462151},{facility_name:"LITTLE CEDAR BAYOU WWTP",city:"La Porte","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:670,amount_of_biosolids_managed_land_applied:0,latitude:29.64986,longitude:-95.023159},{facility_name:"MARSHALL",city:"Marshall","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:669,amount_of_biosolids_managed_land_applied:669.49,latitude:44.47032,longitude:-95.79095},{facility_name:"HAINES CITY WWTP",city:"Haines City","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:668,amount_of_biosolids_managed_land_applied:667.5,latitude:28.11409,longitude:-81.59733},{facility_name:"TRI-MUNICIPAL SEWER COMMISSION",city:"Wappingers Falls","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:667,amount_of_biosolids_managed_land_applied:667,latitude:41.57922678,longitude:-73.89654178},{facility_name:"HARRIS COUNTY WCID 47 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:667,amount_of_biosolids_managed_land_applied:0,latitude:29.648856,longitude:-95.22301},{facility_name:"SAUGERTIES (V)",city:"Saugerties","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:665,amount_of_biosolids_managed_land_applied:0,latitude:42.07862,longitude:-73.95274},{facility_name:"ELKTON WASTERWATER TREATMENT",city:"Elkton","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:664,amount_of_biosolids_managed_land_applied:664,latitude:39.601223,longitude:-75.833827},{facility_name:"SABINE CREEK REGIONAL WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:664,amount_of_biosolids_managed_land_applied:0,latitude:33.02323,longitude:-96.55079},{facility_name:"SHERIDAN, CITY OF",city:"Sheridan","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:663,amount_of_biosolids_managed_land_applied:0,latitude:44.823028,longitude:-106.973958},{facility_name:"NYCDEP - ROCKAWAY WRRF",city:"Far Rockaway","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:663,amount_of_biosolids_managed_land_applied:0,latitude:40.57704854,longitude:-73.84957394},{facility_name:"CITY OF KALISPELL",city:"Kalispell","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:662,amount_of_biosolids_managed_land_applied:0,latitude:48.19567685,longitude:-114.3143636},{facility_name:"LOCKHART WWTP 2",city:"Lockhart","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:660,amount_of_biosolids_managed_land_applied:0,latitude:29.870517,longitude:-97.626062},{facility_name:"SWATARA TOWNSHIP AUTHORITY",city:"Dauphin County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:659,amount_of_biosolids_managed_land_applied:0,latitude:40.24679,longitude:-76.81103},{facility_name:"CITY OF NAVASOTA OLD WWTP",city:"Navasota","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:658,amount_of_biosolids_managed_land_applied:0,latitude:30.383528,longitude:-96.101056},{facility_name:"HOBBS, CITY OF",city:"Hobbs","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:658,amount_of_biosolids_managed_land_applied:380.75,latitude:32.7008,longitude:-103.13496},{facility_name:"LOGAN TOWNSHIP MUA",city:"Logan Twp","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:657,amount_of_biosolids_managed_land_applied:0,latitude:39.787893,longitude:-75.377619},{facility_name:"FORT BEND CO MUD 25",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:656,amount_of_biosolids_managed_land_applied:0,latitude:29.634639,longitude:-95.673194},{facility_name:"MOORPARK WWTP",city:"Moorpark","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:656,amount_of_biosolids_managed_land_applied:0,latitude:34.28850368,longitude:-118.8867736},{facility_name:"PADUCAH/MCCRACKEN COUNTY JSA - PADUCAH",city:"Paducah","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:655,amount_of_biosolids_managed_land_applied:271,latitude:37.09754,longitude:-88.61633},{facility_name:"GREATER AUGUSTA UTILITY DISTRICT",city:"Augusta","state_postal;":"ME",state:"Maine",amount_of_biosolids_generated:655,amount_of_biosolids_managed_land_applied:0,latitude:44.30205,longitude:-69.77938},{facility_name:"KC TODD CREEK WWTP",city:"Kansas City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:654,amount_of_biosolids_managed_land_applied:0,latitude:39.35422,longitude:-94.66539},{facility_name:"SOUTHSIDE WWTF",city:"Mount Pleasant","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:653,amount_of_biosolids_managed_land_applied:0,latitude:33.102651,longitude:-94.95301},{facility_name:"ASHLEY VALLEY WATER REC. FACIL",city:"Vernal","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:653,amount_of_biosolids_managed_land_applied:0,latitude:40.40494,longitude:-109.48549},{facility_name:"SOUTHEAST WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:652,amount_of_biosolids_managed_land_applied:0,latitude:29.608399,longitude:-95.241125},{facility_name:"EL DORADO DEER CREEK WWTP",city:"Placerville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:652,amount_of_biosolids_managed_land_applied:651.7,latitude:38.73444,longitude:-120.7868},{facility_name:"JASPER WATERWORKS & SEWER BOARD, INC.",city:"Jasper","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:651,amount_of_biosolids_managed_land_applied:433.1,latitude:33.812359,longitude:-87.268471},{facility_name:"EAGLE RIVER WATER & SAN DIST",city:"Vail","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:649,amount_of_biosolids_managed_land_applied:499,latitude:39.64159,longitude:-106.39398},{facility_name:"VA AMERICAN WATER PWWW - PLANT 1",city:"Woodbridge","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:649,amount_of_biosolids_managed_land_applied:646.11,latitude:38.62768,longitude:-77.31043},{facility_name:"DOUGLASVILLE-DOUGLAS CO (WSA) SWEETWATER CR",city:"Douglasville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:648,amount_of_biosolids_managed_land_applied:648.1,latitude:33.702553,longitude:-84.629156},{facility_name:"UNION CITY WWTP",city:"Union City","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:648,amount_of_biosolids_managed_land_applied:0,latitude:40.19831,longitude:-84.8079},{facility_name:"WEST WWTP",city:"Cleveland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:648,amount_of_biosolids_managed_land_applied:0,latitude:30.336,longitude:-95.095389},{facility_name:"WEST GOSHEN SEWAGE TREATMENT P",city:"West Chester","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:646,amount_of_biosolids_managed_land_applied:0,latitude:39.94748,longitude:-75.57307},{facility_name:"JUNCTION CITY, CITY OF",city:"Junction City","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:645,amount_of_biosolids_managed_land_applied:645,latitude:38.9921,longitude:-96.8658},{facility_name:"OCALA WRF #2",city:"Ocala","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:645,amount_of_biosolids_managed_land_applied:0,latitude:29.163056,longitude:-82.0775},{facility_name:"VILLAGE OF WELLINGTON WWTP",city:"Wellington","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:644,amount_of_biosolids_managed_land_applied:644.07,latitude:26.6367,longitude:-80.23406},{facility_name:"CITY OF MONROE",city:"Monroe","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:643,amount_of_biosolids_managed_land_applied:642.56,latitude:34.995555,longitude:-80.49},{facility_name:"CRANBERRY TOWNSHIP M.S.A.",city:"Cranberry Township","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:640,amount_of_biosolids_managed_land_applied:0,latitude:40.708391,longitude:-80.141948},{facility_name:"FARMINGTON WPCF",city:"Farmington","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:639,amount_of_biosolids_managed_land_applied:0,latitude:41.74841,longitude:-72.86852},{facility_name:"MERCEDES WASTE WATER TREATMENT FACILITY",city:"Mercedes","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:639,amount_of_biosolids_managed_land_applied:638.6,latitude:26.170779,longitude:-97.902503},{facility_name:"EDWARDSVILLE STP, CITY OF",city:"Edwardsville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:637,amount_of_biosolids_managed_land_applied:637.4852,latitude:38.784167,longitude:-90.036389},{facility_name:"CITY OF DUNEDIN",city:"Dunedin","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:636,amount_of_biosolids_managed_land_applied:636.13,latitude:28.019444,longitude:-82.785833},{facility_name:"KINGWOOD CENTRAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:636,amount_of_biosolids_managed_land_applied:0,latitude:30.04514,longitude:-95.1908},{facility_name:"WIDEFIELD WATER AND SANITATION DISTRICT",city:"Colorado Springs","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:635,amount_of_biosolids_managed_land_applied:0,latitude:38.73748,longitude:-104.67377},{facility_name:"BOROUGH OF ELIZABETHTOWN",city:"Elizabethtown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:631,amount_of_biosolids_managed_land_applied:0,latitude:40.1458,longitude:-76.59932},{facility_name:"MARION WWTP, CITY OF",city:"Marion","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:630,amount_of_biosolids_managed_land_applied:630,latitude:40.580028,longitude:-85.659806},{facility_name:"SNYDERVILLE BASIN SID (E CNYN)",city:"Park City","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:630,amount_of_biosolids_managed_land_applied:0,latitude:40.756884,longitude:-111.564117},{facility_name:"DOUGLASVILLE - DOUGLAS COUNTY WATER AND SEWER AUTHORITY",city:"Douglasville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:629,amount_of_biosolids_managed_land_applied:190.81,latitude:33.646607,longitude:-84.753021},{facility_name:"GLASTONBURY WPCF",city:"Glastonbury","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:629,amount_of_biosolids_managed_land_applied:0,latitude:41.70699,longitude:-72.60808},{facility_name:"POST OAK WWTP",city:"Sherman","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:629,amount_of_biosolids_managed_land_applied:0,latitude:33.601523,longitude:-96.573894},{facility_name:"SPRINGFIELD STP",city:"Springfield","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:629,amount_of_biosolids_managed_land_applied:153.04,latitude:36.506156,longitude:-86.941666},{facility_name:"CITY OF FREDERICKSBURG WWTF",city:"Fredericksburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:628,amount_of_biosolids_managed_land_applied:0,latitude:38.288972,longitude:-77.451111},{facility_name:"PACE WATER SYSTEM, INC. & PACE PROPERTY FINANCE AUTHORITY",city:"Pace","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:625,amount_of_biosolids_managed_land_applied:625.21,latitude:30.595833,longitude:-87.1825},{facility_name:"SOUTHWEST REGIONAL WWTP",city:"Bartow","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:625,amount_of_biosolids_managed_land_applied:0,latitude:27.894946,longitude:-81.84235},{facility_name:"PRASA SANTA ISABEL",city:"Santa Isabel","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:623,amount_of_biosolids_managed_land_applied:0,latitude:17.96829836,longitude:-66.405249},{facility_name:"SOUTH DAVIS SEWER DISTRICT-SOUTH PLANT",city:"North Salt Lake","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:621,amount_of_biosolids_managed_land_applied:0,latitude:40.843362,longitude:-111.948244},{facility_name:"CVWD WRP 7 IMP. DIST. 58",city:"Coachella","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:620,amount_of_biosolids_managed_land_applied:0,latitude:33.685745,longitude:-116.1675911},{facility_name:"MILLER STREET WWTF",city:"Orange Park","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:619,amount_of_biosolids_managed_land_applied:619.34,latitude:30.11458,longitude:-81.8158},{facility_name:"BELL CO WCID 1 WWTP 3",city:"Killeen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:619,amount_of_biosolids_managed_land_applied:618.536877,latitude:31.069556,longitude:-97.608167},{facility_name:"LAWRENCE, CITY OF WAKARUSA FACILITY",city:"Lawrence","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:616,amount_of_biosolids_managed_land_applied:384,latitude:39.01115,longitude:-95.21658},{facility_name:"OTSEGO EAST",city:"Rogers","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:616,amount_of_biosolids_managed_land_applied:615.87,latitude:45.232112,longitude:-93.536775},{facility_name:"IRONHOUSE SANITARY DISTRICT WWTP",city:"Oakley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:613,amount_of_biosolids_managed_land_applied:613.29,latitude:37.99783,longitude:-121.70746},{facility_name:"CITY OF HARKER HEIGHTS WWTP",city:"Harker Heights","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:613,amount_of_biosolids_managed_land_applied:612.6,latitude:31.08153,longitude:-97.66964},{facility_name:"NORTH PLATTE WWTF",city:"North Platte","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:612,amount_of_biosolids_managed_land_applied:612,latitude:41.12595,longitude:-100.724},{facility_name:"NEW BROADWAY WWTF",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:612,amount_of_biosolids_managed_land_applied:0,latitude:27.80288,longitude:-97.40103},{facility_name:"ROXBURY TOWNSHIP OF",city:"Succasunna","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:611,amount_of_biosolids_managed_land_applied:0,latitude:40.8415,longitude:-74.6423},{facility_name:"BREMEN WWTP",city:"Bremen","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:610,amount_of_biosolids_managed_land_applied:0,latitude:41.451333,longitude:-86.171167},{facility_name:"ATWATER, CITY OF",city:"Atwater","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:609,amount_of_biosolids_managed_land_applied:859,latitude:37.33852672,longitude:-120.6274009},{facility_name:"MARLBOROUGH WESTERLY W W T P",city:"Marlborough","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:607,amount_of_biosolids_managed_land_applied:0,latitude:42.336794,longitude:-71.603678},{facility_name:"AMS CENTRAL RMF",city:"Terra Ceia","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:607,amount_of_biosolids_managed_land_applied:606.7,latitude:27.57930927,longitude:-82.58096029},{facility_name:"CHT RESOURCES - LANDFILL AND COMPOSTING",city:"Austin","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:606,amount_of_biosolids_managed_land_applied:606,latitude:38.833751,longitude:-108.036578},{facility_name:"TRENTON SEWER UTILITY",city:"Trenton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:605,amount_of_biosolids_managed_land_applied:0,latitude:40.175727,longitude:-74.726642},{facility_name:"COHANSEY RIVER BASIN STP",city:"Bridgeton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:605,amount_of_biosolids_managed_land_applied:83.2,latitude:39.417809,longitude:-75.234049},{facility_name:"CORTLAND (C)",city:"Cortland","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:604,amount_of_biosolids_managed_land_applied:0,latitude:42.59939,longitude:-76.17837},{facility_name:"UPPER ALLEGHENY STP",city:"Tarentum","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:603,amount_of_biosolids_managed_land_applied:0,latitude:40.602,longitude:-79.75293},{facility_name:"CITY OF ORANGE BEACH",city:"Orange Beach","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:602,amount_of_biosolids_managed_land_applied:602.15,latitude:30.290833,longitude:-87.638611},{facility_name:"VILLAGE OF FRANKFORT - REGIONAL WWTP",city:"Frankfort","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:601,amount_of_biosolids_managed_land_applied:601.481,latitude:41.51764,longitude:-87.84977},{facility_name:"CANANDAIGUA (C)",city:"Canandaigua","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:599,amount_of_biosolids_managed_land_applied:0,latitude:42.87829155,longitude:-77.291205},{facility_name:"NEW FREEDOM STP",city:"New Freedom","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:598,amount_of_biosolids_managed_land_applied:598.43,latitude:39.762924,longitude:-76.702228},{facility_name:"ADELANTO WWTF",city:"Adelanto","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:598,amount_of_biosolids_managed_land_applied:0,latitude:34.58278,longitude:-117.40806},{facility_name:"UNIFIED GOVERNMENT OF ATHENS-CLARKE COUNTY",city:"Unknown","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:598,amount_of_biosolids_managed_land_applied:597.65,latitude:33.909028,longitude:-83.392117},{facility_name:"GWA NORTHERN DISTRICT WWTP",city:"Mangilao","state_postal;":"GU",state:"Guam",amount_of_biosolids_generated:597,amount_of_biosolids_managed_land_applied:0,latitude:13.4382999,longitude:144.7729285},{facility_name:"LOCKPORT (C)",city:"Lockport","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:597,amount_of_biosolids_managed_land_applied:596.9,latitude:43.16909,longitude:-78.69585},{facility_name:"BLOOMINGTON N (BLUCHER POOLE)",city:"Bloomington","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:596,amount_of_biosolids_managed_land_applied:0,latitude:39.246889,longitude:-86.548583},{facility_name:"GREER/MAPLE CREEK PLANT",city:"Greer","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:595,amount_of_biosolids_managed_land_applied:0,latitude:34.93058,longitude:-82.18497},{facility_name:"ST VRAIN SANITATION DISTRICT",city:"Firestone","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:594,amount_of_biosolids_managed_land_applied:544.7,latitude:40.16511,longitude:-104.9763},{facility_name:"FMC WWTF",city:"Spotsylvania","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:594,amount_of_biosolids_managed_land_applied:593.87,latitude:38.32405,longitude:-77.4772},{facility_name:"ALDERWOOD STP",city:"Lynnwood","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:592,amount_of_biosolids_managed_land_applied:592.36,latitude:47.878689,longitude:-122.319149},{facility_name:"BARDSTOWN TOWN CREEK WWTP",city:"Bardstown","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:591,amount_of_biosolids_managed_land_applied:0,latitude:37.81175,longitude:-85.469615},{facility_name:"PRASA AGUADILLA RWWTP",city:"Santurce","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:591,amount_of_biosolids_managed_land_applied:590.93,latitude:18.388802,longitude:-67.178826},{facility_name:"POUGHKEEPSIE (T)",city:"Poughkeepsie","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:590,amount_of_biosolids_managed_land_applied:590.2,latitude:41.69302,longitude:-73.88883},{facility_name:"NISKAYUNA (T)",city:"Schenectady","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:590,amount_of_biosolids_managed_land_applied:590.06,latitude:42.81924,longitude:-73.88623},{facility_name:"PARSONS, CITY OF",city:"Parsons","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:590,amount_of_biosolids_managed_land_applied:589.61,latitude:37.339167,longitude:-95.269722},{facility_name:"CITY OF EAGLE GROVE",city:"Eagle Grove","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:589,amount_of_biosolids_managed_land_applied:589.35,latitude:42.66626199,longitude:-93.90580569},{facility_name:"QUAKERTOWN WWTP",city:"Quakertown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:589,amount_of_biosolids_managed_land_applied:281.8,latitude:40.442508,longitude:-75.318502},{facility_name:"CITY OF BLUE SPRINGS",city:"Blue Springs","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:588,amount_of_biosolids_managed_land_applied:0,latitude:39.03073524,longitude:-94.31036368},{facility_name:"THE WOODLANDS WWTP 2",city:"The Woodlands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:586,amount_of_biosolids_managed_land_applied:0,latitude:30.195278,longitude:-95.488778},{facility_name:"BLACKHAWK CREEK WWTP",city:"Whitehouse","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:586,amount_of_biosolids_managed_land_applied:0,latitude:32.205979,longitude:-95.205738},{facility_name:"NEWPORT STP",city:"Newport","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:583,amount_of_biosolids_managed_land_applied:583.24,latitude:35.982597,longitude:-83.197659},{facility_name:"REMINGTON REGIONAL WWTP",city:"Warrenton","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:583,amount_of_biosolids_managed_land_applied:582.85,latitude:38.53006,longitude:-77.7981},{facility_name:"COPPERAS COVE NORTHEAST WWTP",city:"Copperas Cove","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:582,amount_of_biosolids_managed_land_applied:0,latitude:31.127185,longitude:-97.88762},{facility_name:"CITY OF AMES",city:"Ames","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:579,amount_of_biosolids_managed_land_applied:579.3,latitude:42.02598,longitude:-93.60879},{facility_name:"CITY OF KERRVILLE WWTF",city:"Kerrville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:579,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"WATER POLLUTION CONTROL FACILITY",city:"Ottumwa","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:579,amount_of_biosolids_managed_land_applied:579,latitude:41.01904,longitude:-92.41136},{facility_name:"HUNTINGTON WWTP",city:"Huntington","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:579,amount_of_biosolids_managed_land_applied:356.16,latitude:40.88118,longitude:-85.4958},{facility_name:"WHEATON SANITARY DISTRICT WWTF",city:"Wheaton","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:578,amount_of_biosolids_managed_land_applied:577.89,latitude:41.84898,longitude:-88.146313},{facility_name:"EL DORADO HILLS WWTP",city:"Placerville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:578,amount_of_biosolids_managed_land_applied:577.5,latitude:38.73444,longitude:-120.7868},{facility_name:"SOUTH BURLINGTON WWTF--AIRPORT PARKWAY",city:"South Burlington","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:577,amount_of_biosolids_managed_land_applied:577.39,latitude:44.48155,longitude:-73.17031},{facility_name:"CITY OF SALISBURY, TOWN CREEK WWTP",city:"Salisbury","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:576,amount_of_biosolids_managed_land_applied:576,latitude:35.66265,longitude:-80.46389253},{facility_name:"PINE BROOK STP",city:"Manalapan Township","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:575,amount_of_biosolids_managed_land_applied:0,latitude:40.2767563,longitude:-74.33897322},{facility_name:"MCHENRY SOUTH WWTP, CITY OF",city:"Mchenry","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:574,amount_of_biosolids_managed_land_applied:574,latitude:42.235139,longitude:-88.330225},{facility_name:"CITY OF SHELBY",city:"Shelby","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:574,amount_of_biosolids_managed_land_applied:573.9,latitude:35.24281,longitude:-81.571035},{facility_name:"LOWER BUCKS COUNTY JOINT M.A.",city:"Levittown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:574,amount_of_biosolids_managed_land_applied:0,latitude:40.159839,longitude:-74.848671},{facility_name:"CHEMUNG CO ELMIRA SD",city:"Elmira","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:573,amount_of_biosolids_managed_land_applied:0,latitude:42.07685,longitude:-76.77893},{facility_name:"CITY OF LIVINGSTON WWTP",city:"Livingston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:572,amount_of_biosolids_managed_land_applied:0,latitude:30.71097,longitude:-94.93439},{facility_name:"MINNESOTA RIVER VALLEY PUC",city:"Lesueur","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:572,amount_of_biosolids_managed_land_applied:572,latitude:44.47669,longitude:-93.905138},{facility_name:"MISSION SPRINGS ALAN L. HORTON WWTP",city:"Desert Hot Sprngs","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:572,amount_of_biosolids_managed_land_applied:47.51,latitude:33.96327,longitude:-116.4998},{facility_name:"NEWPORT MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:571,amount_of_biosolids_managed_land_applied:0,latitude:29.91063,longitude:-95.09212},{facility_name:"CITY OF JUSTIN WWTP",city:"Justin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:571,amount_of_biosolids_managed_land_applied:0,latitude:33.078444,longitude:-97.293056},{facility_name:"BENSENVILLE SOUTH STP",city:"Bensenville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:570,amount_of_biosolids_managed_land_applied:570.05,latitude:41.94619,longitude:-87.92836},{facility_name:"ENDICOTT (V)",city:"Endicott","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:570,amount_of_biosolids_managed_land_applied:570,latitude:42.09729,longitude:-76.051131},{facility_name:"NEW IBERIA, CITY OF",city:"New Iberia","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:569,amount_of_biosolids_managed_land_applied:861.96,latitude:30.0027,longitude:-91.81359},{facility_name:"LOWELL WWTP",city:"Lowell","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:568,amount_of_biosolids_managed_land_applied:568.16,latitude:41.264306,longitude:-87.4175},{facility_name:"REWA/GEORGES CREEK WWTP",city:"Greenville","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:566,amount_of_biosolids_managed_land_applied:0,latitude:34.82222,longitude:-82.47805},{facility_name:"NTUA WINDOW ROCK WWTP",city:"Fort Defiance","state_postal;":"AZ",state:"Ariz.",amount_of_biosolids_generated:565,amount_of_biosolids_managed_land_applied:0,latitude:35.74207,longitude:-109.07081},{facility_name:"SMYRNA STP",city:"Smyrna","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:565,amount_of_biosolids_managed_land_applied:62.4,latitude:35.99321,longitude:-86.51434},{facility_name:"MICHIGAN CITY - J.B. GIFFORD WWTP",city:"Michigan City","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:565,amount_of_biosolids_managed_land_applied:565,latitude:41.71676,longitude:-86.88473},{facility_name:"NEWBURYPORT W W T P",city:"Newburyport","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:565,amount_of_biosolids_managed_land_applied:565,latitude:42.809271,longitude:-70.861505},{facility_name:"TOWN OF MIDDLEBURY",city:"Middlebury","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:565,amount_of_biosolids_managed_land_applied:564.78,latitude:44.01109,longitude:-73.17049},{facility_name:"NEWBURGH MUNICIPAL WWTP",city:"Newburgh","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:565,amount_of_biosolids_managed_land_applied:0,latitude:37.941972,longitude:-87.349056},{facility_name:"CITY OF WENTZVILLE",city:"Wentzville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:564,amount_of_biosolids_managed_land_applied:564.25,latitude:38.81092,longitude:-90.85695},{facility_name:"RUSSELLVILLE STP",city:"Russellville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:563,amount_of_biosolids_managed_land_applied:0,latitude:36.856732,longitude:-86.889048},{facility_name:"GALESBURG SD STP",city:"Galesburg","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:561,amount_of_biosolids_managed_land_applied:578,latitude:40.9401,longitude:-90.4222},{facility_name:"SUFFIELD WPCF",city:"Suffield","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:560,amount_of_biosolids_managed_land_applied:0,latitude:41.95944,longitude:-72.62599},{facility_name:"CITY OF PUNTA GORDA WWTP",city:"Punta Gorda","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:558,amount_of_biosolids_managed_land_applied:558,latitude:26.94684,longitude:-81.94742},{facility_name:"HERMITAGE CITY MUNICIPAL AUTHO",city:"Hermitage","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:558,amount_of_biosolids_managed_land_applied:557.35,latitude:41.1923,longitude:-80.467},{facility_name:"DEQUEEN, CITY OF",city:"De Queen","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:558,amount_of_biosolids_managed_land_applied:0,latitude:34.029499,longitude:-94.347291},{facility_name:"JESSAMINE CREEK ENVIRONMENTAL CONTROL #1",city:"Nicholasville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:557,amount_of_biosolids_managed_land_applied:0,latitude:37.847683,longitude:-84.612412},{facility_name:"URBANA-CHAMPAIGN SD SW STP",city:"Champaign","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:556,amount_of_biosolids_managed_land_applied:0,latitude:40.08236,longitude:-88.33292},{facility_name:"MT PLEASANT WWTP",city:"Mt Pleasant","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:555,amount_of_biosolids_managed_land_applied:555.31,latitude:43.614542,longitude:-84.774301},{facility_name:"WALLINGFORD WPCF",city:"Wallingford","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:555,amount_of_biosolids_managed_land_applied:0,latitude:41.446099,longitude:-72.837583},{facility_name:"ALTOONA CITY AUTHORITY-WESTERL",city:"Altoona","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:555,amount_of_biosolids_managed_land_applied:260.68,latitude:40.453906,longitude:-78.426103},{facility_name:"DEER PARK WWTP",city:"Deer Park","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:552,amount_of_biosolids_managed_land_applied:0,latitude:29.71031,longitude:-95.116515},{facility_name:"CITY OF SAN JUAN WWTP",city:"San Juan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:551,amount_of_biosolids_managed_land_applied:551.42,latitude:26.161663,longitude:-98.16224},{facility_name:"OCEAN CITY REG WASTEWATER TF",city:"Ocean City","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:551,amount_of_biosolids_managed_land_applied:0,latitude:39.09598045,longitude:-74.81912379},{facility_name:"GOSHEN (V)",city:"Goshen","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:550,amount_of_biosolids_managed_land_applied:550,latitude:41.40583,longitude:-74.31765},{facility_name:"TIFTON NEW RIVER WPCP",city:"Tifton","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:546,amount_of_biosolids_managed_land_applied:546.13,latitude:31.445833,longitude:-83.478056},{facility_name:"HARRIS COUNTY MUD 196 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:546,amount_of_biosolids_managed_land_applied:0,latitude:29.928833,longitude:-95.672722},{facility_name:"CITY OF CLEBURNE WWTF",city:"Cleburne","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:545,amount_of_biosolids_managed_land_applied:0,latitude:32.313801,longitude:-97.393735},{facility_name:"ALGONQUIN STP, VILLAGE OF",city:"Algonquin","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:545,amount_of_biosolids_managed_land_applied:544.934,latitude:42.154898,longitude:-88.294292},{facility_name:"SMITHFIELD TOWN HALL",city:"Smithfield","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:543,amount_of_biosolids_managed_land_applied:0,latitude:41.8858,longitude:-71.50906},{facility_name:"CITY OF HELENA",city:"Helena","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:543,amount_of_biosolids_managed_land_applied:157.65,latitude:46.61665,longitude:-112.00464},{facility_name:"OWATONNA",city:"Owatonna","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:542,amount_of_biosolids_managed_land_applied:542.39,latitude:44.097241,longitude:-93.233296},{facility_name:"ROANOKE RAPIDS SANITARY DISTRICT",city:"Roanoke Rapids","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:542,amount_of_biosolids_managed_land_applied:541.54,latitude:36.435736,longitude:-77.611069},{facility_name:"SALATRILLO CREEK WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:541,amount_of_biosolids_managed_land_applied:0,latitude:29.50934,longitude:-98.29974},{facility_name:"BIG BEAR AREA RWA WWTP",city:"Big Bear City","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:541,amount_of_biosolids_managed_land_applied:540.67,latitude:34.25242937,longitude:-116.8105742},{facility_name:"FAIRHOPE CITY OF",city:"Fairhope","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:540,amount_of_biosolids_managed_land_applied:0,latitude:30.53,longitude:-87.9043},{facility_name:"WEST MEMPHIS, CITY OF-WWTP",city:"West Memphis","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:540,amount_of_biosolids_managed_land_applied:0,latitude:35.124167,longitude:-90.178889},{facility_name:"TWA/CYPRESS WEST",city:"Kissimmee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:540,amount_of_biosolids_managed_land_applied:0,latitude:28.1497,longitude:-81.5008},{facility_name:"WESTCHESTER CO DEPT ENV FAC",city:"New Rochelle","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:539,amount_of_biosolids_managed_land_applied:0,latitude:41.28749125,longitude:-73.91612806},{facility_name:"RANCHO CALIFORNIA SANTA ROSA WRF",city:"Temecula","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:539,amount_of_biosolids_managed_land_applied:0,latitude:33.50773571,longitude:-117.1233054},{facility_name:"SOUTH FORT COLLINS SANITATION DISTRICT",city:"Fort Collins","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:534,amount_of_biosolids_managed_land_applied:0,latitude:40.51547,longitude:-105.07572},{facility_name:"FAYETTEVILLE WHITEWATER CR",city:"Fayetteville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:534,amount_of_biosolids_managed_land_applied:0,latitude:33.422528,longitude:-84.492806},{facility_name:"MARION SE STP, CITY OF",city:"Marion","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:534,amount_of_biosolids_managed_land_applied:460,latitude:37.721981,longitude:-88.928056},{facility_name:"CITY OF STATESVILLE",city:"Statesville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:533,amount_of_biosolids_managed_land_applied:350,latitude:35.773061,longitude:-80.788607},{facility_name:"CITY OF WILLOW PARK WWTP",city:"Willow Park","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:532,amount_of_biosolids_managed_land_applied:0,latitude:32.751778,longitude:-97.664167},{facility_name:"JASPER MUNICIPAL WWTP",city:"Jasper","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:532,amount_of_biosolids_managed_land_applied:322.63,latitude:38.385139,longitude:-86.940167},{facility_name:"CITY OF PILOT POINT WWTP",city:"Pilot Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:532,amount_of_biosolids_managed_land_applied:0,latitude:33.408342,longitude:-96.954588},{facility_name:"BARBERS POINT COMPOST",city:"Pearl Harber","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:532,amount_of_biosolids_managed_land_applied:2635,latitude:21.348472,longitude:-157.944147},{facility_name:"FORT KAMEHAMEHA WWTP",city:"Pearl Harbor","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:532,amount_of_biosolids_managed_land_applied:532,latitude:21.348472,longitude:-157.944147},{facility_name:"BELVIDERE STP, CITY OF",city:"Belvidere","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:531,amount_of_biosolids_managed_land_applied:531.18,latitude:42.25468,longitude:-88.86465},{facility_name:"ROBERT T. SAVELY WATER RECLAMATION",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:531,amount_of_biosolids_managed_land_applied:0,latitude:29.578731,longitude:-95.088541},{facility_name:"DEVENS WASTEWATER TREATMENT FACILITY",city:"Shirley","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:530,amount_of_biosolids_managed_land_applied:0,latitude:42.560466,longitude:-71.616626},{facility_name:"WEST BRUNSWICK REGIONAL WWTF",city:"Supply","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:530,amount_of_biosolids_managed_land_applied:529.66,latitude:34.027541,longitude:-78.280217},{facility_name:"OROVILLE REGION, SEWERAGE COMMISSION",city:"Oroville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:529,amount_of_biosolids_managed_land_applied:0,latitude:39.49499799,longitude:-121.59493},{facility_name:"WILLIAMSBURG REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:529,amount_of_biosolids_managed_land_applied:528.53,latitude:29.7992,longitude:-95.769421},{facility_name:"CITY OF CLINTON",city:"Clinton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:527,amount_of_biosolids_managed_land_applied:526.91,latitude:35.004305,longitude:-78.345532},{facility_name:"HARRIS COUNTY MUD 8 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:527,amount_of_biosolids_managed_land_applied:526.5,latitude:29.78874,longitude:-95.20212},{facility_name:"FAIRHAVEN W W T P",city:"Fairhaven","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:525,amount_of_biosolids_managed_land_applied:0,latitude:41.639497,longitude:-70.875683},{facility_name:"MADISON WWTP",city:"Madison","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:524,amount_of_biosolids_managed_land_applied:523.8,latitude:38.73758,longitude:-85.39569},{facility_name:"LRWU-LITTLE MAUMELLE WWTP",city:"Little Rock","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:522,amount_of_biosolids_managed_land_applied:5098.24,latitude:34.820647,longitude:-92.487575},{facility_name:"EVANS CITY OF",city:"Evans","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:522,amount_of_biosolids_managed_land_applied:521.79,latitude:40.37739,longitude:-104.69687},{facility_name:"LITTLETON TOWN OF",city:"Littleton","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:520,amount_of_biosolids_managed_land_applied:0,latitude:44.30882,longitude:-71.79048},{facility_name:"DOVE SPRINGS WWTP",city:"Georgetown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:519,amount_of_biosolids_managed_land_applied:0,latitude:30.63193,longitude:-97.63373},{facility_name:"HAYS, CITY OF",city:"Hays","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:518,amount_of_biosolids_managed_land_applied:483,latitude:38.879444,longitude:-99.322222},{facility_name:"CITY OF CLINTON",city:"Clinton","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:518,amount_of_biosolids_managed_land_applied:517.5,latitude:41.903,longitude:-90.21281666},{facility_name:"ROCHESTER WASTEWATER TREATMENT PLANT",city:"Rochester","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:517,amount_of_biosolids_managed_land_applied:0,latitude:41.078944,longitude:-86.222028},{facility_name:"SOUTH COASTAL REGIONAL WASTEWATER FACILITY",city:"Sussex County","state_postal;":"DE",state:"Del.",amount_of_biosolids_generated:517,amount_of_biosolids_managed_land_applied:67.19,latitude:38.523212,longitude:-75.090427},{facility_name:"OCEANSIDE LA SALINA WWTP",city:"Oceanside","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:517,amount_of_biosolids_managed_land_applied:256,latitude:33.19383319,longitude:-117.3558029},{facility_name:"ALLISON WWTP",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:517,amount_of_biosolids_managed_land_applied:0,latitude:27.79642,longitude:-97.40411},{facility_name:"SOUTHBRIDGE W W T P/DEPT OF PUBLIC WORKS",city:"Southbridge","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:515,amount_of_biosolids_managed_land_applied:0,latitude:42.06969,longitude:-72.0063},{facility_name:"CITY OF GRIMES",city:"Grimes","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:514,amount_of_biosolids_managed_land_applied:0,latitude:41.69180452,longitude:-93.78656131},{facility_name:"ELMHURST STP, CITY OF",city:"Elmhurst","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:513,amount_of_biosolids_managed_land_applied:513.27,latitude:41.87782,longitude:-87.97554},{facility_name:"PUYALLUP STP",city:"Puyallup","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:513,amount_of_biosolids_managed_land_applied:512.6,latitude:47.205597,longitude:-122.321317},{facility_name:"BAYFIELD WWTP",city:"Bayfield","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:513,amount_of_biosolids_managed_land_applied:0,latitude:37.27753074,longitude:-107.6320368},{facility_name:"HANOVER AREA REGIONAL WWTF",city:"York County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:512,amount_of_biosolids_managed_land_applied:461.04,latitude:39.799953,longitude:-76.98407},{facility_name:"PARKINS MILLS WASTEWATER TREAT",city:"Winchester","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:510,amount_of_biosolids_managed_land_applied:0,latitude:39.10902,longitude:-78.15194},{facility_name:"SNYDERVILLE BSID-SILVER CREEK",city:"Park City","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:510,amount_of_biosolids_managed_land_applied:0,latitude:40.756884,longitude:-111.564117},{facility_name:"WESTERLY TOWN HALL",city:"Westerly","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:510,amount_of_biosolids_managed_land_applied:0,latitude:41.37698,longitude:-71.8294},{facility_name:"CLARKSVILLE WWTP",city:"Clarksville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:510,amount_of_biosolids_managed_land_applied:0,latitude:38.296778,longitude:-85.773528},{facility_name:"LEBANON STP",city:"Lebanon","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:509,amount_of_biosolids_managed_land_applied:509,latitude:36.217778,longitude:-86.317778},{facility_name:"ERIE CO SD2",city:"Buffalo","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:509,amount_of_biosolids_managed_land_applied:0,latitude:42.88376,longitude:-78.87736},{facility_name:"REEDLEY WWTP",city:"Reedley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:508,amount_of_biosolids_managed_land_applied:0,latitude:36.55714193,longitude:-119.4447173},{facility_name:"BENTONVILLE, CITY OF",city:"Bentonville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:508,amount_of_biosolids_managed_land_applied:0,latitude:36.37234,longitude:-94.20976},{facility_name:"CHESHIRE WPCF",city:"Cheshire","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:507,amount_of_biosolids_managed_land_applied:0,latitude:41.53378,longitude:-72.86655},{facility_name:"TOWN OF LITTLE ELM WWTF",city:"Little Elm","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:506,amount_of_biosolids_managed_land_applied:0,latitude:33.16625,longitude:-96.90954},{facility_name:"TAYLOR CREEK WWTP -- MSD",city:"Cincinnati","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:505,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"CITY OF ROCKDALE WWTP",city:"Rockdale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:505,amount_of_biosolids_managed_land_applied:0,latitude:30.639333,longitude:-97.0025},{facility_name:"FLOYDS FORK WQTC MSD",city:"Louisville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:505,amount_of_biosolids_managed_land_applied:0,latitude:38.2367,longitude:-85.46671},{facility_name:"TOWN OF TRION",city:"Trion","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:504,amount_of_biosolids_managed_land_applied:0,latitude:34.54029,longitude:-85.301404},{facility_name:"FLORENCE TOWNSHIP STP",city:"Florence","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:504,amount_of_biosolids_managed_land_applied:0,latitude:40.118583,longitude:-74.824302},{facility_name:"ALBERT LEA",city:"Albert Lea","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:503,amount_of_biosolids_managed_land_applied:503,latitude:43.65857,longitude:-93.37028644},{facility_name:"GALVESTON COUNTY WCID 1 WWTP",city:"Dickinson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:502,amount_of_biosolids_managed_land_applied:0,latitude:29.45772,longitude:-95.04443},{facility_name:"BROADWATER WATER RECLAMATION",city:"Churchton","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:501,amount_of_biosolids_managed_land_applied:500.92,latitude:38.812056,longitude:-76.524028},{facility_name:"VERO BEACH, CITY OF",city:"Vero Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:500,amount_of_biosolids_managed_land_applied:0,latitude:27.631389,longitude:-80.3775},{facility_name:"LIBERTYVILLE STP, VILLAGE OF",city:"Libertyville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:500,amount_of_biosolids_managed_land_applied:501.027,latitude:42.25765,longitude:-87.94561},{facility_name:"GULF COAST WAT.RECLM.CTR.-WWTP",city:"Groves","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:500,amount_of_biosolids_managed_land_applied:0,latitude:29.940989,longitude:-93.887922},{facility_name:"DONA ANA COUNTY UTILITIES DEPT",city:"La Mesa","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:499,amount_of_biosolids_managed_land_applied:0,latitude:32.09115,longitude:-106.66949},{facility_name:"MILTON REGIONAL SEWER AUTHORITY",city:"Milton","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:497,amount_of_biosolids_managed_land_applied:0,latitude:41.00634,longitude:-76.86178},{facility_name:"EPHRATA BOROUGH POTW",city:"Ephrata","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:496,amount_of_biosolids_managed_land_applied:0,latitude:40.175181,longitude:-76.196726},{facility_name:"CITY OF KANSAS CITY",city:"Kansas City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:495,amount_of_biosolids_managed_land_applied:0,latitude:39.01323,longitude:-94.52917},{facility_name:"WILLIAMSPORT SAN AUTH (CENTRAL",city:"Williamsport","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:493,amount_of_biosolids_managed_land_applied:0,latitude:41.244722,longitude:-76.989444},{facility_name:"BURLINGAME WWTF",city:"Burlingame","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:493,amount_of_biosolids_managed_land_applied:543.09,latitude:37.591899,longitude:-122.358092},{facility_name:"REWA/DURBIN CREEK WWTP",city:"Fountain Inn","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:491,amount_of_biosolids_managed_land_applied:0,latitude:34.708333,longitude:-82.167222},{facility_name:"CITY OF LOGANVILLE WPCP",city:"Loganville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:491,amount_of_biosolids_managed_land_applied:491.2,latitude:33.84525,longitude:-83.885583},{facility_name:"CITY OF ELIZABETH CITY",city:"Elizabeth City","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:491,amount_of_biosolids_managed_land_applied:491.19,latitude:36.308751,longitude:-76.204407},{facility_name:"OJAI VALLEY WWTP",city:"Ojai","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:490,amount_of_biosolids_managed_land_applied:0,latitude:34.43997209,longitude:-119.2706721},{facility_name:"SAGEMONT WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:490,amount_of_biosolids_managed_land_applied:0,latitude:29.59858,longitude:-95.207732},{facility_name:"STILL CREEK WWTP",city:"Bryan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:488,amount_of_biosolids_managed_land_applied:0,latitude:30.668045,longitude:-96.413084},{facility_name:"CITY OF STATESVILLE",city:"Statesville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:488,amount_of_biosolids_managed_land_applied:488,latitude:35.773061,longitude:-80.788607},{facility_name:"WALLA WALLA WATER RECLAMATION FACILITY",city:"Walla Walla","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:486,amount_of_biosolids_managed_land_applied:486,latitude:46.064194,longitude:-118.375175},{facility_name:"ALTOONA CITY AUTHORITY-EASTERL",city:"Ducansville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:486,amount_of_biosolids_managed_land_applied:213.17,latitude:40.453906,longitude:-78.426103},{facility_name:"MOBILE AREA WATER AND SEWER SYSTEM",city:"Mobile","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:485,amount_of_biosolids_managed_land_applied:485.45,latitude:30.72,longitude:-88.0701},{facility_name:"UTILITIES BOARD OF THE CITY OF SYLACAUGA",city:"Sylacauga","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:485,amount_of_biosolids_managed_land_applied:485.39,latitude:33.190263,longitude:-86.27153},{facility_name:"CITY OF UNIONTOWN",city:"Uniontown,","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:485,amount_of_biosolids_managed_land_applied:0,latitude:39.90214,longitude:-79.72418},{facility_name:"COOPER CITY WEST WWTP",city:"Cooper City","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:485,amount_of_biosolids_managed_land_applied:484.7,latitude:26.061389,longitude:-80.305},{facility_name:"BARRY ROSE WWTF",city:"Pearland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:484,amount_of_biosolids_managed_land_applied:0,latitude:29.573056,longitude:-95.260833},{facility_name:"AVON (V)",city:"Avon","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:484,amount_of_biosolids_managed_land_applied:0,latitude:42.91052,longitude:-77.74667},{facility_name:"CITY OF COMMERCE WWTF",city:"Commerce","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:483,amount_of_biosolids_managed_land_applied:0,latitude:33.217472,longitude:-95.885972},{facility_name:"CITY OF MACON",city:"Macon","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:483,amount_of_biosolids_managed_land_applied:483,latitude:39.73596926,longitude:-92.46174441},{facility_name:"GREENFIELD WPC",city:"Greenfield","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:482,amount_of_biosolids_managed_land_applied:0,latitude:42.58763,longitude:-72.60087},{facility_name:"REFLECTION BAY WATER RECLAMATION FACILITY",city:"Pearland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:481,amount_of_biosolids_managed_land_applied:0,latitude:29.579944,longitude:-95.409917},{facility_name:"CITY OF LINCOLNTON",city:"Lincolnton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:481,amount_of_biosolids_managed_land_applied:481,latitude:35.451,longitude:-81.2606},{facility_name:"CITY OF EDEN",city:"Eden","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:481,amount_of_biosolids_managed_land_applied:481,latitude:36.4758,longitude:-79.74385},{facility_name:"COPPERAS COVE SOUTH WWTF",city:"Copperas Cove","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:479,amount_of_biosolids_managed_land_applied:0,latitude:31.091029,longitude:-97.909063},{facility_name:"CITY OF KILGORE WWTP",city:"Kilgore","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:479,amount_of_biosolids_managed_land_applied:0,latitude:32.39761,longitude:-94.850397},{facility_name:"SCOTTSBORO WATER, SEWER, AND GAS BOARD",city:"Scottsboro","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:478,amount_of_biosolids_managed_land_applied:0,latitude:34.6061,longitude:-86.0535},{facility_name:"RAINBOW CITY WWTP",city:"Rainbow City","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:478,amount_of_biosolids_managed_land_applied:477.85,latitude:33.979167,longitude:-86.034444},{facility_name:"CITY OF CARBONDALE SOUTHEAST STP",city:"Carbondale","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:478,amount_of_biosolids_managed_land_applied:477.74,latitude:37.73384,longitude:-89.16613},{facility_name:"TUPELO BAYOU WWTP",city:"Conway","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:476,amount_of_biosolids_managed_land_applied:476.43,latitude:35.05524,longitude:-92.5347},{facility_name:"SUMMIT COUNTY LANDFILL",city:"Summit County","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:476,amount_of_biosolids_managed_land_applied:476,latitude:39.609166,longitude:-106.000555},{facility_name:"VINCENNES WWTP, CITY OF",city:"Vincennes","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:475,amount_of_biosolids_managed_land_applied:475.2941,latitude:38.676333,longitude:-87.541861},{facility_name:"ELKO WRF",city:"Elko","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:474,amount_of_biosolids_managed_land_applied:0,latitude:40.843617,longitude:-115.752753},{facility_name:"CITY OF MEBANE",city:"Mebane","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:474,amount_of_biosolids_managed_land_applied:0,latitude:36.088233,longitude:-79.285589},{facility_name:"ATASCOCITA REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:473,amount_of_biosolids_managed_land_applied:0,latitude:29.986444,longitude:-95.198139},{facility_name:"CITY OF DUBLIN",city:"Dublin","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:472,amount_of_biosolids_managed_land_applied:0,latitude:32.518639,longitude:-82.886167},{facility_name:"OCALA WRF #3",city:"Ocala","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:472,amount_of_biosolids_managed_land_applied:0,latitude:29.15835,longitude:-82.2314},{facility_name:"LAFAYETTE CONSOLIDATED GOVERNMENT - SOUTH WWTP",city:"Lafayette","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:471,amount_of_biosolids_managed_land_applied:470.9,latitude:30.195039,longitude:-92.028118},{facility_name:"WEBSTER W W T F",city:"Webster","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:470,amount_of_biosolids_managed_land_applied:0,latitude:42.038576,longitude:-71.888022},{facility_name:"SUGAR LAND NORTH WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:470,amount_of_biosolids_managed_land_applied:0,latitude:29.594764,longitude:-95.629578},{facility_name:"SHEPHERDSVILLE STP",city:"Shepherdsville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:469,amount_of_biosolids_managed_land_applied:0,latitude:37.9875,longitude:-85.720833},{facility_name:"ROCHELLE WATER RECLAMATION",city:"Rochelle","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:468,amount_of_biosolids_managed_land_applied:289,latitude:41.912721,longitude:-89.069954},{facility_name:"ANDERSON/ROCKY RIVER",city:"Anderson","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:467,amount_of_biosolids_managed_land_applied:467.45,latitude:34.491944,longitude:-82.625278},{facility_name:"GAFFNEY/BROAD RVR",city:"Gaffney","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:465,amount_of_biosolids_managed_land_applied:465,latitude:35.0661,longitude:-81.5539},{facility_name:"ORANGEBURG WWTF",city:"Orangeburg","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:465,amount_of_biosolids_managed_land_applied:464.1,latitude:33.437157,longitude:-80.849191},{facility_name:"CITY OF BOWIE STP",city:"Bowie","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:464,amount_of_biosolids_managed_land_applied:466.44,latitude:38.993368,longitude:-76.719964},{facility_name:"PECAN BRANCH WWTP",city:"Georgetown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:464,amount_of_biosolids_managed_land_applied:0,latitude:30.672944,longitude:-97.60975},{facility_name:"STONY POINT WWTP",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:462,amount_of_biosolids_managed_land_applied:0,latitude:30.129492,longitude:-97.571589},{facility_name:"PONDEROSA JOIN POWERS AGENCY REGIONAL WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:462,amount_of_biosolids_managed_land_applied:416.76,latitude:30.027543,longitude:-95.466487},{facility_name:"SOUTH MONMOUTH REGIONAL STP",city:"W Belmar","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:462,amount_of_biosolids_managed_land_applied:0,latitude:40.16883,longitude:-74.04492},{facility_name:"IL AMERICAN WTR CO-SANTA FE",city:"Lemont","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:461,amount_of_biosolids_managed_land_applied:460.68,latitude:41.686667,longitude:-88.021667},{facility_name:"DOVER TWP. SEWAGE TMT. PLANT",city:"York County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:461,amount_of_biosolids_managed_land_applied:460.61,latitude:40.01431,longitude:-76.80278},{facility_name:"CITY OF BRECKENRIDGE WWTF",city:"Breckenridge","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:460,amount_of_biosolids_managed_land_applied:0,latitude:32.7715,longitude:-98.896444},{facility_name:"LICK CREEK WWTP",city:"College Station","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:459,amount_of_biosolids_managed_land_applied:0,latitude:30.571138,longitude:-96.217745},{facility_name:"LEESBURG/TURNPIKE WWTF",city:"Leesburg","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:458,amount_of_biosolids_managed_land_applied:457.8,latitude:28.75529,longitude:-81.9286},{facility_name:"CAMBRIDGE WWTP",city:"Cambridge","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:458,amount_of_biosolids_managed_land_applied:0,latitude:38.564167,longitude:-76.057222},{facility_name:"BROADWAY, TOWN OF REGIONAL WWTF",city:"Broadway","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:457,amount_of_biosolids_managed_land_applied:416,latitude:38.60377649,longitude:-78.80755236},{facility_name:"CONROE CENTRAL WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:457,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"CITY OF DOTHAN",city:"Dothan","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:456,amount_of_biosolids_managed_land_applied:0,latitude:31.2542,longitude:-85.3722},{facility_name:"DINUBA WRF",city:"Dinuba","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:456,amount_of_biosolids_managed_land_applied:456.03,latitude:36.54579,longitude:-119.39122},{facility_name:"CITY OF SPRINGTOWN WWTP",city:"Springtown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:456,amount_of_biosolids_managed_land_applied:0,latitude:32.96925,longitude:-97.655222},{facility_name:"DURANGO CITY OF",city:"Durango","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:456,amount_of_biosolids_managed_land_applied:0,latitude:37.27387,longitude:-107.87924},{facility_name:"BROWNSBURG WWTP",city:"Brownsburg","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:455,amount_of_biosolids_managed_land_applied:454.69,latitude:39.844268,longitude:-86.397526},{facility_name:"IMPERIAL VALLEY WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:454,amount_of_biosolids_managed_land_applied:0,latitude:29.92777,longitude:-95.39374},{facility_name:"MAIN PLANT WWTF",city:"Port Neches","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:454,amount_of_biosolids_managed_land_applied:0,latitude:29.954319,longitude:-93.942518},{facility_name:"LANCASTER/CATAWBA RIVER",city:"Lancaster","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:452,amount_of_biosolids_managed_land_applied:350,latitude:34.845,longitude:-80.857222},{facility_name:"CITY OF BUDA WWTF",city:"Buda","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:452,amount_of_biosolids_managed_land_applied:0,latitude:30.056861,longitude:-97.835833},{facility_name:"BATAVIA STP, CITY OF",city:"Batavia","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:451,amount_of_biosolids_managed_land_applied:0,latitude:41.8471,longitude:-88.30816},{facility_name:"CITY OF ALAMOGORDO",city:"Otero","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:451,amount_of_biosolids_managed_land_applied:0,latitude:32.843323,longitude:-105.997789},{facility_name:"BATESVILLE, CITY OF",city:"Batesville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:450,amount_of_biosolids_managed_land_applied:0,latitude:35.7525,longitude:-91.6311},{facility_name:"MT VERNON WWTP",city:"Mount Vernon","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:449,amount_of_biosolids_managed_land_applied:449,latitude:48.411314,longitude:-122.34905},{facility_name:"NEW ULM",city:"New Ulm","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:448,amount_of_biosolids_managed_land_applied:448,latitude:44.287037,longitude:-94.43237},{facility_name:"HARRIS COUNTY FWSD 61 WWTP 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:447,amount_of_biosolids_managed_land_applied:0,latitude:29.925236,longitude:-95.609966},{facility_name:"CITY OF GAINESVILLE WWTP",city:"Gainesville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:446,amount_of_biosolids_managed_land_applied:154.183,latitude:33.64205,longitude:-97.14799},{facility_name:"VAN BUREN, CITY OF-NORTH WWTP",city:"Van Buren","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:445,amount_of_biosolids_managed_land_applied:0,latitude:35.469932,longitude:-94.396529},{facility_name:"SHELBYVILLE WATER RESOURCE RECOVERY FACILITY",city:"Shelbyville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:444,amount_of_biosolids_managed_land_applied:444.28,latitude:39.52444,longitude:-85.77874},{facility_name:"CHEROKEE METRO DISTRICT",city:"Colorado Springs","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:444,amount_of_biosolids_managed_land_applied:0,latitude:38.857223,longitude:-104.712571},{facility_name:"HARNETT COUNTY",city:"Lillington","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:444,amount_of_biosolids_managed_land_applied:0,latitude:35.396991,longitude:-78.801537},{facility_name:"GRAFTON WASTEWATER TREATMENT",city:"So. Grafton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:443,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"ADDISON SOUTH-A.J. LAROCCA STP",city:"Addison","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:443,amount_of_biosolids_managed_land_applied:443.48,latitude:41.920908,longitude:-87.975131},{facility_name:"MOAB-CITY",city:"Moab","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:443,amount_of_biosolids_managed_land_applied:0,latitude:38.57327,longitude:-109.54796},{facility_name:"CENTRAL DISTRICT WWTP",city:"Baytown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:442,amount_of_biosolids_managed_land_applied:0,latitude:29.72158,longitude:-94.986768},{facility_name:"QUAIL VALLEY UD WWTP",city:"Missouri City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:442,amount_of_biosolids_managed_land_applied:409.7,latitude:29.570083,longitude:-95.552278},{facility_name:"RIDAUGHT LANDING WWTF",city:"Clay Count","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:440,amount_of_biosolids_managed_land_applied:440.4,latitude:30.096729,longitude:-81.791589},{facility_name:"WINNIPESAUKEE RIVER BASIN",city:"Franklin","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:440,amount_of_biosolids_managed_land_applied:440.01,latitude:43.44069,longitude:-71.64876},{facility_name:"TOWN OF SILER CITY",city:"Siler City","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:440,amount_of_biosolids_managed_land_applied:147,latitude:35.760856,longitude:-79.462201},{facility_name:"MILLERSVILLE BORO",city:"Lancaster County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:439,amount_of_biosolids_managed_land_applied:439,latitude:40.00728,longitude:-76.35921},{facility_name:"AMESBURY W W T P",city:"Amesbury","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:439,amount_of_biosolids_managed_land_applied:0,latitude:42.840133,longitude:-70.926486},{facility_name:"SOUTH KUEHLER WWTF",city:"New Braunfels","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:438,amount_of_biosolids_managed_land_applied:0,latitude:29.687167,longitude:-98.0975},{facility_name:"PRASA CAYEY RWWTP",city:"Bo.Rincon Of Cidra","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:437,amount_of_biosolids_managed_land_applied:0,latitude:18.157548,longitude:-66.157999},{facility_name:"KINGS CREEK WWTF",city:"Terrell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:437,amount_of_biosolids_managed_land_applied:0,latitude:32.688125,longitude:-96.27602},{facility_name:"MEDIA STP",city:"Media","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:435,amount_of_biosolids_managed_land_applied:230,latitude:39.9136,longitude:-75.40005},{facility_name:"SAN GABRIEL WWTP",city:"Georgetown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:435,amount_of_biosolids_managed_land_applied:0,latitude:30.649536,longitude:-97.662527},{facility_name:"NEW LENOX STP #1, VILLAGE OF",city:"New Lenox","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:435,amount_of_biosolids_managed_land_applied:211.88,latitude:41.5144,longitude:-87.96643},{facility_name:"TOWN OF CLAYTON",city:"Clayton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:434,amount_of_biosolids_managed_land_applied:434.28,latitude:35.6413,longitude:-78.4644},{facility_name:"JACKSON STREET WWTP",city:"Orange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:434,amount_of_biosolids_managed_land_applied:0,latitude:30.086068,longitude:-93.74158},{facility_name:"TOOELE CITY",city:"Tooele","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:434,amount_of_biosolids_managed_land_applied:0,latitude:40.594381,longitude:-112.328612},{facility_name:"CITY OF BURLINGTON",city:"Burlington","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:434,amount_of_biosolids_managed_land_applied:434.54,latitude:40.81104,longitude:-91.10353},{facility_name:"ONEIDA (C)",city:"Oneida","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:432,amount_of_biosolids_managed_land_applied:0,latitude:43.09659,longitude:-75.65279},{facility_name:"CHALFONT NEW BRITAIN JOINT SEW",city:"Doylestown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:430,amount_of_biosolids_managed_land_applied:429.6,latitude:40.29013,longitude:-75.17797},{facility_name:"BRISTOL TOWN HALL",city:"Bristol","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:430,amount_of_biosolids_managed_land_applied:0,latitude:41.66953,longitude:-71.27604},{facility_name:"DOSHIER FARM WWTP",city:"Temple","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:429,amount_of_biosolids_managed_land_applied:0,latitude:31.078267,longitude:-97.318673},{facility_name:"HOOD RIVER, CITY OF",city:"Hood River","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:428,amount_of_biosolids_managed_land_applied:378,latitude:45.714008,longitude:-121.520296},{facility_name:"PRASA - JAYUYA (NEW) WWTP",city:"Jayuya","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:428,amount_of_biosolids_managed_land_applied:0,latitude:18.21736752,longitude:-66.59780219},{facility_name:"GENEVA STP, CITY OF",city:"Geneva","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:428,amount_of_biosolids_managed_land_applied:623,latitude:41.88247,longitude:-88.299255},{facility_name:"WILLINGBORO WATER PCF",city:"Willingboro","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:427,amount_of_biosolids_managed_land_applied:0,latitude:40.027628,longitude:-74.91935},{facility_name:"MONTGOMERY TWP MUNI SEW AUTH MONTGOMERY CNTY",city:"Montgomeryville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:425,amount_of_biosolids_managed_land_applied:0,latitude:40.23682,longitude:-75.22316},{facility_name:"MONTROSE CITY OF",city:"Montrose","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:425,amount_of_biosolids_managed_land_applied:0,latitude:38.477985,longitude:-107.8759501},{facility_name:"SUGAR LAND SOUTH WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:425,amount_of_biosolids_managed_land_applied:0,latitude:29.555,longitude:-95.593611},{facility_name:"PALMER W P C F",city:"Three Rivers","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:424,amount_of_biosolids_managed_land_applied:0,latitude:42.18579,longitude:-72.36317},{facility_name:"SOUTH SANTA ROSA UTILITIES SYSTEM WWTF",city:"Gulf Breeze","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:422,amount_of_biosolids_managed_land_applied:422.41,latitude:30.37886,longitude:-87.085731},{facility_name:"MARTIN COUNTY UTILITIES NORTH WWTF",city:"Stuart","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:422,amount_of_biosolids_managed_land_applied:0,latitude:27.19243852,longitude:-80.25},{facility_name:"ANSONIA WPCA",city:"Ansonia","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:419,amount_of_biosolids_managed_land_applied:0,latitude:41.34282,longitude:-73.07861},{facility_name:"NEW WINDSOR (T)",city:"New Windsor","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:419,amount_of_biosolids_managed_land_applied:0,latitude:41.48316,longitude:-74.06277},{facility_name:"CITY OF PARIS WWTF",city:"Paris","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:418,amount_of_biosolids_managed_land_applied:370.36,latitude:33.661353,longitude:-95.556318},{facility_name:"CANBY, CITY OF",city:"Canby","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:417,amount_of_biosolids_managed_land_applied:0,latitude:45.285123,longitude:-122.677693},{facility_name:"BEREA MUNICIPAL UTILITIES WWTP",city:"Berea","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:417,amount_of_biosolids_managed_land_applied:0,latitude:37.608496,longitude:-84.287074},{facility_name:"BRIGHAM CITY CORPORATION",city:"Brigham City","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:417,amount_of_biosolids_managed_land_applied:417,latitude:41.53227,longitude:-112.02585},{facility_name:"PLAQUEMINES PAR (BURAS STP)",city:"Buras","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:417,amount_of_biosolids_managed_land_applied:0,latitude:29.34155,longitude:-89.51669},{facility_name:"STILLHOUSE BRANCH WWTP",city:"Gatesville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:417,amount_of_biosolids_managed_land_applied:416.64,latitude:31.445415,longitude:-97.750189},{facility_name:"GOLETA WWTP",city:"Goleta","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:416,amount_of_biosolids_managed_land_applied:0,latitude:34.424611,longitude:-119.836083},{facility_name:"TOWN OF FOREST CITY",city:"Forest City","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:415,amount_of_biosolids_managed_land_applied:415.18,latitude:35.327244,longitude:-81.841614},{facility_name:"EASTHAMPTON W W T P",city:"Easthampton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:415,amount_of_biosolids_managed_land_applied:0,latitude:42.277698,longitude:-72.648897},{facility_name:"CITY OF FULTON",city:"Fulton","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:414,amount_of_biosolids_managed_land_applied:368,latitude:38.84825006,longitude:-91.97285825},{facility_name:"NORTHBRIDGE WWTP",city:"Northbridge","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:414,amount_of_biosolids_managed_land_applied:0,latitude:42.1125,longitude:-71.6359},{facility_name:"BERLIN P C F",city:"Berlin","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:414,amount_of_biosolids_managed_land_applied:0,latitude:44.455764,longitude:-71.184217},{facility_name:"GLENDALE HEIGHTS, VILLAGE OF",city:"Glendale Heights","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:414,amount_of_biosolids_managed_land_applied:414.09,latitude:41.91104,longitude:-88.05452},{facility_name:"OXFORD WWTP",city:"Oxford","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:414,amount_of_biosolids_managed_land_applied:414,latitude:36.2772,longitude:-78.5911},{facility_name:"ROCK SPRINGS, CITY OF",city:"Rock Springs","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:413,amount_of_biosolids_managed_land_applied:370,latitude:41.58569,longitude:-109.21899},{facility_name:"CRESTVIEW WWTP",city:"Crestview","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:413,amount_of_biosolids_managed_land_applied:412.62,latitude:30.73621,longitude:-86.59625},{facility_name:"CITY OF DANVILLE NORTHSIDE WWT",city:"Danville","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:412,amount_of_biosolids_managed_land_applied:412,latitude:36.564695,longitude:-79.360352},{facility_name:"CITY OF MONETT",city:"Monett","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:412,amount_of_biosolids_managed_land_applied:412,latitude:36.907831,longitude:-93.896375},{facility_name:"DELANO WWTP",city:"Delano","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:411,amount_of_biosolids_managed_land_applied:411,latitude:35.768423,longitude:-119.303111},{facility_name:"BUTTERWORTH WATER POL CON UTIL",city:"Morristown","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:410,amount_of_biosolids_managed_land_applied:0,latitude:40.812433,longitude:-74.494711},{facility_name:"FRANKLIN WWTP, CITY OF",city:"Franklin","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:410,amount_of_biosolids_managed_land_applied:410.01,latitude:39.468389,longitude:-86.040694},{facility_name:"CITY OF WASHINGTON",city:"Washington","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:410,amount_of_biosolids_managed_land_applied:409.7,latitude:38.540277,longitude:-90.973607},{facility_name:"CITY OF DUMAS WWTP",city:"Dumas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:410,amount_of_biosolids_managed_land_applied:0,latitude:35.841388,longitude:-101.962222},{facility_name:"FORT MYERS BEACH STP",city:"Fort Myers","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:409,amount_of_biosolids_managed_land_applied:0,latitude:26.491658,longitude:-81.93343},{facility_name:"CITY OF SEAFORD WWTF",city:"Seaford","state_postal;":"DE",state:"Del.",amount_of_biosolids_generated:407,amount_of_biosolids_managed_land_applied:0,latitude:38.6345,longitude:-75.617139},{facility_name:"OTTAWA STP, CITY OF",city:"Ottawa","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:407,amount_of_biosolids_managed_land_applied:0,latitude:41.33908,longitude:-88.847418},{facility_name:"HANOVER SEWERAGE AUTHORITY",city:"Whippany","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:406,amount_of_biosolids_managed_land_applied:0,latitude:40.822285,longitude:-74.389945},{facility_name:"MAPLE SHADE TWP PARK AVE POTW",city:"Maple Shade","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:406,amount_of_biosolids_managed_land_applied:405.62,latitude:39.958539,longitude:-75.014525},{facility_name:"CONNERSVILLE WWTP",city:"Connersville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:405,amount_of_biosolids_managed_land_applied:297.9,latitude:39.62778,longitude:-85.14473},{facility_name:"SHELTON STP",city:"Shelton","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:405,amount_of_biosolids_managed_land_applied:0,latitude:47.205798,longitude:-123.078032},{facility_name:"CITY OF DOUGLAS",city:"Douglas","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:404,amount_of_biosolids_managed_land_applied:0,latitude:31.500861,longitude:-82.823889},{facility_name:"CITY OF GASTONIA",city:"Gastonia","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:403,amount_of_biosolids_managed_land_applied:403.2,latitude:35.166111,longitude:-81.199444},{facility_name:"NORTHGATE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:403,amount_of_biosolids_managed_land_applied:0,latitude:29.944188,longitude:-95.399782},{facility_name:"KLAMATH FALLS WWTP - SPRING ST",city:"Klamath Falls","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:403,amount_of_biosolids_managed_land_applied:403,latitude:42.216333,longitude:-121.776189},{facility_name:"WATER RECLAMATION WWTF",city:"Cedar Park","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:402,amount_of_biosolids_managed_land_applied:0,latitude:30.495215,longitude:-97.806697},{facility_name:"ESSEX JUNCTION WASTEWATER TREATMENT FACILITY",city:"Essex Junction","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:400,amount_of_biosolids_managed_land_applied:124.87,latitude:44.49053,longitude:-73.11119},{facility_name:"KINGSLAND MUD WWTP",city:"Kingsland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:400,amount_of_biosolids_managed_land_applied:0,latitude:30.65755,longitude:-98.43413},{facility_name:"SULPHUR,CITY OF-WWTP",city:"Sulphur","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:400,amount_of_biosolids_managed_land_applied:0,latitude:30.187222,longitude:-93.305194},{facility_name:"OAK HOLLOW WWTP",city:"Van Vleck","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:400,amount_of_biosolids_managed_land_applied:0,latitude:29.011917,longitude:-95.882444},{facility_name:"CENTRAL MUD 1 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:400,amount_of_biosolids_managed_land_applied:399.51,latitude:29.728,longitude:-95.761611},{facility_name:"BELLEFONTE BOROUGH",city:"Bellefonte","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:399,amount_of_biosolids_managed_land_applied:398.21,latitude:40.92269,longitude:-77.78375},{facility_name:"MIDDLEBOROUGH WWTP - DEPT OF PUBLIC WORKS",city:"Middleborough","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:398,amount_of_biosolids_managed_land_applied:0,latitude:41.89006,longitude:-70.90384},{facility_name:"PULLMAN WWTP",city:"Pullman","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:398,amount_of_biosolids_managed_land_applied:385,latitude:46.738294,longitude:-117.189612},{facility_name:"COCOA, CITY OF - COCOA WRF",city:"Cocoa","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:398,amount_of_biosolids_managed_land_applied:397.59,latitude:28.361816,longitude:-80.733983},{facility_name:"SCOTTSBLUFF WWTF",city:"Scottsbluff","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:396,amount_of_biosolids_managed_land_applied:64.23,latitude:41.8378,longitude:-103.6067},{facility_name:"PRINCESS ANNE WWTP",city:"Princess Anne","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:394,amount_of_biosolids_managed_land_applied:0,latitude:38.196706,longitude:-75.696581},{facility_name:"REDDING CLEAR CREEK WWTP",city:"Redding","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:393,amount_of_biosolids_managed_land_applied:0,latitude:40.57366511,longitude:-122.3530771},{facility_name:"DERBY, CITY OF",city:"Derby","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:393,amount_of_biosolids_managed_land_applied:392.99,latitude:37.54914,longitude:-97.24803},{facility_name:"CITY OF COVINGTON WWTF",city:"Covington","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:393,amount_of_biosolids_managed_land_applied:0,latitude:33.58613904,longitude:-83.84484363},{facility_name:"PLAYERS CLUB SOUTH WWTF",city:"Ponte Vedra Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:393,amount_of_biosolids_managed_land_applied:392.67,latitude:30.186781,longitude:-81.393683},{facility_name:"LARAMIE WASTEWTR TRETMNT PLANT",city:"Laramie","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:391,amount_of_biosolids_managed_land_applied:391,latitude:41.3381,longitude:-105.599},{facility_name:"BOAZ WATER & SEWER BOARD",city:"Boaz","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:391,amount_of_biosolids_managed_land_applied:391,latitude:34.1858,longitude:-86.1847},{facility_name:"BECKLEY, CITY OF",city:"Beckley","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:390,amount_of_biosolids_managed_land_applied:0,latitude:37.771159,longitude:-81.15421},{facility_name:"KEWANEE STP",city:"Kewanee","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:390,amount_of_biosolids_managed_land_applied:390.3,latitude:41.244408,longitude:-89.903251},{facility_name:"OJRSA/CONEROSS CREEK WWTP",city:"Seneca","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:390,amount_of_biosolids_managed_land_applied:0,latitude:34.6475,longitude:-82.99},{facility_name:"PORTER MUD WWTP",city:"Porter","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:390,amount_of_biosolids_managed_land_applied:0,latitude:30.073528,longitude:-95.239361},{facility_name:"COCOA BEACH, CITY OF",city:"Cocoa Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:389,amount_of_biosolids_managed_land_applied:0,latitude:28.316083,longitude:-80.633917},{facility_name:"CITY OF HENDERSON",city:"Henderson","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:388,amount_of_biosolids_managed_land_applied:388.45,latitude:36.349349,longitude:-78.411438},{facility_name:"TURKEY CREEK WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:388,amount_of_biosolids_managed_land_applied:0,latitude:29.767751,longitude:-95.620954},{facility_name:"NORTH PORT CITY OF WWTP",city:"North Port","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:388,amount_of_biosolids_managed_land_applied:0,latitude:27.047464,longitude:-82.245222},{facility_name:"SLIDELL, CITY OF (PLANT #2)",city:"Slidell","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:388,amount_of_biosolids_managed_land_applied:388,latitude:30.26257,longitude:-89.76963},{facility_name:"WHITE OAK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:387,amount_of_biosolids_managed_land_applied:0,latitude:29.87899,longitude:-95.53616},{facility_name:"FOREST CREEK WWTP",city:"Sugarland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:387,amount_of_biosolids_managed_land_applied:0,latitude:30.508806,longitude:-97.583889},{facility_name:"IPSWICH W W T F",city:"Ipswich","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:386,amount_of_biosolids_managed_land_applied:386,latitude:42.699516,longitude:-70.870225},{facility_name:"LEESBURG, CITY OF",city:"Leesburg","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:386,amount_of_biosolids_managed_land_applied:385.72,latitude:28.816222,longitude:-81.87225},{facility_name:"NORTHEAST PUBLIC SEWER DISTRICT",city:"Fenton","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:385,amount_of_biosolids_managed_land_applied:385.109,latitude:38.49885,longitude:-90.46305},{facility_name:"WEST MELBOURNE/RAY BULLARD",city:"West Melbourne","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:384,amount_of_biosolids_managed_land_applied:0,latitude:28.07159,longitude:-80.64462},{facility_name:"BERWICK MUN AUTH",city:"Berwick","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:384,amount_of_biosolids_managed_land_applied:0,latitude:41.04243,longitude:-76.26222},{facility_name:"REED CREEK WPCP",city:"Martinez","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:384,amount_of_biosolids_managed_land_applied:384.14,latitude:33.540139,longitude:-82.051444},{facility_name:"OLIVEHURST WWTP",city:"Olivehurst","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:383,amount_of_biosolids_managed_land_applied:0,latitude:39.07707992,longitude:-121.5589546},{facility_name:"CORVALLIS, CITY OF",city:"Corvallis","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:383,amount_of_biosolids_managed_land_applied:383,latitude:44.576071,longitude:-123.254392},{facility_name:"WILSONVILLE, CITY OF",city:"Wilsonville","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:383,amount_of_biosolids_managed_land_applied:335.17,latitude:45.294943,longitude:-122.771814},{facility_name:"NORTHFIELD WWTF",city:"Northfield","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:382,amount_of_biosolids_managed_land_applied:0,latitude:44.16312,longitude:-72.657191},{facility_name:"PRASA CAROLINA RWWTP",city:"San Juan","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:381,amount_of_biosolids_managed_land_applied:0,latitude:18.4064087,longitude:-66.0640039},{facility_name:"LOVES COUNTRY STORE 250",city:"Oklahoma City","state_postal;":"OK",state:"Okla.",amount_of_biosolids_generated:381,amount_of_biosolids_managed_land_applied:0,latitude:35.18965,longitude:-102.01109},{facility_name:"HENRY COUNTY WATER AUTHORITY (INDIAN CREEK WRF)",city:"Locust Grove","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:381,amount_of_biosolids_managed_land_applied:173.6,latitude:33.326382,longitude:-84.132934},{facility_name:"WINDSOR WWTF",city:"Windsor","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:381,amount_of_biosolids_managed_land_applied:376.82,latitude:38.54651776,longitude:-122.8107056},{facility_name:"MCCANDLESS TOWNSHIP SANITARY A",city:"Pittsburgh","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:380,amount_of_biosolids_managed_land_applied:0,latitude:40.578627,longitude:-80.031317},{facility_name:"NORRISTOWN BOROUGH WASTEWATER",city:"Norristown","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:380,amount_of_biosolids_managed_land_applied:0,latitude:40.10997,longitude:-75.33692},{facility_name:"MEADVILLE",city:"Meadville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:380,amount_of_biosolids_managed_land_applied:0,latitude:41.625842,longitude:-80.157544},{facility_name:"RICHMOND REGIONAL WWTP",city:"Richmond","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:379,amount_of_biosolids_managed_land_applied:379.46,latitude:29.569103,longitude:-95.754282},{facility_name:"WINDSOR TOWN OF",city:"Windsor","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:379,amount_of_biosolids_managed_land_applied:275.97,latitude:40.47852,longitude:-104.90133},{facility_name:"HARRISON CO UTILITY AUTHORITY, EAST BILOXI POTW",city:"Biloxi","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:379,amount_of_biosolids_managed_land_applied:379,latitude:30.405833,longitude:-88.897139},{facility_name:"HURON, CITY OF",city:"Huron, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:379,amount_of_biosolids_managed_land_applied:0,latitude:44.360235,longitude:-98.15547},{facility_name:"MIDWAY SEWER DISTRICT WWTP",city:"Kent","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:379,amount_of_biosolids_managed_land_applied:378.99,latitude:47.411213,longitude:-122.318256},{facility_name:"REDDING STILLWATER WWTP",city:"Anderson","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:378,amount_of_biosolids_managed_land_applied:0,latitude:40.45970741,longitude:-122.2871596},{facility_name:"CITY OF KINSTON",city:"Kinston","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:378,amount_of_biosolids_managed_land_applied:378,latitude:35.28924,longitude:-77.51528},{facility_name:"SOUTH SAN LUIS OBISPO WWTP",city:"Oceano","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:378,amount_of_biosolids_managed_land_applied:377.84,latitude:35.06050098,longitude:-120.6027},{facility_name:"LAS GALLINAS VALLEY STP",city:"San Rafael","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:376,amount_of_biosolids_managed_land_applied:238.96,latitude:38.025278,longitude:-122.52},{facility_name:"FAIRMONT WWTP, CITY OF",city:"Fairmont","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:376,amount_of_biosolids_managed_land_applied:350.45,latitude:39.494432,longitude:-80.121973},{facility_name:"VICKSBURG POTW",city:"Vicksburg","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:375,amount_of_biosolids_managed_land_applied:375.23,latitude:32.29563,longitude:-90.89917},{facility_name:"COOS BAY STP NO. 1",city:"Coos Bay","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:375,amount_of_biosolids_managed_land_applied:326.4,latitude:43.378247,longitude:-124.219065},{facility_name:"DAPHNE UB CITY OF UTILITIES BD",city:"Daphne","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:375,amount_of_biosolids_managed_land_applied:0,latitude:30.651203,longitude:-87.911622},{facility_name:"LCDPW - MILL CREEK WRF",city:"Old Mill Creek","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:373,amount_of_biosolids_managed_land_applied:373,latitude:42.413716,longitude:-87.958671},{facility_name:"SOCWA 3A WWTP",city:"Laguna Niguel","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:371,amount_of_biosolids_managed_land_applied:0,latitude:33.57669714,longitude:-117.7244287},{facility_name:"WARRENTON STP",city:"Warrenton","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:370,amount_of_biosolids_managed_land_applied:280.21,latitude:38.71584,longitude:-77.81612},{facility_name:"LAWRENCEBURG STP",city:"Lawrenceburg","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:370,amount_of_biosolids_managed_land_applied:0,latitude:38.043333,longitude:-84.9225},{facility_name:"NEW CANAAN STP",city:"New Canaan","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:369,amount_of_biosolids_managed_land_applied:0,latitude:41.148147,longitude:-73.492943},{facility_name:"SUFFERN (V)",city:"Suffern","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:369,amount_of_biosolids_managed_land_applied:0,latitude:41.11409,longitude:-74.14964},{facility_name:"CHOCOLATE BAYOU WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:369,amount_of_biosolids_managed_land_applied:0,latitude:29.6458,longitude:-95.338291},{facility_name:"BROOKINGS MUNICIPAL UTILITIES",city:"Brookings, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:368,amount_of_biosolids_managed_land_applied:296.55,latitude:44.244351,longitude:-96.806507},{facility_name:"FALLSBURG (T)",city:"South Fallsburg","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:368,amount_of_biosolids_managed_land_applied:0,latitude:41.70866881,longitude:-74.62630095},{facility_name:"TREMONTON CITY",city:"Tremonton","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:368,amount_of_biosolids_managed_land_applied:744.5,latitude:41.699093,longitude:-112.160814},{facility_name:"LOWER ALLEN TOWNSHIP AUTHORITY",city:"New Cumberland","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:367,amount_of_biosolids_managed_land_applied:367,latitude:40.226111,longitude:-76.858889},{facility_name:"HARRIS COUNTY WCID 111 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:367,amount_of_biosolids_managed_land_applied:0,latitude:29.687771,longitude:-95.302041},{facility_name:"WAYNESBORO DEPT OF UTILITIES-S",city:"Waynesboro","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:366,amount_of_biosolids_managed_land_applied:0,latitude:38.080536,longitude:-78.874625},{facility_name:"LOUISVILLE CITY OF",city:"Louisville","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:366,amount_of_biosolids_managed_land_applied:0,latitude:39.97742,longitude:-105.13212},{facility_name:"LITITZ SEWAGE AUTHORITY",city:"Lititz-Lancaster County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:366,amount_of_biosolids_managed_land_applied:366.22,latitude:40.15321,longitude:-76.28419},{facility_name:"MOON TOWNSHIP MUNICIPAL AUTHOR",city:"Corapolis","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:365,amount_of_biosolids_managed_land_applied:0,latitude:40.49659,longitude:-80.20141},{facility_name:"CITY OF AMERICUS",city:"Americus","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:364,amount_of_biosolids_managed_land_applied:0,latitude:32.037472,longitude:-84.231667},{facility_name:"UXBRIDGE W W T F",city:"Uxbridge","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:364,amount_of_biosolids_managed_land_applied:0,latitude:42.03692,longitude:-71.61378},{facility_name:"N LAREDO WWTP",city:"Laredo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:362,amount_of_biosolids_managed_land_applied:0,latitude:27.596667,longitude:-99.468639},{facility_name:"KINGSTON (C)",city:"Kingston","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:362,amount_of_biosolids_managed_land_applied:0,latitude:41.92672,longitude:-73.9965},{facility_name:"LEBANON, CITY OF",city:"Lebanon","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:361,amount_of_biosolids_managed_land_applied:361,latitude:44.549989,longitude:-122.897701},{facility_name:"GSW&SA/CONWAY WWTP",city:"Conway","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:361,amount_of_biosolids_managed_land_applied:361,latitude:33.819393,longitude:-79.065931},{facility_name:"BRAWLEY WWTP",city:"Brawley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:361,amount_of_biosolids_managed_land_applied:0,latitude:32.95636,longitude:-115.525392},{facility_name:"EUREKA ELK RIVER WWTP",city:"Eureka","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:360,amount_of_biosolids_managed_land_applied:360.1,latitude:40.79477338,longitude:-124.1521118},{facility_name:"HUMACAO MONOFILL",city:"Humacao","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:360,amount_of_biosolids_managed_land_applied:0,latitude:18.15672008,longitude:-65.81883351},{facility_name:"EAST CEDAR CREEK FWSD NORTH WWTP",city:"Maybank","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:359,amount_of_biosolids_managed_land_applied:0,latitude:32.320461,longitude:-96.129972},{facility_name:"HUTTO SOUTH WWTP",city:"Hutto","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:359,amount_of_biosolids_managed_land_applied:0,latitude:30.50267,longitude:-97.52372},{facility_name:"BULL HIDE CREEK WWTP",city:"Waco","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:358,amount_of_biosolids_managed_land_applied:0,latitude:31.40494,longitude:-97.18005},{facility_name:"CITY OF WILLIS WWTP",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:357,amount_of_biosolids_managed_land_applied:0,latitude:30.395797,longitude:-95.474353},{facility_name:"JEFFERSON COUNTY COMMISSION ENVIRONMENTAL SERVICES DEPARTMENT",city:"Birmingham","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:357,amount_of_biosolids_managed_land_applied:357,latitude:33.61976,longitude:-86.60356},{facility_name:"RIDGEWOOD VILLAGE OF WPCP",city:"Ridgewood","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:356,amount_of_biosolids_managed_land_applied:356.41,latitude:40.962348,longitude:-74.105698},{facility_name:"CINNAMINSON SA",city:"Cinnaminson","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:356,amount_of_biosolids_managed_land_applied:215.35,latitude:40.01453,longitude:-75.00622},{facility_name:"FLOYD BRANCH REGIONAL WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:0,latitude:32.937123,longitude:-96.738728},{facility_name:"SPEEDWAY WWTP",city:"Speedway","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:0,latitude:39.770694,longitude:-86.232306},{facility_name:"EAGLE MOUNTAIN WWTP",city:"Eagle Mountain","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:0,latitude:40.35472,longitude:-111.99935},{facility_name:"NV REGIONAL WASTEWATER TREATMENT FACILITY",city:"Niceville","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:354.66,latitude:30.53133,longitude:-86.49341},{facility_name:"ANDERSON/GENEROSTEE CREEK",city:"Anderson","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:354.65,latitude:34.4725,longitude:-82.723611},{facility_name:"MONROE STP",city:"Monroe","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:354.64,latitude:47.848656,longitude:-121.976137},{facility_name:"CASEYVILLE TOWNSHIP",city:"O'Fallon","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:337.8,latitude:38.59744,longitude:-89.96216},{facility_name:"CITY OF GRANBURY WWTP",city:"Granbury","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:355,amount_of_biosolids_managed_land_applied:0,latitude:32.417639,longitude:-97.775307},{facility_name:"SUMNER STP",city:"Sumner","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:354,amount_of_biosolids_managed_land_applied:493.1,latitude:47.200001,longitude:-122.255798},{facility_name:"UNIFIED GOVERNMENT OF ATHENS-CLARKE CO (CEDAR CR)",city:"Athens","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:354,amount_of_biosolids_managed_land_applied:353.64,latitude:33.872306,longitude:-83.336139},{facility_name:"SEYMOUR WPCF, TOWN OF",city:"Seymour","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:354,amount_of_biosolids_managed_land_applied:0,latitude:41.367783,longitude:-73.088606},{facility_name:"HARRISON BROOK STP",city:"Bernards Twp","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:353,amount_of_biosolids_managed_land_applied:0,latitude:40.6561,longitude:-74.5744},{facility_name:"WINTER HAVEN WWTP #2",city:"Winter Haven","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:353,amount_of_biosolids_managed_land_applied:0,latitude:27.951798,longitude:-81.7091},{facility_name:"CITY OF NIXA",city:"Nixa","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:353,amount_of_biosolids_managed_land_applied:379.2,latitude:37.037066,longitude:-93.317792},{facility_name:"WOODSTOCK NORTH STP",city:"Woodstock","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:352,amount_of_biosolids_managed_land_applied:387.21,latitude:42.33771,longitude:-88.44802},{facility_name:"COACHELLA AVENUE 54 WWTP",city:"Coachella","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:352,amount_of_biosolids_managed_land_applied:0,latitude:33.685745,longitude:-116.1675911},{facility_name:"TOWN OF CAROLINA BEACH",city:"Carolina Beach","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:352,amount_of_biosolids_managed_land_applied:0,latitude:34.032138,longitude:-77.912472},{facility_name:"BURLINGTON WWTP",city:"Burlington","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:352,amount_of_biosolids_managed_land_applied:352,latitude:48.46748,longitude:-122.312867},{facility_name:"CARPINTERIA WWTP",city:"Carpinteria","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:350,amount_of_biosolids_managed_land_applied:0,latitude:34.393168,longitude:-119.51585},{facility_name:"TOWN OF TARBORO",city:"Tarboro","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:350,amount_of_biosolids_managed_land_applied:349.82,latitude:35.8832,longitude:-77.5383},{facility_name:"WOODCLIFF SEWERAGE TREATMENT",city:"North Bergen","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:350,amount_of_biosolids_managed_land_applied:0,latitude:40.7916,longitude:-73.9986},{facility_name:"MARYLAND CORRECTIONAL INSTI",city:"Hagerstown","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:349,amount_of_biosolids_managed_land_applied:347.39,latitude:39.555833,longitude:-77.708889},{facility_name:"WINDERMERE WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:347,amount_of_biosolids_managed_land_applied:0,latitude:30.456861,longitude:-97.640833},{facility_name:"BURLINGTON CITY STP",city:"Burlington","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:347,amount_of_biosolids_managed_land_applied:346.51,latitude:40.079611,longitude:-74.871943},{facility_name:"CITY OF CARTHAGE",city:"Carthage","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:347,amount_of_biosolids_managed_land_applied:346.5,latitude:37.176495,longitude:-94.309791},{facility_name:"SILVERTHORNE DILLON JOINT SEWER AUTHORITY",city:"Silverthorne","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:346,amount_of_biosolids_managed_land_applied:55.76,latitude:39.6540115,longitude:-106.0924425},{facility_name:"PERU UTILITIES WWTP",city:"Peru","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:344,amount_of_biosolids_managed_land_applied:344.3,latitude:40.755625,longitude:-86.057105},{facility_name:"ABERDEEN, CITY OF (BIOSOLIDS)",city:"Aberdeen, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:344,amount_of_biosolids_managed_land_applied:0,latitude:45.428557,longitude:-98.478871},{facility_name:"JONESBORO, CITY WATER & LIGHT",city:"Jonesboro","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:343,amount_of_biosolids_managed_land_applied:343,latitude:35.85924,longitude:-90.73015},{facility_name:"BOLINGBROOK WRF #2, VILLAGE OF",city:"Bolingbrook","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:343,amount_of_biosolids_managed_land_applied:343,latitude:41.70433,longitude:-88.11443},{facility_name:"ROSEBURG URBAN SANITARY",city:"Roseburg","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:343,amount_of_biosolids_managed_land_applied:342.75,latitude:43.208918,longitude:-123.396131},{facility_name:"MOKENA STP, VILLAGE OF",city:"Mokena","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:343,amount_of_biosolids_managed_land_applied:342.98,latitude:41.54233,longitude:-87.8946},{facility_name:"CITY OF SEDALIA",city:"Sedalia","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:343,amount_of_biosolids_managed_land_applied:0,latitude:38.70972,longitude:-93.22888},{facility_name:"PACIFICA CALERA CREEK WRF",city:"Pacifica","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:342,amount_of_biosolids_managed_land_applied:342.3,latitude:37.635207,longitude:-122.490689},{facility_name:"UC DAVIS MAIN WWTP",city:"Davis","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:342,amount_of_biosolids_managed_land_applied:0,latitude:38.54061,longitude:-121.74814},{facility_name:"FILLMORE WRP",city:"Fillmore","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:341,amount_of_biosolids_managed_land_applied:0,latitude:34.39339237,longitude:-118.9317319},{facility_name:"HIGHLAND WATER RECLAMATION",city:"Highland","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:341,amount_of_biosolids_managed_land_applied:324.4,latitude:38.72307,longitude:-89.65254},{facility_name:"HOGS BAYOU WWTP",city:"Carthage","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:341,amount_of_biosolids_managed_land_applied:340.842,latitude:32.158787,longitude:-94.293073},{facility_name:"CHESTERTON WWTP, TOWN OF",city:"Porter","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:341,amount_of_biosolids_managed_land_applied:373.71,latitude:41.619079,longitude:-87.064105},{facility_name:"CORAL SPRINGS IMP DIST WWTF",city:"Coral Springs","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:340,amount_of_biosolids_managed_land_applied:374.83,latitude:26.2451,longitude:-80.26218},{facility_name:"SOUTHWEST WWTP",city:"Humble","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:340,amount_of_biosolids_managed_land_applied:0,latitude:29.999003,longitude:-95.265123},{facility_name:"BLACK'S CREEK WTP",city:"Bordentown","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:339,amount_of_biosolids_managed_land_applied:339.24,latitude:40.13642,longitude:-74.70424},{facility_name:"CITY OF BIG SPRING WATER RECLAMATION PLANT WWTP",city:"Big Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:339,amount_of_biosolids_managed_land_applied:0,latitude:32.255156,longitude:-101.42842},{facility_name:"SANFORD/SOUTH WRF #2",city:"Sanford","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:338,amount_of_biosolids_managed_land_applied:0,latitude:28.75979,longitude:-81.21427},{facility_name:"LYNDEN STP",city:"Lynden","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:338,amount_of_biosolids_managed_land_applied:360,latitude:48.938274,longitude:-122.451376},{facility_name:"LINTON WWTP, CITY OF",city:"Linton","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:337,amount_of_biosolids_managed_land_applied:260.94,latitude:39.03102,longitude:-87.15253},{facility_name:"TNSA SEWAGE TREATMENT PLT",city:"Neptune","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:337,amount_of_biosolids_managed_land_applied:0,latitude:40.201151,longitude:-74.062998},{facility_name:"PORT ANGELES WWTP",city:"Port Angeles","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:337,amount_of_biosolids_managed_land_applied:293.93,latitude:48.11164,longitude:-123.403035},{facility_name:"WALKER, TOWN OF",city:"Walker","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:336,amount_of_biosolids_managed_land_applied:336.4,latitude:30.480782,longitude:-90.871776},{facility_name:"WESTERN WESTMORELAND STP",city:"North Huntingdon","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:336,amount_of_biosolids_managed_land_applied:0,latitude:40.340854,longitude:-79.730035},{facility_name:"HAVRE DE GRACE WWTP",city:"Havre De Grace","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:336,amount_of_biosolids_managed_land_applied:336.07,latitude:39.531389,longitude:-76.098611},{facility_name:"RIVERTON, CITY OF",city:"Riverton","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:336,amount_of_biosolids_managed_land_applied:306,latitude:43.03203,longitude:-108.38064},{facility_name:"FORT BEND COUNTY WCID 2",city:"Stafford","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:336,amount_of_biosolids_managed_land_applied:0,latitude:29.604352,longitude:-95.554741},{facility_name:"SEQUIM WATER RECLAMATION FACILITY",city:"Sequim","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:334,amount_of_biosolids_managed_land_applied:333.93,latitude:48.084852,longitude:-123.063322},{facility_name:"LAFAYETTE CONSOLIDATED GOVERNMENT - EAST WWTP",city:"Lafayette","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:334,amount_of_biosolids_managed_land_applied:333.9,latitude:30.218582,longitude:-92.002676},{facility_name:"GREAT NECK WPC DISTRICT",city:"Great Neck","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:333,amount_of_biosolids_managed_land_applied:0,latitude:40.79524,longitude:-73.71284},{facility_name:"CITY OF LAKE JACKSON WWTF",city:"Lake Jackson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:333,amount_of_biosolids_managed_land_applied:333.11,latitude:29.025556,longitude:-95.455735},{facility_name:"PITTSBURG, CITY OF",city:"Pittsburg","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:333,amount_of_biosolids_managed_land_applied:333.06,latitude:37.417915,longitude:-94.70710034},{facility_name:"BLOOMINGTON-NORMAL WRD SE WWTP",city:"Heyworth","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:333,amount_of_biosolids_managed_land_applied:267,latitude:40.494683,longitude:-88.959697},{facility_name:"REHOBOTH BEACH STP",city:"Rehoboth Beach","state_postal;":"DE",state:"Del.",amount_of_biosolids_generated:333,amount_of_biosolids_managed_land_applied:29.31,latitude:38.700111,longitude:-75.093278},{facility_name:"CALEXICO, CITY OF",city:"Calexico","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:331,amount_of_biosolids_managed_land_applied:0,latitude:32.671207,longitude:-115.49351},{facility_name:"BENTON, CITY OF",city:"Benton","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:330,amount_of_biosolids_managed_land_applied:325,latitude:34.555,longitude:-92.593889},{facility_name:"OSWEGO (C)",city:"Oswego","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:330,amount_of_biosolids_managed_land_applied:0,latitude:43.43439725,longitude:-76.46629528},{facility_name:"PRASA VEGA BAJA STP",city:"Vega Baja","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:330,amount_of_biosolids_managed_land_applied:329.91,latitude:18.45305562,longitude:-66.41259214},{facility_name:"CITY OF CHATSWORTH",city:"Chatsworth","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:329,amount_of_biosolids_managed_land_applied:0,latitude:34.758607,longitude:-84.764205},{facility_name:"CITY OF WEST PLAINS",city:"West Plains","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:328,amount_of_biosolids_managed_land_applied:225.92,latitude:36.753547,longitude:-91.872167},{facility_name:"HARRIS COUNTY MUD 157 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:328,amount_of_biosolids_managed_land_applied:0,latitude:29.711951,longitude:-95.483449},{facility_name:"NORTH HAVEN WPCF",city:"North Haven","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:327,amount_of_biosolids_managed_land_applied:0,latitude:41.364329,longitude:-72.871671},{facility_name:"NEW MILFORD WPCF, TOWN OF",city:"New Milford","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:326,amount_of_biosolids_managed_land_applied:0,latitude:41.56931,longitude:-73.40915},{facility_name:"SOMERSET W P C F",city:"Somerset","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:326,amount_of_biosolids_managed_land_applied:0,latitude:41.7175,longitude:-71.168889},{facility_name:"BENICIA WWTP",city:"Benicia","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:325,amount_of_biosolids_managed_land_applied:0,latitude:38.045309,longitude:-122.150883},{facility_name:"OSWEGO (C)",city:"Oswego","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:324,amount_of_biosolids_managed_land_applied:0,latitude:43.43439725,longitude:-76.46629528},{facility_name:"CHEMUNG COUNTY SEWER DISTRICTS",city:"Elmira","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:323,amount_of_biosolids_managed_land_applied:0,latitude:42.07685,longitude:-76.77893},{facility_name:"WESLACO NORTH WWTP",city:"Weslaco","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:323,amount_of_biosolids_managed_land_applied:0,latitude:26.17575,longitude:-97.979944},{facility_name:"HAMMONTON WTPF",city:"Hammonton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:323,amount_of_biosolids_managed_land_applied:0,latitude:39.633173,longitude:-74.76719},{facility_name:"CITY OF OLDSMAR",city:"Oldsmar","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:322,amount_of_biosolids_managed_land_applied:0,latitude:28.02925,longitude:-82.654111},{facility_name:"CITY OF HANNIBAL",city:"Hannibal","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:322,amount_of_biosolids_managed_land_applied:0,latitude:39.709126,longitude:-91.357109},{facility_name:"MAYNARD W W T F",city:"Maynard","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:322,amount_of_biosolids_managed_land_applied:0,latitude:42.44063,longitude:-71.44248},{facility_name:"JOINT BASE LEWIS-MCCHORD",city:"Jblm","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:321,amount_of_biosolids_managed_land_applied:309,latitude:47.09033,longitude:-122.6088},{facility_name:"SELAH POTW",city:"Selah","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:321,amount_of_biosolids_managed_land_applied:320.9,latitude:46.649444,longitude:-120.523657},{facility_name:"SCOTTSVILLE STP",city:"Scottsville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:321,amount_of_biosolids_managed_land_applied:0,latitude:36.751389,longitude:-86.200833},{facility_name:"CITY OF DURHAM",city:"Durham","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:320,amount_of_biosolids_managed_land_applied:0,latitude:35.99597,longitude:-78.8996},{facility_name:"CITY OF KAUFMAN WWTP",city:"Kaufman","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:319,amount_of_biosolids_managed_land_applied:0,latitude:32.560389,longitude:-96.297194},{facility_name:"DYER WASTEWATER TREATMENT PLANT",city:"Dyer","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:319,amount_of_biosolids_managed_land_applied:318.56,latitude:41.499611,longitude:-87.515861},{facility_name:"EAST HONOLULU WWTP",city:"Honolulu","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:319,amount_of_biosolids_managed_land_applied:0,latitude:21.287333,longitude:-157.671833},{facility_name:"PORT JERVIS STP",city:"Port Jervis","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:318,amount_of_biosolids_managed_land_applied:0,latitude:41.36810234,longitude:-74.67454854},{facility_name:"DENISON MUNICIPAL UTILITIES",city:"Denison","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:318,amount_of_biosolids_managed_land_applied:317.96,latitude:42.01676,longitude:-95.36349},{facility_name:"WALTON (V)",city:"Walton","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:318,amount_of_biosolids_managed_land_applied:0,latitude:42.16876,longitude:-75.12795},{facility_name:"FALLBROOK PUBLIC UTILITY DISTRICT WATER RECLAMATION PLANT",city:"Fallbrook","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:317,amount_of_biosolids_managed_land_applied:223.3,latitude:33.382025,longitude:-117.1866255},{facility_name:"ATHOL W W T P",city:"Athol","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:317,amount_of_biosolids_managed_land_applied:0,latitude:42.586234,longitude:-72.242982},{facility_name:"MILLBRAE WPCP",city:"Millbrae","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:316,amount_of_biosolids_managed_land_applied:316.05,latitude:37.58166004,longitude:-122.4336851},{facility_name:"LAKE OF THE OZARKS REGION",city:"Lake Ozark","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:316,amount_of_biosolids_managed_land_applied:316,latitude:38.18284,longitude:-92.59715},{facility_name:"CITY OF KEENE WWTP",city:"Keene","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:315,amount_of_biosolids_managed_land_applied:0,latitude:32.395139,longitude:-97.284167},{facility_name:"MWRDGC LEMONT WRP",city:"Lemont","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:315,amount_of_biosolids_managed_land_applied:0,latitude:41.67699,longitude:-87.99996},{facility_name:"EAGLE PASS WWTF",city:"Eagle Pass","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:314,amount_of_biosolids_managed_land_applied:314.34,latitude:28.648891,longitude:-100.453502},{facility_name:"DOUGLAS COUNTY LAKE TAHOE SEWER AUTHORITY",city:"Zephyr Cove","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:313,amount_of_biosolids_managed_land_applied:313,latitude:39.03540773,longitude:-119.9488866},{facility_name:"MILLER CREEK WWTP",city:"Normandy Park","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:313,amount_of_biosolids_managed_land_applied:312.5,latitude:47.448261,longitude:-122.347575},{facility_name:"BRIDGEWATER W W T F",city:"Bridgewater","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:312,amount_of_biosolids_managed_land_applied:312,latitude:41.9947,longitude:-70.9663},{facility_name:"PEMBERTON TOWNSHIP MUA STP",city:"Pemberton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:312,amount_of_biosolids_managed_land_applied:157.66,latitude:39.97342068,longitude:-74.68372376},{facility_name:"TROY CITY OF WALNUT CREEK WWTP",city:"Troy","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:312,amount_of_biosolids_managed_land_applied:311.86,latitude:31.7692,longitude:-85.9261},{facility_name:"CITY OF LEBANON",city:"Lebanon","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:311,amount_of_biosolids_managed_land_applied:311.164,latitude:37.68123667,longitude:-92.66027826},{facility_name:"CITY OF OZARK",city:"Ozark","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:311,amount_of_biosolids_managed_land_applied:333.32,latitude:37.00068371,longitude:-93.22688555},{facility_name:"ERIE COUNTY SD#6",city:"Buffalo","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:311,amount_of_biosolids_managed_land_applied:0,latitude:42.88376,longitude:-78.87736},{facility_name:"ARLINGTON STP",city:"Arlington","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:311,amount_of_biosolids_managed_land_applied:310.83,latitude:48.201193,longitude:-122.128347},{facility_name:"TOWN OF LA PLATA",city:"La Plata","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:311,amount_of_biosolids_managed_land_applied:0,latitude:38.529482,longitude:-76.985787},{facility_name:"CITY OF MASON CITY",city:"Mason City","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:311,amount_of_biosolids_managed_land_applied:310.8,latitude:43.15271,longitude:-93.20141},{facility_name:"CITY OF SUMMERVILLE",city:"Summerville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:310,amount_of_biosolids_managed_land_applied:310.257,latitude:34.459167,longitude:-85.344639},{facility_name:"BUFFALO",city:"Buffalo","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:310,amount_of_biosolids_managed_land_applied:0,latitude:45.11536,longitude:-93.89093},{facility_name:"WOOD RIVER STP, CITY OF",city:"Wood River","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:310,amount_of_biosolids_managed_land_applied:0,latitude:38.846946,longitude:-90.098519},{facility_name:"TERREBONNE PARISH CONS. GOVT.",city:"Houma","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:309,amount_of_biosolids_managed_land_applied:0,latitude:29.62938,longitude:-90.736201},{facility_name:"IRON MOUNTAIN/KINGSFORD JOINT SEWAGE AUTHORITY",city:"Kingsford","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:308,amount_of_biosolids_managed_land_applied:308.33,latitude:0,longitude:0},{facility_name:"DIXON STP, CITY OF",city:"Dixon","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:308,amount_of_biosolids_managed_land_applied:0,latitude:41.8359,longitude:-89.5103},{facility_name:"BEMIDJI",city:"Bemidji","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:308,amount_of_biosolids_managed_land_applied:308,latitude:47.46828,longitude:-94.879704},{facility_name:"HARRIS COUNTY MUD 221 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:308,amount_of_biosolids_managed_land_applied:0,latitude:30.000209,longitude:-95.402807},{facility_name:"ERIE NORTH WATER RECLAMATION FACILITY",city:"Erie","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:308,amount_of_biosolids_managed_land_applied:307.79,latitude:40.06196435,longitude:-105.0180259},{facility_name:"EAST DISTRICT WWTP",city:"Baytown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:307,amount_of_biosolids_managed_land_applied:0,latitude:29.75826,longitude:-94.919964},{facility_name:"HARRISON CO UTIL AUTH, LONG BEACH & PASS CHRISTIAN",city:"Pass Christian","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:306,amount_of_biosolids_managed_land_applied:306,latitude:30.332246,longitude:-89.245298},{facility_name:"WILLIAMSPORT SAN AUTHORITY",city:"Williamsport","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:306,amount_of_biosolids_managed_land_applied:0,latitude:41.244722,longitude:-76.989444},{facility_name:"EDGEWATER, CITY OF",city:"Edgewater","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:305,amount_of_biosolids_managed_land_applied:305.25,latitude:28.985493,longitude:-80.911928},{facility_name:"SHELBYVILLE STP",city:"Shelbyville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:305,amount_of_biosolids_managed_land_applied:305,latitude:35.484167,longitude:-86.466944},{facility_name:"TOWN OF WARREN",city:"Warren","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:305,amount_of_biosolids_managed_land_applied:0,latitude:41.72906,longitude:-71.28224},{facility_name:"GREEN FOREST, CITY OF",city:"Green Forest","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:304,amount_of_biosolids_managed_land_applied:0,latitude:36.316389,longitude:-93.42},{facility_name:"MATTOON STP, CITY OF",city:"Mattoon","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:304,amount_of_biosolids_managed_land_applied:249,latitude:39.475228,longitude:-88.359424},{facility_name:"CITY OF CARROLL",city:"Carroll","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:304,amount_of_biosolids_managed_land_applied:303.74,latitude:42.06438,longitude:-94.86698},{facility_name:"BURRILLVILLE SEWER COMMISSION",city:"Harrisville","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:304,amount_of_biosolids_managed_land_applied:0,latitude:41.97281,longitude:-71.66552055},{facility_name:"TOWN OF DAVIE",city:"Davie","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:303,amount_of_biosolids_managed_land_applied:303.18,latitude:26.04059,longitude:-80.24093},{facility_name:"MUSTANG CREEK WWTP",city:"Taylor","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:303,amount_of_biosolids_managed_land_applied:0,latitude:30.558151,longitude:-97.385914},{facility_name:"WEST MEMORIAL MUD WWTP",city:"Katy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:303,amount_of_biosolids_managed_land_applied:302.93,latitude:29.77461,longitude:-95.7541},{facility_name:"LOCKPORT STP, CITY OF",city:"Lockport","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:303,amount_of_biosolids_managed_land_applied:302.74,latitude:41.58227,longitude:-88.06617},{facility_name:"EAST PENNSBORO SOUTH TREATMENT",city:"Cumberland County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:302,amount_of_biosolids_managed_land_applied:302.457,latitude:40.21559771,longitude:-76.89666495},{facility_name:"SOUTH WALTON UTILITY COMPANY",city:"Miramar Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:302,amount_of_biosolids_managed_land_applied:301.71,latitude:30.38028,longitude:-86.35852},{facility_name:"HACKETTSTOWN MUA WPCP",city:"Washington Twp","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:302,amount_of_biosolids_managed_land_applied:0,latitude:40.81843,longitude:-74.83095},{facility_name:"BIG LAKE",city:"Big Lake","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:302,amount_of_biosolids_managed_land_applied:0,latitude:45.30378,longitude:-93.74984},{facility_name:"JACKRABBIT RD PUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:301,amount_of_biosolids_managed_land_applied:207.35,latitude:29.831905,longitude:-95.656912},{facility_name:"MOBERLY CITY OF",city:"Moberly","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:301,amount_of_biosolids_managed_land_applied:301,latitude:39.41968,longitude:-92.43702},{facility_name:"PATTERSON WQCF",city:"Patterson","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:301,amount_of_biosolids_managed_land_applied:300.96,latitude:37.480433,longitude:-121.1209305},{facility_name:"AQUA ILLINOIS-UNIV PARK",city:"University Park","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:301,amount_of_biosolids_managed_land_applied:379.76,latitude:41.443002,longitude:-87.670895},{facility_name:"CITY OF ESTHERVILLE",city:"Estherville","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:300,amount_of_biosolids_managed_land_applied:300.38,latitude:43.40197,longitude:-94.83534},{facility_name:"MWRA - CLINTON S T P",city:"Clinton","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:300,amount_of_biosolids_managed_land_applied:0,latitude:42.43096,longitude:-71.680824},{facility_name:"WELLINGTON, CITY OF",city:"Wellington","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:300,amount_of_biosolids_managed_land_applied:300,latitude:37.26295,longitude:-97.39789},{facility_name:"HARRISON CO UTIL AUTH, S20 D'IBERVILLE WWTF AND TRANSMISSION SYSTEM",city:"D'Iberville","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:300,amount_of_biosolids_managed_land_applied:300,latitude:30.448204,longitude:-88.90157},{facility_name:"PISMO BEACH WWTF",city:"Pismo Beach","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:300,amount_of_biosolids_managed_land_applied:0,latitude:35.15202593,longitude:-120.6363133},{facility_name:"BLYTHE RWRF",city:"Blythe","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:300,amount_of_biosolids_managed_land_applied:0,latitude:33.604074,longitude:-114.599376},{facility_name:"HUNTLEY WEST STP, VILLAGE OF",city:"Huntley","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:299,amount_of_biosolids_managed_land_applied:299.39,latitude:42.1625,longitude:-88.4417},{facility_name:"CALIFORNIA MEN'S COLONY WWTP",city:"San Luis Obispo","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:298,amount_of_biosolids_managed_land_applied:0,latitude:35.31963,longitude:-120.69699},{facility_name:"PRASA DORADO",city:"Dorado","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:298,amount_of_biosolids_managed_land_applied:298.1,latitude:18.456224,longitude:-66.259189},{facility_name:"CITY OF WASHINGTON",city:"Washington","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:298,amount_of_biosolids_managed_land_applied:298,latitude:35.552078,longitude:-77.072847},{facility_name:"CITY OF NORTH LIBERTY",city:"North Liberty","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:297,amount_of_biosolids_managed_land_applied:297.34,latitude:41.74908478,longitude:-91.60964125},{facility_name:"SHERRILL (C) STP",city:"Sherrill","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:297,amount_of_biosolids_managed_land_applied:0,latitude:43.070028,longitude:-75.615583},{facility_name:"WEST ALIQUIPPA SEWAGE TREATMEN",city:"Aliquippa","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:296,amount_of_biosolids_managed_land_applied:0,latitude:40.62126,longitude:-80.24376},{facility_name:"SOUTH HARNETT REGIONAL WWTP",city:"Spring Lake","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:296,amount_of_biosolids_managed_land_applied:0,latitude:35.2303,longitude:-78.8833},{facility_name:"HARRIS CO MUD 387 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:296,amount_of_biosolids_managed_land_applied:0,latitude:30.139414,longitude:-95.49923},{facility_name:"CITY OF PERRY",city:"Perry","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:296,amount_of_biosolids_managed_land_applied:295.76,latitude:41.7768408,longitude:-94.11497025},{facility_name:"MARIANNA CITY OF WWTP",city:"Marianna","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:296,amount_of_biosolids_managed_land_applied:0,latitude:30.77089,longitude:-85.21972},{facility_name:"SALT CREEK SD STP",city:"Villa Park","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:295,amount_of_biosolids_managed_land_applied:295.07,latitude:41.885,longitude:-87.9653},{facility_name:"CITY OF ITALY WWTF",city:"Italy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:295,amount_of_biosolids_managed_land_applied:0,latitude:32.173226,longitude:-96.86912},{facility_name:"NORWICH WPCF",city:"Norwich","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:295,amount_of_biosolids_managed_land_applied:0,latitude:41.52481,longitude:-72.08241},{facility_name:"CONTENTNEA METROPOLITAN SEWERAGE DISTRICT",city:"Grifton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:295,amount_of_biosolids_managed_land_applied:294.921,latitude:35.358949,longitude:-77.416506},{facility_name:"MILAN STP, VILLAGE OF",city:"Milan","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:295,amount_of_biosolids_managed_land_applied:0,latitude:41.451373,longitude:-90.581747},{facility_name:"YANKTON, CITY OF (BIOSOLIDS)",city:"Yankton","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:294,amount_of_biosolids_managed_land_applied:295.4,latitude:42.86935,longitude:-97.3824},{facility_name:"WASHOUGAL STP",city:"Washougal","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:294,amount_of_biosolids_managed_land_applied:0,latitude:45.570576,longitude:-122.32446},{facility_name:"GWA HAGATNA WWTP",city:"Mangilao","state_postal;":"GU",state:"Guam",amount_of_biosolids_generated:294,amount_of_biosolids_managed_land_applied:0,latitude:13.4382999,longitude:144.7729285},{facility_name:"NEW IBERIA, CITY OF - TETE BAYOU WWTP",city:"New Iberia","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:293,amount_of_biosolids_managed_land_applied:861.96,latitude:29.99009,longitude:-91.76004},{facility_name:"CITY OF BAY CITY WWTP",city:"Bay City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:293,amount_of_biosolids_managed_land_applied:0,latitude:28.95792,longitude:-95.95929},{facility_name:"THE UTILITIES BOARD OF THE CITY OF FOLEY",city:"Foley","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:293,amount_of_biosolids_managed_land_applied:229.12,latitude:30.4014,longitude:-87.6617},{facility_name:"AUBURN WWTP",city:"Auburn","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:291,amount_of_biosolids_managed_land_applied:0,latitude:38.90146994,longitude:-121.0666884},{facility_name:"CLINTON TOWN",city:"Clinton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:291,amount_of_biosolids_managed_land_applied:0,latitude:40.63611,longitude:-74.90943},{facility_name:"SOUTHWEST WATER RECLAMATION FACILITY",city:"League City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:291,amount_of_biosolids_managed_land_applied:0,latitude:29.463626,longitude:-95.173337},{facility_name:"PLYMOUTH WWTP",city:"Plymouth","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:290,amount_of_biosolids_managed_land_applied:0,latitude:41.33099,longitude:-86.32127},{facility_name:"NEWFANE (T)",city:"Newfane","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:290,amount_of_biosolids_managed_land_applied:335,latitude:43.28229,longitude:-78.70804},{facility_name:"HENDERSON WWTF",city:"Lampasas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:290,amount_of_biosolids_managed_land_applied:290,latitude:31.068809,longitude:-98.169487},{facility_name:"HARRIS COUNTY MUD 418",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:290,amount_of_biosolids_managed_land_applied:144.96,latitude:29.95924,longitude:-95.7178},{facility_name:"CLIFTON SANITATION DISTRICT",city:"Clifton","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:290,amount_of_biosolids_managed_land_applied:0,latitude:39.0628,longitude:-108.45589},{facility_name:"SOUTH GRANVILLE WATER & SEWER AUTHORITY",city:"Butner","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:289,amount_of_biosolids_managed_land_applied:289.3,latitude:36.1348,longitude:-78.7797},{facility_name:"CITY OF WOODVILLE SOUTH PLANT",city:"Woodville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:289,amount_of_biosolids_managed_land_applied:0,latitude:30.767417,longitude:-94.410194},{facility_name:"STURBRIDGE W P C F",city:"Sturbridge","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:288,amount_of_biosolids_managed_land_applied:0,latitude:42.10095511,longitude:-72.08479348},{facility_name:"CITY OF UVALDE WWTF",city:"Uvalde","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:288,amount_of_biosolids_managed_land_applied:0,latitude:29.18675,longitude:-99.787278},{facility_name:"CARMEL WWTP",city:"Carmel","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:288,amount_of_biosolids_managed_land_applied:0,latitude:36.5392689,longitude:-121.9060635},{facility_name:"PRASA PONCE STP",city:"Ponce","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:288,amount_of_biosolids_managed_land_applied:0,latitude:18.09943642,longitude:-66.62900575},{facility_name:"CAMBRIDGE",city:"Cambridge","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:287,amount_of_biosolids_managed_land_applied:286.9,latitude:45.56566,longitude:-93.24625039},{facility_name:"OYSTER CREEK WWTP",city:"Oyster Creek","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:287,amount_of_biosolids_managed_land_applied:286.69,latitude:28.970222,longitude:-95.309083},{facility_name:"MONTICELLO (V)",city:"Monticello","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:286,amount_of_biosolids_managed_land_applied:0,latitude:41.65386,longitude:-74.68236},{facility_name:"RED WING",city:"Red Wing","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:286,amount_of_biosolids_managed_land_applied:285.7,latitude:44.5704,longitude:-92.52},{facility_name:"AUGUSTA, CITY OF",city:"Augusta","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:286,amount_of_biosolids_managed_land_applied:285.38,latitude:37.663817,longitude:-96.971487},{facility_name:"HORIZON REGIONAL MUD WWTP",city:"Horizon City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:286,amount_of_biosolids_managed_land_applied:0,latitude:31.682463,longitude:-106.227713},{facility_name:"BRAINERD",city:"Baxter","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:285,amount_of_biosolids_managed_land_applied:285,latitude:46.33987,longitude:-94.22739},{facility_name:"PENDLETON, CITY OF",city:"Pendleton","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:284,amount_of_biosolids_managed_land_applied:283.94,latitude:45.66794,longitude:-118.836944},{facility_name:"BRATTLEBORO WASTEWATER TREATMENT FACILITY",city:"Brattleboro","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:283,amount_of_biosolids_managed_land_applied:0,latitude:42.841045,longitude:-72.549205},{facility_name:"OLEAN (C)",city:"Olean","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:283,amount_of_biosolids_managed_land_applied:0,latitude:42.074291,longitude:-78.452272},{facility_name:"CROSS CREEK RANCH WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:282,amount_of_biosolids_managed_land_applied:0,latitude:29.6958,longitude:-95.8776},{facility_name:"SAINT PETER",city:"Saint Peter","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:282,amount_of_biosolids_managed_land_applied:282,latitude:44.338986,longitude:-93.943175},{facility_name:"GREEN RIDGE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:282,amount_of_biosolids_managed_land_applied:0,latitude:29.739432,longitude:-95.267198},{facility_name:"MARSHFIELD, TOWN OF",city:"Brant Rock","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:282,amount_of_biosolids_managed_land_applied:0,latitude:42.08604,longitude:-70.6421},{facility_name:"DEERFIELD WRF, VILLAGE OF",city:"Deerfield","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:282,amount_of_biosolids_managed_land_applied:289.2,latitude:42.16,longitude:-87.8547},{facility_name:"CITY OF SANDERSVILLE",city:"Sandersville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:282,amount_of_biosolids_managed_land_applied:281.54,latitude:32.990611,longitude:-82.842167},{facility_name:"BRUNSWICK COUNTY",city:"Bolivia","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:281,amount_of_biosolids_managed_land_applied:281.44,latitude:34.027541,longitude:-78.280217},{facility_name:"CITY OF CLINTON",city:"Clinton","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:281,amount_of_biosolids_managed_land_applied:281,latitude:38.394342,longitude:-93.791416},{facility_name:"CITY OF REIDSVILLE",city:"Reidsville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:281,amount_of_biosolids_managed_land_applied:281,latitude:36.323389,longitude:-79.658483},{facility_name:"ENUMCLAW STP",city:"Enumclaw","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:281,amount_of_biosolids_managed_land_applied:280.72,latitude:47.188881,longitude:-122.004636},{facility_name:"FAIRMONT",city:"Fairmont","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:280,amount_of_biosolids_managed_land_applied:157,latitude:43.67021,longitude:-94.45846},{facility_name:"INCLINE VILLAGE WRF",city:"Incline Village","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:279,amount_of_biosolids_managed_land_applied:0,latitude:39.238783,longitude:-119.927834},{facility_name:"WATER RECLAMATION FACILITY",city:"Fredericksburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:279,amount_of_biosolids_managed_land_applied:0,latitude:30.253889,longitude:-98.846944},{facility_name:"WESTERN WATER RECYCLING FACILITY",city:"Riverside","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:278,amount_of_biosolids_managed_land_applied:0,latitude:33.88567517,longitude:-117.2678916},{facility_name:"CITY OF FERNANDINA BEACH",city:"Fernandina Beach","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:277,amount_of_biosolids_managed_land_applied:0,latitude:30.65765,longitude:-81.4633},{facility_name:"ROCK ISLAND MAIN STP, CITY OF",city:"Rock Island","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:276,amount_of_biosolids_managed_land_applied:115.1,latitude:41.500139,longitude:-90.597167},{facility_name:"SIKESTON BOARD OF MUNICIPAL UTILITIES",city:"Sikeston","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:275,amount_of_biosolids_managed_land_applied:215.718428,latitude:36.88199446,longitude:-89.70543651},{facility_name:"JUNCTION CITY, CITY OF",city:"Junction City","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:275,amount_of_biosolids_managed_land_applied:275.22,latitude:38.9921,longitude:-96.8658},{facility_name:"PLAQUEMINES PAR (BOOTHVILLE)",city:"Venice","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:275,amount_of_biosolids_managed_land_applied:0,latitude:29.315,longitude:-89.385556},{facility_name:"HARRIS CO MUD 105 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:274,amount_of_biosolids_managed_land_applied:274.28,latitude:29.860944,longitude:-95.729283},{facility_name:"COPPERFIELD PLANT WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:274,amount_of_biosolids_managed_land_applied:0,latitude:29.890848,longitude:-95.638903},{facility_name:"FLORHAM PARK WATER POLLUTION",city:"Florham Park","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:274,amount_of_biosolids_managed_land_applied:0,latitude:40.783656,longitude:-74.368568},{facility_name:"INDIANA BORO STP",city:"Indiana","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:273,amount_of_biosolids_managed_land_applied:0,latitude:40.582188,longitude:-79.161479},{facility_name:"CAMROSA WRF",city:"Camarillo","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:273,amount_of_biosolids_managed_land_applied:0,latitude:34.237524,longitude:-118.966854},{facility_name:"HUNTINGBURG WWTP",city:"Huntingburg","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:273,amount_of_biosolids_managed_land_applied:273,latitude:38.311972,longitude:-86.951528},{facility_name:"HEALDSBURG WRF",city:"Healdsburg","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:273,amount_of_biosolids_managed_land_applied:127,latitude:38.624704,longitude:-122.87582},{facility_name:"LOUISVILLE (CITY OF) FORSTMANN WPCP",city:"Louisville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:273,amount_of_biosolids_managed_land_applied:0,latitude:33.003755,longitude:-82.461841},{facility_name:"CHARLEROI BOROUGH AUTH",city:"Charleroi","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:272,amount_of_biosolids_managed_land_applied:0,latitude:40.136738,longitude:-79.895607},{facility_name:"REWA/PIEDMONT REGIONAL WWTP",city:"Piedmont","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:272,amount_of_biosolids_managed_land_applied:0,latitude:34.68003,longitude:-82.46569},{facility_name:"HOLTVILLE WWTP",city:"Holtville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:271,amount_of_biosolids_managed_land_applied:271.03,latitude:32.810942,longitude:-115.380458},{facility_name:"CITY OF CORALVILLE",city:"Coralville","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:271,amount_of_biosolids_managed_land_applied:271,latitude:41.67846,longitude:-91.58365},{facility_name:"GRASS VALLEY WWTP",city:"Grass Valley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:270,amount_of_biosolids_managed_land_applied:270.39,latitude:39.204425,longitude:-120.9771389},{facility_name:"HANOVER PARK STP #1, VLLAGE OF",city:"Hanover Park","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:270,amount_of_biosolids_managed_land_applied:270.152,latitude:41.9722,longitude:-88.1386},{facility_name:"CITY OF MOUNT HOLLY",city:"Mt Holly","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:270,amount_of_biosolids_managed_land_applied:270,latitude:35.281681,longitude:-81.016193},{facility_name:"COMMISSIONERS OF ABERDEEN",city:"Aberdeen","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:269,amount_of_biosolids_managed_land_applied:731.5,latitude:39.51003,longitude:-76.15004},{facility_name:"CENTRALIA STP, CITY OF",city:"Centralia","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:269,amount_of_biosolids_managed_land_applied:268.51,latitude:38.51069,longitude:-89.15046},{facility_name:"CHIMNEY HILL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:268,amount_of_biosolids_managed_land_applied:0,latitude:29.89141,longitude:-95.60846},{facility_name:"MACOMB STP, CITY OF",city:"Macomb","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:268,amount_of_biosolids_managed_land_applied:268.31,latitude:40.4477,longitude:-90.68369},{facility_name:"SCITUATE_WWTP",city:"Scituate","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:268,amount_of_biosolids_managed_land_applied:0,latitude:42.17623,longitude:-70.726866},{facility_name:"LOCK HAVEN, CITY OF",city:"Lock Haven","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:268,amount_of_biosolids_managed_land_applied:0,latitude:41.13635,longitude:-77.44834},{facility_name:"NEW OXFORD MUNICIPAL AUTHORITY",city:"New Oxford","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:267.381,latitude:39.86345,longitude:-77.06297},{facility_name:"DAMASCUS WWTP",city:"Damascus","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:267.38,latitude:39.247049,longitude:-77.204983},{facility_name:"YUCCA VALLEY HDWD",city:"Yucca Valley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:180.48,latitude:34.14538884,longitude:-116.4123449},{facility_name:"VIRGINIA",city:"Virginia","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:267,latitude:47.508632,longitude:-92.547315},{facility_name:"HARRISON CO UTILITY AUTHORITY, GULFPORT SOUTH POTW",city:"Gulfport","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:267,latitude:30.418537,longitude:-89.061823},{facility_name:"HORSEPEN CREEK WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:21.34,latitude:29.912777,longitude:-95.696666},{facility_name:"KODIAK WWTP",city:"Kodiak","state_postal;":"AK",state:"Alaska",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:220,latitude:57.805067,longitude:-152.355448},{facility_name:"ASPEN CONSOLIDATED SANITATION DISTRICT",city:"Aspen","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:0,latitude:39.194214,longitude:-106.817393},{facility_name:"DOUBLE CREEK WWTP",city:"Jacksonville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:267,amount_of_biosolids_managed_land_applied:0,latitude:31.93473,longitude:-95.20214},{facility_name:"ELIZABETHTON STP",city:"Elizabethton","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:265,amount_of_biosolids_managed_land_applied:0,latitude:36.352885,longitude:-82.248467},{facility_name:"TOWN CREEK WWTP",city:"Palestine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:265,amount_of_biosolids_managed_land_applied:162.33,latitude:31.7544,longitude:-95.6088},{facility_name:"CITY OF GRAHAM WWTF",city:"Graham","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:264,amount_of_biosolids_managed_land_applied:0,latitude:33.086253,longitude:-98.593396},{facility_name:"CLARKS SUMMIT-SOUTH ABINGTON J",city:"Chinchilla","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:264,amount_of_biosolids_managed_land_applied:0,latitude:40.726994,longitude:-75.53272},{facility_name:"SEWER AUTHORITY_MID COASTSIDE",city:"Half Moon Bay","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:264,amount_of_biosolids_managed_land_applied:0,latitude:37.475318,longitude:-122.438855},{facility_name:"SALMON CREEK WWTP",city:"Burien","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:264,amount_of_biosolids_managed_land_applied:263.6,latitude:47.490989,longitude:-122.361021},{facility_name:"FRANKLIN COUNTY",city:"Louisburg","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:262,amount_of_biosolids_managed_land_applied:261.8,latitude:36.07054,longitude:-78.42661},{facility_name:"CITY OF LAUREL",city:"Laurel","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:261,amount_of_biosolids_managed_land_applied:0,latitude:45.66534786,longitude:-108.7738835},{facility_name:"PRASA - FAJARDO WWTP",city:"Aguas Buenas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:260,amount_of_biosolids_managed_land_applied:0,latitude:18.25819,longitude:-66.10713},{facility_name:"CITY OF PRATTVILLE",city:"Prattville","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:260,amount_of_biosolids_managed_land_applied:260.118,latitude:32.4295,longitude:-86.4054},{facility_name:"ANSON COUNTY",city:"Wadesboro","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:260,amount_of_biosolids_managed_land_applied:260.11,latitude:34.899863,longitude:-80.00308},{facility_name:"AYER W W T P",city:"Ayer","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:260,amount_of_biosolids_managed_land_applied:0,latitude:42.560413,longitude:-71.603265},{facility_name:"EL DORADO, CITY OF",city:"El Dorado","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:260,amount_of_biosolids_managed_land_applied:0,latitude:37.798079,longitude:-96.849446},{facility_name:"SANTAQUIN WATER RECLAMATION FACILITY",city:"Santaquin","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:260,amount_of_biosolids_managed_land_applied:0,latitude:39.996111,longitude:-111.789444},{facility_name:"OWEGO (V)",city:"Owego","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:259,amount_of_biosolids_managed_land_applied:259.03,latitude:42.1036,longitude:-76.26229},{facility_name:"SWEET HOME, CITY OF",city:"Sweet Home","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:259,amount_of_biosolids_managed_land_applied:0,latitude:44.400019,longitude:-122.73797},{facility_name:"WEST DISTRICT WWTF",city:"Baytown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:259,amount_of_biosolids_managed_land_applied:0,latitude:29.791518,longitude:-95.043481},{facility_name:"TOOL WWTP",city:"Tool","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:259,amount_of_biosolids_managed_land_applied:0,latitude:32.23875,longitude:-96.144694},{facility_name:"DOUGLAS CO SEWER DIST 1 EAST WENATCHEE",city:"East Wenatchee","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:259,amount_of_biosolids_managed_land_applied:209.5,latitude:47.418545,longitude:-120.29716},{facility_name:"TROY STP, CITY OF",city:"Troy","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:259,amount_of_biosolids_managed_land_applied:181.7,latitude:38.726944,longitude:-89.871389},{facility_name:"WILDERNESS SHORES",city:"Locust Grove","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:258,amount_of_biosolids_managed_land_applied:135,latitude:38.372065,longitude:-77.749208},{facility_name:"CITY OF ROCKPORT WWTP",city:"Rockport","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:257,amount_of_biosolids_managed_land_applied:257,latitude:28.03768,longitude:-97.05605},{facility_name:"PINERY WATER AND WASTEWATER DIST",city:"Parker","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:257,amount_of_biosolids_managed_land_applied:0,latitude:39.43834,longitude:-104.76401},{facility_name:"WASCO WWTP",city:"Wasco","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:255,amount_of_biosolids_managed_land_applied:0,latitude:35.58695172,longitude:-119.3655891},{facility_name:"TAOS, TOWN OF",city:"Rancho De Taos","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:254,amount_of_biosolids_managed_land_applied:0,latitude:36.38614,longitude:-105.639899},{facility_name:"RCSD KIMMSWICK WWTP",city:"Kimmswick","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:254,amount_of_biosolids_managed_land_applied:254,latitude:38.399363,longitude:-90.385717},{facility_name:"VERMILLION, CITY OF",city:"Vermillion, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:254,amount_of_biosolids_managed_land_applied:118.43,latitude:42.762222,longitude:-96.916583},{facility_name:"ROCKLAND WWTP",city:"Rockland","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:253,amount_of_biosolids_managed_land_applied:0,latitude:42.12951619,longitude:-70.9126},{facility_name:"FRANKLIN STP",city:"Franklin","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:251,amount_of_biosolids_managed_land_applied:0,latitude:36.744167,longitude:-86.555},{facility_name:"CITY OF COMANCHE WWTP",city:"Comanche","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:251,amount_of_biosolids_managed_land_applied:0,latitude:31.8932,longitude:-98.5928},{facility_name:"MONTICELLO WWTP",city:"Monticello","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:251,amount_of_biosolids_managed_land_applied:251,latitude:40.736,longitude:-86.755917},{facility_name:"AVENAL WWTP",city:"Avenal","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:250,amount_of_biosolids_managed_land_applied:0,latitude:36.00050661,longitude:-120.124325},{facility_name:"ALEXANDRIA, CITY OF (HUDSON BL",city:"Alexandria","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:250,amount_of_biosolids_managed_land_applied:0,latitude:31.2784,longitude:-92.41716},{facility_name:"TOWN OF LOUISBURG",city:"Louisburg","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:250,amount_of_biosolids_managed_land_applied:249.82,latitude:36.0874,longitude:-78.2922},{facility_name:"WATER WORKS & SEWER BOARD OF THE CITY OF GADSDEN",city:"Gadsden","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:250,amount_of_biosolids_managed_land_applied:249.73,latitude:33.990232,longitude:-86.035837},{facility_name:"ARTESIA, CITY OF",city:"Artesia","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:250,amount_of_biosolids_managed_land_applied:249.7,latitude:32.858161,longitude:-104.360985},{facility_name:"MORONI FEED",city:"Moroni","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:249,amount_of_biosolids_managed_land_applied:0,latitude:39.517968,longitude:-111.591179},{facility_name:"MT. VIEW S.D. WWTP",city:"Martinez","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:249,amount_of_biosolids_managed_land_applied:0,latitude:38.011211,longitude:-122.118401},{facility_name:"UPPER MARTINEZ CREEK WWTF",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:248,amount_of_biosolids_managed_land_applied:0,latitude:32.763199,longitude:-93.969626},{facility_name:"PLAQUEMINES PAR (PORT SULPHUR)",city:"Port Sulphur","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:248,amount_of_biosolids_managed_land_applied:0,latitude:29.48235,longitude:-89.70117},{facility_name:"LAGRANGE WWTP",city:"La Grange","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:248,amount_of_biosolids_managed_land_applied:0,latitude:41.65182,longitude:-85.41391},{facility_name:"LOWER FOUNTAIN METRO SEWAGE DISPOSAL DIST",city:"Fountain","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:248,amount_of_biosolids_managed_land_applied:0,latitude:38.667223,longitude:-104.703165},{facility_name:"CITY OF NEW BOSTON WWTP",city:"New Boston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:246,amount_of_biosolids_managed_land_applied:0,latitude:33.435644,longitude:-94.409774},{facility_name:"GENEVA (C)",city:"Geneva","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:246,amount_of_biosolids_managed_land_applied:763.5,latitude:42.86799,longitude:-76.98265},{facility_name:"COFFEYVILLE, CITY OF",city:"Coffeyville","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:246,amount_of_biosolids_managed_land_applied:186.61,latitude:37.04533028,longitude:-95.4683046},{facility_name:"NW HARRIS COUNTY MUD 15 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:246,amount_of_biosolids_managed_land_applied:0,latitude:30.02589,longitude:-95.61713},{facility_name:"NORTHWEST REGIONAL",city:"Winter Haven","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:245,amount_of_biosolids_managed_land_applied:0,latitude:28.011054,longitude:-81.8088},{facility_name:"GROVETON WWTP",city:"Groveton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:245,amount_of_biosolids_managed_land_applied:0,latitude:31.041556,longitude:-95.119639},{facility_name:"PENNSVILLE SEWERAGE AUTHORITY",city:"Pennsville","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:245,amount_of_biosolids_managed_land_applied:0,latitude:39.639085,longitude:-75.541673},{facility_name:"BOERNE WWT AND RECYCLING CENTER",city:"Boerne","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:244,amount_of_biosolids_managed_land_applied:0,latitude:29.77277,longitude:-98.7142},{facility_name:"TOWN OF NORTH WILKESBORO",city:"North Wilkesboro","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:244,amount_of_biosolids_managed_land_applied:243.96,latitude:36.161333,longitude:-81.1345},{facility_name:"TIMBER LANE UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:244,amount_of_biosolids_managed_land_applied:0,latitude:30.039417,longitude:-95.387361},{facility_name:"TIMBERHILLS PERMANENT WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:243,amount_of_biosolids_managed_land_applied:243.4,latitude:29.935915,longitude:-95.234856},{facility_name:"HANCOCK COUNTY UTILITY AUTHORITY, SOUTHERN REGIONAL WWTP",city:"Waveland","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:243,amount_of_biosolids_managed_land_applied:243.21,latitude:30.29521,longitude:-89.38287},{facility_name:"TOWN OF EAST GREENWICH",city:"East Greenwich","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:243,amount_of_biosolids_managed_land_applied:0,latitude:41.660818,longitude:-71.451068},{facility_name:"U.S. ARMY INSTALLATION MGMT COMMAND",city:"Fort Leonard Wood","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:243,amount_of_biosolids_managed_land_applied:242.56,latitude:37.7624096,longitude:-92.10761613},{facility_name:"AJ BROWN PARKER CREEK WWTF",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:242,amount_of_biosolids_managed_land_applied:0,latitude:30.772434,longitude:-95.512744},{facility_name:"DECATUR WWTP",city:"Decatur","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:242,amount_of_biosolids_managed_land_applied:80.5,latitude:40.83125,longitude:-84.92501},{facility_name:"WOODLAND SEWAGE TREATMENT PLT",city:"Convent Station","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:242,amount_of_biosolids_managed_land_applied:0,latitude:40.775629,longitude:-74.46346},{facility_name:"RUIDOSO-RUIDOSO DOWNS WWTP-LIN",city:"Ruidoso","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:242,amount_of_biosolids_managed_land_applied:193,latitude:33.34944,longitude:-105.66196},{facility_name:"CITY OF ROCKMART",city:"Rockmart","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:242,amount_of_biosolids_managed_land_applied:0,latitude:34.012199,longitude:-85.049933},{facility_name:"SAM C MCKENZIE JR WATER RECLAMATION FACILITY",city:"New Braunfels","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:242,amount_of_biosolids_managed_land_applied:0,latitude:29.653333,longitude:-98.058333},{facility_name:"SECURITY SANITATION DISTRICT",city:"Colorado Springs","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:241,amount_of_biosolids_managed_land_applied:0,latitude:38.74619,longitude:-104.73842},{facility_name:"CAMAS STP",city:"Camas","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:241,amount_of_biosolids_managed_land_applied:10.4,latitude:45.578439,longitude:-122.393398},{facility_name:"CELANESE WWTP",city:"Cumberland","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:241,amount_of_biosolids_managed_land_applied:0,latitude:39.600267,longitude:-78.817457},{facility_name:"MEDFORD TOWNSHIP STP",city:"Medford","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:240,amount_of_biosolids_managed_land_applied:0,latitude:39.91938,longitude:-74.80697},{facility_name:"CITY OF NEWTON",city:"Newton","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:240,amount_of_biosolids_managed_land_applied:239.6,latitude:41.72129972,longitude:-93.06755559},{facility_name:"BEDFORD WASTEWATER TREATMENT PLANT",city:"Bedford","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:240,amount_of_biosolids_managed_land_applied:239.56,latitude:38.839111,longitude:-86.521889},{facility_name:"FORT BEND COUNTY MUD 182",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:239,amount_of_biosolids_managed_land_applied:0,latitude:29.725659,longitude:-95.87164},{facility_name:"CITY OF SHELDON",city:"Sheldon","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:239,amount_of_biosolids_managed_land_applied:183.61,latitude:43.15625079,longitude:-95.8974258},{facility_name:"TOWN OF SPENCER SEWER COMMISSION",city:"Spencer","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:239,amount_of_biosolids_managed_land_applied:0,latitude:42.24722,longitude:-72.00732},{facility_name:"PERU STP #1, CITY OF",city:"Peru","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:238,amount_of_biosolids_managed_land_applied:238.33,latitude:41.32635,longitude:-89.11426},{facility_name:"JEFFERSON COUNTY COMMISSION ENVIRONMENTAL SERVICES DEPARTMENT",city:"Birmingham","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:238,amount_of_biosolids_managed_land_applied:238,latitude:33.7142,longitude:-86.6989},{facility_name:"CITY OF STATESVILLE",city:"Statesville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:238,amount_of_biosolids_managed_land_applied:238,latitude:35.74181,longitude:-80.841124},{facility_name:"EPHRATA BOROUGH AUTHORITY",city:"Ephrata","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:238,amount_of_biosolids_managed_land_applied:238,latitude:40.19715,longitude:-76.16088},{facility_name:"TWA/PARKWAY WWTF",city:"Kissimmee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:238,amount_of_biosolids_managed_land_applied:0,latitude:28.3043,longitude:-81.340777},{facility_name:"SEABROOK WWTP",city:"Seabrook","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:237,amount_of_biosolids_managed_land_applied:0,latitude:29.55744,longitude:-95.01684},{facility_name:"SOUTHERN MONTGOMERY CO MUD WWP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:236,amount_of_biosolids_managed_land_applied:0,latitude:30.125739,longitude:-95.429559},{facility_name:"EFFINGHAM STP, CITY OF",city:"Effingham","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:236,amount_of_biosolids_managed_land_applied:224.9,latitude:39.10938,longitude:-88.53276},{facility_name:"SUNBURY CITY MUN AUTHORITY",city:"Sunbury","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:236,amount_of_biosolids_managed_land_applied:0,latitude:40.85462,longitude:-76.79459},{facility_name:"BLAIR WWTF",city:"Blair","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:236,amount_of_biosolids_managed_land_applied:236.1,latitude:41.551762,longitude:-96.102836},{facility_name:"TROUTDALE, CITY OF",city:"Troutdale","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:236,amount_of_biosolids_managed_land_applied:158,latitude:45.553408,longitude:-122.387009},{facility_name:"CITY OF FARMINGTON",city:"Farmington","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:236,amount_of_biosolids_managed_land_applied:235.6,latitude:37.78064,longitude:-90.42251},{facility_name:"GATEWAY SERVICES CDD",city:"Fort Myers","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:235,amount_of_biosolids_managed_land_applied:0,latitude:26.57451,longitude:-81.73853},{facility_name:"CITY OF MOUNT VERNON WWTP",city:"Mount Vernon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:235,amount_of_biosolids_managed_land_applied:0,latitude:33.194556,longitude:-95.2175},{facility_name:"HORNELL (C)",city:"Hornell","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:235,amount_of_biosolids_managed_land_applied:234.9,latitude:42.32758,longitude:-77.66154},{facility_name:"TOMBALL SOUTH WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:234,amount_of_biosolids_managed_land_applied:234.1,latitude:30.0669,longitude:-95.6147},{facility_name:"PLANO STP, CITY OF",city:"Plano","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:233,amount_of_biosolids_managed_land_applied:233.25,latitude:41.65383,longitude:-88.5316},{facility_name:"PRICE R WATER IMP DIST",city:"Wellington","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:233,amount_of_biosolids_managed_land_applied:233,latitude:39.534962,longitude:-110.716301},{facility_name:"SAN BENITO WWTP",city:"San Benito","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:232.4,latitude:26.174523,longitude:-97.625014},{facility_name:"QUONSET POINT WWTF",city:"North Kingstown","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:0,latitude:41.59792,longitude:-71.42406},{facility_name:"CITY OF MANCHESTER",city:"Manchester","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:215.2,latitude:35.4833,longitude:-86.09716},{facility_name:"CITY OF CEDAR FALLS",city:"Cedar Falls","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:232.1,latitude:42.53639,longitude:-92.44816},{facility_name:"HOOKSETT W W T F",city:"Hooksett","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:0,latitude:43.07531,longitude:-71.45823},{facility_name:"ACTON MUD WWTF",city:"Granbury","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:0,latitude:32.43599,longitude:-97.69764},{facility_name:"CITY OF JARRELL WWTF",city:"Jarrell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:0,latitude:30.823762,longitude:-97.547025},{facility_name:"CITY OF KIRKSVILLE",city:"Kirksville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:232,amount_of_biosolids_managed_land_applied:231.6,latitude:40.19361,longitude:-92.58318},{facility_name:"PHENIX CITY DEPARTMENT OF PUBLIC UTILITIES",city:"Phenix City","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:231,amount_of_biosolids_managed_land_applied:231.46,latitude:32.4323,longitude:-84.9711},{facility_name:"CITY OF REPUBLIC",city:"Republic","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:231,amount_of_biosolids_managed_land_applied:117.361,latitude:37.1206,longitude:-93.48047},{facility_name:"CITY OF MCDONOUGH",city:"Mcdonough","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:230,amount_of_biosolids_managed_land_applied:230.4,latitude:33.480275,longitude:-84.130223},{facility_name:"PECAN GROVE MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:230,amount_of_biosolids_managed_land_applied:0,latitude:29.617821,longitude:-95.607229},{facility_name:"CARBONDALE NORTHWEST WWTP",city:"Carbondale","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:230,amount_of_biosolids_managed_land_applied:248.58,latitude:37.7461,longitude:-89.2417},{facility_name:"MELROSE",city:"Melrose","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:230,amount_of_biosolids_managed_land_applied:230,latitude:45.67506,longitude:-94.80245},{facility_name:"BURLINGTON NORTH END WWTF",city:"Burlington","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:230,amount_of_biosolids_managed_land_applied:0,latitude:44.527927,longitude:-73.268766},{facility_name:"MAYSVILLE STP",city:"Maysville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:229,amount_of_biosolids_managed_land_applied:0,latitude:38.687222,longitude:-83.786667},{facility_name:"TOWN OF FARMVILLE",city:"Farmville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:229,amount_of_biosolids_managed_land_applied:229,latitude:35.588194,longitude:-77.546097},{facility_name:"GREAT BEND, CITY OF",city:"Great Bend","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:229,amount_of_biosolids_managed_land_applied:185,latitude:38.37558458,longitude:-98.77106058},{facility_name:"OCEAN SHORES STP",city:"Ocean Shores","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:229,amount_of_biosolids_managed_land_applied:88.39,latitude:46.931927,longitude:-124.156601},{facility_name:"PORT TOWNSEND STP",city:"Port Townsend","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:229,amount_of_biosolids_managed_land_applied:228.65,latitude:48.138082,longitude:-122.781567},{facility_name:"SAN FELIPE WWTF",city:"Del Rio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:228,amount_of_biosolids_managed_land_applied:0,latitude:29.308056,longitude:-100.886111},{facility_name:"DONALA WATER AND SANITATION DISTRICT",city:"Colorado Springs","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:228,amount_of_biosolids_managed_land_applied:0,latitude:39.05566,longitude:-104.81471},{facility_name:"AURORA WWTF",city:"Aurora","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:228,amount_of_biosolids_managed_land_applied:228,latitude:40.86913453,longitude:-98.00687312},{facility_name:"UNION COUNTY",city:"Monroe","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:228,amount_of_biosolids_managed_land_applied:227.88,latitude:35.068753,longitude:-80.633831},{facility_name:"EAST HAMPTON WPCA",city:"East Hampton","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:227,amount_of_biosolids_managed_land_applied:0,latitude:41.564191,longitude:-72.546421},{facility_name:"BARRINGTON STP, VILLAGE OF",city:"Barrington","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:227,amount_of_biosolids_managed_land_applied:226.81,latitude:42.158008,longitude:-88.143852},{facility_name:"WAUCONDA WWTF",city:"Wauconda","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:227,amount_of_biosolids_managed_land_applied:226.738,latitude:42.26088,longitude:-88.14934},{facility_name:"PONTIAC STP, CITY OF",city:"Pontiac","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:227,amount_of_biosolids_managed_land_applied:0,latitude:40.881952,longitude:-88.63144},{facility_name:"PENN YAN (V) MUNICIPAL BOARD",city:"Penn Yan","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:226,amount_of_biosolids_managed_land_applied:36.8,latitude:42.66083,longitude:-77.05419},{facility_name:"MUKILTEO WATER AND WASTEWATER DISTRICT WWTP",city:"Mukilteo","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:226,amount_of_biosolids_managed_land_applied:225.6,latitude:47.910978,longitude:-122.319727},{facility_name:"PLAINFIELD WPCF",city:"Plainfield","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:226,amount_of_biosolids_managed_land_applied:0,latitude:41.67742,longitude:-71.91801},{facility_name:"CITY OF PEVELY",city:"Pevely","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:225,amount_of_biosolids_managed_land_applied:225,latitude:38.28664224,longitude:-90.40684042},{facility_name:"ELLENSBURG WWTP",city:"Ellensburg","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:225,amount_of_biosolids_managed_land_applied:0,latitude:46.968591,longitude:-120.540876},{facility_name:"WATERTOWN, CITY OF",city:"Watertown, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:225,amount_of_biosolids_managed_land_applied:0,latitude:44.885004,longitude:-97.099607},{facility_name:"MUSCLE SHOALS UTILITIES BOARD",city:"Muscle Shoals","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:224,amount_of_biosolids_managed_land_applied:224,latitude:34.7582,longitude:-87.641},{facility_name:"CITY OF DEVINE WWTP",city:"Devine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:223,amount_of_biosolids_managed_land_applied:0,latitude:29.127361,longitude:-98.912111},{facility_name:"GALT WWTP",city:"Galt","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:223,amount_of_biosolids_managed_land_applied:223,latitude:38.2914,longitude:-121.2757},{facility_name:"GREENSBORO (CITY OF)",city:"Greensboro","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:223,amount_of_biosolids_managed_land_applied:222.56,latitude:33.552306,longitude:-83.197944},{facility_name:"UPPER SAUCON TWP. WWTP",city:"Center Valley","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:223,amount_of_biosolids_managed_land_applied:0,latitude:40.53473,longitude:-75.40339},{facility_name:"REDONDO WWTP",city:"Federal Way","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:222,amount_of_biosolids_managed_land_applied:222,latitude:47.341287,longitude:-122.330283},{facility_name:"BOROUGH OF PHOENIXVILLE",city:"Phoenixville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:222,amount_of_biosolids_managed_land_applied:221.87,latitude:40.127883,longitude:-75.502412},{facility_name:"LEWISBURG STP",city:"Lewisburg","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:221,amount_of_biosolids_managed_land_applied:223.5,latitude:35.45094,longitude:-86.78791},{facility_name:"MOORE STREET WWTP",city:"Beeville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:221,amount_of_biosolids_managed_land_applied:220.5,latitude:28.39139,longitude:-97.723077},{facility_name:"FESTUS-CRYSTAL CITY SEWAG",city:"Crystal City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:220,amount_of_biosolids_managed_land_applied:220,latitude:38.209939,longitude:-90.382593},{facility_name:"SALEM STP, CITY OF",city:"Salem","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:220,amount_of_biosolids_managed_land_applied:196.5,latitude:38.6167,longitude:-88.9438},{facility_name:"MONROE (JACK'S CRK WPCP)",city:"Monroe","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:220,amount_of_biosolids_managed_land_applied:0,latitude:33.801801,longitude:-83.636625},{facility_name:"SWEETWATER STP",city:"Sweetwater","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:220,amount_of_biosolids_managed_land_applied:0,latitude:35.611742,longitude:-84.458539},{facility_name:"TELLURIDE TOWN OF",city:"Telluride","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:220,amount_of_biosolids_managed_land_applied:0,latitude:37.94504688,longitude:-107.8804825},{facility_name:"NORTHBELT WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:220,amount_of_biosolids_managed_land_applied:0,latitude:29.929404,longitude:-95.283013},{facility_name:"CITY OF CORSICANA - WWTP 2",city:"Corsicana","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:220,amount_of_biosolids_managed_land_applied:0,latitude:32.092823,longitude:-96.41073},{facility_name:"GLENWOOD SPRINGS CITY OF",city:"Glenwood Springs","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:190.05,latitude:39.54676,longitude:-107.32742},{facility_name:"LUMBERTON MUD WWTP 2",city:"Lumberton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:0,latitude:30.230472,longitude:-94.215889},{facility_name:"CHESAPEAKE BEACH WWTP",city:"Chesapeake Beach","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:0,latitude:38.6686285,longitude:-76.54068},{facility_name:"CITY OF KINGSVILLE 3 MGD WASTEWATER TREATMENT FACILITY",city:"Kingsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:0,latitude:27.523086,longitude:-97.832245},{facility_name:"THE DALLES, CITY OF",city:"The Dalles","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:219,latitude:45.601496,longitude:-121.179408},{facility_name:"APRA HARBOR WWTP",city:"Agat","state_postal;":"GU",state:"Guam",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:0,latitude:13.4382999,longitude:144.7729285},{facility_name:"PRASA BARCELONETA",city:"Barceloneta","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:218.76,latitude:18.47939,longitude:-66.545172},{facility_name:"PORTLAND WWTP",city:"Portland","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:219,amount_of_biosolids_managed_land_applied:0,latitude:40.43596,longitude:-84.97793},{facility_name:"EVANSTON, CITY OF",city:"Evanston","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:218,amount_of_biosolids_managed_land_applied:0,latitude:41.26916,longitude:-110.96801},{facility_name:"NORTHERN MORAINE WW REC DIST",city:"Island Lake","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:218,amount_of_biosolids_managed_land_applied:217.54,latitude:42.2669,longitude:-88.202267},{facility_name:"CITY OF ALVIN WWTP",city:"Alvin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:217,amount_of_biosolids_managed_land_applied:0,latitude:29.365531,longitude:-95.23412},{facility_name:"GETTYSBURG MUNICIPAL AUTH.",city:"Gettysburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:217,amount_of_biosolids_managed_land_applied:162.55,latitude:39.827521,longitude:-77.155787},{facility_name:"SPRINGFIELD STP",city:"Springfield","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:217,amount_of_biosolids_managed_land_applied:0,latitude:37.693889,longitude:-85.233611},{facility_name:"FORT LUPTON CITY OF",city:"Fort Lupton","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:216,amount_of_biosolids_managed_land_applied:0,latitude:40.07962,longitude:-104.81291},{facility_name:"DORSEY RUN ADVANCED WWTP",city:"Annapolis","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:216,amount_of_biosolids_managed_land_applied:215.64,latitude:39.133085,longitude:-76.781056},{facility_name:"FORT BEND COUNTY MUD 142 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:216,amount_of_biosolids_managed_land_applied:0,latitude:29.693833,longitude:-95.827028},{facility_name:"SIENNA PLANTATION MUD 1 REGIONAL WWTF",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:216,amount_of_biosolids_managed_land_applied:0,latitude:29.467028,longitude:-95.507379},{facility_name:"CITY OF NORTHPORT",city:"Northport","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:215,amount_of_biosolids_managed_land_applied:215.34,latitude:33.2144,longitude:-87.5883},{facility_name:"SEWERAGE AGENCY OF SOUTHERN MARIN",city:"Mill Valley","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:215,amount_of_biosolids_managed_land_applied:0,latitude:37.89226888,longitude:-122.53357},{facility_name:"NORTHEAST DISTRICT WWTF",city:"Baytown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:215,amount_of_biosolids_managed_land_applied:0,latitude:29.806491,longitude:-94.92216},{facility_name:"WOOD DALE NORTH STP, CITY OF",city:"Wood Dale","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:215,amount_of_biosolids_managed_land_applied:215.08,latitude:41.964678,longitude:-87.986618},{facility_name:"CARY STP, VILLAGE OF",city:"Cary","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:215,amount_of_biosolids_managed_land_applied:574,latitude:42.20284,longitude:-88.24203},{facility_name:"IOWA GREAT LAKES SANITARY DISTRICT",city:"Milford","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:215,amount_of_biosolids_managed_land_applied:215,latitude:43.314722,longitude:-95.150556},{facility_name:"ANTIOCH STP, VILLAGE OF",city:"Antioch","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:215,amount_of_biosolids_managed_land_applied:214.87,latitude:42.48015,longitude:-88.099358},{facility_name:"KENDALL COUNTY WCID 1 WWTP",city:"Comfort","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:214,amount_of_biosolids_managed_land_applied:0,latitude:29.974013,longitude:-98.894093},{facility_name:"PIKEVILLE WWTP",city:"Pikeville","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:213,amount_of_biosolids_managed_land_applied:213.4,latitude:37.491857,longitude:-82.539703},{facility_name:"TAVARES/WOODLEA ROAD WWTF",city:"Tavares","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:213,amount_of_biosolids_managed_land_applied:0,latitude:28.79188,longitude:-81.75719},{facility_name:"CITY OF BRIDGE CITY",city:"Bridge City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:213,amount_of_biosolids_managed_land_applied:0,latitude:30.040236,longitude:-93.817693},{facility_name:"PLACERVILLE HANGTOWN CREEK WRF",city:"Placerville","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:213,amount_of_biosolids_managed_land_applied:212.67,latitude:38.72037105,longitude:-120.8192031},{facility_name:"WEIRTON, CITY OF",city:"Weirton","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:213,amount_of_biosolids_managed_land_applied:0,latitude:40.38183,longitude:-80.61114},{facility_name:"SEABROOK",city:"Seabrook","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:213,amount_of_biosolids_managed_land_applied:0,latitude:42.8844901,longitude:-70.86812651},{facility_name:"ROSELLE-J.L. DEVLIN STP",city:"Roselle","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:212,amount_of_biosolids_managed_land_applied:212.44,latitude:41.971553,longitude:-88.075107},{facility_name:"ATCHISON, CITY OF",city:"Atchison","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:212,amount_of_biosolids_managed_land_applied:212.4,latitude:39.56297,longitude:-95.11996},{facility_name:"CITY OF WEST LIBERTY",city:"West Liberty","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:212,amount_of_biosolids_managed_land_applied:212,latitude:41.57139,longitude:-91.26337},{facility_name:"BETHEL PARK STP",city:"Library","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:212,amount_of_biosolids_managed_land_applied:0,latitude:40.286667,longitude:-79.991111},{facility_name:"THE WATER WORKS & SEWER BOARD OF THE CITY OF GADSDEN",city:"Gadsden","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:212,amount_of_biosolids_managed_land_applied:211.81,latitude:33.967945,longitude:-85.972499},{facility_name:"CITY OF SONORA WWTP",city:"Sonora","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:212,amount_of_biosolids_managed_land_applied:0,latitude:30.550972,longitude:-100.651583},{facility_name:"HARRIS COUNTY WCID 89 WWTP",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:212,amount_of_biosolids_managed_land_applied:0,latitude:29.593358,longitude:-95.364765},{facility_name:"FERGUS FALLS",city:"Fergus Falls","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:211,amount_of_biosolids_managed_land_applied:211,latitude:46.28188,longitude:-96.1126},{facility_name:"SAINT MARYS (CITY OF)",city:"St Marys","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:211,amount_of_biosolids_managed_land_applied:0,latitude:30.757993,longitude:-81.53817},{facility_name:"CONCORD WWTP",city:"Concord","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:211,amount_of_biosolids_managed_land_applied:0,latitude:42.462621,longitude:-71.353043},{facility_name:"COTTON BAYOU WWTP",city:"Mont Belvieu","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:210,amount_of_biosolids_managed_land_applied:0,latitude:29.841306,longitude:-94.846861},{facility_name:"DELTA CITY OF",city:"Delta","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:210,amount_of_biosolids_managed_land_applied:205,latitude:38.742198,longitude:-108.070824},{facility_name:"STEPHENVILLE WWTP",city:"Stephenville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:210,amount_of_biosolids_managed_land_applied:0,latitude:32.198489,longitude:-98.187606},{facility_name:"SAN LEON WWTF",city:"San Leon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:210,amount_of_biosolids_managed_land_applied:0,latitude:29.481056,longitude:-94.959639},{facility_name:"FAYETTEVILLE STP",city:"Fayetteville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:209,amount_of_biosolids_managed_land_applied:209.4,latitude:35.14564,longitude:-86.56483},{facility_name:"COTTAGE GROVE, CITY OF",city:"Cottage Grove","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:209,amount_of_biosolids_managed_land_applied:0,latitude:43.80777,longitude:-123.05011},{facility_name:"CLEARFIELD MUN AUTH.",city:"Clearfield","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:209,amount_of_biosolids_managed_land_applied:60.18,latitude:41.02207,longitude:-78.43941},{facility_name:"TOWN OF WARRENTON",city:"Warrenton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:209,amount_of_biosolids_managed_land_applied:209.02,latitude:36.379799,longitude:-78.168333},{facility_name:"CITY OF SWEETWATER WWTP",city:"Sweetwater","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:209,amount_of_biosolids_managed_land_applied:0,latitude:32.498167,longitude:-100.343972},{facility_name:"MARINE CORPS BASE, CAMP PENDLETON",city:"Camp Pendleton","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:209,amount_of_biosolids_managed_land_applied:0,latitude:33.28786,longitude:-117.43731},{facility_name:"GAFFNEY/CLARY WWTF",city:"Gaffney","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:208,amount_of_biosolids_managed_land_applied:208,latitude:35.05,longitude:-81.616666},{facility_name:"HORSHAM TOWNSHIP",city:"Horsham","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:208,amount_of_biosolids_managed_land_applied:0,latitude:40.218758,longitude:-75.154813},{facility_name:"MONTEREY STP",city:"Monterey","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:208,amount_of_biosolids_managed_land_applied:207.9,latitude:36.15351,longitude:-85.29338},{facility_name:"HUDSON (C)",city:"Hudson","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:208,amount_of_biosolids_managed_land_applied:0,latitude:42.2491,longitude:-73.78591},{facility_name:"MUSTANG BAYOU WWTF",city:"Missouri City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:207,amount_of_biosolids_managed_land_applied:0,latitude:29.539667,longitude:-95.504639},{facility_name:"MADELIA WASTEWATER TREATMENT PLANT",city:"Madelia","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:207,amount_of_biosolids_managed_land_applied:207,latitude:44.04328,longitude:-94.41952},{facility_name:"WESTWAY WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:207,amount_of_biosolids_managed_land_applied:0,latitude:29.8444,longitude:-95.54765},{facility_name:"WINDOM",city:"Windom","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:206,amount_of_biosolids_managed_land_applied:206,latitude:43.86074,longitude:-95.10897},{facility_name:"LONDON STP",city:"London","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:206,amount_of_biosolids_managed_land_applied:78,latitude:37.10638,longitude:-84.06683},{facility_name:"CITY OF HAVELOCK",city:"Havelock","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:206,amount_of_biosolids_managed_land_applied:205.52,latitude:34.887658,longitude:-76.909441},{facility_name:"MEMORIAL VILLAGES WA WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:205,amount_of_biosolids_managed_land_applied:0,latitude:29.746806,longitude:-95.507167},{facility_name:"DISCOVERY BAY WWTP",city:"Discovery Bay","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:205,amount_of_biosolids_managed_land_applied:0,latitude:37.90885809,longitude:-121.6054143},{facility_name:"FT. BEND CO. MUD 23 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:205,amount_of_biosolids_managed_land_applied:0,latitude:29.526306,longitude:-95.478083},{facility_name:"SCHOFIELD BARRACKS WWTP",city:"Wahiawa","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:205,amount_of_biosolids_managed_land_applied:0,latitude:21.49873211,longitude:-158.0336727},{facility_name:"BOONVILLE, CITY OF",city:"Boonville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:205,amount_of_biosolids_managed_land_applied:0,latitude:38.9757,longitude:-92.74277},{facility_name:"ALLIANCE WATER RESOURCES",city:"Cameron","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:204,amount_of_biosolids_managed_land_applied:790.73,latitude:39.68159797,longitude:-94.26280879},{facility_name:"WHITE OAK BAYOU REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:204,amount_of_biosolids_managed_land_applied:0,latitude:29.88554,longitude:-95.55032},{facility_name:"HARVARD STP, CITY OF",city:"Harvard","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:204,amount_of_biosolids_managed_land_applied:112,latitude:42.41483,longitude:-88.62527},{facility_name:"ROSAMOND WTF (PONDS)",city:"Rosamond","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:203,amount_of_biosolids_managed_land_applied:202.62,latitude:34.86616,longitude:-118.19369},{facility_name:"JTI CONSTRUCTORS WWTP",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:202,amount_of_biosolids_managed_land_applied:195.59,latitude:29.440833,longitude:-95.748888},{facility_name:"JACKSON, CITY OF",city:"Jackson","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:202,amount_of_biosolids_managed_land_applied:201.81,latitude:37.38286,longitude:-89.66805},{facility_name:"TEHACHAPI WWTP",city:"Tehachapi","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:202,amount_of_biosolids_managed_land_applied:0,latitude:35.13117,longitude:-118.4461},{facility_name:"PAYSON CITY CORP",city:"Payson","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:202,amount_of_biosolids_managed_land_applied:0,latitude:40.04363,longitude:-111.73844},{facility_name:"GREAT BARRINGTON W W T F",city:"Great Barrington","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:201,amount_of_biosolids_managed_land_applied:0,latitude:42.18994,longitude:-73.35709},{facility_name:"MINDEN-GARDNERVILLE SD WWTP",city:"Minden","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:201,amount_of_biosolids_managed_land_applied:201,latitude:38.95706757,longitude:-119.7712328},{facility_name:"LOS OSOS WATER RECYCLING FACILITY",city:"Los Osos","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:201,amount_of_biosolids_managed_land_applied:0,latitude:35.305498,longitude:-120.800669},{facility_name:"VERANDA WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:200,amount_of_biosolids_managed_land_applied:0,latitude:29.808241,longitude:-94.839528},{facility_name:"CITY OF DALHART WWTP",city:"Dalhart","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:200,amount_of_biosolids_managed_land_applied:0,latitude:36.037806,longitude:-102.499167},{facility_name:"RIO VISTA, CITY OF",city:"Rio Vista","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:200,amount_of_biosolids_managed_land_applied:0,latitude:38.186751,longitude:-121.703832},{facility_name:"LAUGHLIN WRF",city:"Laughlin","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:200,amount_of_biosolids_managed_land_applied:0,latitude:35.15663,longitude:-114.58885},{facility_name:"JAMESTOWN CITY OF",city:"Jamestown","state_postal;":"ND",state:"N.D.",amount_of_biosolids_generated:200,amount_of_biosolids_managed_land_applied:199.78,latitude:46.90846,longitude:-98.70543},{facility_name:"POMPTON LAKES BORO MUA",city:"Pompton Lakes","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:199,amount_of_biosolids_managed_land_applied:199.28,latitude:40.981747,longitude:-74.283051},{facility_name:"UTULEI STP",city:"Pago Pago","state_postal;":"AS",state:"American Samoa",amount_of_biosolids_generated:199,amount_of_biosolids_managed_land_applied:0,latitude:-14.2812,longitude:-170.701},{facility_name:"LINDENHURST SD STP",city:"Lindenhurst","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:199,amount_of_biosolids_managed_land_applied:198.69,latitude:42.430058,longitude:-88.032259},{facility_name:"BRAZORIA COUNTY MUD 3 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:198,amount_of_biosolids_managed_land_applied:0,latitude:29.542833,longitude:-95.344583},{facility_name:"FULTON COUNTY (LITTLE RIVER)",city:"Atlanta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:198,amount_of_biosolids_managed_land_applied:0,latitude:34.102683,longitude:-84.429545},{facility_name:"CITY OF BOONE",city:"Boone","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:198,amount_of_biosolids_managed_land_applied:108.28,latitude:42.05113,longitude:-93.88405948},{facility_name:"CHRISTIANSBURG TOWN OF",city:"Christiansburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:198,amount_of_biosolids_managed_land_applied:190.4,latitude:37.15688,longitude:-80.47159},{facility_name:"DYERSBURG STP",city:"Dyersburg","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:198,amount_of_biosolids_managed_land_applied:197.53,latitude:36.029238,longitude:-89.418128},{facility_name:"LAWRENCEBURG STP",city:"Lawrenceburg","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:197,amount_of_biosolids_managed_land_applied:177.36,latitude:35.241667,longitude:-87.353056},{facility_name:"BOLINGBROOK STP #1, VILLAGE OF",city:"Bolingbrook","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:197,amount_of_biosolids_managed_land_applied:197,latitude:41.71847,longitude:-88.07181},{facility_name:"SOUTHSIDE WWTP",city:"Alice","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:197,amount_of_biosolids_managed_land_applied:0,latitude:27.723,longitude:-98.031028},{facility_name:"CITY OF MARSHALL SOUTHSIDE PLANT",city:"Marshall","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:197,amount_of_biosolids_managed_land_applied:0,latitude:32.488639,longitude:-94.324574},{facility_name:"OAK LODGE SANITARY DISTRICT",city:"Milwaukie","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:196,amount_of_biosolids_managed_land_applied:195.34,latitude:45.423633,longitude:-122.652298},{facility_name:"MARTINEZ IV WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:196,amount_of_biosolids_managed_land_applied:0,latitude:29.440844,longitude:-98.24998},{facility_name:"LEON PLANT WWTP",city:"Gatesville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:196,amount_of_biosolids_managed_land_applied:195.83,latitude:31.426577,longitude:-97.74531},{facility_name:"SWANSEA STP, VILLAGE OF",city:"Swansea","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:195,amount_of_biosolids_managed_land_applied:225.9,latitude:38.52955,longitude:-89.98065},{facility_name:"CITY OF ROXBORO",city:"Roxboro","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:195,amount_of_biosolids_managed_land_applied:195,latitude:36.444475,longitude:-78.977889},{facility_name:"TAYLORVILLE SD STP",city:"Taylorville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:195,amount_of_biosolids_managed_land_applied:0,latitude:39.56013,longitude:-89.33373},{facility_name:"ODEM STREET WWTP",city:"Victoria","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:195,amount_of_biosolids_managed_land_applied:0,latitude:28.784786,longitude:-96.994649},{facility_name:"CITY OF BOERNE WWTP",city:"Boerne","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:195,amount_of_biosolids_managed_land_applied:0,latitude:29.7885,longitude:-98.715555},{facility_name:"CITY OF ALACHUA AWRF",city:"Alachua","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:194,amount_of_biosolids_managed_land_applied:194.4,latitude:29.79908,longitude:-82.49426},{facility_name:"STONEGATE VILLAGE METRO DIST.",city:"Parker","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:194,amount_of_biosolids_managed_land_applied:0,latitude:39.551402,longitude:-104.79351},{facility_name:"CITY OF DUNN",city:"Dunn","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:194,amount_of_biosolids_managed_land_applied:194.25,latitude:35.292,longitude:-78.685541},{facility_name:"FORT BEND COUNTY MUD 122 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:194,amount_of_biosolids_managed_land_applied:0,latitude:29.699389,longitude:-95.7255},{facility_name:"PENINSULA REG WATER REC PLANT",city:"Lewisville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:193,amount_of_biosolids_managed_land_applied:0,latitude:33.208417,longitude:-96.990583},{facility_name:"CITY OF COLEMAN WWTP",city:"Coleman","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:192,amount_of_biosolids_managed_land_applied:0,latitude:31.825139,longitude:-99.404778},{facility_name:"HARRIS COUNTY MUD 167 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:191,amount_of_biosolids_managed_land_applied:0,latitude:29.848698,longitude:-95.702392},{facility_name:"LONGWOOD WWTP",city:"Pearland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:191,amount_of_biosolids_managed_land_applied:0,latitude:29.5569,longitude:-95.2164},{facility_name:"NORTH KUEHLER WWTP",city:"New Braunfels","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:190,amount_of_biosolids_managed_land_applied:0,latitude:29.6892,longitude:-98.0991},{facility_name:"WASHINGTON TWP MUN AUTHORITY",city:"Waynesboro","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:190,amount_of_biosolids_managed_land_applied:189.5,latitude:39.725833,longitude:-77.593333},{facility_name:"WESTSIDE WWTP",city:"La Marque","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:189,amount_of_biosolids_managed_land_applied:0,latitude:29.35225,longitude:-94.983389},{facility_name:"BARNWELL WWTF",city:"Barnwell","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:189,amount_of_biosolids_managed_land_applied:0,latitude:33.2186164,longitude:-81.35082299},{facility_name:"CITY OF TOLEDO",city:"Toledo","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:189,amount_of_biosolids_managed_land_applied:188.79,latitude:41.99516,longitude:-92.57689},{facility_name:"BURLINGTON RIVERSIDE WWTP",city:"Burlington","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:189,amount_of_biosolids_managed_land_applied:0,latitude:44.486896,longitude:-73.193622},{facility_name:"MAYDE CREEK MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:188,amount_of_biosolids_managed_land_applied:188.29,latitude:29.815079,longitude:-95.70406},{facility_name:"CITY OF SOUTH HOUSTON",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:188,amount_of_biosolids_managed_land_applied:188.23,latitude:29.669861,longitude:-95.234889},{facility_name:"TELFORD BORO AUTH WWTP",city:"Telford","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:188,amount_of_biosolids_managed_land_applied:0,latitude:40.32118,longitude:-75.33902},{facility_name:"EAST BASTROP WWTF",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:188,amount_of_biosolids_managed_land_applied:0,latitude:30.10312,longitude:-97.31859},{facility_name:"TOWN OF HANOVER",city:"Hanover","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:188,amount_of_biosolids_managed_land_applied:0,latitude:43.69194,longitude:-72.29076},{facility_name:"EASLEY/MIDDLE BRANCH WWTP",city:"Easley","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:187,amount_of_biosolids_managed_land_applied:187,latitude:34.783611,longitude:-82.534444},{facility_name:"CANTON WEST STP, CITY OF",city:"Canton","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:187,amount_of_biosolids_managed_land_applied:0,latitude:40.54837,longitude:-90.04191},{facility_name:"HARRIS COUNTY WCID 92 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:187,amount_of_biosolids_managed_land_applied:69.0127676,latitude:30.084043,longitude:-95.385817},{facility_name:"PRASA SAN GERMAN",city:"San German","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:187,amount_of_biosolids_managed_land_applied:186.56,latitude:18.08331,longitude:-67.0462},{facility_name:"OYSTER CREEK WWTP",city:"Angleton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:186,amount_of_biosolids_managed_land_applied:0,latitude:29.158593,longitude:-95.460294},{facility_name:"MIRALOMAS MUD WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:186,amount_of_biosolids_managed_land_applied:0,latitude:29.591752,longitude:-98.580356},{facility_name:"WOODLAND PARK CITY OF",city:"Woodland Park","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:186,amount_of_biosolids_managed_land_applied:0,latitude:38.99590237,longitude:-105.055912},{facility_name:"HUNTLEY EAST STP, VILLAGE OF",city:"Huntley","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:186,amount_of_biosolids_managed_land_applied:186.03,latitude:42.1664,longitude:-88.4164},{facility_name:"CITY OF HICO WWTP",city:"Hico","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:186,amount_of_biosolids_managed_land_applied:0,latitude:31.978194,longitude:-98.026},{facility_name:"HUTCHINSON",city:"Hutchinson","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:186,amount_of_biosolids_managed_land_applied:185.85,latitude:44.87487,longitude:-94.35363},{facility_name:"HUNTSVILLE, CITY OF",city:"Huntsville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:186,amount_of_biosolids_managed_land_applied:0,latitude:36.1114,longitude:-93.7336},{facility_name:"PUNXSUTAWNEY BORO MUN AUTH",city:"Punxstawney","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:185,amount_of_biosolids_managed_land_applied:0,latitude:40.941402,longitude:-79.001564},{facility_name:"CAMDEN WWTF",city:"Camden","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:185,amount_of_biosolids_managed_land_applied:185.18,latitude:34.235278,longitude:-80.628333},{facility_name:"LEE WWTP, TOWN OF",city:"Lee","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:185,amount_of_biosolids_managed_land_applied:0,latitude:42.286286,longitude:-73.241279},{facility_name:"CHATHAM TWP MAIN STP",city:"Chatham","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:185,amount_of_biosolids_managed_land_applied:0,latitude:40.71808,longitude:-74.41776},{facility_name:"COEBURN-NORTON-WISE REGIONAL",city:"Coeburn","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:184,amount_of_biosolids_managed_land_applied:172.9,latitude:36.927381,longitude:-82.478246},{facility_name:"CITY OF MAYPEARL WWTP",city:"Maypearl","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:184,amount_of_biosolids_managed_land_applied:0,latitude:32.303722,longitude:-97.007667},{facility_name:"FARMVILLE WASTEWATER TREATMENT",city:"Farmville","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:184,amount_of_biosolids_managed_land_applied:178,latitude:37.30128,longitude:-78.38104},{facility_name:"FT BEND CO MUD 152 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:184,amount_of_biosolids_managed_land_applied:0,latitude:29.511917,longitude:-95.746806},{facility_name:"HULL W P C F",city:"Hull","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:183,amount_of_biosolids_managed_land_applied:0,latitude:42.306011,longitude:-70.899405},{facility_name:"LAFAYETTE CONSOLIDATED GOVERNMENT - NORTHEAST WWTP",city:"Lafayette","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:183,amount_of_biosolids_managed_land_applied:183.3,latitude:30.28134,longitude:-91.97596},{facility_name:"MONTAGUE WPCF",city:"Montague","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:183,amount_of_biosolids_managed_land_applied:0,latitude:42.55134494,longitude:-72.53117977},{facility_name:"MON VALLEY SEWAGE AUTHORITY",city:"Donora","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:182,amount_of_biosolids_managed_land_applied:0,latitude:40.16476,longitude:-79.86493},{facility_name:"CITY OF WHITEFISH",city:"Whitefish","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:182,amount_of_biosolids_managed_land_applied:0,latitude:48.39769972,longitude:-114.3276421},{facility_name:"HARRIS COUNTY MUD 432 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:181,amount_of_biosolids_managed_land_applied:181.47,latitude:29.823711,longitude:-95.789638},{facility_name:"CITY OF MERIDIAN WWTF 2",city:"Meridian","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:181,amount_of_biosolids_managed_land_applied:141.5,latitude:31.919072,longitude:-97.653843},{facility_name:"UNION TWP WWTP",city:"Mt. Pleasant","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:181,amount_of_biosolids_managed_land_applied:181.2,latitude:43.599492,longitude:-84.774788},{facility_name:"MURPHYSBORO STP, CITY OF",city:"Murphysboro","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:181,amount_of_biosolids_managed_land_applied:0,latitude:37.75928,longitude:-89.3614},{facility_name:"CITY OF FAIRFIELD",city:"Fairfield","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:181,amount_of_biosolids_managed_land_applied:180.6,latitude:41.00606,longitude:-91.9638},{facility_name:"TRAIL OF THE LAKES WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:180,amount_of_biosolids_managed_land_applied:0,latitude:29.963888,longitude:-95.208055},{facility_name:"CLAIBORNE UTILITIES DISTRICT STP",city:"Tazewell","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:180,amount_of_biosolids_managed_land_applied:180,latitude:36.46327,longitude:-83.55972},{facility_name:"JOLIET AUX SABLE CREEK WWTP",city:"Joliet","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:180,amount_of_biosolids_managed_land_applied:180,latitude:41.53523,longitude:-88.26855},{facility_name:"PINE MILL RANCH FT BEND MUD 57 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:180,amount_of_biosolids_managed_land_applied:0,latitude:29.721611,longitude:-95.829944},{facility_name:"BERKELEY HEIGHTS WPCF",city:"Berkeley Heights","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:179,amount_of_biosolids_managed_land_applied:0,latitude:40.689407,longitude:-74.441069},{facility_name:"BROOKFIELD CITY",city:"Brookfield","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:179,amount_of_biosolids_managed_land_applied:0,latitude:39.78646,longitude:-93.07542},{facility_name:"CITY OF JEFFERSON WWTP",city:"Jefferson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:179,amount_of_biosolids_managed_land_applied:0,latitude:32.777444,longitude:-94.349306},{facility_name:"SCHUYLKILL CNTY MUNI AUTH",city:"Pottsville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:179,amount_of_biosolids_managed_land_applied:0,latitude:40.68334,longitude:-76.19381},{facility_name:"TOWN OF MOREHEAD CITY",city:"Morehead City","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:178,amount_of_biosolids_managed_land_applied:177.67,latitude:34.734036,longitude:-76.736873},{facility_name:"HIGHWAY 181 SOUTH WWTP",city:"Elmendorf","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:178,amount_of_biosolids_managed_land_applied:0,latitude:29.276663,longitude:-98.336521},{facility_name:"GIG HARBOR STP",city:"Gig Harbor","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:177.3,latitude:47.33726,longitude:-122.596563},{facility_name:"LOS ALAMOS COUNTY - BAYO WWTP",city:"Los Alamos","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:177,latitude:35.88127,longitude:-106.29626},{facility_name:"SHREVEPORT, CITY OF (N HIGHLAN",city:"Shreveport","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:155,latitude:32.550167,longitude:-93.765753},{facility_name:"EAST PEORIA STP #1, CITY OF",city:"East Peoria","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:0,latitude:40.66601,longitude:-89.60366},{facility_name:"TOWN OF PURCELLVILLE STP",city:"Purcellville","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:64.28,latitude:39.13464,longitude:-77.71611},{facility_name:"GUNNISON CITY OF",city:"Gunnison","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:176.8,latitude:38.58124601,longitude:-106.9191344},{facility_name:"KERN SA MT VERNON WWTP",city:"Bakersfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:0,latitude:35.38371,longitude:-119.01523},{facility_name:"DETROIT LAKES",city:"Detroit Lakes","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:177,amount_of_biosolids_managed_land_applied:176.54,latitude:46.81152,longitude:-95.86468},{facility_name:"HARRIS COUNTY MUD 150 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:176,amount_of_biosolids_managed_land_applied:0,latitude:29.954111,longitude:-95.4665},{facility_name:"CITY OF VERNON WWTF",city:"Vernon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:175,amount_of_biosolids_managed_land_applied:0,latitude:34.163389,longitude:-99.269417},{facility_name:"SPEARFISH, CITY OF",city:"Spearfish, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:175,amount_of_biosolids_managed_land_applied:0,latitude:44.48962,longitude:-103.86042},{facility_name:"ANDOVER, CITY OF",city:"Andover","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:175,amount_of_biosolids_managed_land_applied:175.4,latitude:37.66487,longitude:-97.11143},{facility_name:"CITY OF SUGAR LAND NEW TERRITORY NORTH REGIONAL WWTF",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:175,amount_of_biosolids_managed_land_applied:0,latitude:29.578278,longitude:-95.696056},{facility_name:"MOUNT CARMEL STP, CITY OF",city:"Mount Carmel","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:175,amount_of_biosolids_managed_land_applied:175.024,latitude:38.400566,longitude:-87.773971},{facility_name:"EL PORTAL WWTF",city:"El Portal","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:175,amount_of_biosolids_managed_land_applied:0,latitude:37.6750267,longitude:-119.7938909},{facility_name:"RIDGEFIELD, TOWN OF (MAIN)",city:"Ridgefield","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:174,amount_of_biosolids_managed_land_applied:0,latitude:41.290159,longitude:-73.490438},{facility_name:"TOWN OF WALLACE",city:"Wallace","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:174,amount_of_biosolids_managed_land_applied:173.88,latitude:34.730915,longitude:-77.983318},{facility_name:"SEDRO WOOLLEY WWTP",city:"Sedro Woolley","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:174,amount_of_biosolids_managed_land_applied:173.77,latitude:48.49555,longitude:-122.235317},{facility_name:"HONESDALE BOROUGH",city:"Honesdale","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:174,amount_of_biosolids_managed_land_applied:0,latitude:41.55411,longitude:-75.24426},{facility_name:"OTTAWA WWTP PLANT",city:"Ottawa","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:173,amount_of_biosolids_managed_land_applied:172.91,latitude:38.62171252,longitude:-95.26973766},{facility_name:"CITY OF JACKSBORO",city:"Jacksboro","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:172,amount_of_biosolids_managed_land_applied:0,latitude:33.23425,longitude:-98.179722},{facility_name:"HARTFORD CITY WWTP",city:"Hartford City","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:172,amount_of_biosolids_managed_land_applied:0,latitude:40.421621,longitude:-85.38247837},{facility_name:"PRASA CAMUY",city:"Santurce","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:172,amount_of_biosolids_managed_land_applied:172.21,latitude:18.488446,longitude:-66.875818},{facility_name:"CITY OF LA FERIA WWTP",city:"La Feria","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:172,amount_of_biosolids_managed_land_applied:0,latitude:26.144079,longitude:-97.836575},{facility_name:"CAMDEN, CITY OF",city:"Camden","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:172,amount_of_biosolids_managed_land_applied:0,latitude:33.587175,longitude:-92.829008},{facility_name:"HARRIS COUNTY MUD 82 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:172,amount_of_biosolids_managed_land_applied:0,latitude:30.072454,longitude:-95.377182},{facility_name:"UPPER THOMPSON SANITATION DISTRICT",city:"Estes Park","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:171,amount_of_biosolids_managed_land_applied:0,latitude:40.38028952,longitude:-105.5246375},{facility_name:"HONOLULU WAIANAE WWTP",city:"Kapolei","state_postal;":"HI",state:"Hawaii",amount_of_biosolids_generated:171,amount_of_biosolids_managed_land_applied:0,latitude:21.33003,longitude:-158.08158},{facility_name:"TOWN OF BENNINGTON",city:"Bennington","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:171,amount_of_biosolids_managed_land_applied:171,latitude:42.87735,longitude:-73.19719},{facility_name:"COLD SPRING",city:"Cold Spring","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:171,amount_of_biosolids_managed_land_applied:171,latitude:45.45894,longitude:-94.41811},{facility_name:"COVINGTON SEW. TREAT. PLANT,CO",city:"Covington","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:171,amount_of_biosolids_managed_land_applied:0,latitude:37.759154,longitude:-79.995574},{facility_name:"SNOQUALMIE WWTP AND RECLAIM FACILITY",city:"Snoqualmie","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:171,amount_of_biosolids_managed_land_applied:170.75,latitude:47.542621,longitude:-121.829782},{facility_name:"CITY OF PORTLAND",city:"Portland","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:170,amount_of_biosolids_managed_land_applied:170,latitude:36.58724,longitude:-86.52441},{facility_name:"CITY OF SIOUX CENTER",city:"Sioux Center","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:170,amount_of_biosolids_managed_land_applied:169.9,latitude:43.08056,longitude:-96.17704},{facility_name:"HARRIS COUNTY MUD 400 WWTP 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:170,amount_of_biosolids_managed_land_applied:169.898937,latitude:29.945833,longitude:-95.219444},{facility_name:"EAST WINDSOR WPCF",city:"East Windsor","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:170,amount_of_biosolids_managed_land_applied:0,latitude:41.919039,longitude:-72.619763},{facility_name:"NEWTON, CITY OF",city:"Newton","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:170,amount_of_biosolids_managed_land_applied:169.65,latitude:38.21065424,longitude:-97.35441902},{facility_name:"ROCK CREEK WWTP",city:"Borger","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:170,amount_of_biosolids_managed_land_applied:0,latitude:35.668333,longitude:-101.404444},{facility_name:"SYCAMORE STP - NORTH PLANT",city:"Sycamore","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:169,amount_of_biosolids_managed_land_applied:179.02,latitude:41.996043,longitude:-88.693241},{facility_name:"JEFFERSON COUNTY COMMISSION ENVIRONMENTAL SERVICES DEPARTMENT",city:"Birmingham","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:169,amount_of_biosolids_managed_land_applied:169,latitude:33.5349,longitude:-86.5606},{facility_name:"LINCOLN COUNTY",city:"Lincolnton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:169,amount_of_biosolids_managed_land_applied:169,latitude:35.41842,longitude:-81.03468},{facility_name:"PLYMOUTH WPCF",city:"Pequabuck","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:169,amount_of_biosolids_managed_land_applied:0,latitude:41.668987,longitude:-72.991771},{facility_name:"CITY OF WARRENTON",city:"Warrenton","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:169,amount_of_biosolids_managed_land_applied:168.93,latitude:38.820678,longitude:-91.151743},{facility_name:"BOROUGH OF HUNTINGDON",city:"Huntingdon","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:169,amount_of_biosolids_managed_land_applied:168.87,latitude:40.475907,longitude:-78.001114},{facility_name:"BENNETTSVILLE WWTF",city:"Bennettsville","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:168,amount_of_biosolids_managed_land_applied:168,latitude:34.516667,longitude:-79.673333},{facility_name:"CITY OF NIXON WWTP",city:"Nixon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:168,amount_of_biosolids_managed_land_applied:0,latitude:29.284241,longitude:-97.768972},{facility_name:"EASTERN SNYDER COUNTY REGIONAL",city:"Selinsgrove","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:168,amount_of_biosolids_managed_land_applied:0,latitude:40.88715856,longitude:-76.82407072},{facility_name:"WOODSTREAM STP",city:"Marlton","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:168,amount_of_biosolids_managed_land_applied:0,latitude:39.87960532,longitude:-74.90819647},{facility_name:"CITY OF STOCKBRIDGE",city:"Stockbridge","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:167,amount_of_biosolids_managed_land_applied:94,latitude:33.550771,longitude:-84.226582},{facility_name:"HONDO WWTP",city:"Hondo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:166,amount_of_biosolids_managed_land_applied:0,latitude:29.337716,longitude:-99.128837},{facility_name:"LINCOLN GREEN REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:166,amount_of_biosolids_managed_land_applied:0,latitude:29.941625,longitude:-95.466629},{facility_name:"CITY OF CUERO WWTP",city:"Cuero","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:166,amount_of_biosolids_managed_land_applied:0,latitude:29.068497,longitude:-97.29453},{facility_name:"CITY OF MUENSTER WWTP",city:"Muenster","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:166,amount_of_biosolids_managed_land_applied:0,latitude:33.643021,longitude:-97.372335},{facility_name:"CITY OF WHITEWRIGHT WWTP",city:"Whitewright","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:166,amount_of_biosolids_managed_land_applied:0,latitude:33.520858,longitude:-96.392039},{facility_name:"MOREHEAD STP",city:"Morehead","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:165,amount_of_biosolids_managed_land_applied:165.13,latitude:38.151905,longitude:-83.513849},{facility_name:"FERDINAND WWTP",city:"Ferdinand","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:164,amount_of_biosolids_managed_land_applied:0,latitude:38.221194,longitude:-86.868306},{facility_name:"TOPPENISH, CITY OF",city:"Toppenish","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:164,amount_of_biosolids_managed_land_applied:0,latitude:46.368668,longitude:-120.284227},{facility_name:"RENN ROAD MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:163,amount_of_biosolids_managed_land_applied:0,latitude:29.67755,longitude:-95.63417},{facility_name:"NORTH BEND STP",city:"North Bend","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:163,amount_of_biosolids_managed_land_applied:0,latitude:47.499118,longitude:-121.78581},{facility_name:"LYNN BAYOU WWTF",city:"Port Lavaca","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:163,amount_of_biosolids_managed_land_applied:0,latitude:28.624917,longitude:-96.629389},{facility_name:"CITY OF PERRYVILLE",city:"Perryville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:163,amount_of_biosolids_managed_land_applied:163,latitude:37.72742,longitude:-89.86481},{facility_name:"CRAWFORD CREEK WPCP",city:"Grovetown","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:163,amount_of_biosolids_managed_land_applied:162.84,latitude:33.51,longitude:-82.163556},{facility_name:"KLEINWOOD CENTRAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:163,amount_of_biosolids_managed_land_applied:103.795,latitude:30.00338,longitude:-95.524308},{facility_name:"CITY OF KINGSVILLE 1 MGD WWTF",city:"Kingsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:162,amount_of_biosolids_managed_land_applied:0,latitude:27.467222,longitude:-97.83},{facility_name:"REID ROAD MUD 1 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:162,amount_of_biosolids_managed_land_applied:162.2,latitude:29.924701,longitude:-95.569269},{facility_name:"NEW PRAGUE",city:"New Prague","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:162,amount_of_biosolids_managed_land_applied:162,latitude:44.5597,longitude:-93.566995},{facility_name:"PROSSER POTW",city:"Prosser","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:162,amount_of_biosolids_managed_land_applied:0,latitude:46.213995,longitude:-119.763422},{facility_name:"WILLOWBROOK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:162,amount_of_biosolids_managed_land_applied:0,latitude:29.954389,longitude:-95.531861},{facility_name:"NEW CANEY MUD WWTP",city:"New Caney","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:162,amount_of_biosolids_managed_land_applied:0,latitude:30.138306,longitude:-95.2035},{facility_name:"CLE ELUM POTW",city:"Cle Elum","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:162,amount_of_biosolids_managed_land_applied:0,latitude:47.187707,longitude:-120.91027},{facility_name:"MOORESTOWN TOWNSHIP STP",city:"Moorestown","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:161,amount_of_biosolids_managed_land_applied:161.13,latitude:39.96224,longitude:-74.98782},{facility_name:"MOUNTAIN HOME, CITY OF",city:"Mountain Home","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:161,amount_of_biosolids_managed_land_applied:0,latitude:36.300634,longitude:-92.381545},{facility_name:"BROOKSVILLE CITY OF COBB ROAD WWTF",city:"Brooksville","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:160,amount_of_biosolids_managed_land_applied:160,latitude:28.5621,longitude:-82.42081},{facility_name:"TOWN OF MAGGIE VALLEY",city:"Maggie Valley","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:160,amount_of_biosolids_managed_land_applied:160,latitude:35.51781,longitude:-83.09481},{facility_name:"DUNLAP WWTF",city:"Seguin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:160,amount_of_biosolids_managed_land_applied:156,latitude:29.662444,longitude:-98.071667},{facility_name:"LAKE CHARLES, CITY OF- STP",city:"Lake Charles","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:160,amount_of_biosolids_managed_land_applied:0,latitude:30.125209,longitude:-93.289598},{facility_name:"NORTHWEST HARRIS COUNTY MUD 32 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:159,amount_of_biosolids_managed_land_applied:0,latitude:30.063288,longitude:-95.516575},{facility_name:"CITY OF CHARLES CITY",city:"Charles City","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:159,amount_of_biosolids_managed_land_applied:0,latitude:43.068636,longitude:-92.674704},{facility_name:"CITY OF SHENANDOAH WWTP",city:"Shenandoah","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:159,amount_of_biosolids_managed_land_applied:0,latitude:30.189821,longitude:-95.449386},{facility_name:"CITY OF PAMPA WWTP",city:"Pampa","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:158,amount_of_biosolids_managed_land_applied:0,latitude:35.572856,longitude:-100.929587},{facility_name:"MONTEVIDEO",city:"Montevideo","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:158,amount_of_biosolids_managed_land_applied:158.19,latitude:44.95171,longitude:-95.72034},{facility_name:"UNIVERSITY OF CONNECTICUT",city:"Storrs","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:158,amount_of_biosolids_managed_land_applied:0,latitude:41.809771,longitude:-72.261402},{facility_name:"LAKE GEORGE (V)",city:"Lake George","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:157,amount_of_biosolids_managed_land_applied:0,latitude:43.4309,longitude:-73.716206},{facility_name:"FRISCO SANITATION DISTRICT",city:"Frisco","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:156.17,latitude:39.5785896,longitude:-106.0911179},{facility_name:"HAMPSHIRE STP, VILLAGE OF",city:"Hampshire","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:156.12,latitude:42.09973,longitude:-88.53505},{facility_name:"BEARDSTOWN SD STP",city:"Beardstown","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:155.08,latitude:40.010673,longitude:-90.440743},{facility_name:"ROBSON RANCH WWTP",city:"Denton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:156,latitude:33.145389,longitude:-97.265278},{facility_name:"DANVILLE MUN AUTH",city:"Danville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:156,latitude:40.962003,longitude:-76.617717},{facility_name:"EAST DUNDEE WWTP, VILLAGE OF",city:"East Dundee","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:155.9,latitude:42.08983,longitude:-88.27323},{facility_name:"PEASE DEVELOPMENT AUTHORITY",city:"Portstmouth","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:0,latitude:43.04657,longitude:-70.77497},{facility_name:"GOWANDA (V)",city:"Gowanda","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:156,amount_of_biosolids_managed_land_applied:0,latitude:42.46403,longitude:-78.93386},{facility_name:"FORT SCOTT, CITY OF",city:"Fort Scott","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:155,amount_of_biosolids_managed_land_applied:155,latitude:37.81329033,longitude:-94.71931341},{facility_name:"TWA-LAKE MARION",city:"Kissimmee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:155,amount_of_biosolids_managed_land_applied:0,latitude:28.062977,longitude:-81.50783},{facility_name:"PETERS TWP. WASHINGTON COUNTY",city:"Mcmurry","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:155,amount_of_biosolids_managed_land_applied:0,latitude:40.289916,longitude:-80.11101},{facility_name:"HUTTO WWTP",city:"Hutto","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:154,amount_of_biosolids_managed_land_applied:0,latitude:30.54025,longitude:-97.539583},{facility_name:"CENTRAL IRON RANGE SANITARY SEWER DISTRICT WWTP",city:"Chisholm","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:154,amount_of_biosolids_managed_land_applied:0,latitude:47.4915,longitude:-92.88536},{facility_name:"HARRIS COUNTY MUD 284 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:154,amount_of_biosolids_managed_land_applied:0,latitude:29.841174,longitude:-95.713347},{facility_name:"AIRPORT WWTF",city:"Galveston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:154,amount_of_biosolids_managed_land_applied:0,latitude:29.270882,longitude:-94.848428},{facility_name:"WARE W W T P",city:"Ware","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:154,amount_of_biosolids_managed_land_applied:0,latitude:42.250375,longitude:-72.250118},{facility_name:"CITY OF MAGNOLIA WWTP",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:153,amount_of_biosolids_managed_land_applied:0,latitude:30.190472,longitude:-95.752444},{facility_name:"CITY OF DONNA WWTP",city:"Donna","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:153,amount_of_biosolids_managed_land_applied:153,latitude:26.148333,longitude:-98.053333},{facility_name:"CITY OF ELKINS, WWTP",city:"Elkins","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:153,amount_of_biosolids_managed_land_applied:153,latitude:38.92697,longitude:-79.84945},{facility_name:"WILD HORSE RANCH WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:153,amount_of_biosolids_managed_land_applied:0,latitude:30.316,longitude:-97.569667},{facility_name:"TOWN OF SURF CITY",city:"Surf City","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:153,amount_of_biosolids_managed_land_applied:152.8,latitude:34.48035,longitude:-77.55286},{facility_name:"ROCK FALLS, CITY OF",city:"Rock Falls","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:153,amount_of_biosolids_managed_land_applied:0,latitude:41.780333,longitude:-89.706139},{facility_name:"GRANVILLE (V)",city:"Granville","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:29.78,latitude:43.40214,longitude:-73.2658},{facility_name:"HARRIS COUNTY MUD 170 REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:152.38,latitude:29.917694,longitude:-95.587111},{facility_name:"A & M HEEP WWTP",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:0,latitude:30.082194,longitude:-97.796667},{facility_name:"MCPHERSON, CITY OF",city:"Mcpherson","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:152,latitude:38.37354408,longitude:-97.65516622},{facility_name:"KIMBALL WWTF",city:"Kimball","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:0,latitude:41.23624,longitude:-103.66299},{facility_name:"INTERCONTINENTAL AIRPORT WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:0,latitude:29.962417,longitude:-95.357139},{facility_name:"ANNANDALE/MAPLE LAKE",city:"Unknown","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:151.9,latitude:46.3161343,longitude:-94.1994801},{facility_name:"NAZARETH BOROUGH MUNICIPAL AUT",city:"Nazareth","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:151.8,latitude:40.75665368,longitude:-75.328109},{facility_name:"MECHANICSBURG BOROUGH MUNICIPA",city:"Mechanicsburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:152,amount_of_biosolids_managed_land_applied:151.6,latitude:40.211224,longitude:-77.025962},{facility_name:"HARRIS COUNTY MUD 278 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:0,latitude:29.962,longitude:-95.249806},{facility_name:"DECKER HILLS WWTP",city:"Granbury","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:0,latitude:30.172806,longitude:-95.635556},{facility_name:"TROPHY CLUB MUD 1",city:"Trophy Club","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:0,latitude:32.99714,longitude:-97.18692},{facility_name:"METRO CENTRAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:0,latitude:29.590377,longitude:-95.156091},{facility_name:"CITY OF ELSA WWTP",city:"Elsa","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:151.03,latitude:26.304056,longitude:-97.999889},{facility_name:"CITY OF THOMSON",city:"Thomson","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:151,latitude:33.452824,longitude:-82.506639},{facility_name:"SHEFFIELD UTILITIES",city:"Sheffield","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:151,latitude:34.7583,longitude:-87.7176},{facility_name:"WATERFORD (T)",city:"Waterford","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:128.51,latitude:42.79026,longitude:-73.67861},{facility_name:"CITY OF OSCEOLA",city:"Osceola","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:150.75,latitude:41.01811656,longitude:-93.77917876},{facility_name:"WILBARGER CREEK WWTP",city:"Manor","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:0,latitude:30.34937,longitude:-97.54003},{facility_name:"NORTHAMPTON MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:0,latitude:30.114917,longitude:-95.511028},{facility_name:"BISSONETT MUD",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:151,amount_of_biosolids_managed_land_applied:0,latitude:29.680574,longitude:-95.61121},{facility_name:"WOODSVILLE W W T F",city:"Woodsville","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:150,amount_of_biosolids_managed_land_applied:0,latitude:44.14646,longitude:-72.03642},{facility_name:"POLLARD CREEK WWTP",city:"Mineral Wells","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:150,amount_of_biosolids_managed_land_applied:0,latitude:32.78771,longitude:-98.13299},{facility_name:"VALLEY RANCH WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:150,amount_of_biosolids_managed_land_applied:0,latitude:30.126593,longitude:-95.245382},{facility_name:"PRASA HUMACAO WWTP",city:"Bo. Rio Abajo","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:149,amount_of_biosolids_managed_land_applied:0,latitude:18.217648,longitude:-66.4107992},{facility_name:"GREENBRIER COUNTY PSD NO. 2",city:"Rainelle","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:149,amount_of_biosolids_managed_land_applied:164.6,latitude:37.976817,longitude:-80.760912},{facility_name:"WYOMISSING VALLEY JOINT MUN AU",city:"Berks County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:149,amount_of_biosolids_managed_land_applied:149.25,latitude:40.32706,longitude:-75.94319},{facility_name:"BATESVILLE WWTP, CITY OF",city:"Batesville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:149,amount_of_biosolids_managed_land_applied:148.8,latitude:39.2972,longitude:-85.22346},{facility_name:"BAYOU LA BATRE UTILITY BOARD",city:"Bayou La Batre","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:149,amount_of_biosolids_managed_land_applied:148.74,latitude:30.384945,longitude:-88.253264},{facility_name:"LAKE CITY",city:"Lake City","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:149,amount_of_biosolids_managed_land_applied:0,latitude:44.43794,longitude:-92.26285},{facility_name:"RED BLUFF WWRP",city:"Red Bluff","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:149,amount_of_biosolids_managed_land_applied:0,latitude:40.18078782,longitude:-122.2370883},{facility_name:"FORT BEND COUNTY MUD 30 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:148,amount_of_biosolids_managed_land_applied:0,latitude:29.689389,longitude:-95.679667},{facility_name:"CLEAR LAKE SANITARY DISTRICT",city:"Clear Lake","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:148,amount_of_biosolids_managed_land_applied:148,latitude:43.1025,longitude:-93.4075},{facility_name:"DANSVILLE (V)",city:"Dansville","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:148,amount_of_biosolids_managed_land_applied:148,latitude:42.55924,longitude:-77.69544},{facility_name:"BERRYVILLE, CITY OF",city:"Berryville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:148,amount_of_biosolids_managed_land_applied:0,latitude:36.357222,longitude:-93.578889},{facility_name:"REMINGTON MUD 1 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:148,amount_of_biosolids_managed_land_applied:0,latitude:29.91801,longitude:-95.6685},{facility_name:"ROTTERDAM (T)",city:"Schenectady","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:148,amount_of_biosolids_managed_land_applied:0,latitude:42.78615,longitude:-73.97401},{facility_name:"PLUM GROVE WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:148,amount_of_biosolids_managed_land_applied:0,latitude:30.18716,longitude:-95.08018},{facility_name:"LEAD-DEADWOOD SANITARY DISTRICT",city:"Deadwood","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:147,amount_of_biosolids_managed_land_applied:147.1,latitude:44.38649,longitude:-103.71246},{facility_name:"WINOOSKI SEWAGE TREATMENT PLANT",city:"Winooski","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:145,amount_of_biosolids_managed_land_applied:145.49,latitude:44.490788,longitude:-73.197733},{facility_name:"ADAMS W W T P",city:"Adams","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:145,amount_of_biosolids_managed_land_applied:0,latitude:42.644677,longitude:-73.108628},{facility_name:"CITY OF WALLER WWTP",city:"Waller","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:145,amount_of_biosolids_managed_land_applied:145.34,latitude:30.0485,longitude:-95.924028},{facility_name:"CITY OF WEST UNIVERSITY PLACE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:145,amount_of_biosolids_managed_land_applied:0,latitude:29.696699,longitude:-95.420278},{facility_name:"CITY OF CUBA",city:"Cuba","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:145,amount_of_biosolids_managed_land_applied:144.5,latitude:38.062688,longitude:-91.407422},{facility_name:"ONTARIO (T)",city:"Ontario","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:145,amount_of_biosolids_managed_land_applied:0,latitude:43.27589,longitude:-77.27657},{facility_name:"POTSDAM (V)",city:"Potsdam","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:144,amount_of_biosolids_managed_land_applied:144.45,latitude:44.63675425,longitude:-74.8666111},{facility_name:"MANTENO WPCC, VILLAGE OF",city:"Manteno","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:144,amount_of_biosolids_managed_land_applied:167.88,latitude:41.2417,longitude:-87.8383},{facility_name:"STONINGTON-PAWCATUCK WPCF",city:"Pawcatuck","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:144,amount_of_biosolids_managed_land_applied:0,latitude:41.351929,longitude:-71.835051},{facility_name:"JEFFERSON CITY OF STP",city:"Jefferson","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:144,amount_of_biosolids_managed_land_applied:143.8,latitude:42.00807,longitude:-94.381052},{facility_name:"CITY OF TROY",city:"Troy","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:144,amount_of_biosolids_managed_land_applied:122,latitude:38.97889,longitude:-90.97062},{facility_name:"CITY OF TROY",city:"Troy","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:144,amount_of_biosolids_managed_land_applied:122,latitude:38.97889,longitude:-90.97062},{facility_name:"ORANGE COUNTY WWTF",city:"Vidor","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:143,amount_of_biosolids_managed_land_applied:0,latitude:30.130472,longitude:-94.031278},{facility_name:"MEADOWHILL REGIONAL MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:143,amount_of_biosolids_managed_land_applied:143.23,latitude:30.071361,longitude:-95.471722},{facility_name:"ABBEVILLE, CITY OF",city:"Abbeville","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:143,amount_of_biosolids_managed_land_applied:143,latitude:29.969882,longitude:-92.117076},{facility_name:"CORTEZ SANITATION DISTRICT",city:"Cortez","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:143,amount_of_biosolids_managed_land_applied:0,latitude:37.3497833,longitude:-108.576687},{facility_name:"NORTH BROOKFIELD W W T P",city:"North Brookfield","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:143,amount_of_biosolids_managed_land_applied:0,latitude:42.248876,longitude:-72.074475},{facility_name:"JERSEYVILLE STP, CITY OF",city:"Jerseyville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:143,amount_of_biosolids_managed_land_applied:0,latitude:39.10857,longitude:-90.34163},{facility_name:"DELRAN TWP SEWER UTILITY",city:"Delran","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:142,amount_of_biosolids_managed_land_applied:142.13,latitude:40.02518978,longitude:-74.94635171},{facility_name:"WICHITA FALLS NORTHSIDE WWTP",city:"Wichita Falls","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:142,amount_of_biosolids_managed_land_applied:0,latitude:33.995583,longitude:-98.517222},{facility_name:"WINCHESTER WPCF/WINSTED WPCF",city:"Winchester","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:142,amount_of_biosolids_managed_land_applied:0,latitude:41.97774315,longitude:-73.02317},{facility_name:"SEASIDE, CITY OF",city:"Seaside","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:142,amount_of_biosolids_managed_land_applied:10,latitude:46.005499,longitude:-123.923263},{facility_name:"PERRY / WILLARD REGIONAL WASTEWATER TREATMENT PLANT",city:"Willard","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:142,amount_of_biosolids_managed_land_applied:0,latitude:41.426667,longitude:-112.061944},{facility_name:"CITY OF DECORAH",city:"Decorah","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:141,amount_of_biosolids_managed_land_applied:141.32,latitude:43.40697547,longitude:-91.59050166},{facility_name:"PINE TRAILS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:141,amount_of_biosolids_managed_land_applied:0,latitude:29.812389,longitude:-95.202556},{facility_name:"CITY OF ADAIRSVILLE (NORTH WPCP)",city:"Adairsville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:141,amount_of_biosolids_managed_land_applied:113.08,latitude:34.373874,longitude:-84.942255},{facility_name:"SUNNYSIDE POTW",city:"Sunnyside","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:141,amount_of_biosolids_managed_land_applied:0,latitude:46.313889,longitude:-120.0175},{facility_name:"TICONDEROGA (T)",city:"Ticonderoga","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:141,amount_of_biosolids_managed_land_applied:140.82,latitude:43.84873,longitude:-73.42225},{facility_name:"CITY OF COTULLA WWTP",city:"Cotulla","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:139,amount_of_biosolids_managed_land_applied:0,latitude:28.427361,longitude:-99.220056},{facility_name:"COLUMBIA CITY WWTP",city:"Columbia City","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:139,amount_of_biosolids_managed_land_applied:0,latitude:41.144889,longitude:-85.490194},{facility_name:"GRAND LAKES REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:139,amount_of_biosolids_managed_land_applied:0,latitude:29.711611,longitude:-95.748833},{facility_name:"CREEDSIDE RANCH WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:138,amount_of_biosolids_managed_land_applied:44.2204736,latitude:29.676944,longitude:-95.829444},{facility_name:"WILMINGTON STP, CITY OF",city:"Wilmington","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:138,amount_of_biosolids_managed_land_applied:0,latitude:41.32001,longitude:-88.14218},{facility_name:"GLENCOE",city:"Glencoe","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:138,amount_of_biosolids_managed_land_applied:137.8,latitude:44.76571,longitude:-94.13426},{facility_name:"CITY OF GRAHAM",city:"Graham","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:138,amount_of_biosolids_managed_land_applied:137.792,latitude:36.049554,longitude:-79.372942},{facility_name:"BURKBURNETT WWTF",city:"Burkburnett","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:138,amount_of_biosolids_managed_land_applied:0,latitude:34.100676,longitude:-98.562758},{facility_name:"THOMASTON WPCF",city:"Thomaston","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:137,amount_of_biosolids_managed_land_applied:0,latitude:41.646386,longitude:-73.078758},{facility_name:"DALLAS, CITY OF",city:"Dallas","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:137,amount_of_biosolids_managed_land_applied:0,latitude:44.918831,longitude:-123.254843},{facility_name:"CORNING WWTF",city:"Corning","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:137,amount_of_biosolids_managed_land_applied:0,latitude:39.91513459,longitude:-122.160075},{facility_name:"CITY OF OSKALOOSA",city:"Oskaloosa","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:136,amount_of_biosolids_managed_land_applied:136.05,latitude:41.29381,longitude:-92.64506},{facility_name:"TOWN OF ORANGE PARK",city:"Orange Park","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:136,amount_of_biosolids_managed_land_applied:135.97,latitude:30.18283,longitude:-81.70874},{facility_name:"DESSAU WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:136,amount_of_biosolids_managed_land_applied:0,latitude:30.40637,longitude:-97.64126},{facility_name:"CORNING (C)",city:"Corning","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:135,amount_of_biosolids_managed_land_applied:0,latitude:42.14234,longitude:-77.04642},{facility_name:"CITY OF OELWEIN",city:"Oelwein","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:135,amount_of_biosolids_managed_land_applied:288,latitude:42.691087,longitude:-91.93311704},{facility_name:"RIFLE REGIONAL WW RECLAMATION FACILITY",city:"Rifle","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:135,amount_of_biosolids_managed_land_applied:0,latitude:39.55519594,longitude:-107.7715774},{facility_name:"HUNTER'S GLEN MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:135,amount_of_biosolids_managed_land_applied:134.53,latitude:29.81271,longitude:-95.20992},{facility_name:"PETERBOROUGH TOWN OF",city:"Peterborough","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:134,amount_of_biosolids_managed_land_applied:0,latitude:42.909213,longitude:-71.933895},{facility_name:"VALLEY JOINT SEW AUTH",city:"Athens","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:134,amount_of_biosolids_managed_land_applied:0,latitude:41.96623,longitude:-76.51659},{facility_name:"HARRIS COUNTY WCID 119 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:134,amount_of_biosolids_managed_land_applied:133.852313,latitude:30.025456,longitude:-95.553943},{facility_name:"KINGWOOD WEST WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:134,amount_of_biosolids_managed_land_applied:0,latitude:29.967114,longitude:-95.169899},{facility_name:"PLAQUEMINES PAR (BELLE CHAS",city:"Belle Chasse","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:134,amount_of_biosolids_managed_land_applied:0,latitude:29.80456,longitude:-90.01405},{facility_name:"HARBOR POINT WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:133,amount_of_biosolids_managed_land_applied:0,latitude:30.915763,longitude:-95.254125},{facility_name:"YADKIN VALLEY SEWER AUTHORITY INC",city:"Elkin","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:133,amount_of_biosolids_managed_land_applied:133.27,latitude:36.256801,longitude:-80.832757},{facility_name:"CHARLESTON STP, CITY OF",city:"Charleston","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:133,amount_of_biosolids_managed_land_applied:179.09,latitude:39.496692,longitude:-88.190829},{facility_name:"FT BEND COUNTY MUD 151 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:133,amount_of_biosolids_managed_land_applied:0,latitude:29.761639,longitude:-95.86525},{facility_name:"WENATCHEE POTW",city:"Wenatchee","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:133,amount_of_biosolids_managed_land_applied:132.9,latitude:47.428515,longitude:-120.310029},{facility_name:"CITY OF WETUMPKA WW AND S BOARD",city:"Wetumpka","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:133,amount_of_biosolids_managed_land_applied:132.74,latitude:32.5227,longitude:-86.2209},{facility_name:"WELLSBORO MUN AUTH",city:"Wellsboro","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:133,amount_of_biosolids_managed_land_applied:0,latitude:41.74724,longitude:-77.30003},{facility_name:"HARRIS CO MUD 358",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:132,amount_of_biosolids_managed_land_applied:132.11,latitude:29.985778,longitude:-95.726611},{facility_name:"MIDDLETOWN WASTEWATER TREATMEN",city:"Dauphin County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:132,amount_of_biosolids_managed_land_applied:129.48,latitude:40.191291,longitude:-76.738591},{facility_name:"BANNING WWTP",city:"Banning","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:132,amount_of_biosolids_managed_land_applied:0,latitude:33.917514,longitude:-116.843677},{facility_name:"BUENA VISTA SANITATION DISTRICT",city:"Buena Vista","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:132,amount_of_biosolids_managed_land_applied:0,latitude:38.84897898,longitude:-106.1795175},{facility_name:"CITY OF TUSCUMBIA DEPARTMENT OF UTILITIES",city:"Tuscumbia","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:132,amount_of_biosolids_managed_land_applied:131.7,latitude:34.7317,longitude:-87.7136},{facility_name:"WALKER COUNTY WATER & SEWERAGE AUTHORITY",city:"Chickamauga","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:132,amount_of_biosolids_managed_land_applied:0,latitude:34.876511,longitude:-85.276336},{facility_name:"ERIE CO SD#8",city:"Buffalo","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:132,amount_of_biosolids_managed_land_applied:0,latitude:42.88376,longitude:-78.87736},{facility_name:"CITY OF GRINNELL",city:"Grinnell","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:131,amount_of_biosolids_managed_land_applied:131.42,latitude:41.73738,longitude:-92.723202},{facility_name:"CITY OF CHILLICOTHE",city:"Chillicothe","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:131,amount_of_biosolids_managed_land_applied:131.1,latitude:39.796249,longitude:-93.553698},{facility_name:"BLOOMFIELD, CITY OF",city:"Bloomfield","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:131,amount_of_biosolids_managed_land_applied:0,latitude:36.70075,longitude:-107.992414},{facility_name:"TRENTON MUNICIPAL UTILITIES",city:"Trenton","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:131,amount_of_biosolids_managed_land_applied:0,latitude:40.07551,longitude:-93.60062},{facility_name:"VILLAGE OF BOLINGBROOK STP #3",city:"Bolingbrook","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:130,amount_of_biosolids_managed_land_applied:130,latitude:41.702363,longitude:-88.076058},{facility_name:"CITY OF MARION",city:"Marion","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:130,amount_of_biosolids_managed_land_applied:129.79,latitude:35.652445,longitude:-81.95739},{facility_name:"CITY OF FULSHEAR WWTP",city:"Fulshear","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:129,amount_of_biosolids_managed_land_applied:0,latitude:29.68775,longitude:-95.905917},{facility_name:"FOUNTAIN SANITATION DISTRICT",city:"Fountain","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:129,amount_of_biosolids_managed_land_applied:0,latitude:38.667223,longitude:-104.703165},{facility_name:"JOHN HARGROVE WATER RECLAMATION FACILITY",city:"Pearland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:129,amount_of_biosolids_managed_land_applied:0,latitude:29.546333,longitude:-95.312972},{facility_name:"JOHNSON CITY MUNICIPAL WWTP",city:"Johnson City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:129,amount_of_biosolids_managed_land_applied:128.99,latitude:30.285917,longitude:-98.402111},{facility_name:"CITY OF HITCHCOCK - WWTP",city:"Hitchcock","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:129,amount_of_biosolids_managed_land_applied:0,latitude:29.333,longitude:-95.02075},{facility_name:"BRAZORIA COUNTY MUD 21 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:129,amount_of_biosolids_managed_land_applied:0,latitude:29.496611,longitude:-95.431861},{facility_name:"CITY OF LOCKHART WWTF 1",city:"Lockhart","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:128,amount_of_biosolids_managed_land_applied:0,latitude:29.82748,longitude:-95.21676},{facility_name:"THOMPSONS CREEK WWTP",city:"Bryan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:128,amount_of_biosolids_managed_land_applied:0,latitude:30.588645,longitude:-96.423465},{facility_name:"AUSTIN COLONY WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:128,amount_of_biosolids_managed_land_applied:0,latitude:30.22906,longitude:-97.59172},{facility_name:"FRASER TOWN OF",city:"Fraser","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:127,amount_of_biosolids_managed_land_applied:0,latitude:39.94916056,longitude:-105.8171175},{facility_name:"TOWN OF SPRINGFIELD",city:"Springfield","state_postal;":"VT",state:"Vt.",amount_of_biosolids_generated:127,amount_of_biosolids_managed_land_applied:126.85,latitude:43.29622,longitude:-72.48115},{facility_name:"CINCO SOUTHWEST WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:127,amount_of_biosolids_managed_land_applied:126.84,latitude:29.705139,longitude:-95.811306},{facility_name:"CLUTE-RICHWOOD WWTP",city:"Clute","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:127,amount_of_biosolids_managed_land_applied:0,latitude:29.015528,longitude:-95.390667},{facility_name:"WINSTON GREEN REGIONAL",city:"Roseburg","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:126,amount_of_biosolids_managed_land_applied:126.44,latitude:43.137183,longitude:-123.401796},{facility_name:"PEMBROKE PINES, CITY OF WWTP",city:"Pembroke Pines","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:126,amount_of_biosolids_managed_land_applied:277.22,latitude:25.9975,longitude:-80.252179},{facility_name:"FOX RIVER GROVE STP",city:"Fox River Grove","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:126,amount_of_biosolids_managed_land_applied:77.9,latitude:42.191555,longitude:-88.233819},{facility_name:"CITY OF WHITE OAK WWTF",city:"White Oak","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:126,amount_of_biosolids_managed_land_applied:0,latitude:32.507388,longitude:-94.848006},{facility_name:"LAKE CHARLES, CITY OF (PLANT A",city:"Lake Charles","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:126,amount_of_biosolids_managed_land_applied:0,latitude:30.23864,longitude:-93.21726},{facility_name:"HOLIDAY PARK STP",city:"Pittsburgh","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:126,amount_of_biosolids_managed_land_applied:0,latitude:40.497595,longitude:-79.754224},{facility_name:"OLD EGYPT WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:125,amount_of_biosolids_managed_land_applied:0,latitude:30.214056,longitude:-95.566194},{facility_name:"NORTH BEND, CITY OF",city:"North Bend","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:125,amount_of_biosolids_managed_land_applied:125.34,latitude:43.415363,longitude:-124.254255},{facility_name:"JAFFREY TOWN OF",city:"Jaffrey","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:125,amount_of_biosolids_managed_land_applied:125,latitude:42.820041,longitude:-71.99306},{facility_name:"WOODSTOCK SOUTH STP, CITY OF",city:"Woodstock","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:125,amount_of_biosolids_managed_land_applied:0,latitude:42.28934,longitude:-88.43811},{facility_name:"FT BEND CO MUD WWTP 2",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:125,amount_of_biosolids_managed_land_applied:0,latitude:29.634639,longitude:-95.673194},{facility_name:"MOON TWP. MUN. AUTH.",city:"Corapolis","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:125,amount_of_biosolids_managed_land_applied:0,latitude:40.497081,longitude:-80.201711},{facility_name:"MONTGOMERY COUNTY MUD 8 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:125,amount_of_biosolids_managed_land_applied:0,latitude:30.391334,longitude:-95.602745},{facility_name:"CITY OF SPENCER",city:"Spencer","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:124,amount_of_biosolids_managed_land_applied:124,latitude:43.1417,longitude:-95.14757},{facility_name:"CARBONDALE UTILITIES, TOWN OF",city:"Carbondale","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:124,amount_of_biosolids_managed_land_applied:0,latitude:39.401696,longitude:-107.212945},{facility_name:"SELMA WATER WORKS & SEWER BOARD",city:"Selma","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:124,amount_of_biosolids_managed_land_applied:123.71,latitude:32.399186,longitude:-87.040837},{facility_name:"MYERSTOWN STP",city:"Lebanon County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:40.42831,longitude:-76.31588},{facility_name:"WOODMARK WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:32.20259,longitude:-95.336186},{facility_name:"CANTON WWTP",city:"Canton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:32.583378,longitude:-95.845578},{facility_name:"HAYSVILLE, CITY OF",city:"Haysville","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:37.5419793,longitude:-97.33023924},{facility_name:"TOHOPEKALIGA WATER AUTHORITY",city:"Kissimmee","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:28.14357,longitude:-81.45733},{facility_name:"MAHANOY CITY MUNICIPAL AUTHORI",city:"Mahanoy City","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:40.808421,longitude:-76.156327},{facility_name:"YREKA WWTP",city:"Yreka","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:41.743333,longitude:-122.630944},{facility_name:"EMPORIA, CITY OF",city:"Emporia","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:0,latitude:36.68048,longitude:-77.54162},{facility_name:"WHITEOAK SHORES WWTF",city:"Yantis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:123,amount_of_biosolids_managed_land_applied:122.55,latitude:32.905277,longitude:-95.603888},{facility_name:"QUANAH WWTF",city:"Quanah","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:0,latitude:34.300139,longitude:-99.726222},{facility_name:"WASECA",city:"Waseca","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:122.08,latitude:44.071759,longitude:-93.547038},{facility_name:"TWO HARBORS",city:"Two Harbors","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:122,latitude:47.02776464,longitude:-91.68664823},{facility_name:"CITY OF MEXICO",city:"Mexico","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:122,latitude:39.17421,longitude:-91.88147},{facility_name:"CLEMSON/COCHRAN ROAD WWTP",city:"Clemson","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:122,latitude:34.685,longitude:-82.833333},{facility_name:"CITY OF PINEHURST - WWTP",city:"Pinehurst","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:0,latitude:30.100825,longitude:-93.764657},{facility_name:"SAUSALITO-MARIN CITY SANITARY DISTRICT",city:"Sausalito","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:0,latitude:37.85466951,longitude:-122.4869723},{facility_name:"CITY OF RICHMOND SWTP",city:"Richmond","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:123.840456,latitude:29.576975,longitude:-95.77819},{facility_name:"LANGHAM CREEK UD - WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:0,latitude:29.75253,longitude:-95.46009},{facility_name:"MYRTLE CREEK, CITY OF",city:"Myrtle Creek","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:121.563,latitude:43.02108,longitude:-123.296857},{facility_name:"CITY OF PEARSALL WWTP",city:"Pearsall","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:122,amount_of_biosolids_managed_land_applied:0,latitude:28.883,longitude:-99.112167},{facility_name:"LAS VEGAS, CITY OF (SOUTH EAST",city:"Las Vegas","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:121,amount_of_biosolids_managed_land_applied:121.46,latitude:35.5387,longitude:-105.2103},{facility_name:"HYRUM CITY CORP",city:"Hyrum","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:121,amount_of_biosolids_managed_land_applied:121,latitude:41.63408,longitude:-111.85656},{facility_name:"EAST TEXAS MUD OF SMITH COUNTY WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:121,amount_of_biosolids_managed_land_applied:0,latitude:32.43653,longitude:-95.19539},{facility_name:"IL AMERICAN WTR COMPANY-CHICKSAW HILLS WRF",city:"Lockport","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:121,amount_of_biosolids_managed_land_applied:120.96,latitude:41.6375,longitude:-87.95},{facility_name:"NORTH PARK PUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:121,amount_of_biosolids_managed_land_applied:120.88,latitude:30.029961,longitude:-95.421409},{facility_name:"GEORGETOWN TOWN OF",city:"Georgetown","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:121,amount_of_biosolids_managed_land_applied:0,latitude:39.7171454,longitude:-105.695521},{facility_name:"PRASA LARES WWTP",city:"Lares","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:120,amount_of_biosolids_managed_land_applied:0,latitude:18.304447,longitude:-66.87975},{facility_name:"WINCHESTER COUNTRY REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:120,amount_of_biosolids_managed_land_applied:0,latitude:29.910973,longitude:-95.57355},{facility_name:"DICKINSON CITY OF",city:"Dickinson","state_postal;":"ND",state:"N.D.",amount_of_biosolids_generated:120,amount_of_biosolids_managed_land_applied:112.3,latitude:46.869249,longitude:-102.753624},{facility_name:"ARANSAS PASS WWTP",city:"Aransas Pass","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:120,amount_of_biosolids_managed_land_applied:112.6,latitude:27.887586,longitude:-97.14881},{facility_name:"DOWDELL PUBLIC UD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:119,amount_of_biosolids_managed_land_applied:0,latitude:30.092972,longitude:-95.554083},{facility_name:"STEWARTVILLE",city:"Stewartville","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:119,amount_of_biosolids_managed_land_applied:119.2,latitude:43.83401738,longitude:-92.39126223},{facility_name:"SOUTH MIDDLETON TWP MUNI AUTH CUMBERLAND CNTY",city:"Boiling Springs","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:119,amount_of_biosolids_managed_land_applied:119.12,latitude:40.13928677,longitude:-77.1235021},{facility_name:"LITTLE FALLS",city:"Little Falls","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:119,amount_of_biosolids_managed_land_applied:119.07,latitude:45.96608,longitude:-94.36781},{facility_name:"CITY OF EMERSON",city:"Emerson","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:119,amount_of_biosolids_managed_land_applied:0,latitude:34.110278,longitude:-84.754139},{facility_name:"YARMOUTH TOWN OF",city:"Yarmouth","state_postal;":"ME",state:"Maine",amount_of_biosolids_generated:119,amount_of_biosolids_managed_land_applied:0,latitude:43.7903,longitude:-70.1656},{facility_name:"SNAKE RIVER WWTF",city:"Dillon","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:118,amount_of_biosolids_managed_land_applied:0,latitude:39.60196,longitude:-106.01153},{facility_name:"FT BEND CO MUD 58 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:118,amount_of_biosolids_managed_land_applied:0,latitude:29.738528,longitude:-95.828833},{facility_name:"CITY OF ROME",city:"Rome","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:118,amount_of_biosolids_managed_land_applied:0,latitude:34.22173,longitude:-85.307569},{facility_name:"OWEGO (T)",city:"Apalachin","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:118,amount_of_biosolids_managed_land_applied:54.94,latitude:42.04513611,longitude:-76.15129184},{facility_name:"PEARL RIVER COUNTY UTILITY AUTHORITY, NEAL ROAD POTW",city:"Picayune","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:118,amount_of_biosolids_managed_land_applied:117.69,latitude:30.535806,longitude:-89.705806},{facility_name:"AMERICAN WATER ENTERPRISES, INC.",city:"Fort Rucker","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:30.957591,longitude:-88.012075},{facility_name:"ROBINSON CREEK WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:30.646306,longitude:-95.5955},{facility_name:"SUGAR LAND GREATWOOD WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:29.547222,longitude:-95.687777},{facility_name:"FORT MORGAN CITY OF",city:"Fort Morgan","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:117.22,latitude:40.23821666,longitude:-103.8149775},{facility_name:"SARANAC LAKE (V)",city:"Saranac Lake","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:44.32536,longitude:-74.13178},{facility_name:"EAGLE TOWN OF",city:"Eagle","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:39.66000699,longitude:-106.824228},{facility_name:"TOWN OF YADKINVILLE",city:"Yadkinville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:117,latitude:36.130887,longitude:-80.632511},{facility_name:"CITY OF EXCELSIOR SPRINGS",city:"Excelsior Springs","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:117,latitude:39.3423,longitude:-94.22209},{facility_name:"EDINBORO BORO",city:"Edinboro","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:41.87347,longitude:-80.13162},{facility_name:"CENTER CREEK WASTEWATER TREATMENT BOARD",city:"Webb City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:37.18369551,longitude:-94.48267206},{facility_name:"BEAR CREEK WWTP",city:"Lavon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:117,amount_of_biosolids_managed_land_applied:0,latitude:33.013023,longitude:-96.448663},{facility_name:"LAKE FOREST REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:116,amount_of_biosolids_managed_land_applied:82.6975,latitude:29.986068,longitude:-95.578855},{facility_name:"LEBANON STP",city:"Lebanon","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:116,amount_of_biosolids_managed_land_applied:91.4,latitude:37.5625,longitude:-85.272222},{facility_name:"SOUTH DAKOTA ELLSWORTH DEVELOPMENT AUTHORITY",city:"Box Elder","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:116,amount_of_biosolids_managed_land_applied:0,latitude:44.105472,longitude:-102.998222},{facility_name:"SHAWNEE CO. PUBLIC WORKS",city:"Topeka","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:116,amount_of_biosolids_managed_land_applied:82,latitude:39.07855,longitude:-95.71781},{facility_name:"HARRIS COUNTY MUD 285 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:116,amount_of_biosolids_managed_land_applied:0,latitude:29.800778,longitude:-95.169639},{facility_name:"CLEVELAND EAST WWTP",city:"Cleveland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:116,amount_of_biosolids_managed_land_applied:0,latitude:30.333694,longitude:-95.052306},{facility_name:"JORDANELLE SPECIAL SERVICE DISTRICT WATER RECLAMATION FACILITY",city:"Heber","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:116,amount_of_biosolids_managed_land_applied:0,latitude:40.57741,longitude:-111.42786},{facility_name:"FORT BEND COUNTY MUD 133 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:115,amount_of_biosolids_managed_land_applied:0,latitude:29.689694,longitude:-95.780139},{facility_name:"HIBBING-SOUTH",city:"Hibbing","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:115,amount_of_biosolids_managed_land_applied:115.3,latitude:47.37166,longitude:-92.91558},{facility_name:"BOROUGH OF SOUDERTON",city:"Souderton","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:115,amount_of_biosolids_managed_land_applied:0,latitude:40.31308,longitude:-75.32938},{facility_name:"CITY OF NEVADA",city:"Nevada","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:115,amount_of_biosolids_managed_land_applied:115,latitude:37.83808,longitude:-94.35929},{facility_name:"FRIENDSWOOD DEV WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:115,amount_of_biosolids_managed_land_applied:0,latitude:30.17289,longitude:-95.19252},{facility_name:"GRAND MISSION MUD 1 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:115,amount_of_biosolids_managed_land_applied:0,latitude:29.689944,longitude:-95.723833},{facility_name:"WASHINGTON COUNTY",city:"Fort Edward","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:115,amount_of_biosolids_managed_land_applied:114.8,latitude:43.28712,longitude:-73.58661},{facility_name:"NORTH HUNTINGDON TWP MUNICIPAL",city:"North Huntingdon","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:114,amount_of_biosolids_managed_land_applied:0,latitude:40.329898,longitude:-79.730557},{facility_name:"ACTON MUD WWTP",city:"Granbury","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:114,amount_of_biosolids_managed_land_applied:0,latitude:32.357917,longitude:-97.686389},{facility_name:"HARRIS COUNTY WCID 110 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:114,amount_of_biosolids_managed_land_applied:0,latitude:30.039313,longitude:-95.434684},{facility_name:"HARRISBURG, CITY OF (BIOSOLIDS)",city:"Harrisburg","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:114,amount_of_biosolids_managed_land_applied:0,latitude:43.421389,longitude:-96.697722},{facility_name:"HARRIS CO MUD 216 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:114,amount_of_biosolids_managed_land_applied:0,latitude:29.782611,longitude:-95.67725},{facility_name:"ANGOLA WWTP",city:"Angola","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:114,amount_of_biosolids_managed_land_applied:153.47,latitude:41.653446,longitude:-84.99957},{facility_name:"CINCO REGIONAL WWTF",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:113,amount_of_biosolids_managed_land_applied:0,latitude:29.741189,longitude:-95.727085},{facility_name:"HARRIS COUNTY MUD 433 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:113,amount_of_biosolids_managed_land_applied:106.23,latitude:29.9044,longitude:-95.7083},{facility_name:"HARRIS COUNTY UD 16 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:113,amount_of_biosolids_managed_land_applied:0,latitude:29.99147,longitude:-95.40071},{facility_name:"GENOA STP, CITY OF",city:"Genoa","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:113,amount_of_biosolids_managed_land_applied:112.632,latitude:42.09645,longitude:-88.70377},{facility_name:"ESTES PARK SANITATION DISTRICT",city:"Estes Park","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:113,amount_of_biosolids_managed_land_applied:0,latitude:40.3771167,longitude:-105.5255142},{facility_name:"MENDOTA STP, CITY OF",city:"Mendota","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:113,amount_of_biosolids_managed_land_applied:139.95,latitude:41.5391,longitude:-89.1177},{facility_name:"CITY OF SHEPHERD",city:"Shepherd","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:0,latitude:30.496944,longitude:-94.986111},{facility_name:"CREVE COEUR WWTP, VILLAGE OF",city:"Creve Coeur","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:0,latitude:40.632236,longitude:-89.620283},{facility_name:"HARRIS COUNTY MUD 449 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:112.0757,latitude:29.833696,longitude:-95.776534},{facility_name:"LONG PRAIRIE MUNICIPAL WWTF",city:"Unknown","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:112,latitude:46.3161343,longitude:-94.1994801},{facility_name:"CITY OF NEOSHO",city:"Neosho","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:112,latitude:36.868598,longitude:-94.367254},{facility_name:"MORGAN CITY, CITY OF",city:"Morgan City","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:112,latitude:31.34999,longitude:-92.57633},{facility_name:"CITY OF ROSENBERG 1A WWTF",city:"Rosenberg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:0,latitude:29.565556,longitude:-95.798611},{facility_name:"CITY OF GALENA PARK WWTP 1",city:"Galena Park","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:0,latitude:29.7361,longitude:-95.230478},{facility_name:"CITY OF PELLA",city:"Pella","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:112,amount_of_biosolids_managed_land_applied:111.66,latitude:41.407048,longitude:-92.918313},{facility_name:"ALLENS CREEK WWTF",city:"Sealy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:111.43286,latitude:29.757462,longitude:-96.148036},{facility_name:"SAN JACINTO RIVER AUTHORITY",city:"The Woodland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:0,latitude:30.215663,longitude:-95.450326},{facility_name:"MOSHANNON VALLEY JT. AUTH.",city:"Philipsburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:26.16,latitude:40.9089,longitude:-78.224149},{facility_name:"BUCKHANNON, CITY OF",city:"Buckhannon","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:111.2,latitude:38.97684238,longitude:-80.23405871},{facility_name:"SIDNEY WWTF",city:"Sidney","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:111,latitude:41.13446,longitude:-102.94671},{facility_name:"FLORENCE STP",city:"Florence","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:42.7,latitude:43.97011,longitude:-124.114751},{facility_name:"TAMU MAIN CAMPUS WWTP",city:"College Station","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:31.884,latitude:30.575576,longitude:-96.379262},{facility_name:"GONZALES WWTP",city:"Gonzales","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:110.95,latitude:29.490218,longitude:-97.436128},{facility_name:"HARRIS COUNTY MUD 189 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:111,amount_of_biosolids_managed_land_applied:0,latitude:29.98717,longitude:-95.43888},{facility_name:"GSW&SA/CITY OF MARION WWTP",city:"Marion","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:110,amount_of_biosolids_managed_land_applied:110,latitude:34.164538,longitude:-79.387549},{facility_name:"THURMONT WASTEWATER TREAT.FAC.",city:"Thurmont","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:110,amount_of_biosolids_managed_land_applied:0,latitude:39.610099,longitude:-77.411376},{facility_name:"NITRO, CITY OF,SANITARY BOARD",city:"Nitro","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:110,amount_of_biosolids_managed_land_applied:0,latitude:38.42115,longitude:-81.848131},{facility_name:"SOCORRO, CITY OF",city:"Socorro","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:110,amount_of_biosolids_managed_land_applied:0,latitude:34.053427,longitude:-106.888943},{facility_name:"CITY OF BELTON",city:"Belton","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:110,amount_of_biosolids_managed_land_applied:0,latitude:38.805101,longitude:-94.539265},{facility_name:"TIADAGHTON VALLEY MUNI AUTH",city:"Jersey Shore","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:110,amount_of_biosolids_managed_land_applied:0,latitude:41.23149532,longitude:-77.24009924},{facility_name:"CITY OF BONNE TERRE",city:"Bonne Terre","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:110,amount_of_biosolids_managed_land_applied:109,latitude:37.92486,longitude:-90.55129},{facility_name:"UPPER LEON RIVER MWD WWTP",city:"Comanche","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:109,amount_of_biosolids_managed_land_applied:0,latitude:31.960694,longitude:-98.489194},{facility_name:"LITCHFIELD STP, CITY OF",city:"Litchfield","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:109,amount_of_biosolids_managed_land_applied:0,latitude:39.174242,longitude:-89.63748},{facility_name:"HOLLIDAYSBURG REGIONAL WWTP",city:"Blair County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:109,amount_of_biosolids_managed_land_applied:0,latitude:40.430017,longitude:-78.361101},{facility_name:"CITY OF BONNE TERRE",city:"Bonne Terre","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:109,amount_of_biosolids_managed_land_applied:108.8,latitude:37.92486,longitude:-90.55129},{facility_name:"CLINTON SD STP",city:"Clinton","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:109,amount_of_biosolids_managed_land_applied:0,latitude:40.137222,longitude:-88.968056},{facility_name:"TOWN OF AHOSKIE",city:"Ahoskie","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:109,amount_of_biosolids_managed_land_applied:108.76,latitude:36.2731,longitude:-76.9931},{facility_name:"HARRIS COUNTY MUD 400 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:109,amount_of_biosolids_managed_land_applied:108.604912,latitude:29.936611,longitude:-95.238},{facility_name:"MONTGOMERY COUNTY MUD 83 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:108,amount_of_biosolids_managed_land_applied:0,latitude:30.071694,longitude:-95.263028},{facility_name:"RUSHVILLE WWTP",city:"Rushville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:108,amount_of_biosolids_managed_land_applied:114.98,latitude:39.607547,longitude:-85.445267},{facility_name:"ULSTER (T)",city:"Lake Katrine","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:108,amount_of_biosolids_managed_land_applied:0,latitude:41.97731,longitude:-74.00251},{facility_name:"HAMBURG BORO",city:"Hamburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:108,amount_of_biosolids_managed_land_applied:0,latitude:40.55583,longitude:-75.98426},{facility_name:"CAMPBELLS RUN STP",city:"Pittsburgh","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:107,amount_of_biosolids_managed_land_applied:0,latitude:40.425624,longitude:-80.111722},{facility_name:"CITY OF BONHAM WWTP",city:"Bonham","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:107,amount_of_biosolids_managed_land_applied:0,latitude:33.587247,longitude:-96.160641},{facility_name:"CITY OF INDEPENDENCE",city:"Independence","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:107,amount_of_biosolids_managed_land_applied:107.4,latitude:42.468714,longitude:-91.89133},{facility_name:"CITY OF FARMINGTON",city:"Farmington","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:107,amount_of_biosolids_managed_land_applied:107.37,latitude:37.78064,longitude:-90.42251},{facility_name:"CITY OF BELMONT",city:"Belmont","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:107,amount_of_biosolids_managed_land_applied:106.87,latitude:35.230955,longitude:-81.016555},{facility_name:"HARRIS COUNTY MUD 26 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:107,amount_of_biosolids_managed_land_applied:106.6,latitude:30.027044,longitude:-95.302246},{facility_name:"ROSELLE-J BOTTERMAN STP",city:"Roselle","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:106,amount_of_biosolids_managed_land_applied:106.31,latitude:41.982567,longitude:-88.113572},{facility_name:"TOWN OF LIVINGSTON",city:"Livingston","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:106,amount_of_biosolids_managed_land_applied:106.3,latitude:36.359229,longitude:-85.344134},{facility_name:"US MCAS CHERRY POINT",city:"Cherry Point","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:106,amount_of_biosolids_managed_land_applied:105.9,latitude:34.905641,longitude:-76.893355},{facility_name:"CITY OF RICHMOND SOUTH WWTP",city:"Richmond","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:106,amount_of_biosolids_managed_land_applied:0,latitude:29.545128,longitude:-95.719004},{facility_name:"CITY OF WAVERLY",city:"Waverly","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:106,amount_of_biosolids_managed_land_applied:105.72,latitude:42.82688267,longitude:-92.43617262},{facility_name:"HARRIS COUNTY MUD 368 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:105,amount_of_biosolids_managed_land_applied:0,latitude:30.051861,longitude:-95.596583},{facility_name:"TOWN OF MOCKSVILLE",city:"Mocksville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:105,amount_of_biosolids_managed_land_applied:105,latitude:35.88576,longitude:-80.50104},{facility_name:"WEST HARRIS COUNTY MUD 11 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:105,amount_of_biosolids_managed_land_applied:0,latitude:29.895778,longitude:-95.550472},{facility_name:"FT BEND CO MUD 134A WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:104,amount_of_biosolids_managed_land_applied:104.44,latitude:29.665397,longitude:-95.694933},{facility_name:"CITY OF WASHINGTON",city:"Washington","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:104,amount_of_biosolids_managed_land_applied:104.1,latitude:41.29,longitude:-91.683154},{facility_name:"ROY C. HESTER WWTP",city:"Big Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:104,amount_of_biosolids_managed_land_applied:0,latitude:32.238833,longitude:-101.44925},{facility_name:"WHITECAP WWTP",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:104,amount_of_biosolids_managed_land_applied:0,latitude:27.603083,longitude:-97.250944},{facility_name:"MONTGOMERY COUNTY WCID 1 WWTP",city:"The Woodlands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:103,amount_of_biosolids_managed_land_applied:0,latitude:30.628,longitude:-90.88025},{facility_name:"SANDWICH STP, CITY OF",city:"Sandwich","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:103,amount_of_biosolids_managed_land_applied:103,latitude:41.65675,longitude:-88.63739},{facility_name:"MANHATTAN STP, VILLAGE OF",city:"Manhattan","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:103,amount_of_biosolids_managed_land_applied:102.84,latitude:41.42697,longitude:-87.99329},{facility_name:"CHURCH HILL STP.",city:"Church Hill","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:103,amount_of_biosolids_managed_land_applied:102.8,latitude:36.523432,longitude:-82.682102},{facility_name:"IL AMERICAN WTR CO-OAK VALLEY",city:"Lockport","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:102,amount_of_biosolids_managed_land_applied:102.48,latitude:41.588333,longitude:-87.925},{facility_name:"WAGNER CREEK WWTP",city:"Texarkana","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:102,amount_of_biosolids_managed_land_applied:0,latitude:33.378528,longitude:-94.046484},{facility_name:"SOUTH DEERFIELD W W T P",city:"South Deerfield","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:102,amount_of_biosolids_managed_land_applied:0,latitude:42.46829,longitude:-72.58914},{facility_name:"CNP UD - WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:101,amount_of_biosolids_managed_land_applied:0,latitude:30.03301,longitude:-95.438295},{facility_name:"CITY OF ALGONA",city:"Algona","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:101,amount_of_biosolids_managed_land_applied:101.02,latitude:43.06981,longitude:-94.238121},{facility_name:"CITY OF FREEPORT CENTRAL WWTF",city:"Freeport","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:101,amount_of_biosolids_managed_land_applied:0,latitude:28.943139,longitude:-95.377417},{facility_name:"SALAMANCA BOARD OF PUBLIC UTILITES",city:"Salamanca","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:101,amount_of_biosolids_managed_land_applied:74.7,latitude:42.15679,longitude:-78.70777},{facility_name:"CITY OF PARK HILLS",city:"Park Hills","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:101,amount_of_biosolids_managed_land_applied:100.8,latitude:37.85186,longitude:-90.52326},{facility_name:"HARTSELLE UTILITIES",city:"Hartselle","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:101,amount_of_biosolids_managed_land_applied:100.57,latitude:34.4083,longitude:-86.9417},{facility_name:"CHIPLEY WWTP",city:"Chipley","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:100.46,latitude:30.78036,longitude:-85.55012},{facility_name:"ELK-PINCH PUBLIC SERVIC DISTRI",city:"Elkview","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:100.38,latitude:38.403589,longitude:-81.523713},{facility_name:"OMAK POTW",city:"Omak","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:202.8595,latitude:48.400079,longitude:-119.535764},{facility_name:"CITY OF ROLLA",city:"Rolla","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:214.32,latitude:37.94992108,longitude:-91.77424065},{facility_name:"SEWARD WWTF",city:"Seward","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:100,latitude:40.899889,longitude:-97.0915},{facility_name:"WILLITS WQCP",city:"Willits","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:98.79,latitude:39.41356137,longitude:-123.3587072},{facility_name:"SHAKOPEE MDEWAKANTON SIOUX WRF",city:"Prior Lake","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:0,latitude:44.726394,longitude:-93.464692},{facility_name:"CITY OF ROLLA",city:"Rolla","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:0,latitude:37.94992108,longitude:-91.77424065},{facility_name:"CITY OF ROLLA",city:"Rolla","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:0,latitude:37.94992108,longitude:-91.77424065},{facility_name:"BROKEN BOW WWTF",city:"Broken Bow","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:0,latitude:41.3861,longitude:-99.5944},{facility_name:"BEDFORD BOROUGH MUNICIPAL AUTH",city:"Bedford County","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:91.9,latitude:40.01727,longitude:-78.50698},{facility_name:"BIG OAKS MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:139.08,latitude:29.701611,longitude:-95.701611},{facility_name:"FORT BEND COUNTY MUD 146 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:99.8009806,latitude:29.673083,longitude:-95.751917},{facility_name:"CITY OF SULLIVAN",city:"Sullivan","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:100,amount_of_biosolids_managed_land_applied:99.55,latitude:38.208288,longitude:-91.160012},{facility_name:"FORT BEND COUNTY MUD 134A WWTP 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:99.28,latitude:29.638888,longitude:-95.704166},{facility_name:"CITY OF BURNET WWTF",city:"Burnet","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:99.1,latitude:30.75668,longitude:-98.22657},{facility_name:"SILVER LAKE WWTF",city:"Del Rio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:0,latitude:29.34375,longitude:-100.943778},{facility_name:"CITY OF KRUM WWTF",city:"Krum","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:0,latitude:33.257326,longitude:-97.246869},{facility_name:"BECKER",city:"Becker","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:0,latitude:45.393692,longitude:-93.862648},{facility_name:"BUCKLEY STP",city:"Buckley","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:98.6745,latitude:47.168535,longitude:-122.033917},{facility_name:"CLARKSVILLE, CITY OF",city:"Clarksville","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:98.51,latitude:35.445657,longitude:-93.473862},{facility_name:"FT BEND MUD 162 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:99,amount_of_biosolids_managed_land_applied:0,latitude:29.497361,longitude:-95.751514},{facility_name:"HARRIS CO MUD 200 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:98.42,latitude:29.97395,longitude:-95.43224},{facility_name:"MONTGOMERY COUNTY MUD 99 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:98.23,latitude:29.746033,longitude:-95.4654},{facility_name:"CITY OF WARRENSBURG",city:"Warrensburg","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:0,latitude:38.762602,longitude:-93.74039},{facility_name:"PLATTE CO REGIONAL SEWER",city:"Tracy","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:0,latitude:39.31726751,longitude:-94.78185758},{facility_name:"HARRIS COUNTY MUD 5 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:0,latitude:29.9508,longitude:-95.44484},{facility_name:"WESTON MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:0,latitude:29.791965,longitude:-95.743425},{facility_name:"PLAINVIEW-ELGIN SD",city:"Plainview","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:98,latitude:44.14425,longitude:-92.139361},{facility_name:"PRINCETON STP",city:"Princeton","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:97.878,latitude:37.074444,longitude:-87.894444},{facility_name:"ANDERSON WPCP",city:"Anderson","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:0,latitude:40.45970741,longitude:-122.2871596},{facility_name:"PRASA CIALES",city:"Ciales","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:64.18,latitude:18.3459,longitude:-66.4681},{facility_name:"SILVERTON, CITY OF",city:"Silverton","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:97.52,latitude:45.008957,longitude:-122.802011},{facility_name:"NORTHSIDE WWTF",city:"Lindale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:0,latitude:32.465222,longitude:-95.403278},{facility_name:"HARRIS CO MUD 285 WWTF 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:98,amount_of_biosolids_managed_land_applied:0,latitude:29.817001,longitude:-95.16448},{facility_name:"HIGHTSTOWN ADVANCED WTP",city:"Hightstown","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:97,amount_of_biosolids_managed_land_applied:0,latitude:40.27259,longitude:-74.53384},{facility_name:"CITY OF HARLAN",city:"Harlan","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:97,amount_of_biosolids_managed_land_applied:96.8,latitude:41.65679,longitude:-95.31999},{facility_name:"CITY OF CHEROKEE",city:"Cherokee","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:97,amount_of_biosolids_managed_land_applied:96.76,latitude:42.74971,longitude:-95.55358},{facility_name:"CITY OF STORM LAKE",city:"Storm Lake","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:97,amount_of_biosolids_managed_land_applied:96.7,latitude:42.66920938,longitude:-95.2301},{facility_name:"EMERSON ESTATE WWFT",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:97,amount_of_biosolids_managed_land_applied:0,latitude:30.32135,longitude:-95.304514},{facility_name:"CITY OF AURORA",city:"Aurora","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:97,amount_of_biosolids_managed_land_applied:127.01,latitude:36.83119579,longitude:-93.69795577},{facility_name:"MALONE (V)",city:"Malone","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:0,latitude:44.84946,longitude:-74.29126},{facility_name:"LEWISBURG AREA JT. SEWER AUTH",city:"Lewisburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:96.29,latitude:40.9488,longitude:-76.8865},{facility_name:"CITY OF POTEET WWTF",city:"Poteet","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:0,latitude:29.0324,longitude:-98.5673},{facility_name:"SALIDA SD WWTP",city:"Salida","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:96,latitude:37.70924784,longitude:-121.0879991},{facility_name:"MADISONVILLE WWTP",city:"Madisonville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:0,latitude:30.93924,longitude:-95.92141},{facility_name:"MONTGOMERY CO UD 3 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:0,latitude:30.358582,longitude:-95.601858},{facility_name:"CITY OF HAMLET",city:"Hamlet","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:95.85,latitude:34.855388,longitude:-79.724998},{facility_name:"LENOX W W T P",city:"Lenox","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:0,latitude:42.37065,longitude:-73.27989},{facility_name:"MERIDIAN METROPOLITAN DISTRICT",city:"Englewood","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:96,amount_of_biosolids_managed_land_applied:95.59,latitude:39.564444,longitude:-104.849444},{facility_name:"CITY OF WARRENSBURG",city:"Warrensburg","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:95,amount_of_biosolids_managed_land_applied:0,latitude:38.762602,longitude:-93.74039},{facility_name:"LE ROY (V)",city:"Le Roy","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:95,amount_of_biosolids_managed_land_applied:0,latitude:42.9777,longitude:-77.99265},{facility_name:"HARRIS COUNTY MUD 102 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:95,amount_of_biosolids_managed_land_applied:0,latitude:29.86364,longitude:-95.63912},{facility_name:"FORSYTH (CITY OF) NE",city:"Forsyth","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:95,amount_of_biosolids_managed_land_applied:0,latitude:33.046222,longitude:-83.920472},{facility_name:"CITY OF FORT MADISON",city:"Fort Madison","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:95,amount_of_biosolids_managed_land_applied:0,latitude:40.633001,longitude:-91.311744},{facility_name:"MOODY GOVERNMENTAL UTILITY SERVICES CORPORATION",city:"Moody","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:95,amount_of_biosolids_managed_land_applied:0,latitude:33.5772,longitude:-86.5122},{facility_name:"MOMENCE STP, CITY OF",city:"Momence","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:95,amount_of_biosolids_managed_land_applied:94.53,latitude:41.1607,longitude:-87.6705},{facility_name:"HARRIS COUNTY MUD 180",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:0,latitude:29.955877,longitude:-95.492883},{facility_name:"CENTER TWP SEW AUTH",city:"Aliquippa","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:0,latitude:40.64869,longitude:-80.30011},{facility_name:"CRAIG CITY OF",city:"Craig","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:204,latitude:40.51236,longitude:-107.55134},{facility_name:"CITY OF DYERSVILLE",city:"Dyersville","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:94,latitude:42.48459,longitude:-91.121032},{facility_name:"TALL TIMBERS WWTF",city:"Avondale","state_postal;":"AZ",state:"Ariz.",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:0,latitude:32.246061,longitude:-95.329909},{facility_name:"HARRIS COUNTY MUD 249 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:0,latitude:30.062694,longitude:-95.422972},{facility_name:"CARYVILLE-JACKSBORO UC STP",city:"Caryville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:83.45,latitude:36.307109,longitude:-84.199742},{facility_name:"PARK TEN WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:94,amount_of_biosolids_managed_land_applied:0,latitude:29.789312,longitude:-95.669279},{facility_name:"FRACKVILLE AREA MUN AUTH",city:"Butler, Township Of","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:93,amount_of_biosolids_managed_land_applied:93.26,latitude:40.78604,longitude:-76.23147},{facility_name:"CANAJOHARIE (V)",city:"Canajoharie","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:93,amount_of_biosolids_managed_land_applied:0,latitude:42.906588,longitude:-74.575183},{facility_name:"ROCKVILLE WWTP",city:"Rockville","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:93,amount_of_biosolids_managed_land_applied:93,latitude:39.758611,longitude:-87.222861},{facility_name:"CITY OF DECATUR",city:"Decatur","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:93,amount_of_biosolids_managed_land_applied:0,latitude:33.2464,longitude:-97.562},{facility_name:"HERCULANEUM WASTEWATER TR",city:"Herculaneum","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:93,amount_of_biosolids_managed_land_applied:0,latitude:38.255667,longitude:-90.376388},{facility_name:"CITY OF BOWIE WWTP",city:"Bowie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:92,amount_of_biosolids_managed_land_applied:0,latitude:33.533017,longitude:-97.85203},{facility_name:"CITY OF MOUNT PLEASANT",city:"Mount Pleasant","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:92,amount_of_biosolids_managed_land_applied:92,latitude:40.96667,longitude:-91.55462},{facility_name:"PENDLETON-CLEMSON REG. WWTF",city:"Pendleton","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:92,amount_of_biosolids_managed_land_applied:92,latitude:34.6356,longitude:-82.8014},{facility_name:"MILLERSBURG AREA AUTHORITY STP",city:"Millersburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:92,amount_of_biosolids_managed_land_applied:33.3,latitude:40.5331,longitude:-76.968},{facility_name:"MCCANDLESS TOWNSHIP - STP",city:"Pittsburgh","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:92,amount_of_biosolids_managed_land_applied:0,latitude:40.578627,longitude:-80.031317},{facility_name:"CITY OF ENTERPRISE",city:"Enterprise","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:91,amount_of_biosolids_managed_land_applied:91.41,latitude:31.3397,longitude:-85.8111},{facility_name:"SCHUYLKILL HAVEN MUN AUTH-STP",city:"Schuykill","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:91,amount_of_biosolids_managed_land_applied:91.04,latitude:40.623056,longitude:-76.17},{facility_name:"ABILENE, CITY OF WWTP",city:"Abilene","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:91,amount_of_biosolids_managed_land_applied:91,latitude:38.90065,longitude:-97.20107},{facility_name:"4S RANCH WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:91,amount_of_biosolids_managed_land_applied:0,latitude:29.765555,longitude:-98.391944},{facility_name:"HARRIS COUNTY WCID 116 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:91,amount_of_biosolids_managed_land_applied:0,latitude:29.996662,longitude:-95.521876},{facility_name:"MONTECITO S.D. WWTP",city:"Santa Barbara","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:91,amount_of_biosolids_managed_land_applied:90.8,latitude:34.41333,longitude:-119.647631},{facility_name:"CHARTERWOOD MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:91,amount_of_biosolids_managed_land_applied:0,latitude:30.001415,longitude:-95.572053},{facility_name:"WOODBURN, CITY OF",city:"Woodburn","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:90,amount_of_biosolids_managed_land_applied:90.39,latitude:45.155901,longitude:-122.805849},{facility_name:"BEDFORD STP.",city:"Bedford","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:90,amount_of_biosolids_managed_land_applied:0,latitude:37.333611,longitude:-79.506667},{facility_name:"CITY OF ELDRIDGE",city:"Eldridge","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:90,amount_of_biosolids_managed_land_applied:90,latitude:41.6603134,longitude:-90.57479851},{facility_name:"ROSEHILL RESERVE-HARRIS COUNTY MUD 542 WWTP 1",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:90,amount_of_biosolids_managed_land_applied:0,latitude:30.066666,longitude:-95.714444},{facility_name:"HARRISON, CITY OF",city:"Harrison","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:90,amount_of_biosolids_managed_land_applied:89.83,latitude:36.2408,longitude:-93.0808},{facility_name:"CITY OF LAFAYETTE",city:"Lafayette","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:90,amount_of_biosolids_managed_land_applied:89.86,latitude:34.696093,longitude:-85.284967},{facility_name:"CITY OF GOLIAD WWTP",city:"Goliad","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:28.661583,longitude:-97.395889},{facility_name:"CITY OF CALIFORNIA",city:"California","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:89.3,latitude:38.613833,longitude:-92.576389},{facility_name:"TRINIDAD CITY OF",city:"Trinidad","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:37.1740569,longitude:-104.4909835},{facility_name:"HARRIS COUNTY MUD 230 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:29.974083,longitude:-95.572139},{facility_name:"BELEN, CITY OF",city:"Belen","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:76,latitude:34.64287,longitude:-106.77644},{facility_name:"NORTH MISSION GLEN MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:29.679111,longitude:-95.665778},{facility_name:"PORTLAND WPCF",city:"Portland","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:41.56951,longitude:-72.6443},{facility_name:"MARYSVILLE BOROUGH COUNCIL",city:"Marysville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:40.343056,longitude:-76.927333},{facility_name:"GREENWOOD/WEST ALEXANDER WWTF",city:"Greenwood","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:34.193333,longitude:-82.158333},{facility_name:"CLINTON MUNICIPAL WWTP",city:"Clinton","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:88.7,latitude:39.653944,longitude:-87.39775},{facility_name:"US NAVAL STATION MAYPORT",city:"Jacksonville","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:88.596,latitude:30.391111,longitude:-81.4131},{facility_name:"JOHNSON RANCH WWTF",city:"Boerne","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:29.754722,longitude:-98.421666},{facility_name:"ATK LAUNCH SYSTEMS INC",city:"Brigham City","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:89,amount_of_biosolids_managed_land_applied:0,latitude:41.679,longitude:-112.432},{facility_name:"TOWN OF WILLIAMSTON",city:"Williamston","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:88.45,latitude:35.853378,longitude:-77.030739},{facility_name:"FORT BEND COUNTY MUD 81 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:0,latitude:29.65691,longitude:-95.929141},{facility_name:"OSAGE WWTP",city:"Osage","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:88.38,latitude:43.27893,longitude:-92.83077},{facility_name:"HARRIS COUNTY MUD 344 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:0,latitude:29.859181,longitude:-95.581407},{facility_name:"KAUFMAN COUNTY FWSD 1A WWTP",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:0,latitude:32.732657,longitude:-96.393608},{facility_name:"DOUGLASVILLE-DOUGLAS COUNTY WATER & SEWER AUTHORITY (WSA)",city:"Douglasville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:0,latitude:33.784167,longitude:-84.760694},{facility_name:"OYSTER BAY SD",city:"Oyster Bay","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:0,latitude:40.87527,longitude:-73.5279},{facility_name:"CITY OF HAMILTON",city:"Hamilton","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:88,amount_of_biosolids_managed_land_applied:87.5,latitude:34.1083,longitude:-87.9972},{facility_name:"CLINTON PARK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:87,amount_of_biosolids_managed_land_applied:0,latitude:29.739432,longitude:-95.267198},{facility_name:"CATSKILL (V)",city:"Catskill","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:87,amount_of_biosolids_managed_land_applied:0,latitude:42.22045,longitude:-73.86597},{facility_name:"FITZGERALD WATER, LIGHT & BOND COMMISSION",city:"Unknown","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:87,amount_of_biosolids_managed_land_applied:0,latitude:31.67975,longitude:-83.249528},{facility_name:"HARRIS COUNTY MUD 536",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:86,amount_of_biosolids_managed_land_applied:0,latitude:29.82394,longitude:-95.799002},{facility_name:"FALLBROOK UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:86,amount_of_biosolids_managed_land_applied:0,latitude:29.911775,longitude:-95.432839},{facility_name:"BROOKSHIRE MWD WWTF",city:"Brookshire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:86,amount_of_biosolids_managed_land_applied:86.1,latitude:29.778111,longitude:-95.936},{facility_name:"CITY OF KANSAS CITY - WSD",city:"Kansas City","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:86,amount_of_biosolids_managed_land_applied:0,latitude:39.01323,longitude:-94.52917},{facility_name:"PERU UTILITIES-GRISSOM DIVISION WWTP",city:"Peru","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:86,amount_of_biosolids_managed_land_applied:85.61,latitude:40.755625,longitude:-86.057105},{facility_name:"ALBION (V)",city:"Albion","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:86,amount_of_biosolids_managed_land_applied:85.5,latitude:43.247897,longitude:-78.192938},{facility_name:"BELCHERTOWN WWTP",city:"Belchertown","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:86,amount_of_biosolids_managed_land_applied:0,latitude:42.281579,longitude:-72.42563},{facility_name:"CITY OF WAUKON",city:"Waukon","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:85,amount_of_biosolids_managed_land_applied:85.4,latitude:43.27014,longitude:-91.47558},{facility_name:"HOMESTEAD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:85,amount_of_biosolids_managed_land_applied:0,latitude:29.807185,longitude:-95.293568},{facility_name:"OGDENSBURG (C)",city:"Ogdensburg","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:85,amount_of_biosolids_managed_land_applied:0,latitude:44.69795,longitude:-75.49194},{facility_name:"CITY OF TALLADEGA WATER AND SEWER",city:"Talladega","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:85,amount_of_biosolids_managed_land_applied:0,latitude:33.4101,longitude:-86.1267},{facility_name:"BLAIRSVILLE WPCP",city:"Blairsville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:85,amount_of_biosolids_managed_land_applied:0,latitude:34.874167,longitude:-83.969667},{facility_name:"ROCKY MOUNT STP",city:"Rocky Mount","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:85,amount_of_biosolids_managed_land_applied:0,latitude:36.9969,longitude:-79.8533},{facility_name:"GLENWOOD MUNICIPAL UTILITIES",city:"Glenwood","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:84,amount_of_biosolids_managed_land_applied:84.38,latitude:41.046526,longitude:-95.741829},{facility_name:"HARRIS COUNTY MUD 23 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:84,amount_of_biosolids_managed_land_applied:84.33,latitude:29.877311,longitude:-95.517311},{facility_name:"CRYSTAL LAKE STP #3, CITY OF",city:"Crystal Lake","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:84,amount_of_biosolids_managed_land_applied:84,latitude:42.25038,longitude:-88.30151},{facility_name:"WESLACO SOUTH WWTP",city:"Weslaco","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:84,amount_of_biosolids_managed_land_applied:0,latitude:26.116194,longitude:-98.021083},{facility_name:"GREEN TRAILS MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:84,amount_of_biosolids_managed_land_applied:83.67,latitude:29.757444,longitude:-95.714111},{facility_name:"FULTON (C)",city:"Fulton","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:83,amount_of_biosolids_managed_land_applied:0,latitude:43.32073,longitude:-76.41614},{facility_name:"AZTEC, CITY OF - WWTP",city:"Aztec","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:83,amount_of_biosolids_managed_land_applied:0,latitude:36.82275,longitude:-107.99622},{facility_name:"REGIONAL WWTF",city:"Rio Bravo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:83,amount_of_biosolids_managed_land_applied:0,latitude:27.36687,longitude:-99.501728},{facility_name:"PRASA LAJAS",city:"Lajas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:83,amount_of_biosolids_managed_land_applied:82.72,latitude:18.04672464,longitude:-67.0601652},{facility_name:"NW HARRIS CO MUD#'S 21-23 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:83,amount_of_biosolids_managed_land_applied:0,latitude:29.972694,longitude:-95.47825},{facility_name:"HARRIS CO MUD 287 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:82,amount_of_biosolids_managed_land_applied:40.06,latitude:29.825111,longitude:-95.757611},{facility_name:"HARRIS CO MUD 149 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:82,amount_of_biosolids_managed_land_applied:82.19,latitude:29.881056,longitude:-95.656333},{facility_name:"KJC KENTUCKY STATE REFORMATORY",city:"La Grange","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:82,amount_of_biosolids_managed_land_applied:0,latitude:38.391996,longitude:-85.416022},{facility_name:"NORTHWEST HARRIS COUNTY MUD 10 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:82,amount_of_biosolids_managed_land_applied:72.48,latitude:29.980357,longitude:-95.678026},{facility_name:"GALENA SOUTH STP, CITY OF",city:"Galena","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:82,amount_of_biosolids_managed_land_applied:36.13,latitude:42.395538,longitude:-90.44103},{facility_name:"KENEDY WWTF",city:"Kenedy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:0,latitude:28.821917,longitude:-97.841389},{facility_name:"RAYFORD ROAD MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:80.94,latitude:29.755844,longitude:-95.36659},{facility_name:"HARRIS COUNTY WCID 1 WWTP",city:"Highlands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:0,latitude:29.800194,longitude:-95.05025},{facility_name:"CITY OF ATLANTIC",city:"Atlantic","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:80.8,latitude:41.39291154,longitude:-94.97882184},{facility_name:"GREENPORT (T)",city:"Hudson","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:0,latitude:42.25639,longitude:-73.75894},{facility_name:"HARRIS CO MUD 412 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:0,latitude:29.956083,longitude:-95.213361},{facility_name:"HARRIS COUNTY FWSD 61 WWTP 1",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:0,latitude:29.93932,longitude:-95.61979},{facility_name:"WOODLAND STP",city:"Woodland","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:80.66,latitude:45.90384,longitude:-122.74039},{facility_name:"LUVERNE WASTEWATER TREATMENT FACILITY",city:"Luverne","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:81,amount_of_biosolids_managed_land_applied:80.64,latitude:43.651378,longitude:-96.199683},{facility_name:"PRASA AIBONITO WWTP",city:"Aibonito","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:0,latitude:18.148561,longitude:-66.278392},{facility_name:"NORTH KOOCHICHING AREA SAN DIS",city:"International Falls","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:80.13,latitude:48.522363,longitude:-93.575209},{facility_name:"HARRIS COUNTY MUD 185 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:0,latitude:29.85262,longitude:-95.64008},{facility_name:"MINEOLA WWTF",city:"Mineola","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:0,latitude:32.634556,longitude:-95.482444},{facility_name:"INDEPENDENCE WASTEWATER PLANT",city:"Independence","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:80,latitude:37.22884,longitude:-95.692941},{facility_name:"NTUA SHIPROCK WWTP",city:"Shiprock","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:0,latitude:36.808635,longitude:-108.791075},{facility_name:"COHASSET W W T P*",city:"Cohasset","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:0,latitude:42.23554194,longitude:-70.8186245},{facility_name:"PRASA RIO GRANDE ESTATES",city:"Rio Grande","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:80,amount_of_biosolids_managed_land_applied:0,latitude:18.37242,longitude:-65.86587},{facility_name:"CITY OF JACINTO CITY WWTP",city:"Jacinto City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:29.76746,longitude:-95.25115},{facility_name:"NW HARRIS COUNTY MUD 16 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:29.869587,longitude:-95.663968},{facility_name:"CITY OF LA COSTE WWTP",city:"La Coste","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:29.308724,longitude:-98.805888},{facility_name:"MILLEY'S CREEK WPCP",city:"Montgomery","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:79,latitude:32.387661,longitude:-86.041448},{facility_name:"TOWASSA WWTP",city:"Montgomery","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:79,latitude:32.39492,longitude:-86.36444},{facility_name:"CITY OF CLANTON",city:"Clanton","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:67.37,latitude:32.847222,longitude:-86.606944},{facility_name:"MILLS ROAD MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:29.955722,longitude:-95.571694},{facility_name:"ASHERTON WWTP",city:"Asherton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:28.460444,longitude:-99.750167},{facility_name:"CITY OF THORNDALE WWTP",city:"Thorndale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:30.60575,longitude:-97.201917},{facility_name:"SARALAND CITY OF",city:"Saraland","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:78.85,latitude:30.8138,longitude:-88.0681},{facility_name:"ABERDEEN PROVING GROUND, ABERDEEN AREA WWTP",city:"Aberdeen","state_postal;":"MD",state:"Md.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:78.8,latitude:39.52147278,longitude:-76.19573922},{facility_name:"CITY OF ANAMOSA",city:"Anamosa","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:78.7,latitude:42.108136,longitude:-91.285581},{facility_name:"GAS CITY WWTP",city:"Gas City","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:78.63,latitude:40.48789,longitude:-85.61246},{facility_name:"SPENCER ROAD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:29.880611,longitude:-95.625917},{facility_name:"ADDICKS UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:29.81205,longitude:-95.68392},{facility_name:"MARION W W T F",city:"Marion","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:41.70305,longitude:-70.7786},{facility_name:"SHASTA LAKE WWTP",city:"Shasta Lake","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:0,latitude:40.67347704,longitude:-122.3778198},{facility_name:"PEARL RIVER CO UTILITY AUTHORITY, POPLARVILLE POTW",city:"Poplarville","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:79,amount_of_biosolids_managed_land_applied:78.54,latitude:30.8325,longitude:-89.541111},{facility_name:"CITY OF KNOXVILLE",city:"Knoxville","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:78.44,latitude:41.32174,longitude:-93.108105},{facility_name:"NW HARRIS COUNTY MUD 20 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:78.39,latitude:30.017222,longitude:-95.485555},{facility_name:"PRASA GUAYANILLA",city:"Guayanilla","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:0,latitude:18.014129,longitude:-66.785022},{facility_name:"OAKWILDE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:78.01,latitude:29.881996,longitude:-95.343803},{facility_name:"PICKENS CO/MIDDLE REG. WWTF",city:"Central","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:78,latitude:34.69217,longitude:-82.76706},{facility_name:"CITY OF VINTON",city:"Vinton","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:77.8,latitude:42.17271569,longitude:-92.06563703},{facility_name:"CITY OF MARQUEZ WWTP",city:"Marquez","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:0,latitude:31.228222,longitude:-96.236333},{facility_name:"FAR HILLS UTILITY DISTRICT WWT",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:0,latitude:30.40395,longitude:-95.55353},{facility_name:"UPPER MONTGOMERY JOINT SEWER A",city:"Pennsburg","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:67.789,latitude:40.38713,longitude:-75.50173},{facility_name:"CITY OF HAMILTON",city:"Hamilton","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:236.2,latitude:46.24534,longitude:-114.15689},{facility_name:"GENESEO (V)",city:"Geneseo","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:78,amount_of_biosolids_managed_land_applied:0,latitude:42.79522,longitude:-77.81702},{facility_name:"FORT BEND COUNTY MUD 41 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:77.2,latitude:29.648055,longitude:-95.664722},{facility_name:"CASTLEWOOD REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:77.06,latitude:29.838282,longitude:-95.666778},{facility_name:"METROPOLIS STP, CITY OF",city:"Metropolis","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:0,latitude:37.15367,longitude:-88.73889},{facility_name:"BRAZORIA COUNTY MUD 31 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:0,latitude:29.455806,longitude:-95.439639},{facility_name:"PICKENS CO/EIGHTEEN MILE CRK",city:"Liberty","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:77,latitude:34.76083,longitude:-82.68579},{facility_name:"HEMPHILL WWTP",city:"Hemphill","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:0,latitude:31.332389,longitude:-93.853417},{facility_name:"EAST PEORIA #3 STP, CITY OF",city:"East Peoria","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:0,latitude:40.70847,longitude:-89.53357},{facility_name:"RODEO PALMS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:76.99,latitude:29.489389,longitude:-95.406861},{facility_name:"CITY OF LA GRANGE WWTP",city:"La Grange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:0,latitude:29.89722,longitude:-96.88174},{facility_name:"CASTLETOP CAPITAL HAYS ABC WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:77,amount_of_biosolids_managed_land_applied:0,latitude:30.0375,longitude:-97.8125},{facility_name:"NORTH MIDDLETON AUTHORITY",city:"Carlisle","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:76,amount_of_biosolids_managed_land_applied:76.38,latitude:40.239392,longitude:-77.176248},{facility_name:"HERON LAKE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:76,amount_of_biosolids_managed_land_applied:0,latitude:29.93239,longitude:-95.545588},{facility_name:"CITY OF WEBSTER CITY",city:"Webster City","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:76,amount_of_biosolids_managed_land_applied:76.2,latitude:42.468655,longitude:-93.83660439},{facility_name:"LIVE OAK WWTF",city:"Live Oak","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:76,amount_of_biosolids_managed_land_applied:75.89,latitude:30.30792,longitude:-82.99205},{facility_name:"TOWN OF PONDER WWTP",city:"Ponder","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:76,amount_of_biosolids_managed_land_applied:0,latitude:33.171453,longitude:-97.286351},{facility_name:"NARRAGANSETT TOWN HALL",city:"Narragansett","state_postal;":"RI",state:"R.I.",amount_of_biosolids_generated:75,amount_of_biosolids_managed_land_applied:0,latitude:41.43017,longitude:-71.46445},{facility_name:"STONY POINT (T)",city:"Stony Point","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:75,amount_of_biosolids_managed_land_applied:85.35,latitude:41.22894,longitude:-73.98478},{facility_name:"ISABELLA RESERVATION WWTP",city:"Mount Pleasant","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:75,amount_of_biosolids_managed_land_applied:57.2,latitude:43.604548,longitude:-84.7067},{facility_name:"FERNDALE STP",city:"Ferndale","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:75,amount_of_biosolids_managed_land_applied:74.9,latitude:48.837747,longitude:-122.596554},{facility_name:"NW HARRIS COUNTY MUD 29 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:75,amount_of_biosolids_managed_land_applied:0,latitude:29.91054,longitude:-95.60554},{facility_name:"OIL CITY - STP",city:"Oil City","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:74,amount_of_biosolids_managed_land_applied:0,latitude:41.433,longitude:-79.70823},{facility_name:"CITY OF SUNRISE UTILITIES DEPARTMENT - SOUTHWEST WWTF",city:"Davie","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:74,amount_of_biosolids_managed_land_applied:0,latitude:26.05777173,longitude:-80.36996267},{facility_name:"WINFIELD, CITY OF",city:"Winfield","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:74,amount_of_biosolids_managed_land_applied:73.63,latitude:37.25907685,longitude:-96.9107652},{facility_name:"CITY OF HAMILTON WWTP",city:"Hamilton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:73,amount_of_biosolids_managed_land_applied:0,latitude:31.70868,longitude:-98.115072},{facility_name:"WOODLAND OAKS WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:73,amount_of_biosolids_managed_land_applied:0,latitude:30.235472,longitude:-95.574083},{facility_name:"LAURENS CO W&S/CLINTON-JOANNA",city:"Joanna","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:73,amount_of_biosolids_managed_land_applied:73,latitude:34.391111,longitude:-81.810833},{facility_name:"CITY OF GASTONIA",city:"Gastonia","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:73,amount_of_biosolids_managed_land_applied:72.95,latitude:35.236761,longitude:-81.061509},{facility_name:"HARVEST GREEN WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:73,amount_of_biosolids_managed_land_applied:0,latitude:29.629722,longitude:-95.71722},{facility_name:"ROUSES POINT (V)",city:"Rouses Point","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:0,latitude:44.99043464,longitude:-73.37585035},{facility_name:"TINICUM TOWNSHIP WTP",city:"Lester","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:0,latitude:39.8727,longitude:-75.29098},{facility_name:"CITY OF HEARNE WWTP 2",city:"Hearne","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:72.3,latitude:30.856583,longitude:-96.602278},{facility_name:"HELENDALE SILVERLAKES STP",city:"Helendale","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:0,latitude:34.77537,longitude:-117.3285},{facility_name:"CELINA WWTP",city:"Celina","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:0,latitude:33.331972,longitude:-96.794028},{facility_name:"MCI NORFOLK-WALPOLE WWTF",city:"Norfolk","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:0,latitude:42.129512,longitude:-71.309612},{facility_name:"GENERATION PARK MANAGEMENT DISTRICT WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:0,latitude:29.923431,longitude:-95.214344},{facility_name:"NW HARRIS COUNTY MUD 5 PLANT 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:72,amount_of_biosolids_managed_land_applied:0,latitude:30.02222,longitude:-95.647777},{facility_name:"CITY OF GIDDINGS SOUTH WWTP",city:"Giddings","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:30.160194,longitude:-96.936361},{facility_name:"DEFUNIAK SPRINGS, CITY OF - WWTP",city:"Defuniak Springs","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:71.46,latitude:30.72698,longitude:-86.1089},{facility_name:"HARRIS COUNTY MUD 371 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:29.92847,longitude:-95.8079},{facility_name:"HARRIS COUNTY MUD 11 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:29.934877,longitude:-95.459191},{facility_name:"NORTH GREEN MUD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:29.952294,longitude:-95.38655},{facility_name:"STANLY COUNTY",city:"Albemarle","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:71,latitude:35.235773,longitude:-80.268946},{facility_name:"VANPORT TOWNSHIP MUNICIPAL AUT",city:"Vanport","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:71,latitude:40.685343,longitude:-80.322697},{facility_name:"WHARTON WWTP 1",city:"Wharton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:29.301642,longitude:-96.098034},{facility_name:"PETERS TOWNSHIP SANITARY AUTHORITY",city:"Mcmurray","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:40.28149,longitude:-80.07855},{facility_name:"CATASAUQUA BOROUGH AUTHORITY",city:"Catasauqua","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:40.65367,longitude:-75.47423},{facility_name:"CITY OF CARRIZO SPRINGS WWTP",city:"Carrizo Springs","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:28.525271,longitude:-99.85036},{facility_name:"SPRING CREEK UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:70.87,latitude:30.110365,longitude:-95.405316},{facility_name:"EMERALD FOREST UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:29.951302,longitude:-95.3407},{facility_name:"CITY OF NASSAU BAY WWTP",city:"Nassau Bay","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:29.533582,longitude:-95.090506},{facility_name:"CENTRAL WWTF",city:"Bacliff","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:71,amount_of_biosolids_managed_land_applied:0,latitude:29.50603,longitude:-94.99056},{facility_name:"FT BEND COUNTY MUD 185 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:66.9261563,latitude:29.735881,longitude:-95.794749},{facility_name:"PRESTONWOOD FOREST UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:70.3216745,latitude:29.985703,longitude:-95.56147},{facility_name:"BRIDGESTONE FACILITY",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:0,latitude:30.058333,longitude:-95.486944},{facility_name:"CITY OF MILLBROOK",city:"Millbrook","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:69.88,latitude:32.5259,longitude:-86.3648},{facility_name:"LAGUNA MADRE WWTP",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:0,latitude:27.671722,longitude:-97.270036},{facility_name:"PANA STP, CITY OF",city:"Pana","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:66.2,latitude:39.368889,longitude:-89.086389},{facility_name:"WILLOW CREEK FARMS MUD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:69.629867,latitude:29.773851,longitude:-95.890669},{facility_name:"ROLLING CREEK UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:0,latitude:29.836389,longitude:-95.689972},{facility_name:"NORTHWEST FREEWAY MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:70,amount_of_biosolids_managed_land_applied:0,latitude:30.026861,longitude:-95.803},{facility_name:"OROFINO, CITY OF",city:"Orofino","state_postal;":"ID",state:"Idaho",amount_of_biosolids_generated:69,amount_of_biosolids_managed_land_applied:0,latitude:46.487385,longitude:-116.267884},{facility_name:"TRESCHWIG CENTRAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:69,amount_of_biosolids_managed_land_applied:68.9570446,latitude:30.035114,longitude:-95.362508},{facility_name:"HARRIS COUNTY MUD 70 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:69,amount_of_biosolids_managed_land_applied:68.63,latitude:29.746033,longitude:-95.4654},{facility_name:"CYPRESS HILL MUD 1 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:68,amount_of_biosolids_managed_land_applied:0,latitude:29.981306,longitude:-95.700778},{facility_name:"CITY OF CASTROVILLE WWTF",city:"Castroville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:68,amount_of_biosolids_managed_land_applied:0,latitude:29.343888,longitude:-98.884166},{facility_name:"FORT BEND CNTY MUD 34 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:68,amount_of_biosolids_managed_land_applied:68.08,latitude:29.701111,longitude:-95.793055},{facility_name:"HARRIS COUNTY MUD 391 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:68,amount_of_biosolids_managed_land_applied:67.83,latitude:29.990087,longitude:-95.721404},{facility_name:"WILBARGER CREEK MUD 2 WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:68,amount_of_biosolids_managed_land_applied:0,latitude:30.343089,longitude:-97.54084},{facility_name:"HARRIS COUNTY ID 18 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:68,amount_of_biosolids_managed_land_applied:65.2702936,latitude:30.088303,longitude:-95.437744},{facility_name:"MULVANE, CITY OF",city:"Mulvane","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:68,amount_of_biosolids_managed_land_applied:67.5,latitude:37.475751,longitude:-97.244749},{facility_name:"SPRING CYPRESS SHOPPING CENTER WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:0,latitude:29.972722,longitude:-95.689111},{facility_name:"HARRIS COUNTY MUD 24 WWTP",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:0,latitude:30.031806,longitude:-95.526694},{facility_name:"FORT BEND COUNTY MUD 190 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:0,latitude:29.7302,longitude:-95.42877},{facility_name:"FRUITA CITY OF",city:"Fruita","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:0,latitude:39.158892,longitude:-108.731073},{facility_name:"CITY OF CENTERVILLE",city:"Centerville","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:67.2,latitude:40.73252,longitude:-92.871824},{facility_name:"FULSHEAR MUD 3B WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:0,latitude:29.756944,longitude:-95.911944},{facility_name:"GROESBECK WTP",city:"Groesbeck","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:0,latitude:31.574611,longitude:-96.520806},{facility_name:"CITY OF HUMBOLDT",city:"Humboldt","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:455.85,latitude:42.72028,longitude:-94.21448},{facility_name:"CAREY STATION URBAN WATER REUSE FACILITY",city:"Greensboro","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:67,latitude:33.495879,longitude:-83.246859},{facility_name:"BROOKINGS, CITY OF",city:"Brookings","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:67,latitude:42.04707,longitude:-124.287909},{facility_name:"CITY OF EMMETSBURG",city:"Emmetsburg","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:66.95,latitude:43.10917,longitude:-94.67953},{facility_name:"CITY OF JASPER",city:"Jasper","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:66.89,latitude:30.505711,longitude:-82.949461},{facility_name:"FORT BEND COUNTY MUD 118 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:66.6376209,latitude:29.645486,longitude:-95.728329},{facility_name:"MINDEN, CITY OF",city:"Minden","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:67,amount_of_biosolids_managed_land_applied:0,latitude:32.581278,longitude:-93.297405},{facility_name:"HARRIS COUNTY MUD 495 WWTP 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:66,amount_of_biosolids_managed_land_applied:0,latitude:29.859166,longitude:-95.81888},{facility_name:"HERITAGE VILLAGE COMPANY",city:"Southbury","state_postal;":"CT",state:"Conn.",amount_of_biosolids_generated:66,amount_of_biosolids_managed_land_applied:0,latitude:41.48477,longitude:-73.22364},{facility_name:"WAVERLY WWTF",city:"Waverly","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:66,amount_of_biosolids_managed_land_applied:66.01,latitude:40.935205,longitude:-96.521068},{facility_name:"EASLEY/GEORGES CREEK LAGOON",city:"Easley","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:66,amount_of_biosolids_managed_land_applied:66,latitude:34.844722,longitude:-82.588611},{facility_name:"CITY OF WALCOTT",city:"Walcott","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:66,amount_of_biosolids_managed_land_applied:0,latitude:41.59292408,longitude:-90.77460135},{facility_name:"CENTERVILLE STP",city:"Centerville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:66,amount_of_biosolids_managed_land_applied:38.7,latitude:35.8197,longitude:-87.6042},{facility_name:"JAMESTOWN STP",city:"Jamestown","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:65.46,latitude:36.42078,longitude:-84.94592},{facility_name:"BRAZORIA COUNTY MUD 25 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:65.27,latitude:29.530194,longitude:-95.388444},{facility_name:"MILLSTADT STP, VILLAGE OF",city:"Millstadt","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:47.25,latitude:38.4586,longitude:-90.088},{facility_name:"GALVESTON COUNTY WCID 8",city:"Santa Fe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:0,latitude:29.375809,longitude:-95.07495},{facility_name:"SPRING WEST MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:0,latitude:30.0705,longitude:-95.453694},{facility_name:"CITY OF MADISON",city:"Madison","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:64.75,latitude:33.546,longitude:-83.49225},{facility_name:"HARRIS FORT BEND COUNTIES MUD 3 WW",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:14.76,latitude:29.779184,longitude:-95.790638},{facility_name:"CARMI WWTP, CITY OF",city:"Carmi","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:64.737,latitude:38.0647,longitude:-88.1706},{facility_name:"GE HYDRIL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:65,amount_of_biosolids_managed_land_applied:0,latitude:29.93882,longitude:-95.33605},{facility_name:"TOMBALL NORTH WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:64,amount_of_biosolids_managed_land_applied:64.4,latitude:30.111389,longitude:-95.610278},{facility_name:"MOUNTAIN CITY STP",city:"Mountain City","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:64,amount_of_biosolids_managed_land_applied:0,latitude:36.43013,longitude:-81.80252},{facility_name:"CITY OF RED OAK",city:"Red Oak","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:64,amount_of_biosolids_managed_land_applied:95.87,latitude:41.007,longitude:-95.223327},{facility_name:"CITY OF CRYSTAL CITY",city:"Sabinal","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:64,amount_of_biosolids_managed_land_applied:0,latitude:28.6969,longitude:-99.8176},{facility_name:"SCAPPOOSE, CITY OF",city:"Scappoose","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:64,amount_of_biosolids_managed_land_applied:70,latitude:45.752635,longitude:-122.856076},{facility_name:"BEECHNUT MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:0,latitude:29.68867,longitude:-95.62633},{facility_name:"WARTBURG STP",city:"Wartburg","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:63.2,latitude:36.083965,longitude:-84.555494},{facility_name:"CITY OF DIBOLL WWTP",city:"Diboll","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:0,latitude:31.16659,longitude:-94.797446},{facility_name:"CHEROKEE COUNTY WATER & SEWER AUTHORITY (RIVERBEND WWTP)",city:"Ball Ground","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:0,latitude:34.29193,longitude:-84.38933},{facility_name:"GREENWOOD UD - WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:0,latitude:29.84986,longitude:-95.22642},{facility_name:"MONTGOMERY COUNTY MUD 19 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:0,latitude:30.126194,longitude:-95.443917},{facility_name:"SCOTT AIR FORCE BASE",city:"Scott Air Force Base","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:58.3,latitude:38.551625,longitude:-89.848048},{facility_name:"CITY OF CADDO MILLS WWTF",city:"Caddo Mills","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:0,latitude:33.042312,longitude:-96.216144},{facility_name:"FARMERSVILLE WWTP 1",city:"Farmersville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:63,amount_of_biosolids_managed_land_applied:0,latitude:33.155667,longitude:-96.374694},{facility_name:"BLUE RIDGE WEST MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:0,latitude:29.600355,longitude:-95.509987},{facility_name:"HARRIS COUNTY MUD 171 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:0,latitude:29.86,longitude:-95.783333},{facility_name:"MCCRAY MEADOWS WWTP 1",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:62.064168,latitude:29.646388,longitude:-95.769166},{facility_name:"CITY OF OAKLAND",city:"Oakland","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:62,latitude:35.222975,longitude:-89.522953},{facility_name:"BRIAR CREEK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:0,latitude:30.327222,longitude:-97.527583},{facility_name:"CITY OF ALEDO WWTP",city:"Aledo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:0,latitude:32.68563,longitude:-97.60905},{facility_name:"SIDNEY (V)",city:"Sidney","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:0,latitude:42.31673,longitude:-75.38999},{facility_name:"PAOLA, CITY OF",city:"Paola","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:61.68,latitude:38.59251417,longitude:-94.85147678},{facility_name:"JACKSON POTW - TRAHON/BIG CREEK",city:"Jackson","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:61.67,latitude:32.152167,longitude:-90.263889},{facility_name:"FORT BEND MUD 26 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:62,amount_of_biosolids_managed_land_applied:0,latitude:29.591189,longitude:-95.521027},{facility_name:"FONDREN ROAD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:61,amount_of_biosolids_managed_land_applied:0,latitude:29.63151,longitude:-95.51565},{facility_name:"CITY OF WINNSBORO WWTP",city:"Winnsboro","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:61,amount_of_biosolids_managed_land_applied:2.45,latitude:32.930556,longitude:-95.298806},{facility_name:"CITY OF CLARINDA",city:"Clarinda","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:61,amount_of_biosolids_managed_land_applied:61.13,latitude:40.73813,longitude:-95.02616824},{facility_name:"CITY OF MANVEL WWTP",city:"Manvel","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:61,amount_of_biosolids_managed_land_applied:0,latitude:29.47372,longitude:-95.3703},{facility_name:"CLYDE WWTP",city:"Clyde","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:61,amount_of_biosolids_managed_land_applied:0,latitude:32.378624,longitude:-99.481188},{facility_name:"CITY OF RAYMONDVILLE WWTP",city:"Raymondville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:61,amount_of_biosolids_managed_land_applied:0,latitude:26.489917,longitude:-97.772806},{facility_name:"BRUSH CITY OF",city:"Brush","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:60.47,latitude:40.258598,longitude:-103.6323475},{facility_name:"LEO L. DUBOIS WPCF - BRIDGEWATER CORRECTION COMPLEX",city:"Bridgewater","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:0,latitude:41.945123,longitude:-70.951715},{facility_name:"RIVERSIDE WATER RECLAMAT AUTH",city:"Riverside","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:0,latitude:40.03901,longitude:-74.96548},{facility_name:"CITY OF BUTLER",city:"Butler","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:60.12,latitude:38.258504,longitude:-94.332079},{facility_name:"DE SOTO, CITY OF (WWTP)",city:"De Soto","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:60,latitude:38.98162,longitude:-94.99375},{facility_name:"WHITEWATER RIVER REGIONAL WWTF",city:"Saint Charles","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:59.862,latitude:43.9776105,longitude:-92.06188892},{facility_name:"PRASA SAN SEBASTIAN WWTP",city:"San Sebastian","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:0,latitude:18.345348,longitude:-67.01764},{facility_name:"ATTICA (V)",city:"Attica","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:146.05,latitude:42.86447,longitude:-78.28306},{facility_name:"TOWN OF RAMSEUR",city:"Ramseur","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:59.45,latitude:35.73288,longitude:-79.65353},{facility_name:"PALMER PLANTATION MUD 1 REGIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:60,amount_of_biosolids_managed_land_applied:0,latitude:29.551636,longitude:-95.539408},{facility_name:"CITY OF ROMA 2 WWTP",city:"Roma","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:59.47,latitude:26.394334,longitude:-99.00178},{facility_name:"HOGANSVILLE, CITY OF (HOGANSVILLE WPCP)",city:"Hogansville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:0,latitude:33.154316,longitude:-84.938434},{facility_name:"HIDALGO COUNTY MUD NO 1 WASTEWATER TREATMENT FACILITY",city:"Mission","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:0,latitude:26.250317,longitude:-98.395714},{facility_name:"WEST LAKE HOUSTON WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:0,latitude:29.971665,longitude:-95.165237},{facility_name:"ST CLAIR WWTF",city:"St. Clair","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:59.05,latitude:38.3213,longitude:-90.998505},{facility_name:"MONTGOMERY COUNTY MUD 96",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:0,latitude:30.0725,longitude:-95.263333},{facility_name:"FAIRGREEN WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:58.9059,latitude:29.919271,longitude:-95.326373},{facility_name:"CITY OF NEW HAMPTON",city:"New Hampton","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:58.89,latitude:43.058401,longitude:-92.314064},{facility_name:"CITY OF BLOUNTSTOWN",city:"Blountstown","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:59,amount_of_biosolids_managed_land_applied:58.86,latitude:30.433683,longitude:-85.048897},{facility_name:"RUSSELL COUNTY REGIONAL STP",city:"Jamestown","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:58,amount_of_biosolids_managed_land_applied:0,latitude:36.946111,longitude:-85.020833},{facility_name:"TOWN OF WELDON",city:"Weldon","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:58,amount_of_biosolids_managed_land_applied:58,latitude:36.4235,longitude:-77.5775},{facility_name:"NEWPORT, CITY OF-HWY 14",city:"Newport","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:58,amount_of_biosolids_managed_land_applied:57.98,latitude:35.60356,longitude:-91.28383},{facility_name:"MADISON, CITY OF (BIOSOLIDS)",city:"Madison, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:58,amount_of_biosolids_managed_land_applied:0,latitude:43.990841,longitude:-97.092349},{facility_name:"CITY OF LIBERTY MAIN WWTP",city:"Liberty","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:58,amount_of_biosolids_managed_land_applied:0,latitude:30.050174,longitude:-94.801609},{facility_name:"CRANDALL WWTP",city:"Crandall","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:58,amount_of_biosolids_managed_land_applied:0,latitude:32.609306,longitude:-96.457111},{facility_name:"WALDEN (V)",city:"Walden","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:0,latitude:41.56139478,longitude:-74.16928811},{facility_name:"JOHNSON COUNTY SUD WWTP",city:"Cleburne","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:0,latitude:32.497105,longitude:-97.351913},{facility_name:"TOWANDA MUN AUTH",city:"Towanda","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:0,latitude:41.762503,longitude:-76.44303},{facility_name:"NOTTINGHAM COUNTRY MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:0,latitude:29.755844,longitude:-95.36659},{facility_name:"CITY OF CLIFTON WWTF",city:"Clifton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:0,latitude:31.783694,longitude:-97.567417},{facility_name:"1ST SPECIAL OPERATIONS CIVIL ENGINEER SQUADRON",city:"Hurlburt Field","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:56.866,latitude:30.417251,longitude:-86.695784},{facility_name:"ENCANTO REAL UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:56.7660995,latitude:30.107647,longitude:-95.487783},{facility_name:"HARRIS COUNTY WCID 84 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:57,amount_of_biosolids_managed_land_applied:0,latitude:29.8015,longitude:-95.115167},{facility_name:"MONTGOMERY CO MUD 139 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:56.4843481,latitude:30.264066,longitude:-95.514505},{facility_name:"CENTRALIA STP",city:"Centralia","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:0,latitude:46.759084,longitude:-123.019152},{facility_name:"GUAM WATERWORKS AUTHORITY",city:"Hagatna","state_postal;":"GU",state:"Guam",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:0,latitude:13.4382999,longitude:144.7729285},{facility_name:"WEST PARK MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:0,latitude:29.785583,longitude:-95.708067},{facility_name:"SIENNA PLANTATION WWTP",city:"Missouri City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:0,latitude:29.536611,longitude:-95.550472},{facility_name:"MEADOWS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:55.72,latitude:29.899028,longitude:-95.332222},{facility_name:"ALDINE VILLAGE WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:0,latitude:29.91484,longitude:-95.38405},{facility_name:"CITY OF SMITHVILLE",city:"Smithville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:56,amount_of_biosolids_managed_land_applied:55.5,latitude:39.387143,longitude:-94.581722},{facility_name:"WAUCHULA CITY OF WWTF",city:"Wauchula","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:55.3,latitude:27.54741,longitude:-81.80003},{facility_name:"WILLIAM H PORTER WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:0,latitude:29.854861,longitude:-95.615639},{facility_name:"CITY OF YOAKUM WWTP",city:"Yoakum","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:0,latitude:29.273,longitude:-97.157472},{facility_name:"BOOTHBAY HARBOR SEWER DISTRICT",city:"Boothbay Harbor","state_postal;":"ME",state:"Maine",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:0,latitude:43.85187,longitude:-69.63204},{facility_name:"SELBYVILLE STP",city:"Selbyville","state_postal;":"DE",state:"Del.",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:54.93,latitude:38.471333,longitude:-75.2185},{facility_name:"BYRON STP, CITY OF",city:"Byron","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:54.75,latitude:42.123333,longitude:-89.253333},{facility_name:"MADISON (CITY OF) SOUTHSIDE WPCP",city:"Madison","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:54.7,latitude:33.586556,longitude:-83.448833},{facility_name:"PRASA COMERIO WASTE WATER TREA",city:"Comerio","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:0,latitude:18.2425,longitude:-66.206111},{facility_name:"BONNIE BRAE FOREST MANOR SD",city:"Lockport","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:55,amount_of_biosolids_managed_land_applied:54.56,latitude:41.59846,longitude:-88.04059},{facility_name:"NEW CASTLE WWTF",city:"New Castle","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:35.93,latitude:39.57013,longitude:-107.53869},{facility_name:"ALBION - STP",city:"Albion","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:41.89141,longitude:-80.36506},{facility_name:"FORT BEND COUNTY MUD 5",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:54.31,latitude:29.493348,longitude:-95.809264},{facility_name:"HARRIS COUNTY WCID 76 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:29.913516,longitude:-95.291457},{facility_name:"HCO MWD 71 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:29.818097,longitude:-95.743688},{facility_name:"SOUTHDOWN WASTEWATER TREATMENT FACILITY",city:"Pearland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:29.578435,longitude:-95.362265},{facility_name:"FAIRBURY WWTF",city:"Fairbury","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:54.04,latitude:40.13734,longitude:-97.18129},{facility_name:"FOREST COVE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:30.030319,longitude:-95.246925},{facility_name:"CEDAR BAYOU WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:30.036452,longitude:-95.070072},{facility_name:"HARRIS COUNTY MUNICIPAL UTILITY DISTRICT NO 495 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:29.852741,longitude:-95.791144},{facility_name:"PERU STP #2",city:"Peru","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:0,latitude:41.327951,longitude:-89.177137},{facility_name:"BIGFORK COUNTY WATER AND SEWER",city:"Bigfork","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:54,amount_of_biosolids_managed_land_applied:53.54,latitude:48.10334089,longitude:-114.0401908},{facility_name:"CITY OF BUFFALO",city:"Buffalo","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:53.6,latitude:37.47914064,longitude:-93.18581312},{facility_name:"LLANO WWTP",city:"Llano","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:53.11,latitude:30.75031,longitude:-98.67852},{facility_name:"EL DORADO UD - WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:53.11,latitude:29.953528,longitude:-95.262694},{facility_name:"CITY OF VIENNA",city:"Vienna","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:53.09578,latitude:32.09865,longitude:-83.77713},{facility_name:"MONTGOMERY COUNTY MUD 112 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:53.05,latitude:30.2441,longitude:-95.492405},{facility_name:"CITY OF HIDALGO WWTP",city:"Hidalgo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:0,latitude:26.182831,longitude:-97.996643},{facility_name:"MONTGOMERY COUNTY MUD 105 WASTEWATER TREATMENT PLANT 1",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:0,latitude:30.107306,longitude:-95.34975},{facility_name:"CITY OF WHARTON WWTP 2",city:"Wharton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:53,amount_of_biosolids_managed_land_applied:0,latitude:29.317167,longitude:-96.125417},{facility_name:"NORTHWEST HARRIS COUNTY MUD 5 WWT",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:52,amount_of_biosolids_managed_land_applied:0,latitude:29.990676,longitude:-95.644594},{facility_name:"CITY OF GIDDINGS NORTH WWTF",city:"Giddings","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:52,amount_of_biosolids_managed_land_applied:0,latitude:30.194639,longitude:-96.950806},{facility_name:"CITY OF OZARK",city:"Ozark","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:52,amount_of_biosolids_managed_land_applied:68.1,latitude:37.02139,longitude:-93.20509},{facility_name:"CITY OF COLUMBUS WWTP",city:"Columbus","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:29.697415,longitude:-96.534923},{facility_name:"RIVER PLANTATION MUD WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:51.36,latitude:30.239806,longitude:-95.435806},{facility_name:"CITY-WHITE SULPHUR SPRINGS",city:"White Sulphur Springs","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:37.793085,longitude:-80.301527},{facility_name:"ROAMINGWOOD SEWER AND WATER ASSOCIATION",city:"Lake Ariel","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:41.40175,longitude:-75.3716},{facility_name:"NW HARRIS COUNTY MUD 9 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:29.961944,longitude:-95.588888},{facility_name:"DILLEY WWTP",city:"Dilley","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:28.666111,longitude:-99.148333},{facility_name:"NORTHWEST HARRIS COUNTY MUD 19 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:30.132417,longitude:-95.532694},{facility_name:"HARRIS COUNTY MUD 202 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:29.954596,longitude:-95.503163},{facility_name:"BEAR CREEK WRF LAS",city:"Hampton","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:51,amount_of_biosolids_managed_land_applied:0,latitude:33.358754,longitude:-84.344501},{facility_name:"LONDONDERRY WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:50.42,latitude:30.12125,longitude:-95.549556},{facility_name:"PIRATES BEACH WWTP",city:"Galveston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:0,latitude:29.2097,longitude:-94.9478},{facility_name:"CITY OF NEVADA",city:"Nevada","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:0,latitude:42.02316,longitude:-93.45235},{facility_name:"SEYMOUR WWTP",city:"Seymour","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:0,latitude:33.57425,longitude:-99.246722},{facility_name:"CITY OF JACKSON",city:"Jackson","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:49.93,latitude:33.311083,longitude:-83.968861},{facility_name:"CITY OF SPLENDORA WWTF",city:"Splendora","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:0,latitude:30.236929,longitude:-95.159635},{facility_name:"SUNBELT FWSD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:49.86,latitude:29.88896,longitude:-95.40283},{facility_name:"HARRIS COUNTY WCID 74 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:49.76,latitude:29.89915,longitude:-95.3219},{facility_name:"CITY OF DEWITT",city:"Dewitt","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:49.6,latitude:41.82425,longitude:-90.53762},{facility_name:"MONTICELLO STP",city:"Monticello","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:49.5,latitude:36.814444,longitude:-84.875556},{facility_name:"ANDY BOWIE WWTP",city:"Port Isabel","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:50,amount_of_biosolids_managed_land_applied:0,latitude:26.137972,longitude:-97.175028},{facility_name:"CHUCKAWALLA VALLEY/ IRONWOOD STATE PRISON WWTF",city:"Blythe","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:49,amount_of_biosolids_managed_land_applied:0,latitude:33.61217117,longitude:-114.5954576},{facility_name:"TULLAHOMA STP",city:"Tullahoma","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:49,amount_of_biosolids_managed_land_applied:49.09,latitude:35.35183,longitude:-86.20252},{facility_name:"HARRIS COUNTY MUD 203 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:49,amount_of_biosolids_managed_land_applied:0,latitude:29.945222,longitude:-95.436028},{facility_name:"CITY OF PENITAS WWTP",city:"Penitas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:49,amount_of_biosolids_managed_land_applied:49.04,latitude:26.228055,longitude:-98.441111},{facility_name:"PRASA YABUCOA STP",city:"Yabucoa","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:49,amount_of_biosolids_managed_land_applied:0,latitude:18.04394466,longitude:-65.89744777},{facility_name:"NORTHGATE CROSSING MUD 2 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:0,latitude:30.103899,longitude:-95.422905},{facility_name:"CITY OF ROSENBERG WWTP 3",city:"Rosenberg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:0,latitude:29.529722,longitude:-95.852806},{facility_name:"HARRIMAN UTILITY BOARD",city:"Harriman","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:48.1,latitude:35.892752,longitude:-84.531959},{facility_name:"HARRIS COUNTY MUD 374 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:48.03,latitude:29.946111,longitude:-95.698},{facility_name:"CITY OF MEADOWS PLACE WWTP",city:"Meadows Place","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:0,latitude:29.654629,longitude:-95.587073},{facility_name:"FRY ROAD MUD",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:47.86,latitude:29.802111,longitude:-95.722222},{facility_name:"UNITEC WWTP",city:"Laredo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:0,latitude:27.514321,longitude:-99.499251},{facility_name:"BRIDGEWOOD WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:48,amount_of_biosolids_managed_land_applied:0,latitude:29.636722,longitude:-98.612583},{facility_name:"DECKER OAKS WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:47,amount_of_biosolids_managed_land_applied:30.11,latitude:30.142694,longitude:-95.652722},{facility_name:"CAMINO REAL WWTP",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:47,amount_of_biosolids_managed_land_applied:5.41,latitude:30.1975,longitude:-95.0875},{facility_name:"HARRIS COUNTY MUD 155 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:47,amount_of_biosolids_managed_land_applied:47.25,latitude:29.903055,longitude:-95.663333},{facility_name:"GALVESTON CO WCID 12 WWTP",city:"Kemah","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:47,amount_of_biosolids_managed_land_applied:0,latitude:29.534611,longitude:-95.008778},{facility_name:"HERINGTON, CITY OF",city:"Herington","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:47,amount_of_biosolids_managed_land_applied:47,latitude:38.70223,longitude:-96.81268},{facility_name:"WALNUT COVE WWTF",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:47,amount_of_biosolids_managed_land_applied:0,latitude:30.454953,longitude:-95.540253},{facility_name:"GSW&SA/MULLINS WWTP",city:"Mullins","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:47,amount_of_biosolids_managed_land_applied:46.72,latitude:34.203333,longitude:-79.253333},{facility_name:"NORTHWEST HARRIS CO MUD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:30.113667,longitude:-95.544722},{facility_name:"HARRIS COUNTY MUD 365 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:29.594501,longitude:-95.456971},{facility_name:"BRAZORIA COUNT MUD 55 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:29.437777,longitude:-95.40472},{facility_name:"GLASSPORT BORO",city:"Glassport","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:40.33629,longitude:-79.88924},{facility_name:"CITY OF MOULTON WWTP",city:"Moulton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"REMBERT TRACT WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:46,latitude:30.124037,longitude:-95.385432},{facility_name:"CITY OF ALEXANDER CITY",city:"Alexander City","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:46,latitude:32.9014,longitude:-85.9514},{facility_name:"WILLOW CREEK WWTP",city:"Mineral Wells","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:32.811539,longitude:-98.048657},{facility_name:"TOWN OF DAVIE SYSTEM IV WATER RECLAMATION FACILITY",city:"Davie","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:45.72,latitude:26.07368102,longitude:-80.22617577},{facility_name:"CITY OF THREE RIVERS WWTP",city:"Three Rivers","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:45.6,latitude:28.474444,longitude:-98.183333},{facility_name:"CORDELE WPCP",city:"Cordele","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:31.977972,longitude:-83.806167},{facility_name:"HARRIS COUNTY MUD 434 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:45.52,latitude:29.996111,longitude:-95.784166},{facility_name:"KINGS POINT COVE WWTP",city:"Brownwood","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:46,amount_of_biosolids_managed_land_applied:0,latitude:31.792222,longitude:-99.043333},{facility_name:"FOREST HILLS MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:0,latitude:29.912974,longitude:-95.449573},{facility_name:"WOODLAND OAKS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:45.34,latitude:29.876611,longitude:-95.512972},{facility_name:"FT BEND CO MUD 131",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:0,latitude:29.46039,longitude:-95.471161},{facility_name:"GLENDALE LAKES SUBDIVISION WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:45.29,latitude:29.485555,longitude:-95.458611},{facility_name:"HARRIS-FT.BEND CO MUD 5 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:0,latitude:29.7532,longitude:-95.7807},{facility_name:"MINOA (V)",city:"Minoa","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:45.04,latitude:43.07722,longitude:-76.0008},{facility_name:"HARRISON CO UTIL AUTH, SOUTH WOOLMARKET WATER RECLAMATION FACILITY",city:"Woolmarket","state_postal;":"MS",state:"Miss.",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:45,latitude:30.45625,longitude:-89.00025},{facility_name:"CALIFORNIA CITY WTF",city:"California City","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:0,latitude:35.126,longitude:-117.9599},{facility_name:"CHAMBERLAIN, CITY OF",city:"Chamberlain, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:45,amount_of_biosolids_managed_land_applied:44.6,latitude:43.796897,longitude:-99.344671},{facility_name:"CHANUTE, CITY OF",city:"Chanute","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:44,amount_of_biosolids_managed_land_applied:44.45,latitude:37.71997708,longitude:-95.57994},{facility_name:"CITY OF SEDALIA",city:"Sedalia","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:44,amount_of_biosolids_managed_land_applied:0,latitude:38.70972,longitude:-93.22888},{facility_name:"STEWART CREEK WWTP",city:"Montgomery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:44,amount_of_biosolids_managed_land_applied:0,latitude:30.386112,longitude:-95.681526},{facility_name:"CITY OF GLEN ROSE WWTP",city:"Glen Rose","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:44,amount_of_biosolids_managed_land_applied:0,latitude:32.247361,longitude:-97.737806},{facility_name:"CITY OF JASPER WWTP",city:"Jasper","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:44,amount_of_biosolids_managed_land_applied:43.6,latitude:30.914972,longitude:-94.01},{facility_name:"SHAMOKIN-COAL TWP JT SAN AUTH",city:"Shamokin","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:44,amount_of_biosolids_managed_land_applied:0,latitude:40.81116,longitude:-76.58295},{facility_name:"CITY OF OLNEY WWTP",city:"Olney","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:0,latitude:33.358972,longitude:-98.746444},{facility_name:"PLUM CREEK UTILITY WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:0,latitude:29.955116,longitude:-97.809953},{facility_name:"CITY OF SOUTHSIDE PLACE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:0,latitude:29.70597,longitude:-95.43367},{facility_name:"ABBEVILLE/LONG CANE CREEK",city:"Abbeville","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:43,latitude:34.155833,longitude:-82.345},{facility_name:"CITY OF GREENFIELD",city:"Greenfield","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:43,latitude:41.30387,longitude:-94.46105},{facility_name:"TOWN OF REFUGIO WWTP",city:"Refugio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:0,latitude:28.283278,longitude:-97.262556},{facility_name:"CITY OF BLUE RIDGE WWTF",city:"Blue Ridge","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:0,latitude:33.295111,longitude:-96.416361},{facility_name:"WESTLAKE MUD 1 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:43,amount_of_biosolids_managed_land_applied:42.89,latitude:29.802312,longitude:-95.704056},{facility_name:"BLUE BELL MANOR WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:0,latitude:29.90428,longitude:-95.42708},{facility_name:"HARRIS CO MUD 148 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:0,latitude:29.888333,longitude:-95.22},{facility_name:"TOWN OF RUTHERFORDTON",city:"Rutherfordton","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:42.19,latitude:35.3423,longitude:-81.9565},{facility_name:"CITY OF FLORENCE WWTP",city:"Florence","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:0,latitude:30.826,longitude:-97.778056},{facility_name:"CITY OF OGDEN",city:"Ogden","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:0,latitude:42.03888,longitude:-94.0477},{facility_name:"KEMMERER-DIAMONDVILLE JOINT POWERS BOARD",city:"Kemmerer","state_postal;":"WY",state:"Wyo.",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:0,latitude:41.79681385,longitude:-110.5446921},{facility_name:"TOWN OF LURAY",city:"Luray","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:41.8,latitude:38.684558,longitude:-78.458819},{facility_name:"CURWENSVILLE MUNICIPAL AUTHORI",city:"Curwensville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:0,latitude:40.976679,longitude:-78.514715},{facility_name:"INDIAN CREEK WWTP - MSD",city:"Cincinnati","state_postal;":"OH",state:"Ohio",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"CITY OF CRESCO",city:"Cresco","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:42,amount_of_biosolids_managed_land_applied:41.5,latitude:43.38561149,longitude:-92.14732857},{facility_name:"STANLEY LAKE MUD WWTP",city:"Montgomery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:30.386861,longitude:-95.641056},{facility_name:"PRAIRIE VIEW A&AMP, M WWTF",city:"Prairie View","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:30.099361,longitude:-95.996056},{facility_name:"LUBECK PSD",city:"Washington","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:39.222276,longitude:-81.688451},{facility_name:"MANCHESTER BY THE SEA",city:"Manchester","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:42.57532,longitude:-70.77202},{facility_name:"CITY OF COLLINSVILLE WWTP",city:"Collinsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:33.551053,longitude:-96.907515},{facility_name:"SHELDON WOODS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:29.854705,longitude:-95.12799},{facility_name:"WOOD DALE SOUTH STP",city:"Wood Dale","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:40.75,latitude:41.9498,longitude:-87.9777},{facility_name:"CITY OF ROCKSPRINGS WWTP",city:"Rock Springs","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:30.02409,longitude:-100.21267},{facility_name:"HARRIS COUNTY MUD 360 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:29.979695,longitude:-95.632564},{facility_name:"CITY OF PINELAND WWTP",city:"Pineland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:0,latitude:31.239889,longitude:-93.967389},{facility_name:"CHASE FIELD WWTP",city:"Beeville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:41,amount_of_biosolids_managed_land_applied:40.5,latitude:28.363611,longitude:-97.655833},{facility_name:"TOWN OF JEFFERSON",city:"Jefferson","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:40,amount_of_biosolids_managed_land_applied:40.4,latitude:36.40859,longitude:-81.42688},{facility_name:"ORANGE WWTF",city:"Orange","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:40,amount_of_biosolids_managed_land_applied:0,latitude:42.59606,longitude:-72.33146},{facility_name:"STAMFORD WWTP",city:"Stamford","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:40,amount_of_biosolids_managed_land_applied:0,latitude:32.95944,longitude:-99.77648},{facility_name:"PRASA VEGA ALTA",city:"Vega Alta","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:40,amount_of_biosolids_managed_land_applied:32.11,latitude:18.427468,longitude:-66.340464},{facility_name:"TOWN OF SPRING LAKE",city:"Spring Lake","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:40,amount_of_biosolids_managed_land_applied:39.8,latitude:35.196072,longitude:-78.965508},{facility_name:"MONTGOMERY COUNTY MUD 15-WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:40,amount_of_biosolids_managed_land_applied:39.79,latitude:30.224078,longitude:-95.43377},{facility_name:"RHOME WWTF",city:"Rhome","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:40,amount_of_biosolids_managed_land_applied:0,latitude:33.051341,longitude:-97.467336},{facility_name:"KINGDOM HEIGHTS WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:39,amount_of_biosolids_managed_land_applied:0,latitude:29.59564,longitude:-95.81128},{facility_name:"POINT AQUARIUS MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:39,amount_of_biosolids_managed_land_applied:0,latitude:30.419917,longitude:-95.582694},{facility_name:"HARRIS COUNTY MUD 345 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:39,amount_of_biosolids_managed_land_applied:39,latitude:30.031881,longitude:-95.237843},{facility_name:"TOWN OF MAYODAN",city:"Mayodan","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:39,amount_of_biosolids_managed_land_applied:39,latitude:36.4069,longitude:-79.9656},{facility_name:"CITY OF MOUNT VERNON",city:"Mt. Vernon","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:39,amount_of_biosolids_managed_land_applied:38.73,latitude:41.92581465,longitude:-91.42296506},{facility_name:"HARRIS COUNTY MUD 238 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:0,latitude:29.8149,longitude:-95.69974},{facility_name:"FLEMINGSBURG STP",city:"Flemingsburg","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:0,latitude:38.421496,longitude:-83.734424},{facility_name:"CITY OF LYTLE WWTP",city:"Lytle","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:0,latitude:29.218068,longitude:-98.790138},{facility_name:"PRASA GUANICA",city:"Guanica","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:0,latitude:17.9676,longitude:-66.910805},{facility_name:"MARSEILLES WWTP, CITY OF",city:"Marseilles","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:70.91,latitude:41.329632,longitude:-88.722196},{facility_name:"HARRIS COUNTY MUD 401 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:38.4,latitude:30.074024,longitude:-95.570467},{facility_name:"MAGNOLIA, CITY OF",city:"Magnolia","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:38,latitude:33.26661,longitude:-93.26479},{facility_name:"PRASA ISABELA",city:"Isabela","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:37.96,latitude:18.47558,longitude:-66.98964},{facility_name:"VETERANS MEMORIAL HIGH SCHOOL WWTF",city:"Live Oak","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:0,latitude:29.606388,longitude:-98.340833},{facility_name:"MEMORIAL HILLS UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:0,latitude:30.02462,longitude:-95.39243},{facility_name:"HARRIS COUNTY MUD 166 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:0,latitude:29.866173,longitude:-95.65831},{facility_name:"HANNAHVILLE INDIAN COMM. WWTP",city:"Wilson","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:38,amount_of_biosolids_managed_land_applied:37.735,latitude:45.69703,longitude:-87.336472},{facility_name:"BAUER WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:35.0643092,latitude:30.046176,longitude:-95.778278},{facility_name:"BELLA VISTA WWTP",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:17.22,latitude:30.25199,longitude:-95.05975},{facility_name:"CITY OF QUINLAN WWTF",city:"Quinlan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:0,latitude:32.906222,longitude:-96.144139},{facility_name:"PLANTATION MUD",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:0,latitude:29.546056,longitude:-95.687167},{facility_name:"WEST HARRIS COUNTY MUD 15 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:37.08,latitude:29.91619,longitude:-95.64394},{facility_name:"CITY OF ENTERPRISE",city:"Enterprise","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:37.26,latitude:31.3008,longitude:-85.8811},{facility_name:"TOWN OF BEAUFORT",city:"Beaufort","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:37,latitude:34.718063,longitude:-76.637963},{facility_name:"FLORA STP, CITY OF",city:"Flora","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:36.9,latitude:38.655,longitude:-88.479167},{facility_name:"CITY OF ROGERSVILLE",city:"Rogersville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:36.9,latitude:36.38004,longitude:-83.04624},{facility_name:"WELCH, CITY OF",city:"Welch","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:0,latitude:37.44299,longitude:-81.59746},{facility_name:"CHOWCHILLA WWTP",city:"Chowchilla","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:0,latitude:37.06638854,longitude:-120.346803},{facility_name:"MONTGOMERY COUNTY MUD 18 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:0,latitude:30.421583,longitude:-95.622722},{facility_name:"FORT BEND CNTY MUD 50 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:37,amount_of_biosolids_managed_land_applied:0,latitude:29.694158,longitude:-95.764166},{facility_name:"TIOGA WWTP",city:"Tioga","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:0,latitude:33.458527,longitude:-96.923237},{facility_name:"BRITTMOORE III WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:0,latitude:29.86332,longitude:-95.57934},{facility_name:"HARRIS CO MUD 86 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:0,latitude:30.007361,longitude:-95.452056},{facility_name:"ECW&SA/BROOKS STREET WWTP",city:"Edgefield","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:36.38,latitude:33.7919,longitude:-81.9408},{facility_name:"CITY OF CRESSON WWTP 1",city:"Cresson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:0,latitude:32.519722,longitude:-97.625555},{facility_name:"BLANKET WWTP",city:"Blanket","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:0,latitude:31.818231,longitude:-98.789925},{facility_name:"CASCADE CITY OF STP",city:"Cascade","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:36,latitude:42.29527,longitude:-91.00938},{facility_name:"FORT BEND COUNTY MUD 50 INTERIM WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"MONTGOMERY COUNTY MUD 88 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:36,amount_of_biosolids_managed_land_applied:35.61,latitude:30.126972,longitude:-95.372472},{facility_name:"ARKANSAS, CITY OF",city:"Arkansas City","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:35.4,latitude:37.07810149,longitude:-96.97676694},{facility_name:"ROCKY FORK WASTEWATER PLANT",city:"Nitro","state_postal;":"WV",state:"W.Va.",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:35.32,latitude:38.432927,longitude:-81.739139},{facility_name:"HEATHER GLEN WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:35.21,latitude:29.89597,longitude:-95.43227},{facility_name:"E MONTGOMERY CNTY MUD 3 WWTP 1",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:35.1460741,latitude:30.177278,longitude:-95.252472},{facility_name:"NAS JACKSONVILLE",city:"Jacksonville","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:0,latitude:30.226387,longitude:-81.686372},{facility_name:"CITY OF LA VERNIA WWTP",city:"La Vernia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:0,latitude:29.357722,longitude:-98.102222},{facility_name:"FORT BEND COUNTY MUD 37",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:0,latitude:30.519054,longitude:-90.519419},{facility_name:"RANCHCREST WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:35,amount_of_biosolids_managed_land_applied:0,latitude:30.189403,longitude:-95.799141},{facility_name:"COLUMBUS INDUSTRIAL PARK WWTP",city:"Columbus","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:0,latitude:29.72,longitude:-96.587444},{facility_name:"CITY OF VAN WWTF",city:"Van","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:0,latitude:32.509222,longitude:-95.632018},{facility_name:"NORTHWEST HARRIS COUNTY MUD 24 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:0,latitude:29.952097,longitude:-95.312581},{facility_name:"CANDLELIGHT HILLS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:0,latitude:30.039294,longitude:-95.45313},{facility_name:"CHATEAU WOODS MUNICIPAL UTILITY",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:0,latitude:30.16881,longitude:-95.413825},{facility_name:"BRITTMOORE WEST BY NW WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:0,latitude:29.862167,longitude:-95.564639},{facility_name:"WOODTRACE INTERIM WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:33.8567614,latitude:30.151028,longitude:-95.665778},{facility_name:"BUCHANAN, CITY OF (BUCHANAN WPCP)",city:"Buchanan","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:33.64,latitude:33.807722,longitude:-85.179111},{facility_name:"GRANDE SAN JACINTO",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:22.29,latitude:30.176666,longitude:-95.103333},{facility_name:"NB DAVIDSON WWTF",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:34,amount_of_biosolids_managed_land_applied:0,latitude:30.645492,longitude:-95.552467},{facility_name:"HIDDEN VALLEY WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:29.900633,longitude:-95.415039},{facility_name:"TWIN ARROWS CASINO WATER AND WASTEWATER SYSTEMS",city:"Twin Arrows","state_postal;":"AZ",state:"Ariz.",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:35.167266,longitude:-111.258888},{facility_name:"CITY OF FOREST CITY",city:"Forest City","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:33.35,latitude:43.220084,longitude:-93.63645704},{facility_name:"CITY OF GRUNDY CENTER",city:"Grundy Center","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:33.26,latitude:42.35031288,longitude:-92.76831276},{facility_name:"WOODLAND 50 MF WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:30.175686,longitude:-95.600753},{facility_name:"BRITTMORE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:29.862167,longitude:-95.564639},{facility_name:"COUNTRY TERRACE WWTP",city:"Highlands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:29.822389,longitude:-95.022917},{facility_name:"LOOGOOTEE WASTEWATER TREATMENT PLANT",city:"Loogootee","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:33.12,latitude:38.66476,longitude:-86.91435},{facility_name:"CITY OF LEONARD WWTP",city:"Leonard","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:33.370389,longitude:-96.239694},{facility_name:"HARRIS COUNTY MUD 58 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:32.73,latitude:30.003528,longitude:-95.470194},{facility_name:"CITY OF LAFAYETTE",city:"Lafayette","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:32.907376,longitude:-85.433925},{facility_name:"CITY OF KIRBYVILLE WWTF",city:"Kirbyville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:33,amount_of_biosolids_managed_land_applied:0,latitude:30.659071,longitude:-93.884105},{facility_name:"MOBRIDGE, CITY OF (BIOSOLIDS)",city:"Mobridge, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:32.35,latitude:45.525192,longitude:-100.414082},{facility_name:"WOODCREEK MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:0,latitude:30.0115,longitude:-95.3775},{facility_name:"STOOKEY TOWNSHIP MAIN STP",city:"Belleville","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:286.754,latitude:38.541297,longitude:-90.05987},{facility_name:"EDGERTON BIG BULL CREEK",city:"Edgerton","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:32,latitude:38.755544,longitude:-94.968081},{facility_name:"SINTON MAIN WWTP",city:"Sinton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:0,latitude:28.046306,longitude:-97.502028},{facility_name:"CITY OF WAYNSEVILLE",city:"Waynesville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:31.8,latitude:37.82267,longitude:-92.21194},{facility_name:"CITY OF DEER LODGE",city:"Deer Lodge","state_postal;":"MT",state:"Mont.",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:0,latitude:46.39977,longitude:-112.73518},{facility_name:"BRAZORIA COUNTY MUD 40 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:0,latitude:29.520721,longitude:-95.395015},{facility_name:"AUBREY WWTF",city:"Aubrey","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:0,latitude:33.29858,longitude:-96.98833},{facility_name:"CITY OF CENTERVILLE",city:"Centerville","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:32,amount_of_biosolids_managed_land_applied:31.5,latitude:40.72967964,longitude:-92.87683077},{facility_name:"VICTORIA COUNTY WCID 1 WWTF",city:"Bloomington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:0,latitude:28.654,longitude:-96.8875},{facility_name:"CITY OF ELDORA SEWER TREATMENT PLANT",city:"Eldora","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:31.05,latitude:42.355021,longitude:-93.081034},{facility_name:"HARRIS COUNTY MUD 6 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:0,latitude:29.900778,longitude:-95.504639},{facility_name:"CLASSIC PINES WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:0,latitude:29.953528,longitude:-95.255472},{facility_name:"CITY OF LOS FRESNOS WWTP",city:"Los Fresnos","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:30.9,latitude:26.062583,longitude:-97.483917},{facility_name:"CITY OF LECLAIRE WWTP",city:"Leclaire","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:0,latitude:41.59756,longitude:-90.34717},{facility_name:"GRANDVIEW WWTP",city:"Grandview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:0,latitude:32.254333,longitude:-97.148194},{facility_name:"RAILYARD WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:31,amount_of_biosolids_managed_land_applied:0,latitude:29.995306,longitude:-97.80063},{facility_name:"SOUTHWOOD ESTATES WWTP",city:"Alvin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:29.74082,longitude:-95.38153},{facility_name:"LEE COUNTY WWTP",city:"Coupland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:30.450035,longitude:-97.168634},{facility_name:"WEST HARRIS CO. MUD 17 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:30.26,latitude:29.807834,longitude:-95.726817},{facility_name:"LAKE MUD WWTP 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:29.793611,longitude:-95.045},{facility_name:"INLINE UTILITIES WWTP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:30.06367,longitude:-95.56895},{facility_name:"SPRING TRAILS WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:30.088815,longitude:-95.376127},{facility_name:"WEST HARRIS CO MUD 7 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:30.1283214,latitude:29.78455,longitude:-95.48516},{facility_name:"COALVILLE CITY CORPORATION WASTEWATER TREATMENT FACILITY",city:"Coalville","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:40.886944,longitude:-111.4025},{facility_name:"CITY OF LOTT WWTP",city:"Lott","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:31.2085,longitude:-97.041639},{facility_name:"TOWN OF WINDOM WWTP",city:"Windom","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:33.561778,longitude:-96.007222},{facility_name:"PORTALES, CITY OF - WWTP",city:"Portales","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:34.18647,longitude:-103.33755},{facility_name:"NORTHWEST REGIONAL WASTEWATER RECLAMATION FACILITY",city:"Richlands","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:29.73,latitude:34.880634,longitude:-77.531378},{facility_name:"CITY OF WASKOM WWTF",city:"Waskom","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:32.451167,longitude:-94.053472},{facility_name:"WEST HARRIS COUNTY MUD 6 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:29.72324,longitude:-95.63199},{facility_name:"CITY OF NATALIA WWTP",city:"Natalia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:29.180389,longitude:-98.865806},{facility_name:"CITY OF IOWA FALLS",city:"Iowa Falls","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:29.5,latitude:42.5202,longitude:-93.26417},{facility_name:"SAN CLEMENTE ISLAND WWTP",city:"San Clemente","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:30,amount_of_biosolids_managed_land_applied:0,latitude:33.447222,longitude:-117.611993},{facility_name:"TELGE AND JARVIS WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:29.958055,longitude:-95.654166},{facility_name:"HOT SPRINGS, CITY OF",city:"Hot Springs, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:43.432669,longitude:-103.477839},{facility_name:"CANYON PARK ESTATES WWTP",city:"Seguin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:29.4,latitude:29.909722,longitude:-98.213611},{facility_name:"CITY OF CASSVILLE",city:"Cassville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:29.3,latitude:36.672804,longitude:-93.871304},{facility_name:"BANQUETE WWTF",city:"Banquete","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:27.806253,longitude:-97.800993},{facility_name:"DELL RAPIDS, CITY OF",city:"Dell Rapids","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"MANCHESTER-SHORTVILLE JNT SB",city:"Manchester","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:42.970035,longitude:-77.23305046},{facility_name:"CIBOLO VALLEY WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:29.737222,longitude:-98.426388},{facility_name:"COUNTRY WEST WWTP",city:"Porter","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:30.224806,longitude:-95.291417},{facility_name:"HARRIS COUNTY MUD 191 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:29.961611,longitude:-95.535611},{facility_name:"BLOOMINGTON ISD",city:"Bloomington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:28.673671,longitude:-96.852265},{facility_name:"HARRIS COUNTY MUD 304 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:29.975194,longitude:-95.46825},{facility_name:"CITY OF SILSBEE SOUTH WWTP",city:"Silsbee","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:30.333674,longitude:-94.181322},{facility_name:"CITY OF GOLDTHWAITE WWTP",city:"Goldthwaite","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:29,amount_of_biosolids_managed_land_applied:0,latitude:31.444111,longitude:-98.582472},{facility_name:"NORTH ALAMO WSC REGIONAL WWTP",city:"Edinburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:40.04,latitude:26.227376,longitude:-98.054119},{facility_name:"LAKE CONROE HILLS MUD WWTF",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:0,latitude:30.423278,longitude:-95.565244},{facility_name:"WILLOW POINT MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:0,latitude:29.769166,longitude:-95.861666},{facility_name:"INDUSTRIAL UTILITIES WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:0,latitude:29.76363,longitude:-95.1419},{facility_name:"SEDONA LAKES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:0,latitude:29.517922,longitude:-95.370609},{facility_name:"PRASA - BARRANQUITAS WWTP",city:"Barranquitas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:0,latitude:18.179707,longitude:-66.300838},{facility_name:"FT BEND COUNTY MUD 34 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:27.64,latitude:29.75253,longitude:-95.46009},{facility_name:"WEST HARRIS COUNTY MUD 4 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:27.5880957,latitude:29.741614,longitude:-95.448472},{facility_name:"ROMAN FOREST MUD WWTF",city:"New Caney","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:0,latitude:30.169083,longitude:-95.177972},{facility_name:"TERRAMAR WWTP",city:"Galveston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:28,amount_of_biosolids_managed_land_applied:0,latitude:29.138556,longitude:-95.059917},{facility_name:"WEST HARRIS COUNTY MUD 21 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:12.3026023,latitude:29.926403,longitude:-95.540134},{facility_name:"HARRIS COUNTY MUD NO 43",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:27.21,latitude:30.053611,longitude:-95.363333},{facility_name:"HARRIS COUNTY FWSD 47 WWTP",city:"Channelview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:29.774409,longitude:-95.157842},{facility_name:"HARRIS COUNTY MUD 531 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:30.020833,longitude:-95.731111},{facility_name:"PALMYRA STP",city:"Palmyra","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:40.00674,longitude:-75.02871},{facility_name:"CAMERON WWTP",city:"Cameron","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:30.844333,longitude:-96.965528},{facility_name:"HARRIS COUNTY MUD 389 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:29.999722,longitude:-95.6625},{facility_name:"HARRIS COUNTY MUD 276 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:29.866556,longitude:-95.646139},{facility_name:"MONTGOMERY COUNTY MUD 24 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:26.85,latitude:30.09658,longitude:-95.19177},{facility_name:"ROBESONIA-WERNERSVILLE M/A OF",city:"Wernersville","state_postal;":"PA",state:"Pa.",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:40.352631,longitude:-76.08346},{facility_name:"GRANT ROAD PUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:29.985277,longitude:-95.625277},{facility_name:"HARRIS COUNTY MUD 50 WWTP",city:"Crosby","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:29.868611,longitude:-95.077777},{facility_name:"PRASA PATILLAS",city:"San Juan","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:18.01019,longitude:-66.62173},{facility_name:"CITY OF WINTERSET",city:"Winterset","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:22,latitude:41.33447,longitude:-94.01552},{facility_name:"CITY OF EDEN WWTP",city:"Eden","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:31.204694,longitude:-99.843583},{facility_name:"BIG SANDY WWTF",city:"Big Sandy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:27,amount_of_biosolids_managed_land_applied:0,latitude:32.57766,longitude:-95.11088},{facility_name:"CHEROKEE SHORES WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:26.49,latitude:32.276127,longitude:-96.094335},{facility_name:"BILMA PUD - WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:30.035194,longitude:-95.506028},{facility_name:"ROCK ISLAND SW STP, CITY OF",city:"Rock Island","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:41.44893,longitude:-90.61989},{facility_name:"GILLIAN CREEK WWTP",city:"Arab","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:26,latitude:34.2919,longitude:-86.4944},{facility_name:"THOMPSON WATER",city:"Fairfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:31.724707,longitude:-96.120197},{facility_name:"MARIETTA - WCRSA",city:"Greenville","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:34.79757,longitude:-82.35989},{facility_name:"TOWN OF NEWPORT",city:"Newport","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:25.91,latitude:34.780961,longitude:-76.865762},{facility_name:"MARY ESTHER WWTP",city:"Mary Esther","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:25.9,latitude:30.41232,longitude:-86.66338},{facility_name:"CITY OF BRIDGEPORT WWTP",city:"Bridgeport","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:33.194307,longitude:-97.756523},{facility_name:"CITY OF ARCOLA WWTP",city:"Arcola","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:25.77,latitude:29.497153,longitude:-95.462109},{facility_name:"MAYFAIR ADDITION WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:32.566778,longitude:-97.400833},{facility_name:"HARRIS COUNTY MUD 119 WWTP",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:29.896364,longitude:-95.494019},{facility_name:"HARRIS COUNTY MUD 130 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:25.69,latitude:29.895327,longitude:-95.60612},{facility_name:"PRASA COROZAL",city:"Corozal","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:18.3410252,longitude:-66.3124463},{facility_name:"CITY OF JOSEPHINE WWTP 2",city:"Josephine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:26,amount_of_biosolids_managed_land_applied:0,latitude:33.048055,longitude:-96.2925},{facility_name:"US DOE/SAVANNAH RIVER SITE",city:"Aiken County","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:33.291667,longitude:-81.641111},{facility_name:"FORT BEND COUNTY MUD 220 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:25.25,latitude:29.721941,longitude:-95.940842},{facility_name:"CITY OF CALDWELL WWTP",city:"Caldwell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:30.531028,longitude:-96.68275},{facility_name:"CITY OF COMO WWTP",city:"Como","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:33.054417,longitude:-95.482639},{facility_name:"ANAHUAC WWTP",city:"Anahuac","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:29.7748,longitude:-94.6722},{facility_name:"PANORAMA VILLAGE WASTEWATER TREATMENT FACILITY",city:"Panorama Village","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:30.369695,longitude:-95.497465},{facility_name:"TEMPLETON W W T F",city:"Baldwinville","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:42.60114,longitude:-72.07502},{facility_name:"FARMERSVILLE WWTP 2",city:"Farmersville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:33.158816,longitude:-96.38547},{facility_name:"BOYD PRISON UNIT WWTP",city:"Fairfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:31.664056,longitude:-96.203556},{facility_name:"TDJC COFFIELD UNIT",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:25,amount_of_biosolids_managed_land_applied:0,latitude:31.780722,longitude:-95.888556},{facility_name:"CITY OF SWEENY WWTP",city:"Sweeny","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:29.056639,longitude:-95.675778},{facility_name:"TRI COUNTY POINT PROPERTY OWNERS ASSOCIATION WWTP",city:"Palacios","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:28.693703,longitude:-96.37394},{facility_name:"LAKE MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:29.812944,longitude:-94.992778},{facility_name:"TIMBERCREST VILLAGE WWTP",city:"Vancouve","state_postal;":"BC",state:"British Columbia",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:30.133801,longitude:-95.551278},{facility_name:"TIMBERWILDE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:30.11751,longitude:-95.54836},{facility_name:"WELLSVILLE, CITY OF",city:"Wellsville","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:24,latitude:38.71271,longitude:-95.08478},{facility_name:"CITY OF CARROLLTON",city:"Carrollton","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:23.91,latitude:39.357758,longitude:-93.497942},{facility_name:"HILLSVILLE WWTP",city:"Hillsville","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:36.74942,longitude:-80.75273},{facility_name:"ROLLING FORK PUD WWTP",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:29.891154,longitude:-95.535133},{facility_name:"HILLSBORO STP, CITY OF",city:"Hillsboro","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:39.16512,longitude:-89.490749},{facility_name:"HARRIS CNTY FWSD 6 WWTP",city:"Channelview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:29.77356,longitude:-95.12201},{facility_name:"HATFIELD W W T P",city:"Hatfield","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:24,amount_of_biosolids_managed_land_applied:0,latitude:42.394226,longitude:-72.592828},{facility_name:"CITY OF COLDSPRING WWTP",city:"Coldspring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:30.571278,longitude:-95.118861},{facility_name:"HARRIS COUNTY WCID 70 WWTP",city:"Crosby","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:29.94831,longitude:-95.12091},{facility_name:"TOWN OF ENFIELD",city:"Enfield","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:23.41,latitude:36.18962,longitude:-77.655528},{facility_name:"WEST ORANGE WWTP",city:"Orange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:30.084806,longitude:-93.745194},{facility_name:"CYPRESS-KLEIN UD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:30.01344,longitude:-95.50857},{facility_name:"WOMAN HOLLERING TREATMENT PLANT",city:"Schertz","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:29.513879,longitude:-98.256839},{facility_name:"WINNEBAGO",city:"Winnebago","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:23,latitude:43.769182,longitude:-94.185183},{facility_name:"OLDE ATLANTA CLUB WPCP",city:"Suwanee","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:34.078537,longitude:-84.125477},{facility_name:"PARADISE ISD WWTP",city:"Paradise","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:33.1447,longitude:-97.69181},{facility_name:"MAHAFFEY ROAD WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:30.085694,longitude:-95.585278},{facility_name:"FORT BEND COUNTY MUD NO. 130 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:29.753278,longitude:-95.817444},{facility_name:"MARKHAM MUD WWTP",city:"Markham","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:28.954444,longitude:-96.067222},{facility_name:"RANSOM CANYON WWTP",city:"Ransom Canyon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:23,amount_of_biosolids_managed_land_applied:0,latitude:33.52425,longitude:-101.678194},{facility_name:"CITY OF ODESSA",city:"Odessa","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:22.42,latitude:38.90873067,longitude:-93.9439606},{facility_name:"COTTONWOOD CREEK WWTP",city:"Manor","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:30.347777,longitude:-97.483055},{facility_name:"OWEGO (T)",city:"Apalachin","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:42.04513611,longitude:-76.15129184},{facility_name:"OAKELY CITY",city:"Oakley","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:40.70922,longitude:-111.301026},{facility_name:"PRAIRIE ISLAND COMMUNITY WWSL",city:"Welch","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:22.276,latitude:44.52489682,longitude:-92.72695611},{facility_name:"THORNBURG SEWAGE TREATMENT PLA",city:"Thornburg","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:22.27,latitude:38.135833,longitude:-77.516111},{facility_name:"DURKEE MANOR WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:22.26,latitude:29.87894,longitude:-95.39775},{facility_name:"AES-PIEDMONT WATER-OCONEE CROSSING URBAN WATER REUSE FACILITY",city:"Eatonton","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:22.18,latitude:33.42268,longitude:-83.266},{facility_name:"LARNED WASTEWATER PLANT",city:"Larned","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:27.11,latitude:38.170611,longitude:-99.08725},{facility_name:"INVERNESS FOREST IMPROVEMENT DISTRICT WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:30.033806,longitude:-95.40325},{facility_name:"ALCESTER- CITY OF",city:"Alcester, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:43.032917,longitude:-96.6575},{facility_name:"AGUA DULCE WWTF",city:"Aqua Dulce","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:27.782,longitude:-97.899167},{facility_name:"HARRIS COUNTY MUD 104 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:21.74,latitude:30.045906,longitude:-95.448517},{facility_name:"CITY OF CHARITON",city:"Chariton","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:21.6,latitude:41.01379,longitude:-93.30841},{facility_name:"FAIRVIEW CITY",city:"Fairview","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:39.606345,longitude:-111.44799},{facility_name:"CITY OF MALAKOFF WWTP",city:"Malakoff","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:32.17047,longitude:-96.014126},{facility_name:"CITY OF GRANBY",city:"Granby","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:22,amount_of_biosolids_managed_land_applied:0,latitude:36.91162158,longitude:-94.25709751},{facility_name:"SQUABBLE CREEK WWTF",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:32.9515,longitude:-96.468583},{facility_name:"PRASA MAUNABO WWTP",city:"Maunabo","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:18.00601,longitude:-65.902723},{facility_name:"CITY OF RIO GRANDE CITY - WWTP",city:"Rio Grande City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:21.43,latitude:26.367306,longitude:-98.804056},{facility_name:"SOUTHWEST HARRIS CO MUD 1 - WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:29.631418,longitude:-95.515107},{facility_name:"FORT BEND COUNTY MUD NO.206 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:29.67724,longitude:-95.64354},{facility_name:"SUGARTREE WWTP",city:"Cypress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:32.6065,longitude:-97.926972},{facility_name:"CRANE DIV., NAVAL SURFACE WARFARE CTR",city:"Crane","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:21.00512,latitude:38.841611,longitude:-86.848306},{facility_name:"PICKENS CO-LIBERTY/ROPER",city:"Liberty","state_postal;":"SC",state:"S.C.",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:21,latitude:34.802778,longitude:-82.703611},{facility_name:"ROCKDALE COUNTY (BIG HAYNES CREEK WTP)",city:"Conyers","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:33.66358,longitude:-83.94535},{facility_name:"WESTERN HOMES WWTP",city:"The Woodlands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:29.895222,longitude:-95.354639},{facility_name:"CITY OF CRESTON",city:"Creston","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:20.57,latitude:41.058235,longitude:-94.37190534},{facility_name:"GOFORTH WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:21,amount_of_biosolids_managed_land_applied:0,latitude:30.31801,longitude:-97.70123},{facility_name:"HARRIS CO MUD 465 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:20.41,latitude:29.888358,longitude:-95.83995},{facility_name:"OAKMONT WASTWATER TREATMENT PLANT",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:30.220833,longitude:-95.241944},{facility_name:"CITY OF MARYVILLE",city:"Maryville","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:40.348926,longitude:-94.871724},{facility_name:"CITY OF QUITMAN WWTF",city:"Quitman","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:32.795791,longitude:-95.445063},{facility_name:"ORANGEFIELD WSC WWTF",city:"Orangefield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:30.07469,longitude:-93.8555},{facility_name:"CITY OF WASHINGTON",city:"Washington","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:20.22,latitude:33.711038,longitude:-82.740986},{facility_name:"CITY OF GRAPELAND WASTEWATER TREATMENT FACILITY",city:"Grapeland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:31.490553,longitude:-95.475577},{facility_name:"FORSYTH, CITY OF (SOUTH WPCP)",city:"Forsyth","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:33.010583,longitude:-83.934333},{facility_name:"CITY OF DOMINO WWTP",city:"Queen City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:33.260833,longitude:-94.131388},{facility_name:"CITY OF RENO WWTF",city:"Reno","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:33.694107,longitude:-95.480779},{facility_name:"RAYBURN COUNTRY MUD WWTP",city:"Sam Rayburn","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:31.069678,longitude:-94.039369},{facility_name:"CITY OF ROSEBUD WWTP",city:"Rosebud","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:31.064889,longitude:-96.989417},{facility_name:"NAVAL AIRSTA WHIDBEY ISLAND -",city:"Oak Harbor","state_postal;":"WA",state:"Wash.",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:48.348092,longitude:-122.661924},{facility_name:"HARDWICK WPC - GILBERTVILLE",city:"Gilbertville","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:42.353306,longitude:-72.213111},{facility_name:"BEVERLY SEWERAGE AUTHORITY",city:"Beverly","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:40.0678,longitude:-74.92367},{facility_name:"LAKES OF FAIRHAVEN WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:13,latitude:30.026306,longitude:-95.758194},{facility_name:"HARRIS COUNTY MUD 530 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:19.7481372,latitude:30.059166,longitude:-95.544166},{facility_name:"GALVESTON COUNTY MUD 12 WWTP",city:"Bayou Vista","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:29.330322,longitude:-94.938198},{facility_name:"GOODMAN WWTP",city:"Waller","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:30.044283,longitude:-95.866153},{facility_name:"MORTON ROAD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:0,latitude:29.816333,longitude:-95.806333},{facility_name:"LONE STAR RANCH WWTF",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:20,amount_of_biosolids_managed_land_applied:11.81,latitude:30.21779,longitude:-95.3175},{facility_name:"HARRIS COUNTY MUD 127",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:29.755844,longitude:-95.36659},{facility_name:"MONTGOMERY COUNT MUD 137 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:30.148333,longitude:-95.590277},{facility_name:"CITY OF TAMA",city:"Tama","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:19.37,latitude:41.96265,longitude:-92.57956},{facility_name:"PLACEDO WWTP",city:"Placedo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:28.697333,longitude:-96.825472},{facility_name:"WALLER COUNTY MUD 9A WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:6.92,latitude:29.845494,longitude:-95.873933},{facility_name:"WESTSIDE WWTP",city:"Rhome","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:33.043123,longitude:-97.485605},{facility_name:"SPRINK CREEK REGIONAL WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:30.135277,longitude:-95.589722},{facility_name:"GAZLEY CREEK WWTP",city:"Smithville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:30.009361,longitude:-97.165528},{facility_name:"HOLIDAY VILLAGES OF LAKE LIVINGSTON WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:30.799417,longitude:-95.172056},{facility_name:"TOWN PLANT WWTP",city:"Iredell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:0,latitude:31.98581,longitude:-97.86689},{facility_name:"MONTGOMERY COUNTY MUD NO 56 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:19,amount_of_biosolids_managed_land_applied:18.5,latitude:30.129361,longitude:-95.297972},{facility_name:"PARK VILLAGE WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:29.795753,longitude:-98.52394},{facility_name:"FORT BEND COUNTY MUD 184 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:29.505555,longitude:-95.725555},{facility_name:"KINGS MANOR MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:30.051611,longitude:-95.236611},{facility_name:"WHITE OAK BEND WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:29.92018,longitude:-95.57919},{facility_name:"MILITARY HIGHWAY WSC WWTF",city:"Progreso","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:26.13575,longitude:-98.119444},{facility_name:"JENA, TOWN OF",city:"Jena","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:31.677692,longitude:-92.130425},{facility_name:"TUOLUMNE CITY SANITARY DISTRICT",city:"Tuolumne","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:37.955522,longitude:-120.243475},{facility_name:"RICE CREEK WWTF",city:"New Boston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"PINE TRACE WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:17.7157473,latitude:30.102509,longitude:-95.571383},{facility_name:"HIDDEN COVE PARK WWTP",city:"Southlake","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:33.133944,longitude:-96.945472},{facility_name:"CITY OF SEDALIA",city:"Sedalia","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:38.70972,longitude:-93.22888},{facility_name:"OLD DEERFIELD W W T P",city:"Deerfield","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:18,amount_of_biosolids_managed_land_applied:0,latitude:42.5485,longitude:-72.60894},{facility_name:"WEST MONTGOMERY WWTP",city:"The Woolands","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:29.884944,longitude:-95.460472},{facility_name:"HARRIS COUNTY MUD 36 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:17.46,latitude:29.991966,longitude:-95.405026},{facility_name:"CITY OF JACKSON",city:"Jackson","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:17.46,latitude:33.271,longitude:-83.947139},{facility_name:"RANKIN ROAD WEST MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:29.972055,longitude:-95.452092},{facility_name:"ARAB SEWER BOARD",city:"Arab","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:17.2,latitude:34.2919,longitude:-86.4944},{facility_name:"CITY OF GUSTINE WWTP",city:"Gustine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:31.845012,longitude:-98.403328},{facility_name:"CITY OF HAMLIN WWTP",city:"Hamlin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:32.881421,longitude:-100.121557},{facility_name:"HARRIS COUNTY WCID 50 WWTP",city:"El Lago","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:29.5716,longitude:-95.04015},{facility_name:"NORTH TEXS REGIONAL AIRPORT WWTF",city:"Denison","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:33.71718,longitude:-96.66382},{facility_name:"MILBANK WASTEWATER TRMT PLNT",city:"Milbank","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:45.229428,longitude:-96.591168},{facility_name:"FOREST TRACE AKA WILLIS WAUKEGAN WWTP",city:"Porter","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:30.30977,longitude:-95.34006},{facility_name:"CITY OF GALVESTON MAIN WWTP",city:"Galveston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:29.299155,longitude:-94.82871},{facility_name:"CITY OF CRANFILLS GAP WWTP",city:"Cranfills Gap","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:17,amount_of_biosolids_managed_land_applied:0,latitude:31.778698,longitude:-97.829828},{facility_name:"WHITE BLUFF WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:32.027889,longitude:-97.3985},{facility_name:"CREEKSIDE VILLAGE WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:16.47,latitude:30.130667,longitude:-95.378139},{facility_name:"TOWER TERRACE - WWTP",city:"Sugarland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:29.781333,longitude:-94.88325},{facility_name:"SANTA CLARA CREEK 1 WWTP",city:"Marion","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:29.527304,longitude:-98.111036},{facility_name:"JOINES ROAD REG WWTF",city:"Progreso","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:26.072944,longitude:-97.64725},{facility_name:"CITY OF ODESSA",city:"Odessa","state_postal;":"MO",state:"Mo.",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:16.16,latitude:39.017889,longitude:-93.981472},{facility_name:"NORTHLAKE WWTP",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:33.078055,longitude:-97.251388},{facility_name:"PORT ISABEL DETENTION CTR WWTF",city:"Los Fresnos","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:26.190505,longitude:-97.351777},{facility_name:"CITY OF TOLAR WWTP",city:"Tolar","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:32.385694,longitude:-97.916694},{facility_name:"COLONIAL HILLS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:29.917096,longitude:-95.38666},{facility_name:"PINEWOOD PLACE MHP WWTP",city:"Vancouver","state_postal;":"BC",state:"British Columbia",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:30.08325,longitude:-95.560472},{facility_name:"GREENWOOD VILLAGE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:29.87517,longitude:-95.34078},{facility_name:"HARRIS COUNTY MUD 319 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:30.00979,longitude:-95.79921},{facility_name:"WHARTON COUNTY WCID 2 WWTP",city:"East Bernard","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:29.529426,longitude:-96.057141},{facility_name:"FORT BEND COUNTY MUD 124 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:29.750519,longitude:-95.788639},{facility_name:"WILLOW CREEK WWTP",city:"Smithville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:30.00844,longitude:-97.13494},{facility_name:"LOWER SIOUX INDIAN RESERVATION JACKPOT JUNCTION WWSL",city:"Redwood Falls","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:16,amount_of_biosolids_managed_land_applied:0,latitude:44.514694,longitude:-94.985325},{facility_name:"WALLER COUNTY MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:15.3978942,latitude:29.77668,longitude:-95.9108},{facility_name:"MARE BRANCH WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:6.88945727,latitude:30.196861,longitude:-95.199361},{facility_name:"MORGANS POINT WWTP",city:"Morgans Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:29.671107,longitude:-95.005809},{facility_name:"SANTA CLAUS WWTP, TOWN OF",city:"Santa Claus","state_postal;":"IN",state:"Ind.",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:38.105861,longitude:-86.904917},{facility_name:"OLD TOWN SPRING WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:29.784031,longitude:-95.580147},{facility_name:"CADDO VILLAGE WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:30.444972,longitude:-95.451639},{facility_name:"CITY OF TOM BEAN WWTP",city:"Tom Bean","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:33.515361,longitude:-96.478306},{facility_name:"PORT O'CONNOR IMPROVEMENT DISTRICT WWTP",city:"Port O'Connor","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:28.434167,longitude:-96.456917},{facility_name:"CITY OF RISING STAR WWTP",city:"Rising Star","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:32.099306,longitude:-98.944889},{facility_name:"GOUVERNEUR (V)",city:"Gouverneur","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:44.33623,longitude:-75.46967},{facility_name:"PROGRESO WWTF",city:"Progreso","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:26.11525,longitude:-97.938694},{facility_name:"WESTERN PINES MHP WWTF",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:29.81786,longitude:-95.72566},{facility_name:"MIMS CREEK WWTP",city:"Fairfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:31.694889,longitude:-96.142167},{facility_name:"ISLA BLANCA WWTP",city:"Port Isabel","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:15,amount_of_biosolids_managed_land_applied:0,latitude:26.0633,longitude:-97.2211},{facility_name:"ROYAL LAKE ESTATES WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:29.523,longitude:-95.666056},{facility_name:"VILLAGE TRACE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:29.4955,longitude:-95.280194},{facility_name:"CEDAR POINT WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:30.803778,longitude:-95.076583},{facility_name:"MARION WWTP",city:"Marion","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:29.564889,longitude:-98.143583},{facility_name:"DEL LAGO WWTF",city:"Atlanta","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:30.39575,longitude:-95.639667},{facility_name:"CITY OF JAMAICA BEACH WWTP",city:"Jamaica Beach","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:29.199126,longitude:-94.988517},{facility_name:"SINGING HILLS WWTP",city:"Bulverde","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:29.807777,longitude:-98.420277},{facility_name:"METHODIST HOME BOY'S RANCH",city:"Waco","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"SHADY OAKS WWTP",city:"Richmond","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:32.239007,longitude:-98.167118},{facility_name:"COUNTRY SQUIRE WWTF",city:"Orange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:30.186093,longitude:-93.763886},{facility_name:"LIBERTY CITY WSC WWTP",city:"Kilgore","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:32.450833,longitude:-94.935889},{facility_name:"DUPAGE COUNTY-NORDIC PARK STP",city:"Itasca","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:41.963333,longitude:-88.025},{facility_name:"TAMU RESEARCH & EXT CTR BEAUMONT WWTP",city:"Beaumont","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:30.0643,longitude:-94.294521},{facility_name:"ROYALWOOD MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:13.61,latitude:29.826616,longitude:-95.183771},{facility_name:"CLEARWATER COVE WWTP",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:30.41087,longitude:-95.57284},{facility_name:"MONTGOMERY COUNTY MUD 157 WWTP 1",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:30.206388,longitude:-95.341388},{facility_name:"CITY OF DANBURY CENTRAL WWTP",city:"Danbury","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:14,amount_of_biosolids_managed_land_applied:0,latitude:29.22528,longitude:-95.35333},{facility_name:"TDCJ CLEMENS UNIT WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:28.989444,longitude:-95.5175},{facility_name:"SMITHVILLE STP",city:"Smithville","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:13.16,latitude:35.960896,longitude:-85.793317},{facility_name:"MONTGOMERY COUNTY MUD 127 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:13.11,latitude:30.137838,longitude:-95.37304},{facility_name:"SEIS LAGOS WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:33.077285,longitude:-96.568891},{facility_name:"TUCUMCARI, CITY OF",city:"Tucumcari","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:13,latitude:35.18642,longitude:-103.71962},{facility_name:"TDCJ ESTELLE UNIT",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:30.881135,longitude:-95.501653},{facility_name:"ATASCOCITA VILLAGE MHP WWTP",city:"Humble","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:29.959025,longitude:-95.259807},{facility_name:"ROSEMEADOWS III - WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:29.388056,longitude:-95.776278},{facility_name:"MOUNT HOUSTON UTILITIES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:29.893,longitude:-95.318806},{facility_name:"SKY RANCHES WETLANDS WWTP",city:"Van","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:32.566722,longitude:-95.579417},{facility_name:"SIERRA VISTA WEST WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:29.426388,longitude:-95.461111},{facility_name:"NORTH FOREST MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:0,latitude:30.00256,longitude:-95.44202},{facility_name:"PRASA TOA ALTA WWTP",city:"Toa Alta","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:13,amount_of_biosolids_managed_land_applied:12.59,latitude:18.385526,longitude:-66.245186},{facility_name:"HARRIS CO MUD 1 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:12.38,latitude:29.846768,longitude:-95.164648},{facility_name:"LOVES TRAVEL STOP AT WINONA",city:"Oklahoma City","state_postal;":"OK",state:"Okla.",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"RICARDO WWTP",city:"Kingsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:27.408806,longitude:-97.850139},{facility_name:"PORT ISABEL WWTP",city:"Port Isabel","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:26.06448,longitude:-97.22221},{facility_name:"PENITAS WWTP",city:"Laredo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:27.523111,longitude:-99.524194},{facility_name:"DECATUR WTP",city:"Decatur","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:33.232094,longitude:-97.623029},{facility_name:"HAPPY HILL FARM CHILDRENS HOME WWTP",city:"Granbury","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:32.29387,longitude:-97.7341},{facility_name:"RAINTREE ACRES MHP WWTP",city:"Denver","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:29.57783,longitude:-95.32103},{facility_name:"CITY OF KENDLETON WWTP",city:"Kendleton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:29.447528,longitude:-95.993583},{facility_name:"CAVE SPRING, CITY OF (CAVE SPRING WPCP)",city:"Cave Spring","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:12.06,latitude:34.119194,longitude:-85.335639},{facility_name:"GARDNER, CITY OF",city:"Gardner","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:12,latitude:38.80255137,longitude:-94.92380983},{facility_name:"VALLEY VIEW WWTF",city:"Valley View","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:33.468167,longitude:-97.160833},{facility_name:"PRASA - CULEBRA WWTP",city:"Culebra","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:18.32,longitude:-65.2808},{facility_name:"CITY OF CHINA WWTF",city:"China","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:30.0692,longitude:-94.338006},{facility_name:"HARRIS COUNTY MUD 565 WWTP",city:"Rosenberg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:30.044166,longitude:-95.793333},{facility_name:"TDCJ JESTER 3 UNIT WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:29.619944,longitude:-95.711722},{facility_name:"GRANGER PINES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:30.2375,longitude:-95.321111},{facility_name:"CITY OF CHANDLER WWTP",city:"Chandler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:12,amount_of_biosolids_managed_land_applied:0,latitude:32.294861,longitude:-95.469389},{facility_name:"CHULA VISTA WWTF",city:"Crystal City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:28.656389,longitude:-99.834944},{facility_name:"HARRIS COUNTY WCID 113 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:11.34,latitude:29.9555,longitude:-95.641056},{facility_name:"ROSITA VALLEY WWTP",city:"Eagle Pass","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:11.34,latitude:28.606559,longitude:-100.433623},{facility_name:"CHAMBERS COUNTY DISTRICT NO 1 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:29.706666,longitude:-94.910277},{facility_name:"CITY OF CLARKSVILLE WWTP",city:"Clarksville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:33.610303,longitude:-95.05523},{facility_name:"PRASA - UTUADO NEW WWTPT",city:"Utuado","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:11.17,latitude:18.30925,longitude:-66.687694},{facility_name:"CITY OF HALLETTSVILLE",city:"Hallettsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:29.43906,longitude:-96.94382},{facility_name:"TIMBERLAKE WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:29.963278,longitude:-95.619389},{facility_name:"PRASA PARCELAS BORINQUEN WWTP",city:"Caguas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:18.186368,longitude:-66.047962},{facility_name:"MAGNOLIA RESERVE WWTF",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:10.89,latitude:30.265277,longitude:-95.696666},{facility_name:"MOSTYN MANOR WWTF",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:10.8,latitude:30.249905,longitude:-95.662917},{facility_name:"CITY OF ALPINE MUNICIPAL WWTF",city:"Alpine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.398944,longitude:-103.644694},{facility_name:"PRASA NARANJITO",city:"Naranjito","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:18.30086,longitude:-66.245543},{facility_name:"ROCKY POINT ESTATES MHP WWTP",city:"Glendale","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:33.04831,longitude:-97.12906},{facility_name:"SOUTH PITTSBURG STP",city:"South Pittsburg","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:5.3,latitude:35.002893,longitude:-85.698289},{facility_name:"NW HARRIS COUNTY MUD 36 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.051306,longitude:-95.470472},{facility_name:"SAN JO COVE UTILITIES WWTP",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.448889,longitude:-95.549194},{facility_name:"SANTA FE 2 WWTP",city:"New Wavery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.153055,longitude:-95.014444},{facility_name:"SHADOW BAY WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.451,longitude:-95.564694},{facility_name:"REDWOOD WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:29.837444,longitude:-95.232972},{facility_name:"LAKE CONROE FOREST WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.35791,longitude:-95.60273},{facility_name:"CITY OF MENARD WWTP",city:"Menard","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.918778,longitude:-99.778667},{facility_name:"MENARD WTP",city:"Menard","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:11,amount_of_biosolids_managed_land_applied:0,latitude:30.91733,longitude:-99.78541},{facility_name:"TIDWELL TIMBERS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.850528,longitude:-95.229807},{facility_name:"NORTH BELT FOREST UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.949639,longitude:-95.247694},{facility_name:"CITY OF BUENA VISTA",city:"Buena Vista","state_postal;":"VA",state:"Va.",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:37.72405,longitude:-79.3645},{facility_name:"FORT DAVIS WWTF",city:"Fort Davis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:30.594528,longitude:-103.873167},{facility_name:"HARRIS COUNTY WCID 109 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:96.4298579,latitude:29.9717,longitude:-95.494902},{facility_name:"NORTHFIELD W W T F",city:"Northfield","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:42.701976,longitude:-72.458138},{facility_name:"SOUTH WEST WWTP",city:"Henrietta","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:33.809959,longitude:-98.175387},{facility_name:"DOWDELL PUD WWTP 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:30.079722,longitude:-95.5377},{facility_name:"JEFFERSON COUNTY COMMISSION ENVIRONMENTAL SERVICES DEPARTMENT",city:"Birmingham","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:10,latitude:33.8081,longitude:-86.8319},{facility_name:"CITY OF HENRIETTA WTP",city:"Henrietta","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:33.830709,longitude:-98.195388},{facility_name:"TIMBERLAND WWTP",city:"Porter","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:30.13589,longitude:-95.259442},{facility_name:"HENRIETTA NORTH WWTP",city:"Henrietta","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:33.827194,longitude:-98.201389},{facility_name:"SAN SIMEON WWTP",city:"San Simeon","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:35.611553,longitude:-121.146167},{facility_name:"JEKYLL ISLAND WPCP-STATE PARK AUTHORITY",city:"Jekyll Island","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:31.044177,longitude:-81.421708},{facility_name:"SHERIDAN WWTP",city:"Sheridan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.494944,longitude:-96.665528},{facility_name:"S.C. UTILITIES WWTP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:30.011861,longitude:-95.589083},{facility_name:"STAFFORD MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.595833,longitude:-95.552667},{facility_name:"ASHLEY OAKS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.38276,longitude:-95.243487},{facility_name:"HARRIS COUNTY MUD 286 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.987139,longitude:-95.583528},{facility_name:"TEXAS A&M UNIVERSITY AT GALVESTON",city:"Galveston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.3168,longitude:-94.81984},{facility_name:"HARRIS COUNTY MUD 50 WWTP 2",city:"Crosby","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.877046,longitude:-95.06042},{facility_name:"HIGHLANDS OF SALADO WWTP",city:"Salado","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:30.937222,longitude:-97.521111},{facility_name:"SOMERSET WWTP",city:"Somerset","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:29.214583,longitude:-98.649417},{facility_name:"HARRIS COUNTY MUD 122 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:9.66,latitude:29.617411,longitude:-95.518621},{facility_name:"TDCJ ELLIS UNIT WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:30.884916,longitude:-95.455087},{facility_name:"CITY OF YORKTOWN WWTP",city:"Yorktown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:10,amount_of_biosolids_managed_land_applied:0,latitude:28.97175,longitude:-97.50075},{facility_name:"PRASA YAUCO STP",city:"Yauco","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:18.025266,longitude:-66.841581},{facility_name:"HARDWICK W P C - WHEELWRIGHT",city:"Wheelwright","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:42.350037,longitude:-72.139237},{facility_name:"COUNTRY VISTA WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:32.54559,longitude:-97.25771},{facility_name:"CITY OF LEESBURG",city:"Leesburg","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:31.717167,longitude:-84.183361},{facility_name:"PLUM CREEK WWTP",city:"Albany","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:32.711222,longitude:-99.290056},{facility_name:"HINSDALE TOWN OF",city:"Hinsdale","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:42.780338,longitude:-72.49205},{facility_name:"BIG CANOE WPCP",city:"Jasper","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:34.427879,longitude:-84.279103},{facility_name:"CANEY CREEK MUD OF MATAGORDA COUNTY",city:"Sargent","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:28.767615,longitude:-95.625739},{facility_name:"CORINTHIAN POINT MUD 2 - WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:30.459167,longitude:-95.568306},{facility_name:"WINDMILL RANCH WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:30.156861,longitude:-97.44775},{facility_name:"TEXAS NATIONAL MUD",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:30.415194,longitude:-95.430194},{facility_name:"PARK CREEK WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:30.009172,longitude:-95.675625},{facility_name:"INDIAN SHORES PLANT",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:29.61475,longitude:-95.5099},{facility_name:"LUCE BAYOU PUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:30.061917,longitude:-95.077},{facility_name:"WHARTON COUNTY WCID 1 WWTP",city:"Louise","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:29.114139,longitude:-96.403278},{facility_name:"LENNOX, CITY OF",city:"Lennox, City Of","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:43.343472,longitude:-96.907666},{facility_name:"PRASA MOROVIS",city:"Morovis","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:18.34123498,longitude:-66.42603628},{facility_name:"VARCO W LITTLE YORK FACILITY",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"HARRIS CO MUD 1 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:8.82,latitude:30.110724,longitude:-95.536643},{facility_name:"GALVESTON COUNTY FWSD 6 WWTP",city:"Tiki Island","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:8.6856372,latitude:29.300778,longitude:-94.905194},{facility_name:"WINDY HILL UTILITY WWTF",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:30.045833,longitude:-97.80666},{facility_name:"CITY OF NEWTON WWTF",city:"Newton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:30.833888,longitude:-93.737777},{facility_name:"DIXON CORRECTIONAL CENTER STP",city:"Dixon","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:9,amount_of_biosolids_managed_land_applied:0,latitude:41.873652,longitude:-89.478705},{facility_name:"TDCJ BETO UNIT WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:31.76088,longitude:-95.826977},{facility_name:"CEDRIC SMITH ELEMENTARY SCHOOL WWTP",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.172617,longitude:-95.60702},{facility_name:"STABLE GATE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.0012,longitude:-95.65977},{facility_name:"IMPERIAL VALLEY WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.012155,longitude:-95.409601},{facility_name:"GREENFIELD WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.217417,longitude:-95.551306},{facility_name:"CITY OF BELLEVUE WWTP",city:"Bellevue","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:33.643417,longitude:-98.018083},{facility_name:"CITY OF GRAND SALINE WWTF",city:"Grand Saline","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:32.671222,longitude:-95.701333},{facility_name:"PARADISE COVE WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.460689,longitude:-95.545945},{facility_name:"CITY OF SOUR LAKE WWTP",city:"Sour Lake","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.13878,longitude:-94.41261},{facility_name:"WESTMONT MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:7.89,latitude:30.341917,longitude:-95.555444},{facility_name:"TABERNASH MEADOWS WSD",city:"Tabernash","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:39.99314279,longitude:-105.846499},{facility_name:"ALOE FIELD WWTF",city:"Victoria","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:28.776972,longitude:-97.071306},{facility_name:"CITY OF KEMP WWTP",city:"Kemp","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:32.42875,longitude:-96.236361},{facility_name:"LAKE SOUTH WSC WWTF",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.355194,longitude:-95.57825},{facility_name:"WESTFIELD MHP WWTP",city:"San Jose","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:29.887833,longitude:-95.384667},{facility_name:"BRUSHY CREEK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:8,amount_of_biosolids_managed_land_applied:0,latitude:30.09825,longitude:-95.788833},{facility_name:"ROCK CREEK WWTF",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:33.831666,longitude:-96.898888},{facility_name:"LYNCHBURG WWTP",city:"Lynchburg","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:7.38,latitude:35.272332,longitude:-86.394964},{facility_name:"WATERVILLE VALLEY W W T P",city:"Waterville Valley","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:43.944778,longitude:-71.510707},{facility_name:"COASTAL BEND DETENTION FACILITY WWTF",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:27.73972,longitude:-97.75509},{facility_name:"ORCHARD CROSSING WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:29.831977,longitude:-95.055922},{facility_name:"MEXIA WWTF",city:"Mexia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:31.66665,longitude:-96.47745},{facility_name:"CORCORAN WWTP",city:"Corcoran","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:36.09836,longitude:-119.55783},{facility_name:"GUNTER CREEK WWTP",city:"Aubey","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:33.4508,longitude:-96.7494},{facility_name:"MONTGOMERY COUNTY UD 2 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:30.410425,longitude:-95.562055},{facility_name:"BIG SKY WWTF",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:33.25407,longitude:-97.37079},{facility_name:"TIMBERLOCH WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:30.0997,longitude:-95.7194},{facility_name:"TDCJ LUTHER UNIT WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:30.256361,longitude:-96.053528},{facility_name:"CITY OF OMAHA WWTP",city:"Omaha","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:7,amount_of_biosolids_managed_land_applied:0,latitude:33.175391,longitude:-94.739556},{facility_name:"KENEDY COUNTY REST AREA WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:27.133055,longitude:-97.793611},{facility_name:"HARRIS CO MUD 250 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:6.37,latitude:29.872947,longitude:-95.628538},{facility_name:"CLOVER CREEK MUD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:6.20051154,latitude:30.175472,longitude:-95.752722},{facility_name:"LAGUNA VISTA WWTP",city:"Port Isabel","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:26.117306,longitude:-97.316083},{facility_name:"COLONY REGIONAL WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:30.145781,longitude:-97.270848},{facility_name:"PONDEROSA PINES WWTP",city:"Porter","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:30.329722,longitude:-95.290555},{facility_name:"CITY OF WOODBRANCH VILLAGE WWT",city:"New Caney","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:30.172972,longitude:-95.177417},{facility_name:"ROLLING HILLS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:29.87727,longitude:-95.13457},{facility_name:"MONTGOMERY COUNTY MUD 166 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:30.37,longitude:-95.662777},{facility_name:"MEADOWCREEK WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:30.51825,longitude:-96.304944},{facility_name:"ST. FRANCIS VILLAGE WWTP",city:"Crowley","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:32.611806,longitude:-97.459528},{facility_name:"PEARCE LANE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"WOODGATE MOBILE HOME VILLAGE",city:"Glendale","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:29.92313,longitude:-95.45253},{facility_name:"CITY OF BEASLEY WWTF",city:"Beasley","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:29.491553,longitude:-95.91939},{facility_name:"VICTORIA COUNTY SRA",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:28.891,longitude:-96.823194},{facility_name:"TAYLOR LANE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:30.267013,longitude:-97.554319},{facility_name:"MILL CREEK WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:5.9,latitude:30.151388,longitude:-95.618611},{facility_name:"NORTHWEST PINES WWTP",city:"Denver","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:29.98696,longitude:-95.479125},{facility_name:"ABRAXAS WWTP",city:"North Richland Hills","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:32.783195,longitude:-97.548148},{facility_name:"LOZANO WWTP",city:"Rio Hondo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:5.72,latitude:26.21335,longitude:-97.54384},{facility_name:"CRETE WWTF",city:"Crete","state_postal;":"NE",state:"Neb.",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:5.7,latitude:40.625289,longitude:-96.95680942},{facility_name:"GRAND TRAVERSE BAND OF OTTAWA",city:"Suttons Bay","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:5.7,latitude:45.032153,longitude:-85.607524},{facility_name:"NORTHLAKE VILLAGE MHP WWTP",city:"Northlake","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:33.031926,longitude:-97.251051},{facility_name:"AMERICAN CANYON WWTF",city:"American Canyon","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:38.1879,longitude:-122.2782},{facility_name:"PINNACLE CLUB WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:5.53,latitude:32.222083,longitude:-96.069111},{facility_name:"CANYON CREEK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:32.400139,longitude:-97.730861},{facility_name:"LIBERTY STP",city:"Liberty","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:5.5,latitude:37.316796,longitude:-84.943457},{facility_name:"CITY OF SEADRIFT WWTP",city:"Seadrift","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:6,amount_of_biosolids_managed_land_applied:0,latitude:28.412444,longitude:-96.707},{facility_name:"LAREDO/COLUMBIA SOLIDARITY BRIDGE WWTF",city:"Laredo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:27.694186,longitude:-99.737298},{facility_name:"TWINS OAKS MHP WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.02447,longitude:-95.092443},{facility_name:"PRASA VIEQUES WWTP",city:"Fajardo","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:18.14239,longitude:-65.466381},{facility_name:"CITY OF MAUD WWTP",city:"Maud","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:33.333167,longitude:-94.329556},{facility_name:"ROLLING RIDGE WWTF",city:"College Station","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:5.362,latitude:30.558,longitude:-96.318528},{facility_name:"BENDERS LANDING WWTF",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:2.78,latitude:30.101944,longitude:-95.342222},{facility_name:"OAK CREST MHP WWTP",city:"Manvel","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.518556,longitude:-95.371306},{facility_name:"HARRIS COUNTY WCID 99 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.038813,longitude:-95.415541},{facility_name:"THE ESTATES WWTP",city:"Oak Brook","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"LAKES OF MISSION GROVE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.642444,longitude:-95.780222},{facility_name:"RIVERWOOD FOREST WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.655083,longitude:-95.928389},{facility_name:"CAPE ROYALE PLANT",city:"Coldspring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.657524,longitude:-95.127578},{facility_name:"CITY OF TALLADEGA W&SB",city:"Talladega","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:33.4725,longitude:-86.0617},{facility_name:"CITY OF LAKEPORT WWTP",city:"Lakeport","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:32.416666,longitude:-94.704444},{facility_name:"TUBOSCOPE SHELDON ROAD NORTH WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.86442,longitude:-95.12811},{facility_name:"THE RETREAT WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:32.21587,longitude:-97.51537},{facility_name:"HOPE, CITY OF-BOIS D'ARC WWTP",city:"Hope","state_postal;":"AR",state:"Ark.",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:33.6475,longitude:-93.636944},{facility_name:"LAKESIDE VILLAGE",city:"Livingston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.666463,longitude:-94.946837},{facility_name:"USNPS-MT RUSHMORE NTL MEMORIAL",city:"Keystone","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:43.87971,longitude:-103.451858},{facility_name:"CITY OF RUNAWAY BAY WWTP",city:"Runaway Bay","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:33.172056,longitude:-97.88225},{facility_name:"TERRELL UNIT WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.296785,longitude:-95.540419},{facility_name:"RANKIN PARK WWTP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.966319,longitude:-95.387905},{facility_name:"NORTH PLANT WWTP",city:"Silsbee","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.372779,longitude:-94.19823},{facility_name:"CITY OF ARCHER CITY WWTP",city:"Archer City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:33.5881,longitude:-98.638},{facility_name:"CITY OF WINFIELD WWTF",city:"Winfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:33.160944,longitude:-95.10325},{facility_name:"SCURRY ROSSER ISD WWTP",city:"Scurry","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:32.509861,longitude:-96.38125},{facility_name:"CITY OF LULING NORTH WWTF",city:"Luling","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.685389,longitude:-97.627417},{facility_name:"TOWN OF ECLECTIC ALABAMA",city:"Eclectic","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:4.6,latitude:32.629094,longitude:-86.025844},{facility_name:"PRASA OROCOVIS",city:"Orocovis","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:18.07397097,longitude:-66.36949019},{facility_name:"BEACON BAY MARINA & RV PARK WWTP",city:"Livingston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.689284,longitude:-95.035932},{facility_name:"HOUSE HAHL COA WWTP",city:"Cypress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.960999,longitude:-95.71139},{facility_name:"WHITE OAK MANOR MHP WWTP",city:"Houston","state_postal;":"BC",state:"British Columbia",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.87782,longitude:-95.5369},{facility_name:"CREEKSIDE ESTATES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:29.87809,longitude:-95.52907},{facility_name:"LAKE LIVINGSTON VILLAGE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.729658,longitude:-95.046063},{facility_name:"WILLOW OAKS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.10325,longitude:-95.546306},{facility_name:"WHITE OAK RANCH WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.359917,longitude:-95.545194},{facility_name:"TOWN OF WOODLOCH WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:5,amount_of_biosolids_managed_land_applied:0,latitude:30.217417,longitude:-95.408806},{facility_name:"TDCJ WALLACE PACK UNIT WWTF",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.32577,longitude:-96.09893},{facility_name:"CITY OF EDGEWOOD WWTF",city:"Edgewood","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:32.7,longitude:-95.883333},{facility_name:"CHISHOLM SPRINGS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:32.991222,longitude:-97.439722},{facility_name:"PARKLAND ESTATES WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.9255,longitude:-95.298806},{facility_name:"CITY OF GARRISON WWTP",city:"Garrison","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:31.8235,longitude:-94.484083},{facility_name:"EAST CENTRAL HIGH SCHOOL WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.36312,longitude:-98.35973},{facility_name:"NAVARRO SAFETY REST AREA WASTEWATER TREATMENT FACILITY",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:31.909722,longitude:-96.390833},{facility_name:"BEACHWOOD ESTATES WWTP",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:4.14,latitude:32.237777,longitude:-96.127777},{facility_name:"BREMOND WWTP",city:"Bremond","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:31.157389,longitude:-96.673306},{facility_name:"TDCJ FERGUSON UNIT WWTP",city:"Hunstville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.958382,longitude:-95.704388},{facility_name:"HENRY W. PIRKEY POWER PLANT",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:32.460267,longitude:-94.485225},{facility_name:"HARRIS COUNTY MUD 165 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.740311,longitude:-95.447598},{facility_name:"HUGHES SPRINGS WWTF",city:"Hughes Springs","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:32.993848,longitude:-94.613001},{facility_name:"CITY OF DE KALB WWTP",city:"De Kalb","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:33.479278,longitude:-94.618528},{facility_name:"LAKE HOUSTON PINES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.81271,longitude:-95.20992},{facility_name:"HARDIN COUNTY WCID 1 WWTP",city:"Sour Lake","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.165754,longitude:-94.314649},{facility_name:"LAKEVIEW CAMP WWTP",city:"Waxahachie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:32.32418,longitude:-96.97328},{facility_name:"ALLEYTON WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.709639,longitude:-96.481278},{facility_name:"NORTHWINDS WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.875694,longitude:-95.58175},{facility_name:"J L LYONS ELEMENTARY WWTP",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.13942,longitude:-95.75288},{facility_name:"KINGMONT MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.890247,longitude:-95.441341},{facility_name:"PINEDALE MHP WWTP",city:"Pinehurts","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.144361,longitude:-95.663278},{facility_name:"TIMKENSTEEL MATERIALS SERVICES WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.9306,longitude:-95.37576},{facility_name:"FOSTER BRISCOE SCHOOL WWTP",city:"Rosenberg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.65467,longitude:-95.73827},{facility_name:"MAGNOLIA LAKES WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.189394,longitude:-95.73236},{facility_name:"WATERWOOD MUD 1 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.8185,longitude:-95.235194},{facility_name:"BRUBAKER WWTP",city:"Pattison","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.827433,longitude:-96.001922},{facility_name:"OAKWOOD VILLAGE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.096611,longitude:-95.506889},{facility_name:"B&W GATHERING WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:30.589556,longitude:-98.403389},{facility_name:"KAUFER-HUBERT MEMORIAL PARK AND SEA WIND RV PARK WWTP",city:"Kingsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:3.7,latitude:27.316022,longitude:-97.681983},{facility_name:"SHELDON INSPECTION SOUTH WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:29.84684,longitude:-95.12783},{facility_name:"FOREST HILLS WWTP",city:"Jasper","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:31.063611,longitude:-94.074778},{facility_name:"BIG EDDY WWTP",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:32.191666,longitude:-95.439444},{facility_name:"BIG OAK MHP",city:"West Hollywood","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:4,amount_of_biosolids_managed_land_applied:0,latitude:32.463194,longitude:-94.624361},{facility_name:"WEIMAN MHP WWTF",city:"Huntington Beach","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.873833,longitude:-95.625222},{facility_name:"GRAND RANCH PHASE 2",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:32.513194,longitude:-97.452215},{facility_name:"SHALE CREEK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:33.040667,longitude:-97.391944},{facility_name:"BLUE WATER OAKS WWTP",city:"Alvarado","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:32.36418,longitude:-97.239827},{facility_name:"COWTOWN RV PARK WWTF",city:"Aledo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:3.14,latitude:32.724737,longitude:-97.616394},{facility_name:"THOROUGHBRED FARMS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.136861,longitude:-97.671944},{facility_name:"UNIVERSAL SERVICES FT HOOD WWTF",city:"Fort Hood","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:3.12,latitude:31.1135,longitude:-97.786667},{facility_name:"CITY OF DAINGERFIELD WWTP",city:"Daingerfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:33.017722,longitude:-94.712611},{facility_name:"HAMMOND MOUND UTILITIES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.878445,longitude:-95.965322},{facility_name:"290 KICKPOO WWTP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.022079,longitude:-95.831699},{facility_name:"CEDAR CREEK FOREST MHP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.008806,longitude:-95.575472},{facility_name:"MYREX INDUSTRIES WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.92772,longitude:-95.3567},{facility_name:"YMCA CAMP CULLEN WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.921902,longitude:-95.299405},{facility_name:"MEMORIAL POINT UD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.702111,longitude:-95.083806},{facility_name:"WOODLAND ACRES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.878806,longitude:-94.839917},{facility_name:"ASTRO WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.532167,longitude:-95.445472},{facility_name:"PALM CREST WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.366333,longitude:-95.426861},{facility_name:"NEEDVILLE ISD WWTP",city:"Needville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.37201,longitude:-95.799128},{facility_name:"COUNTRYSIDE ESTATES - WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.951012,longitude:-94.032792},{facility_name:"MEADOWS AT CYPRESS CREEK",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.95337,longitude:-95.6309},{facility_name:"MIDFIELD WWTP",city:"Midfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:28.935472,longitude:-96.210361},{facility_name:"TAYLOR LANDING WWTP",city:"Beaumont","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.87442,longitude:-94.143473},{facility_name:"CITY OF HILLCREST VILLAGE-WWTP",city:"Alvin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.3972,longitude:-95.221916},{facility_name:"OAK MANOR MUD WWTP",city:"Alvin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.326611,longitude:-95.29075},{facility_name:"BAYVIEW MUD WWTP",city:"Bacliff","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:3,latitude:29.511388,longitude:-95.006111},{facility_name:"CITY OF FAYETTEVILLE WWTP",city:"Fayetteville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:3,latitude:29.905306,longitude:-96.666611},{facility_name:"CITY OF WORTHAM",city:"Wortham","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:31.79652,longitude:-96.454467},{facility_name:"CITY OF FROST WWTP",city:"Frost","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:32.084402,longitude:-96.812523},{facility_name:"CITY OF QUEEN CITY WWTP",city:"Queen City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:33.155972,longitude:-94.135222},{facility_name:"WILDWOOD SHORES WWTF",city:"Cypress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.551583,longitude:-95.614389},{facility_name:"EASTHAM UNIT WWTP",city:"Hunstville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.973889,longitude:-95.635},{facility_name:"HARRIS COUNTY MUD 405 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:2.95262454,latitude:29.999609,longitude:-95.845225},{facility_name:"TEXAS RANCH RV RESORT WWTF",city:"Burleson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:32.427777,longitude:-97.175555},{facility_name:"STAR ISLAND TREATMENT FACILITY",city:"Portsmouth","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:1.2,latitude:43.075388,longitude:-70.760605},{facility_name:"LITTLE RIVER WWTF",city:"Little River Academy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:2.421,latitude:30.982783,longitude:-97.366837},{facility_name:"BEAUVIEW WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:30.44858,longitude:-95.5335},{facility_name:"TN DOC-TURNEY CENTER",city:"Only","state_postal;":"TN",state:"Tenn.",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:2.78,latitude:35.8275,longitude:-87.69},{facility_name:"CITY OF TIMPSON WWTF",city:"Timpson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:31.900155,longitude:-94.382881},{facility_name:"ST. PAUL WWTF",city:"Sinton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:28.088389,longitude:-97.560472},{facility_name:"TOWER OAK BEND WSC WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:2.71,latitude:29.9555,longitude:-95.601028},{facility_name:"LULING SOUTH WWTP",city:"Luling","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.657667,longitude:-97.647861},{facility_name:"ALDINE FOREST WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.917444,longitude:-95.36575},{facility_name:"MILLER'S COVE WWTP",city:"Winfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:33.155306,longitude:-95.117667},{facility_name:"POTRANCO RANCH SUBDIVISON WWTP",city:"Helotes","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.424444,longitude:-98.836111},{facility_name:"TOWN OF OAK RIDGE WWTP",city:"Gainesville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:33.645296,longitude:-97.041069},{facility_name:"KEYSTONE, TOWN OF",city:"Keystone","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:43.891321,longitude:-103.391309},{facility_name:"GE PACKAGED POWER JPORT",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.75583,longitude:-95.11082},{facility_name:"WHITE OAK CONDOS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:29.782167,longitude:-95.375194},{facility_name:"WEST AGUA WWTP",city:"Palmview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:3,amount_of_biosolids_managed_land_applied:0,latitude:26.278246,longitude:-98.570437},{facility_name:"SABINE RIVER AUTHORITY FM 429 WWTP",city:"Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:1.97,latitude:32.852075,longitude:-96.070641},{facility_name:"CANE ISLAND WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:2.46,latitude:29.83112,longitude:-95.84017},{facility_name:"RIVER OAKS MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:2.46,latitude:29.89174,longitude:-95.25605},{facility_name:"SUNDOWN MHP WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:2.46,latitude:29.89061,longitude:-95.35484},{facility_name:"LAKE TAWAKONI STATE PARK WWTF",city:"Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:1.66,latitude:32.843333,longitude:-95.990277},{facility_name:"BRENTWOOD MANOR WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:28.833389,longitude:-96.916814},{facility_name:"CRESTVIEW SUBDIVISION",city:"Seguin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:28.598778,longitude:-96.701306},{facility_name:"PRASA ADJUNTAS",city:"Adjuntas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:18.16106707,longitude:-66.72134759},{facility_name:"DAVIES MOBILE PARK LLC",city:"Fort Collins","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:40.55335,longitude:-105.04938},{facility_name:"TERRA VERDE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.095231,longitude:-95.842169},{facility_name:"CORNERSTONE MHP WWTP",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.11854,longitude:-95.58266},{facility_name:"UFP-NEW WAVERLY WWTP",city:"Grand Rapids","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.574917,longitude:-95.473778},{facility_name:"DEER TRAIL WWTP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.90672,longitude:-95.42279},{facility_name:"SPRING OAKS MHP WWTP",city:"Navasota","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.08641,longitude:-95.48483},{facility_name:"BRAZORIA COUNTY FWSD 1 WWTP",city:"Damon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.295083,longitude:-95.731111},{facility_name:"WEYBRIDGE WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.307361,longitude:-95.265917},{facility_name:"SAVANNAH PLANTATION WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.351889,longitude:-95.309917},{facility_name:"MAPLE LEAF GARDENS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.91237,longitude:-95.54435},{facility_name:"LOLITA WWTF",city:"Lolita","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:28.83655,longitude:-96.537981},{facility_name:"BEACON ESTATES WWTP",city:"Brookshire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.872222,longitude:-96.000277},{facility_name:"STONETOWN BENBROOK WWTP",city:"Glendale","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.6111,longitude:-97.53735},{facility_name:"COLE CREEK BUSINESS PARK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.865989,longitude:-95.526596},{facility_name:"MATAGORDA WD & WSC WWTP",city:"Matagorda","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:28.692194,longitude:-95.964389},{facility_name:"BELLE OAKS WWTP",city:"Beaumont","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.872972,longitude:-94.125722},{facility_name:"GARDEN CITY WPCP",city:"Garden City","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.06391,longitude:-81.20555},{facility_name:"CONVENIENCE RV PARK WWTP",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.484917,longitude:-95.492139},{facility_name:"BAY BLUFF WWTP",city:"Des Moines","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.607777,longitude:-95.065833},{facility_name:"TDCJ POWLEDGE WWTP",city:"Hunstville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:31.731278,longitude:-95.801611},{facility_name:"RUSSELLVILLE WATER AND SEWER BOARD",city:"Russellville","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:2,latitude:34.4689,longitude:-87.7283},{facility_name:"LILLIAN ELEMENTARY SCHOOL WWTF",city:"Alvarado","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.496556,longitude:-97.193372},{facility_name:"BEECHWOOD WWTP",city:"Cypress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.217732,longitude:-95.445014},{facility_name:"CITY OF CAMPBELL WWTP",city:"Campbell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:33.1415,longitude:-95.971333},{facility_name:"BIG CANOE UTILITIES COMPANY INC. (BLACKWELL CREEK WTP)",city:"Marble Hill","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:34.4277,longitude:-84.27945},{facility_name:"GALVESTON BAY RV PARK WWTF",city:"Dickinson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:1.97,latitude:29.454111,longitude:-94.982389},{facility_name:"CHAPMAN MHP WWTP",city:"Crosby","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.92245,longitude:-95.04337},{facility_name:"ROSEWOOD MHP WWTP",city:"Humble","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.893,longitude:-95.37825},{facility_name:"CITY OF TALCO WWTF",city:"Talco","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:33.367722,longitude:-95.088639},{facility_name:"CHIRENO ISD",city:"Chireno","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:31.493611,longitude:-94.348055},{facility_name:"ALDINE ISD CHRISMAN RD WTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.90683,longitude:-95.36354},{facility_name:"TREATY OAKS WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.367917,longitude:-97.718056},{facility_name:"ACADEMY WWTF",city:"Little River-Academy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:1.816,latitude:30.976556,longitude:-97.338611},{facility_name:"BAYRIDGE WWTP",city:"Cypress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.659111,longitude:-94.896861},{facility_name:"WODEN ISD WWTP",city:"Woden","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:31.50444,longitude:-94.523055},{facility_name:"PINEY SHORES WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.382889,longitude:-95.539944},{facility_name:"MOOREHEAD JR HIGH SCHOOL WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.252222,longitude:-95.310555},{facility_name:"CITY OF EMORY WWTP",city:"Emory","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.864556,longitude:-95.766889},{facility_name:"MEMPHIS WWTP",city:"Memphis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:34.712028,longitude:-100.530528},{facility_name:"RIDGE WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.384,longitude:-97.714556},{facility_name:"HARRIS COUNTY MUNICIPAL UTILITY DISTRICT NO 438 WWTP",city:"Katy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.916388,longitude:-95.773888},{facility_name:"CAROLINA CREEK CHRISTIAN CAMPS",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.841111,longitude:-95.339639},{facility_name:"POLK COUNTY SAFETY REST AREA WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.840097,longitude:-94.860849},{facility_name:"MCKINNEY ROUGHS WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.139833,longitude:-97.463583},{facility_name:"KOPPERL ISD WWTP",city:"Kopperl","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.074583,longitude:-97.501583},{facility_name:"WHISPER MEADOWS WWTF",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.021614,longitude:-95.585911},{facility_name:"DRIL-QUIP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.86877,longitude:-95.6084},{facility_name:"GRAND PARKWAY INDUSTRIAL PARK",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.825277,longitude:-95.776388},{facility_name:"DEL LAGO ESTATES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.392972,longitude:-95.651611},{facility_name:"LILLIPUT FARMS WWTP",city:"Porter","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.173717,longitude:-95.19242},{facility_name:"ED-LOU WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.01983,longitude:-95.64604},{facility_name:"CYPRESSWOOD MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.455694,longitude:-90.933629},{facility_name:"CAMP OLYMPIA",city:"Trinity","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.944124,longitude:-95.255015},{facility_name:"WILLOW MANOR MHP WWTP",city:"Cost Mesa","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.53063,longitude:-95.41674},{facility_name:"LA WARD WWTF",city:"La Ward","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:28.844778,longitude:-96.460472},{facility_name:"THE RETREAT AT ARTESIAN LAKES WWTF",city:"Cleveland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.451666,longitude:-94.827222},{facility_name:"SOUTHGATE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:29.910273,longitude:-95.41393},{facility_name:"CONROE BAY WATER SEWER SUPPLY WWTP",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:30.459111,longitude:-95.551611},{facility_name:"RIVERBEND RETREAT CENTER -WWTP",city:"Glen Rose","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.2077,longitude:-97.69447},{facility_name:"FRUITVALE WWTP",city:"Fruitvale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:2,amount_of_biosolids_managed_land_applied:0,latitude:32.673,longitude:-95.801833},{facility_name:"CITY OF PALACIOS WWTP",city:"Palacios","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:28.703694,longitude:-96.233972},{facility_name:"COUNTRY OAKS ARBOR MHP WWTP",city:"Pearland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:1.47631227,latitude:29.544667,longitude:-95.350472},{facility_name:"STEPHEN F AUSTIN HISTORICAL PARK",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.821056,longitude:-96.107444},{facility_name:"EAST MOUNT HOUSTON MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:1.476,latitude:29.89127,longitude:-95.294855},{facility_name:"PRASA MARICAO",city:"Maricao","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:1.4,latitude:18.187368,longitude:-66.994251},{facility_name:"WOLF CREEK SKI CORP",city:"Pagosa Springs","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:1.31,latitude:37.27685507,longitude:-107.0853062},{facility_name:"RED WARE ELEMENTARY WWTP",city:"Callisburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:33.606523,longitude:-97.007185},{facility_name:"PELICAN ISLE WWTP",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:31.994708,longitude:-96.17205},{facility_name:"LONGFORD PLACE WWTF",city:"Orange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.16165,longitude:-93.7519},{facility_name:"KNOX LEE POWER PLANT",city:"Longview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.37676,longitude:-94.63972},{facility_name:"CITY OF FRANKSTON WWTF",city:"Frankston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.044902,longitude:-95.496715},{facility_name:"CITY OF ORANGE GROVE WWTP",city:"Orange Grove","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:27.942583,longitude:-97.935611},{facility_name:"MSEC WWTP 2",city:"Montgomery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.353333,longitude:-95.662777},{facility_name:"TRINIDAD CITY OF",city:"Trinidad","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:37.1740569,longitude:-104.4909835},{facility_name:"UPPER SIOUX COMMUNITY",city:"Granite Falls","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:1.17,latitude:44.746755,longitude:-95.496637},{facility_name:"MCDONALD OBSERVATORY LOWER WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.676778,longitude:-104.023111},{facility_name:"PARADISE RV RESORT WWTF",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.833045,longitude:-95.629697},{facility_name:"CITY OF WILLS POINT WWTP",city:"Wills Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.690944,longitude:-96.014667},{facility_name:"GREENS BAYOU FABRICATION YARD",city:"Cyrpess","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.74787,longitude:-95.17985},{facility_name:"HAWLEY WWTF",city:"Quitman","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.913444,longitude:-95.660222},{facility_name:"MEADOWLAND UTILITY WWTP",city:"Alvin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:1.03,latitude:29.469389,longitude:-95.269639},{facility_name:"CITY OF KNOX CITY WWTP",city:"Knox City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:33.423778,longitude:-99.823},{facility_name:"HOOKS JUNIOR HIGH WWTF",city:"Hooks","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:33.517,longitude:-94.285639},{facility_name:"INDIAN HILL HARBOR WWTP",city:"Livingston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.74379,longitude:-95.09095},{facility_name:"WARREN W W T F",city:"West Warren","state_postal;":"MA",state:"Mass.",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:42.210084,longitude:-72.24737},{facility_name:"BAYOU FOREST VILLAGE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.89823,longitude:-95.3549},{facility_name:"KOA HOUSTON CENTRAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.920434,longitude:-95.360225},{facility_name:"RICETEC WWTP",city:"Alvin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.323799,longitude:-95.260829},{facility_name:"EAGLE MOUNTAIN RV PARK WWTP",city:"Fort Worth","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.9496,longitude:-97.50405},{facility_name:"D BAR B WWTP",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.65546,longitude:-96.67706},{facility_name:"CIRCLE T ARENA WWTP",city:"Hamilton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:31.749151,longitude:-98.169907},{facility_name:"HOLIDAY HARBOR WWTP",city:"Point Blank","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.704056,longitude:-95.170194},{facility_name:"TROPICAL TRAILS RV RESORT WWTP",city:"Bryan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:25.9878,longitude:-97.4384},{facility_name:"CITY OF MILFORD WWTP",city:"Milford","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.128639,longitude:-96.938556},{facility_name:"NEW WAVERLY WWTD",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.539606,longitude:-95.49396},{facility_name:"SPLENDORA HIGH SCHOOL WWTF",city:"Splendora","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.249194,longitude:-95.200389},{facility_name:"SCRAP YARD SPORTS WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.14499,longitude:-95.41572},{facility_name:"CYPRESS LAKES WWTP",city:"Cleveland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.294639,longitude:-94.800194},{facility_name:"BAYOU CLUB WWTP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.77325,longitude:-95.45288},{facility_name:"BENDER CREEK APARTMENT WWTP",city:"Humble","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.927304,longitude:-95.300642},{facility_name:"GREIF INDUSTRIAL HOUSTON SPECIALTY FACILITY",city:"La Porte","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.70216,longitude:-95.06427},{facility_name:"HOUSTON EAST RV RESORT WWTP",city:"Garland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.820564,longitude:-94.87576},{facility_name:"WOODLOCH MHP WWTP",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.894331,longitude:-95.366728},{facility_name:"BENTWOOD ESTATES WWTP",city:"Midland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.02925,longitude:-95.08023},{facility_name:"PLANTATION CROSSING WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.623444,longitude:-95.717806},{facility_name:"SPRING CYPRESS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.076306,longitude:-95.432972},{facility_name:"EASTWOOD HILLS SUBDIVISION WWTF",city:"Southfield","state_postal;":"MI",state:"Mich.",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.150715,longitude:-95.430273},{facility_name:"DISTRICT 249 BAR AND GRILL",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.022972,longitude:-95.59075},{facility_name:"SUNSET MHP 2 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.90866,longitude:-95.49015},{facility_name:"MATAGORDA BAY NATURE PARK AND PRESERVE WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:28.601556,longitude:-95.978333},{facility_name:"RAYFORD CROSSING WWTP",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.11506,longitude:-95.4167},{facility_name:"LIBERTY DANVILLE FWSD 2 WWTP",city:"Kilgore","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.42856,longitude:-94.81083},{facility_name:"QUAIL RUN WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.327306,longitude:-98.050479},{facility_name:"PINE COLONY WWTP",city:"Alvin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:.7,latitude:29.473694,longitude:-95.262222},{facility_name:"RIVERCREST ISD WWTF",city:"Bogata","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:33.40506,longitude:-95.16738},{facility_name:"NATIONAL COIL WWTF",city:"Longview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.414557,longitude:-94.770282},{facility_name:"ANGLE ACRES WWTP",city:"Cypress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.157077,longitude:-95.396018},{facility_name:"WADSWORTH WWTP",city:"Wadsworth","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.895222,longitude:-95.354639},{facility_name:"UPPER LEON RIVER WWTP",city:"Comanche","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:31.96649,longitude:-98.516073},{facility_name:"KALITA POINT WWTP",city:"Livingston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:30.739347,longitude:-95.062046},{facility_name:"WILLOW RIVER FARMS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.835409,longitude:-96.08914},{facility_name:"CANEY CREEK UTILITIES WWTF",city:"Montgomery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:.59052491,latitude:30.44575,longitude:-95.608833},{facility_name:"KENNECOTT UTAH COPPER, LLC",city:"Salt Lake City","state_postal;":"UT",state:"Utah",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:40.714389,longitude:-112.116609},{facility_name:"DOUGLASVILLE - DOUGLAS COUNTY WATER AND SEWER AUTHORITY",city:"Douglasville","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:33.694444,longitude:-84.692972},{facility_name:"ELLINGER SEWER & WSC WWTP",city:"Ellinger","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:29.839531,longitude:-96.707142},{facility_name:"BLUE WATER SHORES",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:32.38831,longitude:-97.69647},{facility_name:"ANGELINA COUNTY FWSD NO 1 WWTP",city:"Lufkin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:31.43884,longitude:-94.6501},{facility_name:"NEW ULM WSC WWTP",city:"New Ulm","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:.5167093,latitude:29.885278,longitude:-96.477583},{facility_name:"HILL CITY, CITY OF (BIOSOLIDS)",city:"Hill City","state_postal;":"SD",state:"S.D.",amount_of_biosolids_generated:1,amount_of_biosolids_managed_land_applied:0,latitude:43.935444,longitude:-103.557278},{facility_name:"CARBY ROAD MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:.4921,latitude:29.87811,longitude:-95.38155},{facility_name:"HICKORY HOLLOW INN WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.92541,longitude:-95.52179},{facility_name:"MONUMENT INN WWTP",city:"La Porte","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.761056,longitude:-95.079917},{facility_name:"RIVERBEND PARK & RESORT WWTP",city:"Richmond","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.54217,longitude:-95.64412},{facility_name:"MAIN PLANT WWTF",city:"Childress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:34.413333,longitude:-100.17777},{facility_name:"JOHNSON COUNTY PIPE",city:"Alvarado","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"TYLER STATE PARK WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.475528,longitude:-95.299611},{facility_name:"HOLLY LAKE RANCH WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.709493,longitude:-95.190128},{facility_name:"SIGMAPRO WWTP",city:"Fort Worth","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.941009,longitude:-97.322754},{facility_name:"PALO PINTO CO WCID 1",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.888722,longitude:-98.476139},{facility_name:"LAKE FORK ESTATES WWTF",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:.44,latitude:32.848722,longitude:-95.508278},{facility_name:"LAKE OAKS LANDING WWTP",city:"Point Blank","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.718722,longitude:-95.187889},{facility_name:"COUNTRY LIVING MHP WWTP",city:"Marshall","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.55664,longitude:-94.39828},{facility_name:"GRASSLANDS WWTP",city:"Rosharon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.344016,longitude:-95.445504},{facility_name:"AFS GROUP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.89168,longitude:-95.39627},{facility_name:"TRINITY INDUSTRIES PLANT 19 WWTF",city:"Dalks","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.50186,longitude:-94.640056},{facility_name:"TYNAN WWTP",city:"Tynan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.172667,longitude:-97.753028},{facility_name:"CITY OF CHICO",city:"Chico","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.299187,longitude:-97.790489},{facility_name:"CHISOS BASIN WWTP",city:"Big Bend National Park","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.278806,longitude:-103.307667},{facility_name:"FORT WORTH BOAT CLUB WWTP",city:"Fort Worth","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.89373,longitude:-97.48726},{facility_name:"VAM USA",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.83697,longitude:-95.13528},{facility_name:"FALL TREATMENT PLANT NO 1 WWTP",city:"New Ulm","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.845611,longitude:-96.511472},{facility_name:"NORTHSIDE WATER WWTP",city:"Stephenville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.254665,longitude:-98.222549},{facility_name:"TIDEHAVEN JHS-HS WWTP",city:"El Maton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.897222,longitude:-96.137222},{facility_name:"LIVE OAK COUNTY SAFETY REST AREA NORTHBOND WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:.27,latitude:28.603333,longitude:-98.219166},{facility_name:"LIVE OAK COUNTY SAFETY REST AREA WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:.27,latitude:28.650555,longitude:-98.24388},{facility_name:"BCFS DRISCOLL HEALTH & HUMAN SERVICES WWTF",city:"Harlingen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"SAN FELIPE WWTP",city:"Fort Worth","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.82465,longitude:-96.13706},{facility_name:"BROOKELAND ISD WWTP",city:"Brookland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.149115,longitude:-93.993362},{facility_name:"WEST HARDIN COUNTY CISD WWTF",city:"Saratoga","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.257917,longitude:-94.563861},{facility_name:"STONE HEDGE WASTEWATER TREATMENT PLANT",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"BCFS DRISCOLL HEALTH & HUMAN SERVICES WWTP",city:"Harlingen","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.690833,longitude:-97.740277},{facility_name:"RED POTATO MARKET WWTF",city:"Simonton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.683055,longitude:-95.982777},{facility_name:"POPLAR GROVE, VILLAGE OF",city:"Poplar Grove","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:42.36927,longitude:-88.8286},{facility_name:"CITY OF BARDWELL WWTP",city:"Bardwell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.349843,longitude:-94.246876},{facility_name:"CITY OF ORE CITY WWTF",city:"Ore City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.803972,longitude:-94.707139},{facility_name:"FOUNTAIN LAKE PLANT",city:"Livingston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.812944,longitude:-95.082694},{facility_name:"AZTEC COVE WWTP",city:"Trinity","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.917944,longitude:-95.27325},{facility_name:"CITY OF NEWARK WWTP",city:"Newark","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.99825,longitude:-97.49187},{facility_name:"EMORY WWTP",city:"Emory","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.864556,longitude:-95.766889},{facility_name:"FRONTIER PARK WWTP",city:"Orange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.450733,longitude:-93.765894},{facility_name:"FAIRVIEW GARDENS DEVELOPMENTS WWTP",city:"Jersey Village","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.884667,longitude:-95.589083},{facility_name:"SUNSET SHORES WWTF",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.436861,longitude:-95.584389},{facility_name:"COTTON BAYOU PARK",city:"League City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.803935,longitude:-94.83821},{facility_name:"CITY OF LA VILLA WWTF",city:"La Villa","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.301111,longitude:-97.915833},{facility_name:"BLORA WWTP",city:"Camden","state_postal;":"NJ",state:"N.J.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.135833,longitude:-97.547222},{facility_name:"HALLIBURTON GALVESTON PELICAN ISLAND WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.32187,longitude:-94.78717},{facility_name:"UNITED PENTECOSTAL CHURCH CAMPGROUND",city:"Wapella","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:40.256055,longitude:-88.977003},{facility_name:"HARBOR ISLAND WWTP",city:"Keithville","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.847611,longitude:-97.061056},{facility_name:"ELGIN WWTP",city:"Elgin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:162.4469,latitude:30.33667,longitude:-97.37584},{facility_name:"SUNRISE EAST APARTMENTS WWTP",city:"Orange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.05087,longitude:-93.81375},{facility_name:"SUGAR PINES MHC WWTF",city:"Pasadena","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.207488,longitude:-94.0314},{facility_name:"PURTIS CREEK STATE PARK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.35375,longitude:-96.004389},{facility_name:"WEST MONROE WWTP",city:"West Monroe","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.424013,longitude:-92.178376},{facility_name:"INDIANHEAD BIOMASS",city:"St. Augustine","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:68930,latitude:29.872468,longitude:-81.367989},{facility_name:"CITY OF PORTLAND WWTF",city:"Portland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:518.376,latitude:27.878498,longitude:-97.332088},{facility_name:"CLIMAX MOLYBDENUM COMPANY-CLIMAX MINE",city:"Climax","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:6.49,latitude:39.24767,longitude:-106.29221},{facility_name:"CITY OF DAISETTA WWTP",city:"Daisetta","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.117111,longitude:-94.629528},{facility_name:"MARTIN DIES JR WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.844434,longitude:-94.165788},{facility_name:"FAYETTE WSC WATER WELL 4",city:"La Grange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.811083,longitude:-96.918444},{facility_name:"RUTERSVILLE WTP",city:"La Grange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.92979,longitude:-96.83663},{facility_name:"WESTPHALIA WASTEWATER WORKS WWTP",city:"Lott","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.121111,longitude:-97.112056},{facility_name:"CITY OF CUMBY WWTP",city:"Cumby","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.134556,longitude:-95.828},{facility_name:"KOUNTZE WWTP",city:"Kountze","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.376861,longitude:-94.299333},{facility_name:"CITY OF KERENS WWTP",city:"Kerens","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.116992,longitude:-96.232205},{facility_name:"CITY OF THORNTON WWTP",city:"Thornton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.401833,longitude:-96.581361},{facility_name:"CITY OF TRINIDAD WWTP",city:"Trinidad","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.136806,longitude:-96.071333},{facility_name:"BRAZOS ISD WWTP",city:"Wallis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.618076,longitude:-96.024836},{facility_name:"SABINE PASS WWTP",city:"Port Arthur","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.91313,longitude:-93.89485},{facility_name:"GROESBECK WWTP",city:"Groesbeck","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.526944,longitude:-96.519444},{facility_name:"CITY OF FRANKLIN WWTP",city:"Franklin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.016556,longitude:-96.496333},{facility_name:"CITY OF LEXINGTON WWTF",city:"Lexington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.407917,longitude:-97.014333},{facility_name:"PINE COVE CRIER CREEK WWTP",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.817224,longitude:-96.669487},{facility_name:"EVADALE WCID 1 WWTP",city:"Evadale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.34206,longitude:-94.083201},{facility_name:"COLLIN PARK MARINA WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.048755,longitude:-96.533704},{facility_name:"CARTER LAKE WWTP",city:"College Station","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.594812,longitude:-96.249932},{facility_name:"CITY OF EVANT WWTP",city:"Evant","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.473041,longitude:-98.145559},{facility_name:"MSEC WWTP",city:"Montgomery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.318697,longitude:-95.624135},{facility_name:"SLAYTER CREEK WWTP",city:"Anna","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.331559,longitude:-96.566588},{facility_name:"NEW SUMMERFIELD WWTF",city:"New Summerfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.9975,longitude:-95.0889},{facility_name:"CAYUGA ISD",city:"Cayuga","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.924306,longitude:-95.926611},{facility_name:"CITY OF HOOKS WWTF",city:"Hooks","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.477389,longitude:-94.252889},{facility_name:"OLMITO WSC WWTP",city:"Olmito","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.045472,longitude:-97.505972},{facility_name:"SKIDMORE WSC WWTP",city:"Skidmore","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.270034,longitude:-97.678021},{facility_name:"ROLOFF WWTF",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.728611,longitude:-97.523055},{facility_name:"BIRKHEAD WELL WWTP",city:"Rockdale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.592694,longitude:-96.966361},{facility_name:"MILANO WELL WWTP",city:"Rockdale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.686556,longitude:-96.908389},{facility_name:"ANTHIS WELL WTP",city:"Rockdale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.64225,longitude:-96.926861},{facility_name:"REFUGIO COUNTY WCID 1",city:"Tivoli","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.189403,longitude:-95.799141},{facility_name:"CITY OF ZAVALLA WWTF",city:"Zavalla","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.148286,longitude:-94.433685},{facility_name:"CITY OF ALAMO WWTP",city:"Alamo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.141722,longitude:-98.118583},{facility_name:"LAKE FORK MARINA WWTP",city:"Alba","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.868389,longitude:-95.621889},{facility_name:"STEAMBOAT SHORES WWTF",city:"Emory","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.894194,longitude:-95.664917},{facility_name:"POPE'S LANDING WWTF",city:"Alba","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.850889,longitude:-95.624806},{facility_name:"LAKE FORK RESORT WWTF",city:"Alba","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.877028,longitude:-95.632972},{facility_name:"CITY OF ARCHER CITY WTP",city:"Archer City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.587917,longitude:-98.639056},{facility_name:"GONZALES COUNTY WSC 794 WELL SITE",city:"Gonzales","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.630337,longitude:-97.489499},{facility_name:"GONZALES COUNTY WSC BEBE WELL SITE",city:"Gonzales","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.414166,longitude:-97.638333},{facility_name:"GONZALES COUNTY WSC 304 WELL",city:"Gonzales","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.616944,longitude:-97.415555},{facility_name:"CITY OF CRAWFORD WWTP",city:"Crawford","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.53125,longitude:-97.4325},{facility_name:"CITY OF VALLEY MILLS WWTP",city:"Valley Mills","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.664361,longitude:-97.463278},{facility_name:"CITY OF OGLESBY WWTP",city:"Oglesby","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.417083,longitude:-97.513333},{facility_name:"CAMP JOHN MARC WWTF",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.962833,longitude:-97.555444},{facility_name:"POLK STREET WWTP",city:"Beaumont","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.946778,longitude:-97.330389},{facility_name:"TEXAS CONFERENCE ASSOICATION SEVENTH DAY ADVENTISTS WWTP",city:"Alvarado","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.898888,longitude:-97.410833},{facility_name:"WINNIE - STOWELL WWTF",city:"Stowell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.80601,longitude:-94.370959},{facility_name:"MAIN WWTF",city:"Ozona","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.673611,longitude:-101.213361},{facility_name:"FORRESTON WWTP",city:"Forreston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.251946,longitude:-96.861704},{facility_name:"RICE WSC WWTP",city:"Rice","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.238869,longitude:-96.506542},{facility_name:"CITY OF CELESTE WWTP",city:"Celeste","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.274556,longitude:-96.200806},{facility_name:"OAK ISLAND WWTP",city:"Stowell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.664389,longitude:-94.686861},{facility_name:"SMITH POINT WWTP",city:"Stowell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.69397,longitude:-94.62989},{facility_name:"HANKAMER WWTF",city:"Stowell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.853611,longitude:-94.640833},{facility_name:"JASPER COUNTY WCID NO.1",city:"Jasper","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.436583,longitude:-93.969056},{facility_name:"SUNRAY WWTP",city:"Sunray","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:36.03862,longitude:-101.8207},{facility_name:"CITY OF WOLFE CITY WWTF",city:"Wolfe City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.348787,longitude:-96.076103},{facility_name:"CITY OF PRESIDIO WWTF",city:"Presidio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.532907,longitude:-104.317451},{facility_name:"BLAKETREE MUD NO 1 WWTP",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.306944,longitude:-95.772222},{facility_name:"CRANE WWTP",city:"Montgomery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.316388,longitude:-95.616111},{facility_name:"SPRING CENTER WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.09448,longitude:-95.43493},{facility_name:"CITY OF MOUNT ENTERPRISE WWTF",city:"Mount Enterprise","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.895201,longitude:-94.686662},{facility_name:"LA SARA WWTP",city:"Edinburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.473028,longitude:-97.917972},{facility_name:"TPWD LAKE LIVINGSTON STATE PARK",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.666022,longitude:-95.000535},{facility_name:"COLLIN COUNTY ADVENTURE CAMP WWTF",city:"Irving","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.373974,longitude:-96.471335},{facility_name:"CANUTILLO MIDDLE SCHOOL WWTP",city:"Canutillo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.925019,longitude:-106.608748},{facility_name:"DALE PUMP STATION",city:"Lockhart","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.921222,longitude:-97.561778},{facility_name:"BROWNSBORO WTP",city:"Lockhart","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.817528,longitude:-97.63575},{facility_name:"CAMP SWIFT IRON REMOVAL WTP",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.19985,longitude:-97.30529},{facility_name:"C IRON REMOVAL WTP",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.320778,longitude:-97.313444},{facility_name:"MCDADE IRON REMOVAL WTP",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.343787,longitude:-97.379394},{facility_name:"BLUE IRON REMOVAL PLANT WTP",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.368611,longitude:-97.113972},{facility_name:"DALE WELL 2A WTF",city:"Lockhart","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.906388,longitude:-97.570833},{facility_name:"UNION GROVE ISD WWTP",city:"Gladewater","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.57047,longitude:-94.923814},{facility_name:"CITY OF ARP WWTP",city:"Arp","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.21659,longitude:-95.058678},{facility_name:"CITY OF ECTOR WWTP",city:"Ector","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.5895,longitude:-96.278556},{facility_name:"DIANA S.U.D. - WWTP",city:"Diana","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.690694,longitude:-94.74825},{facility_name:"CITY OF DEVERS WWTP",city:"Devers","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.021583,longitude:-94.589917},{facility_name:"HOLY TRINITY EPISCOPAL SCHOOL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.89447,longitude:-95.21115},{facility_name:"SRALLA MHP WWTP",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.88226,longitude:-95.03583},{facility_name:"MORGAN'S POINT RESORT WWTF",city:"Morgan'S Point Resort","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.14766,longitude:-97.47432},{facility_name:"PERRIN WHITT CISD WWTP",city:"Perrin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.035512,longitude:-98.06941},{facility_name:"CUDDIHY AIRFIELD WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.715694,longitude:-97.510722},{facility_name:"BISHOP CISD WWTP",city:"Bishop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.6729,longitude:-97.63568},{facility_name:"CAMP LONE STAR WWTP",city:"La Grange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.895361,longitude:-96.845},{facility_name:"CITY OF GRUVER WWTP",city:"Gruver","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:36.251528,longitude:-101.396944},{facility_name:"WALNUT SPRINGS CITY OF WWTP",city:"Walnut Springs","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.05585,longitude:-97.7496},{facility_name:"CITY OF DETROIT WWTP",city:"Detroit","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.65775,longitude:-95.254583},{facility_name:"CITY OF MARLIN WWTP",city:"Marlin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.30744,longitude:-96.89801},{facility_name:"LEON CREEK WATER RECYCLING CENTER",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.276833,longitude:-98.514417},{facility_name:"MEDIO CREEK WATER RECYC. CTR.",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.397417,longitude:-98.669556},{facility_name:"MITCHELL LAKE WWTF",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.271194,longitude:-98.487944},{facility_name:"CITY OF TRENTON WWTP",city:"Trenton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.425106,longitude:-96.346646},{facility_name:"WHITNEY LAKE POWERHOUSE WWTF",city:"Clifton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.864028,longitude:-97.368611},{facility_name:"ROYSE CITY WWTF",city:"Royse City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.957333,longitude:-96.318028},{facility_name:"WYLIE WWTP",city:"Wylie","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.997094,longitude:-96.551669},{facility_name:"CITY OF HOLLIDAY WWTP",city:"Holliday","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.823292,longitude:-98.68679},{facility_name:"CITY OF STOCKDALE WWTP",city:"Stockdale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.232639,longitude:-97.979611},{facility_name:"CITY OF MOODY WWTP",city:"Moody","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.31027,longitude:-97.36513},{facility_name:"LADONIA WWTF",city:"Ladonia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.412054,longitude:-95.938974},{facility_name:"IS ZEN CENTER WWTF",city:"Magnolia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.15543,longitude:-95.6063},{facility_name:"REALITOS WWTP",city:"Benavides","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.442777,longitude:-98.529444},{facility_name:"CITY OF GORMAN WWTP",city:"Gorman","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.201778,longitude:-98.684194},{facility_name:"CITY OF TROUP WWTP",city:"Troup","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.133564,longitude:-95.115069},{facility_name:"CANYON LAKE WWTF",city:"Fort Sam Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.909722,longitude:-98.213611},{facility_name:"CAMP MAXEY WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.770018,longitude:-95.538286},{facility_name:"CITY OF COLMESNEIL WWTP",city:"Colmesneil","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.914361,longitude:-94.432139},{facility_name:"CITY OF ROXTON WWTP",city:"Roxton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.536354,longitude:-95.721917},{facility_name:"CITY OF LOVELADY WWTP",city:"Lovelady","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.123592,longitude:-95.45374},{facility_name:"CITY OF GOLDTHWAITE WTP",city:"Goldthwaite","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.439667,longitude:-98.589417},{facility_name:"CITY OF PALMER WWTP",city:"Palmer","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"CITY OF HIGGINS WWTP",city:"Higgins","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:36.134972,longitude:-100.029694},{facility_name:"COOPER LAKE ST PARK - S SULPHUR UNIT WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.287089,longitude:-95.666643},{facility_name:"CADDO LAKE STATE PARK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.678444,longitude:-94.175222},{facility_name:"BLOOMING GROVE WWTP",city:"Blooming Grove","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.093812,longitude:-96.70706},{facility_name:"SLAUGHTER ROAD WWTP",city:"Freeport","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.968278,longitude:-95.396583},{facility_name:"GREENS PARKWAY MUD - WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.953278,longitude:-95.369639},{facility_name:"IOWA PARK WWTF",city:"Iowa Park","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.941788,longitude:-98.67868},{facility_name:"CITY OF NOCONA WEST WWTF",city:"Nocona","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.785083,longitude:-97.739194},{facility_name:"CITY OF NOCONA SOUTH WWTP",city:"Nocona","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.775083,longitude:-97.721694},{facility_name:"NEW DANVILLE COMMUNITY WWTP",city:"Willis","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.48134,longitude:-95.51906},{facility_name:"HAMSHIRE COMMUNITY WWTP",city:"Beaumont","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.875472,longitude:-94.309333},{facility_name:"CITY OF NEW LONDON SOUTH WWTP",city:"New London","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.286278,longitude:-94.91325},{facility_name:"RIVER HILLS OWNERS ASSOCIATION",city:"Denison","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.711167,longitude:-96.606444},{facility_name:"CENTERVILLE WWTP",city:"Centerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.257361,longitude:-95.972111},{facility_name:"SAN AUGUSTINE WWTF",city:"San Augustine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.519333,longitude:-94.117694},{facility_name:"CITY OF HUNTINGTON WWTF",city:"Huntington","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.268799,longitude:-94.558205},{facility_name:"CITY OF BEDIAS WWTP",city:"Bedias","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.781111,longitude:-95.945833},{facility_name:"ACCELERATED PRODUCTION WWTF",city:"Tomball","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.034429,longitude:-95.602774},{facility_name:"BROADDUS WWTP",city:"Broaddus","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.300021,longitude:-94.275421},{facility_name:"CITY OF TENAHA WWTP",city:"Tenaha","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.94271,longitude:-94.231403},{facility_name:"CITY OF WELLS WWTP",city:"Wells","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.48845,longitude:-94.94025},{facility_name:"HARBORLIGHT RESORT WWTP",city:"Hemphill","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.408333,longitude:-93.781944},{facility_name:"LAKEVIEW RV PARK & AMP MOTEL WWTP",city:"Zavalla","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.203333,longitude:-94.336666},{facility_name:"CITY OF LONE OAK WWTP",city:"Lone Oak","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.985174,longitude:-95.938745},{facility_name:"BEACH ROAD MUD WWTP",city:"Matagorda","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.631306,longitude:-95.969306},{facility_name:"CITY OF WEIMAR WWTP",city:"Weimar","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.697917,longitude:-96.766111},{facility_name:"CITY OF AVERY WWTP",city:"Avery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.561972,longitude:-94.776444},{facility_name:"NOONDAY WATER WELL 2 WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.201528,longitude:-95.376333},{facility_name:"CITY OF AVINGER WWTP",city:"Avinger","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.905079,longitude:-94.546882},{facility_name:"CITY OF BECKVILLE WWTP",city:"Beckville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.232146,longitude:-94.449716},{facility_name:"TEASELVILLE WELL 1 WWTF",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.10588,longitude:-95.40915},{facility_name:"CITY OF BLOOMBURG WWTP",city:"Bloomburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.132917,longitude:-94.055111},{facility_name:"SOUTHSIDE WWTF",city:"Rio Hondo","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.077598,longitude:-97.546647},{facility_name:"CARLISLE ISD WWTP",city:"Price","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.12875,longitude:-94.941306},{facility_name:"CITY OF NAPLES WWTP",city:"Naples","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.200916,longitude:-94.663418},{facility_name:"WOLF CREEK PARK WWTP",city:"Livingston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.664366,longitude:-95.150851},{facility_name:"OAK HAVEN RECOVERY CENTER WWTP",city:"Longview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.596806,longitude:-94.456583},{facility_name:"JESUS AWAKENING MOVEMENT FOR AMERICA WWTP",city:"Lindale","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.5325,longitude:-95.548333},{facility_name:"LEVERETT'S CHAPEL ISD WWTP",city:"Laird Hill","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.312667,longitude:-94.919639},{facility_name:"HORACE WHATELY WWTP",city:"Atlanta","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.11848,longitude:-94.16527},{facility_name:"ESTELLINE WWTP",city:"Wichita Falls","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:34.544694,longitude:-100.426722},{facility_name:"UNION HILL ISD WWTP",city:"Gilmer","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.805755,longitude:-94.979243},{facility_name:"ARROWHEAD RANCH ESTATES WWTP",city:"Wichita Falls","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.780889,longitude:-98.401639},{facility_name:"ALDINE ISD ANNE LOUISE EDUCATIONAL COMPLEX",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.91938,longitude:-95.465553},{facility_name:"HARRIS COUNTY LEADERSHIP ACADEMY WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.90388,longitude:-95.819999},{facility_name:"TRUCK STOP AT FM 565 AND I-10 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.830277,longitude:-94.805833},{facility_name:"WESTWOOD WSC WWTP",city:"Jasper","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.084606,longitude:-94.160581},{facility_name:"JACINTOPORT TERMINAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.74745,longitude:-95.11627},{facility_name:"DELTA COUNTY MUD WWTF",city:"Cooper","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.433913,longitude:-95.849075},{facility_name:"FOREST GLEN WWTF",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.665228,longitude:-95.352073},{facility_name:"BEAR CREEK PARK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.827167,longitude:-95.623},{facility_name:"REUION 20 TRAVEL VILLAGE WWTP",city:"Tyler","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.441167,longitude:-95.131598},{facility_name:"BEECHWOOD WWTF",city:"Hemphill","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.207759,longitude:-93.648052},{facility_name:"FIN &AMP; FEATHER WWTP",city:"Hemphill","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.279145,longitude:-93.722915},{facility_name:"MONTE ALTO WWTP",city:"Edinburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.375444,longitude:-97.988972},{facility_name:"NAWSC NORTH WESLACO WWTP",city:"Edinburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.235,longitude:-97.9675},{facility_name:"BRACKETTVILLE FT CLARK WWTP",city:"Bracketville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.276788,longitude:-100.427866},{facility_name:"CITY OF ELKHART WWTP",city:"Elkhart","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.617667,longitude:-95.583556},{facility_name:"CRESTWOOD WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.788102,longitude:-94.560023},{facility_name:"SHEPPARD AIR FORCE BASE REC AN",city:"Sheppard Afb","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.978526,longitude:-98.515734},{facility_name:"CITY OF JUNCTION WWTP",city:"Junction","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.498185,longitude:-99.730848},{facility_name:"CONROE FEEDER ZONE ELEMENTARY SCHOOL FLEX 21 WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.325663,longitude:-95.588098},{facility_name:"STEPHEN F AUSTIN WWTF",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.33306,longitude:-95.34408},{facility_name:"SAN JACINTO ELEMENTARY WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.19576,longitude:-95.3451},{facility_name:"CITY OF CROWELL WWTP",city:"Crowell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.975917,longitude:-99.715639},{facility_name:"RICHARDS ISD WWTP",city:"Richards","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.5386,longitude:-95.84286},{facility_name:"CITY OF ANDERSON WWTF",city:"Anderson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.47975,longitude:-95.98675},{facility_name:"CITY OF CALVERT WWTP",city:"Calvert","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.969611,longitude:-96.683583},{facility_name:"PORT TERMINAL RAILROAD WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.758,longitude:-95.289917},{facility_name:"BOYS AND GIRLS COUNTRY OF HOUSTON WWTP",city:"Hockley","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.04701,longitude:-95.81533},{facility_name:"DYNAMIC PRODUCTS WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.74617,longitude:-95.10713},{facility_name:"CYPRESS PARK WWTF",city:"Spring","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.947722,longitude:-95.556583},{facility_name:"AMC FACILITIES WWTF",city:"Torrence","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.992222,longitude:-95.394978},{facility_name:"LOCHINVAR GOLF CLUB WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.98371,longitude:-95.38485},{facility_name:"HOOKS MOBILE HOME PARK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.889,longitude:-95.3549},{facility_name:"BERRY CREEK WWTP",city:"Georgetown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.702561,longitude:-97.657822},{facility_name:"CITY OF ROGERS WWTP",city:"Rogers","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.922389,longitude:-97.231083},{facility_name:"LOST RIVER RV PARK WWTP",city:"Baytown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.832581,longitude:-94.801813},{facility_name:"HIGH ISLAND ISD WWTF",city:"High Island","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.560555,longitude:-94.387222},{facility_name:"COUNTY ROAD PARK",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.90606,longitude:-95.52808},{facility_name:"NORTHWEST WATER RECLAMATION PLANT",city:"Lubbock","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.67517,longitude:-101.87228},{facility_name:"CAMP SUMMIT",city:"Dallas","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.115111,longitude:-97.730861},{facility_name:"PEARSALL DEVELOPMENT WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.010833,longitude:-99.060277},{facility_name:"ALDINE OAKS MHC WWTP",city:"Irvine","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.885889,longitude:-95.38},{facility_name:"GALVESTON 1 SANITARY WWTF",city:"Keithville","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.322417,longitude:-94.783389},{facility_name:"MELROSE MHP WWTP",city:"Torrance","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.87811,longitude:-95.38155},{facility_name:"OCEANEERING INTERNATIONAL WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.876225,longitude:-95.595322},{facility_name:"OIL STATES INDUSTRIES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.756065,longitude:-95.102879},{facility_name:"PIN OAK MHP WWTF",city:"Irvine","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.89217,longitude:-95.39657},{facility_name:"WILD PEACH ELEMENTARY WWTF",city:"West Columbia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.075,longitude:-95.616861},{facility_name:"LAKE PFLUGERVILLE WWTF",city:"Pflugerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.43487,longitude:-97.56941},{facility_name:"POINT WEST WWTF",city:"Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"POINT EAST PLANT WWTF",city:"Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"THE HEAVNES MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.89924,longitude:-95.35494},{facility_name:"RELLIS CAMPUS WWTP",city:"College Station","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.629083,longitude:-96.472167},{facility_name:"GBW RAILCAR SERVICES HOCKLEY",city:"Hockley","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.0256,longitude:-95.86559},{facility_name:"FIRST RESPONDERS ACADEMY WWTP",city:"San Antonio","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.267777,longitude:-98.695555},{facility_name:"GOREE WWTF",city:"Goree","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.468694,longitude:-99.514528},{facility_name:"MALLARD POINT WWTF",city:"Richardson","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.054984,longitude:-96.012402},{facility_name:"HARRIS COUNTY MUD 278 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.98075,longitude:-95.196028},{facility_name:"CITY OF COOPER - WWTP",city:"Cooper","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.3821,longitude:-95.6939},{facility_name:"PORT ADVENTURE",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.911833,longitude:-95.227417},{facility_name:"MEXIA STATE SUPPORTED LIVING CENTER WWTP",city:"Mexia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.693222,longitude:-96.53025},{facility_name:"VAM USA FACILITY",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.99488,longitude:-95.39565},{facility_name:"SANTE FE WWTP",city:"New Waverly","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.157222,longitude:-95.080555},{facility_name:"FORT HANCOCK WWTP",city:"Fort Hancock","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.28957,longitude:-105.83433},{facility_name:"GOSPEL FOR ASIA CAMPUS MINISTRY WWTP",city:"Wills Point","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.667777,longitude:-96.080555},{facility_name:"VALLOUREC STAR",city:"Channelview","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.83911,longitude:-95.12761},{facility_name:"CITY OF JOSEPHINE WWTF",city:"Josephine","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.065667,longitude:-96.299417},{facility_name:"CITY OF MORGAN WWTF",city:"Morgan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.008472,longitude:-97.608056},{facility_name:"WEST POINT WWTP",city:"La Grange","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"WALLER CO MUD 19",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.779166,longitude:-95.934166},{facility_name:"TIFCO INDUSTRIES WWTP",city:"Cypress","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.9305,longitude:-95.634083},{facility_name:"WESTWOOD SHORES MUD WWTF",city:"Trinity","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.940179,longitude:-95.315766},{facility_name:"US RV PARK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.558888,longitude:-95.689444},{facility_name:"CITY OF GOODRICH WWTP",city:"Goodrich","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.616766,longitude:-94.962455},{facility_name:"ER IRON REMOVAL WTP",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"GONZALES WARM SPRINGS WWTF",city:"Luling","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.593222,longitude:-97.583222},{facility_name:"DELHI IRON REMOVAL PLANT",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"MCMAHAN WTF",city:"Bastrop","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"WINDFERN MHP WWTP",city:"Navasota","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.9089,longitude:-95.53855},{facility_name:"SI ENTERPRISES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.75602,longitude:-95.10531},{facility_name:"JACINTOPORT INDUSTRIAL DEV WWT",city:"Wilmington","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.742722,longitude:-95.109639},{facility_name:"CHRISTIAN TABERNACLE OF HOUSTON WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.80675,longitude:-95.20775},{facility_name:"CHRISTIAN TABERNACLE WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.883377,longitude:-95.202622},{facility_name:"RICHMOND COMMUNITY ESTATES",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"SUMMER BREEZE RV PARK WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.782285,longitude:-95.995426},{facility_name:"CITY OF NEW LONDON WWTF",city:"New London","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.286278,longitude:-94.91325},{facility_name:"PETTY WWTF",city:"Petty","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.597304,longitude:-95.813677},{facility_name:"FANNETT CAMPUS WWTP",city:"Hamshire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.919917,longitude:-94.252111},{facility_name:"S.CNTRL CALHOUN CO.WCID#1-WWTP",city:"Port Lavaca","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.56158,longitude:-96.540802},{facility_name:"CITY OF AUSTWELL WWTP",city:"Austwell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.39425,longitude:-96.841694},{facility_name:"ONALASKA WWTP",city:"Onalaska","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.80569,longitude:-95.111548},{facility_name:"CAMBRIDGE MEADOWS WWTP",city:"Rowlett","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.2575,longitude:-96.534166},{facility_name:"KATY ISD MAYDE CREEK WWTP",city:"Katy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.805778,longitude:-95.698556},{facility_name:"CINCO MUD",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.713833,longitude:-95.739111},{facility_name:"CROSBY MUD WWTF",city:"Crosby","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.907417,longitude:-95.073083},{facility_name:"CAMP ALLEN WWTP",city:"Navasota","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.349029,longitude:-95.987583},{facility_name:"MAURICEVILLE MUD WWTP",city:"Mauriceville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.22793,longitude:-93.807393},{facility_name:"SUN ACRES MHP WWTF",city:"Kilgore","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.399944,longitude:-94.91625},{facility_name:"ST IVES RV RESORT WWTP",city:"Pearland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"CITY OF MASON WWTP",city:"Mason","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.739193,longitude:-99.20817},{facility_name:"HARRIS CO IMPROVEMENT DISTRICT 13 WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.972222,longitude:-95.729166},{facility_name:"CITY OF ALVORD WWTP",city:"Alvord","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.352,longitude:-97.7036},{facility_name:"COMMODORE COVE IMPROVEMENT DISTRICT WWTP",city:"Freeport","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.009225,longitude:-95.300572},{facility_name:"GRAND OAKS BUSINESS PARK",city:"Richmond","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.657222,longitude:-95.810277},{facility_name:"ROYAL COACH TRAILS MHP WWTP",city:"Navasota","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.9184,longitude:-95.37708},{facility_name:"LA CASITA HOMES II WWTP",city:"Missouri City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.92285,longitude:-95.47753},{facility_name:"SPLASTOWN WWTP",city:"Kansas City","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.073216,longitude:-95.435293},{facility_name:"RUSH GAS STATION WWTF",city:"Sugar Land","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.796944,longitude:-94.851388},{facility_name:"MONTGOMERY COUNTY MUD 16 WWTP",city:"Splendora","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.196583,longitude:-95.164639},{facility_name:"FOUNTAINVIEW WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.939487,longitude:-95.307718},{facility_name:"CITY OF DILLEY WWTF",city:"Dilley","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.654083,longitude:-99.198056},{facility_name:"KMTEX PORT ARTHUR",city:"Port Arthur","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.829276,longitude:-93.966729},{facility_name:"SEBASTIAN MUD WWTF",city:"Sebastian","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.316,longitude:-97.800639},{facility_name:"HARRIS COUNTY MUD 24 WWTP",city:"Bellaire","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.0305,longitude:-95.534278},{facility_name:"MATAGORDA COUNTY WCID 5 WWTP",city:"Blessing","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.864722,longitude:-96.225914},{facility_name:"MONTGOMERY COUNTY MUD 144 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.261944,longitude:-95.503888},{facility_name:"SCHLUMBERGER ROSHARON COMPLETIONS",city:"Rosharon","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.371472,longitude:-95.443028},{facility_name:"BAYSIDE WATER RECLAMATION FACILITY",city:"Bayside","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.095556,longitude:-97.231861},{facility_name:"CITY OF CORRIGAN WWTP",city:"Corrigan","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.999444,longitude:-94.821944},{facility_name:"BRAZORIA - FORT BEND COUNTIES MUD 3 WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.474839,longitude:-95.45422},{facility_name:"SLIDELL ISD WWTP",city:"Slidell","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.365222,longitude:-97.388112},{facility_name:"CITY OF MIDWAY WWTP",city:"Midway","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.026982,longitude:-95.742195},{facility_name:"CITY OF NORMANGEE WWTF",city:"Normangee","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.032944,longitude:-96.114111},{facility_name:"CITY OF SKELLYTOWN WWTP",city:"Skellytown","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:35.566388,longitude:-101.179722},{facility_name:"LONE STAR WWTP",city:"Lone Star","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.908684,longitude:-94.705559},{facility_name:"EAGLE CREEK RANCH WTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.490957,longitude:-94.815638},{facility_name:"CANAL WTP",city:"El Paso","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.751887,longitude:-106.492106},{facility_name:"MAGNOLIA SPRINGS WASTEWATER TREATMENT FACILITY",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.289644,longitude:-95.770486},{facility_name:"TOWN OF ROUND TOP WWTP",city:"Round Top","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.072779,longitude:-96.690278},{facility_name:"CITY OF INDUSTRY WWTP",city:"Industry","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.980834,longitude:-96.519586},{facility_name:"THE PARK",city:"Sugarland","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.711388,longitude:-102.673888},{facility_name:"CITY OF SOMERVILLE WWTF",city:"Sommerville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.351067,longitude:-96.522811},{facility_name:"CAMP FOR ALL FOUNDATION WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.241028,longitude:-96.577722},{facility_name:"GLEN OAKS MHP WWTF",city:"Orlando","state_postal;":"FL",state:"Fla.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.64215,longitude:-96.25819},{facility_name:"CITY OF BURTON WWTP",city:"Burton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.150318,longitude:-96.679278},{facility_name:"CITY OF SNOOK WWTP",city:"Snook","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.504083,longitude:-96.448},{facility_name:"D&L MHP WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.88942,longitude:-95.38885},{facility_name:"LAZY RIVER IMPROVEMENT DISTRICT WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.228612,longitude:-95.438803},{facility_name:"529 #35 LTD WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.88008,longitude:-95.58837},{facility_name:"RENE HINOJOSA WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.894444,longitude:-95.286333},{facility_name:"SAN PATRICIO COUNTY MUD 1",city:"Edroy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.969889,longitude:-97.676972},{facility_name:"RIVERIA WCID WWTF",city:"Riviera","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.290778,longitude:-97.819444},{facility_name:"HARMONY ISD WWTP",city:"Big Sandy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.746778,longitude:-95.107806},{facility_name:"THE CROSSING AT HAVENWOOD WWTP",city:"San Marcos","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.777222,longitude:-98.058333},{facility_name:"WARREN ISD-HIGH SCHOOL WWTF",city:"Warren","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.614145,longitude:-94.393765},{facility_name:"KIRBY CREEK WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.203528,longitude:-98.396722},{facility_name:"LOMETA REGIONAL WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.227639,longitude:-98.41775},{facility_name:"CITY OF JEWETT WWTP",city:"Jewett","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.353417,longitude:-96.133417},{facility_name:"LEON ISD WWTP",city:"Jewett","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.314124,longitude:-96.211807},{facility_name:"YELLOW ROSE TRAVEL PLAZA WTP",city:"Pasadena","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.093055,longitude:-95.963055},{facility_name:"CAMP SWIFT REGIONAL WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.16978,longitude:-97.30609},{facility_name:"SUNDOWN RANCH WWTP",city:"Irving","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.423888,longitude:-95.868055},{facility_name:"HOUSTON POLYMERS TERMINAL WWTP",city:"La Porte","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.695819,longitude:-95.06216},{facility_name:"CITY OF BOGATA RECLAMATION WWT",city:"Bogata","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.450333,longitude:-95.205778},{facility_name:"ZAPATA COUNTY WATERWORKS SEWER DIVISION WWTP",city:"Zapata","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.892806,longitude:-99.271694},{facility_name:"ZAPATA COUNTY CHIHUAHUA WWTF",city:"Zapata","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.78475,longitude:-99.118556},{facility_name:"HOLLY LAKE CONDOMINIUM ASSOCIATION WWTP",city:"Hawkins","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.71732,longitude:-95.20621},{facility_name:"SPORT HARBOUR MARINA WWTF",city:"Montgomery","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.372694,longitude:-95.631611},{facility_name:"DUCO JACINTOPORT WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.75508,longitude:-95.10363},{facility_name:"LAKE TAWAKONI RV CAMPGROUND WWTF",city:"Chicago","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.878722,longitude:-95.909389},{facility_name:"MHC TT LAKE WHITNEY PRESERVE",city:"Chicago","state_postal;":"IL",state:"Ill.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.004583,longitude:-97.351111},{facility_name:"LOST CREEK WWTP",city:"Conroe","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.350833,longitude:-95.373055},{facility_name:"WILDWOOD WWTP",city:"Village Mills","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.506861,longitude:-94.43825},{facility_name:"CITY OF SEMINOLE WWTP",city:"Seminole","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.708139,longitude:-102.622944},{facility_name:"CITY OF MULLIN WWTF",city:"Mullin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.550083,longitude:-98.663722},{facility_name:"CITY OF TRINITY WWTP",city:"Trinity","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.943222,longitude:-95.359917},{facility_name:"GBW RAILCAR SERVICES WWTP",city:"Pittsburg","state_postal;":"KS",state:"Kan.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.539028,longitude:-94.250444},{facility_name:"HELMS TRAIL WWTP",city:"Plano","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.697825,longitude:-96.427332},{facility_name:"PALO PINTO COUNTY WWTF",city:"Palo Pinto","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.770944,longitude:-98.305861},{facility_name:"WHITE ROCK WWTP",city:"Corsicana","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.000555,longitude:-96.216388},{facility_name:"PADRE ISLAND NATIONAL SEASHORE WWTF",city:"Corpus Christi","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:27.421639,longitude:-97.311278},{facility_name:"CITY OF MALONE WWTF",city:"Malone","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.909028,longitude:-96.888306},{facility_name:"CITY OF HILLSBORO WWTP",city:"Hillsboro","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.999806,longitude:-97.143806},{facility_name:"CITY OF HUBBARD WWTP",city:"Hubbard","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.835521,longitude:-96.792548},{facility_name:"CITY OF BYNUM WWTP",city:"Bynum","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.968333,longitude:-96.998611},{facility_name:"CITY OF LYFORD WWTP",city:"Lyfor","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:26.415444,longitude:-97.767917},{facility_name:"CRYSTAL PALACE WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.452444,longitude:-94.6485},{facility_name:"LOUIS VUITTON RANCHO 54",city:"San Dimas","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.37493,longitude:-97.26876},{facility_name:"COUNTRY OAKS MHC",city:"Flower Mound","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.8397,longitude:-97.4978},{facility_name:"TDCJ DARRINGTON WWTP",city:"Huntsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.398333,longitude:-95.48972},{facility_name:"WHITE ROCK ESTATES",city:"Trinity","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.913222,longitude:-95.274917},{facility_name:"KING FUELS WWTF",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.79071,longitude:-95.09014},{facility_name:"PINE GULLY WWTP",city:"Seabrook","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.587777,longitude:-95.014444},{facility_name:"CITY OF ELECTRA WWTP",city:"Electra","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:34.009389,longitude:-98.875722},{facility_name:"CITY OF ELDORADO WWTP",city:"Eldorado","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.867417,longitude:-100.583611},{facility_name:"NORTH PARK BUSINESS CENTER WWTF",city:"Kingwood","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.06864,longitude:-95.229119},{facility_name:"HARTWICK GREEN MHP",city:"Trinity","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.885887,longitude:-95.358474},{facility_name:"ROVING MEADOWS UTILITIES WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.80098,longitude:-96.77444},{facility_name:"PETTUS MUD WWTP",city:"Pettus","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.60875,longitude:-97.806306},{facility_name:"SAVOY WWTP",city:"Savoy","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.606361,longitude:-96.367944},{facility_name:"VAN VLECK WWTP",city:"Van Vleck","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.01225,longitude:-95.884056},{facility_name:"BRUSHY WEST WWTP",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.513548,longitude:-97.665861},{facility_name:"ROB AND BESSIE WELDER PARK",city:"Sinton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.06625,longitude:-97.530833},{facility_name:"DRY CREEK WWTF",city:"Pittsburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.99472,longitude:-94.96737},{facility_name:"SPARKS BRANCH WWTP",city:"Pittsburg","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.995833,longitude:-94.940555},{facility_name:"CITY OF MERKEL WWTF",city:"Merkel","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.47096,longitude:-100.01264},{facility_name:"CAMP HOBITZELLE WWTP",city:"Midlothian","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.39597,longitude:-97.00815},{facility_name:"MANSFIELD ISD WWTP",city:"Mansfield","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.554722,longitude:-97.232777},{facility_name:"PLEASANT OAKS WWTP",city:"Glendale","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.45036,longitude:-97.41898},{facility_name:"OAK CREEK WWTP",city:"Weatherford","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:0,longitude:0},{facility_name:"CITY OF WAELDER WWTP",city:"Waelder","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.684139,longitude:-97.292472},{facility_name:"CITY OF HALLSVILLE WWTP",city:"Hallsville","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.505694,longitude:-94.549109},{facility_name:"CITY OF FLATONIA WWTP",city:"Flatonia","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.69747,longitude:-97.10636},{facility_name:"CASS COUNTY REST AREA WWTF",city:"Austin","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.058139,longitude:-94.284528},{facility_name:"HIGH POINT ELEMENTARY WWTF",city:"Navasota","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.34848,longitude:-95.91422},{facility_name:"TAFT FEDERAL PRISON WWTF",city:"Bakersfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:35.31323593,longitude:-118.9210295},{facility_name:"CERES WRF",city:"Ceres","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:37.578026,longitude:-120.975309},{facility_name:"ROCKINGHAM COUNTY HOME",city:"Brentwood","state_postal;":"NH",state:"N.H.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:43.011597,longitude:-71.053187},{facility_name:"ST. HELENS STP/BOISE CASCADE",city:"St Helens","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:45.853539,longitude:-122.800487},{facility_name:"IRWD LOS ALISOS WRP",city:"Irvine","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.66742814,longitude:-117.768144},{facility_name:"GANADO WWTP",city:"Ganado","state_postal;":"AZ",state:"Ariz.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:35.72,longitude:-109.572806},{facility_name:"MANDAN CITY OF",city:"Mandan","state_postal;":"ND",state:"N.D.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:46.82741,longitude:-100.8931},{facility_name:"ROGERS",city:"Rogers","state_postal;":"MN",state:"Minn.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:45.20339,longitude:-93.55895},{facility_name:"BAKERSFIELD WWTP 2",city:"Bakersfield","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:35.31323593,longitude:-118.9210295},{facility_name:"DIXON WWTF",city:"Dixon","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:38.44552,longitude:-121.81613},{facility_name:"ASTORIA, CITY OF",city:"Astoria","state_postal;":"OR",state:"Ore.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:46.201551,longitude:-123.771506},{facility_name:"TERREBONNE PARISH CONS. GOVT.",city:"Houma","state_postal;":"LA",state:"La.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:29.60095,longitude:-90.72722},{facility_name:"NTUA TUBA CITY WWTP",city:"Tuba City","state_postal;":"AZ",state:"Ariz.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:36.12425441,longitude:-111.2206643},{facility_name:"MONTEZUMA COUNTY",city:"Cortez","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:37.30122,longitude:-108.57504},{facility_name:"CITY OF WEST BURLINGTON",city:"West Burlington","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:40.85241392,longitude:-91.22565075},{facility_name:"BOVAY SCOUT RANCH WWTP",city:"Houston","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:30.332472,longitude:-96.026917},{facility_name:"JERRY L RILEY STP",city:"Bardstown","state_postal;":"KY",state:"Ky.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:37.78076,longitude:-85.510741},{facility_name:"OCEAN ISLE BEACH WWTP",city:"Ocean Isle Beach","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.93556073,longitude:-78.47856213},{facility_name:"NORTHERN EDGE CASINO WWTF",city:"Farmington","state_postal;":"NM",state:"N.M.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:36.716269,longitude:-108.255737},{facility_name:"CITY OF BIG WELLS WWTF",city:"Big Wells","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:28.566861,longitude:-99.580806},{facility_name:"SODUS POINT (V) WWTP",city:"Sodus Point","state_postal;":"NY",state:"N.Y.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:43.27275,longitude:-76.997083},{facility_name:"LAKE COUNTY NW REGIONAL PLANT",city:"Lakeport","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:39.02385263,longitude:-122.948426},{facility_name:"LAKE COUNTY SE REGIONAL PLANT",city:"Lakeport","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:39.02385263,longitude:-122.948426},{facility_name:"PRASA UNIBON COMMUNITY WWTP",city:"Morovis","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:18.33164,longitude:-66.374076},{facility_name:"PRASA SAN SEBASTIAN (OLD) WWTP",city:"San Sebastian","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:18.20110101,longitude:-67.13494611},{facility_name:"UPPER BLUE SANITATION DIST",city:"Breckenridge","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:39.5002267,longitude:-106.0430996},{facility_name:"PRASA - PENUELAS WWTP",city:"Penuelas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:18.048805,longitude:-66.721626},{facility_name:"PRASA LAS MARIAS",city:"Las Marias","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:18.24772999,longitude:-66.99288111},{facility_name:"KREMMLING SANITATION DISTRICT",city:"Kremmling","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:40.11947308,longitude:-106.5170757},{facility_name:"PRASA AGUAS BUENAS",city:"Aguas Buenas","state_postal;":"PR",state:"Puerto Rico",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:18.258864,longitude:-66.101851},{facility_name:"CITY OF ROCKWELL CITY",city:"Rockwell City","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:42.39574,longitude:-94.63307},{facility_name:"CITY OF EVANSDALE",city:"Evansdale","state_postal;":"IA",state:"Iowa",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:42.47791,longitude:-92.28808},{facility_name:"RIVERBANK WWTP",city:"Riverbank","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:37.736079,longitude:-120.935741},{facility_name:"EVANS CITY OF",city:"Evans","state_postal;":"CO",state:"Colo.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:40.37739,longitude:-104.69687},{facility_name:"NEWMAN WWTP",city:"Newman","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:37.33527216,longitude:-121.0458027},{facility_name:"TWENTYNINE PALMS USMC MAINSIDE WWTP",city:"Twentynine Palms","state_postal;":"CA",state:"Calif.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:34.47312,longitude:-116.1146472},{facility_name:"FALLON WWTP",city:"Reno","state_postal;":"NV",state:"Nev.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:39.52419,longitude:-119.83857},{facility_name:"PLAINS, CITY OF (PLAINS WPCP)",city:"Plains","state_postal;":"GA",state:"Ga.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.01675,longitude:-84.386306},{facility_name:"DAVIE COUNTY - PUBLIC UTILITIES",city:"Mocksville","state_postal;":"NC",state:"N.C.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:35.81245,longitude:-80.55237},{facility_name:"WATER WORKS AND SEWER BOARD OF THE CITY OF ASHLAND",city:"Ashland","state_postal;":"AL",state:"Ala.",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:33.2742,longitude:-85.8101},{facility_name:"CITY OF KOSSE WWTP",city:"Kosse","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.330333,longitude:-96.626388},{facility_name:"CHILTON WATER SUPPLY & SEWER SERVICE WWTP",city:"Chilton","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:31.267389,longitude:-97.058861},{facility_name:"ALBA WWTF",city:"Alba","state_postal;":"TX",state:"Texas",amount_of_biosolids_generated:0,amount_of_biosolids_managed_land_applied:0,latitude:32.773071,longitude:-95.632543}];function D4(T){let I,P,F,G,et,it,s,ot,ht,At,Yt,Rt,le,Kt,we,Ot;return F=new Dv({props:{rScale:T[1]}}),{c(){I=Ji("div"),P=Ji("div"),mh(F.$$.fragment),G=xn(),et=Ji("div"),it=Ji("span"),it.textContent="Size waste water treatment plants by",s=xn(),ot=Ji("div"),ht=Ji("button"),ht.textContent="Biosolids spread",At=xn(),Yt=Ji("button"),Yt.textContent="Biosolids generated",Rt=xn(),le=Ji("div"),bi(it,"class","dek"),bi(ht,"class","svelte-1s7umaw"),Fm(ht,"active",T[0]=="Prop B"),z1(ht,"--color",T[2][1]),bi(Yt,"class","svelte-1s7umaw"),Fm(Yt,"active",T[0]=="Prop A"),z1(Yt,"--color",T[2][0]),bi(ot,"class","buttons"),bi(et,"class","toggle"),bi(P,"class","controls svelte-1s7umaw"),bi(le,"id","map"),bi(le,"class","svelte-1s7umaw")},m(ue,be){Bu(ue,I,be),ri(I,P),Vm(F,P,null),ri(P,G),ri(P,et),ri(et,it),ri(et,s),ri(et,ot),ri(ot,ht),ri(ot,At),ri(ot,Yt),ri(I,Rt),ri(I,le),Kt=!0,we||(Ot=[dh(ht,"click",T[4]),dh(Yt,"click",T[5])],we=!0)},p(ue,[be]){(!Kt||be&1)&&Fm(ht,"active",ue[0]=="Prop B"),(!Kt||be&1)&&Fm(Yt,"active",ue[0]=="Prop A")},i(ue){Kt||(Gm(F.$$.fragment,ue),Kt=!0)},o(ue){ch(F.$$.fragment,ue),Kt=!1},d(ue){ue&&Nd(I),Xm(F),we=!1,wd(Ot)}}}function F4(T,I,P){let F,G="Prop B",et=wv().domain([0,112530]).range([1,20]),it=null,s=["#966139","#61AA04"];Ed.accessToken="pk.eyJ1IjoiYWd3YXRlcmRlc2siLCJhIjoiY2x2dHBvcHZnMTJwajJsbGx4NDg1NzkzdiJ9.x-5N8xgT9tGsilVw5h5kjw";let ot={top:0,bottom:0,left:0,right:0};function ht(Kt,we){return Kt.map(Ot=>({...Ot,radius_generated:et(Ot.amount_of_biosolids_generated),radius_applied:et(Ot.amount_of_biosolids_managed_land_applied)}))}vb(()=>{F=new Ed.Map({container:"map",style:"mapbox://styles/agwaterdesk/clvtpr8ms05ty01qlb9u95lj2/draft"}),F.fitBounds([-127.001953,24.335836,-67.060547,49.92912],{duration:0}),F.setMinZoom(F.getZoom());const Kt=new W4({accessToken:Ed.accessToken,mapboxgl:Ed,countries:"us",placeholder:"Zoom to location",marker:!1});F.addControl(Kt,"top-left"),F.addControl(new Ed.NavigationControl);let we=ht(M4);F.on("load",()=>{F.addSource("sites",{type:"geojson",data:{type:"FeatureCollection",features:we.map(Ot=>({type:"Feature",properties:{facility_name:Ot.facility_name,city:Ot.city,state:Ot.state,radius_generated:Ot.radius_generated,radius_applied:Ot.radius_applied,amount_of_biosolids_generated:Ot.amount_of_biosolids_generated,amount_of_biosolids_managed_land_applied:Ot.amount_of_biosolids_managed_land_applied},geometry:{type:"Point",coordinates:[Ot.longitude,Ot.latitude]}}))}}),F.addLayer({id:"circle-layer",type:"circle",source:"sites",paint:{"circle-radius":["get",G=="Prop A"?"radius_generated":"radius_applied"],"circle-color":G=="Prop A"?s[0]:s[1],"circle-opacity":.25,"circle-stroke-width":1,"circle-stroke-color":G=="Prop A"?s[0]:s[1]}}),At(),it=new Ed.Popup({closeButton:!1,closeOnClick:!1,offset:25}),F.on("mousemove","circle-layer",Ot=>{if(Ot.features.length>0){F.getCanvas().style.cursor="pointer";const ue=Ot.features[0],be=ue.properties;F.setPaintProperty("circle-layer","circle-stroke-width",["case",["==",["get","facility_name"],ue.properties.facility_name],2,1]),F.setPaintProperty("circle-layer","circle-stroke-color",["case",["==",["get","facility_name"],ue.properties.facility_name],"#000000",G=="Prop A"?s[0]:s[1]]),it.setLngLat(Ot.lngLat).setHTML(`
            <strong>${be.facility_name}</strong><br/>
            <em>${be.city}, ${be.state}</em>  <br/>
          
            <p><b>Biosolids generated:</b> ${be.amount_of_biosolids_generated.toLocaleString()} dry tons</p>
            <p><b>Biosolids spread:</b> ${be.amount_of_biosolids_managed_land_applied.toLocaleString()} dry tons</p>

            `).addTo(F)}}),F.on("mouseleave","circle-layer",()=>{F.getCanvas().style.cursor="",F.setPaintProperty("circle-layer","circle-stroke-width",1),F.setPaintProperty("circle-layer","circle-stroke-color",G=="Prop A"?s[0]:s[1]),it.remove()})}),Kt.on("result",({result:Ot})=>{Ot.bbox?F.fitBounds(Ot.bbox,{padding:ot}):Ot.center&&F.flyTo({center:Ot.center,zoom:10,essential:!0})})});function At(){F.setPaintProperty("circle-layer","circle-radius",["get",G=="Prop A"?"radius_generated":"radius_applied"]),F.setPaintProperty("circle-layer","circle-color",G=="Prop A"?s[0]:s[1]),F.setPaintProperty("circle-layer","circle-stroke-color",G=="Prop A"?s[0]:s[1]),F.setFilter("circle-layer",["!=",["get",G=="Prop A"?"amount_of_biosolids_generated":"amount_of_biosolids_managed_land_applied"],0])}function Yt(Kt){P(0,G=Kt),At()}return[G,et,s,Yt,()=>Yt("Prop B"),()=>Yt("Prop A")]}let B4=class extends nf{constructor(I){super(),of(this,I,F4,D4,Yu,{})}};var TT={exports:{}};/*! pym.js - v1.3.2 - 2018-02-13 */(function(T){(function(I){T.exports?T.exports=I():window.pym=I.call(this)})(function(){var I="xPYMx",P={},F=function(Rt){var le=document.createEvent("Event");le.initEvent("pym:"+Rt,!0,!0),document.dispatchEvent(le)},G=function(Rt){var le=new RegExp("[\\?&]"+Rt.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)"),Kt=le.exec(location.search);return Kt===null?"":decodeURIComponent(Kt[1].replace(/\+/g," "))},et=function(Rt,le){if(!(le.xdomain!=="*"&&!Rt.origin.match(new RegExp(le.xdomain+"$")))&&typeof Rt.data=="string")return!0},it=function(Rt){var le=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/gi;if(Rt.match(le))return!0},s=function(Rt,le,Kt){var we=["pym",Rt,le,Kt];return we.join(I)},ot=function(Rt){var le=["pym",Rt,"(\\S+)","(.*)"];return new RegExp("^"+le.join(I)+"$")},ht=Date.now||function(){return new Date().getTime()},At=function(Rt,le,Kt){var we,Ot,ue,be=null,Me=0;Kt||(Kt={});var Fa=function(){Me=Kt.leading===!1?0:ht(),be=null,ue=Rt.apply(we,Ot),be||(we=Ot=null)};return function(){var ia=ht();!Me&&Kt.leading===!1&&(Me=ia);var Oa=le-(ia-Me);return we=this,Ot=arguments,Oa<=0||Oa>le?(be&&(clearTimeout(be),be=null),Me=ia,ue=Rt.apply(we,Ot),be||(we=Ot=null)):!be&&Kt.trailing!==!1&&(be=setTimeout(Fa,Oa)),ue}},Yt=function(){for(var Rt=P.autoInitInstances.length,le=Rt-1;le>=0;le--){var Kt=P.autoInitInstances[le];Kt.el.getElementsByTagName("iframe").length&&Kt.el.getElementsByTagName("iframe")[0].contentWindow||P.autoInitInstances.splice(le,1)}};return P.autoInitInstances=[],P.autoInit=function(Rt){var le=document.querySelectorAll("[data-pym-src]:not([data-pym-auto-initialized])"),Kt=le.length;Yt();for(var we=0;we<Kt;++we){var Ot=le[we];Ot.setAttribute("data-pym-auto-initialized",""),Ot.id===""&&(Ot.id="pym-"+we+"-"+Math.random().toString(36).substr(2,5));var ue=Ot.getAttribute("data-pym-src"),be={xdomain:"string",title:"string",name:"string",id:"string",sandbox:"string",allowfullscreen:"boolean",parenturlparam:"string",parenturlvalue:"string",optionalparams:"boolean",trackscroll:"boolean",scrollwait:"number"},Me={};for(var Fa in be)if(Ot.getAttribute("data-pym-"+Fa)!==null)switch(be[Fa]){case"boolean":Me[Fa]=Ot.getAttribute("data-pym-"+Fa)!=="false";break;case"string":Me[Fa]=Ot.getAttribute("data-pym-"+Fa);break;case"number":var ia=Number(Ot.getAttribute("data-pym-"+Fa));isNaN(ia)||(Me[Fa]=ia);break;default:console.err("unrecognized attribute type")}var Oa=new P.Parent(Ot.id,ue,Me);P.autoInitInstances.push(Oa)}return Rt||F("pym-initialized"),P.autoInitInstances},P.Parent=function(Rt,le,Kt){this.id=Rt,this.url=le,this.el=document.getElementById(Rt),this.iframe=null,this.settings={xdomain:"*",optionalparams:!0,parenturlparam:"parentUrl",parenturlvalue:window.location.href,trackscroll:!1,scrollwait:100},this.messageRegex=ot(this.id),this.messageHandlers={},Kt=Kt||{},this._constructIframe=function(){var Ot=this.el.offsetWidth.toString();this.iframe=document.createElement("iframe");var ue="",be=this.url.indexOf("#");for(be>-1&&(ue=this.url.substring(be,this.url.length),this.url=this.url.substring(0,be)),this.url.indexOf("?")<0?this.url+="?":this.url+="&",this.iframe.src=this.url+"initialWidth="+Ot+"&childId="+this.id,this.settings.optionalparams&&(this.iframe.src+="&parentTitle="+encodeURIComponent(document.title),this.iframe.src+="&"+this.settings.parenturlparam+"="+encodeURIComponent(this.settings.parenturlvalue)),this.iframe.src+=ue,this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("frameborder","0"),this.settings.title&&this.iframe.setAttribute("title",this.settings.title),this.settings.allowfullscreen!==void 0&&this.settings.allowfullscreen!==!1&&this.iframe.setAttribute("allowfullscreen",""),this.settings.sandbox!==void 0&&typeof this.settings.sandbox=="string"&&this.iframe.setAttribute("sandbox",this.settings.sandbox),this.settings.id&&(document.getElementById(this.settings.id)||this.iframe.setAttribute("id",this.settings.id)),this.settings.name&&this.iframe.setAttribute("name",this.settings.name);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(this.iframe),window.addEventListener("resize",this._onResize),this.settings.trackscroll&&window.addEventListener("scroll",this._throttleOnScroll)},this._onResize=(function(){this.sendWidth(),this.settings.trackscroll&&this.sendViewportAndIFramePosition()}).bind(this),this._onScroll=(function(){this.sendViewportAndIFramePosition()}).bind(this),this._fire=function(Ot,ue){if(Ot in this.messageHandlers)for(var be=0;be<this.messageHandlers[Ot].length;be++)this.messageHandlers[Ot][be].call(this,ue)},this.remove=function(){window.removeEventListener("message",this._processMessage),window.removeEventListener("resize",this._onResize),this.el.removeChild(this.iframe),Yt()},this._processMessage=(function(Ot){if(et(Ot,this.settings)&&typeof Ot.data=="string"){var ue=Ot.data.match(this.messageRegex);if(!ue||ue.length!==3)return!1;var be=ue[1],Me=ue[2];this._fire(be,Me)}}).bind(this),this._onHeightMessage=function(Ot){var ue=parseInt(Ot);this.iframe.setAttribute("height",ue+"px")},this._onNavigateToMessage=function(Ot){it(Ot)&&(document.location.href=Ot)},this._onScrollToChildPosMessage=function(Ot){var ue=document.getElementById(this.id).getBoundingClientRect().top+window.pageYOffset,be=ue+parseInt(Ot);window.scrollTo(0,be)},this.onMessage=function(Ot,ue){Ot in this.messageHandlers||(this.messageHandlers[Ot]=[]),this.messageHandlers[Ot].push(ue)},this.sendMessage=function(Ot,ue){this.el.getElementsByTagName("iframe").length&&(this.el.getElementsByTagName("iframe")[0].contentWindow?this.el.getElementsByTagName("iframe")[0].contentWindow.postMessage(s(this.id,Ot,ue),"*"):this.remove())},this.sendWidth=function(){var Ot=this.el.offsetWidth.toString();this.sendMessage("width",Ot)},this.sendViewportAndIFramePosition=function(){var Ot=this.iframe.getBoundingClientRect(),ue=window.innerWidth||document.documentElement.clientWidth,be=window.innerHeight||document.documentElement.clientHeight,Me=ue+" "+be;Me+=" "+Ot.top+" "+Ot.left,Me+=" "+Ot.bottom+" "+Ot.right,this.sendMessage("viewport-iframe-position",Me)};for(var we in Kt)this.settings[we]=Kt[we];return this._throttleOnScroll=At(this._onScroll.bind(this),this.settings.scrollwait),this.onMessage("height",this._onHeightMessage),this.onMessage("navigateTo",this._onNavigateToMessage),this.onMessage("scrollToChildPos",this._onScrollToChildPosMessage),this.onMessage("parentPositionInfo",this.sendViewportAndIFramePosition),window.addEventListener("message",this._processMessage,!1),this._constructIframe(),this},P.Child=function(Rt){this.parentWidth=null,this.id=null,this.parentTitle=null,this.parentUrl=null,this.settings={renderCallback:null,xdomain:"*",polling:0,parenturlparam:"parentUrl"},this.timerId=null,this.messageRegex=null,this.messageHandlers={},Rt=Rt||{},this.onMessage=function(Ot,ue){Ot in this.messageHandlers||(this.messageHandlers[Ot]=[]),this.messageHandlers[Ot].push(ue)},this._fire=function(Ot,ue){if(Ot in this.messageHandlers)for(var be=0;be<this.messageHandlers[Ot].length;be++)this.messageHandlers[Ot][be].call(this,ue)},this._processMessage=(function(Ot){if(et(Ot,this.settings)&&typeof Ot.data=="string"){var ue=Ot.data.match(this.messageRegex);if(!(!ue||ue.length!==3)){var be=ue[1],Me=ue[2];this._fire(be,Me)}}}).bind(this),this._onWidthMessage=function(Ot){var ue=parseInt(Ot);ue!==this.parentWidth&&(this.parentWidth=ue,this.settings.renderCallback&&this.settings.renderCallback(ue),this.sendHeight())},this.sendMessage=function(Ot,ue){window.parent.postMessage(s(this.id,Ot,ue),"*")},this.sendHeight=(function(){var Ot=document.getElementsByTagName("body")[0].offsetHeight.toString();return this.sendMessage("height",Ot),Ot}).bind(this),this.getParentPositionInfo=function(){this.sendMessage("parentPositionInfo")},this.scrollParentTo=function(Ot){this.sendMessage("navigateTo","#"+Ot)},this.navigateParentTo=function(Ot){this.sendMessage("navigateTo",Ot)},this.scrollParentToChildEl=function(Ot){var ue=document.getElementById(Ot).getBoundingClientRect().top+window.pageYOffset;this.scrollParentToChildPos(ue)},this.scrollParentToChildPos=function(Ot){this.sendMessage("scrollToChildPos",Ot.toString())};var le=function(Ot){var ue=document.getElementsByTagName("html")[0],be,Me=ue.className;try{window.self!==window.top?be="embedded":be="not-embedded"}catch{be="embedded"}Me.indexOf(be)<0&&(ue.className=Me?Me+" "+be:be,Ot&&Ot(be),F("marked-embedded"))};this.remove=function(){window.removeEventListener("message",this._processMessage),this.timerId&&clearInterval(this.timerId)};for(var Kt in Rt)this.settings[Kt]=Rt[Kt];this.id=G("childId")||Rt.id,this.messageRegex=new RegExp("^pym"+I+this.id+I+"(\\S+)"+I+"(.*)$");var we=parseInt(G("initialWidth"));return this.parentUrl=G(this.settings.parenturlparam),this.parentTitle=G("parentTitle"),this.onMessage("width",this._onWidthMessage),window.addEventListener("message",this._processMessage,!1),this.settings.renderCallback&&this.settings.renderCallback(we),this.sendHeight(),this.settings.polling&&(this.timerId=window.setInterval(this.sendHeight,this.settings.polling)),le(Rt.onMarkedEmbeddedStatus),this},typeof document<"u"&&P.autoInit(!0),P})})(TT);var U4=TT.exports;const k4=sf(U4);function z4(T){let I,P,F,G,et,it,s,ot,ht,At,Yt;return I=new NA({}),At=new B4({}),{c(){mh(I.$$.fragment),P=xn(),F=Ji("div"),G=Ji("h1"),G.textContent="Most sewage sludge from wastewater treatment plants is applied to land",et=xn(),it=Ji("p"),it.innerHTML=`More than half of all sewage sludge generated at wastewater treatment
    plants, sometimes called biosolids, is spread on land as fertilizer. Most of
    the rest is buried in landfills or burned in incinerators. Sludge can also
    pose environmental risks, including PFAS contamination. The U.S.
    Environmental Protection Agency collects annual reports from roughly 2,500
    larger facilities that generate sewage sludge. For more information on the
    facilities and states included in the EPA&#39;s ECHO database, please visit the
    <a target="_blank" href="https://www.epa.gov/biosolids/basic-information-about-biosolids#basics">EPA&#39;s website</a>.`,s=xn(),ot=Ji("p"),ot.textContent="[altText]",ht=xn(),mh(At.$$.fragment),bi(G,"class","headline"),bi(it,"class","dek"),bi(ot,"class","sr-only"),bi(F,"class","chart-container svelte-11wizzl")},m(Rt,le){Vm(I,Rt,le),Bu(Rt,P,le),Bu(Rt,F,le),ri(F,G),ri(F,et),ri(F,it),ri(F,s),ri(F,ot),ri(F,ht),Vm(At,F,null),Yt=!0},p:go,i(Rt){Yt||(Gm(I.$$.fragment,Rt),Gm(At.$$.fragment,Rt),Yt=!0)},o(Rt){ch(I.$$.fragment,Rt),ch(At.$$.fragment,Rt),Yt=!1},d(Rt){Xm(I,Rt),Rt&&Nd(P),Rt&&Nd(F),Xm(At)}}}function H4(T){return new k4.Child({polling:500}),[]}class Y4 extends nf{constructor(I){super(),of(this,I,H4,z4,Yu,{})}}new Y4({target:document.getElementById("app")});
